{"version":3,"file":"main.js","mappings":"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AA;AAIJA,MAAAA,0DAAAA;AAEAA,MAAAA,4DAAAA;AACIA,MAAAA,wDAAAA;AAcJA,MAAAA,0DAAAA;AAEJA,MAAAA,0DAAAA;;;;AA/BQA,MAAAA,wDAAAA,uBAAiB,MAAjB,EAAiBA,yDAAAA,iBAAjB;AAUeA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVvB;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASE,OAAT,CAAiBhiC,KAAjB,EAAwB4jB,KAAxB,EAA+B;AAC7B,SAAO4Z,WAAW,CAACx9B,KAAD,EAAQ4jB,KAAR,CAAlB;AACD;AAED;;;AACA,IAAIqe,SAAS,GAAG,iBAAhB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,QAAT,CAAkBliC,KAAlB,EAAyB;AACvB,SAAO,OAAOA,KAAP,IAAgB,QAAhB,IACJ0mB,YAAY,CAAC1mB,KAAD,CAAZ,IAAuB4hB,UAAU,CAAC5hB,KAAD,CAAV,IAAqBiiC,SAD/C;AAED;AAED;;;AACA,IAAIE,SAAS,GAAG,iBAAhB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,QAAT,CAAkBpiC,KAAlB,EAAyB;AACvB,SAAO,OAAOA,KAAP,IAAgB,QAAhB,IACJ,CAAConB,SAAS,CAACpnB,KAAD,CAAV,IAAqB0mB,YAAY,CAAC1mB,KAAD,CAAjC,IAA4C4hB,UAAU,CAAC5hB,KAAD,CAAV,IAAqBmiC,SADpE;AAED;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASE,WAAT,CAAqBriC,KAArB,EAA4B;AAC1B,SAAOA,KAAK,KAAKL,SAAjB;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS2iC,YAAT,CAAsBpgC,KAAtB,EAA6BukB,QAA7B,EAAuC8b,UAAvC,EAAmD;AACjD,MAAItpC,KAAK,GAAG,CAAC,CAAb;AAAA,MACIC,MAAM,GAAGgJ,KAAK,CAAChJ,MADnB;;AAGA,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CA;AACA;AACA;CAEA;;AACA;AACA;AACA;CAEA;;AACA;AACA;CAEA;;AACA;AACA;AACA;AACA;AACA;AACA;CAEA;;AACA;AACA;AACA;AACA;AACA;CAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;CAEA;;AACA;CAEA;;AACA;AACA;AACA;AACA;AACA;AACA;CAEA;;AACA;AACA;CAEA;;CAEA;;AACA;CAEA;;AACA;CAEA;;AACA;AACA;AACA;AACA;CAEA;;CAEA;;AACA;AACA;CAEA;;AACA;CAEA;;AACA;CAEA;;CAEA;;AACA;AACA;CAEA;;AACA;AACA;AACA;CAEA;;AACA;AACA;CAEA;;AACA;CAEA;;CAEA;;CAEA;;CAEA;;CAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;CAEA;;AACA;CAEA;;AACA;CAEA;;CAEA;;AACA;AACA;CAEA;;AACA;CAEA;;AACA;AACA;AACA;AACA;AACA;CAEA;;AACA;AACA;CAEA;;AACA;CAEA;;CAEA;;AACA;AACA;CAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;CAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;CAEA;;CAEA;;AACA;AACA;AACA;CAEA;;AACA;CAEA;;CAEA;;AACA;AACA;CAEA;;AACA;AACA;CAEA;;AACA;AACA;AACA;CAEA;;AACA;CAEA;;AACA;CAEA;;AACA;CAEA;;AACA;AACA;AACA;AACA;AACA;CAEA;;AACA;CAEA;;CAEA;;AACA;CAEA;;AACA;AACA;AACA;AACA;CAEA;;AACA;AACA;AACA;AACA;AACA;CAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;CAEA;;AACA;CAEA;;AACA;AACA;CAEA;;AACA;AACA;AACA;AACA;CAEA;;AACA;CAEA;;CAEA;;CAEA;;CAEA;;AACA;CAEA;;AACA;AACA;CAEA;;;;;;;;;;;;;;;;;;;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","sources":["./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.filter.pipe.ts","./src/app/app.highlight.pipe.ts","./src/app/app.module.ts","./src/app/app.utils.ts","./src/environments/environment.ts","./src/examples/action-bar-basic/example-action-bar-basic.component.ts","./src/examples/action-bar-basic/example-action-bar-basic.component.html","./src/examples/action-bar-on-enter/example-action-bar-on-enter.component.ts","./src/examples/action-bar-on-enter/example-action-bar-on-enter.component.html","./src/examples/action-bar-template/example-action-bar-template.component.ts","./src/examples/action-bar-template/example-action-bar-template.component.html","./src/examples/aggregate-column-basic/example-aggregate-column-basic.component.ts","./src/examples/aggregate-column-basic/example-aggregate-column-basic.component.html","./src/examples/alt-basic/example-alt-basic.component.ts","./src/examples/alt-basic/example-alt-basic.component.html","./src/examples/cell-tooltip-basic/example-cell-tooltip-basic.component.ts","./src/examples/cell-tooltip-basic/example-cell-tooltip-basic.component.html","./src/examples/column-array-basic/example-column-array-basic.component.html","./src/examples/column-array-basic/example-column-array-basic.component.ts","./src/examples/column-autocomplete-basic/example-column-autocomplete-basic.component.ts","./src/examples/column-autocomplete-basic/example-column-autocomplete-basic.component.html","./src/examples/column-bool-basic/example-column-bool-basic.component.html","./src/examples/column-bool-basic/example-column-bool-basic.component.ts","./src/examples/column-currency-basic/example-column-currency-basic.component.html","./src/examples/column-currency-basic/example-column-currency-basic.component.ts","./src/examples/column-data-safe/example-column-data-safe.component.ts","./src/examples/column-data-safe/example-column-data-safe.component.html","./src/examples/column-date-basic/example-column-date-basic.component.html","./src/examples/column-date-basic/example-column-date-basic.component.ts","./src/examples/column-datetime-basic/example-column-datetime-basic.component.html","./src/examples/column-datetime-basic/example-column-datetime-basic.component.ts","./src/examples/column-dropdown-basic/example-column-dropdown-basic.component.ts","./src/examples/column-dropdown-basic/example-column-dropdown-basic.component.html","./src/examples/column-email-basic/example-column-email-basic.component.html","./src/examples/column-email-basic/example-column-email-basic.component.ts","./src/examples/column-file-basic/example-column-file-basic.component.html","./src/examples/column-file-basic/example-column-file-basic.component.ts","./src/examples/column-id-basic/example-column-id-basic.component.html","./src/examples/column-id-basic/example-column-id-basic.component.ts","./src/examples/column-image-basic/example-column-image-basic.component.html","./src/examples/column-image-basic/example-column-image-basic.component.ts","./src/examples/column-list-basic/example-column-list-basic.component.ts","./src/examples/column-list-basic/example-column-list-basic.component.html","./src/examples/column-list-loop/example-column-list-loop.component.ts","./src/examples/column-list-loop/example-column-list-loop.component.html","./src/examples/column-number-basic/example-column-number-basic.component.html","./src/examples/column-number-basic/example-column-number-basic.component.ts","./src/examples/column-password-basic/example-column-password-basic.component.html","./src/examples/column-password-basic/example-column-password-basic.component.ts","./src/examples/column-reference-basic/example-column-reference-basic.component.ts","./src/examples/column-reference-basic/example-column-reference-basic.component.html","./src/examples/column-row-indicator-basic/example-column-row-indicator-basic.component.html","./src/examples/column-row-indicator-basic/example-column-row-indicator-basic.component.ts","./src/examples/column-row-number-basic/example-column-row-number-basic.component.html","./src/examples/column-row-number-basic/example-column-row-number-basic.component.ts","./src/examples/column-row-options-basic/example-column-row-options-basic.component.ts","./src/examples/column-row-options-basic/example-column-row-options-basic.component.html","./src/examples/column-text-basic/example-column-text-basic.component.html","./src/examples/column-text-basic/example-column-text-basic.component.ts","./src/examples/column-time-basic/example-column-time-basic.component.html","./src/examples/column-time-basic/example-column-time-basic.component.ts","./src/examples/column-tooltip-basic/example-column-tooltip-basic.component.ts","./src/examples/column-tooltip-basic/example-column-tooltip-basic.component.html","./src/examples/column-type-safe/example-column-type-safe.component.ts","./src/examples/column-type-safe/example-column-type-safe.component.html","./src/examples/column-url-basic/example-column-url-basic.component.html","./src/examples/column-url-basic/example-column-url-basic.component.ts","./src/examples/column-visibility-basic/example-column-visibility-basic.component.ts","./src/examples/column-visibility-basic/example-column-visibility-basic.component.html","./src/examples/copy-value-from-cell/example-copy-value-from-cell.component.ts","./src/examples/copy-value-from-cell/example-copy-value-from-cell.component.html","./src/examples/data-provider/example-data-provider.component.ts","./src/examples/data-provider/example-data-provider.component.html","./src/examples/data-row-add/example-data-row-add.component.ts","./src/examples/data-row-add/example-data-row-add.component.html","./src/examples/data-row-delete-selection/example-data-row-delete-selection.component.ts","./src/examples/data-row-delete-selection/example-data-row-delete-selection.component.html","./src/examples/data-row-delete/example-data-row-delete.component.ts","./src/examples/data-row-delete/example-data-row-delete.component.html","./src/examples/data.service.ts","./src/examples/define-column-async/example-define-column-async.component.ts","./src/examples/define-column-async/example-define-column-async.component.html","./src/examples/define-column-basic/example-define-column-basic.component.ts","./src/examples/define-column-basic/example-define-column-basic.component.html","./src/examples/define-column-hybrid/example-define-column-hybrid.component.ts","./src/examples/define-column-hybrid/example-define-column-hybrid.component.html","./src/examples/define-column-type/example-define-column-type.component.ts","./src/examples/define-column-type/example-define-column-type.component.html","./src/examples/destroy-grid-basic/example-destroy-grid-basic.component.ts","./src/examples/destroy-grid-basic/example-destroy-grid-basic.component.html","./src/examples/destroy-grid-model/example-destroy-grid-model.component.ts","./src/examples/destroy-grid-model/example-destroy-grid-model.component.html","./src/examples/details-row-all/example-details-row-all.component.ts","./src/examples/details-row-all/example-details-row-all.component.html","./src/examples/details-row-api/example-details-row-api.component.ts","./src/examples/details-row-api/example-details-row-api.component.html","./src/examples/details-row-basic/example-details-row-basic.component.ts","./src/examples/details-row-basic/example-details-row-basic.component.html","./src/examples/details-row-custom/example-details-row-custom.component.ts","./src/examples/details-row-custom/example-details-row-custom.component.html","./src/examples/details-row-grid/example-details-row-grid.component.ts","./src/examples/details-row-grid/example-details-row-grid.component.html","./src/examples/details-row-pin/example-details-row-pin.component.ts","./src/examples/details-row-pin/example-details-row-pin.component.html","./src/examples/details-row-select/example-details-row-select.component.ts","./src/examples/details-row-select/example-details-row-select.component.html","./src/examples/details-row-start/example-details-row-start.component.ts","./src/examples/details-row-start/example-details-row-start.component.html","./src/examples/drag-column-basic/example-drag-column-basic.component.ts","./src/examples/drag-column-basic/example-drag-column-basic.component.html","./src/examples/drag-row-basic/example-drag-row-basic.component.ts","./src/examples/drag-row-basic/example-drag-row-basic.component.html","./src/examples/drag-row-node/example-drag-row-node.component.ts","./src/examples/drag-row-node/example-drag-row-node.component.html","./src/examples/dynamic-column-model/example-dynamic-column-model.component.html","./src/examples/dynamic-column-model/example-dynamic-column-model.component.ts","./src/examples/edit-cell-basic/example-edit-cell-basic.component.ts","./src/examples/edit-cell-basic/example-edit-cell-basic.component.html","./src/examples/edit-cell-batch/example-edit-cell-batch.component.ts","./src/examples/edit-cell-batch/example-edit-cell-batch.component.html","./src/examples/edit-row-basic/example-edit-row-basic.component.ts","./src/examples/edit-row-basic/example-edit-row-basic.component.html","./src/examples/edit-row-custom/example-edit-row-custom.component.ts","./src/examples/edit-row-custom/example-edit-row-custom.component.html","./src/examples/example.module.ts","./src/examples/export-basic/example-export-basic.component.ts","./src/examples/export-basic/example-export-basic.component.html","./src/examples/export-csv/example-export-csv.component.ts","./src/examples/export-csv/example-export-csv.component.html","./src/examples/filter-column-fetch/example-filter-column-fetch.component.ts","./src/examples/filter-column-fetch/example-filter-column-fetch.component.html","./src/examples/filter-condition-basic/example-filter-condition-basic.component.ts","./src/examples/filter-condition-basic/example-filter-condition-basic.component.html","./src/examples/filter-row-atom-basic/example-filter-row-atom-basic.component.ts","./src/examples/filter-row-atom-basic/example-filter-row-atom-basic.component.html","./src/examples/filter-row-custom/example-filter-row-custom.component.ts","./src/examples/filter-row-custom/example-filter-row-custom.component.html","./src/examples/filter-row-people-basic/example-filter-row-people-basic.component.ts","./src/examples/filter-row-people-basic/example-filter-row-people-basic.component.html","./src/examples/floating-rows-basic/example-floating-rows-basic.component.ts","./src/examples/floating-rows-basic/example-floating-rows-basic.component.html","./src/examples/focus-cell-auto/example-focus-cell-auto.component.ts","./src/examples/focus-cell-auto/example-focus-cell-auto.component.html","./src/examples/focus-cell-basic/example-focus-cell-basic.component.ts","./src/examples/focus-cell-basic/example-focus-cell-basic.component.html","./src/examples/focus-cell-custom/example-focus-cell-custom.component.ts","./src/examples/focus-cell-custom/example-focus-cell-custom.component.html","./src/examples/generate-column-check/example-generate-column-check.component.html","./src/examples/generate-column-check/example-generate-column-check.component.ts","./src/examples/generate-column-cohort/example-generate-column-cohort.component.ts","./src/examples/generate-column-cohort/example-generate-column-cohort.component.html","./src/examples/generate-column-deep/example-generate-column-deep.component.ts","./src/examples/generate-column-deep/example-generate-column-deep.component.html","./src/examples/generate-column-raw/example-generate-column-raw.component.ts","./src/examples/generate-column-raw/example-generate-column-raw.component.html","./src/examples/generate-column-shallow/example-generate-column-shallow.component.ts","./src/examples/generate-column-shallow/example-generate-column-shallow.component.html","./src/examples/grid-list-basic/example-grid-list-basic.component.ts","./src/examples/grid-list-basic/example-grid-list-basic.component.html","./src/examples/grid-size/example-grid-size.component.ts","./src/examples/grid-size/example-grid-size.component.html","./src/examples/group-column-basic/example-group-column-basic.component.ts","./src/examples/group-column-basic/example-group-column-basic.component.html","./src/examples/group-row-aggregation/example-group-row-aggregation.component.ts","./src/examples/group-row-aggregation/example-group-row-aggregation.component.html","./src/examples/group-row-basic/example-group-row-basic.component.ts","./src/examples/group-row-basic/example-group-row-basic.component.html","./src/examples/group-row-edit/example-group-row-edit.component.ts","./src/examples/group-row-edit/example-group-row-edit.component.html","./src/examples/group-row-flat/example-group-row-flat.component.ts","./src/examples/group-row-flat/example-group-row-flat.component.html","./src/examples/group-row-rowspan/example-group-row-rowspan.component.ts","./src/examples/group-row-rowspan/example-group-row-rowspan.component.html","./src/examples/group-row-subhead/example-group-row-subhead.component.ts","./src/examples/group-row-subhead/example-group-row-subhead.component.html","./src/examples/group-row-summary/example-group-row-summary.component.ts","./src/examples/group-row-summary/example-group-row-summary.component.html","./src/examples/hierarchy-browser-basic/example-hierarchy-browser-basic.component.ts","./src/examples/hierarchy-browser-basic/example-hierarchy-browser-basic.component.html","./src/examples/import-basic/example-import-basic.component.ts","./src/examples/import-basic/example-import-basic.component.html","./src/examples/import-csv/example-import-csv.component.ts","./src/examples/import-csv/example-import-csv.component.html","./src/examples/index-column-basic/example-index-column-basic.component.ts","./src/examples/index-column-basic/example-index-column-basic.component.html","./src/examples/index-column-hybrid/example-index-column-hybrid.component.ts","./src/examples/index-column-hybrid/example-index-column-hybrid.component.html","./src/examples/index-column-model/example-index-column-model.component.ts","./src/examples/index-column-model/example-index-column-model.component.html","./src/examples/interaction-mode-detached/example-interaction-mode-detached.component.ts","./src/examples/interaction-mode-detached/example-interaction-mode-detached.component.html","./src/examples/interaction-mode-readonly/example-interaction-mode-readonly.component.ts","./src/examples/interaction-mode-readonly/example-interaction-mode-readonly.component.html","./src/examples/key-with-symbols/example-key-with-symbols.component.ts","./src/examples/key-with-symbols/example-key-with-symbols.component.html","./src/examples/layer-grid-blank/example-layer-grid-blank.component.ts","./src/examples/layer-grid-blank/example-layer-grid-blank.component.html","./src/examples/legend-grid-basic/example-legend-grid-basic.component.ts","./src/examples/legend-grid-basic/example-legend-grid-basic.component.html","./src/examples/live-data-basic/example-live-data-basic.component.ts","./src/examples/live-data-basic/example-live-data-basic.component.html","./src/examples/live-rows-basic/example-live-rows-basic.component.ts","./src/examples/live-rows-basic/example-live-rows-basic.component.html","./src/examples/look-atoms-basic/example-look-atoms-basic.component.ts","./src/examples/look-atoms-basic/example-look-atoms-basic.component.html","./src/examples/look-atoms-customized/example-look-atoms-customized.component.ts","./src/examples/look-atoms-customized/example-look-atoms-customized.component.html","./src/examples/look-atoms-id/example-look-atoms-id.component.ts","./src/examples/look-atoms-id/example-look-atoms-id.component.html","./src/examples/look-atoms-model/example-look-atoms-model.component.ts","./src/examples/look-atoms-model/example-look-atoms-model.component.html","./src/examples/look-people-basic/example-look-people-basic.component.ts","./src/examples/look-people-basic/example-look-people-basic.component.html","./src/examples/look-people-model/example-look-people-model.component.ts","./src/examples/look-people-model/example-look-people-model.component.html","./src/examples/look-quotes-basic/example-look-quotes-basic.component.ts","./src/examples/look-quotes-basic/example-look-quotes-basic.component.html","./src/examples/look-quotes-model/example-look-quotes-model.component.ts","./src/examples/look-quotes-model/example-look-quotes-model.component.html","./src/examples/manipulate-data-basic/example-manipulate-data-basic.component.ts","./src/examples/manipulate-data-basic/example-manipulate-data-basic.component.html","./src/examples/master-details-basic/example-master-details-basic.component.ts","./src/examples/master-details-basic/example-master-details-basic.component.html","./src/examples/mouse-api-basic/example-mouse-api-basic.component.ts","./src/examples/mouse-api-basic/example-mouse-api-basic.component.html","./src/examples/on-push-basic/example-on-push-basic.component.ts","./src/examples/on-push-basic/example-on-push-basic.component.html","./src/examples/pagination-basic/example-pagination-basic.component.ts","./src/examples/pagination-basic/example-pagination-basic.component.html","./src/examples/pane-basic/example-pane-basic.component.ts","./src/examples/pane-basic/example-pane-basic.component.html","./src/examples/pane-trigger/example-pane-trigger.component.ts","./src/examples/pane-trigger/example-pane-trigger.component.html","./src/examples/pane-with-selection-mode/example-pane-with-selection-mode.component.ts","./src/examples/pane-with-selection-mode/example-pane-with-selection-mode.component.html","./src/examples/persistence-basic/example-persistence-basic.component.ts","./src/examples/persistence-basic/example-persistence-basic.component.html","./src/examples/persistence-on-state-change/example-persistence-on-state-change.component.ts","./src/examples/persistence-on-state-change/example-persistence-on-state-change.component.html","./src/examples/persistence-server/example-persistence-server.component.ts","./src/examples/persistence-server/example-persistence-server.component.html","./src/examples/persistence-with-sync-get-data/example-persistence-with-sync-get-data.component.ts","./src/examples/persistence-with-sync-get-data/example-persistence-with-sync-get-data.component.html","./src/examples/pin-column-basic/example-pin-column-basic.component.ts","./src/examples/pin-column-basic/example-pin-column-basic.component.html","./src/examples/pipe-grid-basic/example-pipe-grid-basic.component.ts","./src/examples/pipe-grid-basic/example-pipe-grid-basic.component.html","./src/examples/pivot-column-basic/example-pivot-column-basic.component.ts","./src/examples/pivot-column-basic/example-pivot-column-basic.component.html","./src/examples/pivot-column-cohort/example-pivot-column-cohort.component.ts","./src/examples/pivot-column-cohort/example-pivot-column-cohort.component.html","./src/examples/pivot-column-group/example-pivot-column-group.component.ts","./src/examples/pivot-column-group/example-pivot-column-group.component.html","./src/examples/pivot-column-template/example-pivot-column-template.component.ts","./src/examples/pivot-column-template/example-pivot-column-template.component.html","./src/examples/plugin-grid-basic/example-plugin-grid-basic.component.ts","./src/examples/plugin-grid-basic/example-plugin-grid-basic.component.html","./src/examples/plugin-grid-basic/example-plugin-my-pager.component.ts","./src/examples/plugin-grid-basic/example-plugin-my-pager.component.html","./src/examples/rest-api-basic/example-rest-api-basic.component.ts","./src/examples/rest-api-basic/example-rest-api-basic.component.html","./src/examples/sample-orders/example-sample-orders.component.ts","./src/examples/sample-orders/example-sample-orders.component.html","./src/examples/scroll-virtual-basic/example-scroll-virtual-basic.component.ts","./src/examples/scroll-virtual-basic/example-scroll-virtual-basic.component.html","./src/examples/scroll-virtual-details/example-scroll-virtual-details.component.ts","./src/examples/scroll-virtual-details/example-scroll-virtual-details.component.html","./src/examples/scroll-virtual-drag/example-scroll-virtual-drag.component.ts","./src/examples/scroll-virtual-drag/example-scroll-virtual-drag.component.html","./src/examples/scroll-virtual-edit/example-scroll-virtual-edit.component.ts","./src/examples/scroll-virtual-edit/example-scroll-virtual-edit.component.html","./src/examples/scroll-virtual-group/example-scroll-virtual-group.component.ts","./src/examples/scroll-virtual-group/example-scroll-virtual-group.component.html","./src/examples/scroll-virtual-height/example-scroll-virtual-height.component.ts","./src/examples/scroll-virtual-height/example-scroll-virtual-height.component.html","./src/examples/scroll-virtual-infinite/example-scroll-virtual-infinite.component.ts","./src/examples/scroll-virtual-infinite/example-scroll-virtual-infinite.component.html","./src/examples/scroll-virtual-list-infinite/example-scroll-virtual-list-infinite.component.html","./src/examples/scroll-virtual-list-infinite/example-scroll-virtual-list-infinite.component.ts","./src/examples/scroll-virtual-list/example-scroll-virtual-list.component.html","./src/examples/scroll-virtual-list/example-scroll-virtual-list.component.ts","./src/examples/scroll-virtual-selection/example-scroll-virtual-selection.component.ts","./src/examples/scroll-virtual-selection/example-scroll-virtual-selection.component.html","./src/examples/scroll-virtual-style/example-scroll-virtual-style.component.ts","./src/examples/scroll-virtual-style/example-scroll-virtual-style.component.html","./src/examples/select-cell-basic/example-select-cell-basic.component.ts","./src/examples/select-cell-basic/example-select-cell-basic.component.html","./src/examples/select-column-basic/example-select-column-basic.component.ts","./src/examples/select-column-basic/example-select-column-basic.component.html","./src/examples/select-mix-basic/example-select-mix-basic.component.ts","./src/examples/select-mix-basic/example-select-mix-basic.component.html","./src/examples/select-row-basic/example-select-row-basic.component.ts","./src/examples/select-row-basic/example-select-row-basic.component.html","./src/examples/select-row-command/example-select-row-command.component.ts","./src/examples/select-row-command/example-select-row-command.component.html","./src/examples/select-row-disable/example-select-row-disable.component.ts","./src/examples/select-row-disable/example-select-row-disable.component.html","./src/examples/select-row-edit/example-select-row-edit.component.ts","./src/examples/select-row-edit/example-select-row-edit.component.html","./src/examples/select-row-range/example-select-row-range.component.ts","./src/examples/select-row-range/example-select-row-range.component.html","./src/examples/select-row-single-only/example-select-row-single-only.component.ts","./src/examples/select-row-single-only/example-select-row-single-only.component.html","./src/examples/select-row-single/example-select-row-single.component.ts","./src/examples/select-row-single/example-select-row-single.component.html","./src/examples/size-column-absolute/example-size-column-absolute.component.ts","./src/examples/size-column-absolute/example-size-column-absolute.component.html","./src/examples/size-column-basic/example-size-column-basic.component.ts","./src/examples/size-column-basic/example-size-column-basic.component.html","./src/examples/size-column-fit-head/example-size-column-fit-head.component.ts","./src/examples/size-column-fit-head/example-size-column-fit-head.component.html","./src/examples/size-column-full/example-size-column-full.component.ts","./src/examples/size-column-full/example-size-column-full.component.html","./src/examples/size-column-pin/example-size-column-pin.component.ts","./src/examples/size-column-pin/example-size-column-pin.component.html","./src/examples/size-row-basic/example-size-row-basic.component.ts","./src/examples/size-row-basic/example-size-row-basic.component.html","./src/examples/sort-row-basic/example-sort-row-basic.component.ts","./src/examples/sort-row-basic/example-sort-row-basic.component.html","./src/examples/sort-row-mixed/example-sort-row-mixed.component.ts","./src/examples/sort-row-mixed/example-sort-row-mixed.component.html","./src/examples/style-cell-basic/example-style-cell-basic.component.ts","./src/examples/style-cell-basic/example-style-cell-basic.component.html","./src/examples/style-row-basic/example-style-row-basic.component.ts","./src/examples/style-row-basic/example-style-row-basic.component.html","./src/examples/summary-column-aggregation/example-summary-column-aggregation.component.ts","./src/examples/summary-column-aggregation/example-summary-column-aggregation.component.html","./src/examples/summary-column-basic/example-summary-column-basic.component.ts","./src/examples/summary-column-basic/example-summary-column-basic.component.html","./src/examples/theme-grid-dark/example-theme-grid-dark.component.ts","./src/examples/theme-grid-dark/example-theme-grid-dark.component.html","./src/examples/theme-grid-embed/example-theme-grid-embed.component.ts","./src/examples/theme-grid-embed/example-theme-grid-embed.component.html","./src/examples/validation-basic/example-validation-basic.component.ts","./src/examples/validation-basic/example-validation-basic.component.html","./src/examples/visibility-basic/example-visibility-basic.component.ts","./src/examples/visibility-basic/example-visibility-basic.component.html","./src/examples/visibility-model/example-visibility-model.component.ts","./src/examples/visibility-model/example-visibility-model.component.html","./src/main.ts","../qgrid-core/dist/public-api.js","../qgrid-core/public-api.js","../qgrid-core/src/action/action.js","../qgrid-core/src/action/action.state.js","../qgrid-core/src/animation/animation.state.js","../qgrid-core/src/body/body.host.js","../qgrid-core/src/body/body.let.js","../qgrid-core/src/body/body.state.js","../qgrid-core/src/box/box.host.js","../qgrid-core/src/cell/cell.classifier.js","../qgrid-core/src/cell/cell.selector.js","../qgrid-core/src/clipboard/clipboard.js","../qgrid-core/src/clipboard/clipboard.let.js","../qgrid-core/src/clipboard/clipboard.state.js","../qgrid-core/src/column-list/column.list.generate.js","../qgrid-core/src/column-list/column.list.host.js","../qgrid-core/src/column-list/column.list.sort.js","../qgrid-core/src/column-list/column.list.state.js","../qgrid-core/src/column-type/array.column.js","../qgrid-core/src/column-type/bool.column.js","../qgrid-core/src/column-type/cohort.column.js","../qgrid-core/src/column-type/column.model.js","../qgrid-core/src/column-type/currency.column.js","../qgrid-core/src/column-type/data.column.model.js","../qgrid-core/src/column-type/date.column.js","../qgrid-core/src/column-type/datetime.column.js","../qgrid-core/src/column-type/email.column.js","../qgrid-core/src/column-type/file.column.js","../qgrid-core/src/column-type/filter.row.column.js","../qgrid-core/src/column-type/group.column.js","../qgrid-core/src/column-type/group.summary.column.js","../qgrid-core/src/column-type/id.column.js","../qgrid-core/src/column-type/image.column.js","../qgrid-core/src/column-type/number.column.js","../qgrid-core/src/column-type/pad.column.js","../qgrid-core/src/column-type/password.column.js","../qgrid-core/src/column-type/pivot.column.js","../qgrid-core/src/column-type/reference.column.js","../qgrid-core/src/column-type/row.details.column.js","../qgrid-core/src/column-type/row.expand.column.js","../qgrid-core/src/column-type/row.indicator.column.js","../qgrid-core/src/column-type/row.number.column.js","../qgrid-core/src/column-type/row.options.column.js","../qgrid-core/src/column-type/select.column.js","../qgrid-core/src/column-type/text.column.js","../qgrid-core/src/column-type/time.column.js","../qgrid-core/src/column-type/url.column.js","../qgrid-core/src/column/column.factory.js","../qgrid-core/src/column/column.matrix.js","../qgrid-core/src/column/column.service.js","../qgrid-core/src/command/command.js","../qgrid-core/src/command/command.key.js","../qgrid-core/src/command/command.manager.js","../qgrid-core/src/command/composite.command.manager.js","../qgrid-core/src/command/table.command.manager.js","../qgrid-core/src/data/data.state.js","../qgrid-core/src/definition.js","../qgrid-core/src/dom/bag.js","../qgrid-core/src/dom/body.js","../qgrid-core/src/dom/box.js","../qgrid-core/src/dom/cell.js","../qgrid-core/src/dom/column.js","../qgrid-core/src/dom/container.js","../qgrid-core/src/dom/data.js","../qgrid-core/src/dom/element.js","../qgrid-core/src/dom/fake/class.list.js","../qgrid-core/src/dom/fake/element.js","../qgrid-core/src/dom/fake/layer.js","../qgrid-core/src/dom/fake/table.js","../qgrid-core/src/dom/foot.js","../qgrid-core/src/dom/head.js","../qgrid-core/src/dom/row.js","../qgrid-core/src/dom/selector/matrix.js","../qgrid-core/src/dom/selector/selector.cache.js","../qgrid-core/src/dom/selector/selector.factory.js","../qgrid-core/src/dom/selector/selector.js","../qgrid-core/src/dom/selector/selector.mark.js","../qgrid-core/src/dom/selector/selector.mediate.js","../qgrid-core/src/dom/selector/unit.factory.js","../qgrid-core/src/dom/table.factory.js","../qgrid-core/src/dom/table.js","../qgrid-core/src/dom/td.js","../qgrid-core/src/dom/tr.js","../qgrid-core/src/dom/unit.js","../qgrid-core/src/dom/view.js","../qgrid-core/src/dom/virtual/box.js","../qgrid-core/src/dom/virtual/cell.box.js","../qgrid-core/src/dom/virtual/cell.js","../qgrid-core/src/dom/virtual/column.box.js","../qgrid-core/src/dom/virtual/column.js","../qgrid-core/src/dom/virtual/element.js","../qgrid-core/src/dom/virtual/row.box.js","../qgrid-core/src/dom/virtual/row.js","../qgrid-core/src/dom/virtual/style.box.js","../qgrid-core/src/drag/drag.service.js","../qgrid-core/src/drag/drag.state.js","../qgrid-core/src/edit/edit.cell.editor.js","../qgrid-core/src/edit/edit.cell.let.js","../qgrid-core/src/edit/edit.let.js","../qgrid-core/src/edit/edit.row.editor.js","../qgrid-core/src/edit/edit.row.let.js","../qgrid-core/src/edit/edit.service.js","../qgrid-core/src/edit/edit.state.js","../qgrid-core/src/event/event.js","../qgrid-core/src/event/event.listener.js","../qgrid-core/src/event/event.manager.js","../qgrid-core/src/export/csv/csv.js","../qgrid-core/src/export/export.service.js","../qgrid-core/src/export/export.state.js","../qgrid-core/src/export/json/json.js","../qgrid-core/src/export/xml/xml.js","../qgrid-core/src/expression/cast.factory.js","../qgrid-core/src/expression/expression.build.js","../qgrid-core/src/expression/expression.visitor.js","../qgrid-core/src/expression/markup.visitor.js","../qgrid-core/src/expression/predicate.visitor.js","../qgrid-core/src/fetch/fetch.state.js","../qgrid-core/src/filter/filter.let.js","../qgrid-core/src/filter/filter.state.js","../qgrid-core/src/filter/match.js","../qgrid-core/src/focus/focus.service.js","../qgrid-core/src/focus/focus.state.js","../qgrid-core/src/foot/foot.let.js","../qgrid-core/src/foot/foot.state.js","../qgrid-core/src/format/format.service.js","../qgrid-core/src/grid/grid.host.js","../qgrid-core/src/grid/grid.service.js","../qgrid-core/src/grid/grid.state.js","../qgrid-core/src/group/group.build.js","../qgrid-core/src/group/group.let.js","../qgrid-core/src/group/group.service.js","../qgrid-core/src/group/group.state.js","../qgrid-core/src/head/head.host.js","../qgrid-core/src/head/head.let.js","../qgrid-core/src/head/head.state.js","../qgrid-core/src/highlight/highlight.let.js","../qgrid-core/src/highlight/highlight.state.js","../qgrid-core/src/import/csv/csv.js","../qgrid-core/src/import/import.state.js","../qgrid-core/src/import/json/json.js","../qgrid-core/src/import/xml/xml.js","../qgrid-core/src/infrastructure/cache.js","../qgrid-core/src/infrastructure/composite.js","../qgrid-core/src/infrastructure/defer.js","../qgrid-core/src/infrastructure/disposable.js","../qgrid-core/src/infrastructure/error.js","../qgrid-core/src/infrastructure/fetch.js","../qgrid-core/src/infrastructure/final.js","../qgrid-core/src/infrastructure/guard.js","../qgrid-core/src/infrastructure/lazy.js","../qgrid-core/src/infrastructure/log.js","../qgrid-core/src/infrastructure/range.js","../qgrid-core/src/io/char.reader.js","../qgrid-core/src/io/file.js","../qgrid-core/src/keyboard/keyboard.js","../qgrid-core/src/keyboard/keyboard.state.js","../qgrid-core/src/layer/layer.state.js","../qgrid-core/src/layout/layout.let.js","../qgrid-core/src/layout/layout.state.js","../qgrid-core/src/model/model.bind.js","../qgrid-core/src/model/model.builder.js","../qgrid-core/src/model/model.js","../qgrid-core/src/mouse/mouse.code.js","../qgrid-core/src/mouse/mouse.state.js","../qgrid-core/src/navigation/navigation.js","../qgrid-core/src/navigation/navigation.let.js","../qgrid-core/src/navigation/navigation.state.js","../qgrid-core/src/navigation/navigation.state.selector.js","../qgrid-core/src/node/node.build.js","../qgrid-core/src/node/node.js","../qgrid-core/src/node/node.service.js","../qgrid-core/src/pagination/pagination.let.js","../qgrid-core/src/pagination/pagination.state.js","../qgrid-core/src/path/path.service.js","../qgrid-core/src/persistence/persistence.service.js","../qgrid-core/src/persistence/persistence.state.js","../qgrid-core/src/persistence/persistence.storage.js","../qgrid-core/src/pipe/animation.pipe.js","../qgrid-core/src/pipe/column.index.pipe.js","../qgrid-core/src/pipe/column.pipe.js","../qgrid-core/src/pipe/data.pipe.js","../qgrid-core/src/pipe/filter.pipe.js","../qgrid-core/src/pipe/group.pipe.js","../qgrid-core/src/pipe/memo.pipe.js","../qgrid-core/src/pipe/pagination.pipe.js","../qgrid-core/src/pipe/pipe.build.js","../qgrid-core/src/pipe/pipe.js","../qgrid-core/src/pipe/pipe.state.js","../qgrid-core/src/pipe/pipe.unit.js","../qgrid-core/src/pipe/pivot.pipe.js","../qgrid-core/src/pipe/scene.pipe.js","../qgrid-core/src/pipe/sort.pipe.js","../qgrid-core/src/pipe/units/column.index.pipe.unit.js","../qgrid-core/src/pipe/units/column.pipe.unit.js","../qgrid-core/src/pipe/units/default.pipe.unit.js","../qgrid-core/src/pipe/units/group.pipe.unit.js","../qgrid-core/src/pipe/units/row.details.pipe.unit.js","../qgrid-core/src/pipe/units/row.pipe.unit.js","../qgrid-core/src/pipe/units/scene.pipe.unit.js","../qgrid-core/src/pipe/units/view.pipe.unit.js","../qgrid-core/src/pipe/view.pipe.js","../qgrid-core/src/pivot/pivot.build.js","../qgrid-core/src/pivot/pivot.form.js","../qgrid-core/src/pivot/pivot.js","../qgrid-core/src/pivot/pivot.state.js","../qgrid-core/src/plugin/plugin.service.js","../qgrid-core/src/plugin/plugin.state.js","../qgrid-core/src/progress/progress.state.js","../qgrid-core/src/resource/resource.enumerable.js","../qgrid-core/src/resource/resource.factory.js","../qgrid-core/src/resource/resource.js","../qgrid-core/src/rest/get.serialize.js","../qgrid-core/src/rest/post.serialize.js","../qgrid-core/src/rest/rest.state.js","../qgrid-core/src/row-details/row.details.js","../qgrid-core/src/row-details/row.details.let.js","../qgrid-core/src/row-details/row.details.service.js","../qgrid-core/src/row-details/row.details.status.js","../qgrid-core/src/row-list/row.list.sort.js","../qgrid-core/src/row-list/row.list.state.js","../qgrid-core/src/row/row.let.js","../qgrid-core/src/row/row.state.js","../qgrid-core/src/rx/rx.js","../qgrid-core/src/rx/rx.operators.js","../qgrid-core/src/scene/render/cache.strategy.js","../qgrid-core/src/scene/render/data.row.js","../qgrid-core/src/scene/render/details.row.js","../qgrid-core/src/scene/render/node.row.js","../qgrid-core/src/scene/render/pivot.row.js","../qgrid-core/src/scene/render/render.js","../qgrid-core/src/scene/scene.js","../qgrid-core/src/scene/scene.state.js","../qgrid-core/src/scene/view/column.view.js","../qgrid-core/src/scroll/scroll.let.js","../qgrid-core/src/scroll/scroll.state.js","../qgrid-core/src/selection/selection.command.manager.js","../qgrid-core/src/selection/selection.let.js","../qgrid-core/src/selection/selection.range.js","../qgrid-core/src/selection/selection.service.js","../qgrid-core/src/selection/selection.state.js","../qgrid-core/src/selection/state/multiple.selection.state.js","../qgrid-core/src/selection/state/range.selection.state.js","../qgrid-core/src/selection/state/selection.state.factory.js","../qgrid-core/src/selection/state/selection.state.js","../qgrid-core/src/selection/state/single.only.selection.state.js","../qgrid-core/src/selection/state/single.selection.state.js","../qgrid-core/src/services/aggregation.js","../qgrid-core/src/services/convert.js","../qgrid-core/src/services/css.js","../qgrid-core/src/services/dom.js","../qgrid-core/src/services/fastdom.js","../qgrid-core/src/services/guid.js","../qgrid-core/src/services/job.line.js","../qgrid-core/src/services/label.js","../qgrid-core/src/services/markup.js","../qgrid-core/src/services/merge.js","../qgrid-core/src/services/middleware.js","../qgrid-core/src/services/model.stringify.js","../qgrid-core/src/services/pair.js","../qgrid-core/src/services/path.js","../qgrid-core/src/services/predicate.js","../qgrid-core/src/services/scheduler.js","../qgrid-core/src/services/text.selection.js","../qgrid-core/src/services/title.js","../qgrid-core/src/services/upload.js","../qgrid-core/src/services/value.js","../qgrid-core/src/shortcut/shortcut.dispatcher.js","../qgrid-core/src/shortcut/shortcut.js","../qgrid-core/src/sort/sort.let.js","../qgrid-core/src/sort/sort.service.js","../qgrid-core/src/sort/sort.state.js","../qgrid-core/src/style/style.let.js","../qgrid-core/src/style/style.monitor.js","../qgrid-core/src/style/style.service.js","../qgrid-core/src/style/style.state.js","../qgrid-core/src/style/style.virtual.js","../qgrid-core/src/template/template.path.js","../qgrid-core/src/template/template.state.js","../qgrid-core/src/test/model.factory.js","../qgrid-core/src/toolbar/toolbar.state.js","../qgrid-core/src/utility/kit.js","../qgrid-core/src/validation/validation.service.js","../qgrid-core/src/validation/validation.state.js","../qgrid-core/src/view/view.factory.js","../qgrid-core/src/view/view.host.js","../qgrid-core/src/view/view.state.js","../qgrid-core/src/visibility/visibility.state.js","../qgrid-plugins/dist/public-api.js","ignored|C:\\Users\\ekaterina.tokareva\\WebstormProjects\\ng2\\node_modules\\xlsx|crypto","ignored|C:\\Users\\ekaterina.tokareva\\WebstormProjects\\ng2\\node_modules\\xlsx|fs","ignored|C:\\Users\\ekaterina.tokareva\\WebstormProjects\\ng2\\node_modules\\xlsx|stream","../ng2-qgrid/src/lib/ng2-qgrid.module.ts","../qgrid-ngx-plugins/src/lib/action-bar/action-bar.component.ts","../qgrid-ngx-plugins/src/lib/action-bar/action-bar.component.html","../qgrid-ngx-plugins/src/lib/action-bar/action-bar.module.ts","../qgrid-ngx-plugins/src/lib/action-bar/action-list.component.ts","../qgrid-ngx-plugins/src/lib/action/action-core.component.ts","../qgrid-ngx-plugins/src/lib/action/action-core.component.html","../qgrid-ngx-plugins/src/lib/action/action.component.ts","../qgrid-ngx-plugins/src/lib/action/action.module.ts","../qgrid-ngx-plugins/src/lib/alt/alt.component.ts","../qgrid-ngx-plugins/src/lib/alt/alt.component.html","../qgrid-ngx-plugins/src/lib/alt/alt.module.ts","../qgrid-ngx-plugins/src/lib/autocomplete-editor/autocomplete-editor.component.ts","../qgrid-ngx-plugins/src/lib/autocomplete-editor/autocomplete-editor.component.html","../qgrid-ngx-plugins/src/lib/autocomplete-editor/autocomplete-editor.module.ts","../qgrid-ngx-plugins/src/lib/backdrop/backdrop.component.ts","../qgrid-ngx-plugins/src/lib/backdrop/backdrop.component.html","../qgrid-ngx-plugins/src/lib/backdrop/backdrop.directive.ts","../qgrid-ngx-plugins/src/lib/backdrop/backdrop.module.ts","../qgrid-ngx-plugins/src/lib/backdrop/backdrop.service.ts","../qgrid-ngx-plugins/src/lib/bool-editor/bool-editor.component.ts","../qgrid-ngx-plugins/src/lib/bool-editor/bool-editor.component.html","../qgrid-ngx-plugins/src/lib/bool-editor/bool-editor.module.ts","../qgrid-ngx-plugins/src/lib/caption/caption.component.ts","../qgrid-ngx-plugins/src/lib/caption/caption.component.html","../qgrid-ngx-plugins/src/lib/caption/caption.module.ts","../qgrid-ngx-plugins/src/lib/cell-editor/cell-editor.component.ts","../qgrid-ngx-plugins/src/lib/cell-editor/cell-editor.component.html","../qgrid-ngx-plugins/src/lib/cell-editor/cell-editor.module.ts","../qgrid-ngx-plugins/src/lib/cell-tooltip/cell-tooltip.component.ts","../qgrid-ngx-plugins/src/lib/cell-tooltip/cell-tooltip.component.html","../qgrid-ngx-plugins/src/lib/cell-tooltip/cell-tooltip.directive.ts","../qgrid-ngx-plugins/src/lib/cell-tooltip/cell-tooltip.module.ts","../qgrid-ngx-plugins/src/lib/colum-chooser/column-chooser.component.ts","../qgrid-ngx-plugins/src/lib/colum-chooser/column-chooser.component.html","../qgrid-ngx-plugins/src/lib/colum-chooser/column-chooser.module.ts","../qgrid-ngx-plugins/src/lib/column-chooser-trigger/column-chooser-trigger.component.ts","../qgrid-ngx-plugins/src/lib/column-chooser-trigger/column-chooser-trigger.component.html","../qgrid-ngx-plugins/src/lib/column-chooser-trigger/column-chooser-trigger.module.ts","../qgrid-ngx-plugins/src/lib/column-filter/column-filter-by.component.ts","../qgrid-ngx-plugins/src/lib/column-filter/column-filter-by.component.html","../qgrid-ngx-plugins/src/lib/column-filter/column-filter-item-list.directive.ts","../qgrid-ngx-plugins/src/lib/column-filter/column-filter-item.directive.ts","../qgrid-ngx-plugins/src/lib/column-filter/column-filter-trigger.component.ts","../qgrid-ngx-plugins/src/lib/column-filter/column-filter-trigger.component.html","../qgrid-ngx-plugins/src/lib/column-filter/column-filter.component.ts","../qgrid-ngx-plugins/src/lib/column-filter/column-filter.component.html","../qgrid-ngx-plugins/src/lib/column-filter/column-filter.module.ts","../qgrid-ngx-plugins/src/lib/column-sort/column-sort.component.ts","../qgrid-ngx-plugins/src/lib/column-sort/column-sort.component.html","../qgrid-ngx-plugins/src/lib/column-sort/column-sort.module.ts","../qgrid-ngx-plugins/src/lib/command/command.directive.ts","../qgrid-ngx-plugins/src/lib/command/command.module.ts","../qgrid-ngx-plugins/src/lib/data-manipulation/data-manipulation.component.ts","../qgrid-ngx-plugins/src/lib/data-manipulation/data-manipulation.module.ts","../qgrid-ngx-plugins/src/lib/data-provider/data-provider.component.ts","../qgrid-ngx-plugins/src/lib/data-provider/data-provider.module.ts","../qgrid-ngx-plugins/src/lib/date/date-mask.directive.ts","../qgrid-ngx-plugins/src/lib/date/date.directive.ts","../qgrid-ngx-plugins/src/lib/date/date.module.ts","../qgrid-ngx-plugins/src/lib/date/date.service.ts","../qgrid-ngx-plugins/src/lib/edit-form/edit-form-control.component.ts","../qgrid-ngx-plugins/src/lib/edit-form/edit-form-control.component.html","../qgrid-ngx-plugins/src/lib/edit-form/edit-form-trigger.component.ts","../qgrid-ngx-plugins/src/lib/edit-form/edit-form-trigger.component.html","../qgrid-ngx-plugins/src/lib/edit-form/edit-form.component.ts","../qgrid-ngx-plugins/src/lib/edit-form/edit-form.component.html","../qgrid-ngx-plugins/src/lib/edit-form/edit-form.module.ts","../qgrid-ngx-plugins/src/lib/export/export.component.ts","../qgrid-ngx-plugins/src/lib/export/export.module.ts","../qgrid-ngx-plugins/src/lib/expression-builder/digest/evaluate.ts","../qgrid-ngx-plugins/src/lib/expression-builder/digest/watch.ts","../qgrid-ngx-plugins/src/lib/expression-builder/eb-class.directive.ts","../qgrid-ngx-plugins/src/lib/expression-builder/eb-expression.component.ts","../qgrid-ngx-plugins/src/lib/expression-builder/eb-expression.component.html","../qgrid-ngx-plugins/src/lib/expression-builder/eb-node.component.ts","../qgrid-ngx-plugins/src/lib/expression-builder/eb-node.component.html","../qgrid-ngx-plugins/src/lib/expression-builder/eb-node.service.ts","../qgrid-ngx-plugins/src/lib/expression-builder/eb.module.ts","../qgrid-ngx-plugins/src/lib/expression-builder/model/expression.builder.ts","../qgrid-ngx-plugins/src/lib/expression-builder/model/expression.ts","../qgrid-ngx-plugins/src/lib/expression-builder/model/group.schema.ts","../qgrid-ngx-plugins/src/lib/expression-builder/model/line.ts","../qgrid-ngx-plugins/src/lib/expression-builder/model/node.ts","../qgrid-ngx-plugins/src/lib/expression-builder/model/node.schema.ts","../qgrid-ngx-plugins/src/lib/expression-builder/model/statement.ts","../qgrid-ngx-plugins/src/lib/expression-builder/patch.ts","../qgrid-ngx-plugins/src/lib/expression-builder/serialization.service.ts","../qgrid-ngx-plugins/src/lib/expression-builder/traverse.service.ts","../qgrid-ngx-plugins/src/lib/expression-builder/utility.ts","../qgrid-ngx-plugins/src/lib/file/file.directive.ts","../qgrid-ngx-plugins/src/lib/file/file.module.ts","../qgrid-ngx-plugins/src/lib/focus/autofocus.directive.ts","../qgrid-ngx-plugins/src/lib/focus/blur.directive.ts","../qgrid-ngx-plugins/src/lib/focus/focus.directive.ts","../qgrid-ngx-plugins/src/lib/focus/focus.module.ts","../qgrid-ngx-plugins/src/lib/focus/focus.service.ts","../qgrid-ngx-plugins/src/lib/import/import.component.ts","../qgrid-ngx-plugins/src/lib/import/import.module.ts","../qgrid-ngx-plugins/src/lib/layout/layout.module.ts","../qgrid-ngx-plugins/src/lib/layout/position.directive.ts","../qgrid-ngx-plugins/src/lib/legend/legend.component.ts","../qgrid-ngx-plugins/src/lib/legend/legend.component.html","../qgrid-ngx-plugins/src/lib/legend/legend.module.ts","../qgrid-ngx-plugins/src/lib/live-cell/live-cell.component.ts","../qgrid-ngx-plugins/src/lib/live-cell/live-cell.tpl.html","../qgrid-ngx-plugins/src/lib/live-cell/live-cell.module.ts","../qgrid-ngx-plugins/src/lib/live-column/live-column.component.ts","../qgrid-ngx-plugins/src/lib/live-column/live-column.module.ts","../qgrid-ngx-plugins/src/lib/live-row/live-row.component.ts","../qgrid-ngx-plugins/src/lib/live-row/live-row.module.ts","../qgrid-ngx-plugins/src/lib/pagination/pager-target.component.ts","../qgrid-ngx-plugins/src/lib/pagination/pager-target.component.html","../qgrid-ngx-plugins/src/lib/pagination/pager.component.ts","../qgrid-ngx-plugins/src/lib/pagination/pager.component.html","../qgrid-ngx-plugins/src/lib/pagination/pager.module.ts","../qgrid-ngx-plugins/src/lib/pane/pane.component.ts","../qgrid-ngx-plugins/src/lib/pane/pane.component.html","../qgrid-ngx-plugins/src/lib/pane/pane.module.ts","../qgrid-ngx-plugins/src/lib/persistence/persistence-panel.component.ts","../qgrid-ngx-plugins/src/lib/persistence/persistence-panel.component.html","../qgrid-ngx-plugins/src/lib/persistence/persistence.component.ts","../qgrid-ngx-plugins/src/lib/persistence/persistence.module.ts","../qgrid-ngx-plugins/src/lib/pipes/array.pipe.ts","../qgrid-ngx-plugins/src/lib/pipes/convert.pipe.ts","../qgrid-ngx-plugins/src/lib/pipes/currency.pipe.ts","../qgrid-ngx-plugins/src/lib/pipes/date.pipe.ts","../qgrid-ngx-plugins/src/lib/pipes/filter.pipe.ts","../qgrid-ngx-plugins/src/lib/pipes/highlight.pipe.ts","../qgrid-ngx-plugins/src/lib/pipes/item-label.pipe.ts","../qgrid-ngx-plugins/src/lib/pipes/number.pipe.ts","../qgrid-ngx-plugins/src/lib/pipes/pipe.module.ts","../qgrid-ngx-plugins/src/lib/pipes/text.pipe.ts","../qgrid-ngx-plugins/src/lib/pipes/time.pipe.ts","../qgrid-ngx-plugins/src/lib/progress/progress.component.ts","../qgrid-ngx-plugins/src/lib/progress/progress.component.html","../qgrid-ngx-plugins/src/lib/progress/progress.module.ts","../qgrid-ngx-plugins/src/lib/query-builder/query-builder-panel.component.ts","../qgrid-ngx-plugins/src/lib/query-builder/query-builder-panel.component.html","../qgrid-ngx-plugins/src/lib/query-builder/query-builder.component.ts","../qgrid-ngx-plugins/src/lib/query-builder/query-builder.component.html","../qgrid-ngx-plugins/src/lib/query-builder/query-builder.model.ts","../qgrid-ngx-plugins/src/lib/query-builder/query-builder.module.ts","../qgrid-ngx-plugins/src/lib/query-builder/query-builder.pipe.ts","../qgrid-ngx-plugins/src/lib/query-builder/query-builder.service.ts","../qgrid-ngx-plugins/src/lib/query-builder/schema/converter.ts","../qgrid-ngx-plugins/src/lib/query-builder/schema/operator.ts","../qgrid-ngx-plugins/src/lib/query-builder/schema/suggest.service.ts","../qgrid-ngx-plugins/src/lib/query-builder/schema/validator.ts","../qgrid-ngx-plugins/src/lib/query-builder/schema/where.schema.ts","../qgrid-ngx-plugins/src/lib/reference-editor/reference-editor.component.ts","../qgrid-ngx-plugins/src/lib/reference-editor/reference-editor.component.html","../qgrid-ngx-plugins/src/lib/reference-editor/reference-editor.module.ts","../qgrid-ngx-plugins/src/lib/reference-editor/reference.component.ts","../qgrid-ngx-plugins/src/lib/reference-editor/reference.component.html","../qgrid-ngx-plugins/src/lib/rest/rest.component.ts","../qgrid-ngx-plugins/src/lib/rest/rest.module.ts","../qgrid-ngx-plugins/src/lib/status-bar/status-bar.component.ts","../qgrid-ngx-plugins/src/lib/status-bar/status-bar.component.html","../qgrid-ngx-plugins/src/lib/status-bar/status-bar.module.ts","../qgrid-ngx-plugins/src/lib/tab-trap/tab-trap-in.directive.ts","../qgrid-ngx-plugins/src/lib/tab-trap/tab-trap.component.ts","../qgrid-ngx-plugins/src/lib/tab-trap/tab-trap.component.html","../qgrid-ngx-plugins/src/lib/tab-trap/tab-trap.module.ts","../qgrid-ngx-plugins/src/lib/time/time.directive.ts","../qgrid-ngx-plugins/src/lib/time/time.module.ts","../qgrid-ngx-plugins/src/lib/validation/rule.component.ts","../qgrid-ngx-plugins/src/lib/validation/rule.component.html","../qgrid-ngx-plugins/src/lib/validation/validation.component.ts","../qgrid-ngx-plugins/src/lib/validation/validation.module.ts","../qgrid-ngx-plugins/src/lib/validation/validator.component.ts","../qgrid-ngx-plugins/src/lib/validation/validator.component.html","../qgrid-ngx-plugins/src/lib/visibility/visibility.component.ts","../qgrid-ngx-plugins/src/lib/visibility/visibility.module.ts","../qgrid-ngx-theme-material/src/lib/components/chips/chips-push.directive.ts","../qgrid-ngx-theme-material/src/lib/components/chips/chips-remove.directive.ts","../qgrid-ngx-theme-material/src/lib/components/chips/chips.directive.ts","../qgrid-ngx-theme-material/src/lib/components/chips/chips.module.ts","../qgrid-ngx-theme-material/src/lib/components/date-adapter/date-adapter.directive.ts","../qgrid-ngx-theme-material/src/lib/components/date-adapter/date-adpater.module.ts","../qgrid-ngx-theme-material/src/lib/components/date-adapter/format-date-adapter.ts","../qgrid-ngx-theme-material/src/lib/components/menu/menu-trigger.directive.ts","../qgrid-ngx-theme-material/src/lib/components/menu/menu.directive.ts","../qgrid-ngx-theme-material/src/lib/components/menu/menu.module.ts","../qgrid-ngx-theme-material/src/lib/components/select/select.directive.ts","../qgrid-ngx-theme-material/src/lib/components/select/select.module.ts","../qgrid-ngx-theme-material/src/lib/components/theme-overlay/theme-overlay.directive.ts","../qgrid-ngx-theme-material/src/lib/components/theme-overlay/theme-overlay.module.ts","../qgrid-ngx-theme-material/src/lib/theme.component.ts","../qgrid-ngx-theme-material/src/lib/theme.component.gen.html","../qgrid-ngx-theme-material/src/lib/theme.module.ts","../qgrid-ngx/src/lib/body/body-core.component.ts","../qgrid-ngx/src/lib/body/body-core.component.html","../qgrid-ngx/src/lib/body/body.module.ts","../qgrid-ngx/src/lib/body/td-core-align.directive.ts","../qgrid-ngx/src/lib/body/td-core.directive.ts","../qgrid-ngx/src/lib/box/box.component.ts","../qgrid-ngx/src/lib/box/box.component.html","../qgrid-ngx/src/lib/box/box.module.ts","../qgrid-ngx/src/lib/cell-handler/cell-handler.component.ts","../qgrid-ngx/src/lib/cell-handler/cell-handler.component.html","../qgrid-ngx/src/lib/cell-handler/cell-handler.module.ts","../qgrid-ngx/src/lib/cell/cell-class.service.ts","../qgrid-ngx/src/lib/cell/cell-template.service.ts","../qgrid-ngx/src/lib/change-detector/change-detector.module.ts","../qgrid-ngx/src/lib/change-detector/dirty.directive.ts","../qgrid-ngx/src/lib/column-list/column-list.component.ts","../qgrid-ngx/src/lib/column-list/column-list.module.ts","../qgrid-ngx/src/lib/column-list/column-list.service.ts","../qgrid-ngx/src/lib/column/column-body-template.directive.ts","../qgrid-ngx/src/lib/column/column-edit-template.directive.ts","../qgrid-ngx/src/lib/column/column-foot-template.directive.ts","../qgrid-ngx/src/lib/column/column-head-template.directive.ts","../qgrid-ngx/src/lib/column/column-host.service.ts","../qgrid-ngx/src/lib/column/column.component.ts","../qgrid-ngx/src/lib/column/column.module.ts","../qgrid-ngx/src/lib/dnd/dnd.module.ts","../qgrid-ngx/src/lib/dnd/drag.directive.ts","../qgrid-ngx/src/lib/dnd/drop.directive.ts","../qgrid-ngx/src/lib/foot/foot-core.component.ts","../qgrid-ngx/src/lib/foot/foot-core.component.html","../qgrid-ngx/src/lib/foot/foot.module.ts","../qgrid-ngx/src/lib/foot/tf-core.directive.ts","../qgrid-ngx/src/lib/grid/grid-let.ts","../qgrid-ngx/src/lib/grid/grid-model.builder.ts","../qgrid-ngx/src/lib/grid/grid-root.ts","../qgrid-ngx/src/lib/grid/grid.component.ts","../qgrid-ngx/src/lib/grid/grid.component.html","../qgrid-ngx/src/lib/grid/grid.ts","../qgrid-ngx/src/lib/grid/grid.module.ts","../qgrid-ngx/src/lib/head/head-core.component.ts","../qgrid-ngx/src/lib/head/head-core.component.html","../qgrid-ngx/src/lib/head/head.module.ts","../qgrid-ngx/src/lib/head/th-core.directive.ts","../qgrid-ngx/src/lib/infrastructure/disposable.ts","../qgrid-ngx/src/lib/layer/layer-core.component.ts","../qgrid-ngx/src/lib/layer/layer-core.component.html","../qgrid-ngx/src/lib/layer/layer-core.directive.ts","../qgrid-ngx/src/lib/layer/layer.component.ts","../qgrid-ngx/src/lib/layer/layer.ts","../qgrid-ngx/src/lib/layer/layer.module.ts","../qgrid-ngx/src/lib/layer/layer.service.ts","../qgrid-ngx/src/lib/markup/markup.directive.ts","../qgrid-ngx/src/lib/markup/markup.module.ts","../qgrid-ngx/src/lib/markup/stop-propagate.directive.ts","../qgrid-ngx/src/lib/plugin/grid-plugin.ts","../qgrid-ngx/src/lib/resize/autosize.directive.ts","../qgrid-ngx/src/lib/resize/resize.directive.ts","../qgrid-ngx/src/lib/resize/resize.module.ts","../qgrid-ngx/src/lib/row/row.component.ts","../qgrid-ngx/src/lib/row/row.module.ts","../qgrid-ngx/src/lib/row/tr-core.directive.ts","../qgrid-ngx/src/lib/row/trh-core.directive.ts","../qgrid-ngx/src/lib/scroll/scroll.module.ts","../qgrid-ngx/src/lib/scroll/scroll.service.ts","../qgrid-ngx/src/lib/state/state-accessor.ts","../qgrid-ngx/src/lib/table/table-core.component.ts","../qgrid-ngx/src/lib/table/table-core.component.html","../qgrid-ngx/src/lib/table/table-core.service.ts","../qgrid-ngx/src/lib/table/table.module.ts","../qgrid-ngx/src/lib/template/template-cache.directive.ts","../qgrid-ngx/src/lib/template/template-cache.service.ts","../qgrid-ngx/src/lib/template/template-host.service.ts","../qgrid-ngx/src/lib/template/template-link.directive.ts","../qgrid-ngx/src/lib/template/template-link.ts","../qgrid-ngx/src/lib/template/template-link.service.ts","../qgrid-ngx/src/lib/template/template.directive.ts","../qgrid-ngx/src/lib/template/template.module.ts","../qgrid-ngx/src/lib/template/template.service.ts","../qgrid-ngx/src/lib/theme/theme.module.ts","../qgrid-ngx/src/lib/theme/theme.service.ts","../qgrid-ngx/src/lib/toolbar/toolbar-core.component.ts","../qgrid-ngx/src/lib/toolbar/toolbar-core.component.html","../qgrid-ngx/src/lib/toolbar/toolbar.component.ts","../qgrid-ngx/src/lib/toolbar/toolbar.module.ts","../qgrid-ngx/src/lib/view/view-core.component.ts","../qgrid-ngx/src/lib/view/view-core.component.html","../qgrid-ngx/src/lib/view/view.module.ts","../qgrid-ngx/src/lib/vscroll/vscroll-column.directive.ts","../qgrid-ngx/src/lib/vscroll/vscroll-mark.directive.ts","../qgrid-ngx/src/lib/vscroll/vscroll-port-x.directive.ts","../qgrid-ngx/src/lib/vscroll/vscroll-port-y.directive.ts","../qgrid-ngx/src/lib/vscroll/vscroll-row.directive.ts","../qgrid-ngx/src/lib/vscroll/vscroll.box.ts","../qgrid-ngx/src/lib/vscroll/vscroll.container.ts","../qgrid-ngx/src/lib/vscroll/vscroll.context.ts","../qgrid-ngx/src/lib/vscroll/vscroll.directive.ts","../qgrid-ngx/src/lib/vscroll/vscroll.layout.ts","../qgrid-ngx/src/lib/vscroll/vscroll.link.ts","../qgrid-ngx/src/lib/vscroll/vscroll.module.ts","../qgrid-ngx/src/lib/vscroll/vscroll.pipe.ts","../qgrid-ngx/src/lib/vscroll/vscroll.position.ts","../qgrid-ngx/src/lib/vscroll/vscroll.service.ts","../qgrid-ngx/src/lib/vscroll/vscroll.settings.ts","../qgrid-ngx/src/lib/vscroll/vscroll.utility.ts"],"sourcesContent":["import {\n\tChangeDetectorRef,\n\tComponent,\n\tOnDestroy,\n\tChangeDetectionStrategy,\n\tHostBinding,\n\tElementRef,\n\tViewChildren,\n\tQueryList,\n\tAfterViewInit,\n\tNgZone\n} from '@angular/core';\nimport {\n\tRouter,\n\tRoutes,\n\tRouterLinkActive,\n\tActivatedRoute\n} from '@angular/router';\nimport { Location } from '@angular/common';\nimport { MediaMatcher } from '@angular/cdk/layout';\nimport { APP_ROUTES } from '../examples/example.module';\n\n@Component({\n\tselector: 'app-root',\n\ttemplateUrl: 'app.component.html',\n\tstyleUrls: ['app.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AppComponent implements AfterViewInit, OnDestroy {\n\t@HostBinding('class.app-is-mobile') isMobile: boolean;\n\t@HostBinding('class.app-env-test') isTestEnv: boolean;\n\n\texamples: Routes = APP_ROUTES;\n\n\t@ViewChildren(RouterLinkActive, { read: ElementRef })\n\tmenuItems: QueryList<ElementRef>;\n\n\tprivate mobileQueryListener: () => void;\n\tprivate mobileQuery: MediaQueryList;\n\n\tsearch: string;\n\n\tconstructor(\n\t\tpublic activatedRoute: ActivatedRoute,\n\t\tprivate router: Router,\n\t\tprivate location: Location,\n\t\tprivate zone: NgZone,\n\t\tcd: ChangeDetectorRef,\n\t\tmedia: MediaMatcher,\n\t) {\n\t\tconst setIsMobile = () => this.isMobile = this.mobileQuery.matches;\n\n\t\tthis.mobileQueryListener = () => {\n\t\t\tsetIsMobile();\n\t\t\tcd.detectChanges();\n\t\t};\n\n\t\tthis.mobileQuery = media.matchMedia('(max-width: 600px)');\n\t\t// tslint:disable-next-line: deprecation\n\t\tthis.mobileQuery.addListener(this.mobileQueryListener);\n\t\tsetIsMobile();\n\n\t\tthis\n\t\t\t.activatedRoute\n\t\t\t.queryParams\n\t\t\t.subscribe(params => {\n\t\t\t\tthis.search = params['search'] || '';\n\t\t\t\tthis.isTestEnv = params['env'] === 'test';\n\t\t\t});\n\t}\n\n\tonSearchChange() {\n\t\tconst query = [];\n\t\tif (this.search) {\n\t\t\tquery.push(`search=${this.search}`);\n\t\t}\n\n\t\tif (this.isTestEnv) {\n\t\t\tquery.push('env=test');\n\t\t}\n\n\t\tthis.location.go(\n\t\t\tthis.router.url.split('?')[0],\n\t\t\tquery.join('&')\n\t\t);\n\t}\n\n\tgetGithubUrl(): string {\n\t\treturn `https://github.com/qgrid/ng2-example/tree${this.getExamplePath()}/latest/src/app`;\n\t}\n\n\tgetStackblitzUrl(): string {\n\t\treturn `https://stackblitz.com/github/qgrid/ng2-example/tree${this.getExamplePath()}/latest`;\n\t}\n\n\tgetExamplePath(): string {\n\t\treturn this.router.url.split('?')[0];\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.zone.runOutsideAngular(() => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (this.menuItems.first && !this.findRequestedItem()) {\n\t\t\t\t\tthis.router.navigateByUrl(this.menuItems.first.nativeElement.getAttribute('href'));\n\t\t\t\t}\n\n\t\t\t\tconst activeItem = this.findActiveItem();\n\t\t\t\tif (activeItem) {\n\t\t\t\t\tactiveItem.nativeElement.scrollIntoView();\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t});\n\t}\n\n\tprivate findRequestedItem() {\n\t\treturn this.menuItems.find(item => item.nativeElement.getAttribute('href').includes(this.router.url.split('?')[0]));\n\t}\n\n\tprivate findActiveItem() {\n\t\treturn this.menuItems.find(item => item.nativeElement.classList.contains('app-active'));\n\t}\n\n\tngOnDestroy(): void {\n\t\t// tslint:disable-next-line: deprecation\n\t\tthis.mobileQuery.removeListener(this.mobileQueryListener);\n\t}\n}\n","<mat-toolbar>\n\t<button mat-icon-button\n\t\t\t(click)=\"sidenav.toggle()\">\n\t\t<mat-icon>menu</mat-icon>\n\t</button>\n\t<h1>qgrid</h1>\n</mat-toolbar>\n<mat-sidenav-container>\n\t<mat-sidenav #sidenav\n\t\t\t\t [mode]=\"isMobile ? 'over' : 'side'\"\n\t\t\t\t [opened]=\"!isMobile\"\n\t\t\t\t [fixedInViewport]=\"isMobile\">\n\t\t<a routerLink=\"/\"\n\t\t   class=\"logo\"\n\t\t   *ngIf=\"!isMobile\"></a>\n\t\t<mat-form-field class=\"app-search\">\n\t\t\t<input matInput\n\t\t\t\t   [(ngModel)]=\"search\"\n\t\t\t\t   (ngModelChange)=\"onSearchChange()\"\n\t\t\t\t   placeholder=\"Search in q-grid examples\"\n\t\t\t\t   autocomplete=\"off\"\n\t\t\t\t   type=\"search\" />\n\t\t</mat-form-field>\n\t\t<mat-nav-list>\n\t\t\t<a *ngFor=\"let example of examples | appFilter: search\"\n\t\t\t   mat-list-item\n\t\t\t   [routerLink]=\"example.path\"\n\t\t\t   [queryParams]=\"activatedRoute.queryParams | async\"\n\t\t\t   routerLinkActive=\"app-active\"\n\t\t\t   (click)=\"isMobile ? sidenav.toggle() : null\">\n\t\t\t\t<span [innerHTML]=\"example.path | appHighlight: search\"></span>\n\t\t\t</a>\n\t\t</mat-nav-list>\n\t</mat-sidenav>\n\t<mat-sidenav-content>\n\t\t<mat-card>\n\t\t\t<router-outlet></router-outlet>\n\t\t\t<mat-card-footer>\n\t\t\t\t<div class=\"app-source-links\">\n\t\t\t\t\t<a mat-raised-button\n\t\t\t\t\t   [href]=\"getGithubUrl()\"\n\t\t\t\t\t   class=\"app-source-github\"\n\t\t\t\t\t   title=\"GitHub\"\n\t\t\t\t\t   target=\"_blank\">\n\t\t\t\t\t\tGitHub\n\t\t\t\t\t</a>\n\t\t\t\t\t<a mat-raised-button\n\t\t\t\t\t   [href]=\"getStackblitzUrl()\"\n\t\t\t\t\t   class=\"app-source-stackblitz\"\n\t\t\t\t\t   title=\"StackBlitz\"\n\t\t\t\t\t   target=\"_blank\">\n\t\t\t\t\t\tStackBlitz\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</mat-card-footer>\n\t\t</mat-card>\n\t</mat-sidenav-content>\n</mat-sidenav-container>","import { Pipe, PipeTransform } from '@angular/core';\nimport { escapeRegExp } from './app.utils';\n\n@Pipe({\n\tname: 'appFilter'\n})\nexport class FilterSearchPipe implements PipeTransform {\n\ttransform(items: any[], search: string) {\n\t\tif (search && items) {\n\t\t\tconst words = search.split(',').filter(word => word).map(word => escapeRegExp(word));\n\t\t\tconst pattern = words.map((word, index) => (index < words.length - 1) ? word + '|' : word).join('');\n\t\t\tconst contains = new RegExp(pattern, 'i');\n\t\t\treturn items.filter(item => contains.test(item.path));\n\t\t}\n\n\t\treturn items;\n\t}\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { escapeRegExp } from './app.utils';\n\n@Pipe({\n\tname: 'appHighlight'\n})\nexport class HighlightPipe implements PipeTransform {\n\ttransform(item: string, search: string) {\n\t\tif (search) {\n\t\t\tconst words = search.split(',').filter(word => word).map(word => escapeRegExp(word));\n\t\t\tconst pattern = words.map((word, index) => (index < words.length - 1) ? word + '|' : word).join('');\n\t\t\tconst contains = new RegExp(pattern, 'gi');\n\t\t\tif (contains.test(item)) {\n\t\t\t\treturn item.replace(contains, s => `<mark>${s}</mark>`);\n\t\t\t}\n\t\t}\n\t\treturn item;\n\t}\n}\n","import { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatListModule } from '@angular/material/list';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { Router, RouterModule } from '@angular/router';\nimport { APP_ROUTES, ExampleModule } from '../examples/example.module';\nimport { AppComponent } from './app.component';\nimport { FilterSearchPipe } from './app.filter.pipe';\nimport { HighlightPipe } from './app.highlight.pipe';\n\n\n\n@NgModule({\n\tdeclarations: [\n\t\tAppComponent,\n\t\tFilterSearchPipe,\n\t\tHighlightPipe\n\t],\n\timports: [\n\t\tCommonModule,\n\t\tBrowserModule,\n\t\tBrowserAnimationsModule,\n\t\tHttpClientModule,\n\t\tMatCardModule,\n\t\tMatSelectModule,\n\t\tMatSidenavModule,\n\t\tMatToolbarModule,\n\t\tMatIconModule,\n\t\tMatListModule,\n\t\tMatInputModule,\n\t\tMatButtonModule,\n\t\tRouterModule.forRoot([{\n\t\t\tpath: '',\n\t\t\tredirectTo: 'action-bar-basic',\n\t\t\tpathMatch: 'full'\n\t\t}]),\n\t\tExampleModule,\n\t\tFormsModule\n\t],\n\tbootstrap: [AppComponent]\n})\nexport class AppModule {\n\tconstructor(router: Router) {\n\t\trouter.config.unshift(...APP_ROUTES);\n\t}\n}\n","export function escapeRegExp(s: string): string {\n\treturn s.replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n\tproduction: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component } from '@angular/core';\nimport { Command } from 'ng2-qgrid';\nimport { Subject } from 'rxjs';\nimport { Atom, DataService } from '../data.service';\n\nconst EXAMPLE_TAGS = [\n\t'action-bar-basic',\n\t'Data can be cleared and loaded using UI buttons and hotkeys (ALT+D, ALT+L)'\n];\n\n@Component({\n\tselector: 'example-action-bar-basic',\n\ttemplateUrl: 'example-action-bar-basic.component.html',\n\tstyleUrls: ['example-action-bar-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleActionBarBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\tcanLoad = false;\n\tatoms: Atom[] = [];\n\trows$ = new Subject<Atom[]>();\n\n\tloadCommand = new Command({\n\t\texecute: () => {\n\t\t\tthis.canLoad = false;\n\t\t\tthis.rows$.next(this.atoms);\n\n\t\t\tthis.clearCommand.canExecuteCheck.next();\n\t\t\treturn true;\n\t\t},\n\t\tcanExecute: () => this.canLoad,\n\t\tshortcut: 'alt+l'\n\t});\n\n\tclearCommand = new Command({\n\t\texecute: () => {\n\t\t\tthis.canLoad = true;\n\t\t\tthis.rows$.next([]);\n\n\t\t\tthis.loadCommand.canExecuteCheck.next();\n\t\t\treturn true;\n\t\t},\n\t\tcanExecute: () => !this.canLoad,\n\t\tshortcut: 'alt+d'\n\t});\n\n\tconstructor(\n\t\tdataService: DataService,\n\t\tprivate cd: ChangeDetectorRef\n\t) {\n\t\tdataService.getAtoms()\n\t\t\t.subscribe(atoms => {\n\t\t\t\tthis.atoms = atoms;\n\t\t\t\tthis.loadCommand.execute();\n\t\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows$ | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-actions>\n\t\t<q-grid-action icon=\"refresh\"\n\t\t\t\t\t   title=\"Load Data\"\n\t\t\t\t\t   [command]=\"loadCommand\">\n\t\t</q-grid-action>\n\t\t<q-grid-action icon=\"clear_all\"\n\t\t\t\t\t   title=\"Clear Data\"\n\t\t\t\t\t   [command]=\"clearCommand\">\n\t\t</q-grid-action>\n\t</q-grid-actions>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { GridModel, Action, GridService, Command, Grid } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'action-bar-on-enter',\n\t'Row actions appear on enter key press'\n];\n\n@Component({\n\tselector: 'example-action-bar-on-enter',\n\ttemplateUrl: 'example-action-bar-on-enter.component.html',\n\tstyleUrls: ['example-action-bar-on-enter.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleActionBarOnEnterComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\tgridModel: GridModel;\n\tgridService: GridService;\n\n\trowOptions = {\n\t\ttrigger: 'focus',\n\t\tactions: [\n\t\t\tnew Action(new Command(), 'Hello'),\n\t\t\tnew Action(new Command(), 'World')\n\t\t]\n\t};\n\n\tpickCommand = new Command({\n\t\texecute: () => {\n\t\t\tconst { cell } = this.gridModel.navigation();\n\t\t\tconst { columns } = this.gridModel.view();\n\n\t\t\tconst newColumnIndex = columns.findIndex(c => c.key === 'rowOptions');\n\n\t\t\tthis.gridService.focus(cell.rowIndex, newColumnIndex);\n\n\t\t\t// Comment this out if don't need to revert focus back after action\n\t\t\tthis.gridModel.editChanged.watch((e, off) => {\n\t\t\t\tif (e.hasChanges('status') && e.state.status === 'view') {\n\t\t\t\t\tthis.gridService.focus(cell.rowIndex, cell.columnIndex);\n\t\t\t\t\toff();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tcanExecute: () => {\n\t\t\tconst { items } = this.gridModel.selection();\n\t\t\treturn items.length > 0;\n\t\t},\n\t\tshortcut: 'enter'\n\t});\n\n\tconstructor(dataService: DataService, qgrid: Grid) {\n\t\tthis.rows = dataService.getAtoms();\n\n\t\tthis.gridModel = qgrid.model();\n\t\tthis.gridService = qgrid.service(this.gridModel);\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\"\n\t\t[model]=\"gridModel\"\n\t\tclass=\"q-grid-compact\"\n\t\tselectionUnit=\"row\"\n\t\tselectionMode=\"singleOnly\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column type=\"select\"\n\t\t\t\t\t   [isVisible]=\"false\">\n\t\t</q-grid-column>\n\t\t<q-grid-column type=\"row-options\"\n\t\t\t\t\t   key=\"rowOptions\"\n\t\t\t\t\t   [editorOptions]=\"rowOptions\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-actions>\n\t\t<q-grid-action [command]=\"pickCommand\">\n\t\t</q-grid-action>\n\t</q-grid-actions>\n\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { GridModel } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'action-bar-template',\n\t'Data can be sorted using the buttons'\n];\n\n@Component({\n\tselector: 'example-action-bar-template',\n\ttemplateUrl: 'example-action-bar-template.component.html',\n\tstyleUrls: ['example-action-bar-template.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleActionBarTemplateComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(private dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n\n\tsortBySymbol(gridModel: GridModel, dir: string) {\n\t\tgridModel.sort({ by: [`${dir}symbol`] });\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-actions>\n\t\t<q-grid-action>\n\t\t\t<ng-template for=\"trigger\"\n\t\t\t\t\t\t let-$action>\n\t\t\t\t<button (click)=\"sortBySymbol($action.model, '+')\"\n\t\t\t\t\t\tmat-button>\n\t\t\t\t\tSort By Symbol Asc\n\t\t\t\t</button>\n\t\t\t</ng-template>\n\t\t</q-grid-action>\n\t\t<q-grid-action>\n\t\t\t<ng-template for=\"trigger\"\n\t\t\t\t\t\t let-$action>\n\t\t\t\t<button (click)=\"sortBySymbol($action.model, '-')\"\n\t\t\t\t\t\tmat-button>\n\t\t\t\t\tSort By Symbol Desc\n\t\t\t\t</button>\n\t\t\t</ng-template>\n\t\t</q-grid-action>\n\t</q-grid-actions>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'aggregate-column-basic',\n\t'Aggregates are counted and shown under the columns'\n];\n\n@Component({\n\tselector: 'example-aggregate-column-basic',\n\ttemplateUrl: 'example-aggregate-column-basic.component.html',\n\tstyleUrls: ['example-aggregate-column-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleAggregateColumnBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column key=\"boil\"\n\t\t               aggregation=\"max\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"melt\"\n\t\t               aggregation=\"min\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'alt-basic',\n\t'Rows can be selected using Alt+[0-9] Keys'\n];\n\n@Component({\n\tselector: 'example-alt-basic',\n\ttemplateUrl: 'example-alt-basic.component.html',\n\tstyleUrls: ['example-alt-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleAltBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows$: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows$ = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows$ | async\"\n\t\tclass=\"q-grid-compact\"\n\t\tselectionMode=\"singleOnly\"\n\t\tselectionUnit=\"row\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column type=\"select\"\n\t\t\t\t\t   [isVisible]=\"false\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-pane trigger=\"selection.items\">\n\t\t<ng-template for=\"right\"\n\t\t\t\t\t let-$pane\n\t\t\t\t\t let-$items=\"value\">\n\t\t\t<div style=\"width: 300px;\">\n\t\t\t\t<button mat-icon-button\n\t\t\t\t\t\tstyle=\"float: right;\"\n\t\t\t\t\t\t(click)=\"$pane.close('right')\">\n\t\t\t\t\t<mat-icon>close</mat-icon>\n\t\t\t\t</button>\n\n\t\t\t\t<h2>\n\t\t\t\t\t{{$items[0]?.name.last}}, {{$items[0]?.name.first}}\n\t\t\t\t</h2>\n\t\t\t</div>\n\t\t</ng-template>\n\t</q-grid-pane>\n\n\t<q-grid-alt>\n\n\t</q-grid-alt>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'cell-tooltip-basic',\n\t'Provides a text label that is displayed when the user hovers over the cell'\n];\n\n@Component({\n\tselector: 'example-cell-tooltip-basic',\n\ttemplateUrl: 'example-cell-tooltip-basic.component.html',\n\tstyleUrls: ['example-cell-tooltip-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleCellTooltipBasicComponent {\n\tstatic id = EXAMPLE_TAGS[0];\n\ttitle = EXAMPLE_TAGS[1];\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-cell-tooltip [showDelay]=\"1000\">\n\t</q-grid-cell-tooltip>\n</q-grid>","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows\"\n\t\teditMode=\"cell\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column [width]=\"170\"></q-grid-column>\n\t\t<q-grid-column key=\"customTemplate\"\n\t\t\t\t\t   [viewWidth]=\"200\"\n\t\t\t\t\t   title=\"Custom Template\"\n\t\t\t\t\t   type=\"array\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t\t\t\t let-$cell>\n\t\t\t\t{{$cell.value.join(', ')}}\n\t\t\t</ng-template>\n\t\t\t<ng-template for=\"edit\"\n\t\t\t\t\t\t let-$cell\n\t\t\t\t\t\t let-$view=\"$view\">\n\t\t\t\t<button mat-button\n\t\t\t\t\t\t(click)=\"$view.edit.cell.value = [];$view.edit.cell.exit.execute($cell)\">\n\t\t\t\t\tDelete\n\t\t\t\t</button>\n\t\t\t\t<button mat-button\n\t\t\t\t\t\t[q-grid-command]=\"$view.edit.cell.cancel\"\n\t\t\t\t\t\t[q-grid-command-arg]=\"$cell\">\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'column-array-basic',\n\t'Cells can contain arrays of data'\n];\n\n@Component({\n\tselector: 'example-column-array-basic',\n\ttemplateUrl: 'example-column-array-basic.component.html',\n\tstyleUrls: ['example-column-array-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnArrayBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\t'strings': ['Lorem', 'ipsum', 'dolor', 'sit', 'amet'],\n\t\t\t'numbers': [Number.MIN_SAFE_INTEGER, 1, Math.PI, 5, 7, 11, 13, 17, 19, 23, Number.MAX_VALUE],\n\t\t\t'booleans': [true, false, true],\n\t\t\t'nulls': [null, undefined, ''],\n\t\t\t'dates': [new Date(2018, 1, 12), new Date(2018, 2, 13)],\n\t\t\t'customTemplate': ['Lorem', 'ipsum', 'dolor', 'sit', 'amet']\n\t\t}\n\t];\n}\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { Observable, of } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'column-autocomplete-basic',\n\t'Cell value can be entered using autocomplete feature'\n];\n\n@Component({\n\tselector: 'example-column-autocomplete-basic',\n\ttemplateUrl: 'example-column-autocomplete-basic.component.html',\n\tstyleUrls: ['example-column-autocomplete-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnAutocompleteBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\t'number': 0,\n\t\t\t'text': 'Lorem',\n\t\t\t'bool': true,\n\t\t\t'date': new Date(2018, 9, 12),\n\t\t\t'null': null,\n\t\t\t'undefined': undefined,\n\t\t\t'empty': '',\n\t\t\t'object': { label: 'foo', value: 1 }\n\t\t}\n\t];\n\n\tboolFunctionFetchOptions = {\n\t\tfetch: row => [true, false, null].filter(item => item !== row.bool)\n\t};\n\n\ttextValueFetchOptions = {\n\t\tfetch: ['Lorem', 'ipsum', 'dolor', 'sit', 'amet']\n\t};\n\n\ttextPromiseFetchOptions = {\n\t\tfetch: new Promise(resolve =>\n\t\t\tsetTimeout(\n\t\t\t\t() => resolve(['Lorem', 'ipsum', 'dolor', 'sit', 'amet']),\n\t\t\t\t5000\n\t\t\t)\n\t\t)\n\t};\n\n\tdatePromiseFetchOptions = {\n\t\tfetch: new Promise(resolve =>\n\t\t\tsetTimeout(\n\t\t\t\t() => resolve([new Date(2017, 7, 7), new Date(2016, 6, 6), new Date(2015, 5, 5)]),\n\t\t\t\t5000\n\t\t\t)\n\t\t)\n\t};\n\n\tnumberObservableFetchOptions = {\n\t\tfetch: of([Math.PI, Math.LN10, Math.LN2, Math.E, Math.LOG10E, Math.LOG2E, Math.SQRT1_2])\n\t};\n\n\tmultiFetchOptions = {\n\t\tfetch: of([])\n\t};\n\n\tobjectFetchOptions = {\n\t\tfetch: [\n\t\t\t{ label: 'foo', value: 1 },\n\t\t\t{ label: 'bar', value: 2 }\n\t\t]\n\t};\n\n\tgetLabel(row: any) {\n\t\treturn row.object.label;\n\t}\n\n\tgetItemLabel(item: { label: string }) {\n\t\treturn item ? item.label : '';\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows\"\n\t\teditMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"number\"\n\t\t\t\t\t   title=\"Number\"\n\t\t\t\t\t   type=\"number\"\n\t\t\t\t\t   editor=\"autocomplete\"\n\t\t\t\t\t   [editorOptions]=\"numberObservableFetchOptions\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"text\"\n\t\t\t\t\t   title=\"Text Value\"\n\t\t\t\t\t   type=\"text\"\n\t\t\t\t\t   editor=\"autocomplete\"\n\t\t\t\t\t   [editorOptions]=\"textValueFetchOptions\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"bool\"\n\t\t\t\t\t   title=\"Bool\"\n\t\t\t\t\t   type=\"bool\"\n\t\t\t\t\t   editor=\"autocomplete\"\n\t\t\t\t\t   [editorOptions]=\"boolFunctionFetchOptions\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"date\"\n\t\t\t\t\t   title=\"Date\"\n\t\t\t\t\t   type=\"date\"\n\t\t\t\t\t   editor=\"autocomplete\"\n\t\t\t\t\t   [editorOptions]=\"datePromiseFetchOptions\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"null\"\n\t\t\t\t\t   title=\"Null\"\n\t\t\t\t\t   type=\"text\"\n\t\t\t\t\t   editor=\"autocomplete\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"undefined\"\n\t\t\t\t\t   title=\"Undefined\"\n\t\t\t\t\t   type=\"text\"\n\t\t\t\t\t   editor=\"autocomplete\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"empty\"\n\t\t\t\t\t   title=\"Empty Promise\"\n\t\t\t\t\t   type=\"text\"\n\t\t\t\t\t   editor=\"autocomplete\"\n\t\t\t\t\t   [editorOptions]=\"textPromiseFetchOptions\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"multi\"\n\t\t\t\t\t   title=\"Multi\"\n\t\t\t\t\t   type=\"text\"\n\t\t\t\t\t   editor=\"autocomplete\"\n\t\t\t\t\t   [editorOptions]=\"multiFetchOptions\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"object\"\n\t\t\t\t\t   title=\"Object\"\n\t\t\t\t\t   type=\"object\"\n\t\t\t\t\t   editor=\"autocomplete\"\n\t\t\t\t\t   [label]=\"getLabel\"\n\t\t\t\t\t   [itemLabel]=\"getItemLabel\"\n\t\t\t\t\t   [editorOptions]=\"objectFetchOptions\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows\"\n\t\t[model]=\"gridModel\"\n\t\teditMode=\"cell\">\n\t<ng-template qGridColumnBody=\"customTemplate\"\n\t\t\t\t let-$cell>\n\t\t{{$cell.value === null ? 'NULL' : $cell.value ? 'YES' : 'NO'}}\n\t</ng-template>\n\t<ng-template qGridColumnEdit=\"customTemplate\"\n\t\t\t\t let-$view=\"$view\">\n\t\t<button mat-button\n\t\t\t\t(click)=\"$view.edit.cell.value = true\">\n\t\t\tSET YES\n\t\t</button>\n\t\t<button mat-button\n\t\t\t\t(click)=\"$view.edit.cell.value = false\">\n\t\t\tSET NO\n\t\t</button>\n\t\t<button mat-button\n\t\t\t\t(click)=\"$view.edit.cell.value = null\">\n\t\t\tSET NULL\n\t\t</button>\n\t</ng-template>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { GridModel, Grid } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'column-bool-basic',\n\t'Cell value is boolean'\n];\n\n@Component({\n\tselector: 'example-column-bool-basic',\n\ttemplateUrl: 'example-column-bool-basic.component.html',\n\tstyleUrls: ['example-column-bool-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnBoolBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\t'true': true,\n\t\t\t'false': false,\n\t\t\t'null': null,\n\t\t\t'undefined': undefined,\n\t\t\t'yesNo': 'yes',\n\t\t\t'noYes': 'no',\n\t\t\t'nullYesNo': null,\n\t\t\t'triggerFocus': true,\n\t\t\t'triggerClick': false,\n\t\t\t'customTemplate': true\n\t\t}\n\t];\n\n\tgridModel: GridModel = this.qgrid\n\t\t.model()\n\t\t.columnList({\n\t\t\tgeneration: 'deep'\n\t\t})\n\t\t.data({\n\t\t\tcolumns: [\n\t\t\t\t{\n\t\t\t\t\tkey: 'true',\n\t\t\t\t\ttitle: 'True',\n\t\t\t\t\twidth: '100',\n\t\t\t\t\ttype: 'bool'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'false',\n\t\t\t\t\ttitle: 'False',\n\t\t\t\t\twidth: '100',\n\t\t\t\t\ttype: 'bool'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'undefined',\n\t\t\t\t\ttitle: 'Undefined',\n\t\t\t\t\twidth: '100',\n\t\t\t\t\ttype: 'bool'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'null',\n\t\t\t\t\ttitle: 'Null',\n\t\t\t\t\twidth: '100',\n\t\t\t\t\ttype: 'bool'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'yesNo',\n\t\t\t\t\ttitle: 'Yes/No',\n\t\t\t\t\ttrueValue: 'yes',\n\t\t\t\t\tfalseValue: 'no',\n\t\t\t\t\twidth: '100',\n\t\t\t\t\ttype: 'bool'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'noYes',\n\t\t\t\t\ttitle: 'No/Yes',\n\t\t\t\t\ttrueValue: 'yes',\n\t\t\t\t\tfalseValue: 'no',\n\t\t\t\t\twidth: '100',\n\t\t\t\t\ttype: 'bool'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'nullYesNo',\n\t\t\t\t\ttitle: 'Null/Yes/No',\n\t\t\t\t\ttrueValue: 'yes',\n\t\t\t\t\tfalseValue: 'no',\n\t\t\t\t\twidth: '100',\n\t\t\t\t\ttype: 'bool'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'triggerFocus',\n\t\t\t\t\ttitle: 'Trigger Focus',\n\t\t\t\t\twidth: '120',\n\t\t\t\t\teditorOptions: {\n\t\t\t\t\t\ttrigger: 'focus'\n\t\t\t\t\t},\n\t\t\t\t\ttype: 'bool'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'triggerClick',\n\t\t\t\t\ttitle: 'Trigger click',\n\t\t\t\t\twidth: '120',\n\t\t\t\t\teditorOptions: {\n\t\t\t\t\t\ttrigger: 'click'\n\t\t\t\t\t},\n\t\t\t\t\ttype: 'bool'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'customTemplate',\n\t\t\t\t\ttitle: 'Custom Template',\n\t\t\t\t\twidth: '120',\n\t\t\t\t\tviewWidth: 300,\n\t\t\t\t\teditorOptions: {\n\t\t\t\t\t\ttrigger: 'focus'\n\t\t\t\t\t},\n\t\t\t\t\ttype: 'bool'\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\n\tconstructor(private qgrid: Grid) { }\n\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows\"\n        editMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"number\"\n\t\t               title=\"Number\"\n\t\t               type=\"currency\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"euro\"\n\t\t               title=\"Euro\"\n\t\t               code=\"EUR\"\n\t\t               type=\"currency\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"null\"\n\t\t               title=\"Null\"\n\t\t               type=\"currency\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"undefined\"\n\t\t               title=\"Undefined\"\n\t\t               type=\"currency\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"empty\"\n\t\t               title=\"Empty\"\n\t\t               type=\"currency\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"string\"\n\t\t               title=\"String\"\n\t\t               type=\"currency\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"customTemplate\"\n\t\t               title=\"Custom Template\"\n\t\t               type=\"currency\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t             let-$cell>\n\t\t\t\tusd: {{$cell.value}}\n\t\t\t</ng-template>\n\t\t\t<ng-template for=\"edit\"\n\t\t\t             let-$cell\n\t\t\t             let-$view=\"$view\">\n\t\t\t\t<input type=\"number\"\n\t\t\t\t       style=\"width: 100%\"\n\t\t\t\t       q-grid-focus\n\t\t\t\t       [(ngModel)]=\"$view.edit.cell.value\"\n\t\t\t\t       (blur)=\"$view.edit.cell.exit.execute($cell)\" />\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'column-currency-basic',\n\t'Cell value contains currency sign'\n];\n\n@Component({\n\tselector: 'example-column-currency-basic',\n\ttemplateUrl: 'example-column-currency-basic.component.html',\n\tstyleUrls: ['example-column-currency-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnCurrencyBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\t'number': 100,\n\t\t\t'euro': 200,\n\t\t\t'null': null,\n\t\t\t'undefined': undefined,\n\t\t\t'empty': '',\n\t\t\t'string': '120',\n\t\t\t'customTemplate': 30\n\t\t}\n\t];\n}\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'column-data-safe',\n\t'No errors exist despite of bad data'\n];\n\n@Component({\n\tselector: 'example-column-data-safe',\n\ttemplateUrl: 'example-column-data-safe.component.html',\n\tstyleUrls: ['example-column-data-safe.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnDataSafeComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\tlevel0: {\n\t\t\t\tcurrency: 10,\n\t\t\t\tnumber: 12,\n\t\t\t\tdate: '1983-09-18',\n\t\t\t\tboolean: true,\n\t\t\t\temail: 'john@mail.com',\n\t\t\t\ttime: '12:00',\n\t\t\t\timage: 'https://upload.wikimedia.org/wikipedia/commons/e/e4/Hydrogen_Spectra.jpg',\n\t\t\t\tarray: [1, 2, 3]\n\t\t\t}\n\t\t},\n\t\t{},\n\t\t{\n\t\t\tlevel0: {\n\t\t\t\ttime: '13:00'\n\t\t\t}\n\t\t}\n\n\t];\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows\"\n\t\teditMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"currency\"\n\t\t\t\t\t   type=\"currency\"\n\t\t\t\t\t   path=\"level0.currency\"\n\t\t\t\t\t   title=\"Currency\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"number\"\n\t\t\t\t\t   type=\"number\"\n\t\t\t\t\t   path=\"level0.number\"\n\t\t\t\t\t   title=\"Number\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"notProperty\"\n\t\t\t\t\t   path=\"notProperty\"\n\t\t\t\t\t   title=\"Not Existing Property\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"notProperty2\"\n\t\t\t\t\t   path=\"level2.notProperty\"\n\t\t\t\t\t   title=\"Not Existing Property on Level 2\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"time\"\n\t\t\t\t\t   type=\"time\"\n\t\t\t\t\t   path=\"level0.time\"\n\t\t\t\t\t   title=\"Time\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"array\"\n\t\t\t\t\t   type=\"array\"\n\t\t\t\t\t   path=\"level0.array\"\n\t\t\t\t\t   title=\"Array\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"email\"\n\t\t\t\t\t   type=\"email\"\n\t\t\t\t\t   path=\"level0.email\"\n\t\t\t\t\t   title=\"Email\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"date\"\n\t\t\t\t\t   type=\"date\"\n\t\t\t\t\t   path=\"level0.date\"\n\t\t\t\t\t   title=\"Date\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"image\"\n\t\t\t\t\t   type=\"image\"\n\t\t\t\t\t   path=\"level0.image\"\n\t\t\t\t\t   title=\"Image\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows\"\n\t\teditMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"number\"\n\t\t\t\t\t   title=\"Number\"\n\t\t\t\t\t   type=\"date\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"bool\"\n\t\t\t\t\t   title=\"Bool\"\n\t\t\t\t\t   type=\"date\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"date\"\n\t\t\t\t\t\t [canEdit]=\"false\"\n\t\t\t\t\t\t title=\"Date\"\n\t\t\t\t\t   type=\"date\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"arr\"\n\t\t\t\t[canEdit]=\"false\"\n\t\t\t\titemFormat=\"MM/dd/yyyy\"\n\t\t\t\titemType=\"date\"\n\t\t\t\ttitle=\"Date Array\"\n\t\t\t\ttype=\"array\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"null\"\n\t\t\t\t\t   title=\"Null\"\n\t\t\t\t\t   type=\"date\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"undefined\"\n\t\t\t\t\t   title=\"Undefined\"\n\t\t\t\t\t   type=\"date\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"empty\"\n\t\t\t\t\t   title=\"Empty\"\n\t\t\t\t\t   type=\"date\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"format\"\n\t\t\t\t\t   title=\"Format\"\n\t\t\t\t\t   format=\"short\"\n\t\t\t\t\t   type=\"date\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"text\"\n\t\t\t\t\t   title=\"Text\"\n\t\t\t\t\t   type=\"date\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"customTemplate\"\n\t\t\t\t\t   title=\"Custom Template\"\n\t\t\t\t\t   [width]=\"200\"\n\t\t\t\t\t   format=\"fullDate\"\n\t\t\t\t\t   type=\"date\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t\t\t\t let-$cell>\n\t\t\t\t<em>{{$cell.label}}</em>\n\t\t\t</ng-template>\n\t\t\t<ng-template for=\"edit\"\n\t\t\t\t\t\t let-$cell\n\t\t\t\t\t\t let-$view=\"$view\">\n\t\t\t\t<input type=\"date\"\n\t\t\t\t\t   style=\"width: 100%\"\n\t\t\t\t\t   q-grid-focus\n\t\t\t\t\t   [ngModel]=\"$view.edit.cell.value\"\n\t\t\t\t\t   (ngModelChange)=\"$view.edit.cell.value = $event\"\n\t\t\t\t\t   (blur)=\"$view.edit.cell.exit.execute($cell)\" />\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'column-date-basic',\n\t'Cell value is date'\n];\n\n@Component({\n\tselector: 'example-column-date-basic',\n\ttemplateUrl: 'example-column-date-basic.component.html',\n\tstyleUrls: ['example-column-date-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnDateBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\t'number': 100.12,\n\t\t\t'bool': true,\n\t\t\t'date': new Date(2018, 9, 12),\n\t\t\t'arr': [new Date(2020, 9, 12), new Date(2020, 9, 10), new Date(2020, 10, 12), new Date(2020, 9, 12)],\n\t\t\t'null': null,\n\t\t\t'undefined': undefined,\n\t\t\t'empty': '',\n\t\t\t'text': '2018/3/28',\n\t\t\t'maxLength2': 'PI',\n\t\t\t'format': new Date(2018, 9, 12),\n\t\t\t'customTemplate': new Date(2018, 9, 12)\n\t\t}\n\t];\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows\"\n\t\teditMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"number\"\n\t\t\t\t\t   title=\"Number\"\n\t\t\t\t\t   type=\"datetime\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"bool\"\n\t\t\t\t\t   title=\"Bool\"\n\t\t\t\t\t   type=\"datetime\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"date\"\n\t\t\t\t\t   title=\"Date\"\n\t\t\t\t\t   type=\"datetime\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"null\"\n\t\t\t\t\t   title=\"Null\"\n\t\t\t\t\t   type=\"datetime\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"undefined\"\n\t\t\t\t\t   title=\"Undefined\"\n\t\t\t\t\t   type=\"datetime\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"empty\"\n\t\t\t\t\t   title=\"Empty\"\n\t\t\t\t\t   type=\"datetime\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"format\"\n\t\t\t\t\t   title=\"Format\"\n\t\t\t\t\t   format=\"short\"\n\t\t\t\t\t   type=\"datetime\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"text\"\n\t\t\t\t\t   title=\"Text\"\n\t\t\t\t\t   type=\"datetime\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"customTemplate\"\n\t\t\t\t\t   title=\"Custom Template\"\n\t\t\t\t\t   [width]=\"200\"\n\t\t\t\t\t   format=\"MM/dd/yyyy h:mm:ss\"\n\t\t\t\t\t   type=\"datetime\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t\t\t\t let-$cell>\n\t\t\t\t<em>{{$cell.label}}</em>\n\t\t\t</ng-template>\n\t\t\t<ng-template for=\"edit\"\n\t\t\t\t\t\t let-$cell\n\t\t\t\t\t\t let-$view=\"$view\">\n\t\t\t\t<input type=\"date\"\n\t\t\t\t\t   style=\"width: 100%\"\n\t\t\t\t\t   q-grid-focus\n\t\t\t\t\t   [ngModel]=\"$view.edit.cell.value\"\n\t\t\t\t\t   (ngModelChange)=\"$view.edit.cell.value = $event\"\n\t\t\t\t\t   (blur)=\"$view.edit.cell.exit.execute($cell)\" />\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'column-datetime-basic',\n\t'Cell value is date and time'\n];\n\n@Component({\n\tselector: 'example-column-datetime-basic',\n\ttemplateUrl: 'example-column-datetime-basic.component.html',\n\tstyleUrls: ['example-column-datetime-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnDateTimeBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\t'number': 100.12,\n\t\t\t'bool': true,\n\t\t\t'date': new Date(2018, 9, 12, 12, 30, 0),\n\t\t\t'null': null,\n\t\t\t'undefined': undefined,\n\t\t\t'empty': '',\n\t\t\t'text': '2018/3/28',\n\t\t\t'maxLength2': 'PI',\n\t\t\t'format': new Date(2018, 9, 12, 1, 25, 0),\n\t\t\t'customTemplate': new Date(2018, 13, 33)\n\t\t}\n\t];\n}\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { Observable, of } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'column-dropdown-basic',\n\t'Cell value can be selected from dropdown menu'\n];\n\n@Component({\n\tselector: 'example-column-dropdown-basic',\n\ttemplateUrl: 'example-column-dropdown-basic.component.html',\n\tstyleUrls: ['example-column-dropdown-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnDropdownBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\t'number': 0,\n\t\t\t'text': 'Lorem',\n\t\t\t'bool': true,\n\t\t\t'date': new Date(2018, 9, 12),\n\t\t\t'null': null,\n\t\t\t'undefined': undefined,\n\t\t\t'empty': '',\n\t\t\t'object': null,\n\t\t\t'multi': null\n\t\t}\n\t];\n\n\tboolFunctionFetchOptions = {\n\t\tfetch: row => [true, false, null].filter(item => item !== row.bool)\n\t};\n\n\ttextValueFetchOptions = {\n\t\tfetch: ['Lorem', 'ipsum', 'dolor', 'sit', 'amet']\n\t};\n\n\ttextPromiseFetchOptions = {\n\t\tfetch: new Promise(resolve =>\n\t\t\tsetTimeout(\n\t\t\t\t() => resolve(['Lorem', 'ipsum', 'dolor', 'sit', 'amet']),\n\t\t\t\t5000\n\t\t\t)\n\t\t)\n\t};\n\n\tnumberObservableFetchOptions = {\n\t\tfetch: of([Math.PI, Math.LN10, Math.LN2, Math.E, Math.LOG10E, Math.LOG2E, Math.SQRT1_2])\n\t};\n\n\tobjectFetchOptions = {\n\t\tfetch: [\n\t\t\t{ label: 'hello' },\n\t\t\t{ label: 'world' }\n\t\t]\n\t};\n\n\tmultiFetchOptions = {\n\t\tfetch: of([])\n\t};\n\n\tdateFetchOptions = {\n\t\tfetch: [\n\t\t\tnew Date(2018, 9, 12),\n\t\t\tnew Date(2019, 9, 12),\n\t\t]\n\t};\n\n\tgetLabel(row: any): string {\n\t\treturn row.object ? row.object.label : '';\n\t}\n\n\tgetItemLabel(item: { label: string }): string {\n\t\treturn item.label;\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows\"\n\t\teditMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"number\"\n\t\t\t\t\t   title=\"Number\"\n\t\t\t\t\t   type=\"number\"\n\t\t\t\t\t   editor=\"dropdown\"\n\t\t\t\t\t   [editorOptions]=\"numberObservableFetchOptions\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"text\"\n\t\t\t\t\t   title=\"Text Value\"\n\t\t\t\t\t   type=\"text\"\n\t\t\t\t\t   editor=\"dropdown\"\n\t\t\t\t\t   [editorOptions]=\"textValueFetchOptions\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"bool\"\n\t\t\t\t\t   title=\"Bool\"\n\t\t\t\t\t   type=\"bool\"\n\t\t\t\t\t   editor=\"dropdown\"\n\t\t\t\t\t   [editorOptions]=\"boolFunctionFetchOptions\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"date\"\n\t\t\t\t\t   title=\"Date\"\n\t\t\t\t\t   type=\"date\"\n\t\t\t\t\t   editor=\"dropdown\"\n\t\t\t\t\t   [editorOptions]=\"dateFetchOptions\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"null\"\n\t\t\t\t\t   title=\"Null\"\n\t\t\t\t\t   type=\"text\"\n\t\t\t\t\t   editor=\"dropdown\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"undefined\"\n\t\t\t\t\t   title=\"Undefined\"\n\t\t\t\t\t   type=\"text\"\n\t\t\t\t\t   editor=\"dropdown\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"empty\"\n\t\t\t\t\t   title=\"Empty Promise\"\n\t\t\t\t\t   type=\"text\"\n\t\t\t\t\t   editor=\"dropdown\"\n\t\t\t\t\t   [editorOptions]=\"textPromiseFetchOptions\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"multi\"\n\t\t\t\t\t   title=\"Multi\"\n\t\t\t\t\t   type=\"text\"\n\t\t\t\t\t   editor=\"dropdown\"\n\t\t\t\t\t   [editorOptions]=\"multiFetchOptions\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"object\"\n\t\t\t\t\t   title=\"Object\"\n\t\t\t\t\t   type=\"text\"\n\t\t\t\t\t   editor=\"dropdown\"\n\t\t\t\t\t   [label]=\"getLabel\"\n\t\t\t\t\t   [itemLabel]=\"getItemLabel\"\n\t\t\t\t\t   [editorOptions]=\"objectFetchOptions\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","<q-grid [caption]=\"title\"\n        [rows]=\"rows\"\n        editMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"invalid\"\n\t\t               title=\"Invalid\"\n\t\t               type=\"email\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"valid\"\n\t\t               title=\"Valid\"\n\t\t               type=\"email\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"withLabel\"\n\t\t\t\t\t   title=\"With Label\"\n\t\t\t\t\t   [label]=\"myLabel\"\n\t\t               type=\"email\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"customTemplate\"\n\t\t               title=\"Custom Template\"\n\t\t               [editorOptions]=\"{trigger: 'click'}\"\n\t\t               type=\"email\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t             let-$cell>\n\t\t\t\t<em>{{$cell.value}}</em>\n\t\t\t</ng-template>\n\t\t\t<ng-template for=\"edit\"\n\t\t\t             let-$cell\n\t\t\t             let-$view=\"$view\">\n\t\t\t\t<input style=\"width: 100%\"\n\t\t\t\t       q-grid-focus\n\t\t\t\t       [(ngModel)]=\"$view.edit.cell.value\"\n\t\t\t\t       (blur)=\"$view.edit.cell.exit.execute($cell)\" />\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'column-email-basic',\n\t'Cell value is email'\n];\n\n@Component({\n\tselector: 'example-column-email-basic',\n\ttemplateUrl: 'example-column-email-basic.component.html',\n\tstyleUrls: ['example-column-email-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnEmailBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\t'valid': 'qgrid.team@gmail.com',\n\t\t\t'invalid': 'Lorem ipsum dolor',\n\t\t\t'withLabel': 'qgrid.team@gmail.com',\n\t\t\t'null': null,\n\t\t\t'undefined': undefined,\n\t\t\t'empty': '',\n\t\t\t'customTemplate': 'qgrid.team@gmail.com'\n\t\t}\n\t];\n\n\tprivate label = 'QGRID';\n\n\tmyLabel: (row: any, value?: any) => string | undefined;\n\n\tconstructor() {\n\t\tconst self = this;\n\t\tthis.myLabel = (...args) => {\n\t\t\tconst [_, value] = args;\n\t\t\tif (args.length > 1) {\n\t\t\t\tself.label = value;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn self.label;\n\t\t};\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows\"\n        editMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"invalid\"\n\t\t               title=\"Invalid\"\n\t\t               type=\"file\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"valid\"\n\t\t               title=\"Valid\"\n\t\t               type=\"file\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"withLabel\"\n\t\t\t\t\t   title=\"With Label\"\n\t\t\t\t\t   label=\"QGRID\"\n\t\t               type=\"file\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"empty\"\n\t\t\t\t\t   title=\"Empty\"\n\t\t               type=\"file\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"customTemplate\"\n\t\t               title=\"Custom Template\"\n\t\t               [editorOptions]=\"{trigger: 'click'}\"\n\t\t               type=\"file\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t             let-$cell>\n\t\t\t\t<em>{{$cell.value}}</em>\n\t\t\t</ng-template>\n\t\t\t<ng-template for=\"edit\"\n\t\t\t             let-$cell\n\t\t\t             let-$view=\"$view\">\n\t\t\t\t<input style=\"width: 100%\"\n\t\t\t\t       q-grid-focus\n\t\t\t\t       [(ngModel)]=\"$view.edit.cell.value\"\n\t\t\t\t       (blur)=\"$view.edit.cell.exit.execute($cell)\" />\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'column-file-basic',\n\t'Cell value contains uploaded file'\n];\n\n@Component({\n\tselector: 'example-column-file-basic',\n\ttemplateUrl: 'example-column-file-basic.component.html',\n\tstyleUrls: ['example-column-file-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnFileBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\t'valid': 'https://rawgit.com/qgrid/ng2/master/CHANGELOG.md',\n\t\t\t'invalid': 'Lorem ipsum dolor',\n\t\t\t'withLabel': 'https://rawgit.com/qgrid/ng2/master/CHANGELOG.md',\n\t\t\t'empty': '',\n\t\t\t'customTemplate': 'https://rawgit.com/qgrid/ng2/master/CHANGELOG.md'\n\t\t}\n\t];\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows\"\n        editMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"number\"\n\t\t\t\t\t   title=\"Number\"\n\t\t\t\t\t   editor=\"number\"\n\t\t               type=\"id\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"bool\"\n\t\t\t\t\t   title=\"Bool\"\n\t\t\t\t\t   editor=\"bool\"\n\t\t               type=\"id\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"date\"\n\t\t\t\t\t   title=\"Date\"\n\t\t\t\t\t   editor=\"date\"\n\t\t               type=\"id\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"text\"\n\t\t               title=\"Text\"\n\t\t               type=\"id\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"null\"\n\t\t               title=\"Null\"\n\t\t               type=\"id\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"undefined\"\n\t\t               title=\"Undefined\"\n\t\t               type=\"id\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"empty\"\n\t\t               title=\"Empty\"\n\t\t               type=\"id\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"customTemplate\"\n\t\t               title=\"Custom Template\"\n\t\t               type=\"text\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t             let-$cell>\n\t\t\t\t<strong>{{$cell.value}}</strong>\n\t\t\t</ng-template>\n\t\t\t<ng-template for=\"edit\"\n\t\t\t             let-$cell\n\t\t\t             let-$view=\"$view\">\n\t\t\t\t<input style=\"width: 100%\"\n\t\t\t\t       q-grid-focus\n\t\t\t\t       [(ngModel)]=\"$view.edit.cell.value\"\n\t\t\t\t       (blur)=\"$view.edit.cell.exit.execute($cell)\" />\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'column-id-basic',\n\t'Columns with id-type work with different data'\n];\n\n@Component({\n\tselector: 'example-column-id-basic',\n\ttemplateUrl: 'example-column-id-basic.component.html',\n\tstyleUrls: ['example-column-id-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnIdBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\t'number': 100.12,\n\t\t\t'bool': true,\n\t\t\t'date': new Date(2018, 9, 12),\n\t\t\t'text': 'some id',\n\t\t\t'null': null,\n\t\t\t'undefined': undefined,\n\t\t\t'empty': '',\n\t\t\t'customTemplate': 'my id'\n\t\t}\n\t];\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows\"\n        editMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"invalid\"\n\t\t               title=\"Invalid\"\n\t\t               type=\"image\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"valid\"\n\t\t               title=\"Valid\"\n\t\t               type=\"image\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"withLabel\"\n\t\t\t\t\t   title=\"With Label\"\n\t\t\t\t\t   label=\"QGRID\"\n\t\t               type=\"image\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"empty\"\n\t\t\t\t\t   title=\"Empty\"\n\t\t               type=\"image\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"customTemplate\"\n\t\t               title=\"Custom Template\"\n\t\t\t\t\t   [editorOptions]=\"{trigger: 'click'}\"\n\t\t\t\t\t   [width]=\"200\"\n\t\t               type=\"image\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t             let-$cell>\n\t\t\t\t<em>{{$cell.value}}</em>\n\t\t\t</ng-template>\n\t\t\t<ng-template for=\"edit\"\n\t\t\t             let-$cell\n\t\t\t             let-$view=\"$view\">\n\t\t\t\t<input style=\"width: 100%\"\n\t\t\t\t       q-grid-focus\n\t\t\t\t       [(ngModel)]=\"$view.edit.cell.value\"\n\t\t\t\t       (blur)=\"$view.edit.cell.exit.execute($cell)\" />\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'column-image-basic',\n\t'Cell value contains uploaded image'\n];\n\n@Component({\n\tselector: 'example-column-image-basic',\n\ttemplateUrl: 'example-column-image-basic.component.html',\n\tstyleUrls: ['example-column-image-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnImageBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\t'valid': 'https://rawgit.com/qgrid/doc/master/themes/qgrid/source/assets/favicons/android-chrome-192x192.png',\n\t\t\t'invalid': 'Lorem ipsum dolor',\n\t\t\t'withLabel': 'https://rawgit.com/qgrid/doc/master/themes/qgrid/source/assets/favicons/android-chrome-512x512.png',\n\t\t\t'empty': '',\n\t\t\t'customTemplate': 'https://rawgit.com/qgrid/doc/master/themes/qgrid/source/assets/favicons/favicon-32x32.png'\n\t\t}\n\t];\n}\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'column-list-basic',\n\t'Grid content is a list, which can be switched using UI buttons'\n];\n\n@Component({\n\tselector: 'example-column-list-basic',\n\ttemplateUrl: 'example-column-list-basic.component.html',\n\tstyleUrls: ['example-column-list-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnListBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\tgroup = '';\n\trows$: Observable<Human[]> = this.dataService.getPeople();\n\n\tconstructor(private dataService: DataService) {}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows$ | async\"\n\t\t[ngSwitch]=\"group\">\n\n\t<q-grid-columns *ngSwitchCase=\"'name'\">\n\t\t<q-grid-column key=\"firstName\"\n\t\t\t\t\t   path=\"name.first\"\n\t\t\t\t\t   title=\"First Name\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"lastName\"\n\t\t\t\t\t   path=\"name.last\"\n\t\t\t\t\t   title=\"Last Name\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-columns *ngSwitchCase=\"'address'\">\n\t\t<q-grid-column key=\"city\"\n\t\t\t\t\t   path=\"contact.address.city\"\n\t\t\t\t\t   title=\"City\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"state\"\n\t\t\t\t\t   path=\"contact.address.state\"\n\t\t\t\t\t   title=\"State\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-columns *ngSwitchCase=\"'gender'\">\n\t\t<q-grid-column key=\"gender\"\n\t\t\t\t\t   title=\"Gender\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-columns *ngSwitchDefault>\n\t\t<q-grid-column key=\"rowNumber\"\n\t\t\t\t\t   type=\"row-number\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-toolbar>\n\t\t<ng-template for=\"top\">\n\t\t\t<button mat-button\n\t\t\t\t\t(click)=\"group = 'name'\">\n\t\t\t\tName\n\t\t\t</button>\n\t\t\t<button mat-button\n\t\t\t\t\t(click)=\"group = 'address'\">\n\t\t\t\tAddress\n\t\t\t</button>\n\t\t\t<button mat-button\n\t\t\t\t\t(click)=\"group = 'gender'\">\n\t\t\t\tGender\n\t\t\t</button>\n\t\t\t<button mat-button\n\t\t\t\t\t(click)=\"group = ''\">\n\t\t\t\tDefault\n\t\t\t</button>\n\t\t</ng-template>\n\t</q-grid-toolbar>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'column-list-loop',\n\t'Columns can be created in html-template using *ngFor'\n];\n\n@Component({\n\tselector: 'example-column-list-loop',\n\ttemplateUrl: 'example-column-list-loop.component.html',\n\tstyleUrls: ['example-column-list-loop.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnListLoopComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tcolumns = [\n\t\t{\n\t\t\tkey: 'number',\n\t\t\ttitle: 'Number'\n\t\t},\n\t\t{\n\t\t\tkey: 'symbol',\n\t\t\ttitle: 'Symbol'\n\t\t},\n\t\t{\n\t\t\tkey: 'name',\n\t\t\ttitle: 'Name'\n\t\t},\n\t\t{\n\t\t\tkey: 'appearance',\n\t\t\ttitle: 'Appearance'\n\t\t}\n\t];\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns>\n\t\t<q-grid-column *ngFor=\"let column of columns\"\n\t\t               [key]=\"column.key\"\n\t\t               [title]=\"column.title\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-row [canMove]=\"true\"></q-grid-row>\n</q-grid>","<q-grid [caption]=\"title\"\n        [rows]=\"rows\"\n        editMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"number\"\n\t\t               title=\"Number\"\n\t\t               type=\"number\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"format3.1-5\"\n\t\t               title=\"Format3.1-5\"\n\t\t               format=\"3.1-5\"\n\t\t               type=\"number\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"max\"\n\t\t               title=\"Max\"\n\t\t               type=\"number\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"min\"\n\t\t               title=\"Min\"\n\t\t               type=\"number\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"null\"\n\t\t               title=\"Null\"\n\t\t               type=\"number\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"undefined\"\n\t\t               title=\"Undefined\"\n\t\t               type=\"number\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"empty\"\n\t\t               title=\"Empty\"\n\t\t               type=\"number\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"string\"\n\t\t               title=\"String\"\n\t\t               type=\"number\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"customTemplate\"\n\t\t               title=\"Custom Template\"\n\t\t               type=\"number\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t             let-$cell>\n\t\t\t\tvalue: {{$cell.value}}\n\t\t\t</ng-template>\n\t\t\t<ng-template for=\"edit\"\n\t\t\t             let-$cell\n\t\t\t             let-$view=\"$view\">\n\t\t\t\t<input type=\"number\"\n\t\t\t\t       style=\"width: 100%\"\n\t\t\t\t       q-grid-focus\n\t\t\t\t       [(ngModel)]=\"$view.edit.cell.value\"\n\t\t\t\t       (blur)=\"$view.edit.cell.exit.execute($cell)\" />\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'column-number-basic',\n\t'Cell value is number in different formats'\n];\n\n@Component({\n\tselector: 'example-column-number-basic',\n\ttemplateUrl: 'example-column-number-basic.component.html',\n\tstyleUrls: ['example-column-number-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnNumberBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\t'number': 100,\n\t\t\t'format3.1-5': Math.PI,\n\t\t\t'max': Number.MAX_VALUE,\n\t\t\t'min': Number.MIN_VALUE,\n\t\t\t'null': null,\n\t\t\t'undefined': undefined,\n\t\t\t'empty': '',\n\t\t\t'string': '120',\n\t\t\t'customTemplate': 30\n\t\t}\n\t];\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows\"\n        editMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"number\"\n\t\t               title=\"Number\"\n\t\t               type=\"password\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"bool\"\n\t\t               title=\"Bool\"\n\t\t               type=\"password\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"date\"\n\t\t               title=\"Date\"\n\t\t               type=\"password\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"null\"\n\t\t               title=\"Null\"\n\t\t               type=\"password\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"undefined\"\n\t\t               title=\"Undefined\"\n\t\t               type=\"password\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"empty\"\n\t\t               title=\"Empty\"\n\t\t               type=\"password\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"maxLength2\"\n\t\t               title=\"Max Length 2\"\n\t\t               [maxLength]=\"2\"\n\t\t               type=\"password\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"customTemplate\"\n\t\t               title=\"Custom Template\"\n\t\t               type=\"password\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t             let-$cell>\n\t\t\t\t<strong>PASSWORD</strong>\n\t\t\t</ng-template>\n\t\t\t<ng-template for=\"edit\"\n\t\t\t             let-$cell\n\t\t\t             let-$view=\"$view\">\n\t\t\t\t<input style=\"width: 100%\"\n\t\t\t\t       type=\"password\"\n\t\t\t\t       q-grid-focus\n\t\t\t\t       [(ngModel)]=\"$view.edit.cell.value\"\n\t\t\t\t       (blur)=\"$view.edit.cell.exit.execute($cell)\" />\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'column-password-basic',\n\t'Cell value has password format (all characters are replaced with the asterisk)'\n];\n\n@Component({\n\tselector: 'example-column-password-basic',\n\ttemplateUrl: 'example-column-password-basic.component.html',\n\tstyleUrls: ['example-column-password-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnPasswordBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\t'number': 100.12,\n\t\t\t'bool': true,\n\t\t\t'date': new Date(2018, 9, 12),\n\t\t\t'null': null,\n\t\t\t'undefined': undefined,\n\t\t\t'empty': '',\n\t\t\t'maxLength2': 'PI',\n\t\t\t'customTemplate': 'Hello World'\n\t\t}\n\t];\n}\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { Grid, EditorOptions, Command } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'column-reference-basic',\n\t'Cell value is a reference to another value'\n];\n\n@Component({\n\tselector: 'example-column-reference-basic',\n\ttemplateUrl: 'example-column-reference-basic.component.html',\n\tstyleUrls: ['example-column-reference-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnReferenceBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\t'notEditable': ['Lorem', 'ipsum', 'dolor', 'sit', 'amet'],\n\t\t\t'editable': ['Lorem', 'ipsum'],\n\t\t\t'customTemplate': ['Lorem', 'dolor', 'amet'],\n\t\t\t'singleValue': 'Lorem',\n\t\t\t'complexValues': [{ value: 'Lorem' }, { value: 'dolor' }, { value: 'amet' }]\n\t\t}\n\t];\n\n\tnotEditableOptions: EditorOptions = {\n\t\tmodelFactory: ({ reference }) => {\n\t\t\treference.commit = new Command({\n\t\t\t\tcanExecute: () => false\n\t\t\t});\n\n\t\t\tconst model = this.qgrid.model();\n\t\t\tmodel\n\t\t\t\t.data({\n\t\t\t\t\trows: this.convert(this.rows[0].notEditable),\n\t\t\t\t\tcolumns: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'value',\n\t\t\t\t\t\t\ttitle: 'Not Editable'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t\t.selection({\n\t\t\t\t\trowKey: x => x.value,\n\t\t\t\t})\n\t\t\t\t.visibility({\n\t\t\t\t\ttoolbar: {\n\t\t\t\t\t\ttop: true,\n\t\t\t\t\t\tbottom: false,\n\t\t\t\t\t\tright: false,\n\t\t\t\t\t\tleft: false\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\treturn model;\n\t\t}\n\t};\n\n\teditableOptions: EditorOptions = {\n\t\tmodelFactory: ({ row, column, reference }) => {\n\t\t\t// We need to override commit because of `this.convert`,\n\t\t\t// We need to pass ['Lorem', 'ipsum'] but not [{value: 'Lorem'}, {value: 'ipsum'}]\n\t\t\treference.commit = new Command({\n\t\t\t\texecute: e => {\n\t\t\t\t\trow[column.key] = e.items;\n\t\t\t\t\t// To prevent default cell commit return false.\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treference.value = this.convert(row[column.key]);\n\n\t\t\tconst model = this.qgrid.model();\n\t\t\tmodel\n\t\t\t\t.data({\n\t\t\t\t\trows: this.convert(this.rows[0].notEditable),\n\t\t\t\t\tcolumns: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'value',\n\t\t\t\t\t\t\ttitle: 'Editable'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t\t.selection({\n\t\t\t\t\tunit: 'row',\n\t\t\t\t\tmode: 'multiple',\n\t\t\t\t\trowKey: x => x.value,\n\t\t\t\t});\n\n\t\t\treturn model;\n\t\t}\n\t};\n\n\tsingleValueOptions: EditorOptions = {\n\t\tmodelFactory: ({ row, column, reference }) => {\n\t\t\t// We need to override commit because of `this.convert`,\n\t\t\t// We need to pass ['Lorem', 'ipsum'] but not [{value: 'Lorem'}, {value: 'ipsum'}]\n\t\t\treference.commit = new Command({\n\t\t\t\texecute: e => {\n\t\t\t\t\trow[column.key] = e.items[0];\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treference.value = { value: row[column.key] };\n\n\t\t\tconst model = this.qgrid.model();\n\t\t\tmodel\n\t\t\t\t.data({\n\t\t\t\t\trows: this.convert(this.rows[0].notEditable),\n\t\t\t\t\tcolumns: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'value',\n\t\t\t\t\t\t\ttitle: 'Editable'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t\t.selection({\n\t\t\t\t\tunit: 'row',\n\t\t\t\t\tmode: 'single',\n\t\t\t\t\trowKey: x => x.value,\n\t\t\t\t});\n\n\t\t\treturn model;\n\t\t}\n\t};\n\n\tcomplexValuesOptions: EditorOptions = {\n\t\tmodelFactory: () => {\n\t\t\tconst model = this.qgrid.model();\n\n\t\t\tmodel\n\t\t\t\t.data({\n\t\t\t\t\trows: this.convert(this.rows[0].notEditable),\n\t\t\t\t\tcolumns: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'value',\n\t\t\t\t\t\t\ttitle: 'Editable'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t\t.selection({\n\t\t\t\t\tunit: 'row',\n\t\t\t\t\tmode: 'multiple',\n\t\t\t\t\trowKey: x => x.value,\n\t\t\t\t});\n\n\t\t\treturn model;\n\t\t}\n\t};\n\n\tcomplexValuesLabel = row => row.complexValues.map(x => x.value).join(', ');\n\tconvert = rows => rows.map(value => ({ value }));\n\n\tconstructor(private qgrid: Grid) { }\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows\"\n\t\teditMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column type=\"reference\"\n\t\t\t\t\t   key=\"notEditable\"\n\t\t\t\t\t   title=\"Not Editable\"\n\t\t\t\t\t   [editorOptions]=\"notEditableOptions\"\n\t\t\t\t\t   label=\"Click to show\">\n\t\t</q-grid-column>\n\t\t<q-grid-column type=\"reference\"\n\t\t\t\t\t   key=\"editable\"\n\t\t\t\t\t   title=\"Editable\"\n\t\t\t\t\t   [editorOptions]=\"editableOptions\">\n\t\t</q-grid-column>\n\t\t<q-grid-column type=\"reference\"\n\t\t\t\t\t   key=\"singleValue\"\n\t\t\t\t\t   title=\"Single Value\"\n\t\t\t\t\t   [editorOptions]=\"singleValueOptions\">\n\t\t</q-grid-column>\n\t\t<q-grid-column type=\"reference\"\n\t\t\t\t\t   key=\"customTemplate\"\n\t\t\t\t\t   title=\"Custom Template\"\n\t\t\t\t\t   [editorOptions]=\"editableOptions\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t\t\t\t let-$cell\n\t\t\t\t\t\t let-$view=\"$view\">\n\t\t\t\t<button style=\"width: 100%;text-overflow: ellipsis;overflow: hidden;\"\n\t\t\t\t\t\tmat-button\n\t\t\t\t\t\t[q-grid-command]=\"$view.edit.cell.enter\"\n\t\t\t\t\t\t[q-grid-command-arg]=\"[$cell, 'custom']\">\n\t\t\t\t\t{{$cell.value.join(', ') || 'EMPTY'}}\n\t\t\t\t</button>\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t\t<q-grid-column type=\"reference\"\n\t\t\t\t\t   key=\"complexValues\"\n\t\t\t\t\t   title=\"Complex Values\"\n\t\t\t\t\t   [label]=\"complexValuesLabel\"\n\t\t\t\t\t   [editorOptions]=\"complexValuesOptions\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows\"\n\t\teditMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"default\"\n\t\t\t\t\t   title=\"Default Template\"\n\t\t\t\t\t   [width]=\"150\"\n\t\t\t\t\t   type=\"row-indicator\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"customTemplate\"\n\t\t\t\t\t   title=\"Custom Template\"\n\t\t\t\t\t   [width]=\"150\"\n\t\t\t\t\t   type=\"row-number\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t\t\t\t let-$cell>\n\t\t\t\t<strong>&rarr;</strong>\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'column-row-indicator-basic',\n\t'Table contains row indicators'\n];\n\n@Component({\n\tselector: 'example-column-row-indicator-basic',\n\ttemplateUrl: 'example-column-row-indicator-basic.component.html',\n\tstyleUrls: ['example-column-row-indicator-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnRowIndicatorBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{},\n\t\t{},\n\t\t{},\n\t\t{}\n\t];\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows\"\n\t\teditMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"number\"\n\t\t\t\t\t   type=\"row-number\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"customTemplate\"\n\t\t\t\t\t   title=\"Custom Template\"\n\t\t\t\t\t   [width]=\"150\"\n\t\t\t\t\t   type=\"row-number\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t\t\t\t let-$cell>\n\t\t\t\t<strong>{{$cell.rowIndex + 1}}</strong>\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'column-row-number-basic',\n\t'Each row has its number'\n];\n\n@Component({\n\tselector: 'example-column-row-number-basic',\n\ttemplateUrl: 'example-column-row-number-basic.component.html',\n\tstyleUrls: ['example-column-row-number-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnRowNumberBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{},\n\t\t{},\n\t\t{},\n\t\t{}\n\t];\n}\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { Action, Command } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'column-row-options-basic',\n\t'Each row has a button with some options'\n];\n\n@Component({\n\tselector: 'example-column-row-options-basic',\n\ttemplateUrl: 'example-column-row-options-basic.component.html',\n\tstyleUrls: ['example-column-row-options-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnRowOptionsBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\trowActions = [\n\t\tnew Action(\n\t\t\tnew Command<{ row: Atom }>({\n\t\t\t\texecute: cell => window.open(cell.row.source, '_blank'),\n\t\t\t\tshortcut: 'alt+g'\n\t\t\t}),\n\t\t\t'Goto Wiki',\n\t\t\t'link'\n\t\t),\n\t\tnew Action(\n\t\t\tnew Command(),\n\t\t\t'---'\n\t\t),\n\t\tnew Action(\n\t\t\tnew Command({\n\t\t\t\texecute: () => alert('hello world'),\n\t\t\t\tshortcut: 'alt+h'\n\t\t\t}),\n\t\t\t'Hello World'\n\t\t)\n\t];\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column key=\"source\"\n\t\t               [isVisible]=\"false\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"rowOptions\"\n\t\t               type=\"row-options\"\n\t\t               [editorOptions]=\"{actions: rowActions}\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows\"\n\t\teditMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"textArea\"\n\t\t\t\t\t   title=\"Text Area\"\n\t\t\t\t\t   editor=\"text-area\"\n\t\t\t\t\t   [viewWidth]=\"300\"\n\t\t\t\t\t   type=\"text\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"number\"\n\t\t\t\t\t   title=\"Number\"\n\t\t\t\t\t   type=\"text\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"bool\"\n\t\t\t\t\t   title=\"Bool\"\n\t\t\t\t\t   type=\"text\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"date\"\n\t\t\t\t\t   title=\"Date\"\n\t\t\t\t\t   type=\"text\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"null\"\n\t\t\t\t\t   title=\"Null\"\n\t\t\t\t\t   type=\"text\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"undefined\"\n\t\t\t\t\t   title=\"Undefined\"\n\t\t\t\t\t   type=\"text\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"empty\"\n\t\t\t\t\t   title=\"Empty\"\n\t\t\t\t\t   type=\"text\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"maxLength2\"\n\t\t\t\t\t   title=\"Max Length 2\"\n\t\t\t\t\t   [maxLength]=\"2\"\n\t\t\t\t\t   type=\"text\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"customTemplate\"\n\t\t\t\t\t   title=\"Custom Template\"\n\t\t\t\t\t   type=\"text\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t\t\t\t let-$cell>\n\t\t\t\t<strong>{{$cell.value}}</strong>\n\t\t\t</ng-template>\n\t\t\t<ng-template for=\"edit\"\n\t\t\t\t\t\t let-$cell\n\t\t\t\t\t\t let-$view=\"$view\">\n\t\t\t\t<input style=\"width: 100%\"\n\t\t\t\t\t   q-grid-focus\n\t\t\t\t\t   [(ngModel)]=\"$view.edit.cell.value\"\n\t\t\t\t\t   (blur)=\"$view.edit.cell.exit.execute($cell)\" />\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'column-text-basic',\n\t'Cell value is in text format'\n];\n\n@Component({\n\tselector: 'example-column-text-basic',\n\ttemplateUrl: 'example-column-text-basic.component.html',\n\tstyleUrls: ['example-column-text-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnTextBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\t'number': 100.12,\n\t\t\t'bool': true,\n\t\t\t'date': new Date(2018, 9, 12),\n\t\t\t'null': null,\n\t\t\t'undefined': undefined,\n\t\t\t'empty': '',\n\t\t\t'maxLength2': 'PI',\n\t\t\t'customTemplate': 'Hello World',\n\t\t\t'textArea': `Lorem ipsum dolor sit amet,\n\t\t\tne facete legendos incorrupte duo, sea quot sapientem te,\n\t\t\tlaudem repudiandae sit ne. Ut utinam ullamcorper quo.\n\t\t\tOdio quidam adolescens vim an, et quidam dolores pro.\n\t\t\tSemper malorum volumus mei id, utamur placerat volutpat ea pri,\n\t\t\tno ludus prompta lobortis mel. Quo in duis ferri, at atqui\n\t\t\tmandamus moderatius nec, eam inermis legendos at.\n\t\t\tPro id habemus adipiscing, tibique prodesset ex mei.`\n\t\t}\n\t];\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows\"\n\t\teditMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"number\"\n\t\t\t\t\t   title=\"Number\"\n\t\t\t\t\t   type=\"time\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"bool\"\n\t\t\t\t\t   title=\"Bool\"\n\t\t\t\t\t   type=\"time\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"date\"\n\t\t\t\t\t   title=\"Date\"\n\t\t\t\t\t   type=\"time\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"null\"\n\t\t\t\t\t   title=\"Null\"\n\t\t\t\t\t   type=\"time\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"undefined\"\n\t\t\t\t\t   title=\"Undefined\"\n\t\t\t\t\t   type=\"time\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"empty\"\n\t\t\t\t\t   title=\"Empty\"\n\t\t\t\t\t   type=\"time\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"format\"\n\t\t\t\t\t   title=\"Format\"\n\t\t\t\t\t   format=\"mediumTime\"\n\t\t\t\t\t   type=\"time\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"text\"\n\t\t\t\t\t   title=\"Text\"\n\t\t\t\t\t   type=\"time\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"customTemplate\"\n\t\t\t\t\t   title=\"Custom Template\"\n\t\t\t\t\t   [width]=\"200\"\n\t\t\t\t\t   format=\"fullTime\"\n\t\t\t\t\t   type=\"time\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t\t\t\t let-$cell>\n\t\t\t\t<em>{{$cell.label}}</em>\n\t\t\t</ng-template>\n\t\t\t<ng-template for=\"edit\"\n\t\t\t\t\t\t let-$cell\n\t\t\t\t\t\t let-$view=\"$view\">\n\t\t\t\t<input type=\"time\"\n\t\t\t\t\t   style=\"width: 100%\"\n\t\t\t\t\t   *q-grid-time=\"let qGridTime\"\n\t\t\t\t\t   q-grid-focus\n\t\t\t\t\t   #input\n\t\t\t\t\t   [value]=\"$view.edit.cell.value | qGridDate: 'HH:mm'\"\n\t\t\t\t\t   (change)=\"$view.edit.cell.value = qGridTime.time($view.edit.cell.value, input.value)\"\n\t\t\t\t\t   (blur)=\"$view.edit.cell.exit.execute($cell)\" />\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'column-time-basic',\n\t'Cell value is in time format and can be entered using corresponding time input'\n];\n\n@Component({\n\tselector: 'example-column-time-basic',\n\ttemplateUrl: 'example-column-time-basic.component.html',\n\tstyleUrls: ['example-column-time-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnTimeBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\t'number': 12000000,\n\t\t\t'bool': true,\n\t\t\t'date': new Date(2018, 9, 12, 12, 12, 12, 12),\n\t\t\t'null': null,\n\t\t\t'undefined': undefined,\n\t\t\t'empty': '',\n\t\t\t'text': '12:30',\n\t\t\t'maxLength2': 'PI',\n\t\t\t'format': new Date(2018, 9, 12, 12, 12, 12, 12),\n\t\t\t'customTemplate': new Date(2018, 9, 12, 12, 12, 12, 12)\n\t\t}\n\t];\n}\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'column-tooltip-basic',\n\t'Tooltip is shown when pointing on the first column\\'s header'\n];\n\n@Component({\n\tselector: 'example-column-tooltip-basic',\n\ttemplateUrl: 'example-column-tooltip-basic.component.html',\n\tstyleUrls: ['example-column-tooltip-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnTooltipBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column key=\"name.first\"\n\t\t\t\t\t   description=\"First Name\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'column-type-safe',\n\t'Grid is stable despite of wrong cell data type'\n];\n\n@Component({\n\tselector: 'example-column-type-safe',\n\ttemplateUrl: 'example-column-type-safe.component.html',\n\tstyleUrls: ['example-column-type-safe.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnTypeSafeComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\tnotNumber: '1',\n\t\t\tnotCurrency: '10',\n\t\t\tnotDate: '1983-09-18',\n\t\t\tnotBoolean: 'true',\n\t\t\tnotEmail: 'john@mail.com',\n\t\t\tnotTime: '12:00',\n\t\t\tnotImage: 'https://upload.wikimedia.org/wikipedia/commons/e/e4/Hydrogen_Spectra.jpg',\n\t\t\tnotArray: ['1', '2', '3']\n\t\t},\n\t\t{\n\t\t\tnotNumber: 'some text',\n\t\t\tnotCurrency: 'some text',\n\t\t\tnotDate: 'some text',\n\t\t\tnotBoolean: 'some text',\n\t\t\tnotEmail: 'some text',\n\t\t\tnotTime: 'some text',\n\t\t\tnotImage: 'some text',\n\t\t\tnotArray: 'some text'\n\t\t}\n\t];\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"notNumber\"\n\t\t\t\t\t   type=\"number\"\n\t\t\t\t\t   title=\"notNumber\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"notBoolean\"\n\t\t\t\t\t   type=\"boolean\"\n\t\t\t\t\t   title=\"notBoolean\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"notImage\"\n\t\t\t\t\t   type=\"image\"\n\t\t\t\t\t   title=\"notImage\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"notArray\"\n\t\t\t\t\t   type=\"array\"\n\t\t\t\t\t   title=\"notArray\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"notEmail\"\n\t\t\t\t\t   type=\"email\"\n\t\t\t\t\t   title=\"notEmail\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"notCurrency\"\n\t\t\t\t\t   type=\"currency\"\n\t\t\t\t\t   title=\"notCurrency\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"notTime\"\n\t\t\t\t\t   type=\"time\"\n\t\t\t\t\t   title=\"notTime\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","<q-grid [caption]=\"title\"\n        [rows]=\"rows\"\n        editMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"invalid\"\n\t\t               title=\"Invalid\"\n\t\t               type=\"url\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"valid\"\n\t\t               title=\"Valid\"\n\t\t               type=\"url\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"withLabel\"\n\t\t\t\t\t   title=\"With Label\"\n\t\t\t\t\t   [label]=\"myLabel\"\n\t\t               type=\"email\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"customTemplate\"\n\t\t               title=\"Custom Template\"\n\t\t               [editorOptions]=\"{trigger: 'click'}\"\n\t\t               type=\"url\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t             let-$cell>\n\t\t\t\t<em>{{$cell.value}}</em>\n\t\t\t</ng-template>\n\t\t\t<ng-template for=\"edit\"\n\t\t\t             let-$cell\n\t\t\t             let-$view=\"$view\">\n\t\t\t\t<input style=\"width: 100%\"\n\t\t\t\t       type=\"url\"\n\t\t\t\t       q-grid-focus\n\t\t\t\t       [(ngModel)]=\"$view.edit.cell.value\"\n\t\t\t\t       (blur)=\"$view.edit.cell.exit.execute($cell)\" />\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'column-url-basic',\n\t'Cell value is an url'\n];\n\n@Component({\n\tselector: 'example-column-url-basic',\n\ttemplateUrl: 'example-column-url-basic.component.html',\n\tstyleUrls: ['example-column-url-basic.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnUrlBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\t'valid': 'http://github.com/qgrid/ng2',\n\t\t\t'invalid': 'Lorem ipsum dolor',\n\t\t\t'withLabel': 'http://github.com/qgrid/ng2',\n\t\t\t'null': null,\n\t\t\t'undefined': undefined,\n\t\t\t'empty': '',\n\t\t\t'customTemplate': 'http://github.com/qgrid/ng2'\n\t\t}\n\t];\n\n\tprivate label = 'QGRID';\n\n\tmyLabel: (row: any, value?: any) => string | undefined;\n\n\tconstructor() {\n\t\tconst self = this;\n\t\tthis.myLabel = (...args) => {\n\t\t\tconst [_, value] = args;\n\t\t\tif (args.length > 1) {\n\t\t\t\tself.label = value;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn self.label;\n\t\t};\n\t}\n}\n","import { DataService, Human } from '../data.service';\nimport { Component, ChangeDetectionStrategy, ViewChild } from '@angular/core';\nimport { Grid, GridModel } from 'ng2-qgrid';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'column-visibility-basic',\n\t'Columns can be hidden/shown using UI buttons'\n];\n\n@Component({\n\tselector: 'example-column-visibility-basic',\n\ttemplateUrl: 'example-column-visibility-basic.component.html',\n\tstyleUrls: ['example-column-visibility-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleColumnColumnVisibilityBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows$: Observable<Human[]> = this.dataService.getPeople();\n\tgridModel: GridModel;\n\n\tshowLastName = true;\n\tshowFirstName = true;\n\n\tconstructor(private dataService: DataService,\n\t\tprivate qgrid: Grid\n\t) {\n\t\tthis.gridModel = qgrid.model();\n\t}\n\n\thideCity() {\n\t\tconst columns = this.gridModel.data().columns.filter(x => x.key !== 'city');\n\n\t\tthis.gridModel.columnList({ columns });\n\t\tthis.gridModel.data({ columns });\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows$ | async\"\n\t\t[model]=\"gridModel\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"firstName\"\n\t\t\t\t\t   path=\"name.first\"\n\t\t\t\t\t   title=\"First Name\"\n\t\t\t\t\t   [index]=\"0\"\n\t\t\t\t\t   *ngIf=\"showFirstName\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"lastName\"\n\t\t\t\t\t   path=\"name.last\"\n\t\t\t\t\t   title=\"Last Name\"\n\t\t\t\t\t   [index]=\"1\"\n\t\t\t\t\t   [isVisible]=\"showLastName\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"city\"\n\t\t\t\t\t   path=\"contact.address.city\"\n\t\t\t\t\t   [index]=\"2\"\n\t\t\t\t\t   title=\"City\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-toolbar>\n\t\t<ng-template for=\"top\">\n\t\t\t<button mat-button\n\t\t\t\t\t(click)=\"showFirstName = !showFirstName\">\n\t\t\t\tShow/Hide First Name / using *ngIf\n\t\t\t</button>\n\t\t\t<button mat-button\n\t\t\t\t\t(click)=\"showLastName = !showLastName\">\n\t\t\t\tShow/Hide Last Name / using [isVisible]\n\t\t\t</button>\n\t\t\t<button mat-button\n\t\t\t\t\t(click)=\"hideCity()\">\n\t\t\t\tOnly hide city / using model\n\t\t\t</button>\n\t\t</ng-template>\n\t</q-grid-toolbar>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'copy-value-from-cell',\n\t'Value from cell can be copied by ctrl+c'\n];\n\n@Component({\n\tselector: 'example-copy-value-from-cell',\n\ttemplateUrl: './example-copy-value-from-cell.component.html',\n\tstyleUrls: ['./example-copy-value-from-cell.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleCopyValueFromCellComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\t'dollar': 0,\n\t\t\t'euro': 200,\n\t\t}\n\t];\n}\n","<input\n\tclass=\"mat-input-element\"\n\tplaceholder=\"Paste here\"\n\ttype=\"text\">\n\n<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"dollar\"\n\t\t               title=\"Dollar\"\n\t\t               type=\"currency\">\n\t\t</q-grid-column>\n\n\t\t<q-grid-column key=\"euro\"\n\t\t               title=\"Euro\"\n\t\t               code=\"EUR\"\n\t\t               type=\"currency\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { GridModel } from 'ng2-qgrid';\nimport { Observable } from 'rxjs';\nimport { map, switchMap, tap } from 'rxjs/operators';\nimport { Atom, DataService } from '../data.service';\n\nconst EXAMPLE_TAGS = [\n  'data-provider-basic',\n  'Data provider demonstration. All actions are performed on server side'\n];\n\n@Component({\n  selector: 'example-data-provider',\n  templateUrl: 'example-data-provider.component.html',\n  providers: [DataService],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDataProviderComponent {\n  static tags = EXAMPLE_TAGS;\n  title = EXAMPLE_TAGS[1];\n\n  page$: Observable<Atom[]>;\n\n  constructor(\n\t\tprivate dataService: DataService,\n\t) { }\n\n  onRequestRows(gridModel: GridModel): void {\n\t\tconst server = new FakeServer(this.dataService);\n\t\tconst pager = gridModel.pagination();\n\n\t\tthis.page$ = server.getTotal()\n\t\t\t.pipe(\n\t\t\t\ttap(total => gridModel.pagination({ count: total })),\n\t\t\t\tswitchMap(() => server.getPage(pager.current, pager.size)),\n\t\t\t);\n\t}\n}\n\nclass FakeServer {\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t) { }\n\n\tgetPage(pageNumber: number, pageSize: number): Observable<Atom[]> {\n\t\treturn this.dataService.getAtoms()\n\t\t\t.pipe(map(atoms => atoms.splice(pageNumber * pageSize, pageSize)));\n\t}\n\n\tgetTotal(): Observable<number> {\n\t\treturn this.dataService.getAtoms()\n\t\t\t.pipe(map(atoms => atoms.length));\n\t}\n}","<q-grid [caption]=\"title\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-data-provider [rows]=\"page$ | async\"\n                   (requestRows)=\"onRequestRows($event)\">\n\t</q-grid-data-provider>\n</q-grid>\n","import { Component, ChangeDetectionStrategy, ViewChild, AfterViewInit } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { GridComponent, Command, Grid } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'data-row-add',\n\t'New row can be added using UI button \"add row\"'\n];\n\n@Component({\n\tselector: 'example-data-row-add',\n\ttemplateUrl: 'example-data-row-add.component.html',\n\tstyleUrls: ['example-data-row-add.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDataRowAddComponent implements AfterViewInit {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\t@ViewChild(GridComponent, { static: true }) grid: GridComponent;\n\trows: Observable<Human[]>;\n\n\taddRow = new Command({\n\t\texecute: () => {\n\t\t\tconst { model } = this.grid;\n\n\t\t\tconst human: Human = {\n\t\t\t\tid: -1,\n\t\t\t\tcontact: { email: [] },\n\t\t\t\tpassword: '',\n\t\t\t\tcomment: '',\n\t\t\t\tlikes: [],\n\t\t\t\tgender: 'male',\n\t\t\t\tbirthday: '',\n\t\t\t\tmemberSince: '',\n\t\t\t\tname: {\n\t\t\t\t\tfirst: '',\n\t\t\t\t\tlast: '',\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst rows = Array.from(model.data().rows).concat([human]);\n\t\t\tmodel.data({ rows });\n\n\t\t\t// focus last row, second column\n\t\t\tconst service = this.qgrid.service(model);\n\t\t\tservice.focus(rows.length - 1);\n\t\t}\n\t});\n\n\tconstructor(dataService: DataService, private qgrid: Grid) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n\n\tngAfterViewInit() {\n\t\tconst { model } = this.grid;\n\t\tmodel.edit({\n\t\t\tmode: 'cell'\n\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-actions>\n\t\t<q-grid-action title=\"Add Row\"\n\t\t\t\t\t   icon=\"add\"\n\t\t\t\t\t   [command]=\"addRow\">\n\t\t</q-grid-action>\n\t</q-grid-actions>\n</q-grid>","import { ChangeDetectionStrategy, Component, ViewChild } from '@angular/core';\nimport { Command, Grid, GridComponent } from 'ng2-qgrid';\nimport { Observable } from 'rxjs';\nimport { DataService, Human } from '../data.service';\n\nconst EXAMPLE_TAGS = [\n\t'data-row-delete-selection',\n\t'Table rows can be deleted and not break selection'\n];\n\n@Component({\n\tselector: 'example-data-row-delete-selection',\n\ttemplateUrl: 'example-data-row-delete-selection.component.html',\n\tstyleUrls: ['example-data-row-delete-selection.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDataRowDeleteSelectionComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\t@ViewChild(GridComponent, { static: true }) grid: GridComponent;\n\trows: Observable<Human[]>;\n\tdeleteRow = new Command({\n\t\texecute: (row: Human) => {\n\t\t\tconst { model } = this.grid;\n\n\t\t\tconst rows = model.data().rows.filter(x => x !== row);\n\t\t\tmodel.data({ rows });\n\t\t}\n\t});\n\n\tconstructor(dataService: DataService, private qgrid: Grid) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        selectionMode=\"multiple\"\n        selectionUnit=\"row\">\n  <q-grid-columns generation=\"deep\">\n    <q-grid-column type=\"row-options\"\n                   key=\"rowOptions\"\n                   [width]=\"150\"\n                   [canEdit]=\"false\">\n      <ng-template for=\"body\"\n                   let-$cell>\n        <button mat-button\n                (click)=\"deleteRow.execute($cell.row)\">\n          DELETE ROW\n        </button>\n      </ng-template>\n    </q-grid-column>\n  </q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy, ViewChild } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { GridComponent, Command, Grid } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'data-row-delete',\n\t'Table rows can be deleted using corresponding UI button \"DELETE ROW\"'\n];\n\n@Component({\n\tselector: 'example-data-row-delete',\n\ttemplateUrl: 'example-data-row-delete.component.html',\n\tstyleUrls: ['example-data-row-delete.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDataRowDeleteComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\t@ViewChild(GridComponent, { static: true }) grid: GridComponent;\n\trows: Observable<Human[]>;\n\n\tdeleteRow = new Command({\n\t\texecute: (row: Human) => {\n\t\t\tconst { model } = this.grid;\n\n\t\t\tconst rows = model.data().rows.filter(x => x !== row);\n\t\t\tmodel.data({ rows });\n\t\t}\n\t});\n\n\tconstructor(dataService: DataService, private qgrid: Grid) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column type=\"row-options\"\n\t\t\t\t\t   key=\"rowOptions\"\n\t\t\t\t\t   pin=\"left\"\n\t\t\t\t\t   width=\"150\"\n\t\t\t\t\t   [canEdit]=\"false\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t\t\t\t let-$cell>\n\t\t\t\t<button mat-button\n\t\t\t\t\t\t(click)=\"deleteRow.execute($cell.row)\">\n\t\t\t\t\tDELETE ROW\n\t\t\t\t</button>\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, of, combineLatest } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nexport class Human {\n\tid: number;\n\tcontact: { email: string[] };\n\tpassword: string;\n\tcomment: string;\n\tlikes: string[];\n\tgender: 'male' | 'female';\n\tbirthday: string;\n\tmemberSince: string;\n\tname: {\n\t\tfirst: string,\n\t\tlast: string\n\t};\n}\n\nexport class Atom {\n\tname: string;\n\tappearance: string;\n\tmass: number;\n\tboil: number;\n\tcolor: string;\n\tdensity: number;\n\tdiscoveredBy: string;\n\tmelt: number;\n\tnamedBy: string;\n\tnumber: number;\n\tperiod: number;\n\tphase: string;\n\tsource: string;\n\tspectralImg: string;\n\tsummary: string;\n\tsymbol: string;\n\tshells: Array<number>;\n\tradius: number;\n\tdiscoveredIn: number;\n\tgroupBlock: string;\n\tbondingType: string;\n}\n\nexport class Quote {\n\tmetal: string;\n\tldn1: string;\n\tbid: number;\n\task: number;\n\tldn2: string;\n\tprevious: number;\n\tlast: number;\n\tldn3: string;\n\thigh: number;\n\tlow: number;\n\tvolume: number;\n\tsettle: number;\n\tldn4: string;\n}\n\n@Injectable()\nexport class DataService {\n\tconstructor(private http: HttpClient) { }\n\n\tgetPeople(count: string | number = 100): Observable<Human[]> {\n\t\treturn this.http.get<Human[]>(`assets/people/${count}.json`);\n\t}\n\n\tgetPresets(): Observable<any> {\n\t\treturn this.http.get('assets/presets/1.json');\n\t}\n\n\tgetAtoms(): Observable<Atom[]> {\n\t\treturn this.http.get<Atom[]>(`assets/atoms/118.json`);\n\t}\n\n\tgetQuotes(): Observable<Quote[]> {\n\t\treturn this.http.get<Quote[]>(`assets/quotes/9.json`);\n\t}\n\n\tgetAtomPresets(id, user): Observable<any> {\n\t\tconst commonPresets = this.http.get<any[]>('assets/presets/atoms.json');\n\t\tconst items = JSON.parse(localStorage.getItem(id));\n\t\tif (items && items.hasOwnProperty(user)) {\n\t\t\treturn combineLatest([\n\t\t\t\tcommonPresets,\n\t\t\t\tof(items[user] as any[])\n\t\t\t]).pipe(\n\t\t\t\tmap((...lists) => lists.reduce((memo, list) => memo.concat(list), []))\n\t\t\t);\n\t\t}\n\t\treturn commonPresets;\n\t}\n\n\tsetAtomPresets(id, user, items): Observable<any> {\n\t\tconst oldItems = JSON.parse(localStorage.getItem(id));\n\t\tconst newItems = {\n\t\t\t...oldItems,\n\t\t\t...{ [user]: items }\n\t\t};\n\t\tlocalStorage.setItem(id, JSON.stringify(newItems));\n\t\treturn of(newItems[user]);\n\t}\n\n\tgetUsers(): Observable<string[]> {\n\t\treturn of(['user1', 'user2']);\n\t}\n}\n","import { Component, OnInit, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService } from '../data.service';\nimport { GridModel, Grid } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'define-column-async',\n\t'Table content is loaded asynchronously'\n];\n\n@Component({\n\tselector: 'example-define-column-async',\n\ttemplateUrl: 'example-define-column-async.component.html',\n\tstyleUrls: ['example-define-column-async.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDefineColumnAsyncComponent implements OnInit {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\tgridModel: GridModel;\n\n\tconstructor(private dataService: DataService, qgrid: Grid) {\n\t\tthis.gridModel = qgrid.model();\n\t}\n\n\tngOnInit() {\n\t\tthis.dataService\n\t\t\t.getAtoms()\n\t\t\t.subscribe(rows => {\n\t\t\t\tthis.gridModel.data({ rows });\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.gridModel.data({\n\t\t\t\t\t\tcolumns: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkey: 'source',\n\t\t\t\t\t\t\t\twidth: 300\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkey: 'symbol+name',\n\t\t\t\t\t\t\t\tlabel: row => `[${row.symbol}]${row.name}`,\n\t\t\t\t\t\t\t\tvalue: row => row.symbol,\n\t\t\t\t\t\t\t\twidth: 150\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t}, 1000);\n\t\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [model]=\"gridModel\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"number\"\n\t\t               title=\"#\"\n\t\t               [width]=\"60\"\n\t\t               type=\"id\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"symbol+name\"\n\t\t               title=\"Symbol+Name\"\n\t\t               type=\"text\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"source\"\n\t\t               title=\"Wiki\"\n\t\t               type=\"url\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'define-column-basic',\n\t'Columns can be created in html'\n];\n\n@Component({\n\tselector: 'example-define-column-basic',\n\ttemplateUrl: 'example-define-column-basic.component.html',\n\tstyleUrls: ['example-define-column-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDefineColumnBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows$: Observable<Atom[]> = this.dataService.getAtoms();\n\n\tconstructor(private dataService: DataService) {\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows$ | async\"\n\t\tclass=\"define-column-basic\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"number\"\n\t\t               title=\"#\"\n\t\t               [width]=\"60\"\n\t\t               type=\"id\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"symbol\"\n\t\t               title=\"Symbol\"\n\t\t               [width]=\"80\"\n\t\t               type=\"text\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"name\"\n\t\t               title=\"Name\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"source\"\n\t\t               title=\"Wiki\"\n\t\t               class=\"example-source\"\n\t\t               type=\"url\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { Column } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'define-column-hybrid',\n\t'Columns can be created both in html and typescript'\n];\n\n@Component({\n\tselector: 'example-define-column-hybrid',\n\ttemplateUrl: 'example-define-column-hybrid.component.html',\n\tstyleUrls: ['example-define-column-hybrid.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDefineColumnHybridComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tcolumns: Column[] = [{\n\t\tkey: 'mass',\n\t\ttitle: 'should be js Mass',\n\t\tcanFilter: false,\n\t\tcanSort: false,\n\t}, {\n\t\tkey: 'symbol',\n\t\ttitle: 'should not be js Symbol',\n\t\twidth: 200,\n\t\tcanSort: false,\n\t\tcanFilter: false\n\t}];\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\"\n\t\t[columns]=\"columns\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"number\"\n\t\t               title=\"should be html №\"\n\t\t\t\t\t   [width]=\"90\"\n\t\t               type=\"id\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"symbol\"\n\t\t               title=\"should be html Symbol\"\n\t\t               type=\"text\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"name\"\n\t\t               title=\"should be html Name\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"source\"\n\t\t               title=\"should be html Wiki\"\n\t\t\t\t\t   [width]=\"300\"\n\t\t\t\t\t   [isDefault]=\"false\"\n\t\t               type=\"url\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { Column } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'define-column-type',\n\t'Column type can be defined in typescript'\n];\n\n@Component({\n\tselector: 'example-define-column-type',\n\ttemplateUrl: 'example-define-column-type.component.html',\n\tstyleUrls: ['example-define-column-type.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDefineColumnTypeComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\tcolumns: Column[] = [{\n\t\tkey: 'number',\n\t\ttype: 'number'\n\t}, {\n\t\tkey: 'symbol',\n\t\ttype: 'number'\n\t}];\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\"\n\t\t[columns]=\"columns\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"number\"\n\t\t\t\t\t   title=\"should be a number\"\n\t\t\t\t\t   [width]=\"90\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"symbol\"\n\t\t\t\t\t   title=\"should be a text\"\n\t\t\t\t\t   type=\"text\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'destroy-grid-basic',\n\t'Table content can be destroyed/restored using UI button'\n];\n\n@Component({\n\tselector: 'example-destroy-grid-basic',\n\ttemplateUrl: 'example-destroy-grid-basic.component.html',\n\tstyleUrls: ['example-destroy-grid-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDestroyGridBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Human[]>;\n\tisVisible = true;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<button mat-button\n        (click)=\"isVisible = !isVisible\">\n\t{{ isVisible? 'Hide' : 'Show' }}\n</button>\n<ng-container *ngIf=\"isVisible\">\n\t<q-grid [caption]=\"title\"\n\t        [rows]=\"rows | async\">\n\t\t<q-grid-columns generation=\"deep\">\n\t\t</q-grid-columns>\n\t</q-grid>\n</ng-container>\n","import { Component, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { DataService } from '../data.service';\nimport { GridModel, Grid } from 'ng2-qgrid';\nimport { BehaviorSubject } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'destroy-grid-model',\n\t'Table content can be destroyed/restored using UI button'\n];\n\n@Component({\n\tselector: 'example-destroy-grid-model',\n\ttemplateUrl: 'example-destroy-grid-model.component.html',\n\tstyleUrls: ['example-destroy-grid-model.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDestroyGridModelComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\tgridModel: GridModel;\n\tisVisible = false;\n\n\thandlerCount$ = new BehaviorSubject<number>(0);\n\n\tconstructor(\n\t\tprivate cd: ChangeDetectorRef,\n\t\tdataService: DataService,\n\t\tqgrid: Grid,\n\t) {\n\t\tthis.gridModel = qgrid.model();\n\n\t\tdataService\n\t\t\t.getPeople()\n\t\t\t.subscribe(rows => this.gridModel.data({ rows }));\n\t}\n\n\tgetHandlerCount(): number {\n\t\tconst model = this.gridModel as { [key: string]: any };\n\t\tlet count = 0;\n\t\tfor (const key in model) {\n\t\t\tif (model.hasOwnProperty(key) && key.endsWith('Changed')) {\n\t\t\t\tconst event = model[key];\n\n\t\t\t\t// `handlers` is private really\n\t\t\t\tconst { length } = event.handlers;\n\t\t\t\tif (length) {\n\t\t\t\t\tcount += length;\n\t\t\t\t\tif (!this.isVisible) {\n\t\t\t\t\t\tconsole.warn(`${key} has some unsubscribed subscriptions`);\n\t\t\t\t\t\tconsole.warn(event.handlers);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn count;\n\t}\n\n\ttoggleVisibility() {\n\t\tthis.isVisible = !this.isVisible;\n\n\t\tsetTimeout(() => {\n\t\t\tthis.handlerCount$.next(this.getHandlerCount());\n\t\t}, 500);\n\t}\n}\n","<button mat-button\n        (click)=\"toggleVisibility()\">\n\t{{ isVisible? 'Hide' : 'Show' }} [handler counter: {{handlerCount$ | async}}]\n</button>\n<ng-container *ngIf=\"isVisible\">\n\t<q-grid [caption]=\"title\"\n\t        [model]=\"gridModel\"\n\t        id=\"example-destroy-grid-model\"\n\t        editMode=\"cell\"\n\t        selectionUnit=\"row\"\n\t        selectionMode=\"multiple\">\n\t\t<q-grid-columns generation=\"deep\">\n\t\t\t<q-grid-column type=\"row-indicator\"\n\t\t\t               key=\"rowIndicator\">\n\t\t\t</q-grid-column>\n\t\t\t<q-grid-column type=\"row-options\"\n\t\t\t               key=\"rowOptions\">\n\t\t\t</q-grid-column>\n\t\t</q-grid-columns>\n\n\t\t<q-grid-data-manipulation>\n\t\t</q-grid-data-manipulation>\n\n\t\t<q-grid-persistence>\n\t\t</q-grid-persistence>\n\n\t\t<q-grid-query-builder>\n\t\t</q-grid-query-builder>\n\n\t\t<q-grid-export></q-grid-export>\n\t\t<q-grid-import></q-grid-import>\n\n\t\t<q-grid-row [canResize]=\"true\"\n\t\t            [canMove]=\"true\">\n\t\t</q-grid-row>\n\t</q-grid>\n</ng-container>\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'details-row-all',\n\t'Every row has expanded details section'\n];\n\n@Component({\n\tselector: 'example-details-row-all',\n\ttemplateUrl: 'example-details-row-all.component.html',\n\tstyleUrls: ['example-details-row-all.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDetailsRowAllComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column key=\"number\"\n\t\t\t\t\t   type=\"id\"\n\t\t\t\t\t   title=\"#\"\n\t\t\t\t\t   [width]=\"70\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"symbol\"\n\t\t\t\t\t   title=\"Symbol\"\n\t\t\t\t\t   [width]=\"90\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"name\"\n\t\t\t\t\t   title=\"Name\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"source\"\n\t\t\t\t\t   title=\"Source\"\n\t\t\t\t\t   type=\"url\"\n\t\t\t\t\t   [width]=\"300\">\n\t\t</q-grid-column>\n\t\t<q-grid-column *ngFor=\"let key of ['color', 'appearance', 'groupBlock', 'bondingType', 'period', 'radius', 'boil', 'shells', 'melt']\"\n\t\t\t\t\t   [key]=key\n\t\t\t\t\t   [isVisible]=\"false\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-row unit=\"details\"\n\t\t\t\tmode=\"all\">\n\t\t<ng-template for=\"details\"\n\t\t\t\t\t let-$cell>\n\t\t\t<div class=\"atom-details\">\n\t\t\t\t<div class=\"atom-box\"\n\t\t\t\t\t [style.background-color]=\"'#' + $cell.row.item.color\">\n\t\t\t\t\t<div class=\"atom-number\">\n\t\t\t\t\t\t{{$cell.row.item.number}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-symbol\">\n\t\t\t\t\t\t{{$cell.row.item.symbol}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-name\">\n\t\t\t\t\t\t{{$cell.row.item.name}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-mass\">\n\t\t\t\t\t\t{{$cell.row.item.mass}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"atom-info\">\n\t\t\t\t\t<p class=\"atom-description\">\n\t\t\t\t\t\t<a href={{$cell.row.item.source}}\n\t\t\t\t\t\t   target=\"_blank\">{{$cell.row.item.name}}</a>\n\t\t\t\t\t\twas discovered by\n\t\t\t\t\t\t<a href=\"http://www.google.com/search?q={{$cell.row.item.discoveredBy}}\"\n\t\t\t\t\t\t   target=\"_blank\">{{$cell.row.item.discoveredBy}}</a>\n\t\t\t\t\t\tin\n\t\t\t\t\t\t<em>{{$cell.row.item.discoveredIn}}</em>. {{$cell.row.item.summary}}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ng-template>\n\n\t</q-grid-row>\n</q-grid>","import { Component, ChangeDetectionStrategy, AfterViewInit, ViewChild } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { Command, GridComponent, RowDetailsStatus } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'details-row-api',\n\t'Details section of every row can be expanded/collapsed using UI buttons in toolbar and chevron buttons'\n];\n\n@Component({\n\tselector: 'example-details-row-api',\n\ttemplateUrl: 'example-details-row-api.component.html',\n\tstyleUrls: ['example-details-row-api.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDetailsRowApiComponent implements AfterViewInit {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\t@ViewChild(GridComponent, { static: true }) grid: GridComponent;\n\n\trows$: Observable<Atom[]>;\n\tcanExpand = true;\n\n\texpandAllCommand = new Command({\n\t\texecute: () => {\n\t\t\tconst { model } = this.grid;\n\t\t\tconst { rows } = model.data();\n\t\t\tmodel.row({\n\t\t\t\tstatus: new Map(rows.map<[Atom, RowDetailsStatus]>(x => [x, new RowDetailsStatus(true)]))\n\t\t\t});\n\t\t}\n\t});\n\n\tcollapseAllCommand = new Command({\n\t\texecute: () => {\n\t\t\tconst { model } = this.grid;\n\t\t\tconst { rows } = model.data();\n\t\t\tmodel.row({\n\t\t\t\tstatus: new Map(rows.map<[Atom, RowDetailsStatus]>(x => [x, new RowDetailsStatus(false)]))\n\t\t\t});\n\t\t}\n\t});\n\n\texpandSecondCommand = new Command({\n\t\texecute: () => {\n\t\t\tthis.collapseAllCommand.execute();\n\t\t\tconst { model } = this.grid;\n\t\t\tconst theSecondRow = model.data().rows[1];\n\n\t\t\tmodel.row({\n\t\t\t\tstatus: new Map([[theSecondRow, new RowDetailsStatus(true)]])\n\t\t\t});\n\t\t}\n\t});\n\n\ttoggle = new Command({\n\t\tcanExecute: () => this.canExpand\n\t});\n\n\tdisableExpand = new Command({\n\t\texecute: () => {\n\t\t\tthis.canExpand = false;\n\t\t\tthis.toggle.canExecuteCheck.next();\n\t\t}\n\t});\n\n\tenableExpand = new Command({\n\t\texecute: () => {\n\t\t\tthis.canExpand = true;\n\t\t\tthis.toggle.canExecuteCheck.next();\n\t\t}\n\t});\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows$ = dataService.getAtoms();\n\t}\n\n\tngAfterViewInit() {\n\t\tconst { model } = this.grid;\n\t\tmodel.row({\n\t\t\ttoggle: this.toggle\n\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows$ | async\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column key=\"number\"\n\t\t\t\t\t   type=\"id\"\n\t\t\t\t\t   title=\"#\"\n\t\t\t\t\t   [width]=\"70\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"symbol\"\n\t\t\t\t\t   title=\"Symbol\"\n\t\t\t\t\t   [width]=\"90\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"name\"\n\t\t\t\t\t   title=\"Name\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"source\"\n\t\t\t\t\t   title=\"Source\"\n\t\t\t\t\t   type=\"url\"\n\t\t\t\t\t   [width]=\"300\">\n\t\t</q-grid-column>\n\t\t<q-grid-column *ngFor=\"let key of ['color', 'appearance', 'groupBlock', 'bondingType', 'period', 'radius', 'boil', 'shells', 'melt']\"\n\t\t\t\t\t   [key]=key\n\t\t\t\t\t   [isVisible]=\"false\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-row unit=\"details\"\n\t\t\t\tmode=\"single\">\n\t\t<ng-template for=\"details\"\n\t\t\t\t\t let-$cell>\n\t\t\t<div class=\"atom-details\">\n\t\t\t\t<div class=\"atom-box\"\n\t\t\t\t\t [style.background-color]=\"'#' + $cell.row.item.color\">\n\t\t\t\t\t<div class=\"atom-number\">\n\t\t\t\t\t\t{{$cell.row.item.number}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-symbol\">\n\t\t\t\t\t\t{{$cell.row.item.symbol}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-name\">\n\t\t\t\t\t\t{{$cell.row.item.name}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-mass\">\n\t\t\t\t\t\t{{$cell.row.item.mass}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"atom-info\">\n\t\t\t\t\t<p class=\"atom-description\">\n\t\t\t\t\t\t<a href={{$cell.row.item.source}}\n\t\t\t\t\t\t   target=\"_blank\">{{$cell.row.item.name}}</a>\n\t\t\t\t\t\twas discovered by\n\t\t\t\t\t\t<a href=\"http://www.google.com/search?q={{$cell.row.item.discoveredBy}}\"\n\t\t\t\t\t\t   target=\"_blank\">{{$cell.row.item.discoveredBy}}</a>\n\t\t\t\t\t\tin\n\t\t\t\t\t\t<em>{{$cell.row.item.discoveredIn}}</em>. {{$cell.row.item.summary}}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ng-template>\n\t</q-grid-row>\n\n\t<q-grid-actions>\n\t\t<q-grid-action title=\"Expand All\"\n\t\t\t\t\t   [command]=\"expandAllCommand\">\n\t\t</q-grid-action>\n\t\t<q-grid-action title=\"Collapse All\"\n\t\t\t\t\t   [command]=\"collapseAllCommand\">\n\t\t</q-grid-action>\n\t\t<q-grid-action title=\"Expand Second\"\n\t\t\t\t\t   [command]=\"expandSecondCommand\">\n\t\t</q-grid-action>\n\t\t<q-grid-action title=\"Disable Expand\"\n\t\t\t\t\t   [command]=\"disableExpand\">\n\t\t</q-grid-action>\n\t\t<q-grid-action title=\"Allow Expand\"\n\t\t\t\t\t   [command]=\"enableExpand\">\n\t\t</q-grid-action>\n\t</q-grid-actions>\n\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'details-row-basic',\n\t'Details section of every row can be expanded/collapsed using chevron buttons on corresponding row'\n];\n\n@Component({\n\tselector: 'example-details-row-basic',\n\ttemplateUrl: 'example-details-row-basic.component.html',\n\tstyleUrls: ['example-details-row-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDetailsRowBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column key=\"number\"\n\t\t\t\t\t   type=\"id\"\n\t\t\t\t\t   title=\"#\"\n\t\t\t\t\t   [width]=\"70\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"symbol\"\n\t\t\t\t\t   title=\"Symbol\"\n\t\t\t\t\t   [width]=\"90\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"name\"\n\t\t\t\t\t   title=\"Name\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"source\"\n\t\t\t\t\t   title=\"Source\"\n\t\t\t\t\t   type=\"url\"\n\t\t\t\t\t   [width]=\"300\">\n\t\t</q-grid-column>\n\t\t<q-grid-column *ngFor=\"let key of ['color', 'appearance', 'groupBlock', 'bondingType', 'period', 'radius', 'boil', 'shells', 'melt']\"\n\t\t\t\t\t   [key]=\"key\"\n\t\t\t\t\t   [isVisible]=\"false\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-row unit=\"details\"\n\t\t\t\tmode=\"single\"\n\t\t\t\t[behavior]=\"['expandOnDblClick']\">\n\t\t<ng-template for=\"details\"\n\t\t\t\t\t let-$cell>\n\t\t\t<div class=\"atom-details\">\n\t\t\t\t<div class=\"atom-box\"\n\t\t\t\t\t [style.background-color]=\"'#' + $cell.row.item.color\">\n\t\t\t\t\t<div class=\"atom-number\">\n\t\t\t\t\t\t{{$cell.row.item.number}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-symbol\">\n\t\t\t\t\t\t{{$cell.row.item.symbol}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-name\">\n\t\t\t\t\t\t{{$cell.row.item.name}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-mass\">\n\t\t\t\t\t\t{{$cell.row.item.mass}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"atom-info\">\n\t\t\t\t\t<p class=\"atom-description\">\n\t\t\t\t\t\t<a href={{$cell.row.item.source}}\n\t\t\t\t\t\t   target=\"_blank\">{{$cell.row.item.name}}</a>\n\t\t\t\t\t\twas discovered by\n\t\t\t\t\t\t<a href=\"http://www.google.com/search?q={{$cell.row.item.discoveredBy}}\"\n\t\t\t\t\t\t   target=\"_blank\">{{$cell.row.item.discoveredBy}}</a>\n\t\t\t\t\t\tin\n\t\t\t\t\t\t<em>{{$cell.row.item.discoveredIn}}</em>. {{$cell.row.item.summary}}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ng-template>\n\n\t</q-grid-row>\n</q-grid>","import { Component, ChangeDetectionStrategy, ViewChild, AfterViewInit } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { GridComponent, RowDetailsStatus, Command, RowDetails, Grid } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'details-row-custom',\n\t'Details section of every row can be expanded/collapsed by clicking on any cell of corresponding row'\n];\n\n@Component({\n\tselector: 'example-details-row-custom',\n\ttemplateUrl: 'example-details-row-custom.component.html',\n\tstyleUrls: ['example-details-row-custom.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ExampleDetailsRowCustomComponent implements AfterViewInit {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\t@ViewChild(GridComponent, { static: true }) grid: GridComponent;\n\trows$: Observable<Atom[]>;\n\n\ttoggleExpand = new Command({\n\t\texecute: (row) => {\n\t\t\tconst { model } = this.grid;\n\t\t\tif (row) {\n\t\t\t\tconst { status } = model.row();\n\t\t\t\tif (!status.has(row)) {\n\t\t\t\t\tmodel.row({\n\t\t\t\t\t\tstatus: new Map([[row, new RowDetailsStatus(true)]])\n\t\t\t\t\t});\n\n\t\t\t\t\tmodel.sceneChanged.on((e, off) => {\n\t\t\t\t\t\tif (e.hasChanges('status') && e.state.status === 'stop') {\n\t\t\t\t\t\t\tconst gridService = this.qgrid.service(model);\n\t\t\t\t\t\t\tgridService.focus(model.view().rows.indexOf(row) + 1, 1);\n\t\t\t\t\t\t\toff();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tmodel.row({\n\t\t\t\tstatus: new Map()\n\t\t\t});\n\t\t},\n\t\tcanExecute: row => {\n\t\t\treturn !(row instanceof RowDetails);\n\t\t}\n\t});\n\n\tconstructor(\n\t\tdataService: DataService,\n\t\tprivate qgrid: Grid\n\t) {\n\t\tthis.rows$ = dataService.getAtoms();\n\t}\n\n\tngAfterViewInit() {\n\t\tconst { model } = this.grid;\n\n\t\tmodel.pagination({\n\t\t\tsize: 10\n\t\t});\n\n\t\tmodel.style({\n\t\t\trow: (row, context) => {\n\t\t\t\tconst ROW_DETAILS_HEIGHT = 140;\n\t\t\t\tif (row instanceof RowDetails) {\n\t\t\t\t\tcontext.class('row-details-height', {\n\t\t\t\t\t\t'height': `${ROW_DETAILS_HEIGHT}px`,\n\t\t\t\t\t\t'max-height': `${ROW_DETAILS_HEIGHT}px`,\n\t\t\t\t\t\t'min-height': `${ROW_DETAILS_HEIGHT}px`\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tmodel.keyboardChanged.on(e => {\n\t\t\tconst { codes, status } = e.state;\n\t\t\tif (status === 'down') {\n\t\t\t\tswitch (codes[0]) {\n\t\t\t\t\tcase 'enter':\n\t\t\t\t\tcase 'space': {\n\t\t\t\t\t\tconst { cell } = model.navigation();\n\t\t\t\t\t\tconst row = cell && cell.row;\n\t\t\t\t\t\tif (this.toggleExpand.canExecute(row)) {\n\t\t\t\t\t\t\tthis.toggleExpand.execute(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'alt': {\n\t\t\t\t\t\tconst rowNo = Number.parseInt(codes[1], 10);\n\t\t\t\t\t\tif (!Number.isNaN(rowNo)) {\n\t\t\t\t\t\t\tconst { rows } = model.view();\n\t\t\t\t\t\t\tconst { current, size } = model.pagination();\n\t\t\t\t\t\t\tconst altRow = rows[rowNo + current * size];\n\t\t\t\t\t\t\tif (altRow) {\n\t\t\t\t\t\t\t\tif (this.toggleExpand.canExecute(altRow)) {\n\t\t\t\t\t\t\t\t\tthis.toggleExpand.execute(altRow);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tmodel.mouseChanged.on(e => {\n\t\t\tconst { code, status, target } = e.state;\n\t\t\tif (code === 'left' && status === 'up') {\n\t\t\t\tif (target && target.column.key !== 'name') {\n\t\t\t\t\tif (this.toggleExpand.canExecute(target.row)) {\n\t\t\t\t\t\tthis.toggleExpand.execute(target.row);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows$ | async\">\n\t<q-grid-columns>\n\t\t<q-grid-column type=\"row-expand\"\n\t\t\t\t\t   [isVisible]=\"false\">\n\t\t</q-grid-column>\n\t\t<q-grid-column type=\"row-number\"\n\t\t\t\t\t   key=\"rowNumber\"\n\t\t\t\t\t   title=\"ALT\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t\t\t\t let-$cell>\n\t\t\t\t{{$cell.dataRowIndex % 10}}\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"name\"\n\t\t\t\t\t   title=\"Name\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t\t\t\t let-$cell>\n\t\t\t\t<button mat-button\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t(click)=\"toggleExpand.execute($cell.row)\">\n\t\t\t\t\t{{$cell.label}}\n\t\t\t\t</button>\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"groupBlock\"\n\t\t\t\t\t   title=\"Group\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"phase\"\n\t\t\t\t\t   title=\"Phase\"\n\t\t\t\t\t   [width]=\"80\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"appearance\"\n\t\t\t\t\t   title=\"Appearance\"\n\t\t\t\t\t   [viewWidth]=\"300\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"melt\"\n\t\t\t\t\t   title=\"Melt(℃)\"\n\t\t\t\t\t   type=\"number\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"boil\"\n\t\t\t\t\t   title=\"Boil(℃)\"\n\t\t\t\t\t   type=\"number\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"shells\"\n\t\t\t\t\t   title=\"Shells\"\n\t\t\t\t\t   type=\"array\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-row unit=\"details\"\n\t\t\t\tmode=\"single\">\n\t\t<ng-template for=\"details\"\n\t\t\t\t\t let-$cell>\n\t\t\t<div class=\"atom-details\">\n\t\t\t\t<div class=\"atom-box\"\n\t\t\t\t\t [style.background-color]=\"'#' + $cell.row.item.color\">\n\t\t\t\t\t<div class=\"atom-number\">\n\t\t\t\t\t\t{{$cell.row.item.number}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-symbol\">\n\t\t\t\t\t\t{{$cell.row.item.symbol}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-name\">\n\t\t\t\t\t\t{{$cell.row.item.name}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-mass\">\n\t\t\t\t\t\t{{$cell.row.item.mass}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"atom-info\">\n\t\t\t\t\t<p class=\"atom-description\">\n\t\t\t\t\t\t<a href={{$cell.row.item.source}}\n\t\t\t\t\t\t   target=\"_blank\">{{$cell.row.item.name}}\n\t\t\t\t\t\t</a> was discovered by\n\t\t\t\t\t\t<a href=\"http://www.google.com/search?q={{$cell.row.item.discoveredBy}}\"\n\t\t\t\t\t\t   target=\"_blank\">\n\t\t\t\t\t\t\t{{$cell.row.item.discoveredBy}}\n\t\t\t\t\t\t</a> in\n\t\t\t\t\t\t<em>{{$cell.row.item.discoveredIn}}</em>. {{$cell.row.item.summary}}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ng-template>\n\t</q-grid-row>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nconst EXAMPLE_TAGS = [\n\t'details-row-grid',\n\t'Details section of every row is a grid'\n];\n\n@Component({\n\tselector: 'example-details-row-grid',\n\ttemplateUrl: 'example-details-row-grid.component.html',\n\tstyleUrls: ['example-details-row-grid.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDetailsRowGridComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\tmap = new Map<string, Observable<Atom[]>>();\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n\n\tgetTheSamePhaseRows(atom: Atom) {\n\t\tlet subject = this.map.get(atom.phase);\n\t\tif (!subject) {\n\t\t\tsubject = this.rows.pipe(map(rows => rows.filter(row => row.phase === atom.phase).slice(0, 3)));\n\t\t\tthis.map.set(atom.phase, subject);\n\t\t}\n\n\t\treturn subject;\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-row unit=\"details\"\n\t\t\t\tmode=\"multiple\">\n\t\t<ng-template for=\"details\"\n\t\t\t\t\t let-$cell>\n\t\t\t<q-grid caption=\"First 3 `{{$cell.row.item.phase}}` atoms\"\n\t\t\t\t\t[rows]=\"getTheSamePhaseRows($cell.row.item) | async\"\n\t\t\t\t\tclass=\"q-grid-compact\">\n\t\t\t\t<q-grid-columns>\n\t\t\t\t\t<q-grid-column [canSort]=\"false\"\n\t\t\t\t\t\t\t\t   [canFilter]=\"false\">\n\t\t\t\t\t</q-grid-column>\n\t\t\t\t\t<q-grid-column key=\"number\"\n\t\t\t\t\t\t\t\t   title=\"Number\">\n\t\t\t\t\t</q-grid-column>\n\t\t\t\t\t<q-grid-column key=\"symbol\"\n\t\t\t\t\t\t\t\t   title=\"Symbol\">\n\t\t\t\t\t</q-grid-column>\n\t\t\t\t\t<q-grid-column key=\"name\"\n\t\t\t\t\t\t\t\t   title=\"Name\">\n\t\t\t\t\t</q-grid-column>\n\t\t\t\t</q-grid-columns>\n\n\t\t\t\t<q-grid-visibility [toolbarBottom]=\"false\">\n\t\t\t\t</q-grid-visibility>\n\t\t\t</q-grid>\n\t\t</ng-template>\n\t</q-grid-row>\n</q-grid>","import { Component, ChangeDetectionStrategy, ViewEncapsulation } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'details-row-pin',\n\t'Details section of every row is pinned in the middle of the row'\n];\n\n@Component({\n\tselector: 'example-details-row-pin',\n\ttemplateUrl: 'example-details-row-pin.component.html',\n\tstyleUrls: ['example-details-row-pin.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class ExampleDetailsRowPinComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid id=\"details-row-pin\"\n\t\t[caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"name\"\n\t\t\t\t\t   title=\"Name\"\n\t\t\t\t\t   pin=\"left\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"groupBlock\"\n\t\t\t\t\t   title=\"Group\"\n\t\t\t\t\t   pin=\"left\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"phase\"\n\t\t\t\t\t   title=\"Phase\"\n\t\t\t\t\t   [width]=\"80\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"appearance\"\n\t\t\t\t\t   title=\"Appearance\"\n\t\t\t\t\t   [viewWidth]=\"300\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"melt\"\n\t\t\t\t\t   title=\"Melt(℃)\"\n\t\t\t\t\t   type=\"number\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"boil\"\n\t\t\t\t\t   title=\"Boil(℃)\"\n\t\t\t\t\t   type=\"number\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"shells\"\n\t\t\t\t\t   title=\"Shells\"\n\t\t\t\t\t   type=\"array\"\n\t\t\t\t\t   pin=\"right\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-row unit=\"details\"\n\t\t\t\tmode=\"single\">\n\t\t<ng-template for=\"details\"\n\t\t\t\t\t let-$cell>\n\t\t\t<div class=\"atom-details\">\n\t\t\t\t<div class=\"atom-box\"\n\t\t\t\t\t [style.background-color]=\"'#' + $cell.row.item.color\">\n\t\t\t\t\t<div class=\"atom-number\">\n\t\t\t\t\t\t{{$cell.row.item.number}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-symbol\">\n\t\t\t\t\t\t{{$cell.row.item.symbol}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-name\">\n\t\t\t\t\t\t{{$cell.row.item.name}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-mass\">\n\t\t\t\t\t\t{{$cell.row.item.mass}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"atom-info\">\n\t\t\t\t\t<p class=\"atom-description\">\n\t\t\t\t\t\t<a href={{$cell.row.item.source}}\n\t\t\t\t\t\t   target=\"_blank\">{{$cell.row.item.name}}\n\t\t\t\t\t\t</a> was discovered by\n\t\t\t\t\t\t<a href=\"http://www.google.com/search?q={{$cell.row.item.discoveredBy}}\"\n\t\t\t\t\t\t   target=\"_blank\">\n\t\t\t\t\t\t\t{{$cell.row.item.discoveredBy}}\n\t\t\t\t\t\t</a> in\n\t\t\t\t\t\t<em>{{$cell.row.item.discoveredIn}}</em>. {{$cell.row.item.summary}}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ng-template>\n\t</q-grid-row>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-details-row-select',\n\ttemplateUrl: 'example-details-row-select.component.html',\n\tstyleUrls: ['example-details-row-select.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDetailsRowSelectComponent {\n\tstatic id = 'details-row-select';\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid caption=\"Details Row Expand on Enter/Mouse Click\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"name\"\n\t\t\t\t\t   title=\"Name\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"groupBlock\"\n\t\t\t\t\t   title=\"Group\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"phase\"\n\t\t\t\t\t   title=\"Phase\"\n\t\t\t\t\t   [width]=\"80\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"appearance\"\n\t\t\t\t\t   title=\"Appearance\"\n\t\t\t\t\t   [viewWidth]=\"300\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"melt\"\n\t\t\t\t\t   title=\"Melt(℃)\"\n\t\t\t\t\t   type=\"number\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"boil\"\n\t\t\t\t\t   title=\"Boil(℃)\"\n\t\t\t\t\t   type=\"number\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"shells\"\n\t\t\t\t\t   title=\"Shells\"\n\t\t\t\t\t   type=\"array\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-row unit=\"details\"\n\t\t\t\tmode=\"single\"\n\t\t\t\t[behavior]=\"['expandOnClick', 'expandOnShortcut']\">\n\t\t<ng-template for=\"details\"\n\t\t\t\t\t let-$cell>\n\t\t\t<div class=\"atom-details\">\n\t\t\t\t<div class=\"atom-box\"\n\t\t\t\t\t [style.background-color]=\"'#' + $cell.row.item.color\">\n\t\t\t\t\t<div class=\"atom-number\">\n\t\t\t\t\t\t{{$cell.row.item.number}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-symbol\">\n\t\t\t\t\t\t{{$cell.row.item.symbol}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-name\">\n\t\t\t\t\t\t{{$cell.row.item.name}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-mass\">\n\t\t\t\t\t\t{{$cell.row.item.mass}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"atom-info\">\n\t\t\t\t\t<p class=\"atom-description\">\n\t\t\t\t\t\t<a href={{$cell.row.item.source}}\n\t\t\t\t\t\t   target=\"_blank\">{{$cell.row.item.name}}\n\t\t\t\t\t\t</a> was discovered by\n\t\t\t\t\t\t<a href=\"http://www.google.com/search?q={{$cell.row.item.discoveredBy}}\"\n\t\t\t\t\t\t   target=\"_blank\">\n\t\t\t\t\t\t\t{{$cell.row.item.discoveredBy}}\n\t\t\t\t\t\t</a> in\n\t\t\t\t\t\t<em>{{$cell.row.item.discoveredIn}}</em>. {{$cell.row.item.summary}}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ng-template>\n\t</q-grid-row>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'details-row-start',\n\t'Details section of every row is loaded on startup, but hidden'\n];\n\n@Component({\n\tselector: 'example-details-row-start',\n\ttemplateUrl: 'example-details-row-start.component.html',\n\tstyleUrls: ['example-details-row-start.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDetailsRowStartComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"name\"\n\t\t\t\t\t   title=\"Name\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"groupBlock\"\n\t\t\t\t\t   title=\"Group\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"phase\"\n\t\t\t\t\t   title=\"Phase\"\n\t\t\t\t\t   [width]=\"80\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"appearance\"\n\t\t\t\t\t   title=\"Appearance\"\n\t\t\t\t\t   [viewWidth]=\"300\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"melt\"\n\t\t\t\t\t   title=\"Melt(℃)\"\n\t\t\t\t\t   type=\"number\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"boil\"\n\t\t\t\t\t   title=\"Boil(℃)\"\n\t\t\t\t\t   type=\"number\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"shells\"\n\t\t\t\t\t   title=\"Shells\"\n\t\t\t\t\t   type=\"array\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-row unit=\"details\"\n\t\t\t\tmode=\"single\">\n\t\t<ng-template for=\"details\"\n\t\t\t\t\t let-$cell>\n\t\t\t<div class=\"atom-details\">\n\t\t\t\t<div class=\"atom-box\"\n\t\t\t\t\t [style.background-color]=\"'#' + $cell.row.item.color\">\n\t\t\t\t\t<div class=\"atom-number\">\n\t\t\t\t\t\t{{$cell.row.item.number}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-symbol\">\n\t\t\t\t\t\t{{$cell.row.item.symbol}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-name\">\n\t\t\t\t\t\t{{$cell.row.item.name}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-mass\">\n\t\t\t\t\t\t{{$cell.row.item.mass}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"atom-info\">\n\t\t\t\t\t<p class=\"atom-description\">\n\t\t\t\t\t\t<a href={{$cell.row.item.source}}\n\t\t\t\t\t\t   target=\"_blank\">{{$cell.row.item.name}}\n\t\t\t\t\t\t</a> was discovered by\n\t\t\t\t\t\t<a href=\"http://www.google.com/search?q={{$cell.row.item.discoveredBy}}\"\n\t\t\t\t\t\t   target=\"_blank\">\n\t\t\t\t\t\t\t{{$cell.row.item.discoveredBy}}\n\t\t\t\t\t\t</a> in\n\t\t\t\t\t\t<em>{{$cell.row.item.discoveredIn}}</em>. {{$cell.row.item.summary}}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ng-template>\n\t</q-grid-row>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'drag-column-basic',\n\t'Columns can be dragged'\n];\n\n@Component({\n\tselector: 'example-drag-column-basic',\n\ttemplateUrl: 'example-drag-column-basic.component.html',\n\tstyleUrls: ['example-drag-column-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDragColumnBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column type=\"number\"\n\t\t\t\t\t   [canMove]=\"false\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-live-columns>\n\t</q-grid-live-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'drag-row-basic',\n\t'Rows can be dragged'\n];\n\n@Component({\n\tselector: 'example-drag-row-basic',\n\ttemplateUrl: 'example-drag-row-basic.component.html',\n\tstyleUrls: ['example-drag-row-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDragRowBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-row [canMove]=\"true\">\n\t</q-grid-row>\n\n\t<q-grid-live-rows>\n\t</q-grid-live-rows>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'drag-row-node',\n\t'Rows and its nodes can be dragged'\n];\n\n@Component({\n\tselector: 'example-drag-row-node',\n\ttemplateUrl: 'example-drag-row-node.component.html',\n\tstyleUrls: ['example-drag-row-node.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDragRowNodeComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n\t[groupBy]=\"['bondingType', 'groupBlock']\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\t<q-grid-row [canMove]=\"true\"></q-grid-row>\n</q-grid>","<q-grid [caption]=\"title\"\n\t\t[model]=\"gridModel\">\n\t<q-grid-columns generation=\"cohort\"></q-grid-columns>\n\t<q-grid-toolbar>\n\t\t<ng-template for=\"top\">\n\t\t\t<button mat-button\n\t\t\t\t\t(click)=\"addGroup()\">\n\t\t\t\tAdd Group\n\t\t\t</button>\n\t\t\t<button mat-button\n\t\t\t\t\t(click)=\"addColumn('left')\">\n\t\t\t\tAdd Column To Left\n\t\t\t</button>\n\t\t\t<button mat-button\n\t\t\t\t\t(click)=\"addColumn('middle')\">\n\t\t\t\tAdd Column To Middle\n\t\t\t</button>\n\t\t\t<button mat-button\n\t\t\t\t\t(click)=\"addColumn('right')\">\n\t\t\t\tAdd Column To Right\n\t\t\t</button>\n\t\t\t<button mat-button\n\t\t\t\t\t(click)=\"reset()\">\n\t\t\t\tReset\n\t\t\t</button>\n\t\t</ng-template>\n\t</q-grid-toolbar>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { GridModel, Grid } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'dynamic-column-model',\n\t'Table can be created by adding columns and groups using UI buttons'\n];\n\n@Component({\n\tselector: 'example-dynamic-column-model',\n\ttemplateUrl: 'example-dynamic-column-model.component.html',\n\tstyleUrls: ['example-dynamic-column-model.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleDynamicColumnModelComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\tgridModel: GridModel;\n\n\tconstructor(private qgrid: Grid) {\n\t\tthis.gridModel = qgrid.model();\n\t\tthis.reset();\n\t}\n\n\taddColumn(side) {\n\t\tconst id = this.getRandomId();\n\t\tconst column = {\n\t\t\ttype: 'text',\n\t\t\tkey: id,\n\t\t\ttitle: `${side} - ${id}`\n\t\t};\n\n\t\tconst dataState = this.gridModel.data();\n\t\tconst columns = dataState.columns.slice();\n\t\tconst rows = dataState.rows.slice();\n\n\t\tif (side === 'left') {\n\t\t\tcolumns.unshift(column);\n\t\t} else if (side === 'right') {\n\t\t\tcolumns.push(column);\n\t\t} else {\n\t\t\tconst middlePos = columns.length % 2 === 0\n\t\t\t\t? columns.length / 2\n\t\t\t\t: Math.floor(columns.length / 2);\n\t\t\tcolumns.splice(middlePos, 0, column);\n\t\t}\n\t\trows.forEach(r => r[id] = `value - ${id}`);\n\t\tthis.gridModel.data({ columns, rows });\n\t}\n\n\taddGroup() {\n\t\tconst groupId = this.getRandomId();\n\t\tconst childColumns = [];\n\t\tfor (let i = 0; i < 3; i++) {\n\t\t\tchildColumns.push({\n\t\t\t\ttype: 'text',\n\t\t\t\tkey: `${groupId}Child${i}`,\n\t\t\t\tpath: `${groupId}.child${i}`,\n\t\t\t\ttitle: `child - ${groupId} - ${i}`,\n\t\t\t\tvalue: () => `value - ${i}`\n\t\t\t});\n\t\t}\n\t\tconst groupColumn = {\n\t\t\ttype: 'cohort',\n\t\t\tkey: groupId,\n\t\t\tchildren: childColumns,\n\t\t\ttitle: `group - ${groupId}`\n\t\t};\n\n\t\tconst dataState = this.gridModel.data();\n\t\tconst columns = dataState.columns.slice();\n\t\tcolumns.push(groupColumn);\n\t\tthis.gridModel.data({ columns });\n\t}\n\n\treset() {\n\t\tthis.gridModel.data({\n\t\t\tcolumns: [],\n\t\t\trows: new Array(100).fill({})\n\t\t});\n\t}\n\n\tprivate getRandomId() {\n\t\tlet id = '';\n\t\tconst possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n\n\t\tfor (let i = 0; i < 5; i++) {\n\t\t\tid += possible.charAt(Math.floor(Math.random() * possible.length));\n\t\t}\n\n\t\treturn id;\n\t}\n}\n","import { Component, ChangeDetectionStrategy, AfterViewInit, ViewChild } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { Grid, GridModel, Command } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'edit-cell-basic',\n\t'Cell values can be edited, \"Gender\" has a custom edit template'\n];\n\n@Component({\n\tselector: 'example-edit-cell-basic',\n\ttemplateUrl: 'example-edit-cell-basic.component.html',\n\tstyleUrls: ['example-edit-cell-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleEditCellBasicComponent implements AfterViewInit {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows$: Observable<Human[]> = this.dataService.getPeople();\n\tgridModel: GridModel;\n\n\tcommit = new Command({\n\t\texecute: e => console.log('commit: ' + e.newValue)\n\t});\n\n\tcancel = new Command({\n\t\texecute: () => console.log('cancel')\n\t});\n\n\tconstructor(private dataService: DataService,\n\t\tprivate qgrid: Grid\n\t) {\n\t\tthis.gridModel = qgrid.model();\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.gridModel.edit({\n\t\t\tcancel: this.cancel,\n\t\t\tcommit: this.commit\n\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows$ | async\"\n\t\t[model]=\"gridModel\"\n\t\teditMode=\"cell\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column key=\"gender\">\n\t\t\t<ng-template for=\"edit\"\n\t\t\t\t\t\t let-$cell\n\t\t\t\t\t\t let-$view=\"$view\">\n\t\t\t\t<q-grid-cell-editor class=\"q-grid-editor q-grid-position\"\n\t\t\t\t\t\t\t\t\tstyle=\"width: 270px; height: 80px;\"\n\t\t\t\t\t\t\t\t\tq-grid-position=\"td\"\n\t\t\t\t\t\t\t\t\t(close)=\"$view.edit.cell.cancel.execute($cell)\">\n\t\t\t\t\t<button mat-button\n\t\t\t\t\t\t\t(click)=\"$view.edit.cell.value = 'female';\"\n\t\t\t\t\t\t\t[disabled]=\"$view.edit.cell.value === 'female'\">\n\t\t\t\t\t\tFemale\n\t\t\t\t\t</button>\n\t\t\t\t\t<button mat-button\n\t\t\t\t\t\t\t(click)=\"$view.edit.cell.value = 'male';\"\n\t\t\t\t\t\t\t[disabled]=\"$view.edit.cell.value === 'male'\">\n\t\t\t\t\t\tMale\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<button mat-icon-button\n\t\t\t\t\t\t\t[q-grid-command]=\"$view.edit.cell.commit\"\n\t\t\t\t\t\t\t[q-grid-command-arg]=\"$cell\">\n\t\t\t\t\t\t<mat-icon>\n\t\t\t\t\t\t\tdone\n\t\t\t\t\t\t</mat-icon>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button mat-icon-button\n\t\t\t\t\t\t\t[q-grid-command]=\"$view.edit.cell.cancel\"\n\t\t\t\t\t\t\t[q-grid-command-arg]=\"$cell\">\n\t\t\t\t\t\t<mat-icon>\n\t\t\t\t\t\t\tclose\n\t\t\t\t\t\t</mat-icon>\n\t\t\t\t\t</button>\n\n\t\t\t\t</q-grid-cell-editor>\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'edit-cell-batch',\n\t'Cell data can be changed using drag and drop (bottom right corner of the cell)'\n];\n\n@Component({\n\tselector: 'example-edit-cell-batch',\n\ttemplateUrl: 'example-edit-cell-batch.component.html',\n\tstyleUrls: ['example-edit-cell-batch.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleEditCellBatchComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\"\n\t\teditMode=\"cell\"\n\t\teditMethod=\"batch\"\n\t\tq-grid-autofocus>\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, OnInit, ViewChild, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { Column, BoolColumn, Grid, PipeContext, GridComponent } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'edit-row-basic',\n\t'Entire row can be edited in separate menu'\n];\n\n@Component({\n\tselector: 'example-edit-row-basic',\n\ttemplateUrl: 'example-edit-row-basic.component.html',\n\tstyleUrls: ['example-edit-row-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleEditRowBasicComponent implements OnInit {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\t@ViewChild(GridComponent, { static: true }) myGrid: GridComponent;\n\n\trows$: Observable<Human[]> = this.dataService.getPeople();\n\tcolumns: Array<Column | BoolColumn>;\n\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t\tprivate qgrid: Grid\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst isUndef = x => x === undefined;\n\n\t\tthis.columns = [\n\t\t\t{\n\t\t\t\tkey: 'avatar',\n\t\t\t\ttitle: 'Avatar',\n\t\t\t\ttype: 'image',\n\t\t\t\twidth: 80,\n\t\t\t\tvalue: (item, value) => isUndef(value) ? item.avatar : item.avatar = value,\n\t\t\t\tlabelPath: 'avatarFileName'\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'name.last',\n\t\t\t\ttitle: 'Last Name',\n\t\t\t\ttype: 'text',\n\t\t\t\tpath: 'name.last'\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'name.first',\n\t\t\t\ttitle: 'First Name',\n\t\t\t\ttype: 'text',\n\t\t\t\tpath: 'name.first'\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'gender',\n\t\t\t\ttitle: 'Is Female',\n\t\t\t\ttype: 'bool',\n\t\t\t\ttrueValue: 'female',\n\t\t\t\tfalseValue: 'male'\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'birthday',\n\t\t\t\ttitle: 'Birthday',\n\t\t\t\ttype: 'date'\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'teammates',\n\t\t\t\ttitle: 'Teammates',\n\t\t\t\ttype: 'reference',\n\t\t\t\tvalue: (item, value) => isUndef(value) ? item.teammates || [] : item.teammates = value,\n\t\t\t\tlabel: (item) => {\n\t\t\t\t\treturn (item.teammates || [])\n\t\t\t\t\t\t.map(x => `${x.name.last} ${x.name.first}`)\n\t\t\t\t\t\t.join(', ');\n\t\t\t\t},\n\t\t\t\teditorOptions: {\n\t\t\t\t\tmodelFactory: () => {\n\t\t\t\t\t\tconst { rows } = this.qgrid.model().data();\n\t\t\t\t\t\tconst model = this.qgrid.model();\n\t\t\t\t\t\tmodel\n\t\t\t\t\t\t\t.selection({\n\t\t\t\t\t\t\t\tmode: 'multiple',\n\t\t\t\t\t\t\t\tunit: 'row',\n\t\t\t\t\t\t\t\trowKey: x => rows.findIndex(r => r.name.last === x.name.last && r.name.first === x.name.first)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.columnList({\n\t\t\t\t\t\t\t\tgeneration: 'deep'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.data({\n\t\t\t\t\t\t\t\tpipe: [\n\t\t\t\t\t\t\t\t\t(_: any[], context: PipeContext, next: (rows: any[]) => void) => {\n\t\t\t\t\t\t\t\t\t\tthis.dataService.getPeople(10).subscribe(people => next(people));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t].concat(this.qgrid.pipeUnit.default as any[])\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn model;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'comment',\n\t\t\t\ttitle: 'Comment',\n\t\t\t\ttype: 'text',\n\t\t\t\tvalue: (item, value) => isUndef(value) ? item.comment || '' : item.comment = value,\n\t\t\t\teditor: 'text-area'\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'password',\n\t\t\t\ttitle: 'Password',\n\t\t\t\ttype: 'password',\n\t\t\t\tvalue: (item, value) => isUndef(value) ? item.password || '' : item.password = value\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'contact.address.zip',\n\t\t\t\ttitle: 'Zip',\n\t\t\t\ttype: 'id',\n\t\t\t\tpath: 'contact.address.zip'\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'contact.address.state',\n\t\t\t\ttitle: 'State',\n\t\t\t\ttype: 'text',\n\t\t\t\tpath: 'contact.address.state'\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'contact.address.city',\n\t\t\t\ttitle: 'City',\n\t\t\t\ttype: 'text',\n\t\t\t\tpath: 'contact.address.city'\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'contact.phone',\n\t\t\t\ttitle: 'Contact Phones',\n\t\t\t\ttype: 'array',\n\t\t\t\tpath: 'contact.phone'\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'contact.email.primary',\n\t\t\t\ttitle: 'Primary Email',\n\t\t\t\ttype: 'email',\n\t\t\t\tlabel: (item, label) => isUndef(label) ? item.emailLabel || item.contact.email[0] : item.emailLabel = label,\n\t\t\t\tvalue: (item, value) => isUndef(value) ? item.contact.email[0] : item.contact.email[0] = value\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'likes',\n\t\t\t\ttitle: 'Likes',\n\t\t\t\ttype: 'array'\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'memberSince',\n\t\t\t\ttitle: 'Member Since',\n\t\t\t\ttype: 'date'\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'modifiedTime',\n\t\t\t\ttitle: 'Modified Time',\n\t\t\t\ttype: 'time',\n\t\t\t\tvalue: (item, value) => isUndef(value) ? item.modified || '' : item.modified = value\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'webPage',\n\t\t\t\ttitle: 'Web Page',\n\t\t\t\ttype: 'url',\n\t\t\t\tvalue: (item, value) => isUndef(value)\n\t\t\t\t\t? item.webPage || `https://corp.portal.com/${item.name.last}.${item.name.first}`\n\t\t\t\t\t: item.webPage = value,\n\t\t\t\tlabel: (item, label) => isUndef(label)\n\t\t\t\t\t? item.webPageLabel || `${item.name.last} ${item.name.first}`\n\t\t\t\t\t: item.webPageLabel = label\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'attachment',\n\t\t\t\ttitle: 'Attachment',\n\t\t\t\ttype: 'file',\n\t\t\t\tvalue: (item, value) => isUndef(value) ? item.attachment : item.attachment = value,\n\t\t\t\tlabel: (item, label) => isUndef(label) ? item.attachmentLabel || null : item.attachmentLabel = label\n\t\t\t}\n\t\t];\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows$ | async\"\n\t\t[columns]=\"columns\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"editForm\"\n\t\t\t\t\t   type=\"row-options\"\n\t\t\t\t\t   [canEdit]=\"false\"\n\t\t\t\t\t   pin=\"left\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t\t\t\t let-$cell>\n\t\t\t\t<q-grid-edit-form-trigger caption=\"{{$cell.row.name.last}}, {{$cell.row.name.first}}\"\n\t\t\t\t\t\t\t\t\t\t  [row]=\"$cell.row\">\n\t\t\t\t</q-grid-edit-form-trigger>\n\t\t\t</ng-template>\n\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ViewChild, ChangeDetectionStrategy, AfterViewInit } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { Command, GridComponent, PaneComponent } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'edit-row-custom',\n\t'Selected row can be edited using UI button \"Open pane\"'\n];\n\n@Component({\n\tselector: 'example-edit-row-custom',\n\ttemplateUrl: './example-edit-row-custom.component.html',\n\tstyleUrls: ['./example-edit-row-custom.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\n\nexport class ExampleEditRowCustomComponent implements AfterViewInit {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows$: Observable<Human[]>;\n\n\t@ViewChild(GridComponent, { static: true }) grid: GridComponent;\n\t@ViewChild(PaneComponent, { static: true }) pane: PaneComponent;\n\n\tselectedRow: Human;\n\n\topenPane = new Command({\n\t\texecute: () => this.pane.open('right'),\n\t\tcanExecute: () => !!this.selectedRow,\n\t});\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows$ = dataService.getPeople();\n\t}\n\n\tngAfterViewInit() {\n\t\tconst { model } = this.grid;\n\n\t\tmodel.selectionChanged.watch(e => {\n\t\t\tif (e.hasChanges('items')) {\n\t\t\t\tthis.selectedRow = e.state.items[0];\n\t\t\t\tthis.openPane.canExecuteCheck.next();\n\t\t\t}\n\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows$ | async\"\n        selectionMode=\"singleOnly\"\n        selectionUnit=\"row\">\n    <q-grid-columns generation=\"deep\">\n    </q-grid-columns>\n\n    <q-grid-actions>\n        <q-grid-action icon=\"edit\"\n                       title=\"Open Pane\"\n                       [command]=\"openPane\">\n        </q-grid-action>\n    </q-grid-actions>\n\n    <q-grid-pane>\n        <ng-template for=\"right\"\n                     let-$pane>\n            <button mat-icon-button\n                    style=\"float: right; z-index: 1;\"\n                    (click)=\"$pane.close('right')\">\n                <mat-icon>close</mat-icon>\n            </button>\n\n            <q-grid-edit-form [row]=\"selectedRow\"\n                              caption=\"{{selectedRow.name.last}}, {{selectedRow.name.first}}\"\n                              (cancel)=\"$pane.close('right')\"\n                              (submit)=\"$pane.close('right')\">\n            </q-grid-edit-form>\n        </ng-template>\n    </q-grid-pane>\n\n</q-grid>","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSelectModule } from '@angular/material/select';\nimport { Route, Routes } from '@angular/router';\nimport { ThemeModule } from '@qgrid/ngx-theme-material';\nimport { GridModule } from 'ng2-qgrid';\nimport { ExampleActionBarBasicComponent } from './action-bar-basic/example-action-bar-basic.component';\nimport { ExampleActionBarOnEnterComponent } from './action-bar-on-enter/example-action-bar-on-enter.component';\nimport { ExampleActionBarTemplateComponent } from './action-bar-template/example-action-bar-template.component';\nimport { ExampleAggregateColumnBasicComponent } from './aggregate-column-basic/example-aggregate-column-basic.component';\nimport { ExampleAltBasicComponent } from './alt-basic/example-alt-basic.component';\nimport { ExampleCellTooltipBasicComponent } from './cell-tooltip-basic/example-cell-tooltip-basic.component';\nimport { ExampleColumnArrayBasicComponent } from './column-array-basic/example-column-array-basic.component';\nimport { ExampleColumnAutocompleteBasicComponent } from './column-autocomplete-basic/example-column-autocomplete-basic.component';\nimport { ExampleColumnBoolBasicComponent } from './column-bool-basic/example-column-bool-basic.component';\nimport { ExampleColumnCurrencyBasicComponent } from './column-currency-basic/example-column-currency-basic.component';\nimport { ExampleColumnDataSafeComponent } from './column-data-safe/example-column-data-safe.component';\nimport { ExampleColumnDateBasicComponent } from './column-date-basic/example-column-date-basic.component';\nimport { ExampleColumnDateTimeBasicComponent } from './column-datetime-basic/example-column-datetime-basic.component';\nimport { ExampleColumnDropdownBasicComponent } from './column-dropdown-basic/example-column-dropdown-basic.component';\nimport { ExampleColumnEmailBasicComponent } from './column-email-basic/example-column-email-basic.component';\nimport { ExampleColumnFileBasicComponent } from './column-file-basic/example-column-file-basic.component';\nimport { ExampleColumnIdBasicComponent } from './column-id-basic/example-column-id-basic.component';\nimport { ExampleColumnImageBasicComponent } from './column-image-basic/example-column-image-basic.component';\nimport { ExampleColumnListBasicComponent } from './column-list-basic/example-column-list-basic.component';\nimport { ExampleColumnListLoopComponent } from './column-list-loop/example-column-list-loop.component';\nimport { ExampleColumnNumberBasicComponent } from './column-number-basic/example-column-number-basic.component';\nimport { ExampleColumnPasswordBasicComponent } from './column-password-basic/example-column-password-basic.component';\nimport { ExampleColumnReferenceBasicComponent } from './column-reference-basic/example-column-reference-basic.component';\nimport { ExampleColumnRowIndicatorBasicComponent } from './column-row-indicator-basic/example-column-row-indicator-basic.component';\nimport { ExampleColumnRowNumberBasicComponent } from './column-row-number-basic/example-column-row-number-basic.component';\nimport { ExampleColumnRowOptionsBasicComponent } from './column-row-options-basic/example-column-row-options-basic.component';\nimport { ExampleColumnTextBasicComponent } from './column-text-basic/example-column-text-basic.component';\nimport { ExampleColumnTimeBasicComponent } from './column-time-basic/example-column-time-basic.component';\nimport { ExampleColumnTooltipBasicComponent } from './column-tooltip-basic/example-column-tooltip-basic.component';\nimport { ExampleColumnTypeSafeComponent } from './column-type-safe/example-column-type-safe.component';\nimport { ExampleColumnUrlBasicComponent } from './column-url-basic/example-column-url-basic.component';\nimport { ExampleColumnColumnVisibilityBasicComponent } from './column-visibility-basic/example-column-visibility-basic.component';\nimport { ExampleCopyValueFromCellComponent } from './copy-value-from-cell/example-copy-value-from-cell.component';\nimport { ExampleDataProviderComponent } from './data-provider/example-data-provider.component';\nimport { ExampleDataRowAddComponent } from './data-row-add/example-data-row-add.component';\nimport { ExampleDataRowDeleteSelectionComponent } from './data-row-delete-selection/example-data-row-delete-selection.component';\nimport { ExampleDataRowDeleteComponent } from './data-row-delete/example-data-row-delete.component';\nimport { ExampleDefineColumnAsyncComponent } from './define-column-async/example-define-column-async.component';\nimport { ExampleDefineColumnBasicComponent } from './define-column-basic/example-define-column-basic.component';\nimport { ExampleDefineColumnHybridComponent } from './define-column-hybrid/example-define-column-hybrid.component';\nimport { ExampleDefineColumnTypeComponent } from './define-column-type/example-define-column-type.component';\nimport { ExampleDestroyGridBasicComponent } from './destroy-grid-basic/example-destroy-grid-basic.component';\nimport { ExampleDestroyGridModelComponent } from './destroy-grid-model/example-destroy-grid-model.component';\nimport { ExampleDetailsRowAllComponent } from './details-row-all/example-details-row-all.component';\nimport { ExampleDetailsRowApiComponent } from './details-row-api/example-details-row-api.component';\nimport { ExampleDetailsRowBasicComponent } from './details-row-basic/example-details-row-basic.component';\nimport { ExampleDetailsRowCustomComponent } from './details-row-custom/example-details-row-custom.component';\nimport { ExampleDetailsRowGridComponent } from './details-row-grid/example-details-row-grid.component';\nimport { ExampleDetailsRowPinComponent } from './details-row-pin/example-details-row-pin.component';\nimport { ExampleDetailsRowSelectComponent } from './details-row-select/example-details-row-select.component';\nimport { ExampleDetailsRowStartComponent } from './details-row-start/example-details-row-start.component';\nimport { ExampleDragColumnBasicComponent } from './drag-column-basic/example-drag-column-basic.component';\nimport { ExampleDragRowBasicComponent } from './drag-row-basic/example-drag-row-basic.component';\nimport { ExampleDragRowNodeComponent } from './drag-row-node/example-drag-row-node.component';\nimport { ExampleDynamicColumnModelComponent } from './dynamic-column-model/example-dynamic-column-model.component';\nimport { ExampleEditCellBasicComponent } from './edit-cell-basic/example-edit-cell-basic.component';\nimport { ExampleEditCellBatchComponent } from './edit-cell-batch/example-edit-cell-batch.component';\nimport { ExampleEditRowBasicComponent } from './edit-row-basic/example-edit-row-basic.component';\nimport { ExampleEditRowCustomComponent } from './edit-row-custom/example-edit-row-custom.component';\nimport { ExampleExportBasicComponent } from './export-basic/example-export-basic.component';\nimport { ExampleExportCsvComponent } from './export-csv/example-export-csv.component';\nimport { ExampleFilterColumnFetchComponent } from './filter-column-fetch/example-filter-column-fetch.component';\nimport { ExampleFilterConditionBasicComponent } from './filter-condition-basic/example-filter-condition-basic.component';\nimport { ExampleFilterRowAtomBasicComponent } from './filter-row-atom-basic/example-filter-row-atom-basic.component';\nimport { ExampleFilterRowCustomComponent } from './filter-row-custom/example-filter-row-custom.component';\nimport { ExampleFilterRowPeopleBasicComponent } from './filter-row-people-basic/example-filter-row-people-basic.component';\nimport { ExampleFloatingRowsBasicComponent } from './floating-rows-basic/example-floating-rows-basic.component';\nimport { ExampleFocusCellAutoComponent } from './focus-cell-auto/example-focus-cell-auto.component';\nimport { ExampleFocusCellBasicComponent } from './focus-cell-basic/example-focus-cell-basic.component';\nimport { ExampleFocusCellCustomComponent } from './focus-cell-custom/example-focus-cell-custom.component';\nimport { ExampleGenerateColumnCheckComponent } from './generate-column-check/example-generate-column-check.component';\nimport { ExampleGenerateColumnCohortComponent } from './generate-column-cohort/example-generate-column-cohort.component';\nimport { ExampleGenerateColumnDeepComponent } from './generate-column-deep/example-generate-column-deep.component';\nimport { ExampleGenerateColumnRawComponent } from './generate-column-raw/example-generate-column-raw.component';\nimport { ExampleGenerateColumnShallowComponent } from './generate-column-shallow/example-generate-column-shallow.component';\nimport { ExampleGridListBasicComponent } from './grid-list-basic/example-grid-list-basic.component';\nimport { ExampleGridSizeComponent } from './grid-size/example-grid-size.component';\nimport { ExampleGroupColumnBasicComponent } from './group-column-basic/example-group-column-basic.component';\nimport { ExampleGroupRowAggregationComponent } from './group-row-aggregation/example-group-row-aggregation.component';\nimport { ExampleGroupRowBasicComponent } from './group-row-basic/example-group-row-basic.component';\nimport { ExampleGroupRowEditComponent } from './group-row-edit/example-group-row-edit.component';\nimport { ExampleGroupRowFlatComponent } from './group-row-flat/example-group-row-flat.component';\nimport { ExampleGroupRowRowspanComponent } from './group-row-rowspan/example-group-row-rowspan.component';\nimport { ExampleGroupRowSubheadComponent } from './group-row-subhead/example-group-row-subhead.component';\nimport { ExampleGroupRowSummaryComponent } from './group-row-summary/example-group-row-summary.component';\nimport { ExampleHierarchyBrowserBasicComponent } from './hierarchy-browser-basic/example-hierarchy-browser-basic.component';\nimport { ExampleImportBasicComponent } from './import-basic/example-import-basic.component';\nimport { ExampleImportCsvComponent } from './import-csv/example-import-csv.component';\nimport { ExampleIndexColumnBasicComponent } from './index-column-basic/example-index-column-basic.component';\nimport { ExampleIndexColumnHybridComponent } from './index-column-hybrid/example-index-column-hybrid.component';\nimport { ExampleIndexColumnModelComponent } from './index-column-model/example-index-column-model.component';\nimport { ExampleInteractionModeDetachedComponent } from './interaction-mode-detached/example-interaction-mode-detached.component';\nimport { ExampleInteractionModeReadonlyComponent } from './interaction-mode-readonly/example-interaction-mode-readonly.component';\nimport { ExampleKeyWithSymbolsComponent } from './key-with-symbols/example-key-with-symbols.component';\nimport { ExampleLayerGridBlankComponent } from './layer-grid-blank/example-layer-grid-blank.component';\nimport { ExampleLegendGridBasicComponent } from './legend-grid-basic/example-legend-grid-basic.component';\nimport { ExampleLiveDataBasicComponent } from './live-data-basic/example-live-data-basic.component';\nimport { ExampleLiveRowsBasicComponent } from './live-rows-basic/example-live-rows-basic.component';\nimport { ExampleLookAtomsBasicComponent } from './look-atoms-basic/example-look-atoms-basic.component';\nimport { ExampleLookAtomsCustomizedComponent } from './look-atoms-customized/example-look-atoms-customized.component';\nimport { ExampleLookAtomsIdComponent } from './look-atoms-id/example-look-atoms-id.component';\nimport { ExampleLookAtomsModelComponent } from './look-atoms-model/example-look-atoms-model.component';\nimport { ExampleLookPeopleBasicComponent } from './look-people-basic/example-look-people-basic.component';\nimport { ExampleLookPeopleModelComponent } from './look-people-model/example-look-people-model.component';\nimport { ExampleLookQuotesBasicComponent } from './look-quotes-basic/example-look-quotes-basic.component';\nimport { ExampleLookQuotesModelComponent } from './look-quotes-model/example-look-quotes-model.component';\nimport { ExampleManipulateDataBasicComponent } from './manipulate-data-basic/example-manipulate-data-basic.component';\nimport { ExampleMasterDetailsBasicComponent } from './master-details-basic/example-master-details-basic.component';\nimport { ExampleMouseApiBasicComponent } from './mouse-api-basic/example-mouse-api-basic.component';\nimport { ExampleOnPushBasicComponent } from './on-push-basic/example-on-push-basic.component';\nimport { ExamplePaginationBasicComponent } from './pagination-basic/example-pagination-basic.component';\nimport { ExamplePaneBasicComponent } from './pane-basic/example-pane-basic.component';\nimport { ExamplePaneTriggerComponent } from './pane-trigger/example-pane-trigger.component';\nimport { ExamplePaneWithSelectionComponent } from './pane-with-selection-mode/example-pane-with-selection-mode.component';\nimport { ExamplePersistenceBasicComponent } from './persistence-basic/example-persistence-basic.component';\nimport { ExamplePersistenceOnStateChangeComponent } from './persistence-on-state-change/example-persistence-on-state-change.component';\nimport { ExamplePersistenceServerComponent } from './persistence-server/example-persistence-server.component';\nimport { ExamplePersistenceWithSyncGetDataComponent } from './persistence-with-sync-get-data/example-persistence-with-sync-get-data.component';\nimport { ExamplePinColumnBasicComponent } from './pin-column-basic/example-pin-column-basic.component';\nimport { ExamplePipeGridBasicComponent } from './pipe-grid-basic/example-pipe-grid-basic.component';\nimport { ExamplePivotColumnBasicComponent } from './pivot-column-basic/example-pivot-column-basic.component';\nimport { ExamplePivotColumnCohortComponent } from './pivot-column-cohort/example-pivot-column-cohort.component';\nimport { ExamplePivotColumnGroupComponent } from './pivot-column-group/example-pivot-column-group.component';\nimport { ExamplePivotColumnTemplateComponent } from './pivot-column-template/example-pivot-column-template.component';\nimport { ExamplePluginGridBasicComponent } from './plugin-grid-basic/example-plugin-grid-basic.component';\nimport { ExamplePluginMyPagerComponent } from './plugin-grid-basic/example-plugin-my-pager.component';\nimport { ExampleRestApiBasicComponent } from './rest-api-basic/example-rest-api-basic.component';\nimport { ExampleSampleOrdersComponent } from './sample-orders/example-sample-orders.component';\nimport { ExampleScrollVirtualBasicComponent } from './scroll-virtual-basic/example-scroll-virtual-basic.component';\nimport { ExampleScrollVirtualDetailsComponent } from './scroll-virtual-details/example-scroll-virtual-details.component';\nimport { ExampleScrollVirtualDragComponent } from './scroll-virtual-drag/example-scroll-virtual-drag.component';\nimport { ExampleScrollVirtualEditComponent } from './scroll-virtual-edit/example-scroll-virtual-edit.component';\nimport { ExampleScrollVirtualGroupComponent } from './scroll-virtual-group/example-scroll-virtual-group.component';\nimport { ExampleScrollVirtualHeightComponent } from './scroll-virtual-height/example-scroll-virtual-height.component';\nimport { ExampleScrollVirtualInfiniteComponent } from './scroll-virtual-infinite/example-scroll-virtual-infinite.component';\nimport { ExampleScrollVirtualListInfiniteComponent } from './scroll-virtual-list-infinite/example-scroll-virtual-list-infinite.component';\nimport { ExampleScrollVirtualListComponent } from './scroll-virtual-list/example-scroll-virtual-list.component';\nimport { ExampleScrollVirtualSelectionComponent } from './scroll-virtual-selection/example-scroll-virtual-selection.component';\nimport { ExampleScrollVirtualStyleComponent } from './scroll-virtual-style/example-scroll-virtual-style.component';\nimport { ExampleSelectCellBasicComponent } from './select-cell-basic/example-select-cell-basic.component';\nimport { ExampleSelectColumnBasicComponent } from './select-column-basic/example-select-column-basic.component';\nimport { ExampleSelectMixBasicComponent } from './select-mix-basic/example-select-mix-basic.component';\nimport { ExampleSelectRowBasicComponent } from './select-row-basic/example-select-row-basic.component';\nimport { ExampleSelectRowCommandComponent } from './select-row-command/example-select-row-command.component';\nimport { ExampleSelectRowDisableComponent } from './select-row-disable/example-select-row-disable.component';\nimport { ExampleSelectRowEditComponent } from './select-row-edit/example-select-row-edit.component';\nimport { ExampleSelectRowRangeComponent } from './select-row-range/example-select-row-range.component';\nimport { ExampleSelectRowSingleOnlyComponent } from './select-row-single-only/example-select-row-single-only.component';\nimport { ExampleSelectRowSingleComponent } from './select-row-single/example-select-row-single.component';\nimport { ExampleSizeColumnAbsoluteComponent } from './size-column-absolute/example-size-column-absolute.component';\nimport { ExampleSizeColumnBasicComponent } from './size-column-basic/example-size-column-basic.component';\nimport { ExampleSizeColumnFitHeadComponent } from './size-column-fit-head/example-size-column-fit-head.component';\nimport { ExampleSizeColumnFullComponent } from './size-column-full/example-size-column-full.component';\nimport { ExampleSizeColumnPinComponent } from './size-column-pin/example-size-column-pin.component';\nimport { ExampleSizeRowBasicComponent } from './size-row-basic/example-size-row-basic.component';\nimport { ExampleSortRowBasicComponent } from './sort-row-basic/example-sort-row-basic.component';\nimport { ExampleSortRowMixedComponent } from './sort-row-mixed/example-sort-row-mixed.component';\nimport { ExampleStyleCellBasicComponent } from './style-cell-basic/example-style-cell-basic.component';\nimport { ExampleStyleRowBasicComponent } from './style-row-basic/example-style-row-basic.component';\nimport { ExampleSummaryColumnAggregationComponent } from './summary-column-aggregation/example-summary-column-aggregation.component';\nimport { ExampleSummaryColumnBasicComponent } from './summary-column-basic/example-summary-column-basic.component';\nimport { ExampleThemeGridDarkComponent } from './theme-grid-dark/example-theme-grid-dark.component';\nimport { ExampleThemeGridEmbedComponent } from './theme-grid-embed/example-theme-grid-embed.component';\nimport { ExampleValidationBasicComponent } from './validation-basic/example-validation-basic.component';\nimport { ExampleVisibilityBasicComponent } from './visibility-basic/example-visibility-basic.component';\nimport { ExampleVisibilityStateComponent } from './visibility-model/example-visibility-model.component';\n\n\n\nexport const EXAMPLES: any[] = [\n\tExampleActionBarBasicComponent,\n\tExampleActionBarOnEnterComponent,\n\tExampleActionBarTemplateComponent,\n\tExampleAggregateColumnBasicComponent,\n\tExampleAltBasicComponent,\n\tExampleCellTooltipBasicComponent,\n\tExampleColumnArrayBasicComponent,\n\tExampleColumnAutocompleteBasicComponent,\n\tExampleColumnBoolBasicComponent,\n\tExampleColumnColumnVisibilityBasicComponent,\n\tExampleColumnCurrencyBasicComponent,\n\tExampleColumnDataSafeComponent,\n\tExampleColumnDateBasicComponent,\n\tExampleColumnDateTimeBasicComponent,\n\tExampleColumnDropdownBasicComponent,\n\tExampleColumnEmailBasicComponent,\n\tExampleColumnFileBasicComponent,\n\tExampleColumnIdBasicComponent,\n\tExampleColumnImageBasicComponent,\n\tExampleColumnListBasicComponent,\n\tExampleColumnListLoopComponent,\n\tExampleColumnNumberBasicComponent,\n\tExampleColumnPasswordBasicComponent,\n\tExampleColumnReferenceBasicComponent,\n\tExampleColumnRowIndicatorBasicComponent,\n\tExampleColumnRowNumberBasicComponent,\n\tExampleColumnRowOptionsBasicComponent,\n\tExampleColumnTextBasicComponent,\n\tExampleColumnTimeBasicComponent,\n\tExampleColumnTooltipBasicComponent,\n\tExampleColumnTypeSafeComponent,\n\tExampleColumnUrlBasicComponent,\n\tExampleCopyValueFromCellComponent,\n\tExampleDataProviderComponent,\n\tExampleDataRowAddComponent,\n\tExampleDataRowDeleteComponent,\n\tExampleDataRowDeleteSelectionComponent,\n\tExampleDefineColumnAsyncComponent,\n\tExampleDefineColumnBasicComponent,\n\tExampleDefineColumnHybridComponent,\n\tExampleDefineColumnTypeComponent,\n\tExampleDestroyGridBasicComponent,\n\tExampleDestroyGridModelComponent,\n\tExampleDetailsRowAllComponent,\n\tExampleDetailsRowApiComponent,\n\tExampleDetailsRowBasicComponent,\n\tExampleDetailsRowCustomComponent,\n\tExampleDetailsRowGridComponent,\n\tExampleDetailsRowPinComponent,\n\tExampleDetailsRowSelectComponent,\n\tExampleDetailsRowStartComponent,\n\tExampleDragColumnBasicComponent,\n\tExampleDragRowBasicComponent,\n\tExampleDragRowNodeComponent,\n\tExampleDynamicColumnModelComponent,\n\tExampleEditCellBasicComponent,\n\tExampleEditCellBatchComponent,\n\tExampleEditRowBasicComponent,\n\tExampleEditRowCustomComponent,\n\tExampleExportBasicComponent,\n\tExampleExportCsvComponent,\n\tExampleFilterColumnFetchComponent,\n\tExampleFilterConditionBasicComponent,\n\tExampleFilterRowAtomBasicComponent,\n\tExampleFilterRowCustomComponent,\n\tExampleFilterRowPeopleBasicComponent,\n\tExampleFloatingRowsBasicComponent,\n\tExampleFocusCellAutoComponent,\n\tExampleFocusCellBasicComponent,\n\tExampleFocusCellCustomComponent,\n\tExampleGenerateColumnCheckComponent,\n\tExampleGenerateColumnCohortComponent,\n\tExampleGenerateColumnDeepComponent,\n\tExampleGenerateColumnRawComponent,\n\tExampleGenerateColumnShallowComponent,\n\tExampleGridListBasicComponent,\n\tExampleGridSizeComponent,\n\tExampleGroupColumnBasicComponent,\n\tExampleGroupRowAggregationComponent,\n\tExampleGroupRowBasicComponent,\n\tExampleGroupRowEditComponent,\n\tExampleGroupRowFlatComponent,\n\tExampleGroupRowRowspanComponent,\n\tExampleGroupRowSubheadComponent,\n\tExampleGroupRowSummaryComponent,\n\tExampleHierarchyBrowserBasicComponent,\n\tExampleImportBasicComponent,\n\tExampleImportCsvComponent,\n\tExampleIndexColumnBasicComponent,\n\tExampleIndexColumnHybridComponent,\n\tExampleIndexColumnModelComponent,\n\tExampleInteractionModeDetachedComponent,\n\tExampleInteractionModeReadonlyComponent,\n\tExampleKeyWithSymbolsComponent,\n\tExampleLayerGridBlankComponent,\n\tExampleLegendGridBasicComponent,\n\tExampleLiveDataBasicComponent,\n\tExampleLiveRowsBasicComponent,\n\tExampleLookAtomsBasicComponent,\n\tExampleLookAtomsCustomizedComponent,\n\tExampleLookAtomsIdComponent,\n\tExampleLookAtomsModelComponent,\n\tExampleLookPeopleBasicComponent,\n\tExampleLookPeopleModelComponent,\n\tExampleLookQuotesBasicComponent,\n\tExampleLookQuotesModelComponent,\n\tExampleManipulateDataBasicComponent,\n\tExampleMasterDetailsBasicComponent,\n\tExampleMouseApiBasicComponent,\n\tExampleOnPushBasicComponent,\n\tExamplePaginationBasicComponent,\n\tExamplePaneBasicComponent,\n\tExamplePaneTriggerComponent,\n\tExamplePaneWithSelectionComponent,\n\tExamplePersistenceBasicComponent,\n\tExamplePersistenceOnStateChangeComponent,\n\tExamplePersistenceServerComponent,\n\tExamplePersistenceWithSyncGetDataComponent,\n\tExamplePinColumnBasicComponent,\n\tExamplePipeGridBasicComponent,\n\tExamplePivotColumnBasicComponent,\n\tExamplePivotColumnCohortComponent,\n\tExamplePivotColumnGroupComponent,\n\tExamplePivotColumnTemplateComponent,\n\tExamplePluginGridBasicComponent,\n\tExampleRestApiBasicComponent,\n\tExampleSampleOrdersComponent,\n\tExampleScrollVirtualBasicComponent,\n\tExampleScrollVirtualDetailsComponent,\n\tExampleScrollVirtualDragComponent,\n\tExampleScrollVirtualEditComponent,\n\tExampleScrollVirtualGroupComponent,\n\tExampleScrollVirtualHeightComponent,\n\tExampleScrollVirtualInfiniteComponent,\n\tExampleScrollVirtualListComponent,\n\tExampleScrollVirtualListInfiniteComponent,\n\tExampleScrollVirtualSelectionComponent,\n\tExampleScrollVirtualStyleComponent,\n\tExampleSelectCellBasicComponent,\n\tExampleSelectColumnBasicComponent,\n\tExampleSelectMixBasicComponent,\n\tExampleSelectRowBasicComponent,\n\tExampleSelectRowCommandComponent,\n\tExampleSelectRowDisableComponent,\n\tExampleSelectRowEditComponent,\n\tExampleSelectRowRangeComponent,\n\tExampleSelectRowSingleComponent,\n\tExampleSelectRowSingleOnlyComponent,\n\tExampleSizeColumnAbsoluteComponent,\n\tExampleSizeColumnBasicComponent,\n\tExampleSizeColumnFitHeadComponent,\n\tExampleSizeColumnFullComponent,\n\tExampleSizeColumnPinComponent,\n\tExampleSizeRowBasicComponent,\n\tExampleSortRowBasicComponent,\n\tExampleSortRowMixedComponent,\n\tExampleStyleCellBasicComponent,\n\tExampleStyleRowBasicComponent,\n\tExampleSummaryColumnAggregationComponent,\n\tExampleSummaryColumnBasicComponent,\n\tExampleThemeGridDarkComponent,\n\tExampleThemeGridEmbedComponent,\n\tExampleValidationBasicComponent,\n\tExampleVisibilityBasicComponent,\n\tExampleVisibilityStateComponent,\n];\n\nexport const APP_ROUTES: Routes = EXAMPLES\n\t.map<Route>(example => ({\n\t\tpath: (example.tags && example.tags[0]) || example.id,\n\t\tcomponent: example\n\t}));\n\n@NgModule({\n\tdeclarations: [\n\t\t...EXAMPLES,\n\t\tExamplePluginMyPagerComponent\n\t],\n\texports: EXAMPLES,\n\timports: [\n\t\tCommonModule,\n\t\tFormsModule,\n\n\t\tMatButtonModule,\n\t\tMatSelectModule,\n\t\tMatChipsModule,\n\t\tMatIconModule,\n\n\t\tGridModule,\n\t\tThemeModule,\n\t]\n})\nexport class ExampleModule { }\n","import { AfterViewInit, Component, ViewChild, ChangeDetectionStrategy } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Grid, GridModel } from 'ng2-qgrid';\nimport { Atom, DataService } from '../data.service';\nimport * as fileSaver from 'file-saver';\nimport * as XLSX from 'xlsx';\n\nconst EXAMPLE_TAGS = [\n\t'export-basic',\n\t'Table data can be exported in different formates, using UI buttons'\n];\n\n@Component({\n\tselector: 'example-export-basic',\n\ttemplateUrl: 'example-export-basic.component.html',\n\tstyleUrls: ['example-export-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleExportBasicComponent implements AfterViewInit {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\tgridModel: GridModel;\n\n\tconstructor(dataService: DataService,\n\t\tprivate qgrid: Grid\n\t) {\n\t\tthis.rows = dataService.getAtoms();\n\t\tthis.gridModel = qgrid.model();\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.gridModel.plugin({\n\t\t\timports: {\n\t\t\t\t'fileSaver': fileSaver,\n\t\t\t\t'xlsx': XLSX\n\t\t\t}\n\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\"\n\t\t[model]=\"gridModel\"\n\t\tid=\"export-example\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-export type=\"json\">\n\t\t<ng-template for=\"trigger\"\n\t\t\t\t\t let-$action>\n\t\t\t<button mat-button\n\t\t\t\t\t[q-grid-command]=\"$action.command\">\n\t\t\t\tExport to JSON\n\t\t\t</button>\n\t\t</ng-template>\n\t</q-grid-export>\n\t<q-grid-export type=\"csv\">\n\t\t<ng-template for=\"trigger\"\n\t\t\t\t\t let-$action>\n\t\t\t<button mat-button\n\t\t\t\t\t[q-grid-command]=\"$action.command\">\n\t\t\t\tExport to CSV\n\t\t\t</button>\n\t\t</ng-template>\n\t</q-grid-export>\n\t<q-grid-export type=\"xml\">\n\t\t<ng-template for=\"trigger\"\n\t\t\t\t\t let-$action>\n\t\t\t<button mat-button\n\t\t\t\t\t[q-grid-command]=\"$action.command\">\n\t\t\t\tExport to XML\n\t\t\t</button>\n\t\t</ng-template>\n\t</q-grid-export>\n\t<q-grid-export type=\"xlsx\">\n\t\t<ng-template for=\"trigger\"\n\t\t\t\t\t let-$action>\n\t\t\t<button mat-button\n\t\t\t\t\t[q-grid-command]=\"$action.command\">\n\t\t\t\tExport to XLSX\n\t\t\t</button>\n\t\t</ng-template>\n\t</q-grid-export>\n\n</q-grid>","import { AfterViewInit, Component, ViewChild, ChangeDetectionStrategy } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Grid, GridModel } from 'ng2-qgrid';\nimport { Atom, DataService } from '../data.service';\nimport * as fileSaver from 'file-saver';\n\nconst EXAMPLE_TAGS = [\n\t'export-csv',\n\t'Table data can be exported in csv, using UI button'\n];\n\n@Component({\n\tselector: 'example-export-csv',\n\ttemplateUrl: 'example-export-csv.component.html',\n\tstyleUrls: ['example-export-csv.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleExportCsvComponent implements AfterViewInit {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\tgridModel: GridModel;\n\n\tconstructor(dataService: DataService,\n\t\tprivate qgrid: Grid\n\t) {\n\t\tthis.rows = dataService.getAtoms();\n\t\tthis.gridModel = qgrid.model();\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.gridModel.plugin({\n\t\t\timports: {\n\t\t\t\t'fileSaver': fileSaver\n\t\t\t}\n\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\"\n\t\t[model]=\"gridModel\"\n\t\tid=\"export-example\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-export type=\"csv\">\n\t</q-grid-export>\n</q-grid>","import { Component, ChangeDetectionStrategy, ViewChild, AfterViewInit } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { FetchContext, Grid, GridModel } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'filter-column-fetch',\n\t'Column filter value can be loaded from server'\n];\n\n@Component({\n\tselector: 'example-filter-column-fetch',\n\ttemplateUrl: 'example-filter-column-fetch.component.html',\n\tstyleUrls: ['example-filter-column-fetch.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleFilterColumnFetchComponent implements AfterViewInit {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\tgridModel: GridModel;\n\n\tconstructor(private dataService: DataService,\n\t\tprivate qgrid: Grid\n\t) {\n\t\tthis.rows = dataService.getAtoms();\n\t\tthis.gridModel = qgrid.model();\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.gridModel.filter({\n\t\t\tfetch: (key: string, context: FetchContext) =>\n\t\t\t\tthis.dataService\n\t\t\t\t\t.getAtoms()\n\t\t\t\t\t.pipe(\n\t\t\t\t\t\tmap(atoms => {\n\t\t\t\t\t\t\tconst { search, value, take, skip } = context;\n\t\t\t\t\t\t\tconst columnSearch = search.toLowerCase();\n\n\t\t\t\t\t\t\tconst columnData = atoms.map(value);\n\t\t\t\t\t\t\tconst filteredData = columnSearch\n\t\t\t\t\t\t\t\t? columnData.filter(x => ('' + x).toLowerCase().indexOf(columnSearch) >= 0)\n\t\t\t\t\t\t\t\t: columnData;\n\n\t\t\t\t\t\t\tfilteredData.sort();\n\t\t\t\t\t\t\treturn filteredData.slice(skip, skip + take);\n\t\t\t\t\t\t}))\n\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\"\n\t\t[model]=\"gridModel\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'filter-condition-basic',\n\t'Table data can be filtered using query builder (query builder button)'\n];\n\n@Component({\n\tselector: 'example-filter-condition-basic',\n\ttemplateUrl: 'example-filter-condition-basic.component.html',\n\tstyleUrls: ['example-filter-condition-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleFilterConditionBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-query-builder>\n\t</q-grid-query-builder>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'filter-row-atom-basic',\n\t'Table data can be filtered by every column'\n];\n\n@Component({\n\tselector: 'example-filter-row-atom-basic',\n\ttemplateUrl: 'example-filter-row-atom-basic.component.html',\n\tstyleUrls: ['example-filter-row-atom-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleFilterRowAtomBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\"\n\t\tfilterUnit=\"row\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ViewChild, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { GridComponent, Grid, GridModel } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'filter-row-custom',\n\t'Table data can be filtered using custom filter inputs'\n];\n\n@Component({\n\tselector: 'example-filter-row-custom',\n\ttemplateUrl: 'example-filter-row-custom.component.html',\n\tstyleUrls: ['example-filter-row-custom.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleFilterRowCustomComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\t@ViewChild(GridComponent, { static: true }) myGrid: GridComponent;\n\trows: Observable<Atom[]>;\n\tgridModel: GridModel = this.qgrid.model();\n\n\tsearch = {\n\t\tname: '',\n\t\tphase: ''\n\t};\n\n\tconstructor(dataService: DataService, private qgrid: Grid) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n\n\tfilter(name: string, value: string) {\n\t\tthis.search[name] = value;\n\n\t\tconst custom = Object\n\t\t\t.keys(this.search)\n\t\t\t.reduce((memo: (x: any) => boolean, key) => {\n\t\t\t\tconst searchText = this.search[key].toLowerCase();\n\t\t\t\tif (searchText) {\n\t\t\t\t\treturn row => memo(row) && ('' + row[key]).toLowerCase().indexOf(searchText) >= 0;\n\t\t\t\t}\n\n\t\t\t\treturn memo;\n\t\t\t}, x => true);\n\n\t\tthis.gridModel.filter({\n\t\t\tcustom\n\t\t});\n\t}\n}\n","Name: <input type=\"search\"\n       (input)=\"filter('name', $any($event.target).value)\"\n       placeholder=\"Filter by name\" />\n\nPhase: <input type=\"search\"\n       (input)=\"filter('phase', $any($event.target).value)\"\n       placeholder=\"Filter by phase\" />\n\n\n<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        [model]=\"gridModel\">\n       <q-grid-columns generation=\"deep\">\n       </q-grid-columns>\n\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nconst EXAMPLE_TAGS = [\n\t'filter-row-people-basic',\n\t'Filter can be applied to every column'\n];\n\n@Component({\n\tselector: 'example-filter-row-people-basic',\n\ttemplateUrl: 'example-filter-row-people-basic.component.html',\n\tstyleUrls: ['example-filter-row-people-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleFilterRowPeopleBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService\n\t\t\t.getPeople()\n\t\t\t.pipe(\n\t\t\t\tmap(xs =>\n\t\t\t\t\txs.map((x: any) => {\n\t\t\t\t\t\tx.memberSince = new Date(x.memberSince);\n\t\t\t\t\t\tx.memberSince.setHours(0);\n\t\t\t\t\t\tx.memberSince.setMinutes(0);\n\t\t\t\t\t\tx.memberSince.setSeconds(0);\n\t\t\t\t\t\treturn x;\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t);\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\"\n\t\tclass=\"q-grid-compact\"\n\t\tfilterUnit=\"row\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService } from '../data.service';\nimport { GridModel, Grid } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'floating-rows-basic',\n\t'Rows can be freezed (freezed rows remain on the top, when grid is scrolled)'\n];\n\n@Component({\n\tselector: 'example-floating-rows-basic',\n\ttemplateUrl: 'example-floating-rows-basic.component.html',\n\tstyleUrls: ['example-floating-rows-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleFloatingRowsBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\tgridModel: GridModel;\n\n\tconstructor(dataService: DataService, qgrid: Grid) {\n\t\tthis.gridModel = qgrid.model();\n\n\t\tdataService\n\t\t\t.getAtoms()\n\t\t\t.subscribe(rows => {\n\t\t\t\tthis.gridModel.data({ rows });\n\t\t\t\tthis.gridModel.row({\n\t\t\t\t\tpinTop: [rows[0], rows[1]],\n\t\t\t\t\tpinBottom: [rows[rows.length - 1]]\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[model]=\"gridModel\"\n\t\teditMode=\"cell\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'focus-cell-auto',\n\t'Focus is transmitted to the grid on startup'\n];\n\n@Component({\n\tselector: 'example-focus-cell-auto',\n\ttemplateUrl: 'example-focus-cell-auto.component.html',\n\tstyleUrls: ['example-focus-cell-auto.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleFocusCellAutoComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        q-grid-autofocus>\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService } from '../data.service';\nimport { GridModel, Grid } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'focus-cell-basic',\n\t'Custom cell focus is applied after grid is loaded'\n];\n\n@Component({\n\tselector: 'example-focus-cell-basic',\n\ttemplateUrl: 'example-focus-cell-basic.component.html',\n\tstyleUrls: ['example-focus-cell-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleFocusCellBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\tgridModel: GridModel;\n\n\tconstructor(dataService: DataService, qgrid: Grid) {\n\t\tthis.gridModel = qgrid.model();\n\n\t\tdataService\n\t\t\t.getAtoms()\n\t\t\t.subscribe(rows => {\n\t\t\t\tthis.gridModel.data({ rows });\n\n\t\t\t\tconst service = qgrid.service(this.gridModel);\n\n\t\t\t\t// navigate to the 2nd page to the bottom\n\t\t\t\tservice.focus(99, 2);\n\t\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [model]=\"gridModel\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy, ViewChild } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { GridComponent, Grid } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'focus-cell-custom',\n\t'Cell can be focused by entering its number into focus input field and clicking \"focus\" button'\n];\n\n@Component({\n\tselector: 'example-focus-cell-custom',\n\ttemplateUrl: 'example-focus-cell-custom.component.html',\n\tstyleUrls: ['example-focus-cell-custom.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleFocusCellCustomComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\t@ViewChild(GridComponent, { static: true }) grid: GridComponent;\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService, private qgrid: Grid) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n\n\tfocus(rowIndex) {\n\t\tconst { model } = this.grid;\n\t\tconst service = this.qgrid.service(model);\n\n\t\t// navigate to the 2nd page to the bottom\n\t\tservice.focus(Number.parseInt(rowIndex, 10) - 1);\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-toolbar>\n\t\t<ng-template for=\"top\">\n\t\t\t<input #input\n\t\t\t\t   type=\"number\" />\n\t\t\t<button mat-button\n\t\t\t\t\t(click)=\"focus(input.value)\">\n\t\t\t\tFocus\n\t\t\t</button>\n\t\t</ng-template>\n\t</q-grid-toolbar>\n</q-grid>","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column [width]=\"150\">\n\t\t\t<ng-template for=\"head\"\n\t\t\t\t\t\t let-$cell>\n\t\t\t\t<q-grid-column-sort [column]=\"$cell.column\"\n\t\t\t\t\t\t\t\t\tclass=\"q-grid-sort\">\n\t\t\t\t\t<label>\n\t\t\t\t\t\t{{$cell.column.title}}/{{$cell.column.type}}\n\t\t\t\t\t</label>\n\t\t\t\t</q-grid-column-sort>\n\t\t\t\t<q-grid-column-filter-trigger class=\"q-grid-column-filter-trigger\"\n\t\t\t\t\t\t\t\t\t\t\t  [column]=\"$cell.column\">\n\t\t\t\t</q-grid-column-filter-trigger>\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\nconst EXAMPLE_TAGS = [\n\t'generate-column-check',\n\t'Column generation based on data source'\n];\n\n@Component({\n\tselector: 'example-generate-column-check',\n\ttemplateUrl: 'example-generate-column-check.component.html',\n\tstyleUrls: ['example-generate-column-check.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleGenerateColumnCheckComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{\n\t\t\tnumber: '1',\n\t\t\tnotNumber: '1',\n\t\t\tnotDate: '1983-09-18',\n\t\t\tnotBoolean: 'true',\n\t\t\tnotEmail: 'john@mail.com',\n\t\t\tnotTime: '12:00',\n\t\t\tnotImage: 'https://upload.wikimedia.org/wikipedia/commons/e/e4/Hydrogen_Spectra.jpg',\n\t\t\tnotArray: ['1', '2', '3']\n\t\t},\n\t\t{\n\t\t\tnumber: '',\n\t\t\tnotNumber: 'some text',\n\t\t\tnotDate: 'some text',\n\t\t\tnotBoolean: 'some text',\n\t\t\tnotEmail: 'some text',\n\t\t\tnotTime: 'some text',\n\t\t\tnotImage: 'some text',\n\t\t\tnotArray: 'some text'\n\t\t}\n\t];\n}\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'generate-column-cohort',\n\t'Column generation based on data source'\n];\n\n@Component({\n\tselector: 'example-generate-column-cohort',\n\ttemplateUrl: 'example-generate-column-cohort.component.html',\n\tstyleUrls: ['example-generate-column-cohort.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleGenerateColumnCohortComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns generation=\"cohort\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'generate-column-deep',\n\t'Column generation based on data source'\n];\n\n@Component({\n\tselector: 'example-generate-column-deep',\n\ttemplateUrl: 'example-generate-column-deep.component.html',\n\tstyleUrls: ['example-generate-column-deep.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleGenerateColumnDeepComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'generate-column-raw',\n\t'Column generation based on data source'\n];\n\n@Component({\n\tselector: 'example-generate-column-raw',\n\ttemplateUrl: 'example-generate-column-raw.component.html',\n\tstyleUrls: ['example-generate-column-raw.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleGenerateColumnRawComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\"\n\t\t\t\t\ttypeDetection=\"raw\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'generate-column-shallow',\n\t'Column generation based on data source'\n];\n\n@Component({\n\tselector: 'example-generate-column-shallow',\n\ttemplateUrl: 'example-generate-column-shallow.component.html',\n\tstyleUrls: ['example-generate-column-shallow.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleGenerateColumnShallowComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns generation=\"shallow\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { Atom, DataService } from '../data.service';\nimport { Observable, of } from 'rxjs';\nimport { Column } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'grid-list-basic',\n\t'Grid list based on *ngFor directive'\n];\n\n@Component({\n\tselector: 'example-grid-list-basic',\n\ttemplateUrl: 'example-grid-list-basic.component.html',\n\tstyleUrls: ['example-grid-list-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleGridListBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\tmodels: Array<{ columns: Array<Column>, rows$: Observable<Atom[]> }> = [{\n\t\tcolumns: [{\n\t\t\tkey: 'number',\n\t\t\ttitle: 'Number'\n\t\t}, {\n\t\t\tkey: 'name',\n\t\t\ttitle: 'Name'\n\t\t}],\n\t\trows$: this.dataService.getAtoms()\n\t}];\n\n\tconstructor(private dataService: DataService) {\n\t}\n}\n","<q-grid *ngFor=\"let model of models\"\n        [caption]=\"title\"\n        [rows]=\"model.rows$ | async\">\n\t<q-grid-columns>\n\t\t<q-grid-column *ngFor=\"let column of model.columns\"\n\t\t               [key]=\"column.key\"\n\t\t               [title]=\"column.title\"\n\t\t               [type]=\"column.type\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-pager [size]=\"((model.rows$ | async) || [])?.length\"></q-grid-pager>\n</q-grid>","import { Component, ChangeDetectionStrategy, ViewChild } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-grid-size',\n\ttemplateUrl: 'example-grid-size.component.html',\n\tstyleUrls: ['example-grid-size.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ExampleGridSizeComponent {\n\tstatic id = 'grid-size';\n\n\trows: Observable<Human[]>;\n\tsizeClass = 'fill';\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<button (click)=\"sizeClass = 'fill'\">100%</button>\n<button (click)=\"sizeClass = 'medium'\">Medium</button>\n<button (click)=\"sizeClass = 'small'\">Small</button>\n\n<q-grid caption=\"Grid size\"\n\t\t[rows]=\"rows | async\"\n\t\t[ngClass]=\"sizeClass\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'group-column-basic',\n\t'Columns are grouped'\n];\n\n@Component({\n\tselector: 'example-group-column-basic',\n\ttemplateUrl: 'example-group-column-basic.component.html',\n\tstyleUrls: ['example-group-column-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleGroupColumnBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns>\n\t\t<q-grid-column title=\"Name\">\n\t\t\t<q-grid-column title=\"Given\"\n\t\t\t               key=\"firstName\"\n\t\t\t               path=\"name.first\">\n\t\t\t</q-grid-column>\n\t\t\t<q-grid-column title=\"Surname\"\n\t\t\t               key=\"lastName\"\n\t\t\t               path=\"name.last\">\n\t\t\t</q-grid-column>\n\t\t</q-grid-column>\n\t\t<q-grid-column title=\"Gender\"\n\t\t               key=\"gender\">\n\t\t</q-grid-column>\n\t\t<q-grid-column title=\"Birthday\"\n\t\t               key=\"birthday\">\n\t\t</q-grid-column>\n\t\t<q-grid-column title=\"Contact Info\">\n\t\t\t<q-grid-column title=\"Email\"\n\t\t\t               key=\"email\"\n\t\t\t               path=\"contact.email\">\n\t\t\t</q-grid-column>\n\t\t\t<q-grid-column title=\"Birthday\"\n\t\t\t               key=\"birthday\"\n\t\t\t               path=\"contact.birthday\">\n\t\t\t</q-grid-column>\n\t\t\t<q-grid-column title=\"Phone\"\n\t\t\t               key=\"phone\"\n\t\t\t               path=\"contact.phone\">\n\t\t\t</q-grid-column>\n\t\t\t<q-grid-column title=\"Address\">\n\t\t\t\t<q-grid-column title=\"Street\"\n\t\t\t\t               key=\"street\"\n\t\t\t\t               path=\"contact.address.phone\">\n\t\t\t\t</q-grid-column>\n\t\t\t\t<q-grid-column title=\"Zip\"\n\t\t\t\t               key=\"zip\"\n\t\t\t\t               path=\"contact.address.phone\">\n\t\t\t\t</q-grid-column>\n\t\t\t\t<q-grid-column title=\"City\"\n\t\t\t\t               key=\"phone\"\n\t\t\t\t               path=\"contact.address.phone\">\n\t\t\t\t</q-grid-column>\n\t\t\t\t<q-grid-column title=\"State\"\n\t\t\t\t               key=\"state\"\n\t\t\t\t               path=\"contact.address.state\">\n\t\t\t\t</q-grid-column>\n\t\t\t</q-grid-column>\n\t\t</q-grid-column>\n\t\t<q-grid-column title=\"Likes\"\n\t\t               key=\"likes\">\n\t\t</q-grid-column>\n\t\t<q-grid-column title=\"Member Since\"\n\t\t               key=\"memberSince\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'group-row-aggregation',\n\t'Rows are aggregated into groups'\n];\n\n@Component({\n\tselector: 'example-group-row-aggregation',\n\ttemplateUrl: 'example-group-row-aggregation.component.html',\n\tstyleUrls: ['example-group-row-aggregation.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleGroupRowAggregationComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        [groupBy]=\"['bondingType', 'groupBlock']\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column key=\"melt\"\n\t\t               type=\"number\"\n\t\t               aggregation=\"avg\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'group-row-basic',\n\t'Rows are grouped'\n];\n\n@Component({\n\tselector: 'example-group-row-basic',\n\ttemplateUrl: 'example-group-row-basic.component.html',\n\tstyleUrls: ['example-group-row-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleGroupRowBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        [groupBy]=\"['bondingType', 'groupBlock']\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'group-row-edit',\n\t'Cells in grouped rows can be edited'\n];\n\n@Component({\n\tselector: 'example-group-row-edit',\n\ttemplateUrl: 'example-group-row-edit.component.html',\n\tstyleUrls: ['example-group-row-edit.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleGroupRowEditComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        editMode=\"cell\"\n        [rows]=\"rows | async\"\n        [groupBy]=\"['bondingType', 'groupBlock']\">\n        <q-grid-columns generation=\"deep\">\n        </q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'group-row-flat',\n\t'Different group types'\n];\n\n@Component({\n\tselector: 'example-group-row-flat',\n\ttemplateUrl: 'example-group-row-flat.component.html',\n\tstyleUrls: ['example-group-row-flat.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleGroupRowFlatComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        [groupBy]=\"['bondingType', 'groupBlock']\"\n        groupMode=\"flat\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'group-row-rowspan',\n\t'Different group types'\n];\n\n@Component({\n\tselector: 'example-group-row-rowspan',\n\ttemplateUrl: 'example-group-row-rowspan.component.html',\n\tstyleUrls: ['example-group-row-rowspan.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleGroupRowRowspanComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        [groupBy]=\"['bondingType', 'groupBlock']\"\n        groupMode=\"rowspan\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'group-row-subhead',\n\t'Different group types'\n];\n\n@Component({\n\tselector: 'example-group-row-subhead',\n\ttemplateUrl: 'example-group-row-subhead.component.html',\n\tstyleUrls: ['example-group-row-subhead.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleGroupRowSubheadComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        [groupBy]=\"['bondingType', 'groupBlock']\"\n        groupMode=\"subhead\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'group-row-summary',\n\t'Different group types'\n];\n\n@Component({\n\tselector: 'example-group-row-summary',\n\ttemplateUrl: 'example-group-row-summary.component.html',\n\tstyleUrls: ['example-group-row-summary.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleGroupRowSummaryComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        [groupBy]=\"['bondingType', 'groupBlock']\"\n        groupMode=\"subhead\"\n        groupSummary=\"leaf\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column type=\"group-summary\"\n\t\t               aggregation=\"count\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t             let-$cell>\n\t\t\t\tCount: {{$cell.value}}\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService } from '../data.service';\nimport { Grid, GridModel, Command, Node } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'hierarchy-browser-basic',\n\t'Table content is folder tree'\n];\n\n@Component({\n\tselector: 'example-hierarchy-browser-basic',\n\ttemplateUrl: 'example-hierarchy-browser-basic.component.html',\n\tstyleUrls: ['example-hierarchy-browser-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleHierarchyBrowserBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\tgridModel: GridModel = this.qgrid.model();\n\n\tconstructor(private qgrid: Grid) {\n\t\tconst gridService = qgrid.service(this.gridModel);\n\t\tconst root = new Node('$root', 0);\n\t\t(root as any).isVisited = false;\n\n\t\tconst tree = [root];\n\t\tconst treePipe = (memo, context, next) => {\n\t\t\tmemo.nodes = tree;\n\t\t\tnext(memo);\n\t\t};\n\n\t\tthis.gridModel\n\t\t\t.data({\n\t\t\t\tpipe: [\n\t\t\t\t\tqgrid.pipe.memo,\n\t\t\t\t\ttreePipe,\n\t\t\t\t\tqgrid.pipe.column,\n\t\t\t\t\tqgrid.pipe.view,\n\t\t\t\t\tqgrid.pipe.scene\n\t\t\t\t]\n\t\t\t})\n\t\t\t.group({\n\t\t\t\ttoggle: new Command({\n\t\t\t\t\texecute: function execute(node) {\n\t\t\t\t\t\tif (node.isVisited) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst level = node.level + 1;\n\n\t\t\t\t\t\tnode.isVisited = true;\n\t\t\t\t\t\tnode.children = [\n\t\t\t\t\t\t\tnew Node(`folder [${level}.0] `, level, 'group'),\n\t\t\t\t\t\t\tnew Node(`folder [${level}.1] `, level, 'group'),\n\t\t\t\t\t\t\tnew Node(`file [${level}.2] `, level, 'value'),\n\t\t\t\t\t\t\tnew Node(`file [${level}.3] `, level, 'value'),\n\t\t\t\t\t\t];\n\n\t\t\t\t\t\tgridService.invalidate();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t\t.selection({\n\t\t\t\tmode: 'multiple',\n\t\t\t\tunit: 'row',\n\t\t\t\tarea: 'custom',\n\t\t\t\trowKey: node => node.key\n\t\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[model]=\"gridModel\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column title=\"Name\"\n\t\t\t\t\t   offset=\"40\"\n\t\t\t\t\t   type=\"group\"\n\t\t\t\t\t   width=\"90%\"\n\t\t\t\t\t   widthMode=\"relative\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t\t\t\t let-$cell\n\t\t\t\t\t\t let-$view=\"$view\">\n\n\t\t\t\t<div [ngStyle]=\"{'padding-left': $view.group.offset($cell.row, $cell.column) + 'px'}\"\n\t\t\t\t\t *ngIf=\"$view.group.isVisible($cell.row, $cell.column)\">\n\t\t\t\t\t<button mat-icon-button\n\t\t\t\t\t\t\t[q-grid-command]=\"$view.group.toggleStatus\"\n\t\t\t\t\t\t\t[q-grid-command-arg]=\"[$cell.row, $cell.column]\"\n\t\t\t\t\t\t\t[ngClass]=\"'q-grid-' + $view.group.status($cell.row, $cell.column)\"\n\t\t\t\t\t\t\ttabindex=\"-1\">\n\t\t\t\t\t\t<mat-icon class=\"q-grid-icon\">\n\t\t\t\t\t\t\t{{$view.group.status($cell.row, $cell.column) === 'expand' ? 'folder_open' : 'folder'}}\n\t\t\t\t\t\t</mat-icon>\n\n\t\t\t\t\t\t<span class=\"q-grid-group-label\">\n\t\t\t\t\t\t\t{{$view.group.value($cell.row, $cell.column)}}\n\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t<span class=\"q-grid-group-count\">\n\t\t\t\t\t\t\t({{$view.group.count($cell.row, $cell.column)}})\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-visibility [toolbarBottom]=\"false\">\n\t</q-grid-visibility>\n</q-grid>","import { AfterViewInit, Component, ViewChild, ChangeDetectionStrategy } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport * as XLSX from 'xlsx';\n\nimport { DataService, Atom } from '../data.service';\nimport { Grid, GridModel } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'import-basic',\n\t'Table data can be imported from file'\n];\n\n@Component({\n\tselector: 'example-import-basic',\n\ttemplateUrl: 'example-import-basic.component.html',\n\tstyleUrls: ['example-import-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleImportBasicComponent implements AfterViewInit {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]> = of([]);\n\tgridModel: GridModel;\n\n\tconstructor(private qgrid: Grid) {\n\t\tthis.gridModel = qgrid.model();\n\t}\n\tngAfterViewInit() {\n\t\tthis.gridModel.plugin({\n\t\t\timports: {\n\t\t\t\t'xlsx': XLSX\n\t\t\t}\n\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\"\n\t\t[model]=\"gridModel\">\n\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-import options=\"{head:'numeric'}\">\n\t\t<ng-template for=\"trigger\"\n\t\t\t\t\t let-$action>\n\t\t\t<button mat-button\n\t\t\t\t\t[q-grid-command]=\"$action.command\">\n\t\t\t\tImport file\n\t\t\t</button>\n\t\t</ng-template>\n\t</q-grid-import>\n\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { DataService, Atom } from '../data.service';\n\nconst EXAMPLE_TAGS = [\n\t'import-csv',\n\t'Table data can be imported from csv'\n];\n\n@Component({\n\tselector: 'example-import-csv',\n\ttemplateUrl: 'example-import-csv.component.html',\n\tstyleUrls: ['example-import-csv.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleImportCsvComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]> = of([]);\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-import>\n\t</q-grid-import>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'index-column-basic',\n\t'Columns are ordered (property \"index\")'\n];\n\n@Component({\n\tselector: 'example-index-column-basic',\n\ttemplateUrl: 'example-index-column-basic.component.html',\n\tstyleUrls: ['example-index-column-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleIndexColumnBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"symbol\"\n\t\t\t\t\t   [index]=\"1\"\n\t\t\t\t\t   title=\"[1]Symbol\"\n\t\t\t\t\t   type=\"text\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"source\"\n\t\t\t\t\t   title=\"[3]Wiki\"\n\t\t\t\t\t   [width]=\"300\"\n\t\t\t\t\t   type=\"url\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"name\"\n\t\t\t\t\t   title=\"[2]Name\"\n\t\t\t\t\t   [index]=\"2\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"number\"\n\t\t\t\t\t   [index]=\"0\"\n\t\t\t\t\t   title=\"[0]#\"\n\t\t\t\t\t   [width]=\"90\"\n\t\t\t\t\t   type=\"id\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService } from '../data.service';\nimport { GridModel, Grid } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'index-column-hybrid',\n\t'Columns are ordered (typescript and html)'\n];\n\n@Component({\n\tselector: 'example-index-column-hybrid',\n\ttemplateUrl: 'example-index-column-hybrid.component.html',\n\tstyleUrls: ['example-index-column-hybrid.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleIndexColumnHybridComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\tgridModel: GridModel;\n\n\tconstructor(dataService: DataService, qgrid: Grid) {\n\t\tthis.gridModel = qgrid.model();\n\n\t\tdataService\n\t\t\t.getAtoms()\n\t\t\t.subscribe(rows => {\n\t\t\t\tthis.gridModel.data({\n\t\t\t\t\trows,\n\t\t\t\t\tcolumns: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'name',\n\t\t\t\t\t\t\ttitle: '[js 3]Name',\n\t\t\t\t\t\t\tindex: 3\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'source',\n\t\t\t\t\t\t\ttitle: '[js 2]Source',\n\t\t\t\t\t\t\tindex: 2\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tkey: 'melt',\n\t\t\t\t\t\t\ttitle: '[js 8]Melt',\n\t\t\t\t\t\t\tindex: 8\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'mass',\n\t\t\t\t\t\t\ttitle: '[js no index]Mass'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'boil',\n\t\t\t\t\t\t\ttitle: '[js 0]Boil',\n\t\t\t\t\t\t\tindex: 0\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[model]=\"gridModel\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"symbol\"\n\t\t\t\t\t   [index]=\"1\"\n\t\t\t\t\t   title=\"[html 1]Symbol\"\n\t\t\t\t\t   type=\"text\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"source\"\n\t\t\t\t\t   title=\"[html no index]Wiki\"\n\t\t\t\t\t   [width]=\"300\"\n\t\t\t\t\t   type=\"url\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"name\"\n\t\t\t\t\t   title=\"[html 2]Name\"\n\t\t\t\t\t   [index]=\"2\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"number\"\n\t\t\t\t\t   [index]=\"0\"\n\t\t\t\t\t   title=\"[html 0]#\"\n\t\t\t\t\t   [width]=\"90\"\n\t\t\t\t\t   type=\"id\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService } from '../data.service';\nimport { GridModel, Grid } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'index-column-model',\n\t'Columns are ordered (grid-model)'\n];\n\n@Component({\n\tselector: 'example-index-column-model',\n\ttemplateUrl: 'example-index-column-model.component.html',\n\tstyleUrls: ['example-index-column-model.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleIndexColumnModelComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\tgridModel: GridModel;\n\n\tconstructor(dataService: DataService, qgrid: Grid) {\n\t\tthis.gridModel = qgrid.model();\n\n\t\tdataService\n\t\t\t.getAtoms()\n\t\t\t.subscribe(rows => {\n\t\t\t\tthis.gridModel.data({\n\t\t\t\t\trows,\n\t\t\t\t\tcolumns: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'source',\n\t\t\t\t\t\t\ttitle: '[3]Wiki',\n\t\t\t\t\t\t\ttype: 'url'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'symbol',\n\t\t\t\t\t\t\ttitle: '[1]Symbol',\n\t\t\t\t\t\t\tindex: 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'name',\n\t\t\t\t\t\t\ttitle: '[2]Name',\n\t\t\t\t\t\t\tindex: 2\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'number',\n\t\t\t\t\t\t\ttitle: '[0]Number',\n\t\t\t\t\t\t\tindex: 0\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [model]=\"gridModel\">\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'interaction-mode-detached',\n\t'Interaction with row is available using \"Alert\" button'\n];\n\n@Component({\n\tselector: 'example-interaction-mode-detached',\n\ttemplateUrl: 'example-interaction-mode-detached.component.html',\n\tstyleUrls: ['example-interaction-mode-detached.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleInteractionModeDetachedComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n\n\ttestDetached() {\n\t\talert(':-)');\n\t}\n}\n","<q-grid [caption]=\"title\"\n        interactionMode=\"detached\"\n        [rows]=\"rows | async\">\n        <q-grid-columns generation=\"deep\">\n                <q-grid-column key=\"test\"\n                               title=\"Test Detached\"\n                               [index]=\"0\"\n                               [canFilter]=\"false\"\n                               [canSort]=\"false\">\n                        <ng-template for=\"body\">\n                                <button mat-button\n                                        (click)=\"testDetached()\">\n                                        Alert\n                                </button>\n                        </ng-template>\n                </q-grid-column>\n        </q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'interaction-mode-readonly',\n\t'Interaction with row is available using \"Alert\" button'\n];\n\n@Component({\n\tselector: 'example-interaction-mode-readonly',\n\ttemplateUrl: 'example-interaction-mode-readonly.component.html',\n\tstyleUrls: ['example-interaction-mode-readonly.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleInteractionModeReadonlyComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n\n\ttestAttached() {\n\t\talert(':-)');\n\t}\n}\n","<q-grid [caption]=\"title\"\n        interactionMode=\"readonly\"\n        [rows]=\"rows | async\">\n        <q-grid-columns generation=\"deep\">\n                <q-grid-column key=\"test\"\n                               title=\"Test Detached\"\n                               [index]=\"0\">\n                        <ng-template for=\"body\">\n                                <button mat-button\n                                        (click)=\"testAttached()\">\n                                        Alert\n                                </button>\n                        </ng-template>\n                </q-grid-column>\n        </q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService } from '../data.service';\n\nconst EXAMPLE_TAGS = [\n\t'key-with-symbols',\n\t'Any row can be column key'\n];\n\n@Component({\n\tselector: 'example-key-with-symbols',\n\ttemplateUrl: 'example-key-with-symbols.component.html',\n\tstyleUrls: ['example-key-with-symbols.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleKeyWithSymbolsComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [{\n\t\t'key.With.Symbols': {\n\t\t\t'sub.Key.With.\".\"': 'sub-key with dot',\n\t\t\t'sub.Key.With.\"@\"': 'sub-key with \"@\"',\n\t\t\t'sub.Key.With.\",\"': 'sub-key with \",\"',\n\t\t\t'sub.Key.With.\"!\"': 'sub-key with \"!\"',\n\t\t\t'sub.Key.With.\"$\"': 'sub-key with \"$\"',\n\t\t\t'sub.Key.With.\"?\"': 'sub-key with \"?\"',\n\t\t\t'sub.Key.With.\"\\'\"': 'sub-key with \"\\'\"',\n\t\t\t'sub.Key.With.\"^\"': 'sub-key with \"^\"',\n\t\t\t'sub.Key.With.\";\"': 'sub-key with \";\"',\n\t\t\t'sub.Key.With.\"#\"': 'sub-key with \"#\"',\n\t\t\t'sub.Key.With.\"%\"': 'sub-key with \"%\"'\n\t\t}\n\t}];\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'layer-grid-blank',\n\t'Table is empty on startup and data can be loaded using \"Load data\" button'\n];\n\n@Component({\n\tselector: 'example-layer-grid-blank',\n\ttemplateUrl: 'example-layer-grid-blank.component.html',\n\tstyleUrls: ['example-layer-grid-blank.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleLayerGridBlankComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(private dataService: DataService) {\n\t}\n\n\tloadData() {\n\t\tthis.rows = this.dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-layer>\n\t\t<ng-template for=\"blank\">\n\t\t\t<div style=\"margin: 0 auto; top: 50%; width: 100px; position: relative;\">\n\t\t\t\t<button (click)=\"loadData()\"\n\t\t\t\t        mat-button>\n\t\t\t\t\tLoad Data\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</ng-template>\n\t</q-grid-layer>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'legend-grid-basic',\n\t'Table contains a legend to color indicators'\n];\n\n@Component({\n\tselector: 'example-legend-grid-basic',\n\ttemplateUrl: 'example-legend-grid-basic.component.html',\n\tstyleUrls: ['example-legend-grid-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleLegendGridBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column key=\"legend\"\n\t\t\t\t\t   type=\"row-indicator\"\n\t\t\t\t\t   [width]=\"50\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t\t\t\t let-$cell>\n\t\t\t\t<div class=\"q-grid-legend-item\"\n\t\t\t\t\t [ngClass]=$cell.row.phase></div>\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-legend>\n\t\t<ng-template for=\"content\">\n\t\t\t<ul class=\"q-grid-legend-list\">\n\t\t\t\t<li>\n\t\t\t\t\t<div class=\"q-grid-legend-item Gas\"></div>\n\t\t\t\t\tGas\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<div class=\"q-grid-legend-item Solid\"></div>\n\t\t\t\t\tSolid\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<div class=\"q-grid-legend-item Liquid\"></div>\n\t\t\t\t\tLiquid\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</ng-template>\n\t</q-grid-legend>\n</q-grid>","import { Component, ChangeDetectionStrategy, ChangeDetectorRef, ViewEncapsulation, OnDestroy } from '@angular/core';\nimport { DataService, Quote } from '../data.service';\nimport { of, Subject, timer } from 'rxjs';\nimport { repeat, switchMap, takeUntil } from 'rxjs/operators';\n\nconst EXAMPLE_TAGS = [\n\t'live-data-basic',\n\t'Table data updates in real time'\n];\n\n@Component({\n\tselector: 'example-live-data-basic',\n\ttemplateUrl: 'example-live-data-basic.component.html',\n\tstyleUrls: ['example-live-data-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class ExampleLiveDataBasicComponent implements OnDestroy {\n\tstatic tags = EXAMPLE_TAGS;\n\n\tprivate destroy$: Subject<void> = new Subject();\n\n\ttitle = EXAMPLE_TAGS[1];\n\trows: Quote[];\n\n\tconstructor(private dataService: DataService, private cd: ChangeDetectorRef) {\n\t\tthis.dataService.getQuotes().subscribe(quotes => {\n\t\t\tthis.rows = quotes;\n\t\t\tthis.cd.detectChanges();\n\n\t\t\tof(null).pipe(\n\t\t\t\ttakeUntil(this.destroy$),\n\t\t\t\tswitchMap(() => timer(this.random(300, 5000))), // calculates random delay time for every iteration\n\t\t\t\trepeat()\n\t\t\t).subscribe(() => {\n\t\t\t\t// rowIndices is a random length array of random row indices\n\t\t\t\tconst rowIndices = new Array(this.random(1, 3)).fill(0).map(() => this.random(0, this.rows.length - 1));\n\t\t\t\tconst uniqRowIndices = new Set(rowIndices);\n\n\t\t\t\tthis.updateQuotes(uniqRowIndices);\n\t\t\t});\n\t\t});\n\t}\n\n\tupdateQuotes(rowIndices: Set<number>) {\n\t\tconst rows = [ ...this.rows ];\n\n\t\tfor (const idx of rowIndices) {\n\t\t\tconst quote = rows[idx];\n\t\t\tconst rnd = this.random(-50000, 50000);\n\t\t\tquote.last += rnd;\n\t\t\tquote.ask += rnd;\n\t\t\tquote.ldn1 = this.randomTime(quote.ldn1);\n\t\t}\n\n\t\tthis.rows = rows;\n\t}\n\n\trandom(min: number, max: number): number {\n\t\treturn Math.floor(Math.random() * (max - min)) + min;\n\t}\n\n\trandomTime(time: string): string {\n\t\tif (time.indexOf(':') === -1) {\n\t\t\treturn time;\n\t\t}\n\t\treturn time.split(':').map((val, i) => {\n\t\t\tlet num = +val;\n\t\t\tif (i === 0) {\n\t\t\t\tnum += this.random(-5, 5);\n\t\t\t\tif (num > 23 || num < 0) {\n\t\t\t\t\tnum = Math.sqrt(Math.pow(num % 24, 2));\n\t\t\t\t}\n\t\t\t} else if (i === 1) {\n\t\t\t\tnum += this.random(-20, 20);\n\t\t\t\tif (num > 59 || num < 0) {\n\t\t\t\t\tnum = Math.sqrt(Math.pow(num % 60, 2));\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn num.toString().padStart(2, '0');\n\t\t}).join(':');\n\t}\n\n\tngOnDestroy() {\n\t\tthis.destroy$.next();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows\"\n\t\t[sortBy]=\"['-last']\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column key=\"metal\"\n\t\t\t\t\t   [width]=\"290\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"ldn1\"\n\t\t\t\t\t   title=\"LDN\"\n\t\t\t\t\t   [width]=\"120\">\n\t\t\t<ng-template for=\"change\"\n\t\t\t\t\t\t let-$cell>\n\t\t\t\t<q-grid-live-cell [cell]=\"$cell\"\n\t\t\t\t\t\t\t\t  [duration]=\"1500\">\n\t\t\t\t</q-grid-live-cell>\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"last\"\n\t\t\t\t\t   type=\"currency\"\n\t\t\t\t\t   [width]=\"240\">\n\t\t\t<ng-template for=\"change\"\n\t\t\t\t\t\t let-$cell>\n\t\t\t\t<q-grid-live-cell [cell]=\"$cell\"\n\t\t\t\t\t\t\t\t  [duration]=\"3000\">\n\t\t\t\t</q-grid-live-cell>\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"ask\"\n\t\t\t\t\t   [width]=\"180\">\n\t\t\t<ng-template for=\"change\"\n\t\t\t\t\t\t let-$cell>\n\t\t\t\t<q-grid-live-cell [cell]=\"$cell\"\n\t\t\t\t\t\t\t\t  [duration]=\"2000\">\n\t\t\t\t</q-grid-live-cell>\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"ldn2\"\n\t\t\t\t\t   title=\"LDN\"\n\t\t\t\t\t   [width]=\"100\">\n\t\t\t<ng-template for=\"change\"\n\t\t\t\t\t\t let-$cell>\n\t\t\t\t<q-grid-live-cell [cell]=\"$cell\"\n\t\t\t\t\t\t\t\t  [duration]=\"1500\">\n\t\t\t\t</q-grid-live-cell>\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"ldn3\"\n\t\t\t\t\t   title=\"LDN\"\n\t\t\t\t\t   [width]=\"70\"></q-grid-column>\n\t\t<q-grid-column key=\"high\"\n\t\t\t\t\t   [width]=\"100\"\n\t\t\t\t\t   type=\"currency\"></q-grid-column>\n\t\t<q-grid-column key=\"low\"\n\t\t\t\t\t   [width]=\"100\"\n\t\t\t\t\t   type=\"currency\"></q-grid-column>\n\t\t<q-grid-column key=\"volume\"\n\t\t\t\t\t   [width]=\"100\"\n\t\t\t\t\t   type=\"currency\"></q-grid-column>\n\t\t<q-grid-column key=\"settle\"\n\t\t\t\t\t   [width]=\"100\"\n\t\t\t\t\t   type=\"currency\"></q-grid-column>\n\t\t<q-grid-column key=\"ldn4\"\n\t\t\t\t\t   title=\"LDN\"\n\t\t\t\t\t   [width]=\"70\"></q-grid-column>\n\t</q-grid-columns>\n\t<q-grid-live-rows>\n\t</q-grid-live-rows>\n</q-grid>\n","import { Component, ChangeDetectionStrategy, ChangeDetectorRef, ViewEncapsulation, OnDestroy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'live-rows',\n\t'Grid actions are animated (e.g. row sorting)'\n];\n\n@Component({\n\tselector: 'example-live-rows-basic',\n\ttemplateUrl: 'example-live-rows-basic.component.html',\n\tstyleUrls: ['example-live-rows-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class ExampleLiveRowsBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(private dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\t<q-grid-live-rows>\n\t</q-grid-live-rows>\n</q-grid>\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-look-atoms-basic',\n\ttemplateUrl: 'example-look-atoms-basic.component.html',\n\tstyleUrls: ['example-look-atoms-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleLookAtomsBasicComponent {\n\tstatic id = 'look-atoms-basic';\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid caption=\"Look Atoms\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-look-atoms-customized',\n\ttemplateUrl: 'example-look-atoms-customized.component.html',\n\tstyleUrls: ['example-look-atoms-customized.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleLookAtomsCustomizedComponent {\n\tstatic id = 'look-atoms-customized';\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid caption=\"Look Atoms Customized\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column key=\"color\"\n\t\t               title=\"\"\n\t\t               type=\"row-indicator\"\n\t\t               [width]=\"50\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t             let-$cell>\n\t\t\t\t<div class=\"atom-color\"\n\t\t\t\t     [style.background-color]=\"'#' + $cell.value\">\n\t\t\t\t</div>\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"number\"\n\t\t               type=\"id\"\n\t\t               title=\"#\"\n\t\t               [width]=\"60\"\n\t\t               [canFilter]=\"false\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"symbol\"\n\t\t               [width]=\"80\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"source\"\n\t\t               type=\"url\"\n\t\t               [width]=\"100\"\n\t\t               label=\"wiki\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"summary\"\n\t\t               [width]=\"250\"\n\t\t               [viewWidth]=\"500\"\n\t\t               editor=\"text-area\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"discoveredIn\"\n\t\t               [width]=\"100\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ViewChild, AfterViewInit, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { Grid, GridModel } from 'ng2-qgrid';\n\n@Component({\n\tselector: 'example-look-atoms-id',\n\ttemplateUrl: 'example-look-atoms-id.component.html',\n\tstyleUrls: ['example-look-atoms-id.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleLookAtomsIdComponent implements AfterViewInit {\n\tstatic id = 'look-atoms-id';\n\n\trows: Observable<Atom[]>;\n\tgridModel: GridModel;\n\n\tconstructor(dataService: DataService,\n\t\tprivate qgrid: Grid\n\t) {\n\t\tthis.gridModel = qgrid.model();\n\t\tthis.rows = dataService.getAtoms();\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.gridModel.dataChanged.watch((e, off) => {\n\t\t\tif (e.hasChanges('columns')) {\n\t\t\t\tthis.gridModel.sort({\n\t\t\t\t\tby: ['number']\n\t\t\t\t});\n\n\t\t\t\toff();\n\t\t\t}\n\t\t});\n\t}\n}\n","<q-grid caption=\"Look Atoms Id\"\n        [rows]=\"rows | async\"\n        [model]=\"gridModel\">\n        <q-grid-columns generation=\"deep\">\n        </q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService } from '../data.service';\nimport { GridModel, Grid } from 'ng2-qgrid';\n\n@Component({\n\tselector: 'example-look-atoms-model',\n\ttemplateUrl: 'example-look-atoms-model.component.html',\n\tstyleUrls: ['example-look-atoms-model.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleLookAtomsModelComponent {\n\tstatic id = 'look-atoms-model';\n\n\tgridModel: GridModel;\n\n\tconstructor(dataService: DataService, qgrid: Grid) {\n\t\tthis.gridModel = qgrid.model();\n\n\t\tdataService\n\t\t\t.getAtoms()\n\t\t\t.subscribe(rows => this.gridModel.data({ rows }));\n\t}\n}\n","<q-grid caption=\"Look Atoms Model\"\n        [model]=\"gridModel\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-look-people-basic',\n\ttemplateUrl: 'example-look-people-basic.component.html',\n\tstyleUrls: ['example-look-people-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleLookPeopleBasicComponent {\n\tstatic id = 'look-people-basic';\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid caption=\"Look People Basic\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService } from '../data.service';\nimport { GridModel, Grid } from 'ng2-qgrid';\n\n@Component({\n\tselector: 'example-look-people-model',\n\ttemplateUrl: 'example-look-people-model.component.html',\n\tstyleUrls: ['example-look-people-model.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleLookPeopleModelComponent {\n\tstatic id = 'look-people-model';\n\n\tgridModel: GridModel = this.qgrid\n\t\t.model()\n\t\t.columnList({\n\t\t\tgeneration: 'deep'\n\t\t});\n\n\tconstructor(dataService: DataService, private qgrid: Grid) {\n\t\tdataService\n\t\t\t.getPeople()\n\t\t\t.subscribe(rows => this.gridModel.data({ rows }));\n\t}\n}\n","<q-grid caption=\"Look People Model\"\n\t\t[model]=\"gridModel\">\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Quote } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-look-quotes-basic',\n\ttemplateUrl: 'example-look-quotes-basic.component.html',\n\tstyleUrls: ['example-look-quotes-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleLookQuotesBasicComponent {\n\tstatic id = 'look-quotes-basic';\n\n\trows: Observable<Quote[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getQuotes();\n\t}\n}\n","<q-grid caption=\"Look Quotes Basic\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService } from '../data.service';\nimport { GridModel, Grid } from 'ng2-qgrid';\n\n@Component({\n\tselector: 'example-look-quotes-model',\n\ttemplateUrl: 'example-look-quotes-model.component.html',\n\tstyleUrls: ['example-look-quotes-model.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleLookQuotesModelComponent {\n\tstatic id = 'look-quotes-model';\n\n\tgridModel: GridModel;\n\n\tconstructor(dataService: DataService, qgrid: Grid) {\n\t\tthis.gridModel = qgrid.model();\n\n\t\tdataService\n\t\t\t.getQuotes()\n\t\t\t.subscribe(rows => this.gridModel.data({ rows }));\n\t}\n}\n","<q-grid caption=\"Look Quotes Model\"\n        [model]=\"gridModel\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'manipulate-data-basic',\n\t'Rows with edited cells are highlighted'\n];\n\n@Component({\n\tselector: 'example-manipulate-data-basic',\n\ttemplateUrl: 'example-manipulate-data-basic.component.html',\n\tstyleUrls: ['example-manipulate-data-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleManipulateDataBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column key=\"rowIndicator\"\n\t\t               type=\"row-indicator\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"rowOptions\"\n\t\t               type=\"row-options\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-data-manipulation>\n\t</q-grid-data-manipulation>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { GridModel, Grid } from 'ng2-qgrid';\nimport { map } from 'rxjs/operators';\n\nconst EXAMPLE_TAGS = [\n\t'master-details-basic',\n\t'Bottom table shows data, related to selected row from upper table'\n];\n\n@Component({\n\tselector: 'example-master-details-basic',\n\ttemplateUrl: 'example-master-details-basic.component.html',\n\tstyleUrls: ['example-master-details-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleMasterDetailsBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows$: Observable<Human[]>;\n\tdetailsRows$: Observable<Human[]>;\n\n\tgridModel: GridModel;\n\tlikes: string[] = [];\n\n\tconstructor(dataService: DataService, qgrid: Grid) {\n\t\tthis.gridModel = qgrid.model();\n\t\tthis.rows$ = dataService.getPeople();\n\n\t\tthis.gridModel\n\t\t\t.selectionChanged\n\t\t\t.watch(e => {\n\t\t\t\tif (e.hasChanges('items')) {\n\t\t\t\t\tconst { items } = e.state;\n\t\t\t\t\tif (items.length) {\n\t\t\t\t\t\tthis.likes = items[0].likes;\n\n\t\t\t\t\t\tthis.detailsRows$ = dataService\n\t\t\t\t\t\t\t.getPeople()\n\t\t\t\t\t\t\t.pipe(\n\t\t\t\t\t\t\t\tmap(people => people\n\t\t\t\t\t\t\t\t\t.filter(human => this.likes\n\t\t\t\t\t\t\t\t\t\t.every(like => human.likes.indexOf(like) >= 0)))\n\t\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n}\n","<div class=\"master-details\">\n\t<div>\n\t\t<q-grid [caption]=\"title\"\n\t\t\t\tselectionMode=\"single\"\n\t\t\t\tselectionUnit=\"row\"\n\t\t\t\t[model]=\"gridModel\"\n\t\t\t\t[rows]=\"rows$ | async\">\n\t\t\t<q-grid-columns generation=\"deep\">\n\t\t\t</q-grid-columns>\n\t\t</q-grid>\n\t</div>\n\n\t<div>\n\t\t<q-grid [rows]=\"detailsRows$ | async\">\n\t\t\t<q-grid-toolbar>\n\t\t\t\t<ng-template for=\"top\">\n\t\t\t\t\t<h3 class=\"mat-title\">\n\t\t\t\t\t\tPeople who likes:\n\t\t\t\t\t\t<mat-chip-list class=\"likes-list\">\n\t\t\t\t\t\t\t<mat-chip *ngFor=\"let like of likes\"\n\t\t\t\t\t\t\t\t\t  disabled=\"true\">\n\t\t\t\t\t\t\t\t{{like}}\n\t\t\t\t\t\t\t</mat-chip>\n\t\t\t\t\t\t</mat-chip-list>\n\t\t\t\t\t</h3>\n\t\t\t\t</ng-template>\n\t\t\t</q-grid-toolbar>\n\n\t\t\t<q-grid-columns generation=\"deep\">\n\t\t\t</q-grid-columns>\n\t\t</q-grid>\n\t</div>\n</div>","import {\n\tElementRef,\n\tViewChild,\n\tComponent,\n\tChangeDetectionStrategy,\n\tAfterViewInit,\n\tChangeDetectorRef\n} from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { Grid, GridModel } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = ['mouse-api-basic', 'Mouse api example'];\n\n@Component({\n\tselector: 'example-mouse-api-basic',\n\ttemplateUrl: 'example-mouse-api-basic.component.html',\n\tstyleUrls: ['example-mouse-api-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ExampleMouseApiBasicComponent implements AfterViewInit {\n\n\tstatic id = EXAMPLE_TAGS[0];\n\n\tlogEntries: Array<LogEntry> = [];\n\ttitle = EXAMPLE_TAGS[1];\n\trows: Observable<Human[]>;\n\tgridModel: GridModel;\n\n\tconstructor(\n\t\tdataService: DataService,\n\t\tprivate cdr: ChangeDetectorRef,\n\t\tprivate qgrid: Grid\n\t) {\n\t\tthis.gridModel = qgrid.model();\n\t\tthis.rows = dataService.getPeople();\n\t}\n\n\tngAfterViewInit(): void {\n\t\tthis.gridModel.mouseChanged.on(({ state }) => {\n\t\t\tconst { status, target, code } = state;\n\t\t\tlet targetString = '';\n\t\t\tif (target) {\n\t\t\t\tconst { columnIndex, rowIndex } = target;\n\t\t\t\ttargetString = `{ column: ${columnIndex}, row: ${rowIndex} }`;\n\t\t\t}\n\n\t\t\tthis.logEntries.unshift({\n\t\t\t\tstatus: status,\n\t\t\t\tcode: code,\n\t\t\t\ttarget: targetString\n\t\t\t});\n\n\t\t\tthis.cdr.detectChanges();\n\t\t});\n\t}\n}\n\nexport declare class LogEntry {\n\tstatus: string;\n\tcode: string;\n\ttarget: string;\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\"\n\t\t[model]=\"gridModel\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\t<q-grid-toolbar>\n\t\t<ng-template for=\"right\">\n\t\t\t<h2 class=\"mat-card-title\">Mouse event log</h2>\n\t\t\t<ul id=\"mouse-event-log\">\n\t\t\t\t<li *ngFor=\"let entry of logEntries\">\n\t\t\t\t\tstatus: {{entry.status}}\n\t\t\t\t\t<br>\n\t\t\t\t\tcode: {{entry.code}}\n\t\t\t\t\t<br>\n\t\t\t\t\ttarget: {{entry.target}}\n\t\t\t\t\t<hr>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</ng-template>\n\t</q-grid-toolbar>\n\t<q-grid-visibility [toolbarRight]=\"true\">\n\t</q-grid-visibility>\n</q-grid>","import { Component, ChangeDetectionStrategy, AfterViewInit, ViewChild } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { Grid, GridModel } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'on-push-basic',\n\t'On push change detection is enabled'\n];\n\n@Component({\n\tselector: 'example-on-push-basic',\n\ttemplateUrl: 'example-on-push-basic.component.html',\n\tstyleUrls: ['example-on-push-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleOnPushBasicComponent implements AfterViewInit {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\tgridModel: GridModel;\n\n\tconstructor(dataService: DataService,\n\t\tprivate qgrid: Grid\n\t) {\n\t\tthis.gridModel = qgrid.model();\n\t\tthis.rows = dataService.getAtoms();\n\t}\n\n\tngAfterViewInit() {\n\t\tsetTimeout(() => {\n\t\t\tconst { rows } = this.gridModel.data();\n\t\t\tif (rows.length) {\n\t\t\t\trows[0].number = rows[0].number + 1;\n\t\t\t}\n\t\t}, 1000);\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\"\n\t\t[model]=\"gridModel\"\n\t\teditMode=\"cell\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-row [canMove]=\"true\">\n\t</q-grid-row>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'pagination-basic',\n\t'Data is divided into pages, pages can be changed using navigation buttons in the bottom part of the table'\n];\n\n@Component({\n\tselector: 'example-pagination-basic',\n\ttemplateUrl: 'example-pagination-basic.component.html',\n\tstyleUrls: ['example-pagination-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExamplePaginationBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-pager [size]=\"10\"\n\t\t\t\t  [sizeList]=\"[5, 10, 20]\"\n\t\t\t\t  mode=\"showRows\">\n\t</q-grid-pager>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'pane-basic',\n\t'Pane for each row can be opened by clicking on the corresponding row'\n];\n\n@Component({\n\tselector: 'example-pane-basic',\n\ttemplateUrl: 'example-pane-basic.component.html',\n\tstyleUrls: ['example-pane-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExamplePaneBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows$: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows$ = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows$ | async\"\n\t\tselectionMode=\"singleOnly\"\n\t\tselectionUnit=\"row\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column type=\"select\"\n\t\t\t\t\t   [isVisible]=\"false\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-pane trigger=\"selection.items\">\n\t\t<ng-template for=\"right\"\n\t\t\t\t\t let-$pane\n\t\t\t\t\t let-$items=\"value\">\n\t\t\t<div style=\"width: 300px;\">\n\t\t\t\t<button mat-icon-button\n\t\t\t\t\t\tstyle=\"float: right;\"\n\t\t\t\t\t\t(click)=\"$pane.close('right')\">\n\t\t\t\t\t<mat-icon>close</mat-icon>\n\t\t\t\t</button>\n\n\t\t\t\t<h2>\n\t\t\t\t\t{{$items[0]?.name.last}}, {{$items[0]?.name.first}}\n\t\t\t\t</h2>\n\t\t\t</div>\n\t\t</ng-template>\n\t</q-grid-pane>\n</q-grid>","import { AfterViewInit, ChangeDetectionStrategy, Component, ViewChild } from '@angular/core';\nimport { Command, Grid, GridModel, PaneComponent } from 'ng2-qgrid';\nimport { Observable } from 'rxjs';\nimport { DataService, Human } from '../data.service';\n\nconst EXAMPLE_TAGS = [\n\t'pane-trigger',\n\t'Pane for selected row can be opened by clicking on the triangle button'\n];\n\n@Component({\n\tselector: 'example-pane-trigger',\n\ttemplateUrl: 'example-pane-trigger.component.html',\n\tstyleUrls: ['example-pane-trigger.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExamplePaneTriggerComponent implements AfterViewInit {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\t@ViewChild(PaneComponent) pane: PaneComponent;\n\n\trows$: Observable<Human[]>;\n\tgridModel: GridModel;\n\tselectedRow: Human;\n\n\topenPane = new Command({\n\t\texecute: () => this.pane.open('right'),\n\t\tcanExecute: () => !!this.selectedRow,\n\t});\n\n\tconstructor(dataService: DataService,\n\t\tprivate qgrid: Grid\n\t) {\n\t\tthis.rows$ = dataService.getPeople();\n\t\tthis.gridModel = qgrid.model();\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.gridModel.selectionChanged.watch(e => {\n\t\t\tif (e.hasChanges('items')) {\n\t\t\t\tthis.selectedRow = e.state.items[0];\n\t\t\t\tthis.openPane.canExecuteCheck.next();\n\t\t\t}\n\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows$ | async\"\n\t\t[model]=\"gridModel\"\n\t\tselectionUnit=\"row\"\n\t\tclass=\"q-grid-compact\">\n\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-actions>\n\t\t<q-grid-action icon=\"details\"\n\t\t\t\t\t   title=\"Open Pane\"\n\t\t\t\t\t   [command]=\"openPane\">\n\t\t</q-grid-action>\n\t</q-grid-actions>\n\n\t<q-grid-pane>\n\t\t<ng-template for=\"right\"\n\t\t\t\t\t let-$pane\n\t\t\t\t\t let-$cell=\"cell\">\n\t\t\t<div style=\"width: 300px;\">\n\t\t\t\t<button mat-icon-button\n\t\t\t\t\t\tstyle=\"float: right;\"\n\t\t\t\t\t\t(click)=\"$pane.close('right')\">\n\t\t\t\t\t<mat-icon>close</mat-icon>\n\t\t\t\t</button>\n\n\t\t\t\t<h2>\n\t\t\t\t\t{{selectedRow?.name.last}}, {{selectedRow?.name.first}}\n\t\t\t\t</h2>\n\t\t\t</div>\n\t\t</ng-template>\n\t</q-grid-pane>\n</q-grid>","import { Component, ChangeDetectionStrategy, AfterViewInit, ViewChild } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Grid, GridModel, PaneComponent } from 'ng2-qgrid';\nimport { DataService, Atom } from '../data.service';\n\nconst EXAMPLE_TAGS = [\n\t'pane-with-selection',\n\t'Pane for each row can be opened by clicking on the corresponding row. Also you can select rows on left selection column'\n];\n\n@Component({\n\tselector: 'example-pane-with-selection-mode',\n\ttemplateUrl: 'example-pane-with-selection-mode.component.html',\n\tstyleUrls: ['example-pane-with-selection-mode.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExamplePaneWithSelectionComponent implements AfterViewInit {\n\n\tconstructor(dataService: DataService,\n\t\tprivate qgrid: Grid\n\t) {\n\t\tthis.rows$ = dataService.getAtoms();\n\t\tthis.gridModel = qgrid.model();\n\t}\n\n\tstatic tags = EXAMPLE_TAGS;\n\n\t@ViewChild(PaneComponent) pane: PaneComponent;\n\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows$: Observable<Atom[]>;\n\tgridModel: GridModel;\n\n\tngAfterViewInit(): void {\n\t\tthis.gridModel.mouseChanged.on(({ state }) => {\n\t\t\tconst { code, status, target } = state;\n\t\t\tif (code === 'left' && status === 'down') {\n\t\t\t\tif (target && target.column.type !== 'select') {\n\t\t\t\t\tthis.pane.open('right', target.row);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows$ | async\"\n\t\t[model]=\"gridModel\"\n\t\tselectionUnit=\"row\"\n\t\tselectionMode=\"multiple\"\n\t\tselectionArea=\"custom\">\n\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-pane>\n\t\t<ng-template for=\"right\"\n\t\t\t\t\t let-$pane\n\t\t\t\t\t let-$item=\"value\">\n\t\t\t<div style=\"width: 300px; display: flex;\">\n\t\t\t\t<h2>Discovered By: {{ $item?.discoveredBy }}</h2>\n\t\t\t\t<button mat-icon-button\n\t\t\t\t\t\t(click)=\"$pane.close('right')\">\n\t\t\t\t\t<mat-icon>close</mat-icon>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</ng-template>\n\t</q-grid-pane>\n\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'persistence-basic',\n\t'Settings can be saved in save/load menu (history button in the top toolbar)'\n];\n\n@Component({\n\tselector: 'example-persistence-basic',\n\ttemplateUrl: 'example-persistence-basic.component.html',\n\tstyleUrls: ['example-persistence-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExamplePersistenceBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        id=\"persistence-basic\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-persistence>\n\t</q-grid-persistence>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { PersistenceStorage } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'persistence-on-state-change',\n\t'Grid state is saved on model change'\n];\n\n@Component({\n\tselector: 'example-persistence-on-state-change',\n\ttemplateUrl: 'example-persistence-on-state-change.component.html',\n\tstyleUrls: ['example-persistence-on-state-change.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExamplePersistenceOnStateChangeComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows$: Observable<Atom[]>;\n\n\tstorage = new PersistenceStorage(sessionStorage);\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows$ = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows$ | async\"\n\t\tid=\"persistence-on-state-change\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-persistence schedule=\"onStateChange\"\n\t\t\t\t\t\t[storage]=\"storage\">\n\t</q-grid-persistence>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { GridModel, Grid, PersistenceStorage } from 'ng2-qgrid';\n\nimport { DataService, Atom } from '../data.service';\n\nconst EXAMPLE_TAGS = [\n\t'persistence-server',\n\t'Settings are stored on server and can be saved/loaded in the save/load menu'\n];\n\n@Component({\n\tselector: 'example-persistence-server',\n\ttemplateUrl: 'example-persistence-server.component.html',\n\tstyleUrls: ['example-persistence-server.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExamplePersistenceServerComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\tgridModel: GridModel;\n\trows: Observable<Atom[]>;\n\tcurrentUser = 'user1';\n\tusers: Observable<string[]>;\n\n\tconstructor(private dataService: DataService, private qgrid: Grid) {\n\t\tthis.rows = dataService.getAtoms();\n\t\tthis.users = dataService.getUsers();\n\t\tthis.gridModel = this.qgrid.model();\n\t\tthis.gridModel.persistence({\n\t\t\tstorage: this.storage\n\t\t});\n\t}\n\n\tget storage(): PersistenceStorage {\n\t\treturn {\n\t\t\tgetItem: id => {\n\t\t\t\treturn new Promise(resolve => {\n\t\t\t\t\tthis.dataService\n\t\t\t\t\t\t.getAtomPresets(id, this.currentUser)\n\t\t\t\t\t\t.subscribe(resolve);\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetItem: (id, items) => {\n\t\t\t\treturn new Promise(resolve => {\n\t\t\t\t\tthis.dataService\n\t\t\t\t\t\t.setAtomPresets(id, this.currentUser, items)\n\t\t\t\t\t\t.subscribe(resolve);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        [model]=\"gridModel\"\n        id=\"persistence-server\">\n\t<q-grid-toolbar>\n\t\t<ng-template for=\"top\">\n\t\t\t<div class=\"persistence-server-toolbar\">\n\t\t\t\t<mat-form-field>\n\t\t\t\t\t<mat-select [(value)]=\"currentUser\"\n\t\t\t\t\t            placeholder=\"Select user\">\n\t\t\t\t\t\t<mat-option *ngFor=\"let user of users | async\"\n\t\t\t\t\t\t            [value]=\"user\">{{user}}</mat-option>\n\t\t\t\t\t</mat-select>\n\t\t\t\t</mat-form-field>\n\t\t\t\t<q-grid-action-bar>\n\t\t\t\t</q-grid-action-bar>\n\t\t\t</div>\n\t\t</ng-template>\n\t</q-grid-toolbar>\n\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-persistence>\n\t</q-grid-persistence>\n</q-grid>\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService } from '../data.service';\n\n\nconst EXAMPLE_TAGS = [\n\t'persistence-with-sync-get-data',\n\t'Persistence plugin when rows are defined in sync manner'\n];\n\n@Component({\n\tselector: 'example-persistence-with-sync-get-data',\n\ttemplateUrl: 'example-persistence-with-sync-get-data.component.html',\n\tstyleUrls: ['example-persistence-with-sync-get-data.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExamplePersistenceWithSyncGetDataComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows = [\n\t\t{ column1: 1, column2: 'a' },\n\t\t{ column1: 2, column2: 'b' }\n\t];\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows\"\n        id=\"persistence-sync-get-data\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-persistence>\n\t</q-grid-persistence>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'pin-column-basic',\n\t'Some column are pinned and not interactable'\n];\n\n@Component({\n\tselector: 'example-pin-column-basic',\n\ttemplateUrl: 'example-pin-column-basic.component.html',\n\tstyleUrls: ['example-pin-column-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExamplePinColumnBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column key=\"number\"\n\t\t               pin=\"left\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"period\"\n\t\t               pin=\"right\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"radius\"\n\t\t               pin=\"right\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, NgZone, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService } from '../data.service';\nimport { GridModel, Grid, PipeContext } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'pipe-grid-basic',\n\t'Custom pipe demonstration'\n];\n\n@Component({\n\tselector: 'example-pipe-grid-basic',\n\ttemplateUrl: 'example-pipe-grid-basic.component.html',\n\tstyleUrls: ['example-pipe-grid-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExamplePipeGridBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\tgridModel: GridModel;\n\n\tconstructor(dataService: DataService, qgrid: Grid, zone: NgZone) {\n\t\tthis.gridModel = qgrid.model();\n\n\t\tconst myDataPipe =\n\t\t\t(rows: any[], context: PipeContext, next: (data: any[]) => void) => {\n\t\t\t\tzone.runOutsideAngular(() =>\n\t\t\t\t\tsetTimeout(() =>\n\t\t\t\t\t\t\tdataService\n\t\t\t\t\t\t\t\t.getAtoms()\n\t\t\t\t\t\t\t\t.subscribe(next)\n\t\t\t\t\t\t, 1000)\n\t\t\t\t);\n\t\t\t};\n\n\t\tthis.gridModel.data({\n\t\t\tpipe: [myDataPipe].concat(qgrid.pipeUnit.view as any[])\n\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [model]=\"gridModel\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-visibility [toolbarBottom]=\"false\">\t\t\n\t</q-grid-visibility>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'pivot-column-basic',\n\t'Different implementations of pivot columns'\n];\n\n@Component({\n\tselector: 'example-pivot-column-basic',\n\ttemplateUrl: 'example-pivot-column-basic.component.html',\n\tstyleUrls: ['example-pivot-column-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExamplePivotColumnBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        [pivotBy]=\"['bondingType', 'groupBlock']\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"name\"\n\t\t               [width]=\"90\"\n\t\t               title=\"Name\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"bondingType\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"groupBlock\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'pivot-column-cohort',\n\t'Different implementations of pivot columns'\n];\n\n@Component({\n\tselector: 'example-pivot-column-cohort',\n\ttemplateUrl: 'example-pivot-column-cohort.component.html',\n\tstyleUrls: ['example-pivot-column-cohort.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExamplePivotColumnCohortComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        [pivotBy]=\"['bondingType', 'groupBlock']\">\n\t<q-grid-columns>\n\t\t<q-grid-column title=\"Name\">\n\t\t\t<q-grid-column key=\"number\"\n\t\t\t               title=\"Number\">\n\t\t\t</q-grid-column>\n\t\t\t<q-grid-column key=\"symbol\"\n\t\t\t               title=\"Symbol\">\n\t\t\t</q-grid-column>\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"bondingType\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"groupBlock\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'pivot-column-group',\n\t'Different implementations of pivot columns'\n];\n\n@Component({\n\tselector: 'example-pivot-column-group',\n\ttemplateUrl: 'example-pivot-column-group.component.html',\n\tstyleUrls: ['example-pivot-column-group.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExamplePivotColumnGroupComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n\t[pivotBy]=\"['discoveredIn']\"\n\t[groupBy]=\"['bondingType', 'groupBlock']\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"name\"\n\t\t               [width]=\"90\"\n\t\t               title=\"Name\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"bondingType\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"groupBlock\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"discoveredIn\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'pivot-column-template',\n\t'Different implementations of pivot columns'\n];\n\n@Component({\n\tselector: 'example-pivot-column-template',\n\ttemplateUrl: 'example-pivot-column-template.component.html',\n\tstyleUrls: ['example-pivot-column-template.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExamplePivotColumnTemplateComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        [pivotBy]=\"['bondingType', 'groupBlock']\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"name\"\n\t\t               [width]=\"90\"\n\t\t               title=\"Name\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"bondingType\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"groupBlock\">\n\t\t</q-grid-column>\n\t\t<q-grid-column type=\"pivot\">\n\t\t\t<ng-template for=\"body\"\n\t\t\t             let-$cell\n\t\t\t             let-$view=\"$view\">\n\t\t\t\t<div *ngIf=\"$cell.value\"\n\t\t\t\t     [style.color]=\"'#' + $cell.row.color\"\n\t\t\t\t     style=\"font-weight: bold;background: #ddd;\">\n\t\t\t\t\tX\n\t\t\t\t</div>\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'plugin-grid-basic',\n\t'Pages can be changed using bottom custom buttons'\n];\n\n@Component({\n\tselector: 'example-plugin-grid-basic',\n\ttemplateUrl: 'example-plugin-grid-basic.component.html',\n\tstyleUrls: ['example-plugin-grid-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExamplePluginGridBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-toolbar>\n\t\t<ng-template for=\"bottom\">\n\t\t\t<example-plugin-my-pager>\n\t\t\t</example-plugin-my-pager>\n\t\t</ng-template>\n\t</q-grid-toolbar>\n</q-grid>","import { Component, ChangeDetectionStrategy, OnInit, ChangeDetectorRef } from '@angular/core';\nimport { GridPlugin, Command } from 'ng2-qgrid';\n\n@Component({\n\tselector: 'example-plugin-my-pager',\n\ttemplateUrl: 'example-plugin-my-pager.component.html',\n\tstyleUrls: ['example-plugin-my-pager.component.scss'],\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExamplePluginMyPagerComponent implements OnInit {\n\tgoto = new Command({\n\t\texecute: page => this.currentPage = page,\n\t\tcanExecute: page => page >= 0 && page < this.numberOfPages\n\t});\n\n\tgotoNext = new Command({\n\t\texecute: () => this.currentPage = this.currentPage + 1,\n\t\tcanExecute: () => this.currentPage < this.numberOfPages - 1,\n\t\tshortcut: 'ctrl+right'\n\t});\n\n\tgotoPrev = new Command({\n\t\texecute: () => this.currentPage = this.currentPage - 1,\n\t\tcanExecute: () => this.currentPage > 0,\n\t\tshortcut: 'ctrl+left'\n\t});\n\n\tconstructor(private plugin: GridPlugin, private cd: ChangeDetectorRef) {\n\t}\n\n\tngOnInit() {\n\t\tconst { shortcut, manager } = this.model.action();\n\t\tshortcut.register(manager, [\n\t\t\tthis.gotoNext,\n\t\t\tthis.gotoPrev\n\t\t]);\n\n\t\t// If onPush is used, need to trigger change detection manually.\n\t\tthis.model.paginationChanged.on(() => this.cd.detectChanges());\n\t}\n\n\tget pages() {\n\t\treturn Array.from(Array(this.numberOfPages).keys());\n\t}\n\n\tget currentPage() {\n\t\treturn this.model.pagination().current;\n\t}\n\n\tset currentPage(value) {\n\t\tthis.model.pagination({ current: value });\n\t}\n\n\tprivate get numberOfPages() {\n\t\tconst { count, size } = this.model.pagination();\n\t\treturn Math.max(1, Math.ceil(count / size));\n\t}\n\n\tprivate get model() {\n\t\treturn this.plugin.model;\n\t}\n}\n","<ul>\n\t<li *ngFor=\"let page of pages\">\n\t\t<button mat-raised-button\n\t\t        [color]=\"page === currentPage && 'primary'\"\n\t\t        (click)=\"goto.execute(page)\">\n\t\t\t{{page + 1}}\n\t\t</button>\n\t</li>\n</ul>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService } from '../data.service';\n\nconst EXAMPLE_TAGS = [\n\t'rest-api-basic',\n\t'REST-plugin demonstration. All actions are performed on server side'\n];\n\n@Component({\n\tselector: 'example-rest-api-basic',\n\ttemplateUrl: 'example-rest-api-basic.component.html',\n\tstyleUrls: ['example-rest-api-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleRestApiBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n}\n","<q-grid [caption]=\"title\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-rest url=\"http://localhost:4200/assets/atoms/118.json\"\n\t\t\t\t method=\"get\">\n\t</q-grid-rest>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService } from '../data.service';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-sample-orders',\n\ttemplateUrl: 'example-sample-orders.component.html',\n\tstyleUrls: ['example-sample-orders.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSampleOrdersComponent {\n\tstatic id = 'sample-orders';\n\n\trows$: Observable<any> = this.http.get<any[]>('assets/samples/orders.json');\n\n\tconstructor(private http: HttpClient) {\n\t}\n}\n","<q-grid caption=\"Sample Orders\"\n        [rows]=\"rows$ | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-scroll-virtual-basic',\n\ttemplateUrl: 'example-scroll-virtual-basic.component.html',\n\tstyleUrls: ['example-scroll-virtual-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleScrollVirtualBasicComponent {\n\tstatic id = 'scroll-virtual-basic';\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople(100000);\n\t}\n}\n","<q-grid caption=\"Scroll Virtual Basic\"\n        scrollMode=\"virtual\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column type=\"row-number\"\n\t\t               key=\"rowNumber\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\t<q-grid-pager [size]=\"20\">\n\t</q-grid-pager>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-scroll-virtual-details',\n\ttemplateUrl: 'example-scroll-virtual-details.component.html',\n\tstyleUrls: ['example-scroll-virtual-details.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleScrollVirtualDetailsComponent {\n\tstatic id = 'scroll-virtual-details';\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid caption=\"Scroll Virtual Details\"\n        scrollMode=\"virtual\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column key=\"number\"\n\t\t               type=\"id\"\n\t\t               title=\"#\"\n\t\t               [width]=\"70\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"symbol\"\n\t\t               title=\"Symbol\"\n\t\t               [width]=\"90\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"name\"\n\t\t               title=\"Name\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"source\"\n\t\t               title=\"Source\"\n\t\t               type=\"url\"\n\t\t               [width]=\"300\">\n\t\t</q-grid-column>\n\t\t<q-grid-column *ngFor=\"let key of ['color', 'appearance', 'groupBlock', 'bondingType', 'period', 'radius', 'boil', 'shells', 'melt']\"\n\t\t               [key]=key\n\t\t               [isVisible]=\"false\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\n\t<q-grid-pager [size]=\"20\">\n\t</q-grid-pager>\n\n\t<q-grid-row unit=\"details\"\n\t            mode=\"single\">\n\n\t\t<ng-template for=\"details\"\n\t\t             let-$cell>\n\n\t\t\t<div class=\"atom-details\">\n\t\t\t\t<div class=\"atom-box\"\n\t\t\t\t     [style.background-color]=\"'#' + $cell.row.item.color\">\n\t\t\t\t\t<div class=\"atom-number\">\n\t\t\t\t\t\t{{$cell.row.item.number}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-symbol\">\n\t\t\t\t\t\t{{$cell.row.item.symbol}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-name\">\n\t\t\t\t\t\t{{$cell.row.item.name}}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"atom-mass\">\n\t\t\t\t\t\t{{$cell.row.item.mass}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"atom-info\">\n\t\t\t\t\t<p class=\"atom-description\">\n\t\t\t\t\t\t<a href={{$cell.row.item.source}}\n\t\t\t\t\t\t   target=\"_blank\">{{$cell.row.item.name}}</a>\n\t\t\t\t\t\twas discovered by\n\t\t\t\t\t\t<a href=\"http://www.google.com/search?q={{$cell.row.item.discoveredBy}}\"\n\t\t\t\t\t\t   target=\"_blank\">{{$cell.row.item.discoveredBy}}</a>\n\t\t\t\t\t\tin\n\t\t\t\t\t\t<em>{{$cell.row.item.discoveredIn}}</em>. {{$cell.row.item.summary}}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t</ng-template>\n\t</q-grid-row>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-scroll-virtual-drag',\n\ttemplateUrl: 'example-scroll-virtual-drag.component.html',\n\tstyleUrls: ['example-scroll-virtual-drag.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleScrollVirtualDragComponent {\n\tstatic id = 'scroll-virtual-drag';\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid caption=\"Scroll Virtual Drag\"\n        scrollMode=\"virtual\"\n        [rows]=\"rows | async\">\n        <q-grid-columns generation=\"deep\">\n        </q-grid-columns>\n\n        <q-grid-pager [size]=\"20\">\n        </q-grid-pager>\n\n        <q-grid-row [canMove]=\"true\"></q-grid-row>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-scroll-virtual-edit',\n\ttemplateUrl: 'example-scroll-virtual-edit.component.html',\n\tstyleUrls: ['example-scroll-virtual-edit.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleScrollVirtualEditComponent {\n\tstatic id = 'scroll-virtual-edit';\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid caption=\"Scroll Virtual Edit\"\n        scrollMode=\"virtual\"\n        [rows]=\"rows | async\"\n        editMethod=\"batch\">\n    <q-grid-columns generation=\"deep\">\n        <q-grid-column key=\"rowIndicator\"\n                       type=\"row-indicator\">\n        </q-grid-column>\n        <q-grid-column key=\"rowOptions\"\n                       type=\"row-options\">\n        </q-grid-column>\n    </q-grid-columns>\n\n    <q-grid-data-manipulation>\n    </q-grid-data-manipulation>\n\n    <q-grid-pager [size]=\"20\">\n    </q-grid-pager>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-scroll-virtual-group',\n\ttemplateUrl: 'example-scroll-virtual-group.component.html',\n\tstyleUrls: ['example-scroll-virtual-group.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleScrollVirtualGroupComponent {\n\tstatic id = 'scroll-virtual-group';\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid caption=\"Scroll Virtual Group\"\n        scrollMode=\"virtual\"\n        [rows]=\"rows | async\"\n        [groupBy]=\"['bondingType', 'groupBlock']\">\n        <q-grid-columns generation=\"deep\">\n        </q-grid-columns>\n\n        <q-grid-pager [size]=\"20\">\n        </q-grid-pager>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-scroll-virtual-height',\n\ttemplateUrl: 'example-scroll-virtual-height.component.html',\n\tstyleUrls: ['example-scroll-virtual-height.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleScrollVirtualHeightComponent {\n\tstatic id = 'scroll-virtual-height';\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople(100000);\n\t}\n}\n","<q-grid caption=\"Scroll Virtual Height\"\n        scrollMode=\"virtual\"\n        [rows]=\"rows | async\">\n        <q-grid-columns generation=\"deep\">\n                <q-grid-column type=\"row-number\"\n                               key=\"rowNumber\">\n                </q-grid-column>\n        </q-grid-columns>\n\n        <q-grid-row [height]=\"48\"></q-grid-row>\n\n        <q-grid-pager [size]=\"20\">\n        </q-grid-pager>\n</q-grid>","import { Component, ViewChild, AfterViewInit, ChangeDetectionStrategy } from '@angular/core';\nimport { Atom, DataService } from '../data.service';\nimport { Grid, GridModel } from 'ng2-qgrid';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-scroll-virtual-infinite',\n\ttemplateUrl: 'example-scroll-virtual-infinite.component.html',\n\tstyleUrls: ['example-scroll-virtual-infinite.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleScrollVirtualInfiniteComponent implements AfterViewInit {\n\tstatic id = 'scroll-virtual-infinite';\n\n\trows: Observable<Atom[]>;\n\tgridModel: GridModel;\n\n\tconstructor(private dataService: DataService,\n\t\tprivate qgrid: Grid\n\t) {\n\t\tthis.gridModel = qgrid.model();\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.gridModel.data({\n\t\t\tpipe: [\n\t\t\t\t(rows, context, next) => {\n\t\t\t\t\tconst { skip } = this.gridModel.fetch();\n\t\t\t\t\tconst { size } = this.gridModel.pagination();\n\n\t\t\t\t\tthis.dataService\n\t\t\t\t\t\t.getAtoms()\n\t\t\t\t\t\t.subscribe(atoms => {\n\t\t\t\t\t\t\tconst newPage = atoms.slice(skip, skip + size);\n\t\t\t\t\t\t\tnext(rows.concat(newPage));\n\t\t\t\t\t\t});\n\n\t\t\t\t}].concat(this.qgrid.pipeUnit.view)\n\t\t});\n\t}\n}\n","<q-grid caption=\"Scroll Virtual Infinite\"\n        scrollMode=\"virtual\"\n        [rows]=\"rows | async\"\n        [model]=\"gridModel\">\n        <q-grid-columns generation=\"deep\">\n        </q-grid-columns>\n\n        <q-grid-pager [size]=\"20\">\n        </q-grid-pager>\n</q-grid>","<h4>\n    <button (click)=\"reset()\">Reset</button>\n    <span>Position: {{context.container.position}}</span>\n    <span>CurrentPage: {{context.container.currentPage}}</span>\n    <span>Count: {{context.container.count}}</span>\n</h4>\n\n<div q-grid-vscroll>\n    <ul [q-grid-vscroll-port-y]=\"context\">\n        <li *ngFor=\"let item of items | qGridVscroll$: context | async; let $index = index; trackBy: context.id\"\n            [q-grid-vscroll-row]=\"$index\">\n            {{item}}\n        </li>\n    </ul>\n</div>","import { Component, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { VscrollContext, VscrollService } from 'ng2-qgrid';\n\n@Component({\n\tselector: 'example-scroll-virtual-list-infinite',\n\ttemplateUrl: 'example-scroll-virtual-list-infinite.component.html',\n\tstyleUrls: ['example-scroll-virtual-list-infinite.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleScrollVirtualListInfiniteComponent {\n\tstatic id = 'scroll-virtual-list-infinite';\n\n\tcontext = this.vscroll.context({\n\t\tthreshold: 50,\n\t\tfetch: (skip, take, d) => {\n\t\t\tconst length = skip + take;\n\t\t\tconst data = Array.from(Array(length).keys());\n\t\t\tconst wnd = data.slice(skip, length);\n\n\t\t\tthis.items.push(...wnd);\n\t\t\td.resolve(length + take);\n\t\t}\n\t});\n\n\titems = [];\n\n\tconstructor(private vscroll: VscrollService) {\n\t}\n\n\treset() {\n\t\tthis.items = [];\n\t\tthis.context.container.reset();\n\t}\n}\n","<h4>\n    <button (click)=\"reset()\">Reset</button>\n    <button (click)=\"addItems(50)\">Add 50 items</button>\n    <button (click)=\"removeItems(50)\">Remove 50 items</button>\n    <button (click)=\"clear()\">Clear</button>\n    <span>Position: {{context.container.position}}</span>\n    <span>CurrentPage: {{context.container.currentPage}}</span>\n    <span>Count: {{context.container.count}}</span>\n</h4>\n\n<div q-grid-vscroll>\n    <ul [q-grid-vscroll-port-y]=\"context\">\n        <li *ngFor=\"let item of items | qGridVscroll$: context | async; let $index = index; trackBy: context.id\"\n            [q-grid-vscroll-row]=\"$index\">\n            {{item}}\n        </li>\n    </ul>\n</div>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { VscrollService } from 'ng2-qgrid';\n\n@Component({\n\tselector: 'example-scroll-virtual-list',\n\ttemplateUrl: 'example-scroll-virtual-list.component.html',\n\tstyleUrls: ['example-scroll-virtual-list.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleScrollVirtualListComponent {\n\tstatic id = 'scroll-virtual-list';\n\n\tcontext = this.vscroll.context({ threshold: 50 });\n\titems = Array.from(Array(100).keys());\n\n\tconstructor(private vscroll: VscrollService) {\n\t}\n\n\treset() {\n\t\tthis.context.container.reset();\n\t}\n\n\taddItems(count: number) {\n\t\tconst newItems = Array.from(Array(count).keys()).map(x => x + this.items.length);\n\t\tthis.items = this.items.concat(newItems);\n\t}\n\n\tremoveItems(count: number) {\n\t\tthis.items = this.items.slice(0, Math.max(0, this.items.length - count));\n\t}\n\n\tclear() {\n\t\tthis.items = [];\n\t}\n}\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-scroll-virtual-selection',\n\ttemplateUrl: 'example-scroll-virtual-selection.component.html',\n\tstyleUrls: ['example-scroll-virtual-selection.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleScrollVirtualSelectionComponent {\n\tstatic id = 'scroll-virtual-selection';\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid caption=\"Scroll Virtual Selection\"\n        scrollMode=\"virtual\"\n        [rows]=\"rows | async\"\n        selectionUnit=\"mix\"\n        selectionMode=\"range\">\n        <q-grid-columns generation=\"deep\">\n                <q-grid-column type=\"select\" key=\"select\"></q-grid-column>\n        </q-grid-columns>\n\n        <q-grid-pager [size]=\"20\">\n        </q-grid-pager>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { Column, StyleCellContext } from 'ng2-qgrid';\n\n@Component({\n\tselector: 'example-scroll-virtual-style',\n\ttemplateUrl: 'example-scroll-virtual-style.component.html',\n\tstyleUrls: ['example-scroll-virtual-style.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleScrollVirtualStyleComponent {\n\tstatic id = 'scroll-virtual-style';\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n\n\tstyleCell(row: Human, column: Column, ctx: StyleCellContext) {\n\t\tif (column.key === 'gender') {\n\t\t\tctx.class(row.gender, { color: row.gender === 'female' ? 'red' : 'blue' });\n\t\t}\n\t}\n}\n","<q-grid caption=\"Scroll Virtual Style\"\n        scrollMode=\"virtual\"\n        [styleCell]=\"styleCell\"\n        [rows]=\"rows | async\">\n        <q-grid-columns generation=\"deep\">\n                <q-grid-column type=\"row-number\"\n                               [width]=\"100\"\n                               key=\"number\">\n                </q-grid-column>\n        </q-grid-columns>\n\n        <q-grid-row [height]=\"48\"></q-grid-row>\n\n        <q-grid-pager [size]=\"16\">\n        </q-grid-pager>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-select-cell-basic',\n\ttemplateUrl: 'example-select-cell-basic.component.html',\n\tstyleUrls: ['example-select-cell-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSelectCellBasicComponent {\n\tstatic id = 'select-cell-basic';\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid caption=\"Select Cell Range by Mouse Drag\"\n        [rows]=\"rows | async\"\n        selectionUnit=\"cell\"\n        selectionMode=\"range\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'select-column-basic',\n\t'Column can be selected by clicking on any cell in it'\n];\n\n@Component({\n\tselector: 'example-select-column-basic',\n\ttemplateUrl: 'example-select-column-basic.component.html',\n\tstyleUrls: ['example-select-column-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSelectColumnBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        selectionUnit=\"column\"\n        selectionMode=\"multiple\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'select-mix-basic',\n\t'Cells can be selected and deselected by clicking on them'\n];\n\n@Component({\n\tselector: 'example-select-mix-basic',\n\ttemplateUrl: 'example-select-mix-basic.component.html',\n\tstyleUrls: ['example-select-mix-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSelectMixBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        selectionUnit=\"mix\"\n        selectionMode=\"multiple\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'select-row-basic',\n\t'Rows can be selected using checkboxes. Multiple rows can be selected in the same time'\n];\n\n@Component({\n\tselector: 'example-select-row-basic',\n\ttemplateUrl: 'example-select-row-basic.component.html',\n\tstyleUrls: ['example-select-row-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSelectRowBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        selectionUnit=\"row\"\n        selectionMode=\"multiple\"\n        selectionArea=\"body\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy, AfterViewInit, ViewChild } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { Grid, GridModel, Command } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'select-row-command',\n\t'Rows can be selected using checkboxes. Only one row can be selected in the same time'\n];\n\n@Component({\n\tselector: 'example-select-row-command',\n\ttemplateUrl: 'example-select-row-command.component.html',\n\tstyleUrls: ['example-select-row-command.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSelectRowCommandComponent implements AfterViewInit {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows$: Observable<Human[]> = this.dataService.getPeople();\n\tgridModel: GridModel;\n\n\tselectAll = new Command({\n\t\texecute: () => {\n\t\t\tthis.gridModel.selection({\n\t\t\t\titems: this.gridModel.scene().rows\n\t\t\t});\n\t\t}\n\t});\n\n\tunselectAll = new Command({\n\t\texecute: () => {\n\t\t\tthis.gridModel.selection({\n\t\t\t\titems: []\n\t\t\t});\n\t\t}\n\t});\n\n\treloadData = new Command({\n\t\texecute: () => {\n\t\t}\n\t});\n\n\tselectionToggle = new Command({\n\t\tcanExecute: e => {\n\t\t\treturn e.items[0] !== this.gridModel.selection().items[0];\n\t\t}\n\t});\n\n\tconstructor(private dataService: DataService,\n\t\tprivate qgrid: Grid\n\t) {\n\t\tthis.gridModel = qgrid.model();\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.gridModel.selection({\n\t\t\ttoggle: this.selectionToggle\n\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows$ | async\"\n        [model]=\"gridModel\"\n        selectionUnit=\"row\"\n        selectionMode=\"single\">\n        <q-grid-columns generation=\"deep\">\n        </q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy, ViewChild, AfterViewInit } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\nimport { Grid, GridModel, Command } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'select-row-disable',\n\t'Rows can be selected using checkboxes. Some rows are disabled'\n];\n\n@Component({\n\tselector: 'example-select-row-disable',\n\ttemplateUrl: 'example-select-row-disable.component.html',\n\tstyleUrls: ['example-select-row-disable.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSelectRowDisableComponent implements AfterViewInit {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Human[]>;\n\tgridModel: GridModel;\n\n\tconstructor(dataService: DataService,\n\t\tprivate qgrid: Grid\n\t) {\n\t\tthis.rows = dataService.getPeople();\n\t\tthis.gridModel = qgrid.model();\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.gridModel.selection({\n\t\t\ttoggle: new Command({\n\t\t\t\tcanExecute: ({ items }) => items.length === 1 && items[0].gender === 'male'\n\t\t\t})\n\t\t});\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        [model]=\"gridModel\"\n        selectionUnit=\"row\"\n        selectionMode=\"multiple\"\n        selectionArea=\"body\">\n        <q-grid-columns generation=\"deep\">\n        </q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-select-row-edit',\n\ttemplateUrl: 'example-select-row-edit.component.html',\n\tstyleUrls: ['example-select-row-edit.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSelectRowEditComponent {\n\tstatic id = 'select-row-edit';\n\n\trows$: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows$ = dataService.getPeople();\n\t}\n}\n","<q-grid caption=\"Select Row Basic\"\n        [rows]=\"rows$ | async\"\n        selectionUnit=\"row\"\n        selectionMode=\"multiple\"\n        selectionArea=\"body\"\n        editMode=\"cell\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { Grid } from 'ng2-qgrid';\nimport { Observable } from 'rxjs';\nimport { DataService, Human } from '../data.service';\n\n@Component({\n\tselector: 'example-select-row-basic',\n\ttemplateUrl: 'example-select-row-range.component.html',\n\tstyleUrls: ['example-select-row-range.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSelectRowRangeComponent {\n\tstatic id = 'select-row-range';\n\n\tgridModel = this.qgrid.model();\n\trows$: Observable<Human[]> = this.dataService.getPeople();\n\n\tconstructor(\n\t\tprivate dataService: DataService,\n\t\tprivate qgrid: Grid\n\t) {\n\t}\n}\n","<q-grid caption=\"Select Row Range by Mouse Drag\"\n        [model]=\"gridModel\"\n        [rows]=\"rows$ | async\"\n        selectionUnit=\"row\"\n        selectionMode=\"range\">\n  <q-grid-columns generation=\"deep\">\n  </q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-select-row-single-only',\n\ttemplateUrl: 'example-select-row-single-only.component.html',\n\tstyleUrls: ['example-select-row-single-only.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSelectRowSingleOnlyComponent {\n\tstatic id = 'select-row-single-only';\n\n\trows$: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows$ = dataService.getAtoms();\n\t}\n}\n","\n<q-grid caption=\"Select Row Single Only\"\n        [rows]=\"rows$ | async\"\n        class=\"q-grid-compact\"\n        selectionUnit=\"row\"\n        selectionMode=\"singleOnly\">\n    <q-grid-columns generation=\"deep\">\n    </q-grid-columns>\n</q-grid>\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'select-row-single',\n\t'Rows can be selected using checkboxes. Only one row can be selected in the same time'\n];\n\n@Component({\n\tselector: 'example-select-row-single',\n\ttemplateUrl: 'example-select-row-single.component.html',\n\tstyleUrls: ['example-select-row-single.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSelectRowSingleComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        selectionUnit=\"row\"\n        selectionMode=\"single\">\n    <q-grid-columns generation=\"deep\">\n    </q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'size-column-absolute',\n\t'Columns have absolute width'\n];\n\n@Component({\n\tselector: 'example-size-column-absolute',\n\ttemplateUrl: 'example-size-column-absolute.component.html',\n\tstyleUrls: ['example-size-column-absolute.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSizeColumnAbsoluteComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\">\n        <q-grid-columns>\n                <q-grid-column title=\"Width 120px\"\n                               key=\"number\"\n                               [width]=\"120\">\n                </q-grid-column>\n                <q-grid-column title=\"Width 15%\"\n                               key=\"symbol\"\n                               width=\"25%\"\n                               widthMode=\"absolute\">\n                </q-grid-column>\n                <q-grid-column title=\"Width 35%\"\n                               key=\"name\"\n                               width=\"35%\"\n                               widthMode=\"absolute\">\n                </q-grid-column>\n                <q-grid-column title=\"Width 50%\"\n                               key=\"appearance\"\n                               width=\"50%\"\n                               widthMode=\"absolute\">\n                </q-grid-column>\n        </q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-size-column-basic',\n\ttemplateUrl: 'example-size-column-basic.component.html',\n\tstyleUrls: ['example-size-column-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSizeColumnBasicComponent {\n\tstatic id = 'size-column-basic';\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid caption=\"Size Column Basic\"\n        [rows]=\"rows | async\">\n        <q-grid-columns>\n                <q-grid-column title=\"Width 120px\"\n                               key=\"number\"\n                               [width]=\"120\">\n                </q-grid-column>\n                <q-grid-column title=\"Width 15%\"\n                               key=\"symbol\"\n                               width=\"15%\">\n                </q-grid-column>\n                <q-grid-column title=\"Width 35%\"\n                               key=\"name\"\n                               width=\"35%\">\n                </q-grid-column>\n                <q-grid-column title=\"Width 50% and a lot of the text after the width definition in the title\"\n                               key=\"appearance\"\n                               width=\"50%\">\n                </q-grid-column>\n        </q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'size-column-fit-head',\n\t'Columns have fit head width'\n];\n\n@Component({\n\tselector: 'example-size-column-fit-head',\n\ttemplateUrl: 'example-size-column-fit-head.component.html',\n\tstyleUrls: ['example-size-column-fit-head.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSizeColumnFitHeadComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\">\n        <q-grid-columns>\n                <q-grid-column title=\"N.\"\n                               key=\"number\"\n                               widthMode=\"fit-head\">\n                </q-grid-column>\n                <q-grid-column title=\"Symbol\"\n                               key=\"symbol\"\n                               widthMode=\"fit-head\">\n                </q-grid-column>\n                <q-grid-column title=\"Name\"\n                               key=\"name\"\n                               widthMode=\"fit-head\">\n                </q-grid-column>\n                <q-grid-column title=\"Appearance\"\n                               key=\"appearance\"\n                               widthMode=\"fit-head\">\n                </q-grid-column>\n        </q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'size-column-full',\n\t'Columns are full page width'\n];\n\n@Component({\n\tselector: 'example-size-column-full',\n\ttemplateUrl: 'example-size-column-full.component.html',\n\tstyleUrls: ['example-size-column-full.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSizeColumnFullComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns>\n\t\t<q-grid-column title=\"Width 100%\"\n\t\t\t\t\t   key=\"appearance\"\n\t\t\t\t\t   width=\"100%\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'size-column-pin',\n\t'Some columns are pinned'\n];\n\n@Component({\n\tselector: 'example-size-column-pin',\n\ttemplateUrl: 'example-size-column-pin.component.html',\n\tstyleUrls: ['example-size-column-pin.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSizeColumnPinComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns>\n\t\t<q-grid-column title=\"Width 100%\"\n\t\t\t\t\t   key=\"appearance\"\n\t\t\t\t\t   width=\"100%\">\n\t\t</q-grid-column>\n\t\t<q-grid-column title=\"Pin Right\"\n\t\t\t\t\t   key=\"symbol\"\n\t\t\t\t\t   pin=\"right\"\n\t\t\t\t\t   [width]=\"80\">\n\t\t</q-grid-column>\n\t\t<q-grid-column title=\"Pin Left\"\n\t\t\t\t\t   key=\"number\"\n\t\t\t\t\t   pin=\"left\"\n\t\t\t\t\t   [width]=\"120\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-size-row-basic',\n\ttemplateUrl: 'example-size-row-basic.component.html',\n\tstyleUrls: ['example-size-row-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSizeRowBasicComponent {\n\tstatic id = 'size-row-basic';\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid caption=\"Size Row Basic\"\n        [rows]=\"rows | async\">\n        <q-grid-columns generation=\"deep\">\n        </q-grid-columns>\n\n        <q-grid-row [canResize]=\"true\" [minHeight]=\"48\"></q-grid-row>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'sort-row-basic',\n\t'Rows are sorted by default'\n];\n\n@Component({\n\tselector: 'example-sort-row-basic',\n\ttemplateUrl: 'example-sort-row-basic.component.html',\n\tstyleUrls: ['example-sort-row-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSortRowBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        [sortBy]=\"['+gender', '-name.last']\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'sort-row-mixed',\n\t'Rows are multiple sorted by press Shift key'\n];\n\n@Component({\n\tselector: 'example-sort-row-mixed',\n\ttemplateUrl: 'example-sort-row-mixed.component.html',\n\tstyleUrls: ['example-sort-row-mixed.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSortRowMixedComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\"\n        sortMode=\"mixed\">\n\t<q-grid-columns generation=\"deep\"></q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { DataService, Atom } from '../data.service';\nimport { StyleCellContext, Column } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'style-cell-basic',\n\t'Some cells have custom style'\n];\n\n@Component({\n\tselector: 'example-style-cell-basic',\n\ttemplateUrl: 'example-style-cell-basic.component.html',\n\tstyleUrls: ['example-style-cell-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleStyleCellBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n\n\tstyleCell(row: Atom, column: Column, context: StyleCellContext) {\n\t\tif (column.key === 'symbol') {\n\t\t\tcontext.class(row.symbol, {\n\t\t\t\t'color': `#${row.color}`,\n\t\t\t\t'background': '#3f51b5'\n\t\t\t});\n\t\t}\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t[rows]=\"rows | async\"\n\t[styleCell]=\"styleCell\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { DataService, Atom } from '../data.service';\nimport { StyleRowContext } from 'ng2-qgrid';\n\nconst EXAMPLE_TAGS = [\n\t'style-row-basic',\n\t'Rows have custom style'\n];\n\n@Component({\n\tselector: 'example-style-row-basic',\n\ttemplateUrl: 'example-style-row-basic.component.html',\n\tstyleUrls: ['example-style-row-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleStyleRowBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n\n\tstyleRow(row: Atom, context: StyleRowContext) {\n\t\tcontext.class(row.symbol, { 'background-color': `#${row.color}` });\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t[rows]=\"rows | async\"\n\t[styleRow]=\"styleRow\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\nconst EXAMPLE_TAGS = [\n\t'summary-column-aggregation',\n\t'Some columns have summary under the column'\n];\n\n@Component({\n\tselector: 'example-summary-column-aggregation',\n\ttemplateUrl: 'example-summary-column-aggregation.component.html',\n\tstyleUrls: ['example-summary-column-aggregation.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSummaryColumnAggregationComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n        [rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column key=\"name\"\n\t\t               aggregation=\"first\">\n\t\t\t<ng-template for=\"foot\"\n\t\t\t             let-$cell>\n\t\t\t\tNAME FIRST: {{$cell.value}}\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"symbol\"\n\t\t               aggregation=\"last\">\n\t\t\t<ng-template for=\"foot\"\n\t\t\t             let-$cell>\n\t\t\t\tSYMBOL LAST: {{$cell.value}}\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"number\"\n\t\t               aggregation=\"count\">\n\t\t\t<ng-template for=\"foot\"\n\t\t\t             let-$cell>\n\t\t\t\tNUMBER COUNT: {{$cell.value}}\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"phase\"\n\t\t               aggregation=\"join\"\n\t\t               [aggregationOptions]=\"{separator: '+', distinct: true}\">\n\t\t\t<ng-template for=\"foot\"\n\t\t\t             let-$cell>\n\t\t\t\tPHASE JOIN: {{$cell.value}}\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"boil\"\n\t\t               aggregation=\"max\">\n\t\t\t<ng-template for=\"foot\"\n\t\t\t             let-$cell>\n\t\t\t\tBOIL MAX: {{$cell.value}}\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"melt\"\n\t\t               aggregation=\"min\">\n\t\t\t<ng-template for=\"foot\"\n\t\t\t             let-$cell>\n\t\t\t\tMELT MIN: {{$cell.value}}\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"radius\"\n\t\t               aggregation=\"minMax\">\n\t\t\t<ng-template for=\"foot\"\n\t\t\t             let-$cell>\n\t\t\t\tRADIUS MINMAX: {{$cell.value}}\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"mass\"\n\t\t               aggregation=\"sum\">\n\t\t\t<ng-template for=\"foot\"\n\t\t\t             let-$cell>\n\t\t\t\tMASS SUM: {{$cell.value}}\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"density\"\n\t\t               aggregation=\"avg\">\n\t\t\t<ng-template for=\"foot\"\n\t\t\t             let-$cell>\n\t\t\t\tDENSITY AVG: {{$cell.value}}\n\t\t\t</ng-template>\n\n\t\t</q-grid-column>\n\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-summary-column-basic',\n\ttemplateUrl: 'example-summary-column-basic.component.html',\n\tstyleUrls: ['example-summary-column-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleSummaryColumnBasicComponent {\n\tstatic id = 'summary-column-basic';\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid caption=\"Summary Column Basic\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t\t<q-grid-column key=\"phase\"\n\t\t\t\t\t   title=\"Phase\">\n\t\t\t<ng-template for=\"foot\">\n\t\t\t\tgas | liquid | solid\n\t\t\t</ng-template>\n\t\t</q-grid-column>\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Human } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-theme-grid-dark',\n\ttemplateUrl: 'example-theme-grid-dark.component.html',\n\tstyleUrls: ['example-theme-grid-dark.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleThemeGridDarkComponent {\n\tstatic id = 'theme-grid-dark';\n\n\trows: Observable<Human[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getPeople();\n\t}\n}\n","<q-grid caption=\"Theme Grid Material/Dark\"\n\t\tclass=\"q-grid-dark\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { DataService, Atom } from '../data.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n\tselector: 'example-theme-grid-embed',\n\ttemplateUrl: 'example-theme-grid-embed.component.html',\n\tstyleUrls: ['example-theme-grid-embed.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleThemeGridEmbedComponent {\n\tstatic id = 'theme-grid-embed';\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid caption=\"Theme Grid Material\\Compact\"\n        [rows]=\"rows | async\"\n        class=\"q-grid-compact\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { ChangeDetectionStrategy, Component, ViewChild } from '@angular/core';\nimport { GridComponent } from 'ng2-qgrid';\nimport { Observable } from 'rxjs';\nimport { Atom, DataService } from '../data.service';\n\nconst EXAMPLE_TAGS = [\n\t'validation-basic',\n\t'Cell inputs have validation rules applied'\n];\n\n@Component({\n\tselector: 'example-validation-basic',\n\ttemplateUrl: 'example-validation-basic.component.html',\n\tstyleUrls: ['example-validation-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleValidationBasicComponent {\n\tstatic tags = EXAMPLE_TAGS;\n\ttitle = EXAMPLE_TAGS[1];\n\n\t@ViewChild(GridComponent, { static: true }) myGrid: GridComponent;\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid [caption]=\"title\"\n\t\t[rows]=\"rows | async\"\n\t\teditMode=\"cell\">\n\t<q-grid-columns>\n\t\t<q-grid-column key=\"number\"\n\t\t\t\t\t   title=\"Required\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"name\"\n\t\t\t\t\t   title=\"Length from 3 to 40\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"phase\"\n\t\t\t\t\t   title=\"One of ['Gas', 'Solid']\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"color\"\n\t\t\t\t\t   title=\"Pattern\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"summary\"\n\t\t\t\t\t   title=\"Length > 5\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"radius\"\n\t\t\t\t\t   title=\"Positive integer\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"period\"\n\t\t\t\t\t   title=\"Positive integer with length equal to 1\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"mass\"\n\t\t\t\t\t   title=\"Positive decimal\">\n\t\t</q-grid-column>\n\t\t<q-grid-column key=\"source\"\n\t\t\t\t\t   title=\"Url\">\n\t\t</q-grid-column>\n\t</q-grid-columns>\n\t<q-grid-validation>\n\t\t<q-grid-rule for=\"cell\"\n\t\t\t\t\t key=\"number\"\n\t\t\t\t\t required>\n\t\t</q-grid-rule>\n\t\t<q-grid-rule for=\"cell\"\n\t\t\t\t\t key=\"name\"\n\t\t\t\t\t required\n\t\t\t\t\t [lengthBetween]=\"[3, 40]\">\n\t\t</q-grid-rule>\n\t\t<q-grid-rule for=\"cell\"\n\t\t\t\t\t key=\"phase\"\n\t\t\t\t\t required\n\t\t\t\t\t [oneOf]=\"['Gas', 'Solid']\">\n\t\t</q-grid-rule>\n\t\t<q-grid-rule for=\"cell\"\n\t\t\t\t\t key=\"color\"\n\t\t\t\t\t pattern=\"^[\\da-fA-F]{6}$\">\n\t\t</q-grid-rule>\n\t\t<q-grid-rule for=\"cell\"\n\t\t\t\t\t key=\"summary\"\n\t\t\t\t\t required\n\t\t\t\t\t [minLength]=\"5\">\n\t\t</q-grid-rule>\n\t\t<q-grid-rule for=\"cell\"\n\t\t\t\t\t key=\"period\"\n\t\t\t\t\t required\n\t\t\t\t\t positiveInteger\n\t\t\t\t\t [lengthEqual]=\"1\">\n\t\t</q-grid-rule>\n\t\t<q-grid-rule for=\"cell\"\n\t\t\t\t\t key=\"radius\"\n\t\t\t\t\t required\n\t\t\t\t\t positiveInteger>\n\t\t</q-grid-rule>\n\t\t<q-grid-rule for=\"cell\"\n\t\t\t\t\t key=\"mass\"\n\t\t\t\t\t positiveDecimal>\n\t\t</q-grid-rule>\n\t\t<q-grid-rule for=\"cell\"\n\t\t\t\t\t key=\"source\"\n\t\t\t\t\t url>\n\t\t</q-grid-rule>\n\t</q-grid-validation>\n\n</q-grid>\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Atom, DataService } from '../data.service';\n\n@Component({\n\tselector: 'example-visibility-basic',\n\ttemplateUrl: 'example-visibility-basic.component.html',\n\tstyleUrls: ['example-visibility-basic.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleVisibilityBasicComponent {\n\tstatic id = 'visibility-basic';\n\n\trows: Observable<Atom[]>;\n\n\tconstructor(dataService: DataService) {\n\t\tthis.rows = dataService.getAtoms();\n\t}\n}\n","<q-grid caption=\"Visibility Basic\"\n\t\t[rows]=\"rows | async\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n\n\t<q-grid-visibility [foot]=\"false\"\n\t\t\t\t\t   [head]=\"false\"\n\t\t\t\t\t   [toolbarBottom]=\"false\"\n\t\t\t\t\t   [toolbarTop]=\"false\">\n\t</q-grid-visibility>\n</q-grid>","import { AfterViewInit, ChangeDetectionStrategy, Component } from '@angular/core';\nimport { Grid, GridModel } from 'ng2-qgrid';\nimport { Observable } from 'rxjs';\nimport { Atom, DataService } from '../data.service';\n\n@Component({\n\tselector: 'example-visibility-model',\n\ttemplateUrl: 'example-visibility-model.component.html',\n\tstyleUrls: ['example-visibility-model.component.scss'],\n\tproviders: [DataService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExampleVisibilityStateComponent implements AfterViewInit {\n\tstatic id = 'visibility-model';\n\n\trows: Observable<Atom[]>;\n\tgridModel: GridModel;\n\n\tconstructor(dataService: DataService,\n\t\tprivate qgrid: Grid\n\t) {\n\t\tthis.rows = dataService.getAtoms();\n\t\tthis.gridModel = qgrid.model();\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.gridModel.visibility({\n\t\t\ttoolbar: {\n\t\t\t\tbottom: false,\n\t\t\t\tleft: false,\n\t\t\t\tright: false,\n\t\t\t\ttop: false\n\t\t\t}\n\t\t});\n\t}\n}\n","<q-grid caption=\"Visibility Basic\"\n\t\t[rows]=\"rows | async\"\n\t\t[model]=\"gridModel\">\n\t<q-grid-columns generation=\"deep\">\n\t</q-grid-columns>\n</q-grid>","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\n\nif (environment.production) {\n\tenableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n\t.catch(err => console.error(err));\n","class Action {\n\tconstructor(command, title, icon, templateUrl) {\n\t\tthis.command = command;\n\n\t\tthis.title = title;\n\t\tthis.icon = icon;\n\t\tthis.templateUrl = templateUrl;\n\t}\n}\n\nclass CommandManager {\n\tconstructor(apply = f => f(), context) {\n\t\tthis.apply = apply;\n\t\tthis.context = context;\n\t}\n\n\tinvoke(commands, context) {\n\t\tcontext = context || this.context;\n\t\tif (commands.length) {\n\n\t\t\tconst priorityCommands = Array.from(commands);\n\t\t\tpriorityCommands.sort((x, y) => y.priority - x.priority);\n\n\t\t\tthis.apply(() => {\n\t\t\t\tfor (const cmd of priorityCommands) {\n\t\t\t\t\tif (context) {\n\t\t\t\t\t\tif (cmd.execute(context) === false) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (cmd.execute() === false) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfilter(commands) {\n\t\treturn commands.filter(cmd => cmd.sink = cmd.canExecute());\n\t}\n}\n\nclass Resource {\n\tconstructor(data = {}, scope = {}) {\n\t\tthis.data = data;\n\t\tthis.scope = scope;\n\t}\n}\n\nconst controlSet = new Set([\n\t'shift',\n\t'ctrl',\n\t'alt',\n\t'pause',\n\t'break',\n\t'capslock',\n\t'escape',\n\t'insert',\n\t'left',\n\t'right',\n\t'end',\n\t'home',\n\t'pageup',\n\t'pagedown',\n\t'up',\n\t'down',\n\t'f1',\n\t'f2',\n\t'f3',\n\t'f4',\n\t'f5',\n\t'f6',\n\t'f7',\n\t'f8',\n\t'f9',\n\t'f10',\n\t'f11',\n\t'f12',\n\t'numlock',\n\t'scrolllock'\n]);\n\nconst nonPrintableSet = new Set([\n\t'enter'\n]);\n\nconst codeMap = new Map()\n\t.set(8, 'backspace')\n\t.set(9, 'tab')\n\t.set(13, 'enter')\n\t.set(16, 'shift')\n\t.set(17, 'ctrl')\n\t.set(18, 'alt')\n\t.set(20, 'capslock')\n\t.set(27, 'escape')\n\t.set(32, 'space')\n\t.set(33, 'pageup')\n\t.set(34, 'pagedown')\n\t.set(35, 'end')\n\t.set(36, 'home')\n\t.set(37, 'left')\n\t.set(38, 'up')\n\t.set(39, 'right')\n\t.set(40, 'down')\n\t.set(45, 'insert')\n\t.set(46, 'delete')\n\t.set(96, 'numpad0')\n\t.set(97, 'numpad1')\n\t.set(98, 'numpad2')\n\t.set(99, 'numpad3')\n\t.set(100, 'numpad4')\n\t.set(101, 'numpad5')\n\t.set(102, 'numpad6')\n\t.set(103, 'numpad7')\n\t.set(104, 'numpad8')\n\t.set(105, 'numpad9')\n\t.set(112, 'f1')\n\t.set(113, 'f2')\n\t.set(114, 'f3')\n\t.set(115, 'f4')\n\t.set(116, 'f5')\n\t.set(117, 'f6')\n\t.set(118, 'f7')\n\t.set(119, 'f8')\n\t.set(120, 'f9')\n\t.set(121, 'f10')\n\t.set(122, 'f11')\n\t.set(123, 'f12')\n\t.set(144, 'numlock')\n\t.set(145, 'scrolllock');\n\nconst codeSet = new Set(codeMap.values());\n\nconst printableMap = new Map()\n\t.set('space', ' ');\n\nclass Keyboard {\n\tstatic isPrintable(code) {\n\t\treturn !nonPrintableSet.has(code) && !Keyboard.isControl(code);\n\t}\n\n\tstatic isControl(code) {\n\t\treturn controlSet.has(code);\n\t}\n\n\tstatic stringify(code, key) {\n\t\tif (codeSet.has(code)) {\n\t\t\treturn printableMap.get(code) || '';\n\t\t}\n\n\t\treturn key;\n\t}\n\n\tstatic translate(code) {\n\t\treturn codeMap.get(code) || String.fromCharCode(code);\n\t}\n}\n\nclass Shortcut {\n\tconstructor(dispatcher) {\n\t\tthis.dispatcher = dispatcher;\n\t\tthis.keyCode = {\n\t\t\tkey: null,\n\t\t\tcode: null\n\t\t};\n\t}\n\n\tstatic isControl(keyCode) {\n\t\tif (!keyCode) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst code = keyCode.code;\n\t\tconst parts = code.split('+');\n\t\treturn parts.some(part => part === 'ctrl' || part === 'alt') ||\n\t\t\tparts.every(part => Keyboard.isControl(part));\n\t}\n\n\tstatic isPrintable(keyCode) {\n\t\tif (!keyCode) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst code = keyCode.code;\n\t\tconst parts = code.split('+');\n\t\treturn parts.some(part => Keyboard.isPrintable(part));\n\t}\n\n\tstatic stringify(keyCode) {\n\t\tif (!keyCode) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Keyboard.stringify(keyCode.code, keyCode.key);\n\t}\n\n\tstatic translate(e) {\n\t\tconst codes = [];\n\t\tconst code = Keyboard.translate(e.keyCode).toLowerCase();\n\t\tif (e.ctrlKey) {\n\t\t\tcodes.push('ctrl');\n\t\t}\n\n\t\tif (e.shiftKey) {\n\t\t\tcodes.push('shift');\n\t\t}\n\n\t\tif (e.altKey) {\n\t\t\tcodes.push('alt');\n\t\t}\n\n\t\tif (code !== 'ctrl' &&\n\t\t\tcode !== 'shift' &&\n\t\t\tcode !== 'alt') {\n\t\t\tcodes.push(code);\n\t\t}\n\n\t\treturn codes.join('+');\n\t}\n\n\tfactory(manager) {\n\t\tconst self = this;\n\t\treturn {\n\t\t\tregister: commands => self.register(manager, commands)\n\t\t};\n\t}\n\n\tkeyDown(e, source) {\n\t\tconst code = Shortcut.translate(e);\n\t\tthis.keyCode = {\n\t\t\tkey: e.key,\n\t\t\tcode: code\n\t\t};\n\n\t\treturn this.dispatcher.execute(code, source);\n\t}\n\n\tregister(manager, commands) {\n\t\treturn this.dispatcher.register(manager, commands);\n\t}\n}\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nvar freeGlobal$1 = freeGlobal;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal$1 || freeSelf || Function('return this')();\n\nvar root$1 = root;\n\n/** Built-in value references. */\nvar Symbol = root$1.Symbol;\n\nvar Symbol$1 = Symbol;\n\n/** Used for built-in method references. */\nvar objectProto$e = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$c = objectProto$e.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString$1 = objectProto$e.toString;\n\n/** Built-in value references. */\nvar symToStringTag$1 = Symbol$1 ? Symbol$1.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty$c.call(value, symToStringTag$1),\n      tag = value[symToStringTag$1];\n\n  try {\n    value[symToStringTag$1] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString$1.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag$1] = tag;\n    } else {\n      delete value[symToStringTag$1];\n    }\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar objectProto$d = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto$d.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol$1 ? Symbol$1.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag$2 = '[object Function]',\n    genTag$1 = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag$2 || tag == genTag$1 || tag == asyncTag || tag == proxyTag;\n}\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root$1['__core-js_shared__'];\n\nvar coreJsData$1 = coreJsData;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData$1 && coreJsData$1.keys && coreJsData$1.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/** Used for built-in method references. */\nvar funcProto$1 = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString$1 = funcProto$1.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString$1.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto$c = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$b = objectProto$c.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty$b).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue$2(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue$2(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nvar defineProperty$1 = defineProperty;\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty$1) {\n    defineProperty$1(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/** Used for built-in method references. */\nvar objectProto$b = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$a = objectProto$b.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty$a.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity$1(value) {\n  return value;\n}\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax$1 = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax$1(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax$1(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty$1 ? identity$1 : function(func, string) {\n  return defineProperty$1(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nvar baseSetToString$1 = baseSetToString;\n\n/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString$1);\n\nvar setToString$1 = setToString;\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString$1(overRest(func, start, identity$1), func + '');\n}\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER$1 = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER$1;\n}\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/** `Object#toString` result references. */\nvar argsTag$3 = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag$3;\n}\n\n/** Used for built-in method references. */\nvar objectProto$a = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$9 = objectProto$a.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable$1 = objectProto$a.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty$9.call(value, 'callee') &&\n    !propertyIsEnumerable$1.call(value, 'callee');\n};\n\nvar isArguments$1 = isArguments;\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nvar isArray$1 = isArray;\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\n/** Detect free variable `exports`. */\nvar freeExports$2 = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule$2 = freeExports$2 && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports$2 = freeModule$2 && freeModule$2.exports === freeExports$2;\n\n/** Built-in value references. */\nvar Buffer$1 = moduleExports$2 ? root$1.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer$1 ? Buffer$1.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nvar isBuffer$1 = isBuffer;\n\n/** `Object#toString` result references. */\nvar argsTag$2 = '[object Arguments]',\n    arrayTag$2 = '[object Array]',\n    boolTag$4 = '[object Boolean]',\n    dateTag$4 = '[object Date]',\n    errorTag$2 = '[object Error]',\n    funcTag$1 = '[object Function]',\n    mapTag$5 = '[object Map]',\n    numberTag$4 = '[object Number]',\n    objectTag$3 = '[object Object]',\n    regexpTag$3 = '[object RegExp]',\n    setTag$5 = '[object Set]',\n    stringTag$4 = '[object String]',\n    weakMapTag$2 = '[object WeakMap]';\n\nvar arrayBufferTag$3 = '[object ArrayBuffer]',\n    dataViewTag$4 = '[object DataView]',\n    float32Tag$2 = '[object Float32Array]',\n    float64Tag$2 = '[object Float64Array]',\n    int8Tag$2 = '[object Int8Array]',\n    int16Tag$2 = '[object Int16Array]',\n    int32Tag$2 = '[object Int32Array]',\n    uint8Tag$2 = '[object Uint8Array]',\n    uint8ClampedTag$2 = '[object Uint8ClampedArray]',\n    uint16Tag$2 = '[object Uint16Array]',\n    uint32Tag$2 = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag$2] = typedArrayTags[float64Tag$2] =\ntypedArrayTags[int8Tag$2] = typedArrayTags[int16Tag$2] =\ntypedArrayTags[int32Tag$2] = typedArrayTags[uint8Tag$2] =\ntypedArrayTags[uint8ClampedTag$2] = typedArrayTags[uint16Tag$2] =\ntypedArrayTags[uint32Tag$2] = true;\ntypedArrayTags[argsTag$2] = typedArrayTags[arrayTag$2] =\ntypedArrayTags[arrayBufferTag$3] = typedArrayTags[boolTag$4] =\ntypedArrayTags[dataViewTag$4] = typedArrayTags[dateTag$4] =\ntypedArrayTags[errorTag$2] = typedArrayTags[funcTag$1] =\ntypedArrayTags[mapTag$5] = typedArrayTags[numberTag$4] =\ntypedArrayTags[objectTag$3] = typedArrayTags[regexpTag$3] =\ntypedArrayTags[setTag$5] = typedArrayTags[stringTag$4] =\ntypedArrayTags[weakMapTag$2] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/** Detect free variable `exports`. */\nvar freeExports$1 = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule$1 = freeExports$1 && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports$1 = freeModule$1 && freeModule$1.exports === freeExports$1;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports$1 && freeGlobal$1.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule$1 && freeModule$1.require && freeModule$1.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nvar nodeUtil$1 = nodeUtil;\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil$1 && nodeUtil$1.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nvar isTypedArray$1 = isTypedArray;\n\n/** Used for built-in method references. */\nvar objectProto$9 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$8 = objectProto$9.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray$1(value),\n      isArg = !isArr && isArguments$1(value),\n      isBuff = !isArr && !isArg && isBuffer$1(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray$1(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty$8.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar objectProto$8 = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto$8;\n\n  return value === proto;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nvar nativeKeys$1 = nativeKeys;\n\n/** Used for built-in method references. */\nvar objectProto$7 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$7 = objectProto$7.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys$1(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty$7.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method is like `_.assign` except that it accepts `customizer`\n * which is invoked to produce the assigned values. If `customizer` returns\n * `undefined`, assignment is handled by the method instead. The `customizer`\n * is invoked with five arguments: (objValue, srcValue, key, object, source).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} [customizer] The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @see _.assignInWith\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   return _.isUndefined(objValue) ? srcValue : objValue;\n * }\n *\n * var defaults = _.partialRight(_.assignWith, customizer);\n *\n * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar assignWith = createAssigner(function(object, source, srcIndex, customizer) {\n  copyObject(source, keys(source), object, customizer);\n});\n\nvar assignWith$1 = assignWith;\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/* Built-in method references that are verified to be native. */\nvar Map$1 = getNative(root$1, 'Map');\n\nvar Map$2 = Map$1;\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nvar nativeCreate$1 = nativeCreate;\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate$1 ? nativeCreate$1(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED$2 = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto$6 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$6 = objectProto$6.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate$1) {\n    var result = data[key];\n    return result === HASH_UNDEFINED$2 ? undefined : result;\n  }\n  return hasOwnProperty$6.call(data, key) ? data[key] : undefined;\n}\n\n/** Used for built-in method references. */\nvar objectProto$5 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$5 = objectProto$5.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate$1 ? (data[key] !== undefined) : hasOwnProperty$5.call(data, key);\n}\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED$1 = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate$1 && value === undefined) ? HASH_UNDEFINED$1 : value;\n  return this;\n}\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map$2 || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE$1 = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map$2 || (pairs.length < LARGE_ARRAY_SIZE$1 - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar objectProto$4 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$4 = objectProto$4.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty$4.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root$1.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/** Used for built-in method references. */\nvar objectProto$3 = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto$3.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols$1 = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols$1 ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols$1(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nvar getSymbols$1 = getSymbols;\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols$1(source), object);\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nvar getPrototype$1 = getPrototype;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols$1(object));\n    object = getPrototype$1(object);\n  }\n  return result;\n};\n\nvar getSymbolsIn$1 = getSymbolsIn;\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn$1(source), object);\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray$1(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols$1);\n}\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn$1);\n}\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root$1, 'DataView');\n\nvar DataView$1 = DataView;\n\n/* Built-in method references that are verified to be native. */\nvar Promise$1 = getNative(root$1, 'Promise');\n\nvar Promise$2 = Promise$1;\n\n/* Built-in method references that are verified to be native. */\nvar Set$1 = getNative(root$1, 'Set');\n\nvar Set$2 = Set$1;\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root$1, 'WeakMap');\n\nvar WeakMap$1 = WeakMap;\n\n/** `Object#toString` result references. */\nvar mapTag$4 = '[object Map]',\n    objectTag$2 = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag$4 = '[object Set]',\n    weakMapTag$1 = '[object WeakMap]';\n\nvar dataViewTag$3 = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView$1),\n    mapCtorString = toSource(Map$2),\n    promiseCtorString = toSource(Promise$2),\n    setCtorString = toSource(Set$2),\n    weakMapCtorString = toSource(WeakMap$1);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView$1 && getTag(new DataView$1(new ArrayBuffer(1))) != dataViewTag$3) ||\n    (Map$2 && getTag(new Map$2) != mapTag$4) ||\n    (Promise$2 && getTag(Promise$2.resolve()) != promiseTag) ||\n    (Set$2 && getTag(new Set$2) != setTag$4) ||\n    (WeakMap$1 && getTag(new WeakMap$1) != weakMapTag$1)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag$2 ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag$3;\n        case mapCtorString: return mapTag$4;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag$4;\n        case weakMapCtorString: return weakMapTag$1;\n      }\n    }\n    return result;\n  };\n}\n\nvar getTag$1 = getTag;\n\n/** Used for built-in method references. */\nvar objectProto$2 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$3 = objectProto$2.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty$3.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/** Built-in value references. */\nvar Uint8Array = root$1.Uint8Array;\n\nvar Uint8Array$1 = Uint8Array;\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array$1(result).set(new Uint8Array$1(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto$2 = Symbol$1 ? Symbol$1.prototype : undefined,\n    symbolValueOf$1 = symbolProto$2 ? symbolProto$2.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf$1 ? Object(symbolValueOf$1.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/** `Object#toString` result references. */\nvar boolTag$3 = '[object Boolean]',\n    dateTag$3 = '[object Date]',\n    mapTag$3 = '[object Map]',\n    numberTag$3 = '[object Number]',\n    regexpTag$2 = '[object RegExp]',\n    setTag$3 = '[object Set]',\n    stringTag$3 = '[object String]',\n    symbolTag$3 = '[object Symbol]';\n\nvar arrayBufferTag$2 = '[object ArrayBuffer]',\n    dataViewTag$2 = '[object DataView]',\n    float32Tag$1 = '[object Float32Array]',\n    float64Tag$1 = '[object Float64Array]',\n    int8Tag$1 = '[object Int8Array]',\n    int16Tag$1 = '[object Int16Array]',\n    int32Tag$1 = '[object Int32Array]',\n    uint8Tag$1 = '[object Uint8Array]',\n    uint8ClampedTag$1 = '[object Uint8ClampedArray]',\n    uint16Tag$1 = '[object Uint16Array]',\n    uint32Tag$1 = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag$2:\n      return cloneArrayBuffer(object);\n\n    case boolTag$3:\n    case dateTag$3:\n      return new Ctor(+object);\n\n    case dataViewTag$2:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag$1: case float64Tag$1:\n    case int8Tag$1: case int16Tag$1: case int32Tag$1:\n    case uint8Tag$1: case uint8ClampedTag$1: case uint16Tag$1: case uint32Tag$1:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag$3:\n      return new Ctor;\n\n    case numberTag$3:\n    case stringTag$3:\n      return new Ctor(object);\n\n    case regexpTag$2:\n      return cloneRegExp(object);\n\n    case setTag$3:\n      return new Ctor;\n\n    case symbolTag$3:\n      return cloneSymbol(object);\n  }\n}\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nvar baseCreate$1 = baseCreate;\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate$1(getPrototype$1(object))\n    : {};\n}\n\n/** `Object#toString` result references. */\nvar mapTag$2 = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag$1(value) == mapTag$2;\n}\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil$1 && nodeUtil$1.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nvar isMap$1 = isMap;\n\n/** `Object#toString` result references. */\nvar setTag$2 = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag$1(value) == setTag$2;\n}\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil$1 && nodeUtil$1.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nvar isSet$1 = isSet;\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG$1 = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG$2 = 4;\n\n/** `Object#toString` result references. */\nvar argsTag$1 = '[object Arguments]',\n    arrayTag$1 = '[object Array]',\n    boolTag$2 = '[object Boolean]',\n    dateTag$2 = '[object Date]',\n    errorTag$1 = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag$1 = '[object Map]',\n    numberTag$2 = '[object Number]',\n    objectTag$1 = '[object Object]',\n    regexpTag$1 = '[object RegExp]',\n    setTag$1 = '[object Set]',\n    stringTag$2 = '[object String]',\n    symbolTag$2 = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag$1 = '[object ArrayBuffer]',\n    dataViewTag$1 = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag$1] = cloneableTags[arrayTag$1] =\ncloneableTags[arrayBufferTag$1] = cloneableTags[dataViewTag$1] =\ncloneableTags[boolTag$2] = cloneableTags[dateTag$2] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag$1] =\ncloneableTags[numberTag$2] = cloneableTags[objectTag$1] =\ncloneableTags[regexpTag$1] = cloneableTags[setTag$1] =\ncloneableTags[stringTag$2] = cloneableTags[symbolTag$2] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag$1] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG$1,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG$2;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray$1(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag$1(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer$1(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag$1 || tag == argsTag$1 || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet$1(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap$1(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG$1 = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return baseClone(value, CLONE_SYMBOLS_FLAG$1);\n}\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.cloneWith` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @param {Function} [customizer] The function to customize cloning.\n * @returns {*} Returns the deep cloned value.\n * @see _.cloneWith\n * @example\n *\n * function customizer(value) {\n *   if (_.isElement(value)) {\n *     return value.cloneNode(true);\n *   }\n * }\n *\n * var el = _.cloneDeepWith(document.body, customizer);\n *\n * console.log(el === document.body);\n * // => false\n * console.log(el.nodeName);\n * // => 'BODY'\n * console.log(el.childNodes.length);\n * // => 20\n */\nfunction cloneDeepWith(value, customizer) {\n  customizer = typeof customizer == 'function' ? customizer : undefined;\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);\n}\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG$5 = 1,\n    COMPARE_UNORDERED_FLAG$3 = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG$5,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG$3) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG$4 = 1,\n    COMPARE_UNORDERED_FLAG$2 = 2;\n\n/** `Object#toString` result references. */\nvar boolTag$1 = '[object Boolean]',\n    dateTag$1 = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag$1 = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag$1 = '[object String]',\n    symbolTag$1 = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto$1 = Symbol$1 ? Symbol$1.prototype : undefined,\n    symbolValueOf = symbolProto$1 ? symbolProto$1.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array$1(object), new Uint8Array$1(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag$1:\n    case dateTag$1:\n    case numberTag$1:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag$1:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG$4;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG$2;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag$1:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG$3 = 1;\n\n/** Used for built-in method references. */\nvar objectProto$1 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$2 = objectProto$1.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG$3,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty$2.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG$2 = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$1 = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray$1(object),\n      othIsArr = isArray$1(other),\n      objTag = objIsArr ? arrayTag : getTag$1(object),\n      othTag = othIsArr ? arrayTag : getTag$1(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer$1(object)) {\n    if (!isBuffer$1(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray$1(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG$2)) {\n    var objIsWrapped = objIsObj && hasOwnProperty$1.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty$1.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG$1 = 1,\n    COMPARE_UNORDERED_FLAG$1 = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG$1 | COMPARE_UNORDERED_FLAG$1, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\n/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray$1(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nvar stringToPath$1 = stringToPath;\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/** Used as references for various `Number` constants. */\nvar INFINITY$2 = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol$1 ? Symbol$1.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray$1(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY$2) ? '-0' : result;\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray$1(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath$1(toString(value));\n}\n\n/** Used as references for various `Number` constants. */\nvar INFINITY$1 = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY$1) ? '-0' : result;\n}\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\n/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray$1(object) || isArguments$1(object));\n}\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity$1;\n  }\n  if (typeof value == 'object') {\n    return isArray$1(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\n/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\n/**\n * The base implementation of methods like `_.dropWhile` and `_.takeWhile`\n * without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to query.\n * @param {Function} predicate The function invoked per iteration.\n * @param {boolean} [isDrop] Specify dropping elements instead of taking them.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseWhile(array, predicate, isDrop, fromRight) {\n  var length = array.length,\n      index = fromRight ? length : -1;\n\n  while ((fromRight ? index-- : ++index < length) &&\n    predicate(array[index], index, array)) {}\n\n  return isDrop\n    ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))\n    : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));\n}\n\n/**\n * Creates a slice of `array` excluding elements dropped from the beginning.\n * Elements are dropped until `predicate` returns falsey. The predicate is\n * invoked with three arguments: (value, index, array).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to query.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the slice of `array`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': true }\n * ];\n *\n * _.dropWhile(users, function(o) { return !o.active; });\n * // => objects for ['pebbles']\n *\n * // The `_.matches` iteratee shorthand.\n * _.dropWhile(users, { 'user': 'barney', 'active': false });\n * // => objects for ['fred', 'pebbles']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.dropWhile(users, ['active', false]);\n * // => objects for ['pebbles']\n *\n * // The `_.property` iteratee shorthand.\n * _.dropWhile(users, 'active');\n * // => objects for ['barney', 'fred', 'pebbles']\n */\nfunction dropWhile(array, predicate) {\n  return (array && array.length)\n    ? baseWhile(array, baseIteratee(predicate), true)\n    : [];\n}\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol$1 ? Symbol$1.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray$1(value) || isArguments$1(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]';\n\n/**\n * Checks if `value` is classified as a boolean primitive or object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\n * @example\n *\n * _.isBoolean(false);\n * // => true\n *\n * _.isBoolean(null);\n * // => false\n */\nfunction isBoolean(value) {\n  return value === true || value === false ||\n    (isObjectLike(value) && baseGetTag(value) == boolTag);\n}\n\n/** `Object#toString` result references. */\nvar dateTag = '[object Date]';\n\n/**\n * The base implementation of `_.isDate` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n */\nfunction baseIsDate(value) {\n  return isObjectLike(value) && baseGetTag(value) == dateTag;\n}\n\n/* Node.js helper references. */\nvar nodeIsDate = nodeUtil$1 && nodeUtil$1.isDate;\n\n/**\n * Checks if `value` is classified as a `Date` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n * @example\n *\n * _.isDate(new Date);\n * // => true\n *\n * _.isDate('Mon April 23 2012');\n * // => false\n */\nvar isDate = nodeIsDate ? baseUnary(nodeIsDate) : baseIsDate;\n\nvar isDate$1 = isDate;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n * classified as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && baseGetTag(value) == numberTag);\n}\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray$1(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\n/**\n * Checks if `value` is `undefined`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n * @example\n *\n * _.isUndefined(void 0);\n * // => true\n *\n * _.isUndefined(null);\n * // => false\n */\nfunction isUndefined(value) {\n  return value === undefined;\n}\n\n/**\n * The base implementation of methods like `_.max` and `_.min` which accepts a\n * `comparator` to determine the extremum value.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The iteratee invoked per iteration.\n * @param {Function} comparator The comparator used to compare values.\n * @returns {*} Returns the extremum value.\n */\nfunction baseExtremum(array, iteratee, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index],\n        current = iteratee(value);\n\n    if (current != null && (computed === undefined\n          ? (current === current && !isSymbol(current))\n          : comparator(current, computed)\n        )) {\n      var computed = current,\n          result = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.gt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is greater than `other`,\n *  else `false`.\n */\nfunction baseGt(value, other) {\n  return value > other;\n}\n\n/**\n * This method is like `_.max` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * the value is ranked. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {*} Returns the maximum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * _.maxBy(objects, function(o) { return o.n; });\n * // => { 'n': 2 }\n *\n * // The `_.property` iteratee shorthand.\n * _.maxBy(objects, 'n');\n * // => { 'n': 2 }\n */\nfunction maxBy(array, iteratee) {\n  return (array && array.length)\n    ? baseExtremum(array, baseIteratee(iteratee), baseGt)\n    : undefined;\n}\n\n/**\n * The base implementation of `_.lt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is less than `other`,\n *  else `false`.\n */\nfunction baseLt(value, other) {\n  return value < other;\n}\n\n/**\n * This method is like `_.min` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * the value is ranked. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {*} Returns the minimum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * _.minBy(objects, function(o) { return o.n; });\n * // => { 'n': 1 }\n *\n * // The `_.property` iteratee shorthand.\n * _.minBy(objects, 'n');\n * // => { 'n': 1 }\n */\nfunction minBy(array, iteratee) {\n  return (array && array.length)\n    ? baseExtremum(array, baseIteratee(iteratee), baseLt)\n    : undefined;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return function(key) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/** Used to map Latin Unicode letters to basic Latin letters. */\nvar deburredLetters = {\n  // Latin-1 Supplement block.\n  '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n  '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n  '\\xc7': 'C',  '\\xe7': 'c',\n  '\\xd0': 'D',  '\\xf0': 'd',\n  '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n  '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n  '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n  '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n  '\\xd1': 'N',  '\\xf1': 'n',\n  '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n  '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n  '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n  '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n  '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n  '\\xc6': 'Ae', '\\xe6': 'ae',\n  '\\xde': 'Th', '\\xfe': 'th',\n  '\\xdf': 'ss',\n  // Latin Extended-A block.\n  '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n  '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n  '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n  '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n  '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n  '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n  '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n  '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n  '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n  '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n  '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n  '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n  '\\u0134': 'J',  '\\u0135': 'j',\n  '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n  '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n  '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n  '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n  '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n  '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n  '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n  '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n  '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n  '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n  '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n  '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n  '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n  '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n  '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n  '\\u0174': 'W',  '\\u0175': 'w',\n  '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n  '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n  '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n  '\\u0132': 'IJ', '\\u0133': 'ij',\n  '\\u0152': 'Oe', '\\u0153': 'oe',\n  '\\u0149': \"'n\", '\\u017f': 's'\n};\n\n/**\n * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n * letters to basic Latin letters.\n *\n * @private\n * @param {string} letter The matched letter to deburr.\n * @returns {string} Returns the deburred letter.\n */\nvar deburrLetter = basePropertyOf(deburredLetters);\n\nvar deburrLetter$1 = deburrLetter;\n\n/** Used to match Latin Unicode letters (excluding mathematical operators). */\nvar reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n/** Used to compose unicode character classes. */\nvar rsComboMarksRange$3 = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange$3 = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange$3 = '\\\\u20d0-\\\\u20ff',\n    rsComboRange$3 = rsComboMarksRange$3 + reComboHalfMarksRange$3 + rsComboSymbolsRange$3;\n\n/** Used to compose unicode capture groups. */\nvar rsCombo$2 = '[' + rsComboRange$3 + ']';\n\n/**\n * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n */\nvar reComboMark = RegExp(rsCombo$2, 'g');\n\n/**\n * Deburrs `string` by converting\n * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n * letters to basic Latin letters and removing\n * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to deburr.\n * @returns {string} Returns the deburred string.\n * @example\n *\n * _.deburr('déjà vu');\n * // => 'deja vu'\n */\nfunction deburr(string) {\n  string = toString(string);\n  return string && string.replace(reLatin, deburrLetter$1).replace(reComboMark, '');\n}\n\n/** Used to match words composed of alphanumeric characters. */\nvar reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n/**\n * Splits an ASCII `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction asciiWords(string) {\n  return string.match(reAsciiWord) || [];\n}\n\n/** Used to detect strings that need a more robust regexp to match words. */\nvar reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n/**\n * Checks if `string` contains a word composed of Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a word is found, else `false`.\n */\nfunction hasUnicodeWord(string) {\n  return reHasUnicodeWord.test(string);\n}\n\n/** Used to compose unicode character classes. */\nvar rsAstralRange$2 = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange$2 = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange$2 = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange$2 = '\\\\u20d0-\\\\u20ff',\n    rsComboRange$2 = rsComboMarksRange$2 + reComboHalfMarksRange$2 + rsComboSymbolsRange$2,\n    rsDingbatRange = '\\\\u2700-\\\\u27bf',\n    rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n    rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n    rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n    rsPunctuationRange = '\\\\u2000-\\\\u206f',\n    rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n    rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n    rsVarRange$2 = '\\\\ufe0e\\\\ufe0f',\n    rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n/** Used to compose unicode capture groups. */\nvar rsApos$1 = \"['\\u2019]\",\n    rsBreak = '[' + rsBreakRange + ']',\n    rsCombo$1 = '[' + rsComboRange$2 + ']',\n    rsDigits = '\\\\d+',\n    rsDingbat = '[' + rsDingbatRange + ']',\n    rsLower = '[' + rsLowerRange + ']',\n    rsMisc = '[^' + rsAstralRange$2 + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n    rsFitz$1 = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier$1 = '(?:' + rsCombo$1 + '|' + rsFitz$1 + ')',\n    rsNonAstral$1 = '[^' + rsAstralRange$2 + ']',\n    rsRegional$1 = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair$1 = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsUpper = '[' + rsUpperRange + ']',\n    rsZWJ$2 = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n    rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n    rsOptContrLower = '(?:' + rsApos$1 + '(?:d|ll|m|re|s|t|ve))?',\n    rsOptContrUpper = '(?:' + rsApos$1 + '(?:D|LL|M|RE|S|T|VE))?',\n    reOptMod$1 = rsModifier$1 + '?',\n    rsOptVar$1 = '[' + rsVarRange$2 + ']?',\n    rsOptJoin$1 = '(?:' + rsZWJ$2 + '(?:' + [rsNonAstral$1, rsRegional$1, rsSurrPair$1].join('|') + ')' + rsOptVar$1 + reOptMod$1 + ')*',\n    rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])',\n    rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])',\n    rsSeq$1 = rsOptVar$1 + reOptMod$1 + rsOptJoin$1,\n    rsEmoji = '(?:' + [rsDingbat, rsRegional$1, rsSurrPair$1].join('|') + ')' + rsSeq$1;\n\n/** Used to match complex or compound words. */\nvar reUnicodeWord = RegExp([\n  rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n  rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n  rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n  rsUpper + '+' + rsOptContrUpper,\n  rsOrdUpper,\n  rsOrdLower,\n  rsDigits,\n  rsEmoji\n].join('|'), 'g');\n\n/**\n * Splits a Unicode `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction unicodeWords(string) {\n  return string.match(reUnicodeWord) || [];\n}\n\n/**\n * Splits `string` into an array of its words.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to inspect.\n * @param {RegExp|string} [pattern] The pattern to match words.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the words of `string`.\n * @example\n *\n * _.words('fred, barney, & pebbles');\n * // => ['fred', 'barney', 'pebbles']\n *\n * _.words('fred, barney, & pebbles', /[^, ]+/g);\n * // => ['fred', 'barney', '&', 'pebbles']\n */\nfunction words(string, pattern, guard) {\n  string = toString(string);\n  pattern = guard ? undefined : pattern;\n\n  if (pattern === undefined) {\n    return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n  }\n  return string.match(pattern) || [];\n}\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\";\n\n/** Used to match apostrophes. */\nvar reApos = RegExp(rsApos, 'g');\n\n/**\n * Creates a function like `_.camelCase`.\n *\n * @private\n * @param {Function} callback The function to combine each word.\n * @returns {Function} Returns the new compounder function.\n */\nfunction createCompounder(callback) {\n  return function(string) {\n    return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n  };\n}\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\n/** Used to compose unicode character classes. */\nvar rsAstralRange$1 = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange$1 = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange$1 = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange$1 = '\\\\u20d0-\\\\u20ff',\n    rsComboRange$1 = rsComboMarksRange$1 + reComboHalfMarksRange$1 + rsComboSymbolsRange$1,\n    rsVarRange$1 = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ$1 = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ$1 + rsAstralRange$1  + rsComboRange$1 + rsVarRange$1 + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\n/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\n/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\n/**\n * Creates a function like `_.lowerFirst`.\n *\n * @private\n * @param {string} methodName The name of the `String` case method to use.\n * @returns {Function} Returns the new case function.\n */\nfunction createCaseFirst(methodName) {\n  return function(string) {\n    string = toString(string);\n\n    var strSymbols = hasUnicode(string)\n      ? stringToArray(string)\n      : undefined;\n\n    var chr = strSymbols\n      ? strSymbols[0]\n      : string.charAt(0);\n\n    var trailing = strSymbols\n      ? castSlice(strSymbols, 1).join('')\n      : string.slice(1);\n\n    return chr[methodName]() + trailing;\n  };\n}\n\n/**\n * Converts the first character of `string` to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.upperFirst('fred');\n * // => 'Fred'\n *\n * _.upperFirst('FRED');\n * // => 'FRED'\n */\nvar upperFirst$1 = createCaseFirst('toUpperCase');\n\nvar upperFirst$2 = upperFirst$1;\n\n/**\n * Converts `string` to\n * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n *\n * @static\n * @memberOf _\n * @since 3.1.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the start cased string.\n * @example\n *\n * _.startCase('--foo-bar--');\n * // => 'Foo Bar'\n *\n * _.startCase('fooBar');\n * // => 'Foo Bar'\n *\n * _.startCase('__FOO_BAR__');\n * // => 'FOO BAR'\n */\nvar startCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + upperFirst$2(word);\n});\n\nvar startCase$1 = startCase;\n\n/**\n * The base implementation of `_.sum` and `_.sumBy` without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {number} Returns the sum.\n */\nfunction baseSum(array, iteratee) {\n  var result,\n      index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var current = iteratee(array[index]);\n    if (current !== undefined) {\n      result = result === undefined ? current : (result + current);\n    }\n  }\n  return result;\n}\n\n/**\n * This method is like `_.sum` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the value to be summed.\n * The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {number} Returns the sum.\n * @example\n *\n * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n *\n * _.sumBy(objects, function(o) { return o.n; });\n * // => 20\n *\n * // The `_.property` iteratee shorthand.\n * _.sumBy(objects, 'n');\n * // => 20\n */\nfunction sumBy(array, iteratee) {\n  return (array && array.length)\n    ? baseSum(array, baseIteratee(iteratee))\n    : 0;\n}\n\n/**\n * Creates a slice of `array` with elements taken from the beginning. Elements\n * are taken until `predicate` returns falsey. The predicate is invoked with\n * three arguments: (value, index, array).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to query.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the slice of `array`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': true }\n * ];\n *\n * _.takeWhile(users, function(o) { return !o.active; });\n * // => objects for ['barney', 'fred']\n *\n * // The `_.matches` iteratee shorthand.\n * _.takeWhile(users, { 'user': 'barney', 'active': false });\n * // => objects for ['barney']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.takeWhile(users, ['active', false]);\n * // => objects for ['barney', 'fred']\n *\n * // The `_.property` iteratee shorthand.\n * _.takeWhile(users, 'active');\n * // => []\n */\nfunction takeWhile(array, predicate) {\n  return (array && array.length)\n    ? baseWhile(array, baseIteratee(predicate))\n    : [];\n}\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\n/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\n/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop$1() {\n  // No operation performed.\n}\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set$2 && (1 / setToArray(new Set$2([,-0]))[1]) == INFINITY) ? noop$1 : function(values) {\n  return new Set$2(values);\n};\n\nvar createSet$1 = createSet;\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet$1(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This method is like `_.zip` except that it accepts an array of grouped\n * elements and creates an array regrouping the elements to their pre-zip\n * configuration.\n *\n * @static\n * @memberOf _\n * @since 1.2.0\n * @category Array\n * @param {Array} array The array of grouped elements to process.\n * @returns {Array} Returns the new array of regrouped elements.\n * @example\n *\n * var zipped = _.zip(['a', 'b'], [1, 2], [true, false]);\n * // => [['a', 1, true], ['b', 2, false]]\n *\n * _.unzip(zipped);\n * // => [['a', 'b'], [1, 2], [true, false]]\n */\nfunction unzip(array) {\n  if (!(array && array.length)) {\n    return [];\n  }\n  var length = 0;\n  array = arrayFilter(array, function(group) {\n    if (isArrayLikeObject(group)) {\n      length = nativeMax(group.length, length);\n      return true;\n    }\n  });\n  return baseTimes(length, function(index) {\n    return arrayMap(array, baseProperty(index));\n  });\n}\n\n/**\n * Creates an array of grouped elements, the first of which contains the\n * first elements of the given arrays, the second of which contains the\n * second elements of the given arrays, and so on.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to process.\n * @returns {Array} Returns the new array of grouped elements.\n * @example\n *\n * _.zip(['a', 'b'], [1, 2], [true, false]);\n * // => [['a', 1, true], ['b', 2, false]]\n */\nvar zip = baseRest(unzip);\n\nvar zip$1 = zip;\n\nconst noop = () => { };\nconst yes = () => true;\nconst no = () => false;\nconst identity = x => x;\n\nconst toCamelCase = (...names) => {\n\tconst length = names.length;\n\tconst nameList = names.map(name => '' + name);\n\tif (length > 0) {\n\t\treturn (nameList[0] +\n\t\t\tnameList.slice(1)\n\t\t\t\t.map(name => name[0].toUpperCase() + name.substring(1, name.length))\n\t\t\t\t.join(''));\n\t}\n\n\treturn '';\n};\n\nconst isEmail = value => {\n\tif (value) {\n\t\tconst re = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i; // eslint-disable-line no-useless-escape\n\t\treturn re.test(value);\n\t}\n\n\treturn false;\n};\n\nfunction compare(x, y) {\n\tif (x === y) {\n\t\treturn 0;\n\t}\n\n\tif (x === null || x === undefined || x === '') {\n\t\treturn 1;\n\t}\n\n\tif (y === null || y === undefined || y === '') {\n\t\treturn -1;\n\t}\n\n\treturn x > y ? 1 : -1;\n}\n\nfunction orderBy(data, selectors, compares) {\n\tconst length = selectors.length;\n\tconst result = [];\n\tconst count = data.length;\n\n\t// iterate through data to create array with applied selectors\n\tlet index = count;\n\twhile (index--) {\n\t\tconst row = data[index];\n\t\tconst criteria = [];\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst select = selectors[i];\n\t\t\tcriteria.push(select(row));\n\t\t}\n\n\t\tresult.push({ row, criteria, index });\n\t}\n\n\t// multi selector comparator\n\tconst compare = (x, y) => {\n\t\tlet result = 0;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst compare = compares[i];\n\t\t\tconst xv = x.criteria[i];\n\t\t\tconst yv = y.criteria[i];\n\n\t\t\tresult = compare(xv, yv, x.row, y.row);\n\t\t\tif (result !== 0) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\n\t\t// ensures a stable sort\n\t\treturn x.index - y.index;\n\t};\n\n\tresult.sort(compare);\n\n\t// copy origin values to result array\n\tindex = count;\n\twhile (index--) {\n\t\tresult[index] = result[index].row;\n\t}\n\n\treturn result;\n}\n\nfunction htmlEncode(s) {\n\treturn String(s)\n\t\t.replace(/&/g, '&amp;')\n\t\t.replace(/\"/g, '&quot;')\n\t\t.replace(/'/g, '&#39;')\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;');\n}\n\nfunction escapeRegexp(text) {\n\tif (!text)\n\t\treturn text;\n\n\treturn text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n}\n\nfunction binarySearch(list, value) {\n\tlet low = 0;\n\tlet high = list.length;\n\twhile (low < high) {\n\t\tconst mid = (low + high) >>> 1;\n\t\tif (list[mid] < value) {\n\t\t\tlow = mid + 1;\n\t\t}\n\t\telse {\n\t\t\thigh = mid;\n\t\t}\n\t}\n\n\treturn low;\n}\n\nfunction isUrl(value) {\n\tvar a = document.createElement('a');\n\ta.href = value;\n\treturn (a.host && a.host != window.location.host);\n}\n\nfunction isImage(value) {\n\treturn ('' + value).match(/\\.(jpeg|jpg|gif|png)$/) != null;\n}\n\nfunction matchISO8601(date) {\n\treturn /^(\\d{4})(-(\\d{2})(-(\\d{2})([T ](\\d{2}):(\\d{2})(:(\\d{2})(\\.(\\d+))?)?(Z|(([-+])(\\d{2})(:?(\\d{2})))))))$/.test('' + date)\n}\n\nfunction getTypeName(type) {\n\tif (type.name) {\n\t\treturn type.name;\n\t}\n\n\tconst nameRegexp = /function (.{1,})\\(/;\n\tconst results = (nameRegexp).exec(type.constructor.toString());\n\treturn (results && results.length > 1) ? results[1] : \"\";\n}\n\nconst WILDCARD_SYMBOL = '*';\nconst notWildcard = cmd => cmd.shortcut !== WILDCARD_SYMBOL;\n\n\nclass ShortcutDispatcher {\n\tconstructor() {\n\t\tthis.managerMap = new Map();\n\t}\n\n\tregister(manager, commands) {\n\t\tcommands = commands.values ? commands.values() : commands;\n\t\tlet context = this.managerMap.get(manager);\n\t\tif (!context) {\n\t\t\tcontext = {\n\t\t\t\tcommands: [],\n\t\t\t\tshortcuts: new Map()\n\t\t\t};\n\n\t\t\tthis.managerMap.set(manager, context);\n\t\t}\n\n\t\tconst disposes = [];\n\t\tfor (let cmd of commands) {\n\t\t\tif (cmd.shortcut) {\n\t\t\t\tif (isFunction(cmd.shortcut)) {\n\t\t\t\t\tcontext.commands.push(cmd);\n\t\t\t\t\tdisposes.push(() => {\n\t\t\t\t\t\tconst index = context.commands.indexOf(cmd);\n\t\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\t\tcontext.commands.splice(index, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcmd.shortcut\n\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t.split('|')\n\t\t\t\t\t\t.forEach(shct => {\n\t\t\t\t\t\t\tlet shortcuts = [];\n\t\t\t\t\t\t\tif (context.shortcuts.has(shct)) {\n\t\t\t\t\t\t\t\tshortcuts = context.shortcuts.get(shct);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tshortcuts.push(cmd);\n\t\t\t\t\t\t\tcontext.shortcuts.set(shct, shortcuts);\n\t\t\t\t\t\t\tdisposes.push(() => {\n\t\t\t\t\t\t\t\tconst shortcutCommands = context.shortcuts.get(shct);\n\t\t\t\t\t\t\t\tif (shortcutCommands) {\n\t\t\t\t\t\t\t\t\tconst index = shortcutCommands.indexOf(cmd);\n\t\t\t\t\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\t\t\t\t\tshortcutCommands.splice(index, 1);\n\t\t\t\t\t\t\t\t\t\tif (!shortcutCommands.length) {\n\t\t\t\t\t\t\t\t\t\t\tcontext.shortcuts.delete(shct);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn () => {\n\t\t\tdisposes.forEach(dispose => dispose());\n\t\t\tif (context.commands.length === 0 && Object.keys(context.shortcuts).length === 0) {\n\t\t\t\tthis.managerMap.delete(manager);\n\t\t\t}\n\t\t};\n\t}\n\n\texecute(code, source) {\n\t\tconst activities = this.fetchActivities(code, source);\n\n\t\treturn activities.reduce((memo, activity) => {\n\t\t\tconst commands = activity.commands;\n\t\t\tconst manager = activity.manager;\n\t\t\tconst result = manager.invoke(commands, null, source) || result;\n\t\t\tif (result) {\n\t\t\t\tmemo.push(...commands.map(cmd => cmd.source));\n\t\t\t}\n\t\t\treturn memo;\n\t\t}, []);\n\t}\n\n\tcanExecute(code, source) {\n\t\tconst activities = this.fetchActivities(code, source);\n\t\treturn activities.length > 0;\n\t}\n\n\tfetchActivities(code, source) {\n\t\tconst search = this.searchFactory(code);\n\n\t\tconst candidates = Array\n\t\t\t.from(this.managerMap.entries())\n\t\t\t.map(([manager, context]) => ({\n\t\t\t\tmanager,\n\t\t\t\tcommands: manager.filter(search(context), source)\n\t\t\t}));\n\n\t\t// Skip wildcard commands if there are some explicit shortcuts\n\t\tconst allCommands = flatten(candidates.map(x => x.commands));\n\t\tconst hasNotWildcardCommand = allCommands.filter(notWildcard).length > 0;\n\t\tconst test = hasNotWildcardCommand ? notWildcard : yes;\n\t\treturn candidates\n\t\t\t.map(({ commands, manager }) => ({\n\t\t\t\tmanager,\n\t\t\t\tcommands: commands.filter(test),\n\t\t\t}))\n\t\t\t.filter(({ commands }) => commands.length > 0);\n\t}\n\n\tsearchFactory(code) {\n\t\treturn context => {\n\t\t\tlet result = [];\n\t\t\tif (context.shortcuts.has(code)) {\n\t\t\t\tresult = result.concat(context.shortcuts.get(code));\n\t\t\t}\n\n\t\t\tif (context.shortcuts.has(WILDCARD_SYMBOL) && code !== WILDCARD_SYMBOL) {\n\t\t\t\tresult = result.concat(context.shortcuts.get(WILDCARD_SYMBOL));\n\t\t\t}\n\n\t\t\tresult = result.concat(context.commands\n\t\t\t\t.map(cmd => cmd.clone({ shortcut: cmd.shortcut() }))\n\t\t\t\t.filter(cmd => this.test(cmd.shortcut, code)));\n\n\t\t\treturn result;\n\t\t};\n\t}\n\n\ttest(shortcut, code) {\n\t\tcode = code.toLowerCase();\n\t\treturn ('' + shortcut)\n\t\t\t.toLowerCase()\n\t\t\t.split('|')\n\t\t\t.some(shct => shct === WILDCARD_SYMBOL || code === shct);\n\t}\n}\n\nclass ActionState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\n\t\tthis.items = [\n\t\t\t{\n\t\t\t\tcommand: {\n\t\t\t\t\texecute: noop,\n\t\t\t\t\tpriority: 0\n\t\t\t\t},\n\t\t\t\ttitle: `Column chooser`,\n\t\t\t\ticon: 'more_vert',\n\t\t\t\ttemplateUrl: 'plugin-column-chooser-trigger.tpl.html',\n\t\t\t}\n\t\t];\n\n\t\tthis.shortcut = new Shortcut(new ShortcutDispatcher());\n\t\tthis.manager = new CommandManager();\n\t}\n}\n\nclass AnimationState {\n\tconstructor() {\n\t\tthis.apply = [];\n\t}\n}\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nvar fastdom = {exports: {}};\n\n(function (module) {\n!(function(win) {\n\n/**\n * Mini logger\n *\n * @return {Function}\n */\nvar debug = function() {};\n\n/**\n * Normalized rAF\n *\n * @type {Function}\n */\nvar raf = win.requestAnimationFrame\n  || win.webkitRequestAnimationFrame\n  || win.mozRequestAnimationFrame\n  || win.msRequestAnimationFrame\n  || function(cb) { return setTimeout(cb, 16); };\n\n/**\n * Initialize a `FastDom`.\n *\n * @constructor\n */\nfunction FastDom() {\n  var self = this;\n  self.reads = [];\n  self.writes = [];\n  self.raf = raf.bind(win); // test hook\n}\n\nFastDom.prototype = {\n  constructor: FastDom,\n\n  /**\n   * Adds a job to the read batch and\n   * schedules a new frame if need be.\n   *\n   * @param  {Function} fn\n   * @param  {Object} ctx the context to be bound to `fn` (optional).\n   * @public\n   */\n  measure: function(fn, ctx) {\n    var task = !ctx ? fn : fn.bind(ctx);\n    this.reads.push(task);\n    scheduleFlush(this);\n    return task;\n  },\n\n  /**\n   * Adds a job to the\n   * write batch and schedules\n   * a new frame if need be.\n   *\n   * @param  {Function} fn\n   * @param  {Object} ctx the context to be bound to `fn` (optional).\n   * @public\n   */\n  mutate: function(fn, ctx) {\n    var task = !ctx ? fn : fn.bind(ctx);\n    this.writes.push(task);\n    scheduleFlush(this);\n    return task;\n  },\n\n  /**\n   * Clears a scheduled 'read' or 'write' task.\n   *\n   * @param {Object} task\n   * @return {Boolean} success\n   * @public\n   */\n  clear: function(task) {\n    return remove(this.reads, task) || remove(this.writes, task);\n  },\n\n  /**\n   * Extend this FastDom with some\n   * custom functionality.\n   *\n   * Because fastdom must *always* be a\n   * singleton, we're actually extending\n   * the fastdom instance. This means tasks\n   * scheduled by an extension still enter\n   * fastdom's global task queue.\n   *\n   * The 'super' instance can be accessed\n   * from `this.fastdom`.\n   *\n   * @example\n   *\n   * var myFastdom = fastdom.extend({\n   *   initialize: function() {\n   *     // runs on creation\n   *   },\n   *\n   *   // override a method\n   *   measure: function(fn) {\n   *     // do extra stuff ...\n   *\n   *     // then call the original\n   *     return this.fastdom.measure(fn);\n   *   },\n   *\n   *   ...\n   * });\n   *\n   * @param  {Object} props  properties to mixin\n   * @return {FastDom}\n   */\n  extend: function(props) {\n    if (typeof props != 'object') throw new Error('expected object');\n\n    var child = Object.create(this);\n    mixin(child, props);\n    child.fastdom = this;\n\n    // run optional creation hook\n    if (child.initialize) child.initialize();\n\n    return child;\n  },\n\n  // override this with a function\n  // to prevent Errors in console\n  // when tasks throw\n  catch: null\n};\n\n/**\n * Schedules a new read/write\n * batch if one isn't pending.\n *\n * @private\n */\nfunction scheduleFlush(fastdom) {\n  if (!fastdom.scheduled) {\n    fastdom.scheduled = true;\n    fastdom.raf(flush.bind(null, fastdom));\n  }\n}\n\n/**\n * Runs queued `read` and `write` tasks.\n *\n * Errors are caught and thrown by default.\n * If a `.catch` function has been defined\n * it is called instead.\n *\n * @private\n */\nfunction flush(fastdom) {\n\n  var writes = fastdom.writes;\n  var reads = fastdom.reads;\n  var error;\n\n  try {\n    debug('flushing reads', reads.length);\n    runTasks(reads);\n    debug('flushing writes', writes.length);\n    runTasks(writes);\n  } catch (e) { error = e; }\n\n  fastdom.scheduled = false;\n\n  // If the batch errored we may still have tasks queued\n  if (reads.length || writes.length) scheduleFlush(fastdom);\n\n  if (error) {\n    debug('task errored', error.message);\n    if (fastdom.catch) fastdom.catch(error);\n    else throw error;\n  }\n}\n\n/**\n * We run this inside a try catch\n * so that if any jobs error, we\n * are able to recover and continue\n * to flush the batch until it's empty.\n *\n * @private\n */\nfunction runTasks(tasks) {\n  var task; while (task = tasks.shift()) task();\n}\n\n/**\n * Remove an item from an Array.\n *\n * @param  {Array} array\n * @param  {*} item\n * @return {Boolean}\n */\nfunction remove(array, item) {\n  var index = array.indexOf(item);\n  return !!~index && !!array.splice(index, 1);\n}\n\n/**\n * Mixin own properties of source\n * object into the target.\n *\n * @param  {Object} target\n * @param  {Object} source\n */\nfunction mixin(target, source) {\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) target[key] = source[key];\n  }\n}\n\n// There should never be more than\n// one instance of `FastDom` in an app\nvar exports = win.fastdom = (win.fastdom || new FastDom()); // jshint ignore:line\n\n// Expose to CJS & AMD\nmodule.exports = exports;\n\n})( typeof window !== 'undefined' ? window : commonjsGlobal);\n}(fastdom));\n\nvar FastDom = fastdom.exports;\n\nclass Fastdom {\n    static mutate(task) {\n        return Fastdom.invoke(() => FastDom.mutate(task));\n    }\n\n    static measure(task) {\n        return Fastdom.invoke(() => FastDom.measure(task));\n    }\n\n    static clear(task) {\n        return Fastdom.invoke(() => FastDom.clear(task));\n    }\n\n    static invoke(task) {\n        return task();\n    }\n}\n\nconst GRID_PREFIX = 'q-grid';\n\nclass Event {\n\tconstructor(reply) {\n\t\tthis.handlers = [];\n\n\t\tthis.lastArg = null;\n\t\tthis.reply = reply || (() => this.lastArg);\n\t}\n\n\ton(next, lifecycle = 'app') {\n\t\tconst { handlers } = this;\n\n\t\tconst handler = { next, lifecycle };\n\t\tconst off = () => {\n\t\t\tconst index = handlers.indexOf(handler);\n\t\t\tif (index >= 0) {\n\t\t\t\thandlers.splice(index, 1);\n\t\t\t}\n\t\t};\n\n\t\thandler.off = off;\n\t\thandlers.push(handler);\n\n\t\treturn off;\n\t}\n\n\twatch(next, lifecycle = 'app') {\n\t\tconst off = this.on(next, lifecycle);\n\t\tif (this.lastArg) {\n\t\t\tconst e = this.reply();\n\t\t\tnext(e, off);\n\t\t}\n\n\t\treturn off;\n\t}\n\n\temit(value) {\n\t\tthis.lastArg = value;\n\n\t\tconst handlers = Array.from(this.handlers);\n\t\tfor (let i = 0, length = handlers.length; i < length; i++) {\n\t\t\tconst handler = handlers[i];\n\t\t\thandler.next(value, handler.off);\n\t\t}\n\t}\n}\n\nclass Defer {\n\tconstructor() {\n\t\tthis.promise = new DeferPromise();\n\t}\n\n\treject() {\n\t\tthis.promise.reject();\n\t}\n\n\tresolve(value) {\n\t\tthis.promise.resolve(value);\n\t}\n}\n\nclass DeferPromise {\n\tconstructor() {\n\t\tthis.catchEvent = new Event();\n\t\tthis.thenEvent = new Event();\n\t}\n\n\treject() {\n\t\tthis.catchEvent.emit();\n\t\treturn this;\n\t}\n\n\tresolve(value) {\n\t\tthis.thenEvent.emit(value);\n\t\treturn this;\n\t}\n\n\tcatch(handler) {\n\t\tthis.catchEvent.on(handler);\n\t\treturn this;\n\t}\n\n\tthen(handler) {\n\t\tthis.thenEvent.on(handler);\n\t\treturn this;\n\t}\n}\n\nclass GridError extends Error {\n\tconstructor(name, message) {\n\t\tsuper(message);\n\t\tthis.name = this.constructor.name;\n\t\tthis.message = `qgrid.${name}: ${message}`;\n\t\tif (isFunction(Error.captureStackTrace)) {\n\t\t\tError.captureStackTrace(this, this.constructor);\n\t\t} else {\n\t\t\tthis.stack = (new Error(message)).stack;\n\t\t}\n\t}\n}\n\nfunction jobLine(delay) {\n\tlet defer = null;\n\tconst reset = () => {\n\t\tif (defer) {\n\t\t\tdefer.reject();\n\t\t\tdefer = null;\n\t\t}\n\t};\n\n\treturn job => {\n\t\treset();\n\n\t\tif (!isFunction(job)) {\n\t\t\tthrow new GridError('job.line', 'job is not invocable');\n\t\t}\n\n\t\tconst doJob = () => {\n\t\t\tif (defer) {\n\t\t\t\tjob();\n\t\t\t\tdefer.resolve();\n\t\t\t\tdefer = null;\n\t\t\t}\n\t\t};\n\n\t\tdefer = jobLine.run(doJob, delay);\n\t\treturn defer.promise;\n\t};\n}\n\njobLine.run = (job, delay) => {\n\tconst defer = new Defer();\n\n\tconst token = Fastdom.invoke(() => setTimeout(job, delay));\n\tdefer.promise.catch(() => clearTimeout(token));\n\n\treturn defer;\n};\n\nconst VERTICAL_SCROLL_CLASS = `${GRID_PREFIX}-scroll-vertical`;\nconst HORIZONTAL_SCROLL_CLASS = `${GRID_PREFIX}-scroll-horizontal`;\nconst DEFAULT_DELTA_Y = 100;\n\nclass BodyHost {\n\tconstructor(plugin) {\n\t\tthis.plugin = plugin;\n\t\tthis.scrollingJob = jobLine(100);\n\t}\n\n\tscroll(e) {\n\t\tconst { model, table } = this.plugin;\n\t\tconst { scroll } = model;\n\n\t\tconst oldValue = scroll();\n\t\tconst newValue = {};\n\t\tlet hasChanges = false;\n\t\tif (oldValue.top !== e.scrollTop) {\n\t\t\ttable.view.addClass(VERTICAL_SCROLL_CLASS);\n\t\t\tnewValue.top = e.scrollTop;\n\t\t\thasChanges = true;\n\t\t}\n\n\t\tif (oldValue.left !== e.scrollLeft) {\n\t\t\ttable.view.addClass(HORIZONTAL_SCROLL_CLASS);\n\t\t\tnewValue.left = e.scrollLeft;\n\t\t\thasChanges = true;\n\t\t}\n\n\t\tif (hasChanges) {\n\t\t\tscroll(newValue, {\n\t\t\t\tsource: 'body.core',\n\t\t\t\tbehavior: 'core'\n\t\t\t});\n\t\t}\n\n\t\tthis.scrollingJob(this.scrollEnd.bind(this));\n\t}\n\n\tscrollEnd() {\n\t\tconst { table } = this.plugin;\n\n\t\ttable.view.removeClass(VERTICAL_SCROLL_CLASS);\n\t\ttable.view.removeClass(HORIZONTAL_SCROLL_CLASS);\n\t}\n\n\twheel(e) {\n\t\tif (e.shiftKey) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { model, table } = this.plugin;\n\t\tif (model.edit().status === 'view') {\n\t\t\tconst { scroll } = model;\n\t\t\tconst upper = 0;\n\n\t\t\tFastdom.measure(() => {\n\t\t\t\tconst lower = table.view.scrollHeight() - table.view.height();\n\t\t\t\tconst deltaY = DEFAULT_DELTA_Y * Math.sign(e.deltaY);\n\t\t\t\tconst top = Math.min(lower, Math.max(upper, scroll().top + deltaY));\n\n\t\t\t\tscroll({ top }, { source: 'body.core' });\n\t\t\t});\n\t\t}\n\t}\n\n\tmouseLeave() {\n\t\tthis.clearHighlight();\n\t}\n\n\tclearHighlight() {\n\t\tconst { view } = this.plugin;\n\t\tconst { highlight } = view;\n\t\tif (highlight.clear.canExecute()) {\n\t\t\thighlight.clear.execute();\n\t\t}\n\t}\n}\n\n/*eslint-disable  no-console*/\n\nclass Log {\n\tstatic info(source, message) {\n\t\t//console.info(`qgrid.${source}: ${message}`);\n\t}\n\n\tstatic warn(source, message) {\n\t\t//console.warn(`qgrid.${source}: ${message}`);\n\t}\n\n\tstatic error(source, message) {\n\t\tconsole.error(`qgrid.${source}: ${message}`);\n\t}\n}\n\n/*eslint-enable*/\n\nclass Node {\n\tconstructor(key, level = 0, type = 'group') {\n\t\tthis.key = key;\n\t\tthis.level = level;\n\t\tthis.rows = [];\n\t\tthis.children = [];\n\t\tthis.type = type;\n\t\tthis.source = null;\n\t\tthis.value = null;\n\t\t\n\t\tthis.state = {\n\t\t\texpand: false\n\t\t};\n\t}\n}\n\nclass RowDetails {\n\tconstructor(item, column) {\n\t\tthis.item = item;\n\t\tthis.column = column;\n\t}\n}\n\nfunction compile$1(parts) {\n\tconst last = parts.length - 1;\n\tconst accessor = getAccessor(parts, last);\n\tconst key = parts[last];\n\tif (accessor) {\n\t\treturn function (entry, value) {\n\t\t\tif (arguments.length === 2) {\n\t\t\t\tconst host = accessor(entry);\n\t\t\t\tif (host) {\n\t\t\t\t\thost[key] = value;\n\t\t\t\t}\n\n\t\t\t\tLog.warn('path.compile', `Object reference ${parts.join('.')} is not set.`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst host = accessor(entry);\n\t\t\tif (host) {\n\t\t\t\treturn host[key];\n\t\t\t}\n\n\t\t\tLog.warn('path.compile', `Object reference ${parts.join('.')} is not set.`);\n\t\t\treturn null;\n\t\t};\n\t}\n\n\treturn function (entry, value) {\n\t\tif (!entry) {\n\t\t\tLog.warn('path.compile', `Object reference ${parts.join('.')} is not set.`);\n\t\t\treturn null;\n\t\t}\n\n\t\tif (arguments.length === 2) {\n\t\t\tentry[key] = value;\n\t\t}\n\n\t\treturn entry[key];\n\t};\n}\n\nfunction compileGet(path) {\n\tconst parts = path.split('.');\n\tconst last = parts.length - 1;\n\tconst accessor = getAccessor(parts, last);\n\tconst key = parts[last];\n\tif (accessor) {\n\t\treturn function (entry) {\n\t\t\tconst host = accessor(entry);\n\t\t\tif (host) {\n\t\t\t\treturn host[key];\n\t\t\t}\n\n\t\t\tLog.warn('path.compile', `Object reference ${parts.join('.')} is not set.`);\n\t\t\treturn null;\n\t\t};\n\t}\n\n\treturn function (entry) {\n\t\tif (!entry) {\n\t\t\tLog.warn('path.compile', `Object reference ${parts.join('.')} is not set.`);\n\t\t\treturn null;\n\t\t}\n\n\t\treturn entry[key];\n\t};\n}\n\nfunction compileSet(path) {\n\tconst parts = path.split('.');\n\tconst last = parts.length - 1;\n\tconst accessor = getAccessor(parts, last);\n\tconst key = parts[last];\n\tif (accessor) {\n\t\treturn function (entry, value) {\n\t\t\tconst host = accessor(entry);\n\t\t\tif (host) {\n\t\t\t\thost[key] = value;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tLog.warn('path.compile', `Object reference ${parts.join('.')} is not set.`);\n\t\t};\n\t}\n\n\treturn function (entry, value) {\n\t\tif (entry) {\n\t\t\tentry[key] = value;\n\t\t\treturn;\n\t\t}\n\n\t\tLog.warn('path.compile', `Object reference ${parts.join('.')} is not set.`);\n\t};\n}\n\nfunction getAccessor(parts, last) {\n\tif (parts.length > 1) {\n\t\tconst firstPart = parts[0];\n\t\treturn parts\n\t\t\t.filter((_, index) => index > 0 && index !== last)\n\t\t\t.reduce(\n\t\t\t\t(accessor, part) => {\n\t\t\t\t\treturn graph => {\n\t\t\t\t\t\tconst host = accessor(graph);\n\t\t\t\t\t\tif (host) {\n\t\t\t\t\t\t\treturn host[part];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tgraph => {\n\t\t\t\t\tif (graph) {\n\t\t\t\t\t\treturn graph[firstPart];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\treturn null;\n}\n\nfunction getValue$1(row, column) {\n\treturn column.$value\n\t\t? column.$value({ $row: row, $column: column })\n\t\t: column.value\n\t\t\t? column.value(row)\n\t\t\t: column.path\n\t\t\t\t? compileGet(column.path)(row)\n\t\t\t\t: row[column.key];\n}\n\nfunction getValueFactory(column) {\n\tconst get = column.$value\n\t\t? row => column.$value({ $row: row, $column: column })\n\t\t: column.value\n\t\t\t? row => column.value(row)\n\t\t\t: column.path\n\t\t\t\t? compileGet(column.path)\n\t\t\t\t: row => row[column.key];\n\n\treturn get;\n}\n\nfunction setValue(row, column, value) {\n\tif (isFunction(column.$value)) {\n\t\treturn column.$value({ $row: row, $value: value, $column: column });\n\t}\n\n\tif (isFunction(column.value)) {\n\t\treturn column.value(row, value);\n\t}\n\n\tif (column.path) {\n\t\treturn compileSet(column.path)(row, value);\n\t}\n\n\tif (row.hasOwnProperty(column.key)) {\n\t\treturn row[column.key] = value;\n\t}\n\n\tthrow new GridError(\n\t\t'value',\n\t\t`Row can't be edit on \"${column.key}\" column`\n\t);\n}\n\nfunction getLabel(row, column) {\n\treturn column.$label\n\t\t? isFunction(column.$label) ? column.$label({ $row: row }) : column.$label\n\t\t: column.label\n\t\t\t? isFunction(column.label) ? column.label(row) : column.label\n\t\t\t: column.labelPath\n\t\t\t\t? compileGet(column.labelPath)(row)\n\t\t\t\t: getValue$1(row, column);\n}\n\nfunction getLabelFactory(column) {\n\tconst get = column.$label\n\t\t? isFunction(column.$label) ? row => column.$label({ $row: row }) : row => column.label\n\t\t: column.label\n\t\t\t? isFunction(column.label) ? row => column.label(row) : row => column.label\n\t\t\t: column.labelPath\n\t\t\t\t? compileGet(column.labelPath)\n\t\t\t\t: row => getValue$1(row, column);\n\n\treturn get;\n}\n\nfunction setLabel(row, column, label) {\n\tif (isFunction(column.$label)) {\n\t\treturn column.$label({ $row: row, $label: label });\n\t}\n\n\tif (isFunction(column.label)) {\n\t\treturn column.label(row, label);\n\t}\n\n\tif (column.labelPath) {\n\t\treturn compileSet(column.labelPath)(row, label);\n\t}\n}\n\nclass CacheStrategy {\n    constructor(plugin, strategy) {\n        const { model, observeReply } = plugin;\n        let storage = new Map();\n\n        const defaultGetValue =\n            (row, column, select, rowIndex, columnIndex) => {\n                const key = `valueFactory-${column.key}`;\n                select = storage.get(key);\n                if (!select) {\n                    select = getValueFactory(column);\n                    storage.set(key, select);\n                }\n\n                return strategy.getValue(row, column, select, rowIndex, columnIndex);\n            };\n\n        const readonlyGetValue =\n            (row, column, select, rowIndex, columnIndex) => {\n                const key = `getValue-${rowIndex}x${column.key}`;\n                if (storage.has(key)) {\n                    return storage.get(key);\n                }\n\n                const value = defaultGetValue(row, column, select, rowIndex, columnIndex);\n                storage.set(key, value);\n                return value;\n            };\n\n        const defaultGetLabel =\n            (row, column, select, rowIndex, columnIndex) => {\n                const key = `labelFactory-${column.key}`;\n                select = storage.get(key);\n                if (!select) {\n                    select = getLabelFactory(column);\n                    storage.set(key, select);\n                }\n\n                return strategy.getLabel(row, column, select, rowIndex, columnIndex);\n            };\n\n        const readonlyGetLabel =\n            (row, column, select, rowIndex, columnIndex) => {\n                const key = `getLabel-${rowIndex}x${column.key}`;\n                if (storage.has(key)) {\n                    return storage.get(key);\n                }\n\n                const value = defaultGetLabel(row, column, select, rowIndex, columnIndex);\n                storage.set(key, value);\n                return value;\n            };\n\n\n        this.getValue = defaultGetValue;\n        this.getLabel = defaultGetLabel;\n\n        this.colspan = (row, column, rowIndex, columnIndex) => {\n            const key = `colspan-${rowIndex}x${column.model.key}`;\n            if (storage.has(key)) {\n                return storage.get(key);\n            }\n\n            const value = strategy.colspan(row, column, rowIndex, columnIndex);\n            storage.set(key, value);\n            return value;\n        };\n\n        this.rowspan = (row, column, rowIndex, columnIndex) => {\n            const key = `rowspan-${rowIndex}x${column.model.key}`;\n            if (storage.has(key)) {\n                return storage.get(key);\n            }\n\n            const value = strategy.rowspan(row, column, rowIndex, columnIndex);\n            storage.set(key, value);\n            return value;\n        };\n\n        this.columns = (row, pin, rowIndex) => {\n            const key = `columns-${pin}-${rowIndex}`;\n            if (storage.has(key)) {\n                return storage.get(key);\n            }\n\n            const value = strategy.columns(row, pin, rowIndex);\n            storage.set(key, value);\n            return value;\n        };\n\n        this.setValue = (...args) => strategy.setValue(...args);\n        this.setLabel = (...args) => strategy.setLabel(...args);\n\n        this.columnList = (pin = 'mid') => {\n            const key = `columnList-${pin}`;\n            if (storage.has(key)) {\n                return storage.get(key);\n            }\n\n            const value = strategy.columnList(pin);\n            storage.set(key, value);\n            return value;\n        };\n\n        observeReply(model.sceneChanged)\n            .subscribe(e => {\n                if (e.hasChanges('status')) {\n                    if (e.state.status !== 'stop') {\n                        storage = new Map();\n                    }\n                }\n            });\n\n        observeReply(model.gridChanged)\n            .subscribe(e => {\n                if (e.hasChanges('isReadonly')) {\n                    storage = new Map();\n\n                    if (e.state.isReadonly) {\n                        this.getValue = readonlyGetValue;\n                        this.getLabel = readonlyGetLabel;\n                    } else {\n                        this.getValue = getValue;\n                        this.getLabel = this.getLabel;\n                    }\n                }\n            });\n    }\n}\n\nfunction defaultGetValue(row, column, select) {\n\treturn select(row, column);\n}\n\n// This class is not inheritable, but construct in a way to use it as a composition without binding to `this`.\nclass DataRow {\n\tconstructor(plugin) {\n\t\tconst { model, observeReply } = plugin;\n\t\tlet area = {};\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('column')) {\n\t\t\t\t\tarea = e.state.column.area;\n\t\t\t\t\te.state.column.line;\n\t\t\t\t}\n\t\t\t});\n\n\t\tthis.getValue = defaultGetValue;\n\t\tthis.getLabel = defaultGetValue;\n\t\tthis.setValue = setValue;\n\t\tthis.setLabel = setLabel;\n\n\t\tthis.colspan = (row, column) => column.colspan;\n\t\tthis.rowspan = () => 1;\n\n\t\tconst columnList = (pin = 'mid') => area[pin] || [];\n\n\t\tthis.columnList = columnList;\n\t\tthis.columns = (row, pin) => columnList(pin);\n\t}\n}\n\nconst resolvers = {};\nclass TemplatePath {\n\tconstructor() {\n\t}\n\n\tstatic register(name, resolve) {\n\t\tif (resolvers.hasOwnProperty(name)) {\n\t\t\tthrow new GridError(\n\t\t\t\t'template.path',\n\t\t\t\t`\"${name}\" is already registered`);\n\t\t}\n\n\t\tresolvers[name] = resolve;\n\t\treturn TemplatePath;\n\t}\n\n\tstatic get(source) {\n\t\tconst path = this.find(source);\n\t\tif (!path) {\n\t\t\tthrow new GridError(\n\t\t\t\t'template.path',\n\t\t\t\t'Template path can\\'t be found');\n\t\t}\n\n\t\treturn path;\n\t}\n\n\tstatic find(source) {\n\t\tconst getName = this.name;\n\t\tfor (let key of Object.keys(resolvers)) {\n\t\t\tconst name = getName(key);\n\t\t\tconst value = source[name];\n\t\t\tif (!isUndefined(value) && value !== null) {\n\t\t\t\tconst path = resolvers[key](source, value);\n\t\t\t\tif (path) {\n\t\t\t\t\treturn path;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tstatic getName(name) {\n\t\treturn '_' + name;\n\t}\n\n\tstatic get require() {\n\t\tconst getName = this.name;\n\t\treturn Object.keys(resolvers)\n\t\t\t.reduce((memo, key) => {\n\t\t\t\tmemo[getName(key)] = `^^?${key}`;\n\t\t\t\treturn memo;\n\t\t\t}, {});\n\t}\n}\n\nTemplatePath.register('custom-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('custom-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nclass ColumnModel {\n\tconstructor(type = 'text') {\n\t\tthis.key = null;\n\t\tthis.path = null;\n\t\tthis.labelPath = null;\n\n\t\tthis.type = type;\n\t\tthis.title = null;\n\t\tthis.description = null;\n\t\tthis.pin = 'mid';\n\t\tthis.origin = 'specific';\n\t\tthis.source = 'user';\n\t\tthis.category = 'data';\n\t\tthis.class = null;\n\t\tthis.editor = null;\n\t\tthis.editorOptions = {\n\t\t\tmodelFactory: ({ createDefaultModel }) => createDefaultModel(),\n\t\t\ttrigger: 'click', // click | custom | focus\n\t\t\tcruise: 'control', // control | transparent\n\t\t\tlabel: null,\n\t\t\tvalue: identity,\n\t\t\tactions: []\n\t\t};\n\n\t\tthis.width = null;\n\t\tthis.minWidth = null;\n\t\tthis.maxWidth = null;\n\t\tthis.viewWidth = null;\n\n\t\tthis.widthMode = 'relative'; // relative | absolute | fit-head\n\n\t\tthis.canEdit = true;\n\t\tthis.canResize = true;\n\t\tthis.canSort = true;\n\t\tthis.canMove = true;\n\t\tthis.canFilter = true;\n\t\tthis.canHighlight = true;\n\t\tthis.canFocus = true;\n\n\t\tthis.isVisible = true;\n\t\tthis.index = -1;\n\n\t\tthis.value = null;\n\t\tthis.label = null;\n\n\t\tthis.compare = compare;\n\n\t\tthis.children = [];\n\n\t\tthis.$label = null;\n\t\tthis.$value = null;\n\n\t\tthis.itemLabel = identity;\n\n\t\tthis.startNumber = 1;\n\t}\n\n\ttoString() {\n\t\treturn `${this.type}: ${this.title}`;\n\t}\n}\n\nclass ColumnView {\n\tconstructor(model) {\n\t\tthis.model = model;\n\n\t\tthis.colspan = 1;\n\t\tthis.rowspan = 1;\n\t\tthis.rowIndex = -1;\n\t\tthis.columnIndex = -1;\n\t}\n\n\tstatic model(model) {\n\t\tif (model) {\n\t\t\tColumnView.assign(model);\n\t\t}\n\t\telse {\n\t\t\tmodel = new ColumnModel();\n\t\t}\n\n\t\tmodel.origin = 'custom';\n\t\treturn model;\n\t}\n\n\tstatic assign(body) {\n\t\tconst etalon = this.model();\n\t\tfor (let key of Object.keys(etalon)) {\n\t\t\tif (!body.hasOwnProperty(key)) {\n\t\t\t\tlet etalonValue = etalon[key];\n\t\t\t\tif (isFunction(etalonValue)) {\n\t\t\t\t\tetalonValue = etalonValue.bind(body);\n\t\t\t\t}\n\t\t\t\tbody[key] = etalonValue;\n\t\t\t} else {\n\t\t\t\tconst value = body[key];\n\t\t\t\tif (isArray$1(value)) {\n\t\t\t\t\tbody[key] = Array.from(value);\n\t\t\t\t} else if (isObject(value) && !isFunction(value)) {\n\t\t\t\t\tbody[key] = Object.assign({}, etalon[key], value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn body;\n\t}\n}\n\nclass FormatService {\n    static number(x, format) {\n        return x;\n    }\n\n    static date(x, format) {\n        return x;\n    }\n\n    static currency(x, format) {\n        return x;\n    }\n}\n\nclass DataColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper(...arguments);\n\n\t\tthis.isDefault = true;\n\t\tthis.aggregation = null;\n\t\tthis.aggregationOptions = {\n\t\t\tdistinct: false,\n\t\t\tseparator: '; '\n\t\t};\n\t}\n}\n\nTemplatePath.register('array-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('array-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nclass ArrayColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('array');\n\n\t\tthis.itemType = 'text';\n\t\tthis.itemFormat = '';\n\n\t\tthis.label = function (row) {\n\t\t\tconst value = getValue$1(row, this);\n\t\t\tif (isArray$1(value)) {\n\t\t\t\tlet formatter;\n\t\t\t\tswitch (this.itemType) {\n\t\t\t\t\tcase 'number': {\n\t\t\t\t\t\tformatter = FormatService.number;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'date':\n\t\t\t\t\tcase 'datetime': {\n\t\t\t\t\t\tformatter = FormatService.date;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\tformatter = this.itemLabel.bind(this);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst format = this.itemFormat;\n\t\t\t\treturn value.map(item => formatter(item, format)).join(', ');\n\t\t\t}\n\n\t\t\treturn value;\n\t\t};\n\t}\n}\n\nclass ArrayColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? ArrayColumn.assign(model) : new ArrayColumnModel();\n\t}\n}\n\nTemplatePath.register('bool-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('bool-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nclass BoolColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('bool');\n\n\t\tthis.trueValue = true;\n\t\tthis.falseValue = false;\n\n\t\tthis.editorOptions.cruise = 'transparent';\n\n\t\t// as we use 'this' pointer inside, we can't use lambda in 2 here\n\t\tthis.isIndeterminate = function (value) {\n\t\t\treturn !(value === this.trueValue || value === this.falseValue);\n\t\t};\n\n\t\tthis.isChecked = function (value) {\n\t\t\treturn value === this.trueValue;\n\t\t};\n\t}\n}\n\nclass BoolColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? BoolColumn.assign(model) : new BoolColumnModel();\n\t}\n}\n\nTemplatePath.register('cohort-cell', (template) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: `${template.for}.${template.type}`\n\t};\n});\n\nclass CohortColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper('cohort');\n\n\t\tthis.key = '$cohort';\n\n\t\tthis.canEdit = false;\n\t\tthis.canSort = false;\n\t\tthis.canResize = false;\n\t\tthis.canFocus = false;\n\t\tthis.canFilter = false;\n\t\tthis.category = 'cohort';\n\t}\n}\n\nclass CohortColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? CohortColumn.assign(model) : new CohortColumnModel();\n\t}\n}\n\nTemplatePath.register('currency-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('currency-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\n\nclass CurrencyColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('currency');\n\n\t\tthis.maxLength = 20;\n\t\tthis.symbol = '$';\n\t\tthis.code = 'USD';\n\t}\n}\n\nclass CurrencyColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? CurrencyColumn.assign(model) : new CurrencyColumnModel();\n\t}\n}\n\n// TODO: right now we check the empty result on null, \n// we need to have a way to make it more explicitly\nfunction parseFactory(type, editor) {\n\tswitch (type) {\n\t\tcase 'id': {\n\t\t\ttype = editor ? editor : 'text';\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tswitch (type) {\n\t\tcase 'text':\n\t\tcase 'email':\n\t\tcase 'url':\n\t\tcase 'password':\n\t\t\treturn parseText;\n\t\tcase 'number':\n\t\tcase 'currency':\n\t\t\treturn parseNumber;\n\t\tcase 'date':\n\t\t\treturn parseDate;\n\t\tcase 'time':\n\t\tcase 'datetime':\n\t\t\treturn parseDateTime;\n\t\tcase 'bool':\n\t\t\treturn parseBool;\n\t\tcase 'array':\n\t\t\treturn parseArray;\n\t\tdefault:\n\t\t\treturn identity;\n\t}\n}\n\nfunction compareParseFactory(type, editor) {\n\tswitch (type) {\n\t\tcase 'id': {\n\t\t\ttype = editor ? editor : 'text';\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tswitch (type) {\n\t\tcase 'date':\n\t\t\treturn x => {\n\t\t\t\tconst date = parseDate(x);\n\t\t\t\tif (date) {\n\t\t\t\t\treturn date.getTime();\n\t\t\t\t}\n\n\t\t\t\treturn date;\n\t\t\t};\n\t\tcase 'time':\n\t\tcase 'datetime':\n\t\t\treturn x => {\n\t\t\t\tconst date = parseDateTime(x);\n\t\t\t\tif (date) {\n\t\t\t\t\treturn date.getTime();\n\t\t\t\t}\n\n\t\t\t\treturn date;\n\t\t\t};\n\t\tdefault: {\n\t\t\treturn parseFactory(type, editor);\n\t\t}\n\t}\n}\n\n\n\nfunction resolveType(values) {\n\tconst types = values\n\t\t.filter(x => !(isUndefined(x) || x === null || x === ''))\n\t\t.map(getType$1);\n\n\tif (types.length) {\n\t\tconst test = types[0];\n\t\tif (types.every(x => x === test)) {\n\t\t\treturn test;\n\t\t}\n\t}\n\n\treturn 'text';\n}\n\nfunction getType$1(value) {\n\tif (isArray$1(value)) {\n\t\tif (value.length) {\n\t\t\tconst itemType = findType(value[0]);\n\t\t\tif (!isPrimitive(itemType)) {\n\t\t\t\treturn 'collection';\n\t\t\t}\n\t\t}\n\n\t\treturn 'array';\n\t}\n\n\tif (isNumber(value)) {\n\t\treturn 'number';\n\t}\n\n\tif (isBoolean(value)) {\n\t\treturn 'bool';\n\t}\n\n\tif (isDate$1(value)) {\n\t\treturn 'datetime';\n\t}\n\n\tif (isString(value)) {\n\t\treturn 'text';\n\t}\n\n\tif (isObject(value)) {\n\t\treturn 'object';\n\t}\n\n\treturn 'text';\n\n}\n\nfunction inferType(values) {\n\tconst types = values\n\t\t.filter(x => !(isUndefined(x) || x === null || x === ''))\n\t\t.map(findType);\n\n\tif (types.length) {\n\t\tconst test = types[0];\n\t\tif (types.every(x => x === test)) {\n\t\t\treturn test;\n\t\t}\n\t}\n\n\treturn 'text';\n}\n\nfunction findType(value) {\n\tif (isArray$1(value)) {\n\t\tif (value.length) {\n\t\t\tconst itemType = findType(value[0]);\n\t\t\tif (!isPrimitive(itemType)) {\n\t\t\t\treturn 'collection';\n\t\t\t}\n\t\t}\n\n\t\treturn 'array';\n\t}\n\n\tif (likeNumber(value)) {\n\t\treturn 'number';\n\t}\n\n\tif (isBoolean(value)) {\n\t\treturn 'bool';\n\t}\n\n\tif (likeDateTime(value)) {\n\t\treturn 'datetime';\n\t}\n\n\tif (likeDate(value)) {\n\t\treturn 'date';\n\t}\n\n\tif (isEmail(value)) {\n\t\treturn 'email';\n\t}\n\n\tif (isImage(value)) {\n\t\treturn 'image';\n\t}\n\n\tif (isUrl(value)) {\n\t\treturn 'url';\n\t}\n\n\tif (isString(value)) {\n\t\treturn 'text';\n\t}\n\n\tif (isObject(value)) {\n\t\treturn 'object';\n\t}\n\n\treturn 'text';\n}\n\nfunction isPrimitive(type) {\n\tswitch (type) {\n\t\tcase 'date':\n\t\tcase 'time':\n\t\tcase 'bool':\n\t\tcase 'text':\n\t\tcase 'number':\n\t\tcase 'email':\n\t\tcase 'url':\n\t\t\treturn true;\n\t\tdefault:\n\t\t\treturn false;\n\t}\n}\n\nfunction likeDateTime(value) {\n\tif (value === null || isUndefined(value) || value === '') {\n\t\treturn false;\n\t}\n\n\tif (value instanceof Date) {\n\t\treturn true;\n\t}\n\n\tvalue = '' + value;\n\n\treturn matchISO8601(value);\n}\n\nfunction likeDate(value) {\n\tif (value === null || isUndefined(value) || value === '') {\n\t\treturn false;\n\t}\n\n\tif (value instanceof Date) {\n\t\treturn true;\n\t}\n\n\tvalue = '' + value;\n\n\t// part of ISO_8601 for dates\n\treturn !!value.match(/^(\\d{4})(-(\\d{2})(-(\\d{2})))$/);\n}\n\nfunction likeNumber(value) {\n\tif (isNaN(value)) {\n\t\treturn false;\n\t}\n\n\tconst number = Number.parseFloat(value);\n\treturn !isNaN(number) && isFinite(number);\n}\n\nfunction parseBool(value) {\n\treturn value === null || isUndefined(value)\n\t\t? value\n\t\t: !!value;\n}\n\nfunction parseText(value) {\n\treturn value === null || isUndefined(value)\n\t\t? value\n\t\t: '' + value;\n}\n\nfunction parseDate(value) {\n\tif (value === null || isUndefined(value)) {\n\t\treturn value\n\t}\n\n\tif (value === '') {\n\t\treturn null;\n\t}\n\n\tif (value instanceof Date) {\n\t\treturn new Date(\n\t\t\tvalue.getFullYear(),\n\t\t\tvalue.getMonth(),\n\t\t\tvalue.getDate(),\n\t\t\t0, 0, 0, 0\n\t\t);\n\t}\n\n\tif (likeDate(value) || matchISO8601(value)) {\n\t\tconst yearMonthDay = ('' + value).split('-');\n\t\treturn new Date(\n\t\t\tNumber.parseInt(yearMonthDay[0]),\n\t\t\tNumber.parseInt(yearMonthDay[1]) - 1,\n\t\t\tNumber.parseInt(yearMonthDay[2]),\n\t\t\t0, 0, 0, 0\n\t\t);\n\t}\n\n\treturn new Date('' + value);\n}\n\nfunction parseDateTime(value) {\n\tif (value === null || isUndefined(value)) {\n\t\treturn value\n\t}\n\n\tif (value === '') {\n\t\treturn null;\n\t}\n\n\tif (value instanceof Date) {\n\t\treturn value;\n\t}\n\n\tconst date = new Date('' + value);\n\treturn date;\n}\n\nfunction parseNumber(value) {\n\tif (value === null || isUndefined(value)) {\n\t\treturn value\n\t}\n\n\tif (value === '' || isNaN(value)) {\n\t\treturn null;\n\t}\n\n\tconst number = Number.parseFloat(value);\n\tif (!isNaN(number) && isFinite(number)) {\n\t\treturn number;\n\t}\n\n\treturn null;\n}\n\nfunction parseArray(value) {\n\treturn value;\n}\n\nTemplatePath.register('date-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('date-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nclass DateColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('date');\n\n\t\tthis.format = 'MM/dd/yyyy';\n\t\tthis.parse = parseFactory('date');\n\n\t\tthis.label = function (row) {\n\t\t\tconst value = getValue$1(row, this);\n\t\t\ttry {\n\t\t\t\tconst date = this.parse(value);\n\t\t\t\treturn FormatService.date(date, this.format);\n\t\t\t} catch (ex) {\n\t\t\t\tLog.error('date.column', ex);\n\t\t\t\treturn value;\n\t\t\t}\n\t\t};\n\t}\n}\n\nclass DateColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? DateColumn.assign(model) : new DateColumnModel();\n\t}\n}\n\nTemplatePath.register('datetime-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('datetime-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nclass DateTimeColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('datetime');\n\n\t\tthis.format = 'MM/dd/yyyy h:mm a';\n\t\tthis.dateFormat = 'MM/dd/yyyy';\n\t\tthis.timeFormat = 'h:mm a';\n\t\tthis.parse = parseFactory('datetime');\n\n\t\tthis.label = function (row) {\n\t\t\tconst value = getValue$1(row, this);\n\t\t\ttry {\n\t\t\t\tconst date = this.parse(value);\n\t\t\t\treturn FormatService.date(date, this.format);\n\t\t\t} catch (ex) {\n\t\t\t\tLog.error('datetime.column', ex);\n\t\t\t\treturn value;\n\t\t\t}\n\t\t};\n\t}\n}\n\nclass DateTimeColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? DateTimeColumn.assign(model) : new DateTimeColumnModel();\n\t}\n}\n\nTemplatePath.register('email-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('email-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nclass EmailColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('email');\n\n\t\tthis.editorOptions.trigger = 'custom';\n\t}\n}\n\nclass EmailColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? EmailColumn.assign(model) : new EmailColumnModel();\n\t}\n}\n\nfunction isFileAnImage(name) {\n\treturn !!name && name.toLowerCase().search(/png|jpg|jpeg|svg/) > -1;\n}\n\nTemplatePath.register('file-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('file-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nclass FileColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('file');\n\n\t\tthis.canUpload = yes;\n\t\tthis.editorOptions.trigger = 'custom';\n\n\t\tthis.hasPreview = name => isFileAnImage(name);\n\t\tthis.canSort = false;\n\t\tthis.canFilter = false;\n\t}\n}\n\nclass FileColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? FileColumn.assign(model) : new FileColumnModel();\n\t}\n}\n\nTemplatePath.register('group-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.type\n\t};\n});\n\nTemplatePath.register('group-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nclass GroupColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper('group');\n\n\t\tthis.key = '$group';\n\t\tthis.path = 'key';\n\t\tthis.labelPath = 'key';\n\t\tthis.title = 'Group';\n\t\tthis.offset = 24;\n\t\tthis.canEdit = false;\n\t\tthis.canSort = false;\n\t\tthis.canFilter = false;\n\t\tthis.category = 'control';\n\t\tthis.by = null;\n\t\tthis.label = function (node) {\n\t\t\tif (node.type === 'row') {\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tconst { by, labelPath } = this;\n\t\t\treturn !by || by === node.source ? node[labelPath] : '';\n\t\t};\n\t}\n}\n\nclass GroupColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? GroupColumn.assign(model) : new GroupColumnModel();\n\t}\n}\n\nTemplatePath.register('group-summary-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nclass GroupSummaryColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('group-summary');\n\n\t\tthis.key = '$group.summary';\n\t\tthis.category = 'control';\n\n\t\tthis.canEdit = false;\n\t\tthis.canResize = false;\n\t\tthis.canHighlight = false;\n\t\tthis.canFilter = false;\n\t\tthis.canSort = false;\n\t\tthis.canMove = false;\n\t}\n}\n\nclass GroupSummaryColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? GroupSummaryColumn.assign(model) : new GroupSummaryColumnModel();\n\t}\n}\n\nTemplatePath.register('id-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('id-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nclass IdColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('id');\n\t}\n}\n\nclass IdColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? IdColumn.assign(model) : new IdColumnModel();\n\t}\n}\n\nTemplatePath.register('image-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('image-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nclass ImageColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('image');\n\n\t\tthis.canSort = false;\n\t\tthis.canFilter = false;\n\t\tthis.canUpload = yes;\n\n\t\tthis.hasPreview = name => isFileAnImage(name);\n\t}\n}\n\nclass ImageColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? ImageColumn.assign(model) : new ImageColumnModel();\n\t}\n}\n\nTemplatePath.register('number-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('number-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nclass NumberColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('number');\n\n\t\tthis.format = '';\n\t}\n}\n\nclass NumberColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? NumberColumn.assign(model) : new NumberColumnModel();\n\t}\n}\n\nTemplatePath.register('pad-cell', (template) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: `${template.for}.${template.type}`\n\t};\n});\n\nclass PadColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper('pad');\n\n\t\tthis.key = '$pad';\n\t\tthis.category = 'markup';\n\n\t\tthis.title = '';\n\t\tthis.canEdit = false;\n\t\tthis.canSort = false;\n\t\tthis.canResize = false;\n\t\tthis.canHighlight = false;\n\t\tthis.canFocus = false;\n\t\tthis.canMove = false;\n\t\tthis.canFilter = false;\t\t\n\t\tthis.source = 'generation';\n\t}\n}\n\nclass PadColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? PadColumn.assign(model) : new PadColumnModel();\n\t}\n}\n\nTemplatePath.register('password-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('password-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nclass PasswordColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('password');\n\n\t\tthis.canSort = false;\n\t\tthis.canFilter = false;\n\t}\n}\n\nclass PasswordColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? PasswordColumn.assign(model) : new PasswordColumnModel();\n\t}\n}\n\nTemplatePath.register('pivot-cell', (template) => {\n\treturn {\n\t\tmodel: 'pivot',\n\t\tresource: template.for\n\t};\n});\n\nclass PivotColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper('pivot');\n\n\t\tthis.key = '$pivot';\n\t\tthis.title = 'Pivot';\n\n\t\tthis.source = 'generation';\n\t\tthis.category = 'pivot';\n\t\tthis.canEdit = false;\n\t\tthis.canSort = false;\n\t\tthis.canResize = false;\n\t\tthis.canFilter = false;\n\t\tthis.canMove = false;\n\t}\n}\n\nclass PivotColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? PivotColumn.assign(model) : new PivotColumnModel();\n\t}\n}\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\nclass Guard {\n\t/**\n\t * If value is undefined exception will be thrown\n\t * @param {any} value - Value to check\n\t * @param {string} name - Argument name\n\t */\n\tstatic notUndefined(value, name) {\n\t\tif (isUndefined(value)) {\n\t\t\tthrow new GridError('guard.notUndefined', name);\n\t\t}\n\t}\n\n\n\t/**\n\t * If value is null or undefined exception will be thrown\n\t * @param {any} value - Value to check\n\t * @param {string} name - Argument name\n\t */\n\tstatic notNull(value, name) {\n\t\tif (value === null || isUndefined(value)) {\n\t\t\tthrow new GridError('guard.notNull', name);\n\t\t}\n\t}\n\n\t/**\n\t * If value is null or undefined or empty exception will be thrown\n\t * @param {any} value - Value to check\n\t * @param {string} name - Argument name\n\t */\n\tstatic notNullOrEmpty(value, name) {\n\t\tif (value === null || isUndefined(value) || value === '') {\n\t\t\tthrow new GridError('guard.notNullOrEmpty', name);\n\t\t}\n\t}\n\n\t/**\n\t * If value is not a function exception will be thrown\n\t * @param {any} value - Value to check\n\t * @param {string} name - Argument name\n\t */\n\tstatic invokable(value, name) {\n\t\tif (!isFunction(value)) {\n\t\t\tthrow new GridError('guard.invokable', name);\n\t\t}\n\t}\n\t\n\tstatic hasProperty(instance, name) {\n\t\tGuard.notNull(instance, 'instance');\n\t\tif (!hasOwnProperty.call(instance, name)) {\n\t\t\tthrow new GridError('guard.hasProperty', name);\n\t\t}\n\t}\n}\n\nfunction equals(x, y) {\n\t// TODO: improve equality algorithm\n\tif (x === y) {\n\t\treturn true;\n\t}\n\n\tif (isArray$1(x)) {\n\t\tif (x.length === 0 && y.length === 0) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tif (x instanceof Map) {\n\t\tif (x.size === 0 && y.size === 0) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tif (x instanceof Set) {\n\t\tif (x.size === 0 && y.size === 0) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\nclass Model {\n\tconstructor() {\n\t\tthis.accessors = new Map();\n\t}\n\n\tinject(name, Type) {\n\t\tconst accessor = this.resolveAccessor(name, Type);\n\t\tthis[name + 'Changed'] = accessor.changed;\n\t\tthis[name] = accessor.state;\n\t}\n\n\tresolveAccessor(name, Type) {\n\t\tif (this.accessors.has(name)) {\n\t\t\tthrow new GridError(\n\t\t\t\t'model',\n\t\t\t\t`${name} accessor already exists`\n\t\t\t);\n\t\t}\n\n\t\tconst accessor = this.buildAccessor(name, Type);\n\t\tthis.accessors.set(Type, accessor);\n\t\treturn accessor;\n\t}\n\n\tbuildAccessor(name, Type) {\n\t\tlet state = new Type();\n\n\t\tconst changeSet = new Set();\n\t\tconst reply = () => {\n\t\t\tconst replyChanges = Array.from(changeSet.values())\n\t\t\t\t.reduce((memo, key) => {\n\t\t\t\t\tconst value = state[key];\n\t\t\t\t\tmemo[key] = { newValue: value, oldValue: value };\n\t\t\t\t\treturn memo;\n\t\t\t\t}, {});\n\n\t\t\treturn {\n\t\t\t\tstate,\n\t\t\t\tchanges: replyChanges,\n\t\t\t\thasChanges: replyChanges.hasOwnProperty.bind(replyChanges),\n\t\t\t\ttag: {},\n\t\t\t\tsource: 'watch',\n\t\t\t};\n\t\t};\n\n\t\tconst event = new Event(reply);\n\t\tconst getter = () => state;\n\t\tconst setter = (newState, tag) => {\n\t\t\tif (!isObject(newState)) {\n\t\t\t\tthrow new GridError(\n\t\t\t\t\t`model.${name}`,\n\t\t\t\t\t`\"${newState}\" is not a valid type, should be an object`);\n\t\t\t}\n\n\t\t\tconst changes = {};\n\t\t\tlet hasChanges = false;\n\n\t\t\tconst keys = Object.keys(newState);\n\t\t\tfor (let i = 0, keysLength = keys.length; i < keysLength; i++) {\n\t\t\t\tconst key = keys[i];\n\t\t\t\tif (!state.hasOwnProperty(key)) {\n\t\t\t\t\tthrow new GridError(\n\t\t\t\t\t\t`model.${name}`,\n\t\t\t\t\t\t`\"${key}\" is not a valid key, only [${Object.keys(state).join(', ')}] keys are supported`\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst newValue = newState[key];\n\t\t\t\tconst oldValue = state[key];\n\t\t\t\tif (!equals(newValue, oldValue)) {\n\t\t\t\t\tLog.info('model', `value changed - \"${name}.${key}\"`);\n\t\t\t\t\tGuard.notUndefined(newValue, `model.${name}.${key}`);\n\n\t\t\t\t\tstate[key] = newValue;\n\t\t\t\t\thasChanges = true;\n\t\t\t\t\tchanges[key] = { newValue, oldValue };\n\n\t\t\t\t\tchangeSet.add(key);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tLog.warn('model', `value was not changed - \"${name}.${key}\"`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (hasChanges) {\n\t\t\t\tstate = {\n\t\t\t\t\t...state\n\t\t\t\t};\n\n\t\t\t\tevent.emit({\n\t\t\t\t\tstate,\n\t\t\t\t\tchanges,\n\t\t\t\t\thasChanges: changes.hasOwnProperty.bind(changes),\n\t\t\t\t\ttag: tag || {},\n\t\t\t\t\tsource: 'emit'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\tconst accessor = (...args) => {\n\t\t\tif (args.length) {\n\t\t\t\treturn setter(args[0], args[1]);\n\t\t\t}\n\n\t\t\treturn getter();\n\t\t};\n\n\t\treturn {\n\t\t\tchanged: event,\n\t\t\tstate: accessor,\n\t\t};\n\t}\n\n\tresolve(Type) {\n\t\tlet accessor = this.accessors.get(Type);\n\t\tif (!accessor) {\n\t\t\tconst name = getTypeName(Type);\n\t\t\taccessor = this.resolveAccessor(name, Type);\n\t\t}\n\n\t\treturn accessor;\n\t}\n}\n\nTemplatePath.register('reference-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('reference-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nclass ReferenceColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('reference');\n\n\t\tthis.editorOptions.trigger = 'custom';\t\t\n\t}\n}\n\nclass ReferenceColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? ReferenceColumn.assign(model) : new ReferenceColumnModel();\n\t}\n}\n\nTemplatePath.register('row-details-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nclass RowDetailsColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper('row-details');\n\n\t\tthis.key = '$row.details';\n\t\tthis.category = 'control';\n\n\t\tthis.canEdit = false;\n\t\tthis.canResize = false;\n\t\tthis.canHighlight = false;\n\t\tthis.canFilter = false;\n\t\tthis.canSort = false;\n\t\tthis.canMove = false;\n\t}\n}\n\nclass RowDetailsColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? RowDetailsColumn.assign(model) : new RowDetailsColumnModel();\n\t}\n}\n\nTemplatePath.register('row-expand-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nclass RowExpandColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper('row-expand');\n\n\t\tthis.key = '$row.expand';\n\t\tthis.category = 'control';\n\n\t\tthis.canEdit = false;\n\t\tthis.canResize = false;\n\t\tthis.canFilter = false;\n\t\tthis.canSort = false;\n\t\tthis.canHighlight = false;\n\t\tthis.canMove = false;\n\t}\n}\n\nclass RowExpandColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? RowExpandColumn.assign(model) : new RowExpandColumnModel();\n\t}\n}\n\nTemplatePath.register('row-indicator-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nclass RowIndicatorColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper('row-indicator');\n\n\t\tthis.key = '$row.indicator';\n\t\tthis.category = 'control';\n\n\t\tthis.canEdit = false;\n\t\tthis.canSort = false;\n\t\tthis.canResize = false;\n\t\tthis.canMove = false;\n\t\tthis.canFocus = false;\n\t\tthis.canHighlight = false;\n\t\tthis.canFilter = false;\n\t\tthis.pin = 'left';\n\t}\n}\n\nclass RowIndicatorColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? RowIndicatorColumn.assign(model) : new RowIndicatorColumnModel();\n\t}\n}\n\nTemplatePath.register('row-number-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nclass RowNumberColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper('row-number');\n\n\t\tthis.pin = 'left';\n\t\tthis.key = '$row.number';\n\t\tthis.title = 'No.';\n\t\tthis.canEdit = false;\n\t\tthis.canResize = true;\n\t\tthis.canFocus = false;\n\t\tthis.canMove = false;\n\t\tthis.canHighlight = false;\n\t\tthis.canSort = false;\n\t\tthis.canFilter = false;\n\t\tthis.category = 'control';\n\t}\n}\n\nclass RowNumberColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? RowNumberColumn.assign(model) : new RowNumberColumnModel();\n\t}\n}\n\nTemplatePath.register('row-options-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('row-options-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nclass RowOptionsColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('row-options');\n\n\t\tthis.key = '$row.options';\n\t\tthis.category = 'control';\n\n\t\tthis.canEdit = true;\n\t\tthis.canResize = false;\n\t\tthis.canMove = false;\n\t\tthis.canHighlight = false;\n\t\tthis.canFilter = false;\n\t\tthis.pin = 'right';\n\t}\n}\n\nclass RowOptionsColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? RowOptionsColumn.assign(model) : new RowOptionsColumnModel();\n\t}\n}\n\nTemplatePath.register('select-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('select-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nclass SelectColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper('select');\n\n\t\tthis.key = '$select';\n\t\tthis.title = '';\n\t\tthis.category = 'control';\n\n\t\tthis.canEdit = false;\n\t\tthis.editorOptions.cruise = 'transparent';\n\t\tthis.value = noop;\n\n\t\tthis.canResize = false;\n\t}\n}\n\nclass SelectColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? SelectColumn.assign(model) : new SelectColumnModel();\n\t}\n}\n\nTemplatePath.register('text-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('text-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('text-area-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nclass TextColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('text');\n\n\t\tthis.maxLength = 140;\n\t}\n}\n\nclass TextColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? TextColumn.assign(model) : new TextColumnModel();\n\t}\n}\n\nTemplatePath.register('time-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('time-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nclass TimeColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('time');\n\n\t\tthis.format = 'h:mm a';\n\t}\n}\n\nclass TimeColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? TimeColumn.assign(model) : new TimeColumnModel();\n\t}\n}\n\nTemplatePath.register('url-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('url-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nclass UrlColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('url');\n\n\t\tthis.editorOptions.trigger = 'custom';\n\t}\n}\n\nclass UrlColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? UrlColumn.assign(model) : new UrlColumnModel();\n\t}\n}\n\nfunction merge$2(target, source) {\n\tif (target && source) {\n\t\treturn assignWith$1(target, source, (s, t) => isUndefined(s) ? t : s);\n\t}\n\n\treturn target || clone(source);\n}\n\nfunction columnFactory(model) {\n\tconst { columnList } = model;\n\tconst columnMap = {\n\t\t'array': ArrayColumn,\n\t\t'bool': BoolColumn,\n\t\t'cohort': CohortColumn,\n\t\t'currency': CurrencyColumn,\n\t\t'custom': ColumnView,\n\t\t'date': DateColumn,\n\t\t'datetime': DateTimeColumn,\n\t\t'email': EmailColumn,\n\t\t'file': FileColumn,\n\t\t'group': GroupColumn,\n\t\t'id': IdColumn,\n\t\t'image': ImageColumn,\n\t\t'number': NumberColumn,\n\t\t'pad': PadColumn,\n\t\t'password': PasswordColumn,\n\t\t'pivot': PivotColumn,\n\t\t'reference': ReferenceColumn,\n\t\t'row-details': RowDetailsColumn,\n\t\t'row-expand': RowExpandColumn,\n\t\t'row-indicator': RowIndicatorColumn,\n\t\t'row-number': RowNumberColumn,\n\t\t'row-options': RowOptionsColumn,\n\t\t'select': SelectColumn,\n\t\t'group-summary': GroupSummaryColumn,\n\t\t'text': TextColumn,\n\t\t'time': TimeColumn,\n\t\t'url': UrlColumn\n\t};\n\n\tconst create = (entityType, columnType, body) => {\n\t\tconst Type = columnMap[entityType];\n\t\tconst { reference } = columnList();\n\t\tconst defaultSettings = reference['$default'];\n\t\tbody = merge$2(body, defaultSettings);\n\t\tconst typeSettings = reference[columnType];\n\t\tbody = merge$2(body, typeSettings);\n\n\t\tconst model = Type.model(body);\n\t\treturn new Type(model);\n\t};\n\n\treturn (type, body = null) => {\n\t\tif (!type) {\n\t\t\ttype = 'text';\n\t\t}\n\n\t\tif (columnMap.hasOwnProperty(type)) {\n\t\t\treturn create(type, type, body);\n\t\t}\n\n\t\treturn create('custom', type, body);\n\t};\n}\n\nclass DetailsRow {\n\tconstructor(model, dataRow) {\n\t\tconst createColumn = columnFactory(model);\n\t\tconst emptyColumn = createColumn('pad', { key: 'row-details-pad' });\n\n\t\tthis.columns = dataRow.getColumns;\n\t\tthis.rowspan = dataRow.rowspan;\n\n\t\tthis.colspan = (rowDetails, column) => {\n\t\t\treturn sumBy(dataRow.columnList(column.model.pin), c => c.colspan);\n\t\t};\n\n\t\tthis.columns = (rowDetails, pin) => {\n\t\t\tif (rowDetails.column.model.pin === pin) {\n\t\t\t\treturn [rowDetails.column];\n\t\t\t}\n\n\t\t\treturn [emptyColumn];\n\t\t};\n\n\t\tthis.getValue = () => null;\n\t\tthis.getLabel = () => null;\n\t\tthis.setValue = () => null;\n\t\tthis.setLabel = () => null;\n\t}\n}\n\nclass Aggregation {\n\tconstructor() {\n\t}\n\n\tstatic first(rows, getValue) {\n\t\tif (!rows.length) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn getValue(rows[0]);\n\t}\n\n\tstatic last(rows, getValue) {\n\t\tconst length = rows.length;\n\t\tif (!length) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn getValue(rows[length - 1]);\n\t}\n\n\tstatic max(rows, getValue) {\n\t\tlet length = rows.length;\n\t\tif (!length) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet max = Number.MIN_SAFE_INTEGER;\n\t\twhile (length--) {\n\t\t\tmax = Math.max(max, getValue(rows[length]));\n\t\t}\n\n\t\treturn max;\n\t}\n\n\tstatic min(rows, getValue) {\n\t\tlet length = rows.length;\n\t\tif (!length) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet min = Number.MAX_SAFE_INTEGER;\n\t\twhile (length--) {\n\t\t\tmin = Math.min(min, getValue(rows[length]));\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tstatic minMax(rows, getValue) {\n\t\tlet length = rows.length;\n\t\tif (!length) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet min = Number.MAX_SAFE_INTEGER;\n\t\tlet max = Number.MIN_SAFE_INTEGER;\n\t\twhile (length--) {\n\t\t\tconst value = getValue(rows[length]);\n\t\t\tmin = Math.min(min, value);\n\t\t\tmax = Math.max(max, value);\n\t\t}\n\n\t\treturn [min, max];\n\t}\n\n\tstatic avg(rows, getValue, options) {\n\t\tconst length = rows.length;\n\t\tif (!length) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (options.distinct) {\n\t\t\tconst set = new Set();\n\t\t\treturn Aggregation.sum(rows, getValue, options, set) / set.size;\n\t\t}\n\n\t\treturn Aggregation.sum(rows, getValue, options) / length;\n\t}\n\n\tstatic sum(rows, getValue, options, set) {\n\t\tlet length = rows.length;\n\t\tif (!length) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet sum = 0;\n\t\tif (options.distinct) {\n\t\t\tset = set || new Set();\n\t\t\twhile (length--) {\n\t\t\t\tconst value = getValue(rows[length]);\n\t\t\t\tif (!set.has(value)) {\n\t\t\t\t\tsum += value;\n\t\t\t\t\tset.add(value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\twhile (length--) {\n\t\t\t\tsum += Number(getValue(rows[length]));\n\t\t\t}\n\t\t}\n\n\t\treturn sum;\n\t}\n\n\tstatic join(rows, getValue, options) {\n\t\tconst length = rows.length;\n\t\tif (!length) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet result = getValue(rows[0]);\n\t\tconst separator = options.separator || '';\n\n\t\tif (options.distinct) {\n\t\t\tconst set = new Set();\n\t\t\tlet value = result;\n\t\t\tset.add(value);\n\n\t\t\tlet i = 1;\n\t\t\twhile (i < length) {\n\t\t\t\tvalue = getValue(rows[i]);\n\n\t\t\t\tif (!set.has(value)) {\n\t\t\t\t\tresult += separator + value;\n\t\t\t\t\tset.add(value);\n\t\t\t\t}\n\n\t\t\t\ti++;\n\t\t\t}\n\t\t} else {\n\t\t\tlet i = 1;\n\t\t\twhile (i < length) {\n\t\t\t\tresult += separator + getValue(rows[i]);\n\t\t\t\ti++;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic count(rows, getValue, options) {\n\t\tlet length = rows.length;\n\t\tif (!length) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (options.distinct) {\n\t\t\tlet set = new Set();\n\t\t\twhile (length--) {\n\t\t\t\tconst count = Number(getValue(rows[length]));\n\t\t\t\tset.add(count);\n\t\t\t}\n\n\t\t\treturn set.size;\n\t\t}\n\n\t\treturn length;\n\t}\n\n}\n\nfunction flattenFactory(model) {\n\tconst { mode, summary } = model.group();\n\n\tlet push = (node, pos, result) => result.push(node);\n\tswitch (mode) {\n\t\tcase 'rowspan': {\n\t\t\tpush = (node, pos, result) => {\n\t\t\t\tif (node.level === 0 || pos > 0) {\n\t\t\t\t\tresult.push(node);\n\t\t\t\t}\n\t\t\t};\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tlet pushSummary = noop;\n\tswitch (summary) {\n\t\tcase 'leaf': {\n\t\t\tpushSummary = (node, pos, result, parent, posInParent) => {\n\t\t\t\tif (parent && parent.children.length - 1 === posInParent) {\n\t\t\t\t\tconst { level, key } = node;\n\t\t\t\t\tconst summary = new Node(`${key}-group-summary`, level, 'summary');\n\t\t\t\t\tsummary.rows = Array.from(node.rows);\n\t\t\t\t\tresult.push(summary);\n\t\t\t\t}\n\t\t\t};\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn function flatView(nodes, result = [], parent = null, pos = 0) {\n\t\tfor (let i = 0, iLength = nodes.length; i < iLength; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tpush(node, i, result, parent, pos);\n\n\t\t\tif (node.state.expand) {\n\t\t\t\tconst children = node.children;\n\t\t\t\tif (children.length) {\n\t\t\t\t\tflatView(children, result, node, i);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst { rows, level, key } = node;\n\t\t\t\t\tconst nextLevel = level + 1;\n\t\t\t\t\tfor (let j = 0, jLength = rows.length; j < jLength; j++) {\n\t\t\t\t\t\tconst child = new Node(key, nextLevel, 'row');\n\t\t\t\t\t\tconst row = rows[j];\n\t\t\t\t\t\tchild.rows = [row];\n\n\t\t\t\t\t\tchildren.push(child);\n\t\t\t\t\t\tpush(child, j, result, parent, pos);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tpushSummary(node, i, result, parent, pos);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n}\n\nfunction findFirstLeaf(node) {\n\tif (node.type !== 'group') {\n\t\treturn node;\n\t}\n\n\tif (!node.state.expand) {\n\t\treturn null;\n\t}\n\n\treturn node.children.length && findFirstLeaf(node.children[0]);\n}\n\nclass NodeRow {\n\tconstructor(model, dataRow) {\n\t\tconst { columnList, rowspan } = dataRow;\n\n\t\tthis.columnList = columnList;\n\t\tthis.rowspan = rowspan;\n\n\t\tconst createColumn = columnFactory(model);\n\t\tconst reference = {\n\t\t\tgroup: createColumn('group'),\n\t\t\tsummary: createColumn('group-summary')\n\t\t};\n\n\t\tthis.getLabel =\n\t\t\tthis.getValue = (node, column, select, rowIndex, columnIndex) => {\n\t\t\t\tif (column.type === 'pivot') {\n\t\t\t\t\treturn dataRow.getLabel(node, column, select, rowIndex, columnIndex);\n\t\t\t\t}\n\n\t\t\t\tconst { rows } = model.data();\n\t\t\t\tswitch (node.type) {\n\t\t\t\t\tcase 'group':\n\t\t\t\t\tcase 'summary': {\n\t\t\t\t\t\tconst agg = column.aggregation;\n\t\t\t\t\t\tif (agg) {\n\t\t\t\t\t\t\tif (!Aggregation.hasOwnProperty(agg)) {\n\t\t\t\t\t\t\t\tthrow new GridError(\n\t\t\t\t\t\t\t\t\t'node.row',\n\t\t\t\t\t\t\t\t\t`Aggregation ${agg} is not supported`);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst groupRows = node.rows.map(i => rows[i]);\n\t\t\t\t\t\t\treturn Aggregation[agg](groupRows, select, column.aggregationOptions);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'row': {\n\t\t\t\t\t\tconst rowIndex = node.rows[0];\n\t\t\t\t\t\treturn select(rows[rowIndex], column);\n\t\t\t\t\t}\n\t\t\t\t\tcase 'value': {\n\t\t\t\t\t\treturn select(node, column);\n\t\t\t\t\t}\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow new GridError(\n\t\t\t\t\t\t\t'node.row',\n\t\t\t\t\t\t\t`Invalid node type ${node.type}`\n\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t};\n\n\t\tthis.setValue = (node, column, value, rowIndex, columnIndex) => {\n\t\t\tswitch (node.type) {\n\t\t\t\tcase 'row': {\n\t\t\t\t\tconst { rows } = model.data();\n\t\t\t\t\tconst rowIndex = node.rows[0];\n\t\t\t\t\tdataRow.setValue(rows[rowIndex], column, value, rowIndex, columnIndex);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'value': {\n\t\t\t\t\tdataRow.setValue(node, column, value, rowIndex, columnIndex);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new GridError('node.row', `Can't set value to ${node.type} node`);\n\t\t\t}\n\t\t};\n\n\t\tthis.setLabel = (node, column, value, rowIndex, columnIndex) => {\n\t\t\tswitch (node.type) {\n\t\t\t\tcase 'row': {\n\t\t\t\t\tconst { rows } = model.data();\n\t\t\t\t\tconst rowIndex = node.rows[0];\n\t\t\t\t\tdataRow.setLabel(rows[rowIndex], column, value, rowIndex, columnIndex);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'value': {\n\t\t\t\t\tdataRow.setLabel(node, column, value, rowIndex, columnIndex);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new GridError('node.row', `Can't set label to ${node.type} node`);\n\t\t\t}\n\t\t};\n\n\t\tthis.colspan = (node, column) => {\n\t\t\tif (node.type === 'summary') {\n\t\t\t\treturn sumBy(columnList(column.model.pin), c => c.colspan);\n\t\t\t}\n\n\t\t\treturn column.colspan;\n\t\t};\n\n\t\tthis.columns = (node, pin) => {\n\t\t\tif (node.type === 'summary') {\n\t\t\t\t// TODO: add pin support\n\t\t\t\treturn [reference.summary];\n\t\t\t}\n\n\t\t\treturn columnList(pin);\n\t\t};\n\n\t\tthis.findGroupColumn = (pin) => {\n\t\t\tconst columns = columnList();\n\t\t\tlet groupColumn = columns.find(c => c.model.type === 'group');\n\t\t\tif (!groupColumn) {\n\t\t\t\tgroupColumn = reference.group;\n\t\t\t\tif (groupColumn.model.pin === pin) {\n\t\t\t\t\tconst firstColumn = columnList(pin)[0];\n\t\t\t\t\tgroupColumn.columnIndex = firstColumn ? firstColumn.columnIndex : 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn groupColumn.model.pin !== pin ? null : groupColumn;\n\t\t};\n\t}\n}\n\nclass RowspanNodeRow {\n\tconstructor(model, nodeRow) {\n\t\tconst { columnList, getValue, getLabel, columns } = nodeRow;\n\n\t\tthis.setValue = nodeRow.setValue;\n\t\tthis.setLabel = nodeRow.setLabel;\n\t\tthis.colspan = nodeRow.colspan;\n\t\tthis.columnList = columnList;\n\t\t\n\t\tconst rowspan = (node, column, isRoot = true) => {\n\t\t\tswitch (node.type) {\n\t\t\t\tcase 'group': {\n\t\t\t\t\tif (column.model.type === 'group') {\n\t\t\t\t\t\tif (node.state.expand) {\n\t\t\t\t\t\t\tif (!isRoot || node.source === column.model.by) {\n\t\t\t\t\t\t\t\treturn node.children.reduce((memo, child, i) => memo + rowspan(child, column, false), 0);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (node.children.length) {\n\t\t\t\t\t\t\t\t\treturn rowspan(node.children[0], column, false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn 1;\n\t\t};\n\n\t\tthis.rowspan = rowspan;\n\n\t\tconst spanValue = getValue => (node, column, select) => {\n\t\t\tswitch (node.type) {\n\t\t\t\tcase 'group': {\n\t\t\t\t\tconst leaf = findFirstLeaf(node);\n\t\t\t\t\tif (leaf) {\n\t\t\t\t\t\tconst { rows } = model.data();\n\t\t\t\t\t\tconst rowIndex = leaf.rows[0];\n\t\t\t\t\t\treturn select(rows[rowIndex], column);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn getValue(node, column, select);\n\t\t};\n\n\t\tthis.getLabel = spanValue(getLabel);\n\t\tthis.getValue = spanValue(getValue);\n\n\t\tthis.columns = (node, pin) => {\n\t\t\tswitch (node.type) {\n\t\t\t\tcase 'group': {\n\t\t\t\t\treturn dropWhile(columnList(pin), c => c.model.type === 'group' && c.model.by !== node.source);\n\t\t\t\t}\n\t\t\t\tcase 'row': {\n\t\t\t\t\treturn columnList(pin).filter(c => c.model.type !== 'group');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn columns(node, pin);\n\t\t};\n\t}\n}\n\nclass SubheadNodeRow {\n\tconstructor(nodeRow) {\n\t\tconst { columnList, columns, findGroupColumn } = nodeRow;\n\n\t\tthis.setValue = nodeRow.setValue;\n\t\tthis.setLabel = nodeRow.setLabel;\n\t\tthis.getValue = nodeRow.getValue;\n\t\tthis.getLabel = nodeRow.getLabel;\n\t\tthis.rowspan = nodeRow.rowspan;\n\t\tthis.columnList = columnList;\n\n\t\tthis.colspan = (node, column) => {\n\t\t\tswitch (node.type) {\n\t\t\t\tcase 'group': {\n\t\t\t\t\tif (column.model.type === 'group') {\n\t\t\t\t\t\tconst groupColumn = findGroupColumn(column.model.pin);\n\t\t\t\t\t\tif (groupColumn) {\n\t\t\t\t\t\t\tconst nearGroupColumns = columnList(column.model.pin);\n\t\t\t\t\t\t\tconst groupSpan = takeWhile(nearGroupColumns, c => !c.model.aggregation);\n\t\t\t\t\t\t\treturn sumBy(groupSpan, c => c.colspan);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn nodeRow.colspan(node, column);\n\t\t};\n\n\t\tthis.columns = (node, pin) => {\n\t\t\tswitch (node.type) {\n\t\t\t\tcase 'group': {\n\t\t\t\t\tconst groupColumn = findGroupColumn(pin);\n\t\t\t\t\tif (groupColumn) {\n\t\t\t\t\t\tconst nextColumns = dropWhile(columnList(pin), c => !c.model.aggregation);\n\t\t\t\t\t\treturn [groupColumn].concat(nextColumns);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn columns(node, pin);\n\t\t};\n\t}\n}\n\nclass Lazy {\n    constructor(build) {\n        this.build = build;\n    }\n\n    get instance() {\n        return this.value || (this.value = this.build());\n    }\n}\n\nfunction flattenRows(root) {\n\tconst rowsToUse = rowsToUseFactory();\n\n\tfunction markup(node, rowIndex, columnIndex, rowsLeft, result) {\n\t\tconst view = node.key;\n\t\tconst rowspan = rowsLeft - rowsToUse(node);\n\t\tview.rowspan = rowspan;\n\t\tview.rowIndex = rowIndex;\n\t\tview.columnIndex = columnIndex;\n\n\t\tconst { children } = node;\n\t\tif (children.length) {\n\t\t\tlet width = 0;\n\t\t\tconst childResult = [];\n\t\t\tfor (let child of children) {\n\t\t\t\tconst childView = markup(child, rowIndex + rowspan, columnIndex, rowsLeft - rowspan, childResult);\n\t\t\t\tif (!childView) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst { colspan } = childView;\n\t\t\t\twidth += colspan;\n\t\t\t\tcolumnIndex += colspan;\n\t\t\t}\n\n\t\t\tview.colspan = width;\n\t\t\tif (width > 0) {\n\t\t\t\tresult.push(view);\n\t\t\t\tresult.push(...childResult);\n\t\t\t}\n\t\t} else if (view.model.type !== 'cohort') {\n\t\t\tresult.push(view);\n\t\t}\n\n\t\treturn view;\n\t}\n\n\tconst result = [];\n\tmarkup(root, 0, 0, rowsToUse(root), result);\n\t// remove root \n\tresult.splice(0, 1);\n\treturn layout(result);\n}\n\nfunction layout(columns) {\n\tconst mx = [];\n\n\tcolumns.sort((x, y) => {\n\t\tconst xc = x.rowIndex - y.rowIndex;\n\t\tif (xc === 0) {\n\t\t\treturn x.columnIndex - y.columnIndex;\n\t\t}\n\n\t\treturn xc;\n\t});\n\n\tfor (let column of columns) {\n\t\tif (!mx[column.rowIndex]) {\n\t\t\tmx[column.rowIndex] = [];\n\t\t}\n\t\tmx[column.rowIndex].push(column);\n\t}\n\n\treturn mx;\n}\n\nfunction rowsToUseFactory() {\n\tconst cache = new Map();\n\treturn function rowsToUse(node, depth = 0) {\n\t\tconst { model } = node.key;\n\t\tif (cache.has(model.key)) {\n\t\t\treturn cache.get(model.key);\n\t\t}\n\n\t\tconst { children } = node;\n\t\tlet count = children.length == 0 ? 0 : 1;\n\t\tfor (let child of children) {\n\t\t\tcount = Math.max(count, rowsToUse(child, depth + 1));\n\t\t}\n\n\t\tconst result = 1 + count;\n\t\tcache.set(model.key, result);\n\t\treturn result;\n\t}\n}\n\n\nfunction expand(rows) {\n\tconst mx = [];\n\tconst offsets = [];\n\tfor (let y = 0, height = rows.length; y < height; y++) {\n\t\tconst columns = rows[y];\n\t\tconst offset = offsets.length > y ? offsets[y] : offsets[y] = [0];\n\t\tfor (let x = 0, width = columns.length; x < width; x++) {\n\t\t\tconst column = columns[x];\n\t\t\tconst { rowspan, colspan } = column;\n\t\t\tconst current = offset[0];\n\t\t\tconst next = current + colspan;\n\t\t\tfor (let i = 0; i < rowspan; i++) {\n\t\t\t\tconst yi = y + i;\n\t\t\t\tconst row = mx.length > yi ? mx[yi] : mx[yi] = [];\n\t\t\t\tfor (let j = 0; j < colspan; j++) {\n\t\t\t\t\tconst xj = current + j;\n\t\t\t\t\trow[xj] = column;\n\t\t\t\t}\n\n\t\t\t\tconst gaps = offsets.length > yi ? offsets[yi] : offsets[yi] = [0];\n\t\t\t\tconst index = binarySearch(gaps, current);\n\t\t\t\tif (row[next]) {\n\t\t\t\t\tgaps.splice(index, 1);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst xi = gaps[index];\n\t\t\t\t\tgaps.splice(index, row[xi] ? 1 : 0, next);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn mx;\n}\n\nfunction collapse(matrix) {\n\tconst line = [];\n\tconst height = matrix.length;\n\tif (height) {\n\t\tconst set = new Set();\n\t\tconst lastRow = matrix[height - 1];\n\t\tconst width = lastRow.length;\n\t\tfor (let i = 0; i < width; i++) {\n\t\t\tconst column = lastRow[i];\n\t\t\tif (set.has(column)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tline.push(column);\n\t\t\tset.add(column);\n\t\t}\n\t}\n\n\treturn line;\n}\n\nfunction flattenColumns(columns, result = []) {\n\tfor (let i = 0, length = columns.length; i < length; i++) {\n\t\tconst column = columns[i];\n\t\tresult.push(column);\n\n\t\tconst { children } = column;\n\t\tif (children && children.length) {\n\t\t\tflattenColumns(children, result);\n\t\t}\n\t}\n\n\treturn result;\n}\n\nfunction findLine(columns, key) {\n\tfor (let index = 0, length = columns.length; index < length; index++) {\n\t\tconst column = columns[index];\n\t\tif (column.key === key) {\n\t\t\treturn { columns, index };\n\t\t}\n\n\t\tconst { children } = column;\n\t\tif (children.length) {\n\t\t\tconst result = findLine(children, key);\n\t\t\tif (result) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn null;\n}\n\nfunction mapColumns(columns) {\n\treturn columns.reduce((memo, column) => {\n\t\tmemo[column.key] = column;\n\t\treturn memo;\n\t}, {});\n}\n\nfunction getCellValue(column) {\n\treturn isFunction(column.value)\n\t\t? row => column.value(row)\n\t\t: row => row[column.key];\n}\n\nfunction findColumn(columns, key) {\n\tconst index = findIndex(columns, key);\n\treturn index < 0 ? null : columns[index];\n}\n\nfunction findIndex(columns, key) {\n\tlet { length } = columns;\n\twhile (length--) {\n\t\tconst column = columns[length];\n\t\tif (column.key == key) {\n\t\t\treturn length;\n\t\t}\n\t}\n\n\treturn -1;\n}\n\nfunction lineView(columnRows) {\n\tconst height = columnRows.length;\n\tif (height === 1) {\n\t\treturn Array.from(columnRows[0]);\n\t}\n\n\tif (height > 1) {\n\t\tconst view = expand(columnRows);\n\t\treturn collapse(view);\n\t}\n\n\treturn [];\n}\n\nfunction widthFactory(table, form) {\n\tconst columns = table.data.columns();\n\tconst columnMap = mapColumns(columns);\n\t// 2 because pad column has left padding equals to 1px and width 100%\n\t// that can produce 1.## values\n\tconst PAD_SKIP = 2;\n\n\tconst occupied = columns\n\t\t.filter(c => form.has(c.key) || ('' + c.width).indexOf('%') < 0)\n\t\t.reduce((memo, c) => {\n\t\t\tconst width = calcWidth(c);\n\t\t\tif (width !== null) {\n\t\t\t\tmemo += width;\n\t\t\t}\n\n\t\t\treturn memo;\n\t\t}, 0);\n\n\n\tlet rectWidth = new Lazy(() =>\n\t\ttable.view.width('head-mid')\n\t\t+ table.view.width('head-left')\n\t\t+ table.view.width('head-right')\n\t);\n\n\tfunction calcWidth(column) {\n\t\tlet size = column;\n\t\tif (form.has(column.key)) {\n\t\t\tsize = form.get(column.key);\n\t\t}\n\n\t\tlet { width } = size;\n\t\tif (width || width === 0) {\n\t\t\tif (('' + width).indexOf('%') >= 0) {\n\t\t\t\tconst percent = Number.parseFloat(width);\n\t\t\t\tconst headWidth = rectWidth.instance;\n\t\t\t\tconst skipWidth = column.widthMode === 'absolute' ? PAD_SKIP : occupied + PAD_SKIP;\n\t\t\t\twidth = (headWidth - skipWidth) * percent / 100;\n\t\t\t}\n\n\t\t\tconst MIN_WIDTH = 0;\n\t\t\treturn Math.max(Number.parseInt(width, 10), Number.parseInt(column.minWidth, 10) || MIN_WIDTH);\n\t\t}\n\n\t\t// the right place it's here to avoid recalculation\n\t\tif (column.widthMode === 'fit-head') {\n\t\t\t// can we be here before table rendered? or we need to through error\n\t\t\tconst { cells } = table.head.context.bag;\n\t\t\tconst thCell = Array.from(cells).find(th => th.column === column);\n\t\t\tif (thCell) {\n\t\t\t\treturn table.head.cell(thCell.rowIndex, thCell.columnIndex).width() + PAD_SKIP;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\treturn key => {\n\t\tlet column = columnMap[key];\n\t\tif (!column) {\n\t\t\tthrow new GridError('column.service', `Column ${key} is not found`);\n\t\t}\n\n\t\treturn calcWidth(column);\n\t};\n}\n\nfunction groupBuilder(model) {\n\tconst { rows } = model.data();\n\tconst { pivot } = model.view();\n\tconst nodes = model.scene().rows;\n\tconst columns = model.columnList().line;\n\n\tconst pivotRows = pivot.rows;\n\tconst pivotRowLength = pivotRows[0].length;\n\n\tconst groupBy = model.group().by;\n\tconst groupByLength = groupBy.length;\n\n\tconst columnMap = mapColumns(columns);\n\n\treturn valueFactory => {\n\t\tconst result = [];\n\t\tfor (let i = 0, nodeLength = nodes.length; i < nodeLength; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tconst key = groupBy[Math.min(node.level, groupByLength - 1)];\n\t\t\tconst column = columnMap[key];\n\t\t\tif (!column) {\n\t\t\t\tthrow new GridError(\n\t\t\t\t\t'group.build',\n\t\t\t\t\t`Invalid key \"${key}\"`);\n\t\t\t}\n\n\t\t\tconst aggregation = column.aggregation || 'count';\n\t\t\tif (!Aggregation.hasOwnProperty(aggregation)) {\n\t\t\t\tthrow new GridError(\n\t\t\t\t\t'group.build',\n\t\t\t\t\t`Aggregation ${aggregation} is not registered`);\n\t\t\t}\n\n\t\t\tconst getValue = valueFactory(column);\n\t\t\tconst aggregate = Aggregation[aggregation];\n\n\t\t\tconst aggRow = new Array(pivotRowLength);\n\t\t\tfor (let j = 0, rowLength = node.rows.length; j < rowLength; j++) {\n\t\t\t\tconst rowIndex = node.rows[j];\n\t\t\t\tconst pivotRow = pivotRows[rowIndex];\n\t\t\t\tconst row = rows[rowIndex];\n\t\t\t\tfor (let k = 0; k < pivotRowLength; k++) {\n\t\t\t\t\tif (pivotRow[k]) {\n\t\t\t\t\t\tlet value = aggRow[k];\n\t\t\t\t\t\tif (!value) {\n\t\t\t\t\t\t\tvalue = [];\n\t\t\t\t\t\t\taggRow[k] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalue.push(row);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult.push(aggRow.map(rs => aggregate(rs, getValue, column.aggregationOptions)));\n\t\t}\n\n\t\treturn result;\n\t};\n}\n\nclass PivotRow {\n\tconstructor(plugin, dataRow) {\n\t\tconst { model, observeReply } = plugin;\n\t\tthis.columns = dataRow.columns;\n\t\tthis.rowspan = dataRow.rowspan;\n\t\tthis.colspan = dataRow.colspan;\n\n\t\tthis.getValue = dataRow.getValue;\n\t\tthis.setValue = dataRow.setValue;\n\n\t\tthis.getLabel = dataRow.getLabel;\n\t\tthis.setLabel = dataRow.setLabel;\n\n\t\tthis.columnList = dataRow.columnList;\n\n\t\tlet pivotRows = [];\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('column') || e.hasChanges('rows')) {\n\t\t\t\t\tconst { rows } = model.view().pivot;\n\t\t\t\t\tif (rows.length) {\n\t\t\t\t\t\tif (model.group().by.length) {\n\t\t\t\t\t\t\tconst build = groupBuilder(model);\n\t\t\t\t\t\t\tpivotRows = build(getValueFactory);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpivotRows = rows;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst pivotIndex = e.state.column.line.findIndex(c => c.model.type === 'pivot');\n\n\t\t\t\t\t\tthis.getValue = (row, column, select, rowIndex, columnIndex) => {\n\t\t\t\t\t\t\tif (column.type === 'pivot') {\n\t\t\t\t\t\t\t\tconst pivotRow = pivotRows[rowIndex];\n\t\t\t\t\t\t\t\treturn pivotRow[columnIndex - pivotIndex];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn dataRow.getValue(row, column, select, rowIndex, columnIndex);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthis.getLabel = (row, column, select, rowIndex, columnIndex) => {\n\t\t\t\t\t\t\tif (column.type === 'pivot') {\n\t\t\t\t\t\t\t\tconst pivotRow = pivotRows[rowIndex];\n\t\t\t\t\t\t\t\treturn pivotRow[columnIndex - pivotIndex];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn dataRow.getLabel(row, column, select, rowIndex, columnIndex);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tpivotRows = [];\n\t\t\t\t\t\tthis.getValue = dataRow.getValue;\n\t\t\t\t\t\tthis.getLabel = dataRow.getLabel;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n}\n\nclass Renderer {\n\tconstructor(plugin) {\n\t\tconst { model, observe, observeReply } = plugin;\n\n\t\tconst dataRow = new DataRow(plugin);\n\t\tconst pivotRow = new CacheStrategy(plugin, new PivotRow(plugin, dataRow));\n\t\tconst nodeRow = new NodeRow(model, pivotRow);\n\t\tconst nestNodeRow = new CacheStrategy(plugin, nodeRow);\n\t\tconst subheadNodeRow = new CacheStrategy(plugin, new SubheadNodeRow(nodeRow));\n\t\tconst rowspanNodeRow = new CacheStrategy(plugin, new RowspanNodeRow(model, nodeRow));\n\t\tconst rowDetails = new CacheStrategy(plugin, new DetailsRow(model, pivotRow));\n\t\tconst defaultStrategy = pivotRow;\n\n\t\tconst strategies = new Map();\n\t\tstrategies.set(RowDetails, rowDetails);\n\n\t\tconst selectNodeRowStrategy = () => {\n\t\t\tconst { mode } = model.group();\n\t\t\tswitch (mode) {\n\t\t\t\tcase 'subhead':\n\t\t\t\t\tstrategies.set(Node, subheadNodeRow);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'rowspan':\n\t\t\t\t\tstrategies.set(Node, rowspanNodeRow);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tstrategies.set(Node, nestNodeRow);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\n\t\tselectNodeRowStrategy();\n\t\tobserve(model.groupChanged)\n\t\t\t.subscribe(selectNodeRowStrategy);\n\n\t\t// Public interface\n\t\tthis.defaultStrategy = defaultStrategy;\n\n\t\tthis.colspan = (row, column, rowIndex, columnIndex) => {\n\t\t\tconst strategy = strategies.get(row.constructor) || defaultStrategy;\n\t\t\treturn strategy.colspan(row, column, rowIndex, columnIndex);\n\t\t};\n\n\t\tthis.rowspan = (row, column, rowIndex, columnIndex) => {\n\t\t\tconst strategy = strategies.get(row.constructor) || defaultStrategy;\n\t\t\treturn strategy.rowspan(row, column, rowIndex, columnIndex);\n\t\t};\n\n\t\tthis.columns = (row, pin, rowIndex) => {\n\t\t\tconst strategy = strategies.get(row.constructor) || defaultStrategy;\n\t\t\treturn strategy.columns(row, pin, rowIndex);\n\t\t};\n\n\t\tthis.getValue = (row, column, rowIndex, columnIndex) => {\n\t\t\tconst strategy = strategies.get(row.constructor) || defaultStrategy;\n\t\t\treturn strategy.getValue(row, column, getValue$1, rowIndex, columnIndex);\n\t\t};\n\n\t\tthis.setValue = (row, column, value, rowIndex, columnIndex) => {\n\t\t\tconst strategy = strategies.get(row.constructor) || defaultStrategy;\n\t\t\treturn strategy.setValue(row, column, value, rowIndex, columnIndex);\n\t\t};\n\n\t\tthis.getLabel = (row, column, rowIndex, columnIndex) => {\n\t\t\tconst strategy = strategies.get(row.constructor) || defaultStrategy;\n\t\t\treturn strategy.getLabel(row, column, getLabel, rowIndex, columnIndex);\n\t\t};\n\n\t\tthis.setLabel = (row, column, value, rowIndex, columnIndex) => {\n\t\t\tconst strategy = strategies.get(row.constructor) || defaultStrategy;\n\t\t\treturn strategy.setLabel(row, column, value, rowIndex, columnIndex);\n\t\t};\n\n\t\tthis.rows = {\n\t\t\tleft: [],\n\t\t\tright: [],\n\t\t\tmid: []\n\t\t};\n\n\t\tconst invalidateRows = () => {\n\t\t\tconst { rows } = model.scene();\n\t\t\tconst { pinTop, pinBottom } = model.row();\n\n\t\t\tthis.rows = {\n\t\t\t\ttop: pinTop,\n\t\t\t\tbody: rows,\n\t\t\t\tbottom: pinBottom\n\t\t\t};\n\t\t};\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('rows')) {\n\t\t\t\t\tinvalidateRows();\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.rowChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('pinTop') || e.hasChanges('pinBottom')) {\n\t\t\t\t\tinvalidateRows();\n\t\t\t\t}\n\t\t\t});\n\t}\n}\n\nclass TextSelection {\n  static set(element) {    \n    if (document.body.createTextRange) {\n      const range = document.body.createTextRange();\n      range.moveToElementText(element);\n      range.select();\n    } else if (window.getSelection) {\n      const selection = window.getSelection();\n      const range = document.createRange();\n      range.selectNodeContents(element);\n      selection.removeAllRanges();\n      selection.addRange(range);\n    } else {\n      Log.error('text.selection', 'Could not select text in element: Unsupported browser.');\n    }\n  }\n  \n  static clear() {\n    if (window.getSelection) {\n      const selection = window.getSelection();\n      selection.removeAllRanges();\t\n    }\n  }\n}\n\nclass BodyLet {\n\tconstructor(plugin) {\n\t\tconst { model, observe, disposable } = plugin;\n\t\tconst render = new Renderer(plugin);\n\n\t\tthis.plugin = plugin;\n\t\tthis.render = render;\n\t\tthis.columns = pin => render.defaultStrategy.columnList(pin);\n\n\t\tobserve(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('rows')) {\n\t\t\t\t\tthis.tryShowBlankLayer();\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserve(model.mouseChanged)\n\t\t\t.subscribe(({ state }) => {\n\t\t\t\tconst { code, status, target } = state;\n\t\t\t\t\n        if (target && code === 'right' && status === 'up') {\n\t\t\t\t\tthis.targetElement = target.element;\n\t\t\t\t\tthis.targetElement.classList.add('q-grid-can-select-text');\n\t\t\t\t\tTextSelection.set(this.targetElement);\n\t\t\t\t}\n\n\t\t\t\tif (this.targetElement && status === 'down') {\n\t\t\t\t\tTextSelection.clear();\n\t\t\t\t\tif (this.targetElement.classList) {\n\t\t\t\t\t\tthis.targetElement.classList.remove('q-grid-can-select-text');\n\t\t\t\t\t}\n          \n\t\t\t\t\tthis.targetElement = null;\n\t\t\t\t}\n\n\t\t\t});\n\n\t\tthis.tryShowBlankLayer();\n\t}\n\n\ttryShowBlankLayer() {\n\t\tLog.info('view.let', 'invalidate');\n\n\t\tconst { model, table } = this.plugin;\n\t\tconst { rows } = model.scene();\n\n\t\tif (!(rows.length || model.data().rows.length)) {\n\t\t\tif (!table.view.hasLayer('blank')) {\n\t\t\t\ttable.view.addLayer('blank');\n\t\t\t}\n\t\t} else {\n\t\t\tif (table.view.hasLayer('blank')) {\n\t\t\t\ttable.view.removeLayer('blank');\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass Cache {\n\tconstructor() {\n\t\tthis.items = {};\n\t}\n\n\tset(key, value) {\n\t\tthis.items[key] = value;\n\t}\n\n\tget(key) {\n\t\tconst entry = this.find(key);\n\t\tif (!entry) {\n\t\t\tthrow new GridError(\n\t\t\t\t'cache.get',\n\t\t\t\t`Entry with key was not found \"${key}\"`);\n\t\t}\n\n\t\treturn entry;\n\t}\n\n\thas(key) {\n\t\tconst items = this.items;\n\t\treturn items.hasOwnProperty(key);\n\t}\n\n\tfind(key) {\n\t\tconst items = this.items;\n\t\tif (items.hasOwnProperty(key)) {\n\t\t\treturn items[key];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tremove(key) {\n\t\tif (!this.items.hasOwnProperty(key)) {\n\t\t\tthrow new GridError(\n\t\t\t\t'cache.remove',\n\t\t\t\t`Entry with key was not found \"${key}\"`);\n\t\t}\n\n\t\tdelete this.items[key];\n\t}\n\n\tclear() {\n\t\tthis.items = {};\n\t}\n}\n\nclass BodyState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.cache = new Cache();\n\t}\n}\n\nclass BoxHost {\n\tconstructor(host, plugin) {\n\t\tconst { model, observeReply } = plugin;\n\n\t\thost.classList.add(GRID_PREFIX);\n\n\t\tobserveReply(model.dragChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('isActive')) {\n\t\t\t\t\tif (model.drag().isActive) {\n\t\t\t\t\t\thost.classList.add(`${GRID_PREFIX}-drag`);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\thost.classList.remove(`${GRID_PREFIX}-drag`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n}\n\nvar css_escape = {exports: {}};\n\n/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */\n\n(function (module, exports) {\n(function(root, factory) {\n\t// https://github.com/umdjs/umd/blob/master/returnExports.js\n\t{\n\t\t// For Node.js.\n\t\tmodule.exports = factory(root);\n\t}\n}(typeof commonjsGlobal != 'undefined' ? commonjsGlobal : commonjsGlobal, function(root) {\n\n\tif (root.CSS && root.CSS.escape) {\n\t\treturn root.CSS.escape;\n\t}\n\n\t// https://drafts.csswg.org/cssom/#serialize-an-identifier\n\tvar cssEscape = function(value) {\n\t\tif (arguments.length == 0) {\n\t\t\tthrow new TypeError('`CSS.escape` requires an argument.');\n\t\t}\n\t\tvar string = String(value);\n\t\tvar length = string.length;\n\t\tvar index = -1;\n\t\tvar codeUnit;\n\t\tvar result = '';\n\t\tvar firstCodeUnit = string.charCodeAt(0);\n\t\twhile (++index < length) {\n\t\t\tcodeUnit = string.charCodeAt(index);\n\t\t\t// Note: there’s no need to special-case astral symbols, surrogate\n\t\t\t// pairs, or lone surrogates.\n\n\t\t\t// If the character is NULL (U+0000), then the REPLACEMENT CHARACTER\n\t\t\t// (U+FFFD).\n\t\t\tif (codeUnit == 0x0000) {\n\t\t\t\tresult += '\\uFFFD';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is in the range [\\1-\\1F] (U+0001 to U+001F) or is\n\t\t\t\t// U+007F, […]\n\t\t\t\t(codeUnit >= 0x0001 && codeUnit <= 0x001F) || codeUnit == 0x007F ||\n\t\t\t\t// If the character is the first character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039), […]\n\t\t\t\t(index == 0 && codeUnit >= 0x0030 && codeUnit <= 0x0039) ||\n\t\t\t\t// If the character is the second character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039) and the first character is a `-` (U+002D), […]\n\t\t\t\t(\n\t\t\t\t\tindex == 1 &&\n\t\t\t\t\tcodeUnit >= 0x0030 && codeUnit <= 0x0039 &&\n\t\t\t\t\tfirstCodeUnit == 0x002D\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character-as-code-point\n\t\t\t\tresult += '\\\\' + codeUnit.toString(16) + ' ';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is the first character and is a `-` (U+002D), and\n\t\t\t\t// there is no second character, […]\n\t\t\t\tindex == 0 &&\n\t\t\t\tlength == 1 &&\n\t\t\t\tcodeUnit == 0x002D\n\t\t\t) {\n\t\t\t\tresult += '\\\\' + string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If the character is not handled by one of the above rules and is\n\t\t\t// greater than or equal to U+0080, is `-` (U+002D) or `_` (U+005F), or\n\t\t\t// is in one of the ranges [0-9] (U+0030 to U+0039), [A-Z] (U+0041 to\n\t\t\t// U+005A), or [a-z] (U+0061 to U+007A), […]\n\t\t\tif (\n\t\t\t\tcodeUnit >= 0x0080 ||\n\t\t\t\tcodeUnit == 0x002D ||\n\t\t\t\tcodeUnit == 0x005F ||\n\t\t\t\tcodeUnit >= 0x0030 && codeUnit <= 0x0039 ||\n\t\t\t\tcodeUnit >= 0x0041 && codeUnit <= 0x005A ||\n\t\t\t\tcodeUnit >= 0x0061 && codeUnit <= 0x007A\n\t\t\t) {\n\t\t\t\t// the character itself\n\t\t\t\tresult += string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Otherwise, the escaped character.\n\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character\n\t\t\tresult += '\\\\' + string.charAt(index);\n\n\t\t}\n\t\treturn result;\n\t};\n\n\tif (!root.CSS) {\n\t\troot.CSS = {};\n\t}\n\n\troot.CSS.escape = cssEscape;\n\treturn cssEscape;\n\n}));\n}(css_escape));\n\nvar cssEscape = css_escape.exports;\n\nfunction build$1(style) {\n\treturn buildLines(style).join('\\n');\n}\n\nfunction buildLines(style) {\n\treturn Object\n\t\t.keys(style)\n\t\t.reduce((memo, key) => {\n\t\t\tconst entry = style[key];\n\t\t\tconst body = Object\n\t\t\t\t.keys(entry)\n\t\t\t\t.reduce((memo, key) => {\n\t\t\t\t\tmemo.push(`\\t${key}:${entry[key]} !important;`);\n\t\t\t\t\treturn memo;\n\t\t\t\t}, []);\n\n\t\t\tmemo.push(`${key}{\\n${body.join('\\n')}\\n}`);\n\t\t\treturn memo;\n\t\t}, []);\n}\n\nfunction sheet(id, source) {\n\tconst sheetId = `${id}-${source}`;\n\tlet sheet = document.getElementById(sheetId);\n\tconst getSheet = () => {\n\t\tif (!sheet) {\n\t\t\tsheet = document.createElement('style');\n\t\t\tsheet.type = 'text/css';\n\t\t\tsheet.id = escapeAttr(sheetId);\n\t\t\tdocument.getElementsByTagName('head')[0].appendChild(sheet);\n\t\t}\n\n\t\treturn sheet;\n\t};\n\n\treturn {\n\t\tset: css => {\n\t\t\tconst sheet = getSheet();\n\t\t\tconst lines = buildLines(css);\n\t\t\tconst styleId = `#${escape$2(id)}`;\n\t\t\tsheet.innerHTML = lines.map(line => `${styleId} ${line}`).join('\\n');\n\t\t},\n\t\tremove: () => {\n\t\t\tif (sheet) {\n\t\t\t\tsheet.parentNode.removeChild(sheet);\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction escapeAttr(name) {\n\treturn ('' + name).replace(/\\s|\\t|\\n|\"|'/g, '_');\n}\n\nfunction escape$2(name) {\n\treturn cssEscape(escapeAttr(name));\n}\n\nfunction bodyCellClassifier(column) {\n    const classList = [\n        `${GRID_PREFIX}-the-${escapeAttr(column.key)}`,\n        `${GRID_PREFIX}-${escapeAttr(column.type)}`,\n    ];\n\n    if (column.editor) {\n        classList.push(`${GRID_PREFIX}-${escapeAttr(column.editor)}`);\n    }\n\n    if (column.viewWidth) {\n        classList.push(`${GRID_PREFIX}-has-view-width`);\n    }\n\n    if (column.class) {\n        classList.push(escapeAttr(column.class));\n    }\n\n    const className = ' ' + classList.join(' ');\n    return element => element.className += className;\n}\n\nfunction headCellClassifier(column) {\n    const classList = [];\n    if (column.canEdit) {\n        classList.push(`${GRID_PREFIX}-can-edit`);\n    }\n\n    if (column.canResize) {\n        classList.push(`${GRID_PREFIX}-can-resize`);\n    }\n\n    if (column.canSort) {\n        classList.push(`${GRID_PREFIX}-can-sort`);\n    }\n\n    if (column.canMove) {\n        classList.push(`${GRID_PREFIX}-can-move`);\n    }\n\n    if (column.canFilter) {\n        classList.push(`${GRID_PREFIX}-can-filter`);\n    }\n\n    if (column.canHighlight) {\n        classList.push(`${GRID_PREFIX}-can-highlight`);\n    }\n\n    if (column.widthMode) {\n        classList.push(`${GRID_PREFIX}-${column.widthMode}`);\n    }\n\n    const className = ' ' + classList.join(' ');\n    return element => element.className += className;\n}\n\nclass CellSelector {\n\tconstructor(model, table) {\n\t\tthis.model = model;\n\t\tthis.table = table;\n\t}\n\n\tmap(items) {\n\t\tconst selectionState = this.model.selection();\n\t\tswitch (selectionState.unit) {\n\t\t\tcase 'row':\n\t\t\t\treturn this.mapFromRows(items);\n\t\t\tcase 'column':\n\t\t\t\treturn this.mapFromColumns(items);\n\t\t\tcase 'cell':\n\t\t\t\treturn this.mapFromCells(items);\n\t\t\tcase 'mix':\n\t\t\t\treturn this.mapFromMix(items);\n\t\t\tdefault:\n\t\t\t\tthrow new GridError('cell.selector', `Invalid unit ${selectionState.unit}`);\n\t\t}\n\t}\n\n\tmapFromRows(items) {\n\t\tconst { table } = this;\n\t\tconst result = [];\n\t\tconst rows = table.data.rows();\n\n\t\tfor (let item of items) {\n\t\t\tconst index = rows.indexOf(item);\n\t\t\tfor (let cell of table.body.row(index).cells()) {\n\t\t\t\tresult.push(cell);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tmapFromColumns(items) {\n\t\tconst { table } = this;\n\t\tconst result = [];\n\t\tconst columns = table.data.columns();\n\n\t\tfor (let item of items) {\n\t\t\tconst index = columns.findIndex(c => c === item);\n\t\t\tresult.push(...table.body.column(index).cells());\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tmapFromCells(items) {\n\t\tconst { table } = this;\n\t\tconst result = [];\n\t\tconst rows = table.data.rows();\n\t\tconst columns = table.data.columns();\n\n\t\tfor (let item of items) {\n\t\t\tconst rowIndex = rows.indexOf(item.row);\n\t\t\tconst columnIndex = columns.findIndex((c) => c === item.column);\n\t\t\tresult.push(table.body.cell(rowIndex, columnIndex));\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tmapFromMix(items) {\n\t\tconst entries = Array.from(items);\n\t\tconst rows = entries.filter(item => item.unit === 'row').map(item => item.item);\n\t\tconst cells = entries.filter(item => item.unit === 'cell').map(item => item.item);\n\n\t\treturn [\n\t\t\t...this.mapFromRows(rows),\n\t\t\t...this.mapFromCells(cells)\n\t\t];\n\t}\n}\n\nfunction copyToClipboard(text) {\n\tconst textArea = document.createElement(\"textarea\");\n\n\t//\n\t// *** This styling is an extra step which is likely not required. ***\n\t//\n\t// Why is it here? To ensure:\n\t// 1. the element is able to have focus and selection.\n\t// 2. if element was to flash render it has minimal visual impact.\n\t// 3. less flakyness with selection and copying which **might** occur if\n\t//    the textarea element is not visible.\n\t//\n\t// The likelihood is the element won't even render, not even a\n\t// flash, so some of these are just precautions. However in\n\t// Internet Explorer the element is visible whilst the popup\n\t// box asking the user for permission for the web page to\n\t// copy to the clipboard.\n\t//\n\n\t// Place in top-left corner of screen regardless of scroll position.\n\ttextArea.style.position = 'fixed';\n\ttextArea.style.top = 0;\n\ttextArea.style.left = 0;\n\n\t// Ensure it has a small width and height. Setting to 1px / 1em\n\t// doesn't work as this gives a negative w/h on some browsers.\n\ttextArea.style.width = '2em';\n\ttextArea.style.height = '2em';\n\n\t// We don't need padding, reducing the size if it does flash render.\n\ttextArea.style.padding = 0;\n\n\t// Clean up any borders.\n\ttextArea.style.border = 'none';\n\ttextArea.style.outline = 'none';\n\ttextArea.style.boxShadow = 'none';\n\n\t// Avoid flash of white box if rendered for any reason.\n\ttextArea.style.background = 'transparent';\n\n\ttextArea.value = text;\n\n\tdocument.body.appendChild(textArea);\n\ttextArea.focus();\n\ttextArea.select();\n\n\ttry {\n\t\tdocument.execCommand('copy');\n\t} catch (ex) {\n\t\tthrow new GridError('clipboard', ex.message)\n\t}\n\n\tdocument.body.removeChild(textArea);\n}\n\nclass Disposable {\n\tconstructor() {\n\t\tthis.disposes = [];\n\t}\n\n\tadd(resource) {\n\t\tGuard.notNull(resource, 'resource');\n\n\t\tconst test = resource;\n\t\tif (isFunction(test.finalize)) {\n\t\t\tthis.disposes.push(() => test.finalize());\n\t\t\treturn;\n\t\t}\n\n\t\tif (isFunction(test.unsubscribe)) {\n\t\t\tthis.disposes.push(() => test.unsubscribe());\n\t\t\treturn;\n\t\t}\n\n\t\tif (isFunction(test)) {\n\t\t\tthis.disposes.push(test);\n\t\t\treturn;\n\t\t}\n\n\t\tthrow new GridError(\n\t\t\t'disposable',\n\t\t\t`Resource is not a disposable`\n\t\t);\n\t}\n\n\tremove(resource) {\n\t\tconst index = this.disposes.indexOf(resource);\n\t\tif (index >= 0) {\n\t\t\tthis.disposes.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfinalize() {\n\t\tconst disposes = this.disposes;\n\t\tthis.disposes = [];\n\n\t\tfor (const dispose of disposes) {\n\t\t\tdispose();\n\t\t}\n\t}\n}\n\nclass UnsubscribableLike {\n  constructor(off) {\n    this.off = off;\n    this.closed = false;\n  }\n\n  unsubscribe() {\n    if (!this.closed) {\n      this.off();\n      \n      this.off = null;\n      this.closed = true;\n    }\n  }\n}\n\nclass ObservableEvent {\n  constructor(nextSignal, disposable) {\n    this.errorSignal = new Event();\n    this.nextSignal = nextSignal;\n    this.disposable = disposable;\n  }\n\n  subscribe(...args) {\n    let observer = args[0];\n    if (isFunction(observer)) {\n      observer = {\n        next: args[0],\n        error: args[1],\n        complete: args[2]\n      };\n    }\n\n    if (observer.error) {\n      const errorOff = this.errorSignal.on(ex => observer.error(ex));\n      this.disposable.add(errorOff);\n    }\n\n    if (observer.next) {\n      const eventOff = this.subscribeEvent(e => observer.next(e));\n\n      let disposed = false;\n      const unsubscribe = () => {\n        if (!disposed) {\n          disposed = true;\n\n          eventOff();\n          this.disposable.remove(unsubscribe);\n\n          if (observer.complete) {\n            observer.complete();\n          }\n        }\n      };\n\n      this.disposable.add(unsubscribe);\n      return new UnsubscribableLike(unsubscribe);\n    }\n\n    return new UnsubscribableLike(noop);\n  }\n\n  subscribeEvent(next) {\n    return this\n      .nextSignal\n      .on(e => {\n        try {\n          next(e);\n        } catch (ex) {\n          this.catchError(ex);\n          throw ex;\n        }\n      });\n  }\n\n  catchError(ex) {\n    this.errorSignal.emit(ex);\n    throw ex;\n  }\n\n  toPromise() {\n    return new Promise(resolve => {\n      let isResolved = false;\n      const sub = this.subscribe(() => {\n        resolve();\n        isResolved = true;\n        if (sub) {\n          sub.unsubscribe();\n          sub = null;\n        }\n      });\n\n      if (isResolved && sub) {\n        sub.unsubscribe();\n      }\n    });\n  };\n\n  pipe(...operators) {\n    let source = this;\n    for (let op of operators) {\n      source = op(source);\n    }\n\n    return source;\n  }\n}\n\nclass ObservableReplyEvent extends ObservableEvent {\n  subscribeEvent(next) {\n    return this\n      .nextSignal\n      .watch(e => {\n        try {\n          next(e);\n        } catch (ex) {\n          this.catchError(ex);\n        }\n      });\n  }\n}\n\nclass SubjectLike extends ObservableEvent {\n  constructor() {\n    super(\n      new Event(),\n      new Disposable()\n    );\n\n    this.isCompleted = false;\n  }\n\n  next(value) {\n    if (this.isCompleted) {\n      return;\n    }\n\n    this.nextSignal.emit(value);\n  }\n\n  error(ex) {\n    if (this.isCompleted) {\n      return;\n    }\n\n    this.catchError(ex);\n  }\n\n  complete() {\n    if (!this.isCompleted) {\n      this.isCompleted = true;\n    }\n  }\n}\n\nclass Operator extends SubjectLike {\n  constructor(subscriber) {\n    super();\n\n    this.subscriber = subscriber;\n  }\n\n  subscribe(...args) {\n    super.subscribe(...args);\n    this.subscriber(this);\n  }\n}\n\nclass Command {\n\tconstructor(context = {}) {\n\t\tthis.execute = yes;\n\t\tthis.canExecute = yes;\n\t\tthis.canExecuteCheck = new SubjectLike();\n\n\t\tthis.shortcut = '';\n\t\tthis.priority = -1;\n\t\tthis.source = '';\n\t\tthis.sink = null;\n\n\t\tObject.assign(this, context);\n\t}\n\n\tclone(context = {}) {\n\t\tconst cmd = new Command(this);\n\t\tObject.assign(cmd, context);\n\t\treturn cmd;\n\t}\n}\n\nclass ClipboardLet {\n    constructor(plugin, shortcut) {\n        const { model, table } = plugin;\n\n        this.copy = new Command({\n            priority: 1,\n            source: 'clipboard.let',\n            shortcut: 'ctrl+c',\n            canExecute: () => {\n                const { status } = model.edit();\n                const { copy } = model.clipboard();\n                return status === 'view' && copy.canExecute();\n            },\n            execute: () => {\n                const { cell } = model.navigation();\n                if (cell) {\n                    const { copy } = model.clipboard();\n                    if (copy.execute() !== false) {\n                        const getLabel = getLabelFactory(cell.column);\n                        copyToClipboard(getLabel(cell.row));\n                        table.view.focus();\n                    }\n                }\n\n                return true;\n            }\n        });\n\n        shortcut.register([this.copy]);\n    }\n}\n\nclass ClipboardState {\n    constructor() {\n        this.copy = new Command();\n    }\n}\n\nfunction merge$1(settings) {\n\tconst context = assignWith$1({\n\t\tequals: (l, r) => l === r,\n\t\tupdate: (l, r /*left, i*/) => {\n\t\t\tassignWith$1(l, r);\n\t\t\treturn l;\n\t\t},\n\t\tremove: (l, left, i) => {\n\t\t\tleft.splice(i, 1);\n\t\t\treturn l;\n\t\t},\n\t\tinsert: (r, left) => {\n\t\t\tleft.push(r);\n\t\t\treturn r;\n\t\t}\n\t}, settings);\n\n\treturn (left, right, result) => {\n\t\tconst ls = left.slice();\n\t\tconst rs = right.slice();\n\t\tlet updated = 0;\n\t\tlet removed = 0;\n\n\t\tresult = result || left;\n\t\tfor (let i = 0, lsLength = ls.length; i < lsLength; i++) {\n\t\t\tconst l = ls[i];\n\t\t\tlet matched = false;\n\t\t\tfor (let j = 0, rsLength = rs.length; j < rsLength; j++) {\n\t\t\t\tconst r = rs[j];\n\t\t\t\tif (context.equals(l, r, i, j)) {\n\t\t\t\t\tcontext.update(l, r, result, result.indexOf(l));\n\t\t\t\t\tupdated++;\n\t\t\t\t\tmatched = true;\n\t\t\t\t\trs.splice(j, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!matched) {\n\t\t\t\tcontext.remove(l, result, result.indexOf(l));\n\t\t\t\tremoved++;\n\t\t\t}\n\t\t}\n\n\t\tconst inserted = rs.length;\n\t\tfor (let i = 0; i < inserted; i++) {\n\t\t\tcontext.insert(rs[i], result);\n\t\t}\n\n\t\tif (context.sort) {\n\t\t\tleft.sort(context.sort(left, right));\n\t\t}\n\n\t\treturn {updated, removed, inserted};\n\t};\n}\n\nfunction merge(left, right, force = false) {\n\tlet canAssign;\n\tif (force) {\n\t\tcanAssign = (source, target) => !isUndefined(target) && target !== null ? target : source;\n\t}\n\telse {\n\t\tcanAssign = (source, target) => !isUndefined(target) && target !== null && source === null ? target : source;\n\t}\n\n\tconst doMerge = merge$1({\n\t\tequals: (l, r) => l.key === r.key,\n\t\tupdate: (l, r) => assignWith$1(l, r, canAssign),\n\t\tinsert: (r, left) => left.push(r),\n\t\tremove: noop\n\t});\n\n\treturn doMerge(left, right);\n}\n\nfunction hasChanges(statistics) {\n\treturn statistics.some(st => st.inserted || st.update);\n}\n\nfunction generateFactory(model) {\n\tconst { data } = model;\n\tconst createColumn = columnFactory(model);\n\treturn () => {\n\t\tconst { rows } = data();\n\t\tconst htmlColumns = model.columnList().columns;\n\n\t\tconst spawnColumns = [];\n\t\tconst { generation, typeDetection } = model.columnList();\n\t\tif (generation) {\n\t\t\tlet settings = {\n\t\t\t\trows,\n\t\t\t\tcolumnFactory: createColumn,\n\t\t\t\tdeep: false,\n\t\t\t\tcohort: false,\n\t\t\t\ttypeDetection\n\t\t\t};\n\n\t\t\tswitch (generation) {\n\t\t\t\tcase 'shallow': {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'deep': {\n\t\t\t\t\tsettings.deep = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'cohort': {\n\t\t\t\t\tsettings.deep = true;\n\t\t\t\t\tsettings.cohort = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new GridError(\n\t\t\t\t\t\t'column.list.generate',\n\t\t\t\t\t\t`Invalid generation mode \"${generation}\"`\n\t\t\t\t\t);\n\t\t\t}\n\n\t\t\tspawnColumns.push(...generate(settings));\n\t\t}\n\n\t\tconst columns = Array.from(data().columns);\n\n\t\tlet statistics = [];\n\t\tif (spawnColumns.length) {\n\t\t\tstatistics.push(\n\t\t\t\tmerge(columns, spawnColumns, false)\n\t\t\t);\n\t\t}\n\n\t\tif (htmlColumns.length) {\n\t\t\tstatistics.push(\n\t\t\t\tmerge(columns, htmlColumns, true)\n\t\t\t);\n\t\t}\n\n\t\treturn {\n\t\t\tcolumns,\n\t\t\tstatistics,\n\t\t\thasChanges: hasChanges(statistics)\n\t\t};\n\t};\n}\n\nfunction generate(settings) {\n\tconst context = assignWith$1({\n\t\tdeep: true,\n\t\tcohort: false,\n\t\trows: [],\n\t\tcolumnFactory: () => new TextColumnModel(),\n\t\ttitle: startCase$1,\n\t\ttestNumber: 10,\n\t\ttypeDetection: 'inference'\n\t}, settings);\n\n\tif (context.rows.length) {\n\t\treturn build(\n\t\t\tcontext.rows[0],\n\t\t\t[],\n\t\t\t{\n\t\t\t\tcolumnFactory: context.columnFactory,\n\t\t\t\tdeep: context.deep,\n\t\t\t\tcohort: context.cohort,\n\t\t\t\ttitle: context.title,\n\t\t\t\ttypeDetection: context.typeDetection,\n\t\t\t\ttestRows: context.rows.slice(0, context.testNumber),\n\t\t\t}\n\t\t);\n\t}\n\n\treturn [];\n}\n\nfunction build(graph, pathParts, settings) {\n\tconst { columnFactory, deep, cohort, title, testRows, typeDetection } = settings;\n\n\tconst props = Object.getOwnPropertyNames(graph);\n\treturn props.reduce((memo, prop) => {\n\t\tconst propParts = [...pathParts, prop];\n\t\tconst propValue = compile$1(propParts);\n\t\tconst propPath = propParts.join('.');\n\n\t\tconst subject = graph[prop];\n\t\tconst type = typeDetection === 'raw'\n\t\t\t? resolveType(testRows.map(propValue))\n\t\t\t: inferType(testRows.map(propValue));\n\n\t\tswitch (type) {\n\t\t\tcase 'array': {\n\t\t\t\tconst column = columnFactory(type).model;\n\t\t\t\tcolumn.key = propPath;\n\t\t\t\tcolumn.title = title(propPath, graph, column.length);\n\t\t\t\tcolumn.value = propValue;\n\t\t\t\tcolumn.source = 'generation';\n\t\t\t\tif (subject.length) {\n\t\t\t\t\tcolumn.itemType = getType$1(subject[0]);\n\t\t\t\t\tswitch (column.itemType) {\n\t\t\t\t\t\tcase 'date': {\n\t\t\t\t\t\t\tcolumn.itemFormat = columnFactory('date').model.format;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'datetime': {\n\t\t\t\t\t\t\tcolumn.itemFormat = columnFactory('datetime').model.format;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tmemo.push(column);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'collection': {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'object': {\n\t\t\t\tif (deep) {\n\t\t\t\t\tconst columns = build(\n\t\t\t\t\t\tsubject,\n\t\t\t\t\t\tpropParts,\n\t\t\t\t\t\tsettings\n\t\t\t\t\t);\n\n\t\t\t\t\tif (cohort) {\n\t\t\t\t\t\tconst column = columnFactory('cohort').model;\n\t\t\t\t\t\tcolumn.key = propPath;\n\t\t\t\t\t\tcolumn.title = title(propPath, graph, column.length);\n\t\t\t\t\t\tcolumn.value = propValue;\n\t\t\t\t\t\tcolumn.source = 'generation';\n\t\t\t\t\t\tcolumn.children.push(...columns);\n\t\t\t\t\t\tmemo.push(column);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmemo.push(...columns);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tconst column = columnFactory(type).model;\n\t\t\t\tcolumn.key = propPath;\n\t\t\t\tcolumn.title = title(propPath, graph, column.length);\n\t\t\t\tcolumn.value = propValue;\n\t\t\t\tcolumn.source = 'generation';\n\t\t\t\tmemo.push(column);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn memo;\n\t}, []);\n}\n\nclass ColumnListHost {\n\tconstructor(model, canCopy, parseFactory) {\n\t\tthis.model = model;\n\t\tthis.canCopy = canCopy;\n\t\tthis.parseFactory = parseFactory;\n\t}\n\n\tgenerateKey(source) {\n\t\tif (!isUndefined(source.editor)) {\n\t\t\treturn `$default.${source.editor}`;\n\t\t}\n\n\t\tif (!isUndefined(source.type)) {\n\t\t\treturn `$default.${source.type}`;\n\t\t}\n\n\t\treturn '$default';\n\t}\n\n\tcopy(target, source) {\n\t\tconst canCopy = this.canCopy;\n\t\tconst parseFactory = this.parseFactory;\n\n\t\tObject.keys(source)\n\t\t\t.filter(key => canCopy(key, source, target))\n\t\t\t.forEach(key => {\n\t\t\t\tconst sourceValue = source[key];\n\t\t\t\tconst accessor = compile$1([key]);\n\t\t\t\tconst targetValue = accessor(target);\n\t\t\t\tconst targetType = getType$1(targetValue);\n\t\t\t\tlet value = sourceValue;\n\t\t\t\tif (targetValue !== null && !isUndefined(targetValue)) {\n\t\t\t\t\tconst parse = parseFactory(targetType);\n\t\t\t\t\tconst typedValue = parse(sourceValue, targetValue);\n\t\t\t\t\tif (typedValue !== null) {\n\t\t\t\t\t\tvalue = typedValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\taccessor(target, value);\n\t\t\t});\n\t}\n\n\tadd(column) {\n\t\tconst { columnList, scene, data } = this.model;\n\n\t\tconst columns = columnList().columns.concat([column]);\n\t\tcolumnList({ columns }, {\n\t\t\tsource: 'column.list.host',\n\t\t\tbehavior: 'core'\n\t\t});\n\n\t\tif (scene().status !== 'idle') {\n\t\t\tdata({\n\t\t\t\tcolumns: Array.from(data().columns)\n\t\t\t}, {\n\t\t\t\tsource: 'column.list.host'\n\t\t\t});\n\t\t}\n\t}\n\n\tregister(column) {\n\t\tconst { columnList } = this.model;\n\t\tconst reference = clone(columnList().reference);\n\n\t\treference[column.type || '$default'] = column;\n\t\tcolumnList({ reference }, {\n\t\t\tsource: 'column.list.host',\n\t\t\tbehavior: 'core'\n\t\t});\n\t}\n\n\textract(key, type) {\n\t\tconst { model } = this;\n\n\t\tconst buildColumn = columnFactory(model);\n\n\t\tlet tplColumn = findColumn(model.columnList().line, key);\n\t\tif (tplColumn) {\n\t\t\treturn buildColumn(type, tplColumn);\n\t\t}\n\n\t\ttplColumn = buildColumn(type || 'text').model;\n\t\ttplColumn.key = key;\n\t\ttplColumn.source = 'template';\n\n\t\tconst dataColumn = findColumn(model.data().columns, key);\n\t\tif (dataColumn) {\n\t\t\tthis.copy(tplColumn, dataColumn);\n\t\t}\n\n\t\treturn tplColumn;\n\t}\n\n\tdelete(key) {\n\t\tconst { columnList, data } = this.model;\n\n\t\tconst htmlColumns = columnList().columns;\n\t\tconst index = findIndex(htmlColumns, key);\n\t\tif (index >= 0) {\n\t\t\tconst columns = Array.from(htmlColumns);\n\t\t\tcolumns.splice(index, 1);\n\t\t\tcolumnList({ columns }, { source: 'column.list.host', behavior: 'core' });\n\t\t}\n\n\t\tconst dataColumns = Array.from(data().columns);\n\t\tconst line = findLine(dataColumns, key);\n\t\tif (line) {\n\t\t\tline.columns.splice(line.index, 1);\n\n\t\t\t// trigger columns pipe unit\n\t\t\tdata({ columns: dataColumns }, { source: 'column.list.host' });\n\t\t}\n\t}\n}\n\nfunction preOrderDFS(nodes, visit, memo = null, parent = null) {\n\tfor (let i = 0, length = nodes.length; i < length; i++) {\n\t\tconst node = nodes[i];\n\t\tconst nodeMemo = visit(node, memo, parent, i);\n\t\tpreOrderDFS(node.children, visit, nodeMemo, node);\n\t}\n\n\treturn memo;\n}\n\nfunction filterNode(node, test, parent = null) {\n\tconst { children } = node;\n\tnode = copy(node);\n\n\tlet result = false;\n\tfor (let i = 0, length = children.length; i < length; i++) {\n\t\tconst child = children[i];\n\t\tresult = filterNode(child, test, node) || result;\n\t}\n\n\tif (parent) {\n\t\tif (result || test(node)) {\n\t\t\tparent.children.push(node);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\treturn node;\n}\n\nfunction findLeaves(node, result = []) {\n\tconst { children } = node;\n\tif (!children.length) {\n\t\tresult.push(node);\n\t\treturn result;\n\t}\n\n\tfor (let i = 0, length = children.length; i < length; i++) {\n\t\tconst child = children[i];\n\t\tfindLeaves(child, result);\n\t}\n\n\treturn result;\n}\n\nfunction findNode(node, test, parent = null, index = -1, path = []) {\n\tif (test(node)) {\n\t\treturn { node, parent, index, path };\n\t}\n\n\tpath = path.slice();\n\tpath.push(node);\n\n\tconst { children } = node;\n\tfor (let i = 0, length = children.length; i < length; i++) {\n\t\tconst child = children[i];\n\t\tconst result = findNode(child, test, node, i, path);\n\t\tif (result) {\n\t\t\treturn result;\n\t\t}\n\t}\n\n\treturn null;\n}\n\nfunction calk(node) {\n\tconst result = new Node(node.key, node.level, node.type);\n\tresult.rows = Array.from(node.rows);\n\tresult.children = Array.from(node.children);\n\tresult.state = cloneDeepWith(node.state);\n\tresult.source = node.source;\n\tresult.value = node.value;\n\treturn result;\n}\n\nfunction copy(node) {\n\tconst result = new Node(node.key, node.level, node.type);\n\tresult.value = node.value;\n\tresult.source = node.source;\n\tresult.state.expand = node.state.expand;\n\treturn result;\n}\n\nfunction bend(line) {\n\tif (line.length === 0) {\n\t\tthrow new GridError('node.service', 'Line have no nodes');\n\t}\n\n\tconst root = copy(line[0]);\n\tconst parentStack = [root];\n\tfor (let i = 1, length = line.length; i < length; i++) {\n\t\tconst current = line[i];\n\n\t\tlet parent = parentStack[parentStack.length - 1];\n\t\twhile (current.level <= parent.level) {\n\t\t\tparentStack.pop();\n\t\t\tparent = parentStack[parentStack.length - 1];\n\t\t}\n\n\t\tconst child = copy(current);\n\t\tchild.level = parent.level + 1;\n\n\t\tparent.children.push(child);\n\t\tparentStack.push(child);\n\t}\n\n\treturn root;\n}\n\nfunction sortIndexFactory(model) {\n\tconst templateIndex = model.columnList().columns.map(c => c.key);\n\n\treturn (columns, scores) => {\n\t\tconst { length } = columns;\n\t\tscores = Object.assign({\n\t\t\tlist: column => (column.category === 'data' || column.category === 'cohort') ? 0.1 : 0.3,\n\t\t\tindex: () => 0.2,\n\t\t\tview: column => length + ((column.category !== 'data' && column.category !== 'cohort') ? 0.1 : 0.3),\n\t\t\ttemplate: () => length + 0.4\n\t\t}, scores);\n\n\t\tconst viewIndex = columns.map(c => c.key);\n\n\t\tconst sort = sortFactory$1(scores)(templateIndex, viewIndex);\n\t\tconst left = sort(columns.filter(c => c.pin === 'left'));\n\t\tconst middle = sort(columns.filter(c => c.pin === 'mid'));\n\t\tconst right = sort(columns.filter(c => c.pin === 'right'));\n\n\t\treturn left.concat(middle).concat(right);\n\t};\n}\n\nfunction sortFactory$1(scores) {\n\treturn (templateIndex, viewIndex) => {\n\t\tconst compare = compareFactory(scores, templateIndex, viewIndex);\n\t\treturn columns => {\n\t\t\tconst columnIndex = Array.from(columns);\n\t\t\tcolumnIndex.sort(compare);\n\n\t\t\treturn columnIndex.map(c => c.key);\n\t\t};\n\t};\n}\n\nfunction compareFactory(scoreFor, templateIndex, viewIndex) {\n\tconst viewFind = findFactory(viewIndex);\n\tconst templateFind = findFactory(templateIndex);\n\n\tconst weightCache = {};\n\tconst getWeight = column => {\n\t\tconst key = column.key;\n\t\tif (weightCache.hasOwnProperty(key)) {\n\t\t\treturn weightCache[key];\n\t\t}\n\n\t\tconst candidates = [\n\t\t\tcolumn.index + scoreFor.index(column),\n\t\t\tviewFind(key) + scoreFor.view(column),\n\t\t\ttemplateFind(key) + scoreFor.template(column)\n\t\t];\n\n\t\tconst weights = candidates.filter(w => w >= 0);\n\t\tconst weight = weights.length ? weights[0] : -1;\n\t\tweightCache[key] = weight;\n\n\t\treturn weight;\n\t};\n\n\treturn (x, y) => {\n\t\tconst xi = getWeight(x);\n\t\tconst yi = getWeight(y);\n\n\t\treturn yi === -1 ? -1 : xi === -1 ? 1 : xi - yi;\n\t};\n}\n\nfunction findFactory(index) {\n\tconst map = index.reduce((memo, key, i) => {\n\t\tmemo.set(key, i);\n\t\treturn memo;\n\t}, new Map());\n\n\treturn key => (map.has(key) ? map.get(key) : -1);\n}\n\nfunction mergeTree(newTree, oldTree, buildIndex) {\n\tconst current = running(newTree, buildIndex);\n\tconst screen = former(oldTree, current);\n\tconst insertNear = insertFactory(current, screen);\n\tconst insertCohort = insertCohortFactory(current, screen);\n\n\tconst root = current.line[0];\n\tif (!screen.set.has(root.key.model.key)) {\n\t\tscreen.line.unshift(copy(root));\n\t\tscreen.line.forEach(n => n.level++);\n\t}\n\n\tfor (let i = 1, length = current.line.length; i < length; i++) {\n\t\tconst node = current.line[i];\n\t\tconst { model } = node.key;\n\t\tif (screen.set.has(model.key)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst prevNode = current.line[i - 1];\n\t\tif (model.type === 'cohort') {\n\t\t\tinsertCohort(prevNode, node);\n\t\t} else {\n\t\t\tinsertNear(prevNode, node, i);\n\t\t}\n\t}\n\n\treturn bend(screen.line);\n}\n\nfunction running(tree, buildIndex) {\n\tconst result = {\n\t\tline: [],\n\t\tmap: new Map()\n\t};\n\n\tpreOrderDFS([tree], node => {\n\t\tresult.line.push(node);\n\t\tresult.map.set(node.key.model.key, node.key);\n\n\t\t// As we use pre order direction we can manipulate with children without affecting on algorithm.\n\t\t// Below we sort columns in appropriate order.\n\t\tconst columns = node.children.map(child => child.key.model);\n\t\tconst index = buildIndex(columns);\n\n\t\tlet cursor = 0;\n\t\tconst indexMap = index.reduce((memo, key) => {\n\t\t\tmemo[key] = cursor++;\n\t\t\treturn memo;\n\t\t}, {});\n\n\t\tnode.children.sort((x, y) => indexMap[x.key.model.key] - indexMap[y.key.model.key]);\n\t});\n\n\treturn result;\n}\n\nfunction former(tree, current) {\n\tconst result = {\n\t\tline: [],\n\t\tset: new Set()\n\t};\n\n\tpreOrderDFS([tree], node => {\n\t\t// Filter out nodes if they were deleted from newTree.\n\t\tconst { key } = node.key.model;\n\t\tconst view = current.map.get(key);\n\t\tif (view) {\n\t\t\tconst newNode = copy(node);\n\t\t\tnewNode.key = view;\n\t\t\tresult.line.push(newNode);\n\t\t\tresult.set.add(key);\n\t\t}\n\t});\n\n\treturn result;\n}\n\nfunction insertFactory(current, screen) {\n\tconst { line } = screen;\n\treturn (prevNode, node, i) => {\n\t\tlet pos = line.findIndex(n => n.key.model.key === prevNode.key.model.key);\n\n\t\tconst target = copy(node);\n\t\ttarget.level = node.level;\n\n\t\tif (everyNextIsNew(current, screen, i)) {\n\t\t\tline.push(target);\n\t\t} else {\n\t\t\tline.splice(pos + 1, 0, target);\n\t\t}\n\t};\n}\n\nfunction insertCohortFactory(current, screen) {\n\tconst insertNear = insertFactory(current, screen);\n\tconst { line } = screen;\n\treturn (prevNode, node) => {\n\t\tconst set = new Set(node.children.map(n => n.key.model.key));\n\t\tconst index = line.findIndex(n => set.has(n.key.model.key));\n\n\t\tif (index < 0) {\n\t\t\tinsertNear(prevNode, node);\n\t\t\treturn;\n\t\t}\n\n\t\tconst target = copy(node);\n\t\tconst { level } = line[index];\n\t\ttarget.level = level;\n\t\tline.splice(index, 0, target);\n\n\t\tfor (let i = index + 1, end = line.length; i < end; i++) {\n\t\t\tconst child = line[i];\n\t\t\tif (child.level !== level) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (set.has(child.key.model.key)) {\n\t\t\t\tchild.level = level + 1;\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction everyNextIsNew(current, screen, index) {\n\tconst { line } = current;\n\n\tlet n;\n\twhile ((n = line[++index])) {\n\t\tif (screen.set.has(n.key.model.key)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nclass ColumnListState {\n\tconstructor() {\n\t\tthis.generation = null; // deep | shallow | cohort | null\n\t\tthis.typeDetection = 'inference'; // inference | raw\n\n\t\tconst root = new CohortColumnModel();\n\t\troot.key = '$root';\n\n\t\tthis.index = new Node(new CohortColumn(root), 0);\n\t\t\n\t\tthis.columns = [];\n\t\tthis.reference = {};\n\t\tthis.line = [];\n\t}\n}\n\nTemplatePath.register('filter-row-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nclass FilterRowColumnModel extends ColumnModel {\n\tconstructor(model) {\n\t\tsuper();\n\n\t\tObject.assign(this, model);\n\n\t\tthis.key = `$filter.row.${model.key}`;\n\t\tthis.type = 'filter-row';\n\t\tthis.category = 'control';\n\n\t\tthis.canResize = false;\n\t\tthis.canSort = false;\n\t\tthis.canMove = false;\n\n\t\tthis.model = model;\n\t}\n}\n\nclass FilterRowColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(new FilterRowColumnModel(model));\n\t}\n}\n\nclass CommandKey {\n  constructor(name) {\n    this.name = name;\n  }\n}\n\nfunction commandKey(name) {\n  return CommandKey(name);\n}\n\nfunction generateCommandKey() {\n  return CommandKey(\"some name\");\n}\n\nclass CompositeCommandManager {\n\tconstructor(manager) {\n\t\tthis.manager = manager;\n\t}\n\n\tfilter(commands) {\n\t\treturn this.manager.filter(commands);\n\t}\n\n\tinvoke(commands, context, source) {\n\t\treturn this.manager.invoke(commands, context, source);\n\t}\n}\n\nclass TableCommandManager extends CommandManager {\n\tconstructor(apply, table) {\n\t\tsuper(apply);\n\n\t\tthis.table = table;\n\t}\n\n\tfilter(commands, source) {\n\t\tif (source === 'editor' || this.isViewActive()) {\n\t\t\treturn super.filter(commands, source);\n\t\t}\n\n\t\treturn [];\n\t}\n\n\tisViewActive() {\n\t\treturn this.table.view.isFocused();\n\t}\n}\n\nfunction dataPipe(rows, context, next) {\n\tconst { model } = context;\n\n\taddDataRows(model, rows);\n\taddDataColumns(model);\n\n\tmodel.pipe({\n\t\teffect: Object.assign({}, model.pipe().effect, { data: rows })\n\t}, {\n\t\tsource: 'data.pipe',\n\t\tbehavior: 'core'\n\t});\n\t\n\tnext(rows);\n}\n\nfunction addDataRows(model, rows) {\n\tconst tag = {\n\t\tsource: 'data.pipe',\n\t\tbehavior: 'core'\n\t};\n\n\tmodel.data({ rows }, tag);\n}\n\nfunction addDataColumns(model) {\n\tconst getColumns = generateFactory(model);\n\tconst createColumn = columnFactory(model);\n\tconst { hasChanges, columns } = getColumns();\n\n\tconst allColumns = columns\n\t\t.map(columnBody => createColumn(columnBody.type, columnBody).model);\n\n\tif (hasChanges) {\n\t\tconst tag = {\n\t\t\tsource: 'data.pipe',\n\t\t\tbehavior: 'core'\n\t\t};\n\n\t\tmodel.data({ columns: allColumns }, tag);\n\t}\n}\n\nfunction filterPipe(rows, context, next) {\n\tGuard.notNull(rows, 'rows');\n\n\tconst { model } = context;\n\n\tlet result = rows;\n\tif (rows.length) {\n\t\tconst { match, custom } = model.filter();\n\t\tconst matchPredicate = match(context);\n\n\t\tlet test;\n\t\tif (matchPredicate !== yes && custom !== yes) {\n\t\t\ttest = (row) => matchPredicate(row) && custom(row);\n\t\t} else if (matchPredicate !== yes) {\n\t\t\ttest = (row) => matchPredicate(row);\n\t\t} else if (custom !== yes) {\n\t\t\ttest = (row) => custom(row);\n\t\t}\n\n\t\tif (test) {\n\t\t\tresult = [];\n\t\t\tfor (let i = 0, length = rows.length; i < length; i++) {\n\t\t\t\tconst row = rows[i];\n\t\t\t\tif (test(row)) {\n\t\t\t\t\tresult.push(row);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tmodel.pipe({\n\t\teffect: Object.assign({}, model.pipe().effect, { filter: result })\n\t}, {\n\t\tsource: 'filter.pipe',\n\t\tbehavior: 'core'\n\t});\n\n\tnext(result);\n}\n\nfunction paginationPipe(memo, context, next) {\n\tGuard.notNull(memo, 'memo');\n\n\tconst { model } = context;\n\n\tif (memo.hasOwnProperty('nodes') && memo.nodes.length) {\n\t\tconst { flattenFactory } = model.group();\n\n\t\tconst page = paginate(model, memo.nodes);\n\t\tconst flatten = flattenFactory(model);\n\n\t\tmemo.rows = flatten(page);\n\t\tnext(memo);\n\t\treturn;\n\t}\n\n\tif (memo.hasOwnProperty('rows')) {\n\t\tconst page = paginate(model, memo.rows);\n\t\tmemo.rows = page;\n\t\tnext(memo);\n\t\treturn;\n\t}\n\n\tconst rows = paginate(model, memo);\n\tnext(rows);\n}\n\nfunction paginate(model, rows) {\n\tconst { pinTop, pinBottom } = model.row();\n\tconst { mode } = model.scroll();\n\tlet { size, current } = model.pagination();\n\n\tconst pinned = new Set([...pinTop, ...pinBottom]);\n\tif (pinned.size) {\n\t\trows = rows.filter(row => !pinned.has(row));\n\t}\n\n\tconst count = rows.length;\n\tconst last = Math.max(0, Math.floor((count - 1) / size));\n\tcurrent = Math.min(last, current);\n\tconst start = current * size;\n\n\tmodel.pagination({ count, current }, { source: 'pagination.pipe', behavior: 'core' });\n\treturn mode === 'virtual' ? rows : rows.slice(start, start + size);\n}\n\nfunction orderFactory(model) {\n\tconst { sort } = model;\n\treturn by => {\n\t\tconst { trigger } = sort();\n\t\tif (trigger.indexOf('reorder') >= 0) {\n\t\t\tlet index = 0;\n\t\t\tconst indexMap = {};\n\t\t\tpreOrderDFS(model.columnList().index.children, node => {\n\t\t\t\tconst { key } = node.key.model;\n\t\t\t\tindexMap[key] = index++;\n\t\t\t});\n\n\t\t\tby.sort((x, y) => indexMap[getKey(x)] - indexMap[getKey(y)]);\n\t\t}\n\n\t\treturn by;\n\t};\n}\n\nfunction getKey(pair) {\n\tlet key;\n\tif (isString(pair)) {\n\t\tconst signedKey = pair.split(/[+-]/);\n\t\tkey = signedKey[1] || signedKey[0];\n\t} else {\n\t\tkey = Object.keys(pair)[0];\n\t}\n\n\tif (!key) {\n\t\tthrow new GridError(\n\t\t\t'sort.service',\n\t\t\t`Key is not defined in \"${pair}\"`);\n\t}\n\n\treturn key;\n}\n\nfunction getDirection(pair) {\n\tif (isString(pair)) {\n\t\tconst directions = { '-': 'desc', '+': 'asc' };\n\t\treturn directions[pair[0]] || 'asc';\n\t}\n\n\tconst pairKey = getKey(pair);\n\treturn pair[pairKey];\n}\n\nfunction getMap(pairs) {\n\treturn pairs.reduce((memo, pair) => {\n\t\tconst key = getKey(pair);\n\t\tmemo[key] = getDirection(pair);\n\t\treturn memo;\n\t}, {});\n}\n\nfunction getIndex(pairs, key) {\n\treturn pairs.map(getKey).findIndex(pairKey => pairKey === key);\n}\n\nfunction sortPipe(rows, context, next) {\n\tGuard.notNull(rows, 'rows');\n\n\tconst { model } = context;\n\n\tlet result = rows;\n\tif (rows.length) {\n\t\tconst { by } = model.sort();\n\t\tif (by.length) {\n\t\t\tconst columns = model.columnList().line;\n\t\t\tconst mappings = [];\n\t\t\tconst comparers = [];\n\n\t\t\tfor (let i = 0, length = by.length; i < length; i++) {\n\t\t\t\tconst sortEntry = by[i];\n\t\t\t\tconst sortKey = getKey(sortEntry);\n\t\t\t\tconst sortDir = getDirection(sortEntry);\n\t\t\t\tconst sortColumn = findColumn(columns, sortKey);\n\t\t\t\tif (!sortColumn) {\n\t\t\t\t\tthrow new GridError('sort.pipe', `Column \"${sortKey}\" is not found`);\n\t\t\t\t}\n\n\t\t\t\tconst getValue = context.valueFactory(sortColumn);\n\t\t\t\tconst parseValue = parseFactory(sortColumn.type, sortColumn.editor);\n\t\t\t\tconst compare = sortColumn.compare;\n\n\t\t\t\tmappings.push(row => {\n\t\t\t\t\tconst value = getValue(row);\n\t\t\t\t\tconst result = parseValue(value);\n\t\t\t\t\treturn result === null ? value : result;\n\t\t\t\t});\n\n\t\t\t\tcomparers.push(sortDir === 'asc' ? compare : (x, y) => -compare(x, y));\n\t\t\t}\n\n\t\t\tresult = orderBy(rows, mappings, comparers);\n\t\t}\n\t}\n\n\tmodel.pipe({\n\t\teffect: Object.assign({}, model.pipe().effect, { sort: result })\n\t}, {\n\t\tsource: 'sort.pipe',\n\t\tbehavior: 'core'\n\t});\n\n\tnext(result);\n}\n\nfunction memoPipe(rows, context, next) {\n\tGuard.notNull(rows, 'rows');\n\n\tconst { model } = context;\n\n\tmodel.pipe({\n\t\teffect: Object.assign({}, model.pipe().effect, { memo: rows })\n\t}, {\n\t\t\tsource: 'memo.pipe',\n\t\t\tbehavior: 'core'\n\t\t});\n\n\tnext({\n\t\trows,\n\t\tpivot: { head: new Node('$root', 0), rows: [] },\n\t\tnodes: []\n\t});\n}\n\nfunction nodeBuilder(columnMap, groupBy, valueFactory, level = 0) {\n\tif (groupBy.length === 0) {\n\t\treturn () => [];\n\t}\n\n\tconst groupKey = groupBy[0];\n\tif (!columnMap.hasOwnProperty(groupKey)) {\n\t\tthrow new GridError('node.build', `can't find column \"${groupKey}\"`);\n\t}\n\n\tconst column = columnMap[groupKey];\n\tconst getValue = getValueFactory(column);\n\treturn (rows, getRowIndex = (i) => i) => {\n\t\tconst keys = [];\n\t\tconst nodes = [];\n\t\tconst groups = {};\n\t\tfor (let i = 0, length = rows.length; i < length; i++) {\n\t\t\tconst row = rows[i];\n\t\t\tconst index = getRowIndex(i);\n\t\t\tconst key = getValue(row);\n\t\t\tif (!groups.hasOwnProperty(key)) {\n\t\t\t\tconst node = new Node(key, level);\n\t\t\t\tnode.source = groupKey;\n\t\t\t\tnode.rows.push(index);\n\t\t\t\tkeys.push(key);\n\t\t\t\tnodes.push(node);\n\t\t\t\tgroups[key] = {\n\t\t\t\t\tnode,\n\t\t\t\t\trows: [row]\n\t\t\t\t};\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst group = groups[key];\n\t\t\t\tgroup.node.rows.push(index);\n\t\t\t\tgroup.rows.push(row);\n\t\t\t\tkeys.push(key);\n\t\t\t}\n\t\t}\n\n\t\tconst nextGroupBy = groupBy.slice(1);\n\t\tif (nextGroupBy.length) {\n\t\t\tconst build = nodeBuilder(columnMap, nextGroupBy, valueFactory, level + 1);\n\t\t\tfor (let i = 0, length = keys.length; i < length; i++) {\n\t\t\t\tconst key = keys[i];\n\t\t\t\tconst group = groups[key];\n\t\t\t\tconst node = group.node;\n\t\t\t\tconst rows = node.rows;\n\t\t\t\tnode.children = build(group.rows, i => rows[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn nodes;\n\t};\n}\n\nfunction groupPipe(memo, context, next) {\n\tGuard.notNull(memo, 'memo');\n\n\tconst { model } = context;\n\tconst { rows: memoRows, nodes: memoNodes } = memo;\n\tif (memoRows.length) {\n\t\tconst { rows } = model.data();\n\t\tconst { by } = model.group();\n\t\tconst columns = model.columnList().line;\n\t\tconst columnMap = mapColumns(columns);\n\t\tconst build = nodeBuilder(columnMap, by, context.valueFactory);\n\n\t\tmemo.nodes = build(memoRows, i => {\n\t\t\tconst row = memoRows[i];\n\t\t\tconst index = rows.indexOf(row);\n\t\t\treturn index < 0 ? i : index;\n\t\t});\n\t}\n\n\tmodel.pipe({\n\t\teffect: Object.assign({}, model.pipe().effect, { group: memoNodes })\n\t}, {\n\t\tsource: 'group.pipe',\n\t\tbehavior: 'core'\n\t});\n\n\tnext(memo);\n}\n\nclass Plan {\n\tconstructor(schema) {\n\t\tthis.isRoot = !arguments.length;\n\t\tthis.current = this.schema = schema || {};\n\t}\n\n\tbranch() {\n\t\treturn new Plan(this.current);\n\t}\n\n\tcursor(name) {\n\t\tconst schema = this.schema;\n\t\tthis.current =\n\t\t\tschema.hasOwnProperty(name)\n\t\t\t\t? schema[name]\n\t\t\t\t: schema[name] = {};\n\t}\n\n\tcompile(data) {\n\t\tif (this.isRoot) {\n\t\t\treturn {\n\t\t\t\tschema: this.schema,\n\t\t\t\tdata: data\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\treturn data;\n\t\t}\n\t}\n}\n\nfunction factory$1(plan) {\n\treturn name => {\n\t\tplan.cursor(name);\n\t\treturn settings => {\n\t\t\treturn pivot(settings, plan.branch());\n\t\t};\n\t};\n}\n\nfunction pivot(settings, plan) {\n\tplan = plan || new Plan();\n\n\tconst pivot = factory$1(plan);\n\tconst aggregate = row => {\n\t\treturn settings\n\t\t\t.selector(row)\n\t\t\t.reduce((memo, selection) => {\n\t\t\t\tconst name = settings.name(selection);\n\t\t\t\tmemo[name] = settings.value(selection, row, pivot(name));\n\t\t\t\treturn memo;\n\t\t\t}, settings.factory(row));\n\t};\n\n\treturn rows =>\n\t\tplan.compile(\n\t\t\tplan.isRoot\n\t\t\t\t? rows.map(aggregate)\n\t\t\t\t: aggregate(rows));\n}\n\nfunction injectData(schema, source, target) {\n\treturn Object\n\t\t.keys(source)\n\t\t.filter(key => !schema.hasOwnProperty(key))\n\t\t.reduce((memo, key) => {\n\t\t\tmemo[key] = source[key];\n\t\t\treturn memo;\n\t\t}, target);\n}\n\nfunction expandData(schema, source) {\n\tconst baseline =\n\t\tObject.keys(schema)\n\t\t\t.map(key => {\n\t\t\t\tconst node = schema[key];\n\t\t\t\treturn source && source.hasOwnProperty(key)\n\t\t\t\t\t? expandData(node, source[key])\n\t\t\t\t\t: expandData(node);\n\t\t\t});\n\n\treturn baseline.length\n\t\t? flatten(baseline)\n\t\t: [source];\n}\n\nfunction sortSchema(schema, comparator) {\n\treturn Object\n\t\t.keys(schema)\n\t\t.sort(comparator)\n\t\t.reduce((memo, key) => {\n\t\t\tmemo[key] = sortSchema(schema[key], comparator);\n\t\t\treturn memo;\n\t\t}, {});\n}\n\n\nfunction reduceSchema(schema) {\n\n\tfunction lift(schema, node) {\n\t\tif (schema) {\n\t\t\tObject\n\t\t\t\t.keys(schema)\n\t\t\t\t.forEach(key => {\n\t\t\t\t\tconst child = new Node(key, node.level + 1);\n\t\t\t\t\tnode.children.push(child);\n\t\t\t\t\tlift(schema[key], child);\n\t\t\t\t\treturn child;\n\t\t\t\t});\n\t\t}\n\n\t\treturn node;\n\t}\n\n\treturn lift(schema, new Node('$root', 0));\n}\n\nfunction pivotForm(source, comparator) {\n\tif (source.schema && source.data) {\n\t\tconst schema = sortSchema(source.schema, comparator);\n\t\tconst rows = source.data.map(row => injectData(schema, row, expandData(schema, row)));\n\t\tconst head = reduceSchema(schema);\n\t\treturn { head, rows };\n\t}\n\n\treturn { head: new Node('$root', 0), rows: [] };\n}\n\nfunction buildFactory(columnMap, valueFactory) {\n\treturn function run(pivot, pivotBy, level = 0) {\n\t\tconst key = pivotBy[0];\n\t\tconst column = columnMap[key];\n\t\tif(!column) {\n\t\t\tthrow new GridError(\n\t\t\t\t'pivot.build',\n\t\t\t\t`Invalid key \"${key}\"`);\n\t\t}\n\t\t\n\t\tconst getValue = valueFactory(column);\n\n\t\treturn pivot({\n\t\t\tfactory: () => ({}),\n\t\t\tselector: row => [getValue(row)],\n\t\t\tname: identity,\n\t\t\tvalue: (parent, row, pivot) => {\n\t\t\t\tconst nextPivotBy = pivotBy.slice(1);\n\t\t\t\tif (nextPivotBy.length) {\n\t\t\t\t\treturn run(\n\t\t\t\t\t\tpivot,\n\t\t\t\t\t\tnextPivotBy,\n\t\t\t\t\t\tlevel + 1)(row);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t};\n}\n\nfunction buildPivot(columnMap, pivotBy, valueFactory) {\n\tlet doPivot = null;\n\tif (pivotBy.length) {\n\t\tconst doBuild = buildFactory(columnMap, valueFactory);\n\t\tdoPivot = doBuild(pivot, pivotBy);\n\t}\n\n\treturn rows => {\n\t\tif (doPivot) {\n\t\t\tconst data = doPivot(rows);\n\t\t\treturn pivotForm(data);\n\t\t}\n\n\t\treturn { head: new Node('$root', 0), rows: [] };\n\t};\n}\n\nfunction pivotPipe(memo, context, next) {\n\tGuard.notNull(memo, 'memo');\n\n\tconst { model } = context;\n\tif (memo.rows.length) {\n\t\tconst { valueFactory } = context;\n\t\tconst { line } = model.columnList();\n\t\tconst { by } = model.pivot();\n\n\t\tconst build = buildPivot(mapColumns(line), by, valueFactory);\n\t\tmemo.pivot = build(memo.rows, by);\n\t}\n\n\tmodel.pipe({\n\t\teffect: Object.assign({}, model.pipe().effect, { pivot: memo.pivot })\n\t}, {\n\t\tsource: 'pivot.pipe',\n\t\tbehavior: 'core'\n\t});\n\n\tnext(memo);\n}\n\nfunction columnIndexPipe(root, context, next) {\n\tGuard.notNull(root, 'root');\n\n\tconst { model } = context;\n\tconst filteredIndex = filter$2(model, root);\n\tconst columnRows = flattenRows(filteredIndex);\n\n\tnext({ columns: columnRows, index: root });\n}\n\nfunction filter$2(model, root) {\n\tconst groupBy = new Set(model.group().by);\n\tconst pivotBy = new Set(model.pivot().by);\n\n\tfunction doFilter(node, newNode) {\n\t\tconst { children } = node;\n\t\tfor (let i = 0, length = children.length; i < length; i++) {\n\t\t\tconst child = children[i];\n\t\t\tconst view = child.key;\n\t\t\tconst { isVisible, key } = view.model;\n\t\t\tif (isVisible && !groupBy.has(key) && !pivotBy.has(key)) {\n\t\t\t\tconst newChild = new Node(child.key, child.level);\n\t\t\t\tnewNode.children.push(newChild);\n\t\t\t\tdoFilter(child, newChild);\n\t\t\t}\n\t\t}\n\n\t\treturn newNode;\n\t}\n\n\treturn doFilter(root, new Node(root.key, root.level));\n}\n\nfunction columnPipe(memo, context, next) {\n\tGuard.notNull(memo, 'memo');\n\n\tconst { model } = context;\n\tconst { pivot, nodes } = memo;\n\tconst { head } = pivot;\n\n\tconst createColumn = columnFactory(model);\n\tconst root = new Node(createColumn('cohort', { key: '$root' }), 0);\n\n\tconst addDataColumns = dataColumnsFactory(model);\n\tconst addSelectColumn = selectColumnFactory(model);\n\tconst addGroupColumn = groupColumnFactory(model, nodes);\n\tconst addRowExpandColumn = rowExpandColumnFactory(model);\n\tconst addRowIndicatorColumn = rowIndicatorColumnFactory(model);\n\tconst addPivotColumns = pivotColumnsFactory(model);\n\tconst addPadColumn = padColumnFactory(model);\n\n\t/*\n\t * We need to invoke addDataColumns earlier that others because it setups data.columns model property\n\t *\n\t */\n\taddDataColumns(root);\n\n\t/**\n\t * Control columns should be filled in reverse order because they use unshift inside.\n\t */\n\n\t/*\n\t * Add row expand column\n\t */\n\taddRowExpandColumn(root);\n\n\t/*\n\t * Add group column with nodes\n\t *\n\t */\n\taddGroupColumn(root);\n\n\t/*\n\t * Add column with select boxes\n\t * if selection unit is row\n\t *\n\t */\n\taddSelectColumn(root);\n\n\t/*\n\t * Add row indicator column\n\t * if rows can be dragged or resized\n\t *\n\t */\n\taddRowIndicatorColumn(root);\n\n\t/*\n\t * Add column rows for pivoted data\n\t * if pivot is turned on\n\t *\n\t */\n\taddPivotColumns(root, head);\n\n\tconst { columnList } = model;\n\tconst buildIndex = sortIndexFactory(model);\n\tconst tree = mergeTree(root, columnList().index, buildIndex);\n\n\t/*\n\t * Add special column type\n\t * that fills remaining place (width = 100%)\n\t *\n\t */\n\taddPadColumn(tree);\n\n\tcolumnIndexPipe(tree, context, ({ columns, index }) => {\n\t\tmemo.columns = columns;\n\n\t\tcolumnList({\n\t\t\tindex\n\t\t}, {\n\t\t\tbehavior: 'core',\n\t\t\tsource: 'column.pipe'\n\t\t});\n\n\t\tnext(memo);\n\t});\n}\n\nfunction selectColumnFactory(model) {\n\tconst dataColumns = model.columnList().line;\n\tconst selection = model.selection();\n\n\tconst selectColumn = dataColumns.find(item => item.type === 'select');\n\tconst indicatorColumn = dataColumns.find(item => item.type === 'row-indicator');\n\n\tif (!indicatorColumn && selection.unit === 'mix') {\n\t\tconst createColumn = columnFactory(model);\n\t\treturn node => {\n\t\t\tconst indicatorColumn = createColumn('row-indicator');\n\t\t\tindicatorColumn.model.source = 'generation';\n\t\t\tif (indicatorColumn.model.isVisible) {\n\t\t\t\tnode.children.unshift(new Node(indicatorColumn, node.level + 1));\n\t\t\t\treturn indicatorColumn;\n\t\t\t}\n\t\t};\n\t}\n\n\tif (!selectColumn && selection.unit === 'row') {\n\t\tconst createColumn = columnFactory(model);\n\t\treturn node => {\n\t\t\tconst selectColumn = createColumn('select');\n\t\t\tselectColumn.model.key = `$select-${model.selection().mode}`;\n\t\t\tselectColumn.model.source = 'generation';\n\t\t\tif (selectColumn.model.isVisible) {\n\t\t\t\tnode.children.unshift(new Node(selectColumn, node.level + 1));\n\t\t\t\treturn selectColumn;\n\t\t\t}\n\t\t};\n\t}\n\n\treturn noop;\n}\n\nfunction groupColumnFactory(model, nodes) {\n\tconst dataColumns = model.columnList().line;\n\tconst groupColumn = dataColumns.find(item => item.type === 'group');\n\tconst { by, mode } = model.group();\n\tconst createColumn = columnFactory(model);\n\n\tif (!groupColumn && (nodes.length || by.length)) {\n\t\tswitch (mode) {\n\t\t\tcase 'nest': {\n\t\t\t\treturn node => {\n\t\t\t\t\tconst groupColumn = createColumn('group');\n\t\t\t\t\tgroupColumn.model.source = 'generation';\n\t\t\t\t\tif (groupColumn.model.isVisible) {\n\t\t\t\t\t\tnode.children.unshift(new Node(groupColumn, node.level + 1));\n\t\t\t\t\t\treturn groupColumn;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'rowspan':\n\t\t\tcase 'flat': {\n\t\t\t\treturn node => {\n\t\t\t\t\tconst nodes = by\n\t\t\t\t\t\t.map(key => {\n\t\t\t\t\t\t\tconst groupColumn = createColumn('group');\n\t\t\t\t\t\t\tgroupColumn.model.source = 'generation';\n\t\t\t\t\t\t\tgroupColumn.model.key = `$group-${key}`;\n\t\t\t\t\t\t\tgroupColumn.model.title = key;\n\t\t\t\t\t\t\tgroupColumn.model.by = key;\n\t\t\t\t\t\t\treturn new Node(groupColumn, node.level + 1);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.filter(n => n.key.model.isVisible);\n\n\t\t\t\t\tnode.children.splice(0, 0, ...nodes);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn noop;\n}\n\nfunction rowExpandColumnFactory(model) {\n\tconst dataColumns = model.columnList().line;\n\tconst expandColumn = dataColumns.find(item => item.type === 'row-expand');\n\tif (model.row().unit === 'details' && !expandColumn) {\n\t\tconst createColumn = columnFactory(model);\n\t\treturn node => {\n\t\t\tconst expandColumn = createColumn('row-expand');\n\t\t\texpandColumn.model.source = 'generation';\n\t\t\tif (expandColumn.model.isVisible) {\n\t\t\t\tnode.children.unshift(new Node(expandColumn, node.level + 1));\n\t\t\t\treturn expandColumn;\n\t\t\t}\n\t\t};\n\t}\n\n\treturn noop;\n}\n\nfunction rowIndicatorColumnFactory(model) {\n\tconst dataColumns = model.columnList().line;\n\tconst rowIndicatorColumn = dataColumns.find(item => item.type === 'row-indicator');\n\tconst { canMove, canResize } = model.row();\n\tif ((canMove || canResize) && !rowIndicatorColumn) {\n\t\tconst createColumn = columnFactory(model);\n\t\treturn node => {\n\t\t\tconst expandColumn = createColumn('row-indicator');\n\t\t\texpandColumn.model.source = 'generation';\n\t\t\tif (expandColumn.model.isVisible) {\n\t\t\t\tnode.children.unshift(new Node(expandColumn, node.level + 1));\n\t\t\t\treturn expandColumn;\n\t\t\t}\n\t\t};\n\t}\n\n\treturn noop;\n}\n\nfunction dataColumnsFactory(model) {\n\tconst getColumns = generateFactory(model);\n\tconst createColumn = columnFactory(model);\n\tconst { hasChanges, columns } = getColumns();\n\tif (hasChanges) {\n\t\tmodel.data({ columns }, { source: 'column.pipe', behavior: 'core' });\n\t}\n\n\tfunction fill(node, columns) {\n\t\tfor (let column of columns) {\n\t\t\tconst view = createColumn(column.type, column);\n\t\t\tconst child = new Node(view, node.level + 1);\n\t\t\tnode.children.push(child);\n\t\t\tfill(child, view.model.children);\n\t\t}\n\t}\n\n\treturn node => fill(node, columns);\n}\n\nfunction padColumnFactory(model) {\n\tconst createColumn = columnFactory(model);\n\treturn node => {\n\t\tconst padColumn = createColumn('pad');\n\t\tpadColumn.model.key = '$pad';\n\n\t\tconst index = node.children.findIndex(n => n.key.model.pin === 'right');\n\t\tconst padNode = new Node(padColumn, node.level + 1);\n\t\tif (index >= 0) {\n\t\t\tnode.children.splice(index, 0, padNode);\n\t\t} else {\n\t\t\tnode.children.push(padNode);\n\t\t}\n\n\t\treturn padColumn;\n\t};\n}\n\nfunction pivotColumnsFactory(model) {\n\tconst createColumn = columnFactory(model);\n\treturn function fill(node, head) {\n\t\tconst { children } = head;\n\t\tfor (let i = 0, length = children.length; i < length; i++) {\n\t\t\tconst child = children[i];\n\t\t\tconst pivotColumn = createColumn('pivot');\n\t\t\tconst pivotColumnModel = pivotColumn.model;\n\t\t\tpivotColumnModel.title = child.key;\n\t\t\tpivotColumnModel.key = `$pivot-${child.key}`;\n\t\t\tconst pivotNode = new Node(pivotColumn, node.level + 1);\n\t\t\tnode.children.push(pivotNode);\n\t\t\tfill(pivotNode, child);\n\t\t}\n\t};\n}\n\nfunction animationPipe(memo, context, next) {\n\tconst { model } = context;\n\tconst { apply } = model.animation();\n\tlet { length } = apply;\n\tif (length) {\n\t\tconst doNext = () => {\n\t\t\tlength--;\n\t\t\tif (length === 0) {\n\t\t\t\tnext(memo);\n\t\t\t}\n\t\t};\n\n\t\tapply.forEach(animation => {\n\t\t\tanimation(memo, context, doNext);\n\t\t});\n\t} else {\n\t\tnext(memo);\n\t}\n}\n\nclass Scene {\n\tconstructor(model) {\n\t\tthis.model = model;\n\t}\n\n\trows(memo) {\n\t\tconst { nodes, rows } = memo;\n\t\tif (nodes.length) {\n\t\t\tif (!(rows.length && rows[0] instanceof Node)) {\n\t\t\t\tconst { flattenFactory } = this.model.group();\n\t\t\t\tconst flatten = flattenFactory(this.model);\n\t\t\t\treturn flatten(nodes);\n\t\t\t}\n\t\t}\n\n\t\treturn rows;\n\t}\n\n\tcolumnRows(items) {\n\t\treturn items;\n\t}\n\n\tcolumnLine(items) {\n\t\treturn lineView(items);\n\t}\n\n\tcolumnArea(items) {\n\t\tconst line = lineView(items);\n\t\tconst result = {\n\t\t\tleft: [],\n\t\t\tright: [],\n\t\t\tmid: []\n\t\t};\n\n\t\tfor (let i = 0, length = line.length; i < length; i++) {\n\t\t\tconst column = line[i];\n\t\t\tconst { pin } = column.model;\n\t\t\tlet area = result[pin];\n\t\t\tif (!area) {\n\t\t\t\tthrow new GridError('scene', `Unsupported pin ${pin}`);\n\t\t\t}\n\n\t\t\tarea.push(column);\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nfunction sortFactory(model) {\n    const { index } = model.rowList();\n    if (!index.size) {\n        return identity;\n    }\n\n    const { rowId } = model.data();\n    return rows => {\n        let cursor = 0;\n        const positions = new Map();\n        const result =\n            rows\n                .filter((row, i) => {\n                    const key = rowId(i, row);\n                    const position = index.get(key);\n                    if (position || position === 0) {\n                        positions.set(position, row);\n                        return false;\n                    }\n\n                    return true;\n                })\n                .reduce((memo, row) => {\n                    let indexRow;\n                    while (indexRow = positions.get(cursor)) {\n                        positions.delete(cursor);\n                        memo.push(indexRow);\n                        cursor++;\n                    }\n\n                    memo.push(row);\n                    cursor++;\n\n                    return memo;\n                }, []);\n\n        if (positions.size) {\n            const remain = Array.from(positions.entries());\n            remain.sort((x, y) => x[0] - y[0]);\n\n            return result.concat(remain.map(pos => pos[1]));\n        }\n\n        return result;\n    };\n}\n\nfunction viewPipe(memo, context, next) {\n\tGuard.notNull(memo, 'memo');\n\n\tconst tag = {\n\t\tsource: context.source || 'view.pipe',\n\t\tbehavior: 'core'\n\t};\n\n\tconst { model } = context;\n\n\tconst scene = new Scene(model);\n\tlet rows = scene.rows(memo);\n\n\tconst { columns, nodes, pivot } = memo;\n\tconst columnLine = scene.columnLine(columns);\n\n\tif (!model.sort().by.length) {\n\t\tconst order = sortFactory(model);\n\t\trows = order(rows);\n\t}\n\n\tmodel.view({\n\t\trows,\n\t\tcolumns: columnLine.map(c => c.model),\n\t\tnodes,\n\t\tpivot\n\t}, tag);\n\n\tnext(memo);\n}\n\nfunction scenePipe(memo, context, next) {\n\tGuard.notNull(memo, 'memo');\n\n\tconst tag = {\n\t\tsource: context.source || 'scene.pipe',\n\t\tbehavior: 'core'\n\t};\n\n\tconst { model } = context;\n\n\tconst scene = new Scene(model);\n\tlet rows = scene.rows(memo);\n\n\tconst { columns } = memo;\n\tconst columnLine = scene.columnLine(columns);\n\n\tif (!model.sort().by.length) {\n\t\tconst order = sortFactory(model);\n\t\trows = order(rows);\n\t}\n\n\tmodel.scene({\n\t\trows,\n\t\tcolumn: {\n\t\t\trows: scene.columnRows(memo.columns),\n\t\t\tarea: scene.columnArea(memo.columns),\n\t\t\tline: columnLine\n\t\t}\n\t}, tag);\n\n\tnext(memo);\n}\n\nclass Pipe {\n\tstatic get data() {\n\t\treturn dataPipe;\n\t}\n\n\tstatic get filter() {\n\t\treturn filterPipe;\n\t}\n\n\tstatic get pagination() {\n\t\treturn paginationPipe;\n\t}\n\n\tstatic get sort() {\n\t\treturn sortPipe;\n\t}\n\n\tstatic get memo() {\n\t\treturn memoPipe;\n\t}\n\n\tstatic get group() {\n\t\treturn groupPipe;\n\t}\n\n\tstatic get pivot() {\n\t\treturn pivotPipe;\n\t}\n\n\tstatic get column() {\n\t\treturn columnPipe;\n\t}\n\n\tstatic get columnIndex() {\n\t\treturn columnIndexPipe;\n\t}\n\n\tstatic get animation() {\n\t\treturn animationPipe;\n\t}\n\n\tstatic get view() {\n\t\treturn viewPipe;\n\t}\n\n\tstatic get scene() {\n\t\treturn scenePipe;\n\t}\n}\n\nconst columnPipeUnit = [\n\t(_, context, next) => {\n\t\tconst { view } = context.model;\n\t\tconst { rows, pivot, nodes } = view();\n\t\tnext({ rows, pivot, nodes });\n\t},\n\tPipe.column,\n\t(memo, context, next) => {\n\t\tconst { model } = context;\n\t\tconst scene = new Scene(model);\n\t\tconst columnLine = scene.columnLine(memo.columns);\n\t\tconst tag = {\n\t\t\tsource: context.source || 'column.pipe.unit',\n\t\t\tbehavior: 'core'\n\t\t};\n\n\t\tmodel.view({\n\t\t\tcolumns: columnLine.map(c => c.model)\n\t\t}, tag);\n\n\t\tcontext.model.scene({\n\t\t\tcolumn: {\n\t\t\t\trows: scene.columnRows(memo.columns),\n\t\t\t\tarea: scene.columnArea(memo.columns),\n\t\t\t\tline: columnLine\n\t\t\t}\n\t\t}, tag);\n\n\t\tnext(memo);\n\t}\n];\n\ncolumnPipeUnit.why = 'redraw';\n\nconst columnIndexPipeUnit = [\n\t(_, context, next) => {\n\t\tconst { index } = context.model.columnList();\n\t\tnext(index);\n\t},\n\tPipe.columnIndex,\n\tPipe.animation,\n\t(memo, context, next) => {\n\t\tconst { model } = context;\n\t\tconst scene = new Scene(model);\n\t\tconst columnLine = scene.columnLine(memo.columns);\n\t\tconst tag = {\n\t\t\tsource: context.source || 'column.pipe.unit',\n\t\t\tbehavior: 'core'\n\t\t};\n\n\t\tmodel.view({\n\t\t\tcolumns: columnLine.map(c => c.model)\n\t\t}, tag);\n\n\t\tmodel.scene({\n\t\t\tcolumn: {\n\t\t\t\trows: scene.columnRows(memo.columns),\n\t\t\t\tarea: scene.columnArea(memo.columns),\n\t\t\t\tline: columnLine\n\t\t\t}\n\t\t}, tag);\n\n\t\tnext(memo);\n\t}\n];\n\ncolumnIndexPipeUnit.why = 'redraw';\n\nconst defaultPipeUnit = [\n\tPipe.data,\n\tPipe.filter,\n\tPipe.sort,\n\tPipe.memo,\n\tPipe.group,\n\tPipe.pivot,\n\tPipe.column,\n\tPipe.view,\n\tPipe.pagination,\n\tPipe.animation,\n\tPipe.scene\n];\n\ndefaultPipeUnit.why = 'refresh';\n\nconst groupPipeUnit = [\n\t(_, context, next) => {\n\t\tconst { model } = context;\n\t\tconst { nodes, rows } = model.view();\n\t\tnext({ nodes, rows });\n\t},\n\tPipe.pagination,\n\t(memo, context, next) => {\n\t\tconst { model } = context;\n\t\tconst tag = {\n\t\t\tsource: context.source || 'group.pipe.unit',\n\t\t\tbehavior: 'core'\n\t\t};\n\n\t\tconst { rows } = memo;\t\t\n\t\tmodel.scene({ rows }, tag);\n\n\t\tnext(memo);\n\t}\n];\n\ngroupPipeUnit.why = 'redraw';\n\nclass RowDetailsStatus {\n\tconstructor(expand) {\n\t\tthis.expand = expand;\n\t}\n}\n\nfunction flatView(model, mode) {\n\tconst { rows } = model.scene();\n\tconst { status } = model.row();\n\tconst { line } = model.scene().column;\n\n\tconst showAll = mode === 'all';\n\tconst expandColumn = line.find(c => c.model.type === 'row-expand');\n\tconst columnIndex = expandColumn ? expandColumn.columnIndex : 0;\n\n\tconst result = [];\n\tconst createColumn = columnFactory(model);\n\tfor (let cursor = 0, length = rows.length; cursor < length; cursor++) {\n\t\tconst dataRow = rows[cursor];\n\t\tresult.push(dataRow);\n\n\t\tconst nextRow = rows[cursor + 1];\n\t\tconst detailsRow = nextRow instanceof RowDetails ? nextRow : null;\n\t\tconst state = status.get(dataRow) || (showAll && new RowDetailsStatus(true));\n\t\tif (state instanceof RowDetailsStatus && state.expand) {\n\t\t\tif (detailsRow) {\n\t\t\t\tresult.push(detailsRow);\n\t\t\t\tcursor++;\n\t\t\t} else {\n\t\t\t\tconst column = createColumn('row-details');\n\t\t\t\tcolumn.columnIndex = columnIndex;\n\t\t\t\tresult.push(new RowDetails(dataRow, column));\n\t\t\t}\n\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (detailsRow) {\n\t\t\tcursor++;\n\t\t}\n\t}\n\n\treturn result;\n}\n\nfunction invalidateStatus(rows, status, mode) {\n\tswitch (mode) {\n\t\tcase 'all': {\n\t\t\tstatus = new Map(status.entries());\n\t\t\trows.forEach(row => {\n\t\t\t\tif (!status.has(row)) {\n\t\t\t\t\tstatus.set(row, new RowDetailsStatus(true));\n\t\t\t\t}\n\t\t\t});\n\t\t\tbreak;\n\t\t}\n\t\tcase 'single': {\n\t\t\tstatus = new Map(Array\n\t\t\t\t.from(status.entries())\n\t\t\t\t.filter(entry => {\n\t\t\t\t\tconst [row, status] = entry;\n\t\t\t\t\treturn rows.indexOf(row) >= 0 || !(status instanceof RowDetailsStatus);\n\t\t\t\t}));\n\t\t\tbreak;\n\t\t}\n\t\tcase 'multiple': {\n\t\t\tstatus = new Map(status.entries());\n\t\t\tbreak;\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new GridError(\n\t\t\t\t'row.details.service',\n\t\t\t\t`Invalid mode ${mode}`\n\t\t\t);\n\t\t}\n\t}\n\n\treturn status;\n}\n\nfunction toggleStatus(rows, status, mode = 'single') {\n\tstatus = invalidateStatus(rows, status, mode);\n\tif (mode !== 'all') {\n\t\trows.forEach(row => {\n\t\t\tconst state = status.get(row);\n\t\t\tif (!state) {\n\t\t\t\tstatus.set(row, new RowDetailsStatus(true));\n\t\t\t} else {\n\t\t\t\tstate.expand = !state.expand;\n\t\t\t}\n\t\t});\n\t}\n\n\treturn status;\n}\n\nconst rowDetailsPipeUnit = [\n\t(_, context, next) => {\n\t\tconst tag = {\n\t\t\tsource: context.source || 'row.details.pipe.unit',\n\t\t\tbehavior: 'core'\n\t\t};\n\n\t\tconst { model } = context;\n\t\tconst { mode } = model.row();\n\t\tconst rows = flatView(model, mode);\n\t\tmodel.view({ rows }, tag);\n\t\tmodel.scene({ rows }, tag);\n\n\t\tnext(rows);\n\t}\n];\n\nrowDetailsPipeUnit.why = 'redraw';\n\nconst viewPipeUnit = [\n\tPipe.data,\n\tPipe.memo,\n\tPipe.column,\n\tPipe.view,\n\tPipe.scene\n];\n\nviewPipeUnit.why = 'refresh';\n\nconst scenePipeUnit = [\n\tPipe.data,\n\tPipe.memo,\n\tPipe.column,\n\tPipe.view,\n\tPipe.pagination,\n\tPipe.animation,\n\tPipe.scene\n];\n\nscenePipeUnit.why = 'redraw';\n\nconst rowPipeUnit = [\n\t(_, context, next) => {\n\t\tconst { model } = context;\n\t\tconst { rows, pivot, nodes } = model.view();\n\t\tconst order = sortFactory(model);\n\t\tconst memo = {\n\t\t\trows: order(rows),\n\t\t\tpivot,\n\t\t\tnodes,\n\t\t};\n\n\t\tnext(memo);\n\t},\n\tPipe.animation,\n\t(memo, context, next) => {\n\t\tconst { model } = context;\n\t\tconst { rows } = memo;\n\n\t\tconst tag = {\n\t\t\tsource: context.source || 'row.pipe.unit',\n\t\t\tbehavior: 'core'\n\t\t};\n\n\t\tmodel.view({ rows }, tag);\n\t\tmodel.scene({ rows }, tag);\n\n\t\tnext(rows);\n\t}\n];\n\nrowPipeUnit.why = 'redraw';\n\nclass PipeUnit {\n\tstatic get default() {\n\t\treturn defaultPipeUnit;\n\t}\n\n\tstatic get view() {\n\t\treturn viewPipeUnit;\n\t}\n\n\tstatic get scene() {\n\t\treturn scenePipeUnit;\n\t}\n\n\tstatic get column() {\n\t\treturn columnPipeUnit;\n\t}\n\n\tstatic get columnIndex() {\n\t\treturn columnIndexPipeUnit;\n\t}\n\n\tstatic get rowDetails() {\n\t\treturn rowDetailsPipeUnit;\n\t}\n\n\tstatic get group() {\n\t\treturn groupPipeUnit;\n\t}\n\n\tstatic get row() {\n\t\treturn rowPipeUnit;\n\t}\n}\n\nclass DataState {\n\tconstructor() {\n\t\tthis.rows = [];\n\t\tthis.columns = [];\n\t\tthis.pipe = PipeUnit.default;\n\n\t\tthis.rowId = (index, row) => row;\n\t\tthis.columnId = (index, column) => column.key;\n\t}\n}\n\nclass Container {\n\tconstructor(elements) {\n\t\tthis.elements = elements;\n\t}\n\n\tgetBoundingClientRect() {\n\t\tconst rects = this.elements.map(element => element.getBoundingClientRect());\n\t\tconst top = minBy(rects.map(r => r.top));\n\t\tconst left = minBy(rects.map(r => r.left));\n\t\tconst bottom = maxBy(rects.map(r => r.bottom));\n\t\tconst right = maxBy(rects.map(r => r.right));\n\t\treturn {\n\t\t\theight: bottom - top,\n\t\t\twidth: right - left,\n\t\t\ttop: top,\n\t\t\tleft: left,\n\t\t\tright: right,\n\t\t\tbottom: bottom\n\t\t};\n\t}\n\n\taddClass(name) {\n\t\tthis.elements.forEach(element => element.classList.add(escapeAttr(name)));\n\t}\n\n\tremoveClass(name) {\n\t\tthis.elements.forEach(element => element.classList.remove(escapeAttr(name)));\n\t}\n\n\thasClass(name) {\n\t\treturn this.elements.some(element => element.classList.contains(escapeAttr(name)));\n\t}\n\n\tget clientWidth() {\n\t\treturn maxBy(this.elements.map(element => element.clientWidth));\n\t}\n\n\tget clientHeight() {\n\t\treturn maxBy(this.elements.map(element => element.clientHeight));\n\t}\n\n\tget offsetWidth() {\n\t\treturn maxBy(this.elements.map(element => element.offsetWidth));\n\t}\n\n\tget offsetHeight() {\n\t\treturn maxBy(this.elements.map(element => element.offsetHeight));\n\t}\n\n\tget classList() {\n\t\treturn {\n\t\t\tadd: name => this.addClass(name),\n\t\t\tremove: name => this.removeClass(name),\n\t\t\tcontains: name => this.hasClass(name)\n\t\t};\n\t}\n}\n\nclass TrContainer {\n\tconstructor(elements) {\n\t\tthis.elements = elements;\n\t}\n\n\tget index() {\n\t\tconst tr = this.elements[0];\n\t\tGuard.notNull(tr, \"tr\");\n\n\t\treturn tr.index;\n\t}\n\n\tget model() {\n\t\tconst tr = this.elements[0];\n\t\tGuard.notNull(tr, \"tr\");\n\n\t\treturn tr && tr.model;\n\t}\n\n\tget element() {\n\t\tconst { elements } = this;\n\t\tif (elements.length > 1) {\n\t\t\treturn new Container(elements.map(tr => tr.element));\n\t\t}\n\n\t\tconst tr = this.elements[0];\n\t\tGuard.notNull(tr, \"tr\");\n\n\t\treturn tr.element;\n\t}\n}\n\nclass Bag {\n\tconstructor() {\n\t\tthis.rows = new Set();\n\t\tthis.cells = new Set();\n\t\tthis.elements = new Map();\n\t\tthis.rowContainer = new Map();\n\t}\n\n\tfindModel(element) {\n\t\treturn this.elements.get(element);\n\t}\n\n\thasModel(element) {\n\t\treturn this.elements.has(element);\n\t}\n\n\tgetRowElements() {\n\t\treturn this.rowContainer.values();\n\t}\n\n\tgetCellElements() {\n\t\treturn this.cells;\n\t}\n\n\taddRow(tr) {\n\t\tconst { rowContainer } = this;\n\t\tconst { model, element } = tr;\n\n\t\tthis.rows.add(tr);\n\t\tthis.elements.set(element, tr);\n\n\t\tconst container = rowContainer.get(model);\n\t\tif (container) {\n\t\t\tcontainer.elements.push(tr);\n\t\t} else {\n\t\t\trowContainer.set(model, new TrContainer([tr]));\n\t\t}\n\t}\n\n\taddCell(td) {\n\t\tthis.cells.add(td);\n\t\tthis.elements.set(td.element, td);\n\t}\n\n\tdeleteRow(tr) {\n\t\tconst { rowContainer } = this;\n\t\tconst { model, element } = tr;\n\n\t\tthis.rows.delete(tr);\n\t\tthis.elements.delete(element);\n\n\t\tconst container = rowContainer.get(model);\n\t\tif (container) {\n\t\t\tconst { elements } = container;\n\t\t\tconst index = elements.indexOf(element);\n\t\t\tif (index >= 0) {\n\t\t\t\telements.splice(index, 1);\n\t\t\t\tif (!element.length) {\n\t\t\t\t\trowContainer.delete(model);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteCell(td) {\n\t\tthis.cells.delete(td);\n\t\tthis.elements.delete(td.element);\n\t}\n}\n\nclass FakeClassList {\n\tconstructor() {\n\t}\n\n\tadd() {\n\t}\n\n\tremove() {\n\t}\n}\n\nconst emptyRect = Object.freeze({\n\tleft: 0,\n\tright: 0,\n\ttop: 0,\n\tbottom: 0,\n\twidth: 0,\n\theight: 0\n});\n\nclass FakeElement {\n\tconstructor() {\n\t\tthis.classList = new FakeClassList();\n\t}\n\n\tgetBoundingClientRect() {\n\t\treturn emptyRect;\n\t}\n\n\tget clientWidth() {\n\t\treturn 0;\n\t}\n\n\tget clientHeight() {\n\t\treturn 0;\n\t}\n\n\tget offsetWidth() {\n\t\treturn 0;\n\t}\n\n\tget offsetHeight() {\n\t\treturn 0;\n\t}\n}\n\nconst fakeElement = new FakeElement();\nclass Unit {\n\tconstructor() {\n\t}\n\n\trect() {\n\t\treturn this.getElement().getBoundingClientRect();\n\t}\n\n\taddClass(name) {\n\t\tthis.addClassCore(name);\n\t}\n\n\tremoveClass(name) {\n\t\tthis.removeClassCore(name);\n\t}\n\n\thasClass(name) {\n\t\treturn this.hasClassCore(name);\n\t}\n\n\twidth() {\n\t\treturn this.getElement().clientWidth;\n\t}\n\n\theight() {\n\t\treturn this.getElement().clientHeight;\n\t}\n\n\tgetElement() {\n\t\treturn this.getElementCore() || fakeElement;\n\t}\n\n\taddClassCore(name) {\n\t\tthis.getElement().classList.add(escapeAttr(name));\n\t}\n\n\tremoveClassCore(name) {\n\t\tthis.getElement().classList.remove(escapeAttr(name));\n\t}\n\n\thasClassCore(name) {\n\t\treturn this.getElement().classList.contains(escapeAttr(name));\n\t}\n\n\tgetElementCore() {\n\t\treturn null;\n\t}\n}\n\nclass Element extends Unit {\n\tconstructor(element) {\n\t\tsuper();\n\n\t\tthis.element = element;\n\t}\n\n\tgetElementCore() {\n\t\treturn this.element;\n\t}\n}\n\nclass Tr {\n\tconstructor(tr) {\n\t\tthis.tr = tr;\n\n\t\t// We need to cache it due to possible virtual mode;\n\t\tthis.index = tr.index;\n\t}\n\n\tget model() {\n\t\tif (!Tr.equals(this, this.tr)) {\n\t\t\tthrow new GridError('tr', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\treturn this.tr.model;\n\t}\n\n\tget element() {\n\t\tif (!Tr.equals(this, this.tr)) {\n\t\t\tthrow new GridError('tr', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\treturn this.tr.element;\n\t}\n\n\tstatic equals(x, y) {\n\t\tif (x === y) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!x || !y) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn x.index === y.index;\n\t}\n}\n\nclass Row extends Element {\n\tconstructor(box, index, element = null) {\n\t\tsuper(element);\n\n\t\tthis.box = box;\n\t\tthis.index = index;\n\t}\n\n\tmodel() {\n\t\tconst tr = this.box.context.bag.findModel(this.getKeyElementCore());\n\t\tif (tr) {\n\t\t\treturn new Tr(tr);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tcells() {\n\t\treturn this.box.rowCellsCore(this.index);\n\t}\n\n\tcell(columnIndex) {\n\t\treturn this.box.cellCore(this.index, columnIndex);\n\t}\n\n\tgetKeyElementCore() {\n\t\tconst element = super.getElement();\n\t\tif (element.elements) {\n\t\t\treturn element.elements[0];\n\t\t}\n\n\t\treturn element;\n\t}\n}\n\nclass Column {\n\tconstructor(box, index) {\n\t\tthis.box = box;\n\t\tthis.index = index;\n\t}\n\n\tmodel() {\n\t\tconst { columns } = this.box.model.view();\n\t\tconst column = columns[this.index];\n\t\treturn column || null;\n\t}\n\n\tcells() {\n\t\treturn this.box.columnCellsCore(this.index);\n\t}\n\n\tcell(rowIndex) {\n\t\treturn this.box.cell(rowIndex, this.index);\n\t}\n\n\taddClass(name) {\n\t\tconst cells = this.cells();\n\t\tconst length = cells.length;\n\t\tlet i = 0;\n\t\twhile (i < length) {\n\t\t\tconst cell = cells[i++];\n\t\t\tcell.addClass(name);\n\t\t}\n\t}\n\n\tremoveClass(name) {\n\t\tconst cells = this.cells();\n\t\tconst length = cells.length;\n\t\tlet i = 0;\n\t\twhile (i < length) {\n\t\t\tconst cell = cells[i++];\n\t\t\tcell.removeClass(name);\n\t\t}\n\t}\n}\n\nclass Td {\n\tconstructor(td) {\n\t\tthis.td = td;\n\n\t\t// We need to cache it due to possible virtual mode;\n\t\tthis.rowIndex = td.rowIndex;\n\t\tthis.columnIndex = td.columnIndex;\n\t}\n\n\tget row() {\n\t\tif (!Td.equals(this, this.td)) {\n\t\t\tthrow new GridError('td', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\treturn this.td.row;\n\t}\n\n\tget column() {\n\t\tif (!Td.equals(this, this.td)) {\n\t\t\tthrow new GridError('td', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\treturn this.td.column;\n\t}\n\n\tget value() {\n\t\tif (!Td.equals(this, this.td)) {\n\t\t\tthrow new GridError('td', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\treturn this.td.value;\n\t}\n\n\tset value(value) {\n\t\tif (!Td.equals(this, this.td)) {\n\t\t\tthrow new GridError('td', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\tthis.td.value = value;\n\t}\n\n\tget label() {\n\t\tif (!Td.equals(this, this.td)) {\n\t\t\tthrow new GridError('td', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\treturn this.td.label;\n\t}\n\n\tget element() {\n\t\tif (!Td.equals(this, this.td)) {\n\t\t\tthrow new GridError('td', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\treturn this.td.element;\n\t}\n\n\tset label(label) {\n\t\tif (!Td.equals(this, this.td)) {\n\t\t\tthrow new GridError('td', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\tthis.td.label = label;\n\t}\n\n\tmode(value) {\n\t\tif (!Td.equals(this, this.td)) {\n\t\t\tthrow new GridError('td', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\tthis.td.mode(value);\n\t}\n\n\tstatic equals(x, y) {\n\t\tif (x === y) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!x || !y) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn x.rowIndex === y.rowIndex && x.columnIndex === y.columnIndex;\n\t}\n}\n\nclass Cell extends Element {\n\tconstructor(context, rowIndex, columnIndex, element = null) {\n\t\tsuper(element);\n\n\t\tthis.context = context;\n\t\tthis.rowIndex = rowIndex;\n\t\tthis.columnIndex = columnIndex;\n\t}\n\n\tmodel() {\n\t\treturn this.modelCore();\n\t}\n\n\tmodelCore() {\n\t\tconst td = this.context.bag.findModel(this.getElement());\n\t\treturn td ? new Td(td) : null;\n\t}\n}\n\nclass Matrix {\n    constructor(isDataRow) {\n        this.isDataRow = isDataRow;\n    }\n\n    build(table) {\n        const rows = table.rows;\n        const isDataRow = this.isDataRow;\n\n        const mx = [];\n        const offsets = [];\n\n        let y = 0;\n        for (let cursor = 0, height = rows.length; cursor < height; cursor++) {\n            const tr = rows[cursor];\n            if (!isDataRow(tr)) {\n                continue;\n            }\n\n            const offset = offsets.length > y ? offsets[y] : offsets[y] = [0];\n            const cells = tr.cells;\n            for (let x = 0, width = cells.length; x < width; x++) {\n                const td = cells[x];\n                const { rowSpan, colSpan } = td;\n                const current = offset[0];\n                const next = current + colSpan;\n                for (let i = 0; i < rowSpan; i++) {\n                    const yi = y + i;\n                    const row = mx.length > yi ? mx[yi] : mx[yi] = [];\n                    for (let j = 0; j < colSpan; j++) {\n                        const xj = current + j;\n                        row[xj] = td;\n                    }\n\n                    const gaps = offsets.length > yi ? offsets[yi] : offsets[yi] = [0];\n                    const index = binarySearch(gaps, current);\n                    if (row[next]) {\n                        gaps.splice(index, 1);\n                    }\n                    else {\n                        const xi = gaps[index];\n                        gaps.splice(index, row[xi] ? 1 : 0, next);\n                    }\n                }\n            }\n            y++;\n        }\n\n        return mx;\n    }\n\n    assertFlatness(matrix) {\n        if (matrix.length) {\n            const height = matrix.length;\n            const width = matrix[0].length;\n            for (let i = 1; i < height; i++) {\n                if (matrix[i].length !== width) {\n                    throw new GridError(\n                        'matrix',\n                        `Matrix is not flat, expect width ${width}, actual ${matrix[i].length}`);\n                }\n            }\n        }\n    }\n}\n\nclass Selector {\n\tconstructor(matrix, bag, factory) {\n\t\tthis.matrix = matrix;\n\t\tthis.bag = bag;\n\t\tthis.factory = factory;\n\t}\n\n\tcolumnCount(rowIndex) {\n\t\tconst row = this.matrix[rowIndex];\n\t\treturn row ? new Set(row).size : 0;\n\t}\n\n\tcolumnCells(columnIndex) {\n\t\tconst { factory, matrix } = this;\n\n\t\tconst result = [];\n\t\tconst set = new Set();\n\t\tfor (let i = 0, length = matrix.length; i < length; i++) {\n\t\t\tconst row = matrix[i];\n\t\t\tif (row.length > columnIndex) {\n\t\t\t\tconst td = row[columnIndex];\n\t\t\t\tif (!set.has(td)) {\n\t\t\t\t\tset.add(td);\n\t\t\t\t\tresult.push(factory.cell(td, i, columnIndex));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\trowCount(columnIndex) {\n\t\tconst { matrix } = this;\n\t\tconst set = new Set();\n\t\tfor (let i = 0, length = matrix.length; i < length; i++) {\n\t\t\tconst row = matrix[i];\n\t\t\tif (row.length > columnIndex) {\n\t\t\t\tconst td = row[columnIndex];\n\t\t\t\tset.add(td);\n\t\t\t}\n\t\t}\n\n\t\treturn set.size;\n\t}\n\n\trows(columnIndex) {\n\t\tconst { matrix, factory, bag } = this;\n\t\tconst set = new Set();\n\t\tconst result = [];\n\t\tif (isUndefined(columnIndex)) {\n\t\t\tconst rows = bag.getRowElements();\n\t\t\tfor (let tr of rows) {\n\t\t\t\tresult.push(factory.row(tr.element, tr.index));\n\t\t\t}\n\n\t\t\tresult.sort((x, y) => x.index - y.index);\n\t\t} else {\n\t\t\tfor (let i = 0, length = matrix.length; i < length; i++) {\n\t\t\t\tconst row = matrix[i];\n\t\t\t\tif (row.length > columnIndex) {\n\t\t\t\t\tconst tr = row[columnIndex].parentElement;\n\t\t\t\t\tif (!set.has(tr)) {\n\t\t\t\t\t\tset.add(tr);\n\t\t\t\t\t\tresult.push(factory.row(tr, i));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\trowCells(rowIndex) {\n\t\tconst { matrix } = this;\n\n\t\tconst row = matrix[rowIndex];\n\t\tconst result = [];\n\t\tif (row) {\n\t\t\tconst set = new Set();\n\t\t\tconst factory = this.factory;\n\t\t\tfor (let i = 0, length = row.length; i < length; i++) {\n\t\t\t\tconst td = row[i];\n\t\t\t\tif (!set.has(td)) {\n\t\t\t\t\tset.add(td);\n\t\t\t\t\tresult.push(factory.cell(td, rowIndex, i));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\trow(rowIndex, columnIndex) {\n\t\tconst { factory } = this;\n\t\tif (!isUndefined(columnIndex)) {\n\t\t\tconst td = this.td(rowIndex, columnIndex);\n\t\t\treturn factory.row(td ? td.parentElement : new FakeElement(), rowIndex);\n\t\t}\n\n\t\tconst row = this.matrix[rowIndex];\n\t\tif (row) {\n\t\t\tconst set = new Set();\n\t\t\tfor (let td of row) {\n\t\t\t\tset.add(td.parentElement);\n\t\t\t}\n\n\t\t\tconst trs = Array.from(set);\n\t\t\treturn factory.row(trs.length > 1 ? new Container(trs) : trs[0], rowIndex);\n\t\t}\n\n\t\treturn factory.row(new FakeElement(), rowIndex);\n\t}\n\n\tcell(rowIndex, columnIndex) {\n\t\tconst td = this.td(rowIndex, columnIndex);\n\t\treturn this.factory.cell(td || new FakeElement(), rowIndex, columnIndex);\n\t}\n\n\ttd(rowIndex, columnIndex) {\n\t\tconst row = this.matrix[rowIndex];\n\t\tif (row) {\n\t\t\tconst td = row[columnIndex];\n\t\t\tif (td) {\n\t\t\t\treturn td;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\nclass SelectorMediator {\n\tconstructor(selectorFactory, factory) {\n\t\tthis.buildSelectors = selectorFactory;\n\t\tthis.factory = factory;\n\t}\n\n\tcolumnCount(rowIndex) {\n\t\tconst selectors = this.buildSelectors({ row: rowIndex });\n\t\tif (!selectors.length) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn sumBy(selectors, s => s.invoke((s, rowIndex) => s.columnCount(rowIndex)));\n\t}\n\n\tcolumnCells(columnIndex) {\n\t\tconst selectors = this.buildSelectors({ column: columnIndex });\n\t\tconst result = [];\n\t\tfor (let i = 0, length = selectors.length; i < length; i++) {\n\t\t\tconst selector = selectors[i];\n\t\t\tconst cells = selector.invoke((s, columnIndex) => s.columnCells(columnIndex));\n\t\t\tresult.push(...cells);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\trowCount(columnIndex) {\n\t\tconst selectors = this.buildSelectors({ column: columnIndex });\n\t\tif (!selectors.length) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn maxBy(selectors.map(s => s.invoke((s, columnIndex) => s.rowCount(columnIndex))));\n\t}\n\n\trows(columnIndex) {\n\t\tconst context = isUndefined(columnIndex) ? {} : { column: columnIndex };\n\t\tconst selectors = this.buildSelectors(context);\n\t\tconst factory = this.factory;\n\t\tconst areas = [];\n\t\tfor (let i = 0, length = selectors.length; i < length; i++) {\n\t\t\tconst selector = selectors[i];\n\t\t\tconst rows = selector.invoke((s, columnIndex) => s.rows(columnIndex));\n\t\t\tif (rows.length) {\n\t\t\t\tareas.push(rows);\n\t\t\t}\n\t\t}\n\n\t\tconst lines = zip$1(...areas);\n\t\tconst result = [];\n\t\tfor (let i = 0, length = lines.length; i < length; i++) {\n\t\t\tconst line = lines[i];\n\t\t\tconst elements = line.map(row => row.element);\n\t\t\tconst rowElement = elements.length > 1 ? new Container(elements) : elements[0];\n\t\t\tconst rowIndex = line[0].index;\n\t\t\tconst row = factory.row(rowElement, rowIndex);\n\t\t\tresult.push(row);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\trowCells(rowIndex) {\n\t\tconst selectors = this.buildSelectors({ row: rowIndex });\n\t\tconst result = [];\n\t\tfor (let i = 0, length = selectors.length; i < length; i++) {\n\t\t\tconst selector = selectors[i];\n\t\t\tconst cells = selector.invoke((s, rowIndex) => s.rowCells(rowIndex));\n\t\t\tresult.push(...cells);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\trow(rowIndex, columnIndex) {\n\t\tconst context = { row: rowIndex };\n\t\tif (!isUndefined(columnIndex)) {\n\t\t\tcontext.column = columnIndex;\n\t\t}\n\n\t\tconst selectors = this.buildSelectors(context);\n\t\tconst result = [];\n\t\tfor (let i = 0, length = selectors.length; i < length; i++) {\n\t\t\tconst selector = selectors[i];\n\t\t\tconst row = selector.invoke((s, rowIndex, columnIndex) => s.row(rowIndex, columnIndex));\n\t\t\tresult.push(row.element);\n\t\t}\n\n\t\treturn this.factory.row(new Container(result), rowIndex);\n\t}\n\n\tcell(rowIndex, columnIndex) {\n\t\tconst context = { row: rowIndex, column: columnIndex };\n\t\tconst selectors = this.buildSelectors(context);\n\t\tfor (let i = 0, length = selectors.length; i < length; i++) {\n\t\t\tconst selector = selectors[i];\n\t\t\tconst cell = selector.invoke((s, rowIndex, columnIndex) => s.cell(rowIndex, columnIndex));\n\t\t\tif (!(cell.element instanceof FakeElement)) {\n\t\t\t\treturn cell;\n\t\t\t}\n\t\t}\n\n\t\treturn this.factory.cell(new FakeElement(), rowIndex, columnIndex);\n\t}\n}\n\nclass UnitFactory {\n\tconstructor(rowRange, columnRange) {\n\t\tthis.rowRange = rowRange;\n\t\tthis.columnRange = columnRange;\n\t}\n\n\tcell(element, rowIndex, columnIndex) {\n\t\treturn {\n\t\t\telement,\n\t\t\trowIndex: rowIndex + this.rowRange.start,\n\t\t\tcolumnIndex: columnIndex + this.columnRange.start\n\t\t};\n\t}\n\n\trow(element, rowIndex) {\n\t\treturn {\n\t\t\telement,\n\t\t\tindex: rowIndex + this.rowRange.start\n\t\t};\n\t}\n}\n\nclass Range {\n\tconstructor(start, end) {\n\t\tthis.start = start;\n\t\tthis.end = end;\n\t}\n}\n\nclass SelectorFactory {\n\tconstructor(bag, selectorMark) {\n\t\tthis.bag = bag;\n\t\tthis.selectorMark = selectorMark;\n\t}\n\n\tcreate() {\n\t\tconst { bag, selectorMark } = this;\n\n\t\tconst matrix = new Matrix(tr => bag.elements.has(tr));\n\t\tconst entries =\n\t\t\tselectorMark\n\t\t\t\t.select()\n\t\t\t\t.map(({ element, rowRange, columnRange }) => ({\n\t\t\t\t\tmatrix: matrix.build(element),\n\t\t\t\t\trowRange,\n\t\t\t\t\tcolumnRange\n\t\t\t\t}));\n\n\t\tconst selectorFactory = context => {\n\t\t\treturn entries.map(entry => ({\n\t\t\t\tinvoke: f => {\n\t\t\t\t\tconst unitFactory = new UnitFactory(entry.rowRange, entry.columnRange);\n\t\t\t\t\tconst selector = new Selector(entry.matrix, bag, unitFactory);\n\n\t\t\t\t\tconst args = [];\n\t\t\t\t\targs.push(selector);\n\n\t\t\t\t\tif (context.hasOwnProperty('row')) {\n\t\t\t\t\t\targs.push(context.row - entry.rowRange.start);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (context.hasOwnProperty('column')) {\n\t\t\t\t\t\targs.push(context.column - entry.columnRange.start);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn f(...args);\n\t\t\t\t}\n\t\t\t}));\n\t\t};\n\n\t\tconst unitFactory = new UnitFactory(new Range(0, 0), new Range(0, 0));\n\t\treturn new SelectorMediator(selectorFactory, unitFactory);\n\t}\n}\n\nclass Box {\n\tconstructor(context, model, selectorMark) {\n\t\tthis.context = context;\n\t\tthis.model = model;\n\n\t\tthis.selectFactory = new SelectorFactory(context.bag, selectorMark);\n\n\t\tthis.selector = this.selectFactory.create();\n\t}\n\n\tcolumnCount(rowIndex) {\n\t\treturn this.selector.columnCount(rowIndex);\n\t}\n\n\tcolumn(columnIndex) {\n\t\treturn this.createColumnCore(columnIndex);\n\t}\n\n\tcolumns(rowIndex) {\n\t\treturn this.selector\n\t\t\t.rowCells(rowIndex)\n\t\t\t.map(cell => this.createColumnCore(cell.columnIndex));\n\t}\n\n\trow(rowIndex, columnIndex) {\n\t\treturn this.rowCore(rowIndex, columnIndex);\n\t}\n\n\trows(columnIndex) {\n\t\treturn this.selector.rows(columnIndex).map(row => this.createRowCore(row.index, row.element));\n\t}\n\n\trowCount(columnIndex) {\n\t\treturn this.selector.rowCount(columnIndex);\n\t}\n\n\tcell(rowIndex, columnIndex) {\n\t\treturn this.cellCore(rowIndex, columnIndex);\n\t}\n\n\tgetElements() {\n\t\treturn [];\n\t}\n\n\trowCore(rowIndex, columnIndex) {\n\t\treturn this.createRowCore(rowIndex, this.selector.row(rowIndex, columnIndex).element);\n\t}\n\n\tcellCore(rowIndex, columnIndex) {\n\t\tconst cell = this.selector.cell(rowIndex, columnIndex);\n\t\treturn this.createCellCore(cell.rowIndex, cell.columnIndex, cell.element);\n\t}\n\n\trowCellsCore(rowIndex) {\n\t\treturn this.selector\n\t\t\t.rowCells(rowIndex)\n\t\t\t.map(cell => this.createCellCore(cell.rowIndex, cell.columnIndex, cell.element));\n\t}\n\n\tcolumnCellsCore(columnIndex) {\n\t\treturn this.selector\n\t\t\t.columnCells(columnIndex)\n\t\t\t.map(cell => this.createCellCore(cell.rowIndex, cell.columnIndex, cell.element));\n\t}\n\n\tcreateRowCore(index, element) {\n\t\treturn new Row(this, index, element);\n\t}\n\n\tcreateColumnCore(index) {\n\t\treturn new Column(this, index);\n\t}\n\n\tcreateCellCore(rowIndex, columnIndex, element) {\n\t\treturn new Cell(this.context, rowIndex, columnIndex, element);\n\t}\n}\n\nclass StyleBox {\n\tconstructor(context) {\n\t\tthis.context = context;\n\t\tthis.entries = new Map();\n\t}\n\n\taddClass(item, name) {\n\t\tconst key = this.key(item);\n\t\tif (key !== null) {\n\t\t\tlet entry = this.entries.get(key);\n\t\t\tif (!entry) {\n\t\t\t\tentry = new Set();\n\t\t\t\tthis.entries.set(key, entry);\n\t\t\t}\n\n\t\t\tentry.add(name);\n\t\t}\n\t}\n\n\tremoveClass(item, name) {\n\t\tconst key = this.key(item);\n\t\tif (key !== null) {\n\t\t\tlet entry = this.entries.get(key);\n\t\t\tif (entry) {\n\t\t\t\tentry.delete(name);\n\t\t\t\tif (!entry.size) {\n\t\t\t\t\tthis.entries.delete(key);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tkey(item) {\n\t\treturn item;\n\t}\n}\n\nclass CellBox extends StyleBox {\n\tconstructor(context) {\n\t\tsuper(context);\n\t}\n\n\tkey(cell) {\n\t\treturn `${cell.dataRowIndex}x${cell.dataColumnIndex}`;\n\t}\n}\n\nclass ColumnBox extends StyleBox {\n\tconstructor(context) {\n\t\tsuper(context);\n\t}\n\n\tkey(column) {\n\t\treturn column.dataIndex;\n\t}\n}\n\nclass RowBox extends StyleBox {\n\tconstructor(context) {\n\t\tsuper(context);\n\t}\n\n\tkey(row) {\n\t\treturn row.dataIndex;\n\t}\n}\n\nclass VirtualTd {\n\tconstructor(selector) {\n\t\tthis.selector = selector;\n\t}\n\n\tget model() {\n\t\tconst td = this.selector();\n\t\tif (!td) {\n\t\t\tthrow new GridError('cell', 'Model is not found');\n\t\t}\n\n\t\treturn td;\n\t}\n\n\tmode(value) {\n\t\treturn this.model.mode(value);\n\t}\n\n\tget value() {\n\t\treturn this.model.value;\n\t}\n\n\tset value(value) {\n\t\tthis.model.value = value;\n\t}\n\n\tget label() {\n\t\treturn this.model.label;\n\t}\n\n\tset label(value) {\n\t\tthis.model.label = value;\n\t}\n\n\tget element() {\n\t\treturn this.model.element || new FakeElement();\n\t}\n}\n\nclass VirtualCell extends Cell {\n\tconstructor(box, rowIndex, columnIndex, element = null) {\n\t\tsuper(box.context, rowIndex, columnIndex, element);\n\n\t\tthis.box = box;\n\n\t\tconst { mapper } = box.context;\n\t\tthis.dataRowIndex = mapper.viewToRow(rowIndex);\n\t\tthis.dataColumnIndex = mapper.viewToColumn(columnIndex);\n\t}\n\n\tmodel() {\n\t\tconst rowIndex = this.dataRowIndex;\n\t\tconst columnIndex = this.dataColumnIndex;\n\n\t\tif (rowIndex >= 0 && columnIndex >= 0) {\n\t\t\tconst gridModel = this.box.model;\n\t\t\tconst { rows } = gridModel.data();\n\t\t\tconst { columns } = gridModel.view();\n\n\t\t\tif (rows.length > rowIndex && columns.length > columnIndex) {\n\t\t\t\tconst selector = () => this.box.cell(rowIndex, columnIndex).modelCore();\n\t\t\t\tconst vtd = new VirtualTd(selector);\n\t\t\t\tvtd.rowIndex = rowIndex;\n\t\t\t\tvtd.columnIndex = columnIndex;\n\t\t\t\tvtd.row = rows[rowIndex];\n\t\t\t\tvtd.column = columns[columnIndex];\n\n\t\t\t\treturn new Td(vtd);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\taddClass(name, force = false) {\n\t\tthis.box.addCellClass(this, name, force);\n\t}\n\n\tremoveClass(name, force = false) {\n\t\tthis.box.removeCellClass(this, name, force);\n\t}\n}\n\nclass VirtualColumn extends Column {\n\tconstructor(box, index) {\n\t\tsuper(box, index);\n\n\t\tthis.box = box;\n\n\t\tconst { mapper } = box.context;\n\t\tthis.dataIndex = mapper.viewToColumn(index);\n\t}\n\n\tcells() {\n\t\treturn this.box.columnCellsCore(this.dataIndex);\n\t}\n\n\tcell(rowIndex) {\n\t\treturn this.box.cell(rowIndex, this.dataIndex);\n\t}\n\n\taddClass(name, force = false) {\n\t\tthis.box.addColumnClass(this, name, force);\n\t}\n\n\tremoveClass(name, force = false) {\n\t\tthis.box.removeColumnClass(this, name, force);\n\n\t}\n}\n\nclass VirtualElement {\n\tconstructor(getRect) {\n\t\tthis.classList = new FakeClassList();\n\t\tthis.getRect = getRect;\n\t}\n\n\tgetBoundingClientRect() {\n\t\treturn this.getRect();\n\t}\n\n\tget clientWidth() {\n\t\treturn this.getRect().width;\n\t}\n\n\tget clientHeight() {\n\t\treturn this.getRect().height;\n\t}\n\n\tget offsetWidth() {\n\t\treturn this.getRect().width;\n\t}\n\n\tget offsetHeight() {\n\t\treturn this.getRect().height;\n\t}\n}\n\nclass VirtualRow extends Row {\n\tconstructor(box, index, element = null) {\n\t\tsuper(box, index, element);\n\n\t\tconst { mapper } = box.context;\n\t\tthis.dataIndex = mapper.viewToRow(index);\n\t}\n\n\tmodel() {\n\t\tconst model = super.model();\n\t\tif (model) {\n\t\t\treturn model;\n\t\t}\n\n\t\tconst index = this.dataIndex;\n\t\tif (index >= 0) {\n\t\t\tconst gridModel = this.box.model;\n\t\t\tconst { rows } = gridModel.data();\n\t\t\tif (rows.length > index) {\n\t\t\t\treturn rows[index];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tcells() {\n\t\treturn this.box.rowCellsCore(this.dataIndex);\n\t}\n\n\tcell(columnIndex) {\n\t\treturn this.box.cellCore(this.dataIndex, columnIndex);\n\t}\n\n\taddClass(name, force = false) {\n\t\tthis.box.addRowClass(this, name, force);\n\t}\n\n\tremoveClass(name, force = false) {\n\t\tthis.box.removeRowClass(this, name, force);\n\t}\n}\n\nclass VirtualBox extends Box {\n\tconstructor(context, model, selectorMark) {\n\t\tsuper(context, model, selectorMark);\n\n\t\tthis.cellBox = new CellBox(context);\n\t\tthis.rowBox = new RowBox(context);\n\t\tthis.columnBox = new ColumnBox(context);\n\t\tthis.requestInvalidate = new Event();\n\t}\n\n\taddCellClass(cell, name, force = false) {\n\t\tif (force) {\n\t\t\tcell.addClassCore(name);\n\t\t}\n\t\telse {\n\t\t\tthis.cellBox.addClass(cell, name);\n\t\t\tthis.requestInvalidate.emit({ source: 'addCellClass' });\n\t\t}\n\t}\n\n\tremoveCellClass(cell, name, force = false) {\n\t\tif (force) {\n\t\t\tcell.removeClassCore(name);\n\t\t}\n\t\telse {\n\t\t\tthis.cellBox.removeClass(cell, name);\n\t\t\tthis.requestInvalidate.emit({ source: 'removeCellClass' });\n\t\t}\n\t}\n\n\taddRowClass(row, name, force = false) {\n\t\tif (force) {\n\t\t\trow.addClassCore(name);\n\t\t}\n\t\telse {\n\t\t\tthis.rowBox.addClass(row, name);\n\t\t\tthis.requestInvalidate.emit({ source: 'addRowClass' });\n\t\t}\n\t}\n\n\tremoveRowClass(row, name, force = false) {\n\t\tif (force) {\n\t\t\trow.removeClassCore(name);\n\t\t}\n\t\telse {\n\t\t\tthis.rowBox.removeClass(row, name);\n\t\t\tthis.requestInvalidate.emit({ source: 'removeRowClass' });\n\t\t}\n\t}\n\n\taddColumnClass(column, name, force = false) {\n\t\tif (force) {\n\t\t\tcolumn.addClassCore(name);\n\t\t}\n\t\telse {\n\t\t\tthis.columnBox.addClass(column, name);\n\t\t\tthis.requestInvalidate.emit({ source: 'addColumnClass' });\n\t\t}\n\t}\n\n\tremoveColumnClass(column, name, force = false) {\n\t\tif (force) {\n\t\t\tcolumn.removeClassCore(name);\n\t\t}\n\t\telse {\n\t\t\tthis.columnBox.removeClass(column, name);\n\t\t\tthis.requestInvalidate.emit({ source: 'removeColumnClass' });\n\t\t}\n\t}\n\n\tcolumns() {\n\t\tconst columns = this.context.view.columns();\n\t\treturn columns.map((_, i) => this.createColumnCore(i));\n\t}\n\n\trows(columnIndex) {\n\t\tconst { mapper } = this.context;\n\t\treturn this.selector\n\t\t\t.rows(columnIndex)\n\t\t\t.map(row => this.createRowCore(mapper.rowToView(row.index), row.element));\n\t}\n\n\trowCount() {\n\t\treturn this.model.pagination().count;\n\t}\n\n\trowCore(index) {\n\t\tconst viewIndex = this.context.mapper.rowToView(index);\n\t\tif (viewIndex >= 0 && viewIndex < super.rowCount(0)) {\n\t\t\treturn super.rowCore(viewIndex);\n\t\t}\n\n\t\tconst createRect = this.rowRectFactory();\n\t\treturn this.createRowCore(viewIndex, new VirtualElement(createRect(viewIndex)));\n\t}\n\n\tcellCore(rowIndex, columnIndex) {\n\t\tconst { mapper } = this.context;\n\t\tconst viewRowIndex = mapper.rowToView(rowIndex);\n\t\tconst viewColumnIndex = mapper.columnToView(columnIndex);\n\t\tif (viewRowIndex >= 0 && viewRowIndex < super.rowCount(viewColumnIndex)) {\n\t\t\treturn super.cellCore(viewRowIndex, viewColumnIndex);\n\t\t}\n\n\t\tconst createRect = this.cellRectFactory();\n\t\treturn this.createCellCore(viewRowIndex, viewColumnIndex, new VirtualElement(createRect(viewRowIndex, viewColumnIndex)));\n\t}\n\n\trowCellsCore(index) {\n\t\tconst { mapper } = this.context;\n\t\tconst viewIndex = mapper.rowToView(index);\n\t\tif (viewIndex >= 0 && viewIndex < super.rowCount(0)) {\n\t\t\treturn super.rowCellsCore(viewIndex);\n\t\t}\n\n\t\tconst createRect = this.cellRectFactory();\n\t\treturn super\n\t\t\t.rowCellsCore(0)\n\t\t\t.map((cell, columnIndex) =>\n\t\t\t\tthis.createCellCore(\n\t\t\t\t\tviewIndex,\n\t\t\t\t\tcolumnIndex,\n\t\t\t\t\tnew VirtualElement(createRect(viewIndex, mapper.columnToView(columnIndex)))\n\t\t\t\t)\n\t\t\t);\n\t}\n\n\tcreateRowCore(index, element) {\n\t\treturn new VirtualRow(this, index, element);\n\t}\n\n\tcreateCellCore(rowIndex, columnIndex, element) {\n\t\treturn new VirtualCell(this, rowIndex, columnIndex, element);\n\t}\n\n\tcreateColumnCore(index) {\n\t\treturn new VirtualColumn(this, index);\n\t}\n\n\trowRectFactory() {\n\t\tconst { height } = this.model.row();\n\t\tconst getHeight = isFunction(height) ? height : () => height;\n\n\t\tlet rect = null;\n\t\t// as view.rect() can call getBoundingClientRect that impacts performance\n\t\t// and as virtual element rect function is used mostly for end/home navigation we make rect lazy\n\t\treturn index => () => {\n\t\t\tif (!rect) {\n\t\t\t\trect = this.context.view.rect('body-mid');\n\t\t\t}\n\n\t\t\t// TODO: add correct left, right, width\n\t\t\tconst rowHeight = getHeight(null, index);\n\t\t\treturn {\n\t\t\t\tleft: 0,\n\t\t\t\tright: 0,\n\t\t\t\ttop: rect.top + rowHeight * index,\n\t\t\t\tbottom: rect.top + rowHeight * (index + 1),\n\t\t\t\twidth: 0,\n\t\t\t\theight: rowHeight\n\t\t\t};\n\t\t};\n\t}\n\n\tcellRectFactory() {\n\t\tconst { model } = this;\n\t\tconst { height: rowHeight } = model.row();\n\t\tconst { count: pageCount } = model.pagination();\n\t\tconst { columns } = model.view();\n\t\tconst columnWidths = this.model.layout().columns;\n\n\t\tconst getHeight = isFunction(rowHeight) ? rowHeight : () => rowHeight;\n\n\t\tlet rect = null;\n\n\t\t// as view.rect() can call getBoundingClientRect that impacts performance\n\t\t// and as virtual element rect function is used mostly for end/home navigation we make rect lazy\n\t\treturn (rowIndex, columnIndex) => () => {\n\t\t\tif (!rect) {\n\t\t\t\trect = this.context.view.rect('body-mid');\n\t\t\t}\n\n\t\t\tconst column = columns[columnIndex];\n\n\t\t\t// TODO: add correct left, right, width\n\t\t\tconst height = getHeight(null, rowIndex);\n\t\t\tconst top = rect.top + height * rowIndex - (rowIndex > 0 ? 0 : (pageCount + rowIndex) * height);\n\t\t\tconst width = columnWidths.has(column.key) ? columnWidths.get(column.key).width : 0;\n\t\t\tconst left = 0;\n\t\t\treturn {\n\t\t\t\tleft,\n\t\t\t\tright: left + width,\n\t\t\t\ttop,\n\t\t\t\tbottom: top + height,\n\t\t\t\twidth,\n\t\t\t\theight\n\t\t\t};\n\t\t};\n\t}\n}\n\nclass SelectorMark {\n\tconstructor(model, markup, name) {\n\t\tthis.model = model;\n\t\tthis.name = name;\n\t\tthis.markup = markup;\n\t}\n\n\tselect() {\n\t\tconst result = [];\n\t\tconst addNext = this.addFactory(result);\n\n\t\taddNext('left');\n\t\taddNext('mid');\n\t\taddNext('right');\n\n\t\treturn result;\n\t}\n\n\taddFactory(result) {\n\t\tconst { model } = this;\n\t\tconst { rows } = model.scene();\n\t\tconst columnArea = model.scene().column.area;\n\n\t\treturn pin => {\n\t\t\tconst name = pin ? `${this.name}-${pin}` : this.name;\n\t\t\tconst element = this.markup[name];\n\t\t\tif (element) {\n\t\t\t\tconst prev = result[result.length - 1];\n\t\t\t\tconst columnStart = prev ? prev.columnRange.end : 0;\n\t\t\t\tconst columnCount = columnArea[pin].length;\n\t\t\t\tconst rowStart = 0;\n\t\t\t\tconst rowCount = rows.length;\n\n\t\t\t\tresult.push({\n\t\t\t\t\telement,\n\t\t\t\t\tcolumnRange: new Range(columnStart, columnStart + columnCount),\n\t\t\t\t\trowRange: new Range(rowStart, rowStart + rowCount)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\t}\n}\n\nclass Body extends Box {\n\tconstructor(context, model) {\n\t\tsuper(context, model, new SelectorMark(model, context.markup, 'body'));\n\t}\n}\n\nclass VirtualBody extends VirtualBox {\n\tconstructor(context, model) {\n\t\tsuper(context, model, new SelectorMark(model, context.markup, 'body'));\n\t}\n}\n\nclass Data {\n\tconstructor(model) {\n\t\tthis.model = model;\n\t}\n\n\tcolumns() {\n\t\treturn this.model.view().columns;\n\t}\n\n\tcolumnMap() {\n\t\treturn mapColumns(this.columns());\n\t}\n\n\trows() {\n\t\treturn this.model.scene().rows;\n\t}\n}\n\nclass FakeLayer {\n\tconstructor() {\n\t}\n\n\tresource() {\n\t}\n\n\tdestroy() {\n\t}\n}\n\nclass FakeTable {\n\tconstructor() {\n\t\tthis.rows = [];\n\t}\n}\n\nclass Foot extends Box {\n\tconstructor(context, model) {\n\t\tsuper(context, model, new SelectorMark(model, context.markup, 'foot'));\n\t}\n}\n\nclass Head extends Box {\n\tconstructor(context, model, markup) {\n\t\tsuper(context, model, new SelectorMark(model, context.markup, 'head'));\n\t}\n}\n\nclass SelectorCache {\n\tconstructor(selector) {\n\t\tthis.selector = selector;\n\n\t\tthis.clear();\n\t}\n\n\tclear() {\n\t\tthis.columnCountCache = {};\n\t\tthis.columnCellsCache = {};\n\t\tthis.rowCountCache = {};\n\t\tthis.rowsCache = {};\n\t\tthis.rowCellsCache = {};\n\t\tthis.rowCache = {};\n\t\tthis.cellCache = {};\n\t}\n\n\tcolumnCount(rowIndex) {\n\t\tif (this.columnCountCache.hasOwnProperty(rowIndex)) {\n\t\t\treturn this.columnCountCache.get(rowIndex);\n\t\t}\n\n\t\treturn this.columnCountCache[rowIndex] = this.selector.columnCount(rowIndex);\n\t}\n\n\tcolumnCells(columnIndex) {\n\t\tif (this.columnCells.hasOwnProperty(columnIndex)) {\n\t\t\treturn this.columnCells.get(columnIndex);\n\t\t}\n\n\t\treturn this.columnCells[columnIndex] = this.selector.columnCells(columnIndex);\n\t}\n\n\trowCount(columnIndex) {\n\t\tif (this.rowCountCache.hasOwnProperty(columnIndex)) {\n\t\t\treturn this.rowCountCache.get(columnIndex);\n\t\t}\n\n\t\treturn this.rowCountCache[columnIndex] = this.selector.rowCount(columnIndex);\n\t}\n\n\trows(columnIndex) {\n\t\tif (this.rowsCache.hasOwnProperty(columnIndex)) {\n\t\t\treturn this.rowsCache.get(columnIndex);\n\t\t}\n\n\t\treturn this.rowsCache[columnIndex] = this.selector.rows(columnIndex);\n\t}\n\n\trowCells(rowIndex) {\n\t\tif (this.rowCellsCache.hasOwnProperty(rowIndex)) {\n\t\t\treturn this.rowCellsCache.get(rowIndex);\n\t\t}\n\n\t\treturn this.rowCellsCache[rowIndex] = this.selector.rowCells(rowIndex);\n\t}\n\n\trow(rowIndex, columnIndex) {\n\t\tconst key = `${rowIndex}x${columnIndex}`;\n\t\tif (this.rowCache.hasOwnProperty(key)) {\n\t\t\treturn this.rowCache.get(key);\n\t\t}\n\n\t\treturn this.rowCache[key] = this.selector.row(rowIndex, columnIndex);\n\t}\n\n\tcell(rowIndex, columnIndex) {\n\t\tconst key = `${rowIndex}x${columnIndex}`;\n\t\tif (this.cellCache.hasOwnProperty(key)) {\n\t\t\treturn this.cellCache.get(key);\n\t\t}\n\n\t\treturn this.cellCache[key] = this.selector.cell(rowIndex, columnIndex);\n\t}\n}\n\nfunction isParentOf(parent, element) {\n\twhile (element) {\n\t\tif (element === parent) {\n\t\t\treturn true;\n\t\t}\n\n\t\telement = element.parentNode;\n\t}\n\n\treturn false;\n}\n\nclass View extends Unit {\n\tconstructor(context, model) {\n\t\tsuper();\n\n\t\tthis.context = context;\n\t\tthis.model = model;\n\t\tthis.layers = new Map();\n\t}\n\n\tcolumns() {\n\t\tconst { column } = this.model.scene();\n\t\treturn column.line;\n\t}\n\n\tfocus() {\n\t\tconst elements = this.getElementsCore('body');\n\t\tif (elements.length) {\n\t\t\telements[0].focus();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tblur() {\n\t\tthis.getElementsCore('body')\n\t\t\t.forEach(element => element.blur());\n\t}\n\n\tisFocused() {\n\t\treturn this.getElementsCore('body')\n\t\t\t.some(element => this.isFocusedCore(element));\n\t}\n\n\taddLayer(name) {\n\t\tconst layers = this.layers;\n\t\tif (layers.has(name)) {\n\t\t\treturn layers.get(name);\n\t\t}\n\n\t\tconst layer = this.context.layer(name);\n\t\tlayers.set(name, layer);\n\t\treturn layer;\n\t}\n\n\tremoveLayer(name) {\n\t\tconst layers = this.layers;\n\t\tif (layers.has(name)) {\n\t\t\tconst layer = layers.get(name);\n\t\t\tlayer.destroy();\n\t\t\tlayers.delete(name);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\thasLayer(name) {\n\t\treturn this.layers.has(name);\n\t}\n\n\taddClass(name) {\n\t\tconst { markup } = this.context;\n\t\tif (markup.view) {\n\t\t\tmarkup.view.classList.add(escapeAttr(name));\n\t\t}\n\t}\n\n\tremoveClass(name) {\n\t\tconst { markup } = this.context;\n\t\tif (markup.view) {\n\t\t\tmarkup.view.classList.remove(escapeAttr(name));\n\t\t}\n\t}\n\n\tscrollLeft(value) {\n\t\tconst { markup } = this.context;\n\t\tif (arguments.length) {\n\t\t\tconst headMid = markup['head-mid'];\n\t\t\tif (headMid) {\n\t\t\t\theadMid.scrollLeft = value;\n\t\t\t}\n\n\t\t\tconst footMid = markup['foot-mid'];\n\t\t\tif (footMid) {\n\t\t\t\tfootMid.scrollLeft = value;\n\t\t\t}\n\n\t\t\tconst bodyMid = markup['body-mid'];\n\t\t\tif (bodyMid) {\n\t\t\t\tbodyMid.scrollLeft = value;\n\t\t\t}\n\n\t\t\tconst bodyTop = markup['body-top'];\n\t\t\tif (bodyTop) {\n\t\t\t\tbodyTop.scrollLeft = value;\n\t\t\t}\n\n\t\t\tconst bodyBottom = markup['body-bottom'];\n\t\t\tif (bodyBottom) {\n\t\t\t\tbodyBottom.scrollLeft = value;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.getElement().scrollLeft;\n\t}\n\n\tscrollTop(value) {\n\t\tif (arguments.length) {\n\t\t\tthis.getElementsCore('body')\n\t\t\t\t.forEach(element => element.scrollTop = value);\n\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.getElement().scrollTop;\n\t}\n\n\tscrollHeight() {\n\t\treturn this.getElement().scrollHeight;\n\t}\n\n\tscrollWidth() {\n\t\treturn this.getElement().scrollWidth;\n\t}\n\n\tcanScrollTo(target, direction) {\n\t\tif (target && !(target.element instanceof FakeElement)) {\n\t\t\tswitch (direction) {\n\t\t\t\tcase 'left': {\n\t\t\t\t\ttarget = target.element;\n\t\t\t\t\tif (target) {\n\t\t\t\t\t\tconst { markup } = this.context;\n\t\t\t\t\t\tconst tableMid = markup['table-mid'];\n\t\t\t\t\t\tif (tableMid) {\n\t\t\t\t\t\t\treturn isParentOf(tableMid, target);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'top': {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\trect(area = 'body-mid') {\n\t\tconst { markup } = this.context;\n\t\tconst element = markup[area];\n\t\tif (element) {\n\t\t\t// TODO: get rid of that\n\t\t\tconst rect = element.getBoundingClientRect();\n\n\t\t\t// Get rect without scrolls\n\t\t\tconst width = element.clientWidth;\n\t\t\tconst height = element.clientHeight;\n\t\t\tconst left = rect.left;\n\t\t\tconst top = rect.top;\n\t\t\tconst right = left + width;\n\t\t\tconst bottom = top + height;\n\t\t\treturn { left, top, right, bottom, width, height };\n\t\t}\n\n\t\treturn super.rect();\n\t}\n\n\theight(area = 'body-mid') {\n\t\tconst { markup } = this.context;\n\t\tconst element = markup[area];\n\t\tif (element) {\n\t\t\treturn element.clientHeight;\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\twidth(area = 'body-mid') {\n\t\tconst { markup } = this.context;\n\t\tconst element = markup[area];\n\t\tif (element) {\n\t\t\treturn element.clientWidth;\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tgetElementCore() {\n\t\tconst { markup } = this.context;\n\t\treturn markup['body-mid'];\n\t}\n\n\tisFocusedCore(target) {\n\t\tconst { markup } = this.context;\n\t\tconst { activeElement } = markup['document'];\n\n\t\treturn isParentOf(target, activeElement);\n\t}\n\n\tgetElementsCore(key) {\n\t\tconst { markup } = this.context;\n\t\treturn [`${key}-left`, `${key}-mid`, `${key}-right`]\n\t\t\t.filter(key => markup.hasOwnProperty(key))\n\t\t\t.map(key => markup[key]);\n\t}\n}\n\nclass Table {\n\tconstructor(model, box) {\n\t\tthis.model = model;\n\n\t\tconst { scroll } = model;\n\t\tconst defaults = {\n\t\t\tmapper: {\n\t\t\t\trowToView: index => scroll().map.rowToView(index),\n\t\t\t\tviewToRow: index => scroll().map.viewToRow(index),\n\t\t\t\tcolumnToView: identity,\n\t\t\t\tviewToColumn: identity\n\t\t\t},\n\t\t\tlayer: () => new FakeLayer(),\n\t\t\tbag: {\n\t\t\t\thead: new Bag(),\n\t\t\t\tbody: new Bag(),\n\t\t\t\tfoot: new Bag()\n\t\t\t},\n\t\t\tmarkup: {}\n\t\t};\n\n\t\tthis.box = assignWith$1(defaults, box);\n\n\t\tthis._data = new Lazy(() => new Data(model));\n\t\tthis._view = new Lazy(() => new View(box, model));\n\t\tthis._head = new Lazy(() => new Head(this.boxContext('head'), model));\n\t\tthis._foot = new Lazy(() => new Foot(this.boxContext('foot'), model));\n\t\tthis._body = new Lazy(() => {\n\t\t\tconst context = this.boxContext('body');\n\t\t\treturn scroll().mode === 'virtual'\n\t\t\t\t? new VirtualBody(context, model)\n\t\t\t\t: new Body(context, model)\n\t\t});\n\t}\n\n\tinvalidate() {\n\t\tthis.head.selector = this.head.selectFactory.create();\n\t\tthis.body.selector = this.body.selectFactory.create();\n\t\tthis.foot.selector = this.foot.selectFactory.create();\n\t}\n\n\tget view() {\n\t\treturn this._view.instance;\n\t}\n\n\tget data() {\n\t\treturn this._data.instance;\n\t}\n\n\tget head() {\n\t\treturn this._head.instance;\n\t}\n\n\tget body() {\n\t\treturn this._body.instance;\n\t}\n\n\tget foot() {\n\t\treturn this._foot.instance;\n\t}\n\n\tboxContext(source) {\n\t\tconst { view, data } = this;\n\t\tconst { mapper, layer, bag, markup } = this.box;\n\n\t\tswitch (source) {\n\t\t\tcase 'body': {\n\t\t\t\treturn {\n\t\t\t\t\tmapper,\n\t\t\t\t\tlayer,\n\t\t\t\t\tbag: bag[source],\n\t\t\t\t\tview,\n\t\t\t\t\tdata,\n\t\t\t\t\tmarkup\n\t\t\t\t};\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn {\n\t\t\t\t\tmapper: {\n\t\t\t\t\t\trowToView: identity,\n\t\t\t\t\t\tviewToRow: identity,\n\t\t\t\t\t\tcolumnToView: identity,\n\t\t\t\t\t\tviewToColumn: identity\n\t\t\t\t\t},\n\t\t\t\t\tlayer,\n\t\t\t\t\tbag: bag[source],\n\t\t\t\t\tview,\n\t\t\t\t\tdata,\n\t\t\t\t\tmarkup\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction tableFactory(model, layer) {\n\tconst box = {\n\t\tmarkup: {\n\t\t\tdocument\n\t\t},\n\t\tbag: {\n\t\t\thead: new Bag(),\n\t\t\tbody: new Bag(),\n\t\t\tfoot: new Bag()\n\t\t},\n\t\tlayer,\n\t};\n\n\treturn new Table(model, box);\n}\n\nclass DragService {\n\tconstructor() {\n\t}\n\n\tstatic get mimeType() {\n\t\treturn `application/x-${GRID_PREFIX}+json`;\n\t}\n\n\tstatic decode(source) {\n\t\treturn JSON.parse(source);\n\t}\n\n\tstatic encode(source) {\n\t\treturn JSON.stringify(source);\n\t}\n}\n\nDragService.element = null;\nDragService.data = null;\nDragService.area = null;\nDragService.startPosition = null;\n\nclass DragState {\n\tconstructor() {\n\t\tthis.isActive = false;\n\t}\n}\n\nclass Fetch {\n\tconstructor(select) {\n\t\tthis.select = select;\n\t\tthis.busy = null;\n\t\tthis.result = null;\n\t}\n\n\trun(item) {\n\t\tconst select = this.select;\n\n\t\tthis.result = null;\n\t\tlet alive = true;\n\t\tthis.busy = new Promise((resolveBusy, rejectBusy) => {\n\t\t\tconst resolve = data => {\n\t\t\t\tif (alive) {\n\t\t\t\t\tthis.result = data;\n\t\t\t\t\tresolveBusy(data);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (isFunction(select)) {\n\t\t\t\tconst deferred = {\n\t\t\t\t\tresolve: resolve,\n\t\t\t\t\treject: rejectBusy\n\t\t\t\t};\n\n\t\t\t\tconst args = Array.from(arguments).slice(1) || [];\n\t\t\t\tconst result = select(item, deferred, ...args);\n\t\t\t\tif (!isUndefined(result)) {\n\t\t\t\t\tthis.invoke(result, resolve, rejectBusy);\n\t\t\t\t}\n\t\t\t\t// when user should invoke d.resolve or d.reject\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.invoke(select, resolve, rejectBusy);\n\t\t\t}\n\t\t});\n\n\t\treturn () => {\n\t\t\tthis.busy = null;\n\t\t\talive = false;\n\t\t};\n\t}\n\n\tinvoke(instance, resolve, reject) {\n\t\tif (instance && isFunction(instance.then)) {\n\t\t\t// when options.fetch returns promise\n\t\t\tinstance.then(resolve);\n\t\t\tif (isFunction(instance.catch)) {\n\t\t\t\tinstance.catch(reject);\n\t\t\t}\n\t\t} else if (instance && isFunction(instance.subscribe)) {\n\t\t\t// when options.fetch returns observable\n\t\t\tlet isProcessed = false;\n\t\t\tlet subscription;\n\t\t\tsubscription = instance.subscribe(\n\t\t\t\t(...args) => {\n\t\t\t\t\tresolve(...args);\n\t\t\t\t\tisProcessed = true;\n\t\t\t\t\tif (subscription && isFunction(subscription.unsubscribe)) {\n\t\t\t\t\t\t// when async\n\t\t\t\t\t\tsubscription.unsubscribe(); \n\t\t\t\t\t\tsubscription = null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\treject\n\t\t\t);\n\n\t\t\tif (isProcessed) {\n\t\t\t\tif (subscription && isFunction(subscription.unsubscribe)) {\n\t\t\t\t\t// when sync\n\t\t\t\t\tsubscription.unsubscribe();\n\t\t\t\t\tsubscription = null;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// when options.fetch return result\n\t\t\tresolve(instance);\n\t\t}\n\t}\n}\n\nclass CellEditorCore {\n\tconstructor(td) {\n\t\tthis.td = td;\n\n\t\tthis.value = null;\n\t\tthis.label = null;\n\n\t\tthis.fetch = noop;\n\t\tthis.resetFetch = noop;\n\t}\n\n\tcommit() {\n\t}\n\n\treset() {\n\t}\n\n\tclear() {\n\n\t}\n}\n\nconst empty$1 = new CellEditorCore(null);\n\nclass CellEditor extends CellEditorCore {\n\tconstructor(td) {\n\t\tsuper(td);\n\n\t\tthis.fetch = this.fetchFactory();\n\t\tthis.resetFetch = this.fetch.run(td.row);\n\n\t\tif (isUndefined(td.value)) {\n\t\t\tthis.value = null;\n\t\t}\n\t\telse {\n\t\t\tconst parse = parseFactory(td.column.type, td.column.editor);\n\t\t\tconst typedValue = parse(clone(td.value));\n\t\t\tthis.value = typedValue === null ? td.value : typedValue;\n\t\t}\n\n\t\tthis.label = isUndefined(td.label) ? null : clone(td.label);\n\t}\n\n\tcommit() {\n\t\tthis.td.value = this.value;\n\t\tthis.td.label = this.label;\n\n\t\tthis.resetFetch();\n\t\tthis.resetFetch = noop;\n\t}\n\n\treset() {\n\t\tthis.label = this.td.label;\n\t\tthis.value = this.td.value;\n\n\t\tthis.resetFetch();\n\t\tthis.resetFetch = noop;\n\t}\n\n\tclear() {\n\t\tthis.label = null;\n\t\tthis.value = null;\n\n\t\tthis.resetFetch();\n\t\tthis.resetFetch = noop;\n\t}\n\n\tfetchFactory() {\n\t\tconst { editorOptions } = this.td.column;\n\t\tif (editorOptions && editorOptions.fetch) {\n\t\t\treturn new Fetch(editorOptions.fetch);\n\t\t}\n\n\t\treturn new Fetch(this.td.value);\n\t}\n\n\tget cell() {\n\t\treturn this.td;\n\t}\n\n\tstatic get empty() {\n\t\treturn empty$1;\n\t}\n}\n\nvar util$7 = {\n    isPrimitiveValue(value) {\n        if (typeof value == 'string') return true;\n        if (typeof value == 'number' && isFinite(value)) return true;\n        if (typeof value == 'boolean') return true;\n        return false;\n    },\n\n    looksLikeNumber(value) {\n        if (!isNaN(+value)) return true;\n        return false;\n    },\n\n    isObject(obj) {\n        return Object(obj) === obj && Object.getPrototypeOf(obj) === Object.prototype;\n    },\n\n    isEmptyObject(map) {\n        for (const key in map) {\n            if (map.hasOwnProperty(key)) {\n                return false;\n            }\n        }\n        return true;\n    },\n\n    escapeRegExp(str) {\n        return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n    },\n\n    isNoValue(value) {\n        return value === undefined || value === null || value === '';\n    }\n};\n\nconst util$6 = util$7;\n\nvar Common = {\n    required() {\n        return value => {\n            if (util$6.isNoValue(value)) {\n                return 'REQUIRED';\n            }\n\n            return;\n        };\n    },\n\n    not_empty() {\n        return value => {\n            if (value !== null && value !== undefined && value === '') {\n                return 'CANNOT_BE_EMPTY';\n            }\n\n            return;\n        };\n    },\n\n    not_empty_list() {\n        return list => {\n            if (list === undefined || list === '') return 'CANNOT_BE_EMPTY';\n            if (!Array.isArray(list)) return 'FORMAT_ERROR';\n            if (list.length < 1) return 'CANNOT_BE_EMPTY';\n            return;\n        };\n    },\n\n    any_object() {\n        return value => {\n            if (util$6.isNoValue(value)) return;\n\n            if (!util$6.isObject(value)) {\n                return 'FORMAT_ERROR';\n            }\n        };\n    }\n};\n\nconst util$5 = util$7;\n\nvar _String = {\n    string() {\n        return (value, params, outputArr) => {\n            if (util$5.isNoValue(value)) return;\n            if (!util$5.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n\n            outputArr.push(value + '');\n            return;\n        };\n    },\n\n    eq(allowedValue) {\n        return (value, params, outputArr) => {\n            if (util$5.isNoValue(value)) return;\n            if (!util$5.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n\n            if (value + '' === allowedValue + '') {\n                outputArr.push(allowedValue);\n                return;\n            }\n\n            return 'NOT_ALLOWED_VALUE';\n        };\n    },\n\n    one_of(allowedValues) {\n        if (!Array.isArray(allowedValues)) {\n            allowedValues = Array.prototype.slice.call(arguments);\n            allowedValues.pop(); // pop ruleBuilders\n        }\n\n        return (value, params, outputArr) => {\n            if (util$5.isNoValue(value)) return;\n\n            if (!util$5.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n\n            for (const allowedValue of allowedValues) {\n                if (value + '' === allowedValue + '') {\n                    outputArr.push(allowedValue);\n                    return;\n                }\n            }\n\n            return 'NOT_ALLOWED_VALUE';\n        };\n    },\n\n    max_length(maxLength) {\n        return (value, params, outputArr) => {\n            if (util$5.isNoValue(value)) return;\n            if (!util$5.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n\n            value += '';\n            if (value.length > maxLength) return 'TOO_LONG';\n            outputArr.push(value);\n        };\n    },\n\n    min_length(minLength) {\n        return (value, params, outputArr) => {\n            if (util$5.isNoValue(value)) return;\n            if (!util$5.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n\n            value += '';\n            if (value.length < minLength) return 'TOO_SHORT';\n            outputArr.push(value);\n        };\n    },\n\n    length_equal(length) {\n        return (value, params, outputArr) => {\n            if (util$5.isNoValue(value)) return;\n            if (!util$5.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n\n            value += '';\n            if (value.length < length) return 'TOO_SHORT';\n            if (value.length > length) return 'TOO_LONG';\n            outputArr.push(value);\n        };\n    },\n\n    length_between(minLength, maxLength) {\n        return (value, params, outputArr) => {\n            if (util$5.isNoValue(value)) return;\n            if (!util$5.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n\n            value += '';\n            if (value.length < minLength) return 'TOO_SHORT';\n            if (value.length > maxLength) return 'TOO_LONG';\n            outputArr.push(value);\n        };\n    },\n\n    like(reStr, flags) {\n        const isIgnoreCase = arguments.length === 3 && flags.match('i');\n        const re = new RegExp(reStr, isIgnoreCase ? 'i' : '');\n\n        return (value, params, outputArr) => {\n            if (util$5.isNoValue(value)) return;\n\n            if (!util$5.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n\n            value += '';\n            if (!value.match(re)) return 'WRONG_FORMAT';\n            outputArr.push(value);\n        };\n    }\n};\n\nconst util$4 = util$7;\n\nvar Numeric = {\n    integer() {\n        return (value, params, outputArr) => {\n            if (util$4.isNoValue(value)) return;\n            if (!util$4.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n            if (!util$4.looksLikeNumber(value)) return 'NOT_INTEGER';\n\n            if (!Number.isInteger(+value)) return 'NOT_INTEGER';\n            outputArr.push(+value);\n        };\n    },\n\n    positive_integer() {\n        return (value, params, outputArr) => {\n            if (util$4.isNoValue(value)) return;\n            if (!util$4.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n            if (!util$4.looksLikeNumber(value)) return 'NOT_POSITIVE_INTEGER';\n\n            if (!Number.isInteger(+value) || +value < 1) return 'NOT_POSITIVE_INTEGER';\n            outputArr.push(+value);\n        };\n    },\n\n    decimal() {\n        return (value, params, outputArr) => {\n            if (util$4.isNoValue(value)) return;\n            if (!util$4.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n            if (!util$4.looksLikeNumber(value)) return 'NOT_DECIMAL';\n\n            value += '';\n            if (!/^(?:\\-?(?:(?:[0-9]+\\.[0-9]+)|(?:[0-9]+)))$/.test(value)) return 'NOT_DECIMAL';\n            outputArr.push(+value);\n        };\n    },\n\n    positive_decimal() {\n        return (value, params, outputArr) => {\n            if (util$4.isNoValue(value)) return;\n            if (!util$4.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n            if (!util$4.looksLikeNumber(value)) return 'NOT_POSITIVE_DECIMAL';\n\n            value += '';\n            if (!/^(?:(?:[0-9]*\\.[0-9]+)|(?:[1-9][0-9]*))$/.test(value))\n                return 'NOT_POSITIVE_DECIMAL';\n            outputArr.push(+value);\n        };\n    },\n\n    max_number(maxNumber) {\n        return (value, params, outputArr) => {\n            if (util$4.isNoValue(value)) return;\n            if (!util$4.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n            if (!util$4.looksLikeNumber(value)) return 'NOT_NUMBER';\n\n            if (+value > +maxNumber) return 'TOO_HIGH';\n            outputArr.push(+value);\n        };\n    },\n\n    min_number(minNumber) {\n        return (value, params, outputArr) => {\n            if (util$4.isNoValue(value)) return;\n            if (!util$4.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n            if (!util$4.looksLikeNumber(value)) return 'NOT_NUMBER';\n\n            if (+value < +minNumber) return 'TOO_LOW';\n            outputArr.push(+value);\n        };\n    },\n\n    number_between(minNumber, maxNumber) {\n        return (value, params, outputArr) => {\n            if (util$4.isNoValue(value)) return;\n            if (!util$4.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n            if (!util$4.looksLikeNumber(value)) return 'NOT_NUMBER';\n\n            if (+value < +minNumber) return 'TOO_LOW';\n            if (+value > +maxNumber) return 'TOO_HIGH';\n            outputArr.push(+value);\n        };\n    }\n};\n\nconst util$3 = util$7;\n\nvar Special = {\n    email() {\n        var emailRe = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n        return value => {\n            if (util$3.isNoValue(value)) return;\n            if (!util$3.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n\n            value += '';\n            if (!emailRe.test(value)) return 'WRONG_EMAIL';\n            if (/\\@.*\\@/.test(value)) return 'WRONG_EMAIL';\n            if (/\\@.*_/.test(value)) return 'WRONG_EMAIL';\n            return;\n        };\n    },\n\n    equal_to_field(field) {\n        return (value, params) => {\n            if (util$3.isNoValue(value)) return;\n            if (!util$3.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n\n            if (value != params[field]) return 'FIELDS_NOT_EQUAL';\n            return;\n        };\n    },\n\n    url() {\n        const urlReStr =\n            '^(?:(?:http|https)://)(?:\\\\S+(?::\\\\S*)?@)?(?:(?:(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-1]\\\\d|22[0-3])(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}(?:\\\\.(?:[0-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))|(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,})))\\\\.?|localhost)(?::\\\\d{2,5})?(?:[/?#]\\\\S*)?$';\n        const urlRe = new RegExp(urlReStr, 'i');\n\n        return value => {\n            if (util$3.isNoValue(value)) return;\n            if (!util$3.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n\n            if (value.length < 2083 && urlRe.test(value)) return;\n            return 'WRONG_URL';\n        };\n    },\n\n    iso_date() {\n        return value => {\n            if (util$3.isNoValue(value)) return;\n            if (!util$3.isPrimitiveValue(value)) return 'FORMAT_ERROR';\n\n            const matched = value.match(/^(\\d{4})-([0-1][0-9])-([0-3][0-9])$/);\n\n            if (matched) {\n                const epoch = Date.parse(value);\n                if (!epoch && epoch !== 0) return 'WRONG_DATE';\n\n                const d = new Date(epoch);\n                d.setTime(d.getTime() + d.getTimezoneOffset() * 60 * 1000);\n\n                if (\n                    d.getFullYear() == matched[1] &&\n                    d.getMonth() + 1 == +matched[2] &&\n                    d.getDate() == +matched[3]\n                ) {\n                    return;\n                }\n            }\n\n            return 'WRONG_DATE';\n        };\n    }\n};\n\nconst util$2 = util$7;\n\nconst DEFAULT_RULES = {};\nlet IS_DEFAULT_AUTO_TRIM = 0;\n\nclass Validator$1 {\n    constructor(livrRules, isAutoTrim) {\n        this.isPrepared = false;\n        this.livrRules = livrRules;\n        this.validators = {};\n        this.validatorBuilders = {};\n        this.errors = null;\n\n        if (isAutoTrim !== null && isAutoTrim !== undefined) {\n            this.isAutoTrim = isAutoTrim;\n        } else {\n            this.isAutoTrim = IS_DEFAULT_AUTO_TRIM;\n        }\n\n        this.registerRules(DEFAULT_RULES);\n    }\n\n    static getDefaultRules() {\n        return DEFAULT_RULES;\n    }\n\n    static registerAliasedDefaultRule(alias) {\n        if (!alias.name) throw 'Alias name required';\n\n        DEFAULT_RULES[alias.name] = this._buildAliasedRule(alias.rules, alias.error);\n    }\n\n    static registerDefaultRules(rules) {\n        for (const ruleName in rules) {\n            DEFAULT_RULES[ruleName] = rules[ruleName];\n        }\n    }\n\n    static defaultAutoTrim(isAutoTrim) {\n        IS_DEFAULT_AUTO_TRIM = !!isAutoTrim;\n    }\n\n    static _buildAliasedRule(rules, errorCode) {\n        if (!rules) throw 'Alias rules required';\n\n        const livr = { value: rules };\n\n        return ruleBuilders => {\n            // ruleBuilders comes always as a last argument\n            // we register them to support custom rules in aliases\n            const validator = new Validator$1(livr).registerRules(ruleBuilders).prepare();\n\n            return (value, undefined$1, outputArr) => {\n                const result = validator.validate({ value });\n\n                if (result) {\n                    outputArr.push(result.value);\n                    return;\n                } else {\n                    return errorCode || validator.getErrors().value;\n                }\n            };\n        };\n    }\n\n    prepare() {\n        const allRules = this.livrRules;\n\n        for (const field in allRules) {\n            let fieldRules = allRules[field];\n\n            if (!Array.isArray(fieldRules)) {\n                fieldRules = [fieldRules];\n            }\n\n            const validators = [];\n\n            for (const fieldRule of fieldRules) {\n                const parsed = this._parseRule(fieldRule);\n                validators.push(this._buildValidator(parsed.name, parsed.args));\n            }\n\n            this.validators[field] = validators;\n        }\n\n        this.isPrepared = true;\n        return this;\n    }\n\n    validate(data) {\n        if (!this.isPrepared) this.prepare();\n\n        if (!util$2.isObject(data)) {\n            this.errors = 'FORMAT_ERROR';\n            return;\n        }\n\n        if (this.isAutoTrim) {\n            data = this._autoTrim(data);\n        }\n\n        const errors = {};\n        const result = {};\n\n        for (const fieldName in this.validators) {\n            const validators = this.validators[fieldName];\n            if (!validators || !validators.length) continue;\n\n            const value = data[fieldName];\n\n            for (const validator of validators) {\n                const fieldResultArr = [];\n\n                const errCode = validator(\n                    result.hasOwnProperty(fieldName) ? result[fieldName] : value,\n                    data,\n                    fieldResultArr\n                );\n\n                if (errCode) {\n                    errors[fieldName] = errCode;\n                    break;\n                } else if (fieldResultArr.length) {\n                    result[fieldName] = fieldResultArr[0];\n                } else if (data.hasOwnProperty(fieldName) && !result.hasOwnProperty(fieldName)) {\n                    result[fieldName] = value;\n                }\n            }\n        }\n\n        if (util$2.isEmptyObject(errors)) {\n            this.errors = null;\n            return result;\n        } else {\n            this.errors = errors;\n            return false;\n        }\n    }\n\n    getErrors() {\n        return this.errors;\n    }\n\n    registerRules(rules) {\n        for (const ruleName in rules) {\n            this.validatorBuilders[ruleName] = rules[ruleName];\n        }\n\n        return this;\n    }\n\n    registerAliasedRule(alias) {\n        if (!alias.name) throw 'Alias name required';\n\n        this.validatorBuilders[alias.name] = this.constructor._buildAliasedRule(\n            alias.rules,\n            alias.error\n        );\n\n        return this;\n    }\n\n    getRules() {\n        return this.validatorBuilders;\n    }\n\n    _parseRule(livrRule) {\n        let name;\n        let args;\n\n        if (util$2.isObject(livrRule)) {\n            name = Object.keys(livrRule)[0];\n            args = livrRule[name];\n\n            if (!Array.isArray(args)) args = [args];\n        } else {\n            name = livrRule;\n            args = [];\n        }\n\n        return { name, args };\n    }\n\n    _buildValidator(name, args) {\n        if (!this.validatorBuilders[name]) {\n            throw 'Rule [' + name + '] not registered';\n        }\n\n        const allArgs = [];\n\n        allArgs.push.apply(allArgs, args);\n        allArgs.push(this.getRules());\n\n        return this.validatorBuilders[name].apply(null, allArgs);\n    }\n\n    _autoTrim(data) {\n        const dataType = typeof data;\n\n        if (dataType !== 'object' && data) {\n            if (data.replace) {\n                return data.replace(/^\\s*/, '').replace(/\\s*$/, '');\n            } else {\n                return data;\n            }\n        } else if (dataType == 'object' && Array.isArray(data)) {\n            const trimmedData = [];\n\n            for (const item of data) {\n                trimmedData.push(this._autoTrim(item));\n            }\n\n            return trimmedData;\n        } else if (dataType == 'object' && util$2.isObject(data)) {\n            const trimmedData = {};\n\n            for (const key in data) {\n                if (data.hasOwnProperty(key)) {\n                    trimmedData[key] = this._autoTrim(data[key]);\n                }\n            }\n\n            return trimmedData;\n        }\n\n        return data;\n    }\n}\n\nvar Validator_1 = Validator$1;\n\nconst Validator = Validator_1;\nconst util$1 = util$7;\n\nvar Meta = {\n    nested_object(livr, ruleBuilders) {\n        const validator = new Validator(livr).registerRules(ruleBuilders).prepare();\n\n        return (nestedObject, params, outputArr) => {\n            if (util$1.isNoValue(nestedObject)) return;\n            if (!util$1.isObject(nestedObject)) return 'FORMAT_ERROR';\n\n            const result = validator.validate(nestedObject);\n\n            if (result) {\n                outputArr.push(result);\n                return;\n            } else {\n                return validator.getErrors();\n            }\n        };\n    },\n\n    variable_object(selectorField, livrs, ruleBuilders) {\n        const validators = {};\n\n        for (const selectorValue in livrs) {\n            const validator = new Validator(livrs[selectorValue])\n                .registerRules(ruleBuilders)\n                .prepare();\n            validators[selectorValue] = validator;\n        }\n\n        return (object, params, outputArr) => {\n            if (util$1.isNoValue(object)) return;\n\n            if (\n                !util$1.isObject(object) ||\n                !object[selectorField] ||\n                !validators[object[selectorField]]\n            ) {\n                return 'FORMAT_ERROR';\n            }\n\n            const validator = validators[object[selectorField]];\n            const result = validator.validate(object);\n\n            if (result) {\n                outputArr.push(result);\n                return;\n            } else {\n                return validator.getErrors();\n            }\n        };\n    },\n\n    list_of(rules, ruleBuilders) {\n        if (!Array.isArray(rules)) {\n            rules = Array.prototype.slice.call(arguments);\n            ruleBuilders = rules.pop();\n        }\n\n        const livr = { field: rules };\n        const validator = new Validator(livr).registerRules(ruleBuilders).prepare();\n\n        return (values, params, outputArr) => {\n            if (util$1.isNoValue(values)) return;\n\n            if (!Array.isArray(values)) return 'FORMAT_ERROR';\n\n            const results = [];\n            const errors = [];\n            let hasErrors = false;\n\n            for (const value of values) {\n                const result = validator.validate({ field: value });\n\n                if (result) {\n                    results.push(result.field);\n                    errors.push(null);\n                } else {\n                    hasErrors = true;\n                    errors.push(validator.getErrors().field);\n                    results.push(null);\n                }\n            }\n\n            if (hasErrors) {\n                return errors;\n            } else {\n                outputArr.push(results);\n                return;\n            }\n        };\n    },\n\n    list_of_objects(livr, ruleBuilders) {\n        const validator = new Validator(livr).registerRules(ruleBuilders).prepare();\n\n        return (objects, params, outputArr) => {\n            if (util$1.isNoValue(objects)) return;\n            if (!Array.isArray(objects)) return 'FORMAT_ERROR';\n\n            const results = [];\n            const errors = [];\n            let hasErrors = false;\n\n            for (const object of objects) {\n                const result = validator.validate(object);\n\n                if (result) {\n                    results.push(result);\n                    errors.push(null);\n                } else {\n                    hasErrors = true;\n                    errors.push(validator.getErrors());\n                    results.push(null);\n                }\n            }\n\n            if (hasErrors) {\n                return errors;\n            } else {\n                outputArr.push(results);\n                return;\n            }\n        };\n    },\n\n    list_of_different_objects(selectorField, livrs, ruleBuilders) {\n        const validators = {};\n\n        for (const selectorValue in livrs) {\n            const validator = new Validator(livrs[selectorValue])\n                .registerRules(ruleBuilders)\n                .prepare();\n            validators[selectorValue] = validator;\n        }\n\n        return (objects, params, outputArr) => {\n            if (util$1.isNoValue(objects)) return;\n            if (!Array.isArray(objects)) return 'FORMAT_ERROR';\n\n            const results = [];\n            const errors = [];\n            let hasErrors = false;\n\n            for (const object of objects) {\n                if (\n                    typeof object != 'object' ||\n                    !object[selectorField] ||\n                    !validators[object[selectorField]]\n                ) {\n                    errors.push('FORMAT_ERROR');\n                    continue;\n                }\n\n                const validator = validators[object[selectorField]];\n                const result = validator.validate(object);\n\n                if (result) {\n                    results.push(result);\n                    errors.push(null);\n                } else {\n                    hasErrors = true;\n                    errors.push(validator.getErrors());\n                    results.push(null);\n                }\n            }\n\n            if (hasErrors) {\n                return errors;\n            } else {\n                outputArr.push(results);\n                return;\n            }\n        };\n    },\n\n    or() {\n        const ruleSets = Array.prototype.slice.call(arguments);\n        const ruleBuilders = ruleSets.pop();\n\n        const validators = ruleSets.map(rules => {\n            const livr = { field: rules };\n            const validator = new Validator(livr).registerRules(ruleBuilders).prepare();\n\n            return validator;\n        });\n\n        return (value, params, outputArr) => {\n            if (util$1.isNoValue(value)) return;\n\n            let lastError;\n\n            for (const validator of validators) {\n                const result = validator.validate({ field: value });\n\n                if (result) {\n                    outputArr.push(result.field);\n                    return;\n                } else {\n                    lastError = validator.getErrors().field;\n                }\n            }\n\n            if (lastError) {\n                return lastError;\n            }\n        };\n    }\n};\n\nconst util = util$7;\n\nvar Modifiers = {\n    default(defaultValue) {\n        return (value, params, outputArr) => {\n            if (util.isNoValue(value)) {\n                outputArr.push(defaultValue);\n            }\n        };\n    },\n\n    trim() {\n        return (value, params, outputArr) => {\n            if (util.isNoValue(value) || typeof value === 'object') return;\n\n            value += ''; // TODO just do not trim numbers\n            outputArr.push(value.replace(/^\\s*/, '').replace(/\\s*$/, ''));\n        };\n    },\n\n    to_lc() {\n        return (value, params, outputArr) => {\n            if (util.isNoValue(value) || typeof value === 'object') return;\n\n            value += ''; // TODO just skip numbers\n            outputArr.push(value.toLowerCase());\n        };\n    },\n\n    to_uc() {\n        return (value, params, outputArr) => {\n            if (util.isNoValue(value) || typeof value === 'object') return;\n\n            value += ''; // TODO just skip numbers\n            outputArr.push(value.toUpperCase());\n        };\n    },\n\n    remove(chars) {\n        chars = util.escapeRegExp(chars);\n        const re = new RegExp('[' + chars + ']', 'g');\n\n        return (value, params, outputArr) => {\n            if (util.isNoValue(value) || typeof value === 'object') return;\n\n            value += ''; // TODO just skip numbers\n            outputArr.push(value.replace(re, ''));\n        };\n    },\n\n    leave_only(chars) {\n        chars = util.escapeRegExp(chars);\n        const re = new RegExp('[^' + chars + ']', 'g');\n\n        return (value, params, outputArr) => {\n            if (util.isNoValue(value) || typeof value === 'object') return;\n\n            value += ''; // TODO just skip numbers\n            outputArr.push(value.replace(re, ''));\n        };\n    }\n};\n\nconst LIVR = {rules: {}};\n\nLIVR.rules.common  = Common;\nLIVR.rules.string  = _String;\nLIVR.rules.numeric = Numeric;\nLIVR.rules.special = Special;\nLIVR.rules.meta    = Meta;\nLIVR.rules.modifiers = Modifiers;\n\nLIVR.Validator = Validator_1;\nLIVR.util = util$7;\n\nLIVR.Validator.registerDefaultRules({\n    required:         LIVR.rules.common.required,\n    not_empty:        LIVR.rules.common.not_empty,\n    not_empty_list:   LIVR.rules.common.not_empty_list,\n    any_object:       LIVR.rules.common.any_object,\n\n    string:           LIVR.rules.string.string,\n    eq:               LIVR.rules.string.eq,\n    one_of:           LIVR.rules.string.one_of,\n    max_length:       LIVR.rules.string.max_length,\n    min_length:       LIVR.rules.string.min_length,\n    length_equal:     LIVR.rules.string.length_equal,\n    length_between:   LIVR.rules.string.length_between,\n    like:             LIVR.rules.string.like,\n\n    integer:          LIVR.rules.numeric.integer,\n    positive_integer: LIVR.rules.numeric.positive_integer,\n    decimal:          LIVR.rules.numeric.decimal,\n    positive_decimal: LIVR.rules.numeric.positive_decimal,\n    max_number:       LIVR.rules.numeric.max_number,\n    min_number:       LIVR.rules.numeric.min_number,\n    number_between:   LIVR.rules.numeric.number_between,\n\n    email:            LIVR.rules.special.email,\n    equal_to_field:   LIVR.rules.special.equal_to_field,\n    url:              LIVR.rules.special.url,\n    iso_date:         LIVR.rules.special.iso_date,\n\n    nested_object:    LIVR.rules.meta.nested_object,\n    variable_object:  LIVR.rules.meta.variable_object,\n    list_of:          LIVR.rules.meta.list_of,\n    list_of_objects:  LIVR.rules.meta.list_of_objects,\n    or:               LIVR.rules.meta.or,\n    list_of_different_objects: LIVR.rules.meta.list_of_different_objects,\n\n    default:          LIVR.rules.modifiers.default,\n    trim:             LIVR.rules.modifiers.trim,\n    to_lc:            LIVR.rules.modifiers.to_lc,\n    to_uc:            LIVR.rules.modifiers.to_uc,\n    remove:           LIVR.rules.modifiers.remove,\n    leave_only:       LIVR.rules.modifiers.leave_only\n});\n\nvar LIVR_1 = LIVR;\n\nfunction toLIVR(rules, key) {\n\tconst validationRules = [];\n\trules.forEach(rule => {\n\t\tif (rule.key === key) {\n\t\t\tfor (let name of Object.keys(rule)) {\n\t\t\t\tif (name !== 'key' && name !== 'for') {\n\t\t\t\t\tvalidationRules.push({\n\t\t\t\t\t\t[name]: rule[name]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn {\n\t\thasRules: validationRules.length > 0,\n\t\trules: { [key]: validationRules }\n\t};\n}\n\nfunction hasRules(rules, key) {\n\treturn toLIVR(rules, key).hasRules;\n}\n\nfunction createValidator(rules, key) {\n\tif (arguments.length === 2) {\n\t\tconst settings = toLIVR(rules, key);\n\t\treturn new LIVR_1.Validator(settings.rules);\n\t}\n\n\treturn new LIVR_1.Validator(rules);\n}\n\nclass EditCellLet {\n\tconstructor(plugin, shortcut) {\n\t\tconst { model, observeReply } = plugin;\n\n\t\tthis.plugin = plugin;\n\t\tthis.shortcut = shortcut;\n\n\t\tthis.editor = CellEditor.empty;\n\t\tthis.requestClose = null;\n\n\t\tconst commands = this.getCommands();\n\t\tshortcut.register(commands);\n\n\t\tthis.enter = commands.get('enter');\n\t\tthis.commit = commands.get('commit');\n\t\tthis.push = commands.get('push');\n\t\tthis.cancel = commands.get('cancel');\n\t\tthis.reset = commands.get('reset');\n\t\tthis.exit = commands.get('exit');\n\t\tthis.clear = commands.get('clear');\n\n\t\tobserveReply(model.editChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('status') && e.tag.source !== 'edit.cell.view') {\n\t\t\t\t\tif (e.changes.status.newValue === 'edit') {\n\t\t\t\t\t\t// this is a trick to go back to the view mode and trigger enter\n\t\t\t\t\t\t// TODO: make it better\n\t\t\t\t\t\tmodel.edit({\n\t\t\t\t\t\t\tstatus: 'view'\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tsource: 'edit.cell.view'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (this.enter.canExecute()) {\n\t\t\t\t\t\t\tthis.enter.execute();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (e.changes.status.newValue === 'view') {\n\t\t\t\t\t\t// this is a trick to go back to the edit mode and trigger cancel\n\t\t\t\t\t\t// TODO: make it better\n\t\t\t\t\t\tmodel.edit({\n\t\t\t\t\t\t\tstatus: 'edit'\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tsource: 'edit.cell.view'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (this.requestClose) {\n\t\t\t\t\t\t\tif (this.requestClose()) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.cancel.canExecute()) {\n\t\t\t\t\t\t\tthis.cancel.execute();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.navigationChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('cell')) {\n\t\t\t\t\tif (this.requestClose) {\n\t\t\t\t\t\tif (this.requestClose()) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst editCell = this.editor.td;\n\t\t\t\t\tif (editCell) {\n\t\t\t\t\t\tif (editCell.column.category === 'data') {\n\t\t\t\t\t\t\tif (this.commit.canExecute(editCell)) {\n\t\t\t\t\t\t\t\tthis.commit.execute(editCell);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (this.cancel.canExecute(editCell)) {\n\t\t\t\t\t\t\t\tthis.cancel.execute(editCell);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst { cell } = e.state;\n\t\t\t\t\tif (cell && (cell.column.editorOptions.trigger === 'focus')) {\n\t\t\t\t\t\tif (this.enter.canExecute(cell)) {\n\t\t\t\t\t\t\tthis.enter.execute(cell);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tmode(cell, status) {\n\t\tconst { model } = this.plugin;\n\t\tmodel.edit({ status }, { source: 'edit.cell.view' });\n\t\tcell.mode(status);\n\t}\n\n\tgetCommands() {\n\t\tconst { model, table } = this.plugin;\n\n\t\tconst commands = {\n\t\t\tenter: new Command({\n\t\t\t\tpriority: 1,\n\t\t\t\tsource: 'edit.cell.view',\n\t\t\t\tshortcut: this.shortcutFactory('enter'),\n\t\t\t\tcanExecute: cell => {\n\t\t\t\t\t// TODO: source should be set up from outside\n\t\t\t\t\tconst source = cell ? 'mouse' : 'keyboard';\n\t\t\t\t\tif (source === 'keyboard' && Shortcut.isControl(this.shortcut.keyCode())) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tcell = cell || model.navigation().cell;\n\n          //cell is an array when using custom template\n          if(Array.isArray(cell)) {\n            if(cell.length > 0) {\n              if (cell[0].constructor.name == 'TdCoreDirective') {\n                cell = cell[0];\n              }\n            }\n          }\n          \n\t\t\t\t\treturn cell\n\t\t\t\t\t\t&& cell.column.canEdit\n\t\t\t\t\t\t&& (cell.column.category === 'control' || model.edit().mode === 'cell')\n\t\t\t\t\t\t&& model.edit().status === 'view'\n\t\t\t\t\t\t&& model.edit().enter.canExecute(this.contextFactory(cell, cell.value, cell.label));\n\t\t\t\t},\n\t\t\t\texecute: (cell, e) => {\n\t\t\t\t\tLog.info('cell.edit', 'edit mode');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\t// TODO: source should be set up from outside\n\t\t\t\t\tconst source = cell ? 'mouse' : 'keyboard';\n\t\t\t\t\tcell = cell || model.navigation().cell;\n\t\t\t\t\tif (cell && model.edit().enter.execute(this.contextFactory(cell, cell.value, cell.label)) !== false) {\n\t\t\t\t\t\tconst td = table.body.cell(cell.rowIndex, cell.columnIndex).model();\n\t\t\t\t\t\tthis.editor = new CellEditor(td);\n\n\t\t\t\t\t\tconst keyCode = this.shortcut.keyCode();\n\t\t\t\t\t\tif (source === 'keyboard' && Shortcut.isPrintable(keyCode)) {\n\t\t\t\t\t\t\tconst parse = parseFactory(cell.column.type, cell.column.editor);\n\t\t\t\t\t\t\tconst value = Shortcut.stringify(keyCode);\n\t\t\t\t\t\t\tconst typedValue = parse(value);\n\t\t\t\t\t\t\tif (typedValue !== null) {\n\t\t\t\t\t\t\t\tthis.value = typedValue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.mode(this.editor.td, 'edit');\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcommit: new Command({\n\t\t\t\tpriority: 1,\n\t\t\t\tsource: 'edit.cell.view',\n\t\t\t\tshortcut: this.shortcutFactory('commit'),\n\t\t\t\tcanExecute: cell => {\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\tconst canEdit = cell\n\t\t\t\t\t\t&& Td.equals(cell, this.editor.td)\n\t\t\t\t\t\t&& cell.column.canEdit\n\t\t\t\t\t\t&& (cell.column.category === 'control' || model.edit().mode === 'cell')\n\t\t\t\t\t\t&& model.edit().status === 'edit';\n\t\t\t\t\tif (canEdit) {\n\t\t\t\t\t\tconst context = this.contextFactory(cell, this.value, this.label, this.tag);\n\t\t\t\t\t\tconst key = context.column.key;\n\t\t\t\t\t\tconst validator = createValidator(model.validation().rules, key);\n\t\t\t\t\t\treturn model.edit().commit.canExecute(context) && validator.validate({ [key]: this.value }) !== false;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: (cell, e) => {\n\t\t\t\t\tLog.info('cell.edit', 'commit');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\tif (cell && model.edit().commit.execute(this.contextFactory(cell, this.value, this.label, this.tag)) !== false) {\n\t\t\t\t\t\tthis.editor.commit();\n\t\t\t\t\t\tthis.editor = CellEditor.empty;\n\t\t\t\t\t\tthis.requestClose = null;\n\n\t\t\t\t\t\tthis.mode(cell, 'view');\n\t\t\t\t\t\ttable.view.focus();\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}),\n\t\t\tpush: new Command({\n\t\t\t\tpriority: 1,\n\t\t\t\tsource: 'edit.cell.view',\n\t\t\t\tcanExecute: cell => {\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\tconst canEdit = cell && cell.column.canEdit;\n\t\t\t\t\tif (canEdit) {\n\t\t\t\t\t\tconst context = this.contextFactory(cell, this.value, this.label, this.tag);\n\t\t\t\t\t\tconst key = context.column.key;\n\t\t\t\t\t\tconst validator = createValidator(model.validation().rules, key);\n\t\t\t\t\t\treturn model.edit().commit.canExecute(context) && validator.validate({ [key]: this.value }) !== false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: (cell, e) => {\n\t\t\t\t\tLog.info('cell.edit', 'batch commit');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\tif (cell && model.edit().commit.execute(this.contextFactory(cell, this.value, this.label, this.tag)) !== false) {\n\t\t\t\t\t\tthis.editor.commit();\n\t\t\t\t\t\tthis.editor = CellEditor.empty;\n\t\t\t\t\t\tthis.requestClose = null;\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcancel: new Command({\n\t\t\t\tpriority: 1,\n\t\t\t\tsource: 'edit.cell.view',\n\t\t\t\tshortcut: this.shortcutFactory('cancel'),\n\t\t\t\tcanExecute: cell => {\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\treturn cell\n\t\t\t\t\t\t&& cell.column.canEdit\n\t\t\t\t\t\t&& (cell.column.category === 'control' || model.edit().mode === 'cell')\n\t\t\t\t\t\t&& model.edit().status === 'edit'\n\t\t\t\t\t\t&& model.edit().cancel.canExecute(this.contextFactory(cell, this.value, this.label));\n\t\t\t\t},\n\t\t\t\texecute: (cell, e) => {\n\t\t\t\t\tLog.info('cell.edit', 'cancel');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\tif (cell && model.edit().cancel.execute(this.contextFactory(cell, this.value, this.label)) !== false) {\n\t\t\t\t\t\tthis.editor.reset();\n\t\t\t\t\t\tthis.editor = CellEditor.empty;\n\t\t\t\t\t\tthis.requestClose = null;\n\n\t\t\t\t\t\tthis.mode(cell, 'view');\n\t\t\t\t\t\ttable.view.focus();\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}),\n\t\t\treset: new Command({\n\t\t\t\tpriority: 1,\n\t\t\t\tsource: 'edit.cell.view',\n\t\t\t\tcanExecute: cell => {\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\treturn cell\n\t\t\t\t\t\t&& cell.column.canEdit\n\t\t\t\t\t\t&& (cell.column.category === 'control' || model.edit().mode === 'cell')\n\t\t\t\t\t\t&& model.edit().status === 'edit'\n\t\t\t\t\t\t&& model.edit().reset.canExecute(this.contextFactory(cell, this.value, this.label));\n\t\t\t\t},\n\t\t\t\texecute: (cell, e) => {\n\t\t\t\t\tLog.info('cell.edit', 'reset');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\tif (cell && model.edit().reset.execute(this.contextFactory(cell, this.value, this.label)) !== false) {\n\t\t\t\t\t\tthis.editor.reset();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}),\n\t\t\texit: new Command({\n\t\t\t\tpriority: 1,\n\t\t\t\tsource: 'edit.cell.view',\n\t\t\t\texecute: (cell, e) => {\n\t\t\t\t\tLog.info('cell.edit', 'reset');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\tif (cell) {\n\t\t\t\t\t\tif (this.commit.canExecute(cell, e)) {\n\t\t\t\t\t\t\tconst originValue = cell.value;\n\t\t\t\t\t\t\tconst editValue = this.value;\n\t\t\t\t\t\t\tif (originValue !== editValue) {\n\t\t\t\t\t\t\t\tthis.commit.execute(cell, e);\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.cancel.canExecute(cell, e)) {\n\t\t\t\t\t\t\tthis.cancel.execute(cell, e);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}),\n\t\t\tclear: new Command({\n\t\t\t\tpriority: 1,\n\t\t\t\tsource: 'edit.cell.view',\n\t\t\t\tcanExecute: cell => {\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\treturn cell\n\t\t\t\t\t\t&& cell.column.canEdit\n\t\t\t\t\t\t&& (cell.column.category === 'control' || model.edit().mode === 'cell')\n\t\t\t\t\t\t&& model.edit().status === 'edit'\n\t\t\t\t\t\t&& model.edit().clear.canExecute(this.contextFactory(cell, this.value, this.label));\n\t\t\t\t},\n\t\t\t\texecute: (cell, e) => {\n\t\t\t\t\tLog.info('cell.edit', 'clear');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\tif (cell && model.edit().clear.execute(this.contextFactory(cell, this.value, this.label)) !== false) {\n\t\t\t\t\t\tthis.editor.clear();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}),\n\t\t};\n\n\t\treturn new Map(\n\t\t\tObject.entries(commands)\n\t\t);\n\t}\n\n\tcontextFactory(cell, newValue, newLabel, tag) {\n\t\tconst { column, row, columnIndex, rowIndex, value: oldValue, label: oldLabel } = cell;\n\t\treturn {\n\t\t\tcolumn,\n\t\t\trow,\n\t\t\tcolumnIndex,\n\t\t\trowIndex,\n\t\t\toldValue,\n\t\t\tnewValue,\n\t\t\toldLabel,\n\t\t\tnewLabel,\n\t\t\tunit: 'cell',\n\t\t\ttag,\n\t\t\tgetValueFactory,\n\t\t\tgetLabelFactory\n\t\t};\n\t}\n\n\tget fetch() {\n\t\treturn this.editor.fetch;\n\t}\n\n\tget value() {\n\t\treturn this.editor.value;\n\t}\n\n\tset value(value) {\n\t\tthis.editor.value = value;\n\t}\n\n\tget label() {\n\t\treturn this.editor.label;\n\t}\n\n\tset label(label) {\n\t\tthis.editor.label = label;\n\t}\n\n\tget row() {\n\t\treturn this.cell.row;\n\t}\n\n\tget column() {\n\t\treturn this.cell.column;\n\t}\n\n\tget cell() {\n\t\treturn this.editor.td;\n\t}\n\n\tget options() {\n\t\treturn this.column.options;\n\t}\n\n\tcanEdit(cell) {\n\t\tconst { model } = this.plugin;\n\n\t\tif (cell) {\n\t\t\treturn cell.column.canEdit && model.edit().mode === 'cell';\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tshortcutFactory(type) {\n\t\tconst { model } = this.plugin;\n\t\tconst { edit } = model;\n\t\treturn () => {\n\t\t\tconst shortcuts = edit()[type + 'Shortcuts'];\n\t\t\tconst { td } = this.editor;\n\t\t\tif (td) {\n\t\t\t\tconst type = td.column && td.column.editor ? td.column.editor : td.column.type;\n\t\t\t\tif (shortcuts && shortcuts.hasOwnProperty(type)) {\n\t\t\t\t\treturn shortcuts[type];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn shortcuts['$default'];\n\t\t};\n\t}\n}\n\nclass RowEditorCore {\n\tconstructor() {\n\t\tthis.editors = [];\n\t}\n\n\tcommit() {\n\t}\n\n\treset() {\n\t}\n}\n\n\nclass TdView {\n\tconstructor(row, column) {\n\t\tthis.row = row;\n\t\tthis.column = column;\n\t}\n\n\tget value() {\n\t\treturn getValue$1(this.row, this.column);\n\t}\n\n\tset value(value) {\n\t\treturn setValue(this.row, this.column, value);\n\t}\n\n\tget label() {\n\t\treturn getLabel(this.row, this.column);\n\t}\n\n\tset label(value) {\n\t\treturn setLabel(this.row, this.column, value);\n\t}\n}\n\nconst empty = new RowEditorCore();\nclass RowEditor extends RowEditorCore {\n\tconstructor(row, columns) {\n\t\tsuper();\n\n\t\tthis.value = cloneDeepWith(row);\n\t\tthis.row = row;\n\n\t\tthis.editors =\n\t\t\tcolumns\n\t\t\t\t.filter(column => column.canEdit)\n\t\t\t\t.map(column => new CellEditor(new TdView(this.value, column)));\n\t}\n\n\tcommit() {\n\t\tthis.editors.forEach(editor => editor.commit());\n\t\tObject.assign(this.row, this.value);\n\t}\n\n\treset() {\n\t\tthis.editors.forEach(editor => editor.reset());\n\t\tthis.value = cloneDeepWith(this.row);\n\t}\n\n\tstatic get empty() {\n\t\treturn empty;\n\t}\n}\n\nfunction selectRow(state) {\n\tconst { cell } = state;\n\tif (cell) {\n\t\treturn cell.row;\n\t}\n\n\treturn null;\n}\n\nfunction selectColumn(state) {\n\tconst { cell } = state;\n\tif (cell) {\n\t\treturn cell.column;\n\t}\n\n\treturn null;\n}\n\nfunction selectColumnIndex(state) {\n\tconst { cell } = state;\n\tif (cell) {\n\t\treturn cell.columnIndex;\n\t}\n\n\treturn -1;\n}\n\nfunction selectRowIndex(state) {\n\tconst { cell } = state;\n\tif (cell) {\n\t\treturn cell.rowIndex;\n\t}\n\n\treturn -1;\n}\n\nclass EditRowLet {\n\tconstructor(plugin, shortcut) {\n\t\tthis.plugin = plugin;\n\t\tthis.editor = RowEditor.empty;\n\n\t\tconst commands = this.getCommands();\n\t\tshortcut.register(commands);\n\n\t\tthis.enter = commands.get('enter');\n\t\tthis.commit = commands.get('commit');\n\t\tthis.cancel = commands.get('cancel');\n\t\tthis.reset = commands.get('reset');\n\t}\n\n\tgetCommands() {\n\t\tconst { model } = this.plugin;\n\t\tconst commands = {\n\t\t\tenter: new Command({\n\t\t\t\tsource: 'edit.row.view',\n\t\t\t\tshortcut: this.shortcutFactory('enter'),\n\t\t\t\tcanExecute: row => {\n\t\t\t\t\trow = row || selectRow(model.navigation());\n\t\t\t\t\treturn row\n\t\t\t\t\t\t&& model.edit().mode === 'row'\n\t\t\t\t\t\t&& model.edit().status === 'view'\n\t\t\t\t\t\t&& model.edit().enter.canExecute(this.contextFactory(row));\n\t\t\t\t},\n\t\t\t\texecute: (row, e) => {\n\t\t\t\t\tLog.info('row.edit', 'edit mode');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tconst columns = this.model.columnList().line;\n\n\t\t\t\t\tthis.editor = new RowEditor(row, columns);\n\t\t\t\t\tmodel.edit({ status: 'edit' }, { source: 'edit.row.view' });\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcommit: new Command({\n\t\t\t\tsource: 'edit.row.view',\n\t\t\t\tshortcut: this.shortcutFactory('commit'),\n\t\t\t\t// TODO: add validation support\n\t\t\t\tcanExecute: row => {\n\t\t\t\t\trow = row || selectRow(model.navigation());\n\t\t\t\t\treturn row\n\t\t\t\t\t\t&& model.edit().mode === 'row'\n\t\t\t\t\t\t&& model.edit().status === 'edit'\n\t\t\t\t\t\t&& model.edit().commit.canExecute(this.contextFactory(row));\n\t\t\t\t},\n\t\t\t\texecute: (cell, e) => {\n\t\t\t\t\tLog.info('row.edit', 'commit');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.editor.commit();\n\t\t\t\t\tthis.editor = RowEditor.empty;\n\t\t\t\t\tmodel.edit({ status: 'view' }, { source: 'edit.row.view' });\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcancel: new Command({\n\t\t\t\tsource: 'edit.row.view',\n\t\t\t\tshortcut: this.shortcutFactory('cancel'),\n\t\t\t\tcanExecute: row => {\n\t\t\t\t\trow = row || selectRow(model.navigation());\n\t\t\t\t\treturn row\n\t\t\t\t\t\t&& model.edit().mode === 'row'\n\t\t\t\t\t\t&& model.edit().status === 'edit'\n\t\t\t\t\t\t&& model.edit().cancel.canExecute(this.contextFactory(row));\n\t\t\t\t},\n\t\t\t\texecute: (row, e) => {\n\t\t\t\t\tLog.info('cell.edit', 'cancel');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.editor.reset();\n\t\t\t\t\tthis.editor = RowEditor.empty;\n\t\t\t\t\tmodel.edit({ status: 'view' }, { source: 'edit.row.view' });\n\t\t\t\t}\n\t\t\t}),\n\t\t\treset: new Command({\n\t\t\t\tsource: 'edit.row.view',\n\t\t\t\tcanExecute: row => {\n\t\t\t\t\trow = row || selectRow(model.navigation());\n\t\t\t\t\treturn row\n\t\t\t\t\t\t&& model.edit().mode === 'row'\n\t\t\t\t\t\t&& model.edit().status === 'edit'\n\t\t\t\t\t\t&& model.edit().reset.canExecute(this.contextFactory(row));\n\t\t\t\t},\n\t\t\t\texecute: (row, e) => {\n\t\t\t\t\tLog.info('row.edit', 'reset');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (row && model.edit().reset.execute(this.contextFactory(row)) !== false) {\n\t\t\t\t\t\tthis.editor.reset();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t};\n\t\treturn new Map(\n\t\t\tObject.entries(commands)\n\t\t);\n\t}\n\n\tcontextFactory(row) {\n\t\treturn {\n\t\t\trow: row,\n\t\t\tunit: 'row'\n\t\t};\n\t}\n\n\tshortcutFactory(type) {\n\t\tconst { model } = this.plugin;\n\t\tconst { edit } = model;\n\t\treturn () => {\n\t\t\tconst shortcuts = edit()[type + 'Shortcuts'];\n\t\t\treturn (shortcuts && shortcuts['row']) || shortcuts['$default'];\n\t\t};\n\t}\n}\n\nclass EditLet {\n\tconstructor(plugin, shortcut) {\n\t\tthis.cell = new EditCellLet(plugin, shortcut);\n\t\tthis.row = new EditRowLet(plugin, shortcut);\n\t}\n}\n\nclass EditService {\n\tconstructor(plugin) {\n\t\tthis.plugin = plugin;\n\t}\n\n\tstartBatch(startCell) {\n\t\tconst { model } = this.plugin;\n\n\t\tconst editStatus = model.edit().status;\n\t\tconst selectionMode = model.selection().mode;\n\n\t\tmodel.selection({ mode: 'range' });\n\t\tmodel.edit({ status: 'startBatch' });\n\n\t\treturn () => {\n\t\t\tmodel.edit({ status: editStatus });\n\t\t\tthis.doBatch(startCell);\n\t\t\tmodel.selection({ mode: selectionMode });\n\t\t}\n\t}\n\n\tdoBatch(startCell) {\n\t\tconst { table, model } = this.plugin;\n\n\t\tconst { rows } = model.scene();\n\t\tconst { columns } = model.view();\n\t\tconst { items } = model.selection();\n\n\t\tconst shortcut = { register: () => ({}), keyCode: () => '' };\n\t\tconst editView = new EditCellLet(this.plugin, shortcut);\n\n\t\tconst startTd = table.body.cell(startCell.rowIndex, startCell.columnIndex).model();\n\t\tconst { value, label } = startTd;\n\n\t\tconst startColumnType = startTd.column.type;\n\t\tfor (let i = 0, length = items.length; i < length; i++) {\n\t\t\tconst { row, column } = items[i];\n\t\t\tconst rowIndex = rows.indexOf(row);\n\t\t\tconst columnIndex = columns.indexOf(column);\n\n\t\t\tconst td = table.body.cell(rowIndex, columnIndex).model();\n\t\t\tconst type = td.column.type;\n\t\t\tif (startColumnType === type) {\n\t\t\t\tconst editor = new CellEditor(td);\n\t\t\t\teditor.label = label;\n\t\t\t\teditor.value = value;\n\n\t\t\t\teditView.editor = editor;\n\t\t\t\tif (editView.push.canExecute()) {\n\t\t\t\t\teditView.push.execute();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass EditState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\n\t\tthis.mode = null; // cell | row\n\t\tthis.status = 'view'; // view | edit | startBatch | endBatch\n\t\tthis.method = null; // batch\n\n\t\tthis.enter = new Command({ source: 'edit.model' });\n\t\tthis.commit = new Command({ source: 'edit.model' });\n\t\tthis.cancel = new Command({ source: 'edit.model' });\n\t\tthis.reset = new Command({ source: 'edit.model' });\n\t\tthis.clear = new Command({ source: 'edit.model' });\n\n\t\tthis.cancelShortcuts = {\n\t\t\t'$default': 'escape'\n\t\t};\n\n\t\tthis.enterShortcuts = {\n\t\t\t'$default': '*',\n\t\t\t'row': 'F2|Enter',\n\t\t\t'form': 'F2|Enter'\n\t\t};\n\n\t\tthis.commitShortcuts = {\n\t\t\t'$default': 'tab|shift+tab|enter|ctrl+s',\n\t\t\t'reference': 'ctrl+s',\n\t\t\t'row': 'ctrl+s',\n\t\t\t'form': 'ctrl+s',\n\t\t\t'bool': 'tab|shift+tab|left|right|up|down|home|end|pageUp|pageDown',\n\t\t\t'text-area': 'ctrl+s|ctrl+enter'\n\t\t};\n\t}\n}\n\nclass EventListener {\n\tconstructor(element, manager) {\n\t\tthis.element = element;\n\t\tthis.manager = manager;\n\t\tthis.handlers = {};\n\t}\n\n\ton(name, f, settings = false) {\n\t\tconst manager = this.manager;\n\t\tconst handler = manager.bind(f);\n\t\tconst handlerSet = this.handlers[name] || (this.handlers[name] = []);\n\t\thandlerSet.push(handler);\n\n\t\tthis.element.addEventListener(name, handler, settings);\n\t\treturn () => {\n\t\t\tthis.element.removeEventListener(name, handler);\n\t\t\tconst index = handlerSet.indexOf(handler);\n\t\t\tif (index >= 0) {\n\t\t\t\thandlerSet.splice(index, 1);\n\t\t\t}\n\t\t};\n\t}\n\n\toff() {\n\t\tconst handlers = this.handlers;\n\t\tconst element = this.element;\n\t\tfor (let key of Object.keys(handlers)) {\n\t\t\tfor (let handler of Array.from(handlers[key])) {\n\t\t\t\telement.removeEventListener(key, handler);\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass EventManager {\n\tconstructor(context, apply = f => f()) {\n\t\tthis.context = context;\n\t\tthis.apply = apply;\n\t}\n\n\tbind(f) {\n\t\tconst handler = f.bind(this.context);\n\t\tconst apply = this.apply;\n\t\treturn (...args) => apply(() => handler(...args));\n\t}\n}\n\nconst DELIMITER = ',';\n\nfunction escape$1(value) {\n\tlet result = '' + value;\n\tresult = result.replace(/\"/g, '\"\"');\n\tresult = /[\\n\",]/.test(result) ? `\"${result}\"` : result;\n\treturn result;\n}\n\nclass CsvExport {\n\twrite(rows, columns) {\n\t\tconst result = [];\n\t\tconst values = [];\n\t\tlet head = [];\n\t\tfor (let column of columns) {\n\t\t\tif (column.category === 'data') {\n\t\t\t\tvalues.push(getValueFactory(column));\n\t\t\t\thead.push(escape$1(column.title));\n\t\t\t}\n\t\t}\n\t\tresult.push(head.join(DELIMITER));\n\n\t\tfor (let row of rows) {\n\t\t\tconst line = [];\n\t\t\tfor (let getValue of values) {\n\t\t\t\tline.push(escape$1(getValue(row)));\n\t\t\t}\n\t\t\tresult.push(line.join(DELIMITER));\n\t\t}\n\n\t\treturn result.join('\\n');\n\t}\n}\n\nfunction graphFlatView(graph, separator = ', ') {\n\tconst result = {};\n\n\tfor (let [prop, value] of Object.entries(graph)) {\n\t\tif (isArray$1(value)) {\n\t\t\tconst items = [];\n\t\t\tfor (let item of value) {\n\t\t\t\titems.push(item);\n\t\t\t}\n\t\t\tresult[prop] = items.join(separator);\n\t\t} else if (isObject(value)) {\n\t\t\tconst flatObject = graphFlatView(value, separator);\n\t\t\tfor (let [flatProp, flatValue] of Object.entries(flatObject)) {\n\t\t\t\tresult[prop + '.' + flatProp] = flatValue;\n\t\t\t}\n\t\t} else {\n\t\t\tresult[prop] = value;\n\t\t}\n\t}\n\treturn result;\n}\n\nclass ExportState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t}\n}\n\nclass JsonExport {\n\twrite(rows, columns) {\n\t\tconst result = [];\n\n\t\tfor (let row of rows) {\n\t\t\tconst flatRow = graphFlatView(row);\n\t\t\tconst obj = {};\n\t\t\tfor (let column of columns) {\n\t\t\t\tobj[column.title] = flatRow[column.key];\n\t\t\t}\n\t\t\tresult.push(obj);\n\t\t}\n\n\t\treturn JSON.stringify(result, '', 2);\n\t}\n}\n\nconst begin = '<?xml version=\"1.0\" encoding=\"UTF-8\"?><root>';\n\nfunction escape(value) {\n\tlet result = '' + value;\n\tconst characters = [/</g, />/g, /&/g, /'/g, /\"/g, /\\s\\s+/g, /\\n/g];\n\tconst replacements = ['&lt;', '&gt;', '&amp;', '&apos;', '&quot;', ' ', '&#xA;'];\n\tfor (let i = 0; i < characters.length; i++) {\n\t\tresult = result.replace(characters[i], replacements[i]);\n\t}\n\treturn result;\n}\n\nfunction objToXml(obj) {\n\tlet result = '';\n\n\tfor (let [prop, value] of Object.entries(obj)) {\n\t\tif (obj.hasOwnProperty(prop)) {\n\t\t\tif (isObject(value) && !isArray$1(value) && !isString(value)) {\n\t\t\t\tresult += `<${prop}>${objToXml(value)}</${prop}>`;\n\t\t\t} else if (isArray$1(value)) {\n\t\t\t\tfor (let item of value) {\n\t\t\t\t\tif (isString(item)) {\n\t\t\t\t\t\tresult += `<${prop}>${escape(item)}</${prop}>`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult += `<${prop}>${objToXml(item)}</${prop}>`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (isString(value)) {\n\t\t\t\tresult += `<${prop}>${escape(value)}</${prop}>`;\n\t\t\t}\n\t\t}\n\t}\n\treturn result;\n}\n\nclass XmlExport {\n\twrite(rows) {\n\t\tconst result = [begin];\n\t\tfor (let row of rows) {\n\t\t\tresult.push(objToXml({ row }));\n\t\t}\n\t\tresult.push('</root>');\n\t\treturn result.join('');\n\t}\n}\n\nfunction getType(type) {\n\treturn {}.toString.call(type).slice('[object]'.length, -1); // returns type of built-in objects\n}\n\nfunction castFactory(r) {\n\tconst rt = getType(r);\n\tconst asString = '' + r;\n\tconst asNumber = +r;\n\tconst asBool = !!r;\n\tconst asDate = new Date(r);\n\n\treturn l => {\n\t\tconst lt = getType(l);\n\t\tif (rt === lt) {\n\t\t\treturn r;\n\t\t}\n\n\t\tswitch (lt) {\n\t\t\tcase 'Number':\n\t\t\t\treturn asNumber;\n\t\t\tcase 'String':\n\t\t\t\treturn asString;\n\t\t\tcase 'Date':\n\t\t\t\treturn asDate;\n\t\t\tcase 'Boolean':\n\t\t\t\treturn asBool;\n\t\t\tdefault:\n\t\t\t\tthrow GridError(\n\t\t\t\t\t'cast.factory',\n\t\t\t\t\t`Unsupported format ${lt}`\n\t\t\t\t);\n\t\t}\n\t};\n}\n\nfunction buildExpression(filterBy, op = 'and') {\n\tconst result = [];\n\tfor (let [key, filter] of Object.entries(filterBy)) {\n\t\tif (key === '$expression') {\n\t\t\tresult.push(filter);\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (filter.expression) {\n\t\t\tresult.push(filter.expression);\n\t\t}\n\n\t\tconst expressions = [];\n\t\tif (filter.items && filter.items.length) {\n\t\t\texpressions.push(toInExpression(key, filter.items));\n\t\t}\n\n\t\tif (filter.blanks) {\n\t\t\texpressions.push(toIsEmptyExpression(key));\n\t\t}\n\n\t\tif (expressions.length) {\n\t\t\tif (expressions.length === 1) {\n\t\t\t\tresult.push(expressions[0]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresult.push(compile(expressions, 'or'));\n\t\t\t}\n\t\t}\n\t}\n\n\treturn compile(result, op);\n}\n\nfunction toIsEmptyExpression(key) {\n\treturn {\n\t\tkind: 'group',\n\t\top: 'and',\n\t\tleft: {\n\t\t\tkind: 'condition',\n\t\t\tleft: key,\n\t\t\top: 'isEmpty',\n\t\t\tright: null\n\t\t},\n\t\tright: null\n\t};\n}\n\nfunction toInExpression(key, items) {\n\treturn {\n\t\tkind: 'group',\n\t\top: 'and',\n\t\tleft: {\n\t\t\tkind: 'condition',\n\t\t\tleft: key,\n\t\t\top: 'in',\n\t\t\tright: Array.from(items)\n\n\t\t},\n\t\tright: null\n\t};\n}\n\nfunction compile(expressions, op) {\n\tconst root = {\n\t\tkind: 'group',\n\t\top,\n\t\tleft: null,\n\t\tright: null\n\t};\n\n\tlet current = root;\n\n\texpressions.forEach(expr => {\n\t\tif (!current.left) {\n\t\t\tcurrent.left = expr;\n\t\t}\n\t\telse {\n\t\t\tconst next = {\n\t\t\t\tkind: 'group',\n\t\t\t\top,\n\t\t\t\tleft: expr,\n\t\t\t\tright: null\n\t\t\t};\n\n\t\t\tcurrent.right = next;\n\t\t\tcurrent = next;\n\t\t}\n\t});\n\n\n\treturn root.left ? root : null;\n}\n\nclass Visitor {\n\tconstructor() {\n\t}\n\n\tvisit(item, depth = 0) {\n\t\tswitch (item.kind) {\n\t\t\tcase 'group':\n\t\t\t\treturn this.visitGroup(item, depth + 1);\n\t\t\tcase 'condition':\n\t\t\t\treturn this.visitCondition(item, depth);\n\t\t\tcase 'function':\n\t\t\t\treturn this.visitFunction(item, depth);\n\t\t\tdefault:\n\t\t\t\tthrow GridError(\n\t\t\t\t\t'expression.visitor',\n\t\t\t\t\t`Invalid kind ${item.kind}`\n\t\t\t\t);\n\t\t}\n\t}\n\n\tvisitGroup(group, depth) {\n\t\tif (group.right) {\n\t\t\tthis.visit(group.left, depth);\n\t\t\tthis.visit(group.right, depth);\n\t\t}\n\n\t\treturn this.visit(group.left, depth);\n\t}\n\n\tvisitCondition(condition, depth) {\n\t\tswitch (condition.op) {\n\t\t\tcase 'isNotNull':\n\t\t\tcase 'isNull':\n\t\t\tcase 'isNotEmpty':\n\t\t\tcase 'isEmpty':\n\t\t\tcase 'isNumeric':\n\t\t\tcase 'isNotNumeric':\n\t\t\t\treturn this.visitUnary(condition, depth);\n\t\t\tcase 'equals':\n\t\t\tcase 'notEquals':\n\t\t\tcase 'greaterThanOrEquals':\n\t\t\tcase 'greaterThan':\n\t\t\tcase 'lessThanOrEquals':\n\t\t\tcase 'lessThan':\n\t\t\tcase 'like':\n\t\t\tcase 'notLike':\n\t\t\tcase 'startsWith':\n\t\t\tcase 'endsWith':\n\t\t\tcase 'match':\n\t\t\t\treturn this.visitBinary(condition, depth);\n\t\t\tcase 'between':\n\t\t\t\treturn this.visitBetween(condition, depth);\n\t\t\tcase 'in':\n\t\t\t\treturn this.visitIn(condition, depth);\n\t\t\tdefault:\n\t\t\t\tthrow new GridError(\n\t\t\t\t\t'expression.visitor',\n\t\t\t\t\t`Invalid operation ${condition.op}`\n\t\t\t\t);\n\t\t}\n\t}\n\n\tvisitUnary(condition) {\n\t\tthis.visitLeft(condition.left);\n\t}\n\n\tvisitBinary(condition/*, depth*/) {\n\t\tthis.visitLeft(condition.left);\n\t\tthis.visitRight(condition.right);\n\t}\n\n\tvisitLeft(left) {\n\t\tif (left.kind) {\n\t\t\tswitch (left.kind) {\n\t\t\t\tcase 'function':\n\t\t\t\t\tthis.visitArguments(left.arguments);\n\t\t\t}\n\t\t}\n\t}\n\n\tvisitBetween(/*condition, depth*/) {\n\t}\n\n\tvisitIn(/*condition, depth*/) {\n\t}\n\n\tvisitFunction(/*fn*/) {\n\t}\n\n\tvisitArguments(args) {\n\t\treturn args.map(arg => {\n\t\t\tswitch (arg.kind) {\n\t\t\t\tcase 'condition':\n\t\t\t\tcase 'group':\n\t\t\t\t\tthis.visit(arg);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction stringify$1(value, type, isValid) {\n    if (!isValid) {\n        return '<span class=\"q-grid-markup-condition-value-invalid\"></span>';\n    }\n\n    switch (type) {\n        case 'text':\n            return stringifyText(value);\n        case 'number':\n            return stringifyNumber(value);\n        case 'date':\n            return stringifyDate(value);\n        default:\n            return '' + value;\n    }\n}\n\nfunction stringifyText(value) {\n    return `<span class=\"q-grid-markup-condition-quote\">'</span>\n                <span class=\"q-grid-markup-condition-value q-grid-markup-condition-value-text\">${value}</span>\n            <span class=\"q-grid-markup-condition-quote\">'</span>`;\n}\n\nfunction stringifyDate(value) {\n    const date = new Date(value);\n    if (date !== 'Invalid Date' && !isNaN(date)) {\n        return `<span class=\"q-grid-markup-condition-quote\">'</span>\n                    <span class=\"q-grid-markup-condition-value q-grid-markup-condition-value-date\">${value}</span>\n                <span class=\"q-grid-markup-condition-quote\">'</span>`;\n    }\n\n    return `<span class=\"q-grid-markup-condition-quote\">'</span>\n                <span class=\"q-grid-markup-condition-value q-grid-markup-condition-value-date q-grid-markup-condition-error\">${value}</span>\n            <span class=\"q-grid-markup-condition-quote\">'</span>`;\n}\n\nfunction stringifyNumber(value) {\n    const number = Number.parseFloat(value);\n    if (!isNaN(number) && isFinite(number)) {\n        return `<span class=\"q-grid-markup-condition-value q-grid-markup-condition-number\">${value}</span>`;\n    }\n\n    return `<span class=\"q-grid-markup-condition-value q-grid-markup-condition-number q-grid-markup-condition-error\">${value}</span>`;\n}\n\nclass MarkupVisitor extends Visitor {\n    constructor(label, type, isValid) {\n        super();\n\n        this.label = label;\n        this.type = type;\n        this.isValid = isValid;\n    }\n\n    visitGroup(group, depth) {\n        if (group.right) {\n            const l = this.visit(group.left, depth);\n            const r = this.visit(group.right, depth);\n\n            const expr = `<div class=\"q-grid-markup-node-left\">${l}</div><span class=\"q-grid-markup-group-op\">${group.op}</span><div class=\"q-grid-markup-node-right\">${r}</div>`;\n            return `<div class=\"q-grid-markup-node\">${(depth > 1 ? `<span class=\"q-grid-markup-group-open\">(</span>${expr}<span class=\"q-grid-markup-group-close\">)</span>` : expr)}</div>`;\n        }\n\n        return `<div class=\"q-grid-markup-node\">${this.visit(group.left, depth)}<div class=\"q-grid-markup-node\">`;\n    }\n\n    visitUnary(condition) {\n        switch (condition.op) {\n            case 'isNotNull':\n                return `<span class=\"q-grid-markup-condition-left\">${this.label(condition.left)}</span><span class=\"q-grid-markup-condition-right q-grid-markup-condition-unary\">is not empty</span>`;\n            case 'isNull':\n                return `<span class=\"q-grid-markup-condition-left\">${this.label(condition.left)}</span><span class=\"q-grid-markup-condition-right q-grid-markup-condition-unary\">is empty</span>`;\n            default:\n                throw new GridError('markup.visitor', `Invalid operation ${condition.op}`)\n        }\n    }\n\n    visitBinary(condition) {\n        let op;\n\n        switch (condition.op) {\n            case 'equals':\n                op = '=';\n                break;\n            case 'notEquals':\n                op = '&lt;&gt;';\n                break;\n            case 'greaterThanOrEquals':\n                op = '&gt;=';\n                break;\n            case 'greaterThan':\n                op = '&gt;';\n                break;\n            case 'lessThanOrEquals':\n                op = '&lt;=';\n                break;\n            case 'lessThan':\n                op = '&lt;';\n                break;\n            case 'like':\n                op = 'like';\n                break\n            case 'notLike':\n                op = 'not like';\n                break;\n            case 'startsWith':\n                op = 'starts with';\n                break;\n            case 'endsWith':\n                op = 'ends with';\n                break;\n            default:\n                throw new GridError('markup.visitor', `Invalid operation ${condition.op}`);\n        }\n\n        const isValid = this.isValid(condition.left, condition.right);\n        return `<span class=\"q-grid-markup-condition-left\">${this.label(condition.left)}</span>\n                <span class=\"q-grid-markup-condition-op\">${op}</span>\n                <span class=\"q-grid-markup-condition-right\">${stringify$1(condition.right, this.type(condition.left), isValid)}</span>`;\n    }\n\n    visitBetween(condition) {\n        const isValid = this.isValid(condition.left, condition.right);\n        return `<span class=\"q-grid-markup-condition-left\">${this.label(condition.left)}</span>\n                <span class=\"q-grid-markup-condition-op\">between</span>\n                <span class=\"q-grid-markup-condition-right\">${stringify$1(condition.right[0], this.type(condition.left), isValid)}</span>\n                <span class=\"q-grid-markup-condition-op\">and</span>\n                <span class=\"q-grid-markup-condition-right\">${stringify$1(condition.right[1], this.type(condition.left), isValid)}</span>`;\n    }\n\n    visitIn(condition) {\n        const isValid = this.isValid(condition.left, condition.right);\n        return `<span class=\"q-grid-markup-condition-left\">${this.label(condition.left)}</span>\n                <span class=\"q-grid-markup-condition-op\">in</span>\n                <span class=\"q-grid-markup-condition-open\">(</span>\n                <span class=\"q-grid-markup-condition-right\">${condition.right.map(item => stringify$1(item, this.type(condition.left), isValid)).join(', ')}</span>\n                <span class=\"q-grid-markup-condition-close\">)</span>`;\n    }\n}\n\nclass PredicateVisitor extends Visitor {\n\tconstructor(valueFactory, assertFactory, getType) {\n\t\tsuper();\n\n\t\tthis.valueFactory = valueFactory;\n\t\tthis.assertFactory = assertFactory;\n\t\tthis.getType = getType;\n\t}\n\n\tvisitGroup(group) {\n\t\tif (group.right) {\n\t\t\tconst lp = this.visit(group.left);\n\t\t\tconst rp = this.visit(group.right);\n\n\t\t\tswitch (group.op) {\n\t\t\t\tcase 'and':\n\t\t\t\t\treturn value => {\n\t\t\t\t\t\treturn lp(value) && rp(value);\n\t\t\t\t\t};\n\t\t\t\tcase 'or':\n\t\t\t\t\treturn value => {\n\t\t\t\t\t\treturn lp(value) || rp(value);\n\t\t\t\t\t};\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow GridError(\n\t\t\t\t\t\t'predicate.visitor',\n\t\t\t\t\t\t`Invalid operation ${group.op}`\n\t\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn this.visit(group.left);\n\t}\n\n\tvisitCondition(condition) {\n\t\tconst r = condition.right;\n\t\tconst name = condition.left;\n\t\tconst getValue = this.valueFactory(name);\n\t\tconst assert = this.assertFactory(name);\n\t\tconst map = new Set();\n\n\t\tconst rt = this.getType(name, isArray$1(r) ? r[0] : r);\n\t\tlet parse = compareParseFactory(rt);\n\n\t\tif (isArray$1(r)) {\n\t\t\tif (r.length) {\n\t\t\t\tr.forEach(x => map.add('' + x));\n\t\t\t} else {\n\t\t\t\tparse = identity;\n\t\t\t}\n\t\t}\n\n\t\tconst { equals, isNull, lessThan } = assert;\n\n\t\tconst lessThanOrEquals = (x, y) => {\n\t\t\treturn equals(x, y) || lessThan(x, y);\n\t\t};\n\n\t\tconst greaterThan = (x, y) => {\n\t\t\treturn !equals(x, y) && !lessThan(x, y)\n\t\t};\n\n\t\tconst greaterThanOrEquals = (x, y) => {\n\t\t\treturn equals(x, y) || !lessThan(x, y);\n\t\t};\n\n\t\tlet predicate;\n\t\tswitch (condition.op) {\n\t\t\tcase 'isNotNull':\n\t\t\tcase 'isNotEmpty':\n\t\t\t\tpredicate = actual => !isNull(actual);\n\t\t\t\tbreak;\n\t\t\tcase 'isNull':\n\t\t\tcase 'isEmpty':\n\t\t\t\tpredicate = actual => isNull(actual);\n\t\t\t\tbreak;\n\t\t\tcase 'equals': {\n\t\t\t\tconst etalon = parse(r);\n\t\t\t\tpredicate = actual => equals(parse(actual), etalon);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'notEquals': {\n\t\t\t\tconst etalon = parse(r);\n\t\t\t\tpredicate = actual => !equals(parse(actual), etalon);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'greaterThanOrEquals': {\n\t\t\t\tconst etalon = parse(r);\n\t\t\t\tpredicate = actual => greaterThanOrEquals(parse(actual), etalon);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'greaterThan': {\n\t\t\t\tconst etalon = parse(r);\n\t\t\t\tpredicate = actual => greaterThan(parse(actual), etalon);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'lessThanOrEquals': {\n\t\t\t\tconst etalon = parse(r);\n\t\t\t\tpredicate = actual => lessThanOrEquals(parse(actual), etalon);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'lessThan': {\n\t\t\t\tconst etalon = parse(r);\n\t\t\t\tpredicate = actual => lessThan(parse(actual), etalon);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'between': {\n\t\t\t\tconst [start, end] = r;\n\t\t\t\tconst noStart = isUndefined(start);\n\t\t\t\tconst noEnd = isUndefined(end);\n\t\t\t\tif (noStart && noEnd) {\n\t\t\t\t\tpredicate = yes;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (noEnd) {\n\t\t\t\t\tconst etalon = parse(start);\n\t\t\t\t\tpredicate = actual => greaterThanOrEquals(parse(actual), etalon);\n\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\tif (noStart) {\n\t\t\t\t\tconst etalon = parse(end);\n\t\t\t\t\tpredicate = actual => lessThanOrEquals(parse(actual), etalon);\n\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\tconst etalonStart = parse(start);\n\t\t\t\tconst etalonEnd = parse(end);\n\t\t\t\tpredicate = actual => {\n\t\t\t\t\tconst actualValue = parse(actual);\n\t\t\t\t\treturn greaterThanOrEquals(actualValue, etalonStart)\n\t\t\t\t\t\t&& lessThanOrEquals(actualValue, etalonEnd);\n\t\t\t\t};\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'in': {\n\t\t\t\tpredicate = (actual) => {\n\t\t\t\t\tif (isArray$1(actual)) {\n\t\t\t\t\t\tfor (const value of map) {\n\t\t\t\t\t\t\tif (actual.some((item) => '' + item === value)) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst v = !actual && actual !== 0 ? 'null' : '' + actual;\n\t\t\t\t\treturn map.has(v);\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'like': {\n\t\t\t\tconst etalon = ('' + r).toLowerCase();\n\t\t\t\tpredicate = actual => actual && ('' + actual).toLowerCase().includes(etalon);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'notLike': {\n\t\t\t\tconst etalon = ('' + r).toLowerCase();\n\t\t\t\tpredicate = actual => actual && !('' + actual).toLowerCase().includes(etalon);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'startsWith': {\n\t\t\t\tconst etalon = ('' + r).toLowerCase();\n\t\t\t\tpredicate = actual => actual && (('' + actual).toLowerCase().indexOf(etalon) === 0);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'endsWith': {\n\t\t\t\tconst etalon = ('' + r).toLowerCase();\n\t\t\t\tpredicate = actual => {\n\t\t\t\t\tconst substr = ('' + actual).slice(-etalon.length).toLowerCase();\n\t\t\t\t\treturn etalon === substr;\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tthrow new GridError(\n\t\t\t\t\t'predicate.visitor',\n\t\t\t\t\t`Invalid operation ${condition.op}`\n\t\t\t\t);\n\t\t}\n\n\t\treturn row => {\n\t\t\tconst actual = getValue(row);\n\t\t\treturn predicate(actual);\n\t\t};\n\t}\n}\n\nclass FetchState {\n\tconstructor() {\n\t\tthis.skip = 0;\n\t}\n}\n\nclass FilterLet {\n\tconstructor(plugin) {\n\t\tconst { model } = plugin;\n\n\t\tthis.plugin = plugin;\n\n\t\tthis.column = new Command({\n\t\t\tsource: 'filter.view',\n\t\t\texecute: (column, search) => {\n\t\t\t\tconst { key } = column;\n\n\t\t\t\tlet { by, operatorFactory } = model.filter();\n\t\t\t\tby = clone(by);\n\n\t\t\t\tconst filter = by[key] || (by[key] = {});\n\t\t\t\tif (!isUndefined(search) && search !== null && search !== '') {\n\t\t\t\t\tconst opList = operatorFactory(column);\n\t\t\t\t\tconst op = filter.expression ? filter.expression.op : opList[0];\n\t\t\t\t\tswitch (op) {\n\t\t\t\t\t\tcase 'contains': {\n\t\t\t\t\t\t\tfilter.items = [search];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'between': {\n\t\t\t\t\t\t\tfilter.expression = {\n\t\t\t\t\t\t\t\tkind: 'condition',\n\t\t\t\t\t\t\t\tleft: key,\n\t\t\t\t\t\t\t\top,\n\t\t\t\t\t\t\t\tright: [null, search]\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\tfilter.expression = {\n\t\t\t\t\t\t\t\tkind: 'condition',\n\t\t\t\t\t\t\t\tleft: key,\n\t\t\t\t\t\t\t\top,\n\t\t\t\t\t\t\t\tright: search\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdelete by[key];\n\t\t\t\t}\n\n\t\t\t\tmodel.filter({ by }, { source: 'filter.view' });\n\t\t\t}\n\t\t});\n\t}\n\n\thas(column) {\n\t\tconst { model } = this.plugin;\n\t\tconst { by } = model.filter();\n\t\treturn by.hasOwnProperty(column.key);\n\t}\n\n\tvalue(column) {\n\t\tconst { model } = this.plugin;\n\t\tconst { key } = column;\n\t\tconst { by } = model.filter();\n\t\tif (by[key]) {\n\t\t\tconst { expression, items } = by[key];\n\t\t\treturn expression\n\t\t\t\t? isArray$1(expression.right)\n\t\t\t\t\t? expression.right[expression.right.length - 1]\n\t\t\t\t\t: expression.right\n\t\t\t\t: items && items.length\n\t\t\t\t\t? items[0]\n\t\t\t\t\t: null;\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\nfunction match(context) {\n\tconst { model } = context;\n\n\tconst expression = buildExpression(model.filter().by);\n\tif (expression !== null) {\n\t\tconst { labelFactory } = context;\n\t\tconst { assertFactory } = model.filter();\n\n\t\tconst columnMap = mapColumns(model.columnList().line);\n\n\t\tconst valueColumnFactory = (key) => {\n\t\t\tconst column = columnMap[key];\n\t\t\tif (column.type === 'array') {\n\t\t\t\treturn (row) => getValue$1(row, column);\n\t\t\t}\n\n\t\t\treturn labelFactory(columnMap[key]);\n\t\t};\n\n\t\tconst assertColumnFactory = key => assertFactory(columnMap[key]);\n\t\tconst getType = key => {\n\t\t\tconst column = columnMap[key];\n\t\t\treturn (column && column.type) || 'text';\n\t\t};\n\n\t\tconst visitor =\n\t\t\tnew PredicateVisitor(\n\t\t\t\tvalueColumnFactory,\n\t\t\t\tassertColumnFactory,\n\t\t\t\tgetType\n\t\t\t);\n\n\t\treturn visitor.visit(expression);\n\t}\n\n\treturn yes;\n}\n\nclass FilterState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\n\t\tthis.by = {};\n\t\tthis.match = match;\n\t\tthis.custom = yes;\n\t\tthis.fetch = noop;\n\t\tthis.unit = 'default';\t// default|row\n\n\t\tthis.assertFactory = () => ({\n\t\t\tequals: (x, y) => x === y,\n\t\t\tlessThan: (x, y) => x < y,\n\t\t\tisNull: x => x === '' || x === null || x === undefined\n\t\t});\n\n\t\tthis.operatorFactory = (column) => {\n\t\t\tswitch (column.type) {\n\t\t\t\tcase 'text':\n\t\t\t\tcase 'url':\n\t\t\t\tcase 'email':\n\t\t\t\tcase 'file': {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t'contains',\n\t\t\t\t\t\t'like',\n\t\t\t\t\t\t'notLike',\n\t\t\t\t\t\t'startsWith',\n\t\t\t\t\t\t'endsWith',\n\t\t\t\t\t\t'isEmpty',\n\t\t\t\t\t\t'isNotEmpty',\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\tcase 'date':\n\t\t\t\tcase 'datetime': {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t'between',\n\t\t\t\t\t\t'contains',\n\t\t\t\t\t\t'lessThan',\n\t\t\t\t\t\t'lessThanOrEquals',\n\t\t\t\t\t\t'greaterThan',\n\t\t\t\t\t\t'greaterThanOrEquals',\n\t\t\t\t\t\t'isEmpty',\n\t\t\t\t\t\t'isNotEmpty',\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\tcase 'id':\n\t\t\t\tcase 'currency':\n\t\t\t\tcase 'number': {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t'between',\n\t\t\t\t\t\t'contains',\n\t\t\t\t\t\t'like',\n\t\t\t\t\t\t'lessThan',\n\t\t\t\t\t\t'lessThanOrEquals',\n\t\t\t\t\t\t'greaterThan',\n\t\t\t\t\t\t'greaterThanOrEquals',\n\t\t\t\t\t\t'isEmpty',\n\t\t\t\t\t\t'isNotEmpty',\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\treturn ['contains'];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n}\n\nfunction takeOnce() {\n    return source =>\n        new Operator(subscriber =>\n            source.subscribe({\n                next: x => {\n                    subscriber.next(x);\n                    subscriber.complete();\n                }\n            })\n        );\n}\n\nfunction filter$1(test) {\n    return source =>\n        new Operator(subscriber =>\n            source.subscribe({\n                next: x => {\n                    if (test(x)) {\n                        subscriber.next(x);\n                    }\n                }\n            })\n        );\n}\n\nclass FocusService {\n    constructor(model) {\n        this.model = model;\n    }\n\n    activate(rowIndex, columnIndex) {\n        const { focus, scene, sceneChanged } = this.model;\n\n        if (isUndefined(rowIndex)) {\n            rowIndex = focus().rowIndex;\n        }\n\n        if (rowIndex < 0) {\n            rowIndex = 0;\n        }\n\n        if (isUndefined(columnIndex)) {\n            columnIndex = focus().columnIndex;\n        }\n\n        if (columnIndex < 0) {\n            columnIndex = scene().column.line.findIndex(c => c.model.canFocus);\n        }\n\n        if (scene().status === 'stop') {\n            this.focus(rowIndex, columnIndex);\n        } else {\n            sceneChanged.on((e, off) => {\n                if (e.hasChanges('status')) {\n                    if (e.state.status === 'stop') {\n                        off();\n\n                        this.focus(rowIndex, columnIndex);\n                    }\n                }\n            });\n        }\n    }\n\n    focus(rowIndex, columnIndex) {\n        const { pagination, focus } = this.model;\n        const { count, current, size } = pagination();\n\n        const last = this.getPage(count);\n        const target = Math.max(0, Math.min(this.getPage(rowIndex), last));\n\n        if (current !== target) {\n            pagination({\n                current: target\n            }, {\n                source: 'focus.service'\n            });\n\n            this.activate(rowIndex, columnIndex);\n            return;\n        }\n\n        rowIndex = rowIndex - size * current;\n\n        focus({\n            isActive: true,\n            rowIndex,\n            columnIndex\n        }, {\n            source: 'focus.service'\n        });\n    }\n\n    getPage(index) {\n        const { model } = this;\n        const { size } = model.pagination();\n\n        return Math.max(0, Math.floor(index / size));\n    }\n}\n\nclass FocusAfterRenderService {\n    constructor(plugin) {\n        const { table, model, observe } = plugin;\n\n        observe(model.sceneChanged)\n            .pipe(\n                filter$1(e => e.hasChanges('status') && e.state.status === 'stop'),\n                takeOnce()\n            )\n            .subscribe(e => {\n                table.view.focus();\n            });\n    }\n}\n\nclass FocusState {\n\tconstructor() {\n\t\tthis.isActive = false;\n\n\t\tthis.rowIndex = -1;\n\t\tthis.columnIndex = -1;\n\t}\n}\n\nclass FootLet {\n\tconstructor(plugin) {\n\t\tconst { model, observeReply } = plugin;\n\n\t\tthis.plugin = plugin;\n\t\tthis.valueFactory = getValueFactory;\n\t\tthis.rows = [];\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('column')) {\n\t\t\t\t\tthis.invalidate();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tinvalidate() {\n\t\tLog.info('view.foot', 'invalidate');\n\n\t\tthis.rows = new Array(this.count);\n\t}\n\n\tcolumns(row, pin) {\n\t\tconst { model } = this.plugin;\n\t\treturn model.scene().column.area[pin] || [];\n\t}\n\n\tget count() {\n\t\tconst { model } = this.plugin;\n\t\tconst { columns } = model.view();\n\t\tconst resourceCount = model.foot().resource.count;\n\n\t\tfor (let i = 0, length = columns.length; i < length; i++) {\n\t\t\tif (columns[i].aggregation) {\n\t\t\t\treturn Math.max(resourceCount, 1);\n\t\t\t}\n\t\t}\n\n\t\treturn resourceCount;\n\t}\n\n\tvalue(column) {\n\t\tif (column.aggregation) {\n\t\t\tconst aggregation = column.aggregation;\n\t\t\tconst aggregationOptions = column.aggregationOptions;\n\n\t\t\tif (!Aggregation.hasOwnProperty(aggregation)) {\n\t\t\t\tthrow new GridError(\n\t\t\t\t\t'foot',\n\t\t\t\t\t`Aggregation ${aggregation} is not registered`);\n\t\t\t}\n\n\t\t\tconst { model } = this.plugin;\n\t\t\tconst { rows } = model.data();\n\t\t\t\n\t\t\tconst getValue = this.valueFactory(column);\n\t\t\treturn Aggregation[aggregation](rows, getValue, aggregationOptions);\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\nclass EnumerableResource extends Resource {\n\tconstructor(data = {}, scope = {}, count = 0) {\n\t\tsuper(data, scope);\n\n\t\tthis.count = count;\n\t}\n}\n\nclass FootState {\n\tconstructor() {\n\t\tthis.resource = new EnumerableResource();\n\t\tthis.cache = new Cache();\n\t}\n}\n\nclass GridHost {\n\tconstructor(host, plugin) {\n\t\tconst { model, disposable, observe } = plugin;\n\t\tconst { grid } = model;\n\n\t\tthis.plugin = plugin;\n\n\t\tif (grid().status === 'bound') {\n\t\t\tthrow new GridError('grid.host', `Model is already used by grid \"${grid().id}\"`);\n\t\t}\n\n\t\tif (!host.id) {\n\t\t\thost.id = model.grid().id;\n\t\t}\n\n\t\tgrid({ status: 'bound' }, { source: 'grid.host' });\n\n\t\tthis.invalidateVisibility();\n\t\tobserve(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('column')) {\n\t\t\t\t\tthis.invalidateVisibility();\n\t\t\t\t}\n\t\t\t});\n\n\t\tdisposable.add(() => model.grid({ status: 'unbound' }, { source: 'grid.host' }));\n\t}\n\n\tkeyUp(e) {\n\t\tconst { model } = this.plugin;\n\t\tconst { codes } = model.keyboard();\n\t\tconst code = Keyboard.translate(e.keyCode);\n\t\tconst index = codes.indexOf(code);\n\t\tif (index >= 0) {\n\t\t\tconst newCodes = Array.from(codes);\n\t\t\tnewCodes.splice(index, 1);\n\t\t\tmodel.keyboard({\n\t\t\t\tcode,\n\t\t\t\tcodes: newCodes,\n\t\t\t\tstatus: 'up'\n\t\t\t}, {\n\t\t\t\tsource: 'key.up'\n\t\t\t});\n\t\t}\n\n\t\tmodel.keyboard({\n\t\t\tcode: null,\n\t\t\tstatus: 'release'\n\t\t}, {\n\t\t\tsource: 'key.up'\n\t\t});\n\t}\n\n\tkeyDown(e, source = 'grid') {\n\t\tconst { model } = this.plugin;\n\t\tconst { shortcut } = model.action();\n\n\t\tconst code = Keyboard.translate(e.keyCode);\n\t\tconst result = shortcut.keyDown(e, source);\n\t\tif (result.length > 0) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t} else {\n\t\t\tif (e.target.tagName === 'TBODY') {\n\t\t\t\tconst { prevent } = model.navigation();\n\t\t\t\tif (prevent.has(code)) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tmodel.keyboard({\n\t\t\tcode,\n\t\t\tcodes: uniq(model.keyboard().codes.concat(code)),\n\t\t\tstatus: 'down'\n\t\t}, {\n\t\t\tsource: 'key.down'\n\t\t});\n\n\t\treturn result;\n\t}\n\n\tinvalidateVisibility() {\n\t\tconst { model } = this.plugin;\n\t\tconst { left, right } = model.scene().column.area;\n\t\tconst { pinTop, pinBottom } = model.row();\n\n\t\tconst { pin: oldPin } = model.visibility();\n\t\tconst newPin = {\n\t\t\tleft: left.length > 0,\n\t\t\tright: right.length > 0,\n\t\t\ttop: pinTop.length > 0,\n\t\t\tbottom: pinBottom.length > 0\n\t\t};\n\n\t\tif (!isEqual(oldPin, newPin)) {\n\t\t\tmodel.visibility({\n\t\t\t\tpin: newPin\n\t\t\t}, {\n\t\t\t\tsource: 'grid.host'\n\t\t\t});\n\t\t}\n\t}\n\n\tinvalidateActive() {\n\t\tconst { model, table, service } = this.plugin;\n\t\tif (table.view.isFocused()) {\n\t\t\tconst needFocusCell =\n\t\t\t\t!model.mouse().target\n\t\t\t\t&& (model.focus().rowIndex < 0 || model.focus().columnIndex < 0);\n\t\t\tif (needFocusCell) {\n\t\t\t\tservice.focus(\n\t\t\t\t\tmodel.pagination().size * model.pagination().current\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tmodel.focus({\n\t\t\t\t\tisActive: true\n\t\t\t\t}, {\n\t\t\t\t\tsource: 'grid.host'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tmodel.focus({ isActive: false }, { source: 'grid.host' });\n\t\t}\n\t}\n}\n\nclass Middleware {\n\tconstructor(pipes) {\n\t\tthis.pipes = pipes;\n\t}\n\n\trun(context, memo = []) {\n\t\tconst tasks = this.pipes\n\t\t\t.map(pipe => memo =>\n\t\t\t\tnew Promise((resolve, reject) =>\n\t\t\t\t\tpipe(memo, context, resolve, reject)));\n\n\t\treturn start(tasks, memo);\n\t}\n}\n\nfunction start(tasks, memo) {\n\ttasks = Array.from(tasks);\n\treturn new Promise((resolve, reject) => {\n\t\tinvoke(memo);\n\n\t\tfunction invoke(memo) {\n\t\t\tif (tasks.length) {\n\t\t\t\tconst task = tasks.shift();\n\t\t\t\tconst promise = task(memo);\n\t\t\t\tpromise\n\t\t\t\t\t.then(invoke)\n\t\t\t\t\t.catch(ex => {\n\t\t\t\t\t\treject(ex);\n\t\t\t\t\t\tthrow ex;\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresolve(memo);\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction buildFromModel(model) {\n\treturn function run(source, changes, pipe) {\n\t\tconst middleware = new Middleware(pipe);\n\t\tconst context = {\n\t\t\tmodel,\n\t\t\tsource,\n\t\t\tchanges,\n\t\t\tvalueFactory: getValueFactory,\n\t\t\tlabelFactory: getLabelFactory\n\t\t};\n\n\t\tconst { rows } = model.data();\n\t\treturn middleware.run(context, rows);\n\t};\n}\n\nfunction guid() {\n\tfunction p8(s) {\n\t\tconst p = (Math.random().toString(16) + '000000000').substr(2, 8);\n\t\treturn s ? '-' + p.substr(0, 4) + '-' + p.substr(4, 4) : p;\n\t}\n\n\treturn p8() + p8(true) + p8(true) + p8();\n}\n\nclass Scheduler {\n\tconstructor() {\n\t\tthis.tasks = [];\n\t}\n\n\tnext() {\n\t\tthis.tasks.shift();\n\t\tconst task = this.tasks[0];\n\t\tif (task) {\n\t\t\ttask();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tadd(task) {\n\t\tthis.tasks.push(task);\n\t\tif (this.tasks.length === 1) {\n\t\t\ttask();\n\t\t}\n\n\t\treturn this.tasks.length;\n\t}\n}\n\nfunction buildSettings(...args) {\n\tif (args.length) {\n\t\tif (isString(args[0])) {\n\t\t\treturn {\n\t\t\t\tsource: args[0],\n\t\t\t\tchanges: args[1] || {},\n\t\t\t\tpipe: args[2],\n\t\t\t\twhy: 'refresh'\n\t\t\t};\n\t\t}\n\n\t\treturn Object.assign({\n\t\t\tsource: 'invalidate',\n\t\t\tchanges: {},\n\t\t\tpipe: null,\n\t\t\twhy: 'refresh'\n\t\t}, args[0])\n\t}\n\n\treturn {\n\t\tsource: 'invalidate',\n\t\tchanges: {},\n\t\tpipe: null,\n\t\twhy: 'refresh'\n\t};\n}\n\nclass GridService {\n\tconstructor(model) {\n\t\tthis.model = model;\n\t\tthis.scheduler = new Scheduler();\n\t}\n\n\tinvalidate(...args /*source = 'invalidate', changes = {}, pipe = null*/) {\n\t\tconst { source, changes, pipe, why } = buildSettings(...args);\n\t\tconst { scheduler, model } = this;\n\t\tconst { scene } = model;\n\n\t\tconst runPipe = buildFromModel(model);\n\t\tconst cancelBusy = why === 'refresh' ? this.busy() : noop;\n\n\t\tconst nextTask = () => {\n\t\t\tcancelBusy();\n\n\t\t\tif (!scheduler.next()) {\n\t\t\t\tscene({ status: 'pull' }, {\n\t\t\t\t\tsource,\n\t\t\t\t\tbehavior: 'core'\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tconst defer = new Defer();\n\t\tconst task = () => {\n\t\t\tLog.info('grid', `start task ${source}`);\n\t\t\tscene({ status: 'start' }, {\n\t\t\t\tsource,\n\t\t\t\tbehavior: 'core'\n\t\t\t});\n\n\t\t\tmodel.head().cache.clear();\n\t\t\tmodel.body().cache.clear();\n\t\t\tmodel.foot().cache.clear();\n\n\t\t\treturn Fastdom.invoke(() => runPipe(source, changes, pipe || model.data().pipe))\n\t\t\t\t.then(() => {\n\t\t\t\t\tLog.info('grid', `finish task ${source}`);\n\n\t\t\t\t\tnextTask();\n\t\t\t\t\tdefer.resolve();\n\t\t\t\t})\n\t\t\t\t.catch(ex => {\n\t\t\t\t\tLog.error('grid', ex);\n\n\t\t\t\t\tnextTask();\n\t\t\t\t\tdefer.reject();\n\t\t\t\t});\n\t\t};\n\n\t\tLog.info('grid', `add task ${source}`);\n\t\tscheduler.add(task);\n\n\t\treturn defer.promise;\n\t}\n\n\tbusy() {\n\t\tconst id = guid();\n\t\tconst { progress } = this.model;\n\t\tconst queue = progress().queue.concat([id]);\n\t\tprogress({ queue });\n\n\t\treturn () => {\n\t\t\tconst queue = Array.from(progress().queue);\n\t\t\tconst index = queue.indexOf(id);\n\t\t\tif (index >= 0) {\n\t\t\t\tqueue.splice(index, 1);\n\t\t\t\tprogress({ queue });\n\t\t\t}\n\t\t};\n\t}\n\n\tfocus(rowIndex, columnIndex) {\n\t\tconst focus = new FocusService(this.model);\n\t\tfocus.activate(rowIndex, columnIndex);\n\t}\n}\n\nclass GridState {\n\tconstructor() {\n\t\tthis.id = `${GRID_PREFIX}-${guid()}`;\n\t\tthis.status = 'unbound'; //unbound | bound\n\t\tthis.caption = '';\n\t\tthis.interactionMode = 'full' | 'readonly' | 'detached';\n\n\t\t// @deprecated\n\t\tthis.title = '';\n\t}\n}\n\nfunction rowspanGetNode(node, column) {\n\tif (node.source === column.by) {\n\t\treturn node;\n\t}\n\tif (node.children.length) {\n\t\treturn node.children[0];\n\t}\n\treturn node;\n}\n\nfunction flatVisible(node, column) {\n\treturn column.type !== 'group' || node.source === column.by;\n}\n\nfunction rowspanIsVisible(node, column, parent) {\n\tif (node.source === column.by) {\n\t\treturn !parent || parent.state.expand;\n\t}\n\n\tif (node.children.length) {\n\t\treturn rowspanIsVisible(node.children[0], column, node);\n\t}\n\n\treturn false;\n}\n\nclass GroupLet {\n\tconstructor(plugin, shortcut) {\n\t\tconst { model, observeReply, disposable, service } = plugin;\n\n\t\tthis.plugin = plugin;\n\t\tthis.valueFactory = getValueFactory;\n\n\t\tconst toggleStatus = new Command({\n\t\t\tsource: 'group.view',\n\t\t\texecute: args => {\n\t\t\t\tlet row = selectRow(model.navigation());\n\t\t\t\tlet column = selectColumn(model.navigation());\n\n\t\t\t\tif (args) {\n\t\t\t\t\trow = args[0] || row;\n\t\t\t\t\tcolumn = args[1] || column;\n\t\t\t\t}\n\n\t\t\t\tconst node = this.getNode(row, column);\n\t\t\t\tconst { toggle } = model.group();\n\t\t\t\tif (toggle.execute(node) !== false) {\n\t\t\t\t\tnode.state.expand = !node.state.expand;\n\t\t\t\t\tservice.invalidate({\n\t\t\t\t\t\tsource: 'group.view',\n\t\t\t\t\t\tpipe: PipeUnit.group,\n\t\t\t\t\t\twhy: PipeUnit.group.why\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tcanExecute: args => {\n\t\t\t\tlet row = selectRow(model.navigation());\n\t\t\t\tlet column = selectColumn(model.navigation());\n\n\t\t\t\tif (args) {\n\t\t\t\t\trow = args[0] || row;\n\t\t\t\t\tcolumn = args[1] || column;\n\t\t\t\t}\n\n\t\t\t\tconst node = this.getNode(row, column);\n\t\t\t\tconst { toggle } = model.group();\n\t\t\t\treturn node && node.type === 'group' && toggle.canExecute(node);\n\t\t\t},\n\t\t\tshortcut: model.group().shortcut.toggle\n\t\t});\n\n\t\tlet shouldExpand = true;\n\n\t\tconst toggleAllStatus = new Command({\n\t\t\tsource: 'group.view',\n\t\t\texecute: () => {\n\t\t\t\tif (model.group().toggleAll.execute() !== false) {\n\t\t\t\t\tconst { nodes } = model.view();\n\t\t\t\t\tconst { toggle } = model.group();\n\n\t\t\t\t\tpreOrderDFS(nodes, node => {\n\t\t\t\t\t\tif (toggleStatus.canExecute([node])) {\n\t\t\t\t\t\t\tif (toggle.execute(node) !== false) {\n\t\t\t\t\t\t\t\tnode.state.expand = shouldExpand;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tshouldExpand = !shouldExpand;\n\t\t\t\t\tservice.invalidate({\n\t\t\t\t\t\tsource: 'group.view',\n\t\t\t\t\t\tpipe: PipeUnit.group,\n\t\t\t\t\t\twhy: PipeUnit.group.why\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tcanExecute: () => model.group().toggleAll.canExecute()\n\t\t});\n\n\t\tthis.toggleStatus = toggleStatus;\n\t\tthis.toggleAllStatus = toggleAllStatus;\n\n\t\tshortcut.register([toggleStatus, toggleAllStatus]);\n\n\t\tconst createColumn = columnFactory(model);\n\t\tthis.reference = {\n\t\t\tgroup: createColumn('group')\n\t\t};\n\n\t\tthis.getNode = identity;\n\t\tthis.isVisible = yes;\n\n\t\tobserveReply(model.groupChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('mode')) {\n\t\t\t\t\tswitch (e.state.mode) {\n\t\t\t\t\t\tcase 'rowspan': {\n\t\t\t\t\t\t\tthis.getNode = rowspanGetNode;\n\t\t\t\t\t\t\tthis.isVisible = rowspanIsVisible;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'flat':\n\t\t\t\t\t\t\tthis.getNode = identity;\n\t\t\t\t\t\t\tthis.isVisible = flatVisible;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\tthis.getNode = identity;\n\t\t\t\t\t\t\tthis.isVisible = yes;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tlet canExecuteCheckSub;\n\t\tconst unsubscribeCanExecuteCheck = () => {\n\t\t\tif (canExecuteCheckSub) {\n\t\t\t\tcanExecuteCheckSub.unsubscribe();\n\t\t\t\tcanExecuteCheckSub = null;\n\t\t\t}\n\t\t};\n\n\t\tdisposable.add(\n\t\t\tunsubscribeCanExecuteCheck\n\t\t);\n\n\t\tobserveReply(model.rowChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('toggle')) {\n\t\t\t\t\tconst { toggle } = e.state;\n\t\t\t\t\tunsubscribeCanExecuteCheck();\n\t\t\t\t\tcanExecuteCheckSub = toggle.canExecuteCheck\n\t\t\t\t\t\t.subscribe(() => {\n\t\t\t\t\t\t\tthis.toggleStatus.canExecuteCheck.next();\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tcount(node, column) {\n\t\tnode = this.getNode(node, column);\n\t\treturn node.children.length || node.rows.length;\n\t}\n\n\tstatus(node, column) {\n\t\tnode = this.getNode(node, column);\n\t\treturn node.state.expand ? 'expand' : 'collapse';\n\t}\n\n\toffset(node, column) {\n\t\tconst { model } = this.plugin;\n\n\t\tnode = this.getNode(node, column);\n\t\tconst { mode } = model.group();\n\t\tswitch (mode) {\n\t\t\tcase 'nest':\n\t\t\tcase 'subhead': {\n\t\t\t\treturn column ? column.offset * node.level : 0;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\t}\n\n\tvalue(node, column) {\n\t\tnode = this.getNode(node, column);\n\t\tif (column) {\n\t\t\tconst getLabel = getLabelFactory(column);\n\t\t\treturn getLabel(node);\n\t\t}\n\t\treturn null;\n\t}\n}\n\nclass GroupState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\n\t\tthis.mode = 'nest'; // nest | flat | subhead | rowspan\n\t\tthis.summary = null; // null | leaf\n\t\tthis.by = [];\n\n\t\tthis.toggle = new Command({ source: 'group.state' });\n\t\tthis.toggleAll = new Command({ source: 'group.state' });\n\n\t\tthis.flattenFactory = flattenFactory;\n\n\t\tthis.shortcut = {\n\t\t\ttoggle: 'space|enter'\n\t\t};\n\t}\n}\n\nclass PathService {\n\tconstructor(bag) {\n\t\tthis.bag = bag;\n\t}\n\n\tcell(path) {\n\t\tfor (let node of path) {\n\t\t\tif (node.nodeName === 'TD' || node.nodeName === 'TH') {\n\t\t\t\tconst model = this.bag.findModel(node);\n\t\t\t\tif (!model) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\treturn model;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\trow(path) {\n\t\tfor (let node of path) {\n\t\t\tif (node.nodeName === 'TR') {\n\t\t\t\tconst model = this.bag.findModel(node);\n\t\t\t\tif (!model) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\treturn model;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\nfunction css(element, property, value) {\n\tconst normalizedProperty = normalize(property);\n\tif (isUndefined(value)) {\n\t\treturn element.style[normalizedProperty];\n\t} else {\n\t\telement.style[normalizedProperty] = value;\n\t\treturn normalizedProperty;\n\t}\n}\n\nfunction normalize(property) {\n\treturn property.replace(/-([a-z])/g, upperFirst);\n}\n\nfunction upperFirst(match, letter) {\n\treturn letter.toUpperCase();\n}\n\nfunction parents(element) {\n\tconst path = [];\n\twhile (element) {\n\t\tpath.unshift(element);\n\t\telement = element.parentNode;\n\t}\n\n\treturn path;\n}\n\nfunction eventPath(event) {\n\tconst path = (event.composedPath && event.composedPath()) || event.path;\n\tconst target = event.target;\n\n\tif (path) {\n\t\t// Safari doesn't include Window, but it should.\n\t\treturn (path.indexOf(window) < 0) ? path.concat(window) : path;\n\t}\n\n\tif (target === window) {\n\t\treturn [window];\n\t}\n\n\treturn [target].concat(parents(target), window);\n}\n\nfunction elementFromPoint(x, y) {\n\treturn document.elementFromPoint(x, y);\n}\n\nclass HeadHost {\n\tconstructor(plugin) {\n\t\tconst { model, table, observeReply } = plugin;\n\n\t\tthis.plugin = plugin;\n\t\tthis.column = null;\n\n\t\tobserveReply(model.dragChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('isActive')) {\n\t\t\t\t\tif(e.state.isActive) {\n\t\t\t\t\t\tthis.column = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tmouseMove(e) {\n\t\tconst { table } = this.plugin;\n\n\t\tconst pathFinder = new PathService(table.box.bag.head);\n\t\tconst cell = pathFinder.cell(eventPath(e));\n\t\tif (cell) {\n\t\t\tthis.highlight(cell.column);\n\t\t}\n\t}\n\n\tmouseLeave() {\n\t\tthis.highlight(null);\n\t}\n\n\thighlight(column) {\n\t\tconst { view } = this.plugin;\n\n\t\tconst { highlight } = view;\n\t\tif (!highlight.column.canExecute(column)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.column !== column) {\n\t\t\tif (this.column) {\n\t\t\t\thighlight.column.execute(this.column, false);\n\t\t\t}\n\n\t\t\tif (column) {\n\t\t\t\thighlight.column.execute(column, true);\n\t\t\t}\n\n\t\t\tthis.column = column;\n\t\t}\n\t}\n}\n\nclass HeadLet {\n\tconstructor(plugin, tagName) {\n\t\tconst { model, table, observeReply } = plugin;\n\n\t\tthis.plugin = plugin;\n\t\tthis.tagName = tagName;\n\t\tthis.rows = [];\n\n\t\tconst pathFinder = new PathService(table.box.bag.head);\n\n\t\tthis.drop = new Command({\n\t\t\tsource: 'head.view',\n\t\t\tcanExecute: e => {\n\t\t\t\tif (e.action === 'end') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tconst cell = pathFinder.cell(eventPath(e));\n\t\t\t\treturn cell && cell.column.canMove;\n\t\t\t},\n\t\t\texecute: e => {\n\t\t\t\tconst sourceKey = e.dragData;\n\t\t\t\tswitch (e.action) {\n\t\t\t\t\tcase 'over': {\n\t\t\t\t\t\tconst th = pathFinder.cell(eventPath(e));\n\t\t\t\t\t\tif (!e.inAreaX(th.element)) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst targetKey = th.column.key;\n\t\t\t\t\t\tif (sourceKey !== targetKey) {\n\t\t\t\t\t\t\tconst { columnList } = model;\n\n\t\t\t\t\t\t\tconst tree = calk(columnList().index);\n\t\t\t\t\t\t\tconst oldPos = findNode(tree, node => node.key.model.key === sourceKey);\n\t\t\t\t\t\t\tconst newPos = findNode(tree, node => node.key.model.key === targetKey);\n              \n\t\t\t\t\t\t\tif (oldPos && newPos && newPos.path.indexOf(oldPos.node) < 0) {\n\t\t\t\t\t\t\t\tconst queue = oldPos.path.reverse();\n\t\t\t\t\t\t\t\tconst hostIndex = queue.findIndex(node => node.children.length > 1);\n\t\t\t\t\t\t\t\tif (hostIndex >= 0) {\n\t\t\t\t\t\t\t\t\tconst host = queue[hostIndex];\n\t\t\t\t\t\t\t\t\tconst target = queue[hostIndex - 1] || oldPos.node;\n\t\t\t\t\t\t\t\t\tconst index = host.children.indexOf(target);\n\n\t\t\t\t\t\t\t\t\thost.children.splice(index, 1);\n\t\t\t\t\t\t\t\t\tnewPos.parent.children.splice(newPos.index, 0, target);\n\n\t\t\t\t\t\t\t\t\ttarget.level = newPos.parent.level + 1;\n                  \n\t\t\t\t\t\t\t\t\tpreOrderDFS(\n\t\t\t\t\t\t\t\t\t\ttarget.children,\n\t\t\t\t\t\t\t\t\t\t(node, root, parent) => {\n\t\t\t\t\t\t\t\t\t\t\tnode.level = (root || parent).level + 1;\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ttarget\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\tcolumnList({ index: tree }, { source: 'head.view' });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'end':\n\t\t\t\t\tcase 'drop': {\n\t\t\t\t\t\tconst { index } = model.columnList();\n\t\t\t\t\t\tconst oldPos = findNode(index, node => node.key.model.key === sourceKey);\n\t\t\t\t\t\tif (oldPos) {\n\t\t\t\t\t\t\tfor (let leaf of findLeaves(oldPos.node)) {\n\t\t\t\t\t\t\t\tconst oldColumn = table.body.column(leaf.key.columnIndex);\n\t\t\t\t\t\t\t\toldColumn.removeClass(`${GRID_PREFIX}-drag`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.drag = new Command({\n\t\t\tsource: 'head.view',\n\t\t\tcanExecute: e => {\n\t\t\t\tconst sourceKey = e.data;\n\t\t\t\tconst { index } = model.columnList();\n\t\t\t\tconst pos = findNode(index, node => node.key.model.key === sourceKey);\n\t\t\t\treturn pos && pos.node.key.model.canMove;\n\t\t\t},\n\t\t\texecute: e => {\n\t\t\t\tconst sourceKey = e.data;\n\t\t\t\tconst { index } = model.columnList();\n\t\t\t\tconst pos = findNode(index, node => node.key.model.key === sourceKey);\n\t\t\t\tif (pos) {\n\t\t\t\t\tfor (let leaf of findLeaves(pos.node)) {\n\t\t\t\t\t\tconst column = table.body.column(leaf.key.columnIndex);\n\t\t\t\t\t\tcolumn.addClass(`${GRID_PREFIX}-drag`);\n\t\t\t\t\t\treturn () => table.head.cell;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\tthis.resize = new Command({\n\t\t\tsource: 'head.view',\n\t\t\tcanExecute: e => {\n\t\t\t\tconst key = e.data;\n\t\t\t\tconst map = table.data.columnMap();\n\t\t\t\treturn map.hasOwnProperty(key) && map[key].canResize !== false;\n\t\t\t}\n\t\t});\n\n\t\tobserveReply(model.dataChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('columns')) {\n\t\t\t\t\tconst line = flattenColumns(e.state.columns);\n\t\t\t\t\tmodel.columnList({ line }, { source: 'head.view' });\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('column')) {\n\t\t\t\t\tthis.invalidate();\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.filterChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('unit')) {\n\t\t\t\t\tthis.invalidate();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tcolumns(row, pin) {\n\t\treturn row.filter(c => c.model.pin === pin);\n\t}\n\n\tinvalidate() {\n\t\tLog.info('view.head', 'invalidate');\n\n\t\tconst { model, table } = this.plugin;\n\t\tthis.rows = Array.from(model.scene().column.rows);\n\n\t\tif (this.rows.length > 1) {\n\t\t\ttable.view.addClass(`${GRID_PREFIX}-head-span`);\n\t\t} else {\n\t\t\ttable.view.removeClass(`${GRID_PREFIX}-head-span`);\n\t\t}\n\n\t\tif (model.filter().unit === 'row') {\n\t\t\tconst filterRow = table.data.columns().map(c => new FilterRowColumn(c));\n\t\t\tthis.rows.push(filterRow);\n\t\t}\n\t}\n}\n\nclass HeadState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.cache = new Cache();\n\t}\n}\n\nfunction hashColumnKeyFactory(model) {\n  const { columnKey } = model.selection();\n  if (columnKey === identity) {\n    return column => column.key;\n  }\n\n  // TODO: investigate if is it necessary to use JSON.stringify here\n  return identity;\n}\n\nfunction hashRowKeyFactory(model) {\n  const { rowKey } = model.selection();\n  if (rowKey === identity) {\n    const columns = model.columnList().line;\n    const index = columns.findIndex(column => column.type === 'id');\n    if (index >= 0) {\n      const idColumn = columns[index];\n      const getId = getValueFactory(idColumn);\n      return getId;\n    }\n\n    const { rows } = model.data();\n    return row => rows.indexOf(row);\n  }\n\n  // TODO: investigate if is it necessary to use JSON.stringify here\n  return identity;\n}\n\nfunction hashKeyFactory(model) {\n  const selectionState = model.selection();\n  switch (selectionState.unit) {\n    case 'row':\n      return hashRowKeyFactory(model);\n    case 'column':\n      return hashColumnKeyFactory(model);\n    case 'cell': {\n      const hashColumnKey = hashColumnKeyFactory(model);\n      const hashRowKey = hashRowKeyFactory(model);\n      return key => `${hashColumnKey(key.column)}[${hashRowKey(key.row)}]`;\n    }\n    case 'mix': {\n      const hashColumnKey = hashColumnKeyFactory(model);\n      const hashRowKey = hashRowKeyFactory(model);\n      return (key, entry) => {\n        if (!entry.unit) {\n          return key;\n        }\n\n        switch (entry.unit) {\n          case 'column':\n            return hashColumnKey(key);\n          case 'row':\n            return hashRowKey(key);\n          case 'cell':\n            return `${hashColumnKey(key.column)}[${hashRowKey(key.row)}]`;\n          default:\n            throw new GridError('selection.service', `Invalid unit ${entry.unit}`);\n        }\n      };\n    }\n    default:\n      throw new GridError('selection.service', `Invalid unit ${selectionState.unit}`);\n  }\n}\n\nfunction cellMatchFactory() {\n  return (x, y) => x.column === y.column && x.row === y.row;\n}\n\nfunction keySelector(unit, rowKey, columnKey) {\n  switch (unit) {\n    case 'row':\n      return rowKey;\n    case 'column':\n      return columnKey;\n    case 'cell':\n      return entry => {\n        if (entry.row && entry.column) {\n          return {\n            row: rowKey(entry.row),\n            column: columnKey(entry.column)\n          };\n        }\n\n        return entry;\n      };\n    default:\n      throw new GridError('selection.state', `Invalid unit ${unit}`);\n  }\n}\n\nfunction lookupColumnFactory(model, selectKey) {\n  const columns = model.columnList().line;\n  return items => {\n    const result = [];\n    \n    columns.forEach(column => {\n      const columnKey = selectKey(column);\n      const found = items.indexOf(columnKey) >= 0;\n      if (found) {\n        result.push(column);\n      }\n    });\n\n    return result;\n  };\n}\n\nfunction lookupRowFactory(model, selectKey) {\n  const { rows } = model.data();\n  return items => {\n    const result = [];\n    \n    rows.forEach(row => {\n      const rowKey = selectKey(row);\n      const found = items.indexOf(rowKey) >= 0;\n      if (found) {\n        result.push(row);\n      }\n    });\n\n    return result;\n  };\n}\n\nfunction lookupCellFactory(model, selectKey) {\n  const { rows } = model.data();\n  const columns = model.columnList().line;\n  const match = cellMatchFactory();\n  \n  return items => {\n    const result = [];\n\n    columns.forEach(column => {\n      rows.forEach(row => {\n        const cell = {\n          column: column,\n          row: row\n        };\n\n        const index = items.findIndex(item => match(item, selectKey(cell)));\n        if (index >= 0) {\n          result.push(cell);\n        }\n      });\n    });\n\n    return result;\n  };\n}\n\nclass SelectionService {\n  constructor(model) {\n    this.model = model;\n  }\n\n  lookup(items, unit) {\n    let entries = [];\n    if (items.length === 0) {\n      return entries;\n    }\n\n    const { model } = this;\n    if (isUndefined(unit)) {\n      unit = model.selection().unit;\n    }\n\n    switch (unit) {\n      case 'column': {\n        const selectKey = this.keyFactory('column');\n        const lookup = lookupColumnFactory(model, selectKey);\n        entries = lookup(items);\n        break;\n      }\n      case 'row': {\n        const selectKey = this.keyFactory('row');\n        const lookup = lookupRowFactory(model, selectKey);\n        entries = lookup(items);\n        break;\n      }\n      case 'cell': {\n        const selectKey = this.keyFactory('cell');\n        const lookup = lookupCellFactory(model, selectKey);\n        entries = lookup(items);\n        break;\n      }\n      case 'mix': {\n        const rowKeys = items.filter(key => key.unit === 'row').map(key => key.item);\n        const columnKeys = items.filter(key => key.unit === 'column').map(key => key.item);\n        const cellKeys = items.filter(key => key.unit === 'cell').map(key => key.item);\n\n        entries.push(...this.lookup(rowKeys, 'row').map(entry => ({ item: entry, unit: 'row' })));\n        entries.push(...this.lookup(columnKeys, 'column').map(entry => ({ item: entry, unit: 'column' })));\n        entries.push(...this.lookup(cellKeys, 'cell').map(entry => ({ item: entry, unit: 'cell' })));\n        break;\n      }\n      default:\n        throw new GridError('selection.state', `Invalid unit ${unit}`);\n    }\n\n    return entries;\n  }\n\n  map(entries) {\n    const selectionState = this.model.selection();\n    const selectKey = this.keyFactory();\n    switch (selectionState.unit) {\n      case 'column':\n      case 'row':\n      case 'cell':\n        return entries.map(selectKey);\n      case 'mix':\n        return entries.map(entry => ({\n          unit: entry.unit,\n          item: selectKey(entry)\n        }));\n      default:\n        throw new GridError('selection.state', `Invalid unit ${selectionState.unit}`);\n    }\n  }\n\n  keyFactory(selectionUnit) {\n    const { rowKey, columnKey, unit } = this.model.selection();\n\n    selectionUnit = selectionUnit || unit;\n    switch (selectionUnit) {\n      case 'column':\n      case 'row':\n      case 'cell':\n        return keySelector(selectionUnit, rowKey, columnKey);\n      case 'mix': {\n        const selectCellKey = keySelector('cell', rowKey, columnKey);\n        const selectRowKey = keySelector('row', rowKey, columnKey);\n        const selectColumnKey = keySelector('column', rowKey, columnKey);\n\n        return entry => {\n          if (!entry.unit) {\n            return identity;\n          }\n\n          switch (entry.unit) {\n            case 'column':\n              return selectColumnKey(entry.item);\n            case 'row':\n              return selectRowKey(entry.item);\n            case 'cell':\n              return selectCellKey(entry.item);\n            default:\n              throw new GridError('selection.service', `Invalid unit ${entry.unit}`);\n          }\n        };\n      }\n      default:\n        throw new GridError('selection.service', `Invalid unit ${selectionUnit}`);\n    }\n  }\n\n  hashFactory() {\n    const selectKey = this.keyFactory();\n    const selectHash = hashKeyFactory(this.model);\n    return entry => {\n      const key = selectKey(entry);\n      const hashKey = selectHash(key, entry);\n      return hashKey;\n    };\n  }\n}\n\nclass HighlightLet {\n\tconstructor(plugin) {\n\t\tconst { model, table, observeReply, observe } = plugin;\n\t\tthis.plugin = plugin;\n\n\t\tthis.cellSelector = new CellSelector(model, table);\n\t\tthis.selectionService = new SelectionService(model);\n\n\t\tlet sortBlurs = [];\n\t\tlet columnHoverBlurs = [];\n\t\tlet columnFilterBlurs = [];\n\t\tlet rowHoverBlurs = [];\n\t\tlet selectionBlurs = [];\n\t\tlet cellHoverBlurs = [];\n\n\t\tthis.column = new Command({\n\t\t\tsource: 'highlight.view',\n\t\t\tcanExecute: () => !this.isRendering,\n\t\t\texecute: (column, state) => {\n\t\t\t\tconst columns = Array.from(model.highlight().columns);\n\t\t\t\tconst index = columns.indexOf(column.key);\n\t\t\t\tlet hasChanges = false;\n\t\t\t\tif (state) {\n\t\t\t\t\tif (index < 0) {\n\t\t\t\t\t\tcolumns.push(column.key);\n\t\t\t\t\t\thasChanges = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\tcolumns.splice(index, 1);\n\t\t\t\t\t\thasChanges = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (hasChanges) {\n\t\t\t\t\tmodel.highlight({ columns }, {\n\t\t\t\t\t\tsource: 'highlight.view',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.row = new Command({\n\t\t\tsource: 'highlight.view',\n\t\t\tcanExecute: () => !this.isRendering,\n\t\t\texecute: (row, state) => {\n\t\t\t\tconst rows = Array.from(model.highlight().rows);\n\t\t\t\tconst index = rows.indexOf(row);\n\t\t\t\tlet hasChanges = false;\n\t\t\t\tif (state) {\n\t\t\t\t\tif (index < 0) {\n\t\t\t\t\t\trows.push(row);\n\t\t\t\t\t\thasChanges = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\trows.splice(index, 1);\n\t\t\t\t\t\thasChanges = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (hasChanges) {\n\t\t\t\t\tmodel.highlight({ rows }, {\n\t\t\t\t\t\tsource: 'highlight.view'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.cell = new Command({\n\t\t\tsource: 'highlight.view',\n\t\t\tcanExecute: () => !this.isRendering,\n\t\t\texecute: (newCell, state) => {\n\t\t\t\tlet { cell } = model.highlight();\n\t\t\t\tlet hasChanges = true;\n\t\t\t\tif (newCell === cell) {\n\t\t\t\t\thasChanges = false;\n\t\t\t\t}\n\t\t\t\telse if (newCell && cell) {\n\t\t\t\t\thasChanges =\n\t\t\t\t\t\tnewCell.rowIndex !== cell.rowIndex\n\t\t\t\t\t\t|| newCell.columnIndex !== cell.columnIndex;\n\t\t\t\t}\n\n\t\t\t\tif (hasChanges) {\n\t\t\t\t\tmodel.highlight({ cell: newCell }, {\n\t\t\t\t\t\tsource: 'highlight.view'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.clear = new Command({\n\t\t\texecute: () => {\n\t\t\t\tconst { rows, cell } = model.highlight();\n\n\t\t\t\trows.forEach(rowIndex => this.row.execute(rowIndex, false));\n\n\t\t\t\tif (cell) {\n\t\t\t\t\tthis.cell.execute(null, false);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tobserveReply(model.selectionChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('items')) {\n\t\t\t\t\tselectionBlurs = this.invalidateSelection(selectionBlurs);\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('status')) {\n\t\t\t\t\tif (e.state.status === 'stop') {\n\t\t\t\t\t\tcolumnHoverBlurs = this.invalidateColumnHover(columnHoverBlurs);\n\t\t\t\t\t\trowHoverBlurs = this.invalidateRowHover(rowHoverBlurs);\n\t\t\t\t\t\tcellHoverBlurs = this.invalidateCellHover(cellHoverBlurs);\n\t\t\t\t\t\tsortBlurs = this.invalidateSortBy(sortBlurs);\n\t\t\t\t\t\tselectionBlurs = this.invalidateSelection(selectionBlurs);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.sortChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (!this.isRendering && e.hasChanges('by')) {\n\t\t\t\t\tsortBlurs = this.invalidateSortBy(sortBlurs);\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.filterChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (!this.isRendering && e.hasChanges('by')) {\n\t\t\t\t\tcolumnFilterBlurs = this.invalidateColumnFilterBy(columnFilterBlurs);\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.highlightChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (!this.isRendering) {\n\t\t\t\t\tif (e.hasChanges('cell')) {\n\t\t\t\t\t\tcellHoverBlurs = this.invalidateCellHover(cellHoverBlurs);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e.hasChanges('columns')) {\n\t\t\t\t\t\tcolumnHoverBlurs = this.invalidateColumnHover(columnHoverBlurs);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e.hasChanges('rows')) {\n\t\t\t\t\t\trowHoverBlurs = this.invalidateRowHover(rowHoverBlurs);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserve(model.dragChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('isActive')) {\n\t\t\t\t\tif (e.state.isActive) {\n\t\t\t\t\t\tmodel.highlight({\n\t\t\t\t\t\t\tcolumns: [],\n\t\t\t\t\t\t\trows: [],\n\t\t\t\t\t\t\tcell: null\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tsource: 'highlight.view'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tcolumnHoverBlurs = this.invalidateColumnHover(columnHoverBlurs);\n\t\t\t\t\t\trowHoverBlurs = this.invalidateRowHover(rowHoverBlurs);\n\t\t\t\t\t\tcellHoverBlurs = this.invalidateCellHover(cellHoverBlurs);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tget isRendering() {\n\t\tconst { model } = this.plugin;\n\t\treturn model.scene().status !== 'stop' || model.drag().isActive;\n\t}\n\n\tinvalidateColumnHover(dispose) {\n\t\tdispose.forEach(f => f());\n\n\t\tconst { model } = this.plugin;\n\t\tconst { columns } = model.highlight();\n\n\t\treturn columns\n\t\t\t.map(columnKey => this.highlightColumn(columnKey, 'highlighted'));\n\t}\n\n\tinvalidateColumnFilterBy(dispose) {\n\t\tdispose.forEach(f => f());\n\n\t\tconst { model } = this.plugin;\n\t\tconst { by } = model.filter();\n\n\t\tdispose = [];\n\t\tconst keys = Object.keys(by);\n\t\tfor (let key of keys) {\n\t\t\tif (key === '$expression') {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tdispose.push(this.highlightColumn(key, 'filtered'));\n\t\t}\n\n\t\treturn dispose;\n\t}\n\n\tinvalidateRowHover(dispose) {\n\t\tdispose.forEach(f => f());\n\n\t\tconst { model } = this.plugin;\n\t\tconst { rows } = model.highlight();\n\n\t\treturn rows\n\t\t\t.map(row => this.highlightRow(row, 'highlighted'));\n\t}\n\n\tinvalidateCellHover(dispose) {\n\t\tdispose.forEach(f => f());\n\n\t\tconst { model, table } = this.plugin;\n\t\tconst { cell } = model.highlight();\n\n\t\tdispose = [];\n\t\tif (cell) {\n\t\t\tconst { body } = table;\n\t\t\tconst { rowIndex, columnIndex } = cell;\n\t\t\tdispose.push(this.highlightCell(body.cell(rowIndex, columnIndex), 'highlighted'));\n\t\t}\n\n\t\treturn dispose;\n\t}\n\n\tinvalidateSortBy(dispose) {\n\t\tdispose.forEach(f => f());\n\n\t\tconst { model } = this.plugin;\n\t\tconst sortBy = model.sort().by;\n\n\t\tdispose = [];\n\t\tfor (let entry of sortBy) {\n\t\t\tconst key = getKey(entry);\n\t\t\tdispose.push(this.highlightColumn(key, 'sorted'));\n\t\t}\n\n\t\treturn dispose;\n\t}\n\n\tinvalidateSelection(dispose) {\n\t\tdispose.forEach(f => f());\n\n\t\tconst { model } = this.plugin;\n\t\tconst { items } = model.selection();\n\n\t\tconst entries = this.selectionService.lookup(items);\n\t\tconst cells = this.cellSelector.map(entries);\n\n\t\treturn cells\n\t\t\t.map(cell => this.highlightCell(cell, 'selected'));\n\t}\n\n\tfindColumnPosition(key) {\n\t\tconst { model } = this.plugin;\n\t\tconst { index } = model.columnList();\n\n\t\tconst pos = findNode(index, node => node.key.model.key === key);\n\t\tif (pos) {\n\t\t\treturn findLeaves(pos.node).map(leaf => leaf.key.columnIndex);\n\t\t}\n\n\t\treturn [];\n\t}\n\n\thighlightColumn(key, cls) {\n\t\tconst { table } = this.plugin;\n\n\t\tconst position = this.findColumnPosition(key);\n\t\tif (!position.length) {\n\t\t\treturn noop;\n\t\t}\n\n\t\tconst { head, body, foot } = table;\n\t\tFastdom.mutate(() => {\n\t\t\tconst isLeaf = position.length === 1;\n\t\t\tfor (let index of position) {\n\t\t\t\tif (isLeaf) {\n\t\t\t\t\thead.column(index).addClass(`${GRID_PREFIX}-${cls}`);\n\t\t\t\t\thead.column(index - 1).addClass(`${GRID_PREFIX}-${cls}-prev`);\n\t\t\t\t\thead.column(index + 1).addClass(`${GRID_PREFIX}-${cls}-next`);\n\t\t\t\t}\n\n\t\t\t\tconst bodyColumn = body.column(index);\n\t\t\t\tconst column = bodyColumn.model();\n\t\t\t\tif (column && column.canHighlight) {\n\t\t\t\t\tbodyColumn.addClass(`${GRID_PREFIX}-${cls}`);\n\t\t\t\t\tfoot.column(index).addClass(`${GRID_PREFIX}-${cls}`);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn this.blurColumn(key, cls);\n\t}\n\n\tblurColumn(key, cls) {\n\t\tconst { table } = this.plugin;\n\n\t\tconst position = this.findColumnPosition(key);\n\t\tif (!position.length) {\n\t\t\treturn noop;\n\t\t}\n\n\t\tconst { head, body, foot } = table;\n\t\treturn () => {\n\t\t\tFastdom.mutate(() => {\n\t\t\t\tfor (let index of position) {\n\t\t\t\t\thead.column(index).removeClass(`${GRID_PREFIX}-${cls}`);\n\t\t\t\t\thead.column(index - 1).removeClass(`${GRID_PREFIX}-${cls}-prev`);\n\t\t\t\t\thead.column(index + 1).removeClass(`${GRID_PREFIX}-${cls}-next`);\n\t\t\t\t\tbody.column(index).removeClass(`${GRID_PREFIX}-${cls}`);\n\t\t\t\t\tfoot.column(index).removeClass(`${GRID_PREFIX}-${cls}`);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t}\n\n\thighlightRow(index, cls) {\n\t\tconst { table } = this.plugin;\n\n\t\tif (index < 0) {\n\t\t\treturn noop;\n\t\t}\n\n\t\tconst { body } = table;\n\t\tFastdom.mutate(() => body.row(index).addClass(`${GRID_PREFIX}-${cls}`));\n\n\t\treturn this.blurRow(index, cls);\n\t}\n\n\tblurRow(index, cls) {\n\t\tconst { table } = this.plugin;\n\n\t\tif (index < 0) {\n\t\t\treturn noop;\n\t\t}\n\n\t\tconst row = table.body.row(index);\n\t\treturn () => Fastdom.mutate(() => row.removeClass(`${GRID_PREFIX}-${cls}`));\n\t}\n\n\thighlightCell(cell, cls) {\n\t\tFastdom.mutate(() => {\n\t\t\tcell.addClass(`${GRID_PREFIX}-${cls}`);\n\t\t});\n\n\t\treturn this.blurCell(cell, cls);\n\t}\n\n\tblurCell(cell, cls) {\n\t\treturn () =>\n\t\t\tFastdom.mutate(() => {\n\t\t\t\tcell.removeClass(`${GRID_PREFIX}-${cls}`);\n\t\t\t});\n\t}\n}\n\nclass HighlightState {\n\tconstructor() {\n\t\tthis.columns = [];\n\t\tthis.rows = [];\n\t\tthis.cell = null;\n\t}\n}\n\nclass CharReader {\n\tconstructor(text) {\n\t\tthis.text = text || '';\n\t\tthis.peeks = [];\n\t\tthis.position = 0;\n\t\tthis.length = this.text.length;\n\t}\n\n\tstatic get eof() {\n\t\treturn undefined;\n\t}\n\n\tread() {\n\t\tconst peeks = this.peeks;\n\t\tif (peeks.length > 0) {\n\t\t\treturn peeks.pop();\n\t\t}\n\n\t\tconst nextPosition = this.position + 1;\n\t\tif (nextPosition < this.length) {\n\t\t\tconst c = this.text[this.position];\n\t\t\tthis.position = nextPosition;\n\t\t\treturn c;\n\t\t}\n\n\t\treturn CharReader.eof;\n\t}\n\n\tpeek() {\n\t\treturn this.peekCore(0);\n\t}\n\n\tpeekPeek() {\n\t\treturn this.peekCore(1);\n\t}\n\n\tpeekCore(offset) {\n\t\tconst peeks = this.peeks;\n\t\tif (offset < peeks.length) {\n\t\t\treturn peeks[offset];\n\t\t}\n\n\t\tconst length = this.length;\n\t\tfor (let i = peeks.length; i <= offset; i++) {\n\t\t\tconst nextPosition = this.position + 1;\n\t\t\tif (nextPosition >= length) {\n\t\t\t\treturn CharReader.eof;\n\t\t\t}\n\n\t\t\tconst c = this.text[this.position];\n\t\t\tthis.position = nextPosition;\n\t\t\tpeeks.push(c);\n\t\t}\n\n\t\treturn peeks[offset];\n\t}\n\n\tseek(offset) {\n\t\tconst peeks = this.peeks;\n\t\tconst peekCount = peeks.length;\n\t\tpeeks.splice(0, Math.Min(offset, peekCount));\n\t\toffset -= peekCount;\n\t\twhile (--offset >= 0) {\n\t\t\tthis.read();\n\t\t}\n\n\t\treturn this.peek();\n\t}\n}\n\nclass CsvImport {\n\tconstructor(delimiter = ',') {\n\t\tthis.delimiter = delimiter;\n\t}\n\n\tread(text) {\n\t\tconst reader = new CharReader(text);\n\t\tconst delimiter = this.delimiter;\n\n\t\tconst result = [];\n\t\tlet line = [];\n\t\tlet term = '';\n\t\tconst condition = true;\n\t\tdo {\n\t\t\tconst c = reader.peek();\n\t\t\tif (c === ' ') {\n\t\t\t\treader.read();\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (c === delimiter) {\n\t\t\t\treader.read();\n\n\t\t\t\tline.push(term);\n\t\t\t\tterm = '';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (c === '\\n') {\n\t\t\t\treader.read();\n\n\t\t\t\tif (line.length > 0 || term.length > 0) {\n\t\t\t\t\tline.push(term);\n\t\t\t\t\tterm = '';\n\t\t\t\t}\n\n\t\t\t\tif (line.length > 0) {\n\t\t\t\t\tresult.push(line);\n\t\t\t\t\tline = [];\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (c === '\\r' && reader.peekPeek() === '\\n') {\n\t\t\t\treader.read();\n\t\t\t\treader.read();\n\n\t\t\t\tif (line.length > 0 || term.length > 0) {\n\t\t\t\t\tline.push(term);\n\t\t\t\t\tterm = '';\n\t\t\t\t}\n\n\t\t\t\tif (line.length > 0) {\n\t\t\t\t\tresult.push(line);\n\t\t\t\t\tline = [];\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (c === CharReader.eof) {\n\t\t\t\treader.read();\n\n\t\t\t\tif (line.length > 0 || term.length > 0) {\n\t\t\t\t\tline.push(term);\n\t\t\t\t\tresult.push(line);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (c === '\"') {\n\t\t\t\tterm = this.readEscapedValue(reader, term);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tterm = this.readUnescapedValue(reader, term);\n\t\t\t}\n\t\t}\n\t\twhile (condition);\n\n\t\treturn result.map(this.lineToObj);\n\t}\n\n\treadEscapedValue(reader, term) {\n\t\t// Omit double quote\n\t\tlet c = reader.read();\n\t\twhile (c !== CharReader.eof) {\n\t\t\tc = reader.read();\n\t\t\tif (c === '\"') {\n\t\t\t\tif (reader.peek() === '\"') {\n\t\t\t\t\tterm += reader.read();\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tterm += c;\n\t\t}\n\n\t\treturn term;\n\t}\n\n\treadUnescapedValue(reader, term) {\n\t\tconst delimiter = this.delimiter;\n\t\tlet c = reader.peek();\n\t\twhile (c !== CharReader.eof) {\n\t\t\tif (c === delimiter || c === '\\n' ||\n\t\t\t\t(c === '\\r' && reader.peekPeek() === '\\n'))\n\t\t\t\tbreak;\n\n\t\t\tterm += reader.read();\n\t\t\tc = reader.peek();\n\t\t}\n\n\t\treturn term;\n\t}\n\n\tlineToObj(line) {\n\t\tconst result = {};\n\t\tfor (let i = 0, length = line.length; i < length; i++) {\n\t\t\tresult[i] = line[i];\n\t\t}\n\t\treturn result;\n\t}\n}\n\nclass ImportState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t}\n}\n\nclass JsonImport {\n\tread(data) {\n\t\tconst rows = JSON.parse(data);\n\t\tif (isArray$1(rows)) {\n\t\t\treturn rows;\n\t\t}\n\t\treturn [rows];\n\t}\n}\n\nconst NODE_TYPE = {\n\tELEMENT: 1,\n\tATTRIBUTE: 2,\n\tTEXT: 3,\n\tDOCUMENT: 9\n};\n\nclass XmlImport {\n\tread(text) {\n\t\tif (!text) {\n\t\t\treturn [];\n\t\t}\n\t\tconst parser = new DOMParser();\n\t\tconst root = parser.parseFromString(text, 'text/xml').documentElement;\n\t\tconst statistics = this.getStatistics(root);\n\t\tconst graph = this.build(root, statistics, 'root');\n\t\tconst key = Object.keys(graph)[0];\n\t\tconst result = graph[key];\n\t\tif (isArray$1(result)) {\n\t\t\treturn result;\n\t\t}\n\n\t\treturn [result];\n\t}\n\n\tarrayFromChildren(node, statistics, path, tag) {\n\t\tconst result = [];\n\t\tconst children = Array.from(node.children).filter(child => child.nodeName === tag);\n\t\tfor (let child of children) {\n\t\t\tresult.push(this.buildNonArray(child, statistics, path));\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tbuild(node, statistics, path = 'root') {\n\t\tconst st = statistics.get(path);\n\t\tif (st.isArray) {\n\t\t\treturn this.arrayFromChildren(node.parentNode, statistics, path, node.nodeName);\n\t\t}\n\n\t\treturn this.buildNonArray(node, statistics, path);\n\t}\n\n\tbuildNonArray(node, statistics, path = 'root') {\n\t\tconst st = statistics.get(path);\n\t\tif (st.isObject) {\n\t\t\tconst result = {};\n\t\t\tconst visited = new Set();\n\t\t\tfor (let attr of Array.from(node.attributes)) {\n\t\t\t\tresult[attr.name] = attr.value;\n\t\t\t}\n\n\t\t\tfor (let child of Array.from(node.children)) {\n\t\t\t\tconst childPath = this.getPath(path, child.nodeName);\n\t\t\t\tif (visited.has(childPath)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvisited.add(childPath);\n\t\t\t\tresult[child.nodeName] = this.build(child, statistics, childPath);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tif (st.isText) {\n\t\t\treturn node.textContent;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tinfo(node, lastInfo) {\n\t\tif (!lastInfo) {\n\t\t\tlastInfo = {\n\t\t\t\tisArray: false,\n\t\t\t\tisObject: false,\n\t\t\t\tisText: false\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tisArray: lastInfo.isArray || Array.from(node.parentNode.children).filter(child => child.nodeName === node.nodeName).length > 1,\n\t\t\tisObject: lastInfo.isObject || node.children.length > 0 || node.attributes.length > 0,\n\t\t\tisText: lastInfo.isText || this.isTextContainer(node)\n\t\t};\n\t}\n\n\tgetStatistics(node, path = 'root', statistics = new Map()) {\n\t\tstatistics.set(path, this.info(node, statistics.get(path)));\n\n\t\tconst children = Array.from(node.children);\n\t\tif (children.length > 0) {\n\t\t\tfor (let child of children) {\n\t\t\t\tconst childPath = this.getPath(path, child.nodeName);\n\t\t\t\tthis.getStatistics(child, childPath, statistics);\n\t\t\t}\n\t\t}\n\n\t\treturn statistics;\n\t}\n\n\tisTextContainer(node) {\n\t\treturn node.nodeType === NODE_TYPE.ELEMENT && !node.children.length && node.childNodes.length;\n\t}\n\n\tgetPath(...args) {\n\t\treturn args.join('/');\n\t}\n}\n\nclass Composite {\n\tstatic func(list, reduce = noop, memo = null) {\n\t\treturn (...args) => {\n\t\t\tfor (const f of list) {\n\t\t\t\tmemo = reduce(memo, f(...args));\n\t\t\t}\n\n\t\t\treturn memo;\n\t\t};\n\t}\n\n\tstatic command(list) {\n\t\treturn new Command({\n\t\t\tsource: 'composite',\n\t\t\tcanExecute: (...args) => {\n\t\t\t\treturn list.reduce((memo, cmd) => memo || cmd.canExecute(...args), false);\n\t\t\t},\n\t\t\texecute: (...args) => {\n\t\t\t\treturn list\n\t\t\t\t\t.filter(cmd => cmd.canExecute(...args))\n\t\t\t\t\t.reduce((memo, cmd) => cmd.execute(...args) || memo, undefined);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic list(list) {\n\t\treturn list.reduce((memo, xs) => memo.concat(xs), []);\n\t}\n\n\tstatic object(list, memo = {}) {\n\t\treturn Object.assign(memo, ...list);\n\t}\n}\n\nfunction final() {\n    let isLocked = false;\n    return f => {\n        if (isLocked) {\n            return false;\n        }\n\n        isLocked = true;\n        try {\n            f();\n            return true;\n        } finally {\n            isLocked = false;\n        }\n    };\n}\n\nclass KeyboardState {\n\tconstructor() {\n\t\tthis.status = 'release';\n\t\tthis.codes = [];\n\t\tthis.code = null;\n\t}\n}\n\nclass LayerState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t}\n}\n\nclass LayoutLet {\n\tconstructor(plugin) {\n\t\tconst { model, observeReply, disposable } = plugin;\n\t\tconst styleRow = this.styleRow.bind(this);\n\n\t\tthis.plugin = plugin;\n\n\t\tobserveReply(model.navigationChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('cell')) {\n\t\t\t\t\tconst { oldValue, newValue } = e.changes.cell;\n\t\t\t\t\tconst oldColumn = oldValue ? oldValue.column : {};\n\t\t\t\t\tconst newColumn = newValue ? newValue.column : {};\n\n\t\t\t\t\tif (oldColumn.key !== newColumn.key && (oldColumn.viewWidth || newColumn.viewWidth)) {\n\t\t\t\t\t\tFastdom.measure(() => {\n\t\t\t\t\t\t\tconst form = this.updateColumnForm();\n\t\t\t\t\t\t\tFastdom.mutate(() => this.invalidateColumns(form));\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.layoutChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.tag.source === 'layout.let') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.hasChanges('columns')) {\n\t\t\t\t\tFastdom.measure(() => {\n\t\t\t\t\t\tconst form = this.updateColumnForm();\n\t\t\t\t\t\tFastdom.mutate(() => this.invalidateColumns(form));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.rowChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('canResize')) {\n\t\t\t\t\tconst rows = Array.from(model.style().rows);\n\t\t\t\t\tif (e.state.canResize) {\n\t\t\t\t\t\trows.push(styleRow);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tconst index = model.style.rows.indexOf(styleRow);\n\t\t\t\t\t\trows.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t\tmodel.style({ rows }, { source: 'layout.let' });\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.dataChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('columns')) {\n\t\t\t\t\tmodel.layout({\n\t\t\t\t\t\tcolumns: new Map()\n\t\t\t\t\t}, {\n\t\t\t\t\t\tsource: 'layout.let',\n\t\t\t\t\t\tbehavior: 'core'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.viewChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('columns')) {\n\t\t\t\t\tconst columns = flattenColumns(e.state.columns);\n\t\t\t\t\tconst hasNonDefaultWidth = x => x.width !== null || x.minWidth !== null || x.maxWidth !== null || x.widthMode === 'fit-head';\n\t\t\t\t\tif (columns.some(hasNonDefaultWidth)) {\n\t\t\t\t\t\tFastdom.mutate(() => {\n\t\t\t\t\t\t\tconst { columns } = model.layout();\n\t\t\t\t\t\t\tthis.invalidateColumns(columns);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tdisposable.add(() => {\n\t\t\tconst sheet$1 = sheet(this.gridId, 'column-layout');\n\t\t\tsheet$1.remove();\n\t\t});\n\t}\n\n\tupdateColumnForm() {\n\t\tconst { model, table } = this.plugin;\n\t\tconst { head } = table;\n\t\tconst { cells } = head.context.bag;\n\t\tconst layout = model.layout().columns;\n\n\t\tconst form = new Map();\n\t\tfor (let cell of cells) {\n\t\t\tconst { column, rowIndex, columnIndex } = cell;\n\t\t\tif (!column.canResize) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst { key } = column;\n\t\t\tif (layout.has(key)) {\n\t\t\t\tconst { width } = layout.get(key);\n\t\t\t\tform.set(key, { width });\n\t\t\t} else {\n\t\t\t\tconst th = head.cell(rowIndex, columnIndex);\n\t\t\t\tconst width = th.width();\n\n\t\t\t\t// It can be that clientWidth is zero on start, while css is not applied.\n\t\t\t\tif (width) {\n\t\t\t\t\tform.set(key, { width });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tmodel.layout({ columns: form }, { source: 'layout.let', behavior: 'core' });\n\n\t\tconst column = selectColumn(model.navigation());\n\t\tif (column && column.viewWidth) {\n\t\t\tconst viewForm = new Map(form);\n\t\t\tconst columnForm = form.get(column.key);\n\t\t\tviewForm.set(column.key, { width: columnForm ? Math.max(columnForm.width, column.viewWidth) : column.viewWidth });\n\t\t\treturn viewForm;\n\t\t}\n\n\t\treturn form;\n\t}\n\n\tinvalidateColumns(form) {\n\t\tLog.info('layout', 'invalidate columns');\n\n\t\tconst { table } = this.plugin;\n\t\tconst columns = table.data.columns();\n\t\tconst getWidth = widthFactory(table, form);\n\n\t\tconst style = {};\n\t\tlet { length } = columns;\n\n\t\twhile (length--) {\n\t\t\tconst column = columns[length];\n\t\t\tconst width = getWidth(column.key);\n\t\t\tif (null !== width) {\n\t\t\t\tconst key = escape$2(column.key);\n\t\t\t\tconst size = width + 'px';\n\t\t\t\tconst sizeStyle = {\n\t\t\t\t\t'width': size,\n\t\t\t\t\t'min-width': size,\n\t\t\t\t\t'max-width': size\n\t\t\t\t};\n\n\t\t\t\tstyle[`.q-grid-the-${key}`] = sizeStyle;\n\t\t\t}\n\t\t}\n\n\t\tconst sheet$1 = sheet(this.gridId, 'column-layout');\n\t\tsheet$1.set(style);\n\t}\n\n\tstyleRow(row, context) {\n\t\tconst { model } = this.plugin;\n\t\tconst { layout } = model;\n\n\t\tconst form = layout().rows;\n\t\tconst style = form.get(row);\n\t\tif (style) {\n\t\t\tconst { minHeight } = model.row();\n\t\t\tif (minHeight > style.height){\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcontext.class(`resized-${style.height}px`, { height: style.height + 'px' });\n\t\t}\n\t}\n\n\tget gridId() {\n\t\treturn this.plugin.model.grid().id;\n\t}\n}\n\nclass LayoutState {\n\tconstructor() {\n\t\tthis.columns = new Map();\n\t\tthis.rows = new Map();\n\t}\n}\n\nclass ModelBinder {\n\tconstructor(host, plugin) {\n\t\tthis.host = host;\n\t\tthis.plugin = plugin;\n\t}\n\n\tcanWrite(oldValue, newValue, key) {\n\t\tif (isUndefined(newValue)) {\n\t\t\tLog.warn('model.bind', `can't write undefined to the model[${key}]`);\n\t\t\treturn false;\n\t\t}\n\n\t\t// As `Observable | async` returns null by default so we need to filter it out\n\t\tif (isArray$1(oldValue) && newValue === null) {\n\t\t\tLog.warn('model.bind', `the model[${key}] expects array, got ${newValue}`);\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tbound(model, stateNames, run = true, track = true) {\n\t\tif (model) {\n\t\t\tconst commits = [];\n\t\t\tfor (let stateName of stateNames) {\n\t\t\t\tconst state = model[stateName];\n\t\t\t\tconst pack = this.packFactory(stateName);\n\t\t\t\tconst write = this.writeFactory(stateName);\n\n\t\t\t\tif (run) {\n\t\t\t\t\tconst oldState = state();\n\t\t\t\t\tconst newState = pack(oldState);\n\t\t\t\t\tconst changes = this.buildChanges(newState);\n\t\t\t\t\twrite({ changes });\n\t\t\t\t}\n\n\t\t\t\tif (track) {\n\t\t\t\t\tthis.disposable.add(\n\t\t\t\t\t\tmodel[stateName + 'Changed'].on(write)\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tcommits.push(() => {\n\t\t\t\t\tLog.info('model.bind', `to model \"${stateName}\"`);\n\n\t\t\t\t\tconst oldState = state();\n\t\t\t\t\tconst newState = pack(oldState);\n\t\t\t\t\tstate(newState);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn () => commits.forEach(commit => commit());\n\t\t}\n\n\t\treturn noop;\n\t}\n\n\twriteFactory(name) {\n\t\tconst host = this.host;\n\t\treturn e => {\n\t\t\tconst changes = Object.keys(e.changes);\n\t\t\tfor (let diffKey of changes) {\n\t\t\t\tconst hostKey = toCamelCase(name, diffKey);\n\t\t\t\tif (host.hasOwnProperty(hostKey)) {\n\t\t\t\t\tconst diff = e.changes[diffKey];\n\t\t\t\t\thost[hostKey] = diff.newValue;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tpackFactory(name) {\n\t\treturn state => {\n\t\t\tconst host = this.host;\n\t\t\tconst newState = {};\n\t\t\tfor (let stateKey of Object.keys(state)) {\n\t\t\t\tconst hostKey = toCamelCase(name, stateKey);\n\t\t\t\tif (host.hasOwnProperty(hostKey)) {\n\t\t\t\t\tconst oldValue = state[stateKey];\n\t\t\t\t\tconst newValue = host[hostKey];\n\t\t\t\t\tif (this.canWrite(oldValue, newValue, stateKey)) {\n\t\t\t\t\t\tnewState[stateKey] = newValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn newState;\n\t\t};\n\t}\n\n\tbuildChanges(state) {\n\t\treturn Object\n\t\t\t.keys(state)\n\t\t\t.reduce((memo, key) => {\n\t\t\t\tconst value = state[key];\n\t\t\t\tmemo[key] = {\n\t\t\t\t\tnewValue: value,\n\t\t\t\t\toldValue: value\n\t\t\t\t};\n\t\t\t\treturn memo;\n\t\t\t}, {})\n\t}\n}\n\nclass MouseState {\n\tconstructor() {\n\t\tthis.status = 'release';\n\t\tthis.code = null;\n\t\tthis.target = null;\n\t\tthis.timestamp = Date.now();\n\t}\n}\n\nclass NavigationState {\n\tconstructor() {\n\t\tthis.cell = null;\n\n\t\tthis.shortcut = {\n\t\t\tup: 'up',\n\t\t\tdown: 'down',\n\t\t\tleft: 'left',\n\t\t\tright: 'right',\n\t\t\tnext: 'tab',\n\t\t\tprevious: 'shift+tab',\n\t\t\thome: 'home',\n\t\t\tend: 'end',\n\t\t\tpageUp: 'pageUp',\n\t\t\tpageDown: 'pageDown',\n\t\t\tupward: 'shift+pageUp',\n\t\t\tdownward: 'shift+pageDown'\n\t\t};\n\n\t\tthis.go = new Command({ source: 'navigation.model' });\n\n\t\tthis.prevent = new Set([\n\t\t\t'space',\n\t\t\t'shift+space',\n\t\t\t'up',\n\t\t\t'down',\n\t\t\t'left',\n\t\t\t'right',\n\t\t\t'home',\n\t\t\t'end',\n\t\t\t'pageUp',\n\t\t\t'pageDown',\n\t\t\t'shift+pageDown',\n\t\t\t'shift+pageUp'\n\t\t]);\n\t}\n}\n\nclass PaginationState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\n\t\tthis.current = 0;\n\t\tthis.size = 50;\n\t\tthis.sizeList = [5, 10, 20, 30, 40, 50];\n\t\tthis.count = 0;\n\t\tthis.mode = 'showPages'; \n\n\t\tthis.resetTriggers = {\n\t\t\t'filter': ['by'],\n\t\t\t'pivot': ['by'],\n\t\t\t'group': ['by']\n\t\t};\n\n\t\tthis.shortcut = {\n\t\t\tprev: 'alt+pageup',\n\t\t\tnext: 'alt+pagedown',\n\t\t};\n\t}\n}\n\nfunction replacer(key, value) {\n\tif (value instanceof Map) {\n\t\treturn {\n\t\t\ttype: 'map',\n\t\t\tvalue: Array.from(value.entries()),\n\t\t};\n\t}\n\n\tif (value instanceof Set) {\n\t\treturn {\n\t\t\ttype: 'set',\n\t\t\tvalue: Array.from(value.values()),\n\t\t};\n\t}\n\n\treturn value;\n}\n\nfunction reviver(key, value) {\n\tif (typeof value === 'object' && value !== null) {\n\t\tif (value.type === 'map') {\n\t\t\treturn new Map(value.value);\n\t\t}\n\n\t\tif (value.type === 'set') {\n\t\t\treturn new Set(value.value);\n\t\t}\n\t}\n\n\treturn value;\n}\n\nconst serialize = value => JSON.stringify(value, replacer);\nconst deserialize = value => JSON.parse(value, reviver);\n\nclass PersistenceStorage {\n\tconstructor(storage) {\n\t\tthis.storage = storage;\n\t}\n\n\tgetItem(key) {\n\t\treturn new Promise(resolve => {\n\t\t\tconst item = deserialize(this.storage.getItem(key));\n\t\t\tresolve(item);\n\t\t});\n\t}\n\n\tsetItem(key, value) {\n\t\treturn new Promise(resolve => {\n\t\t\tconst item = this.storage.setItem(key, serialize(value));\n\t\t\tresolve(item);\n\t\t});\n\t}\n}\n\nclass PersistenceState {\n\tconstructor() {\n\t\tthis.id = 'default';\n\t\tthis.defaultGroup = 'My Presets';\n\t\tthis.schedule = 'onDemand'; // onDemand | onStateChange\n\n\t\tthis.load = new Command({ source: 'persistence.model' });\n\t\tthis.remove = new Command({ source: 'persistence.model' });\n\t\tthis.create = new Command({ source: 'persistence.model' });\n\t\tthis.modify = new Command({ source: 'persistence.model' });\n\t\tthis.setDefault = new Command({ source: 'persistence.model' });\n\t\tthis.reset = new Command({ source: 'persistence.model' });\n\n\t\tthis.storage = new PersistenceStorage(localStorage);\n\t\tthis.settings = {\n\t\t\tgroup: ['by'],\n\t\t\tsort: ['by'],\n\t\t\tpivot: ['by'],\n\t\t\tfilter: ['by'],\n\t\t\tqueryBuilder: ['node'],\n\t\t\tpagination: ['current', 'size'],\n\t\t\tlayout: ['columns']\n\t\t};\n\t}\n}\n\nclass PipeState {\n\tconstructor() {\n\t\tthis.reduce = (units, model) => {\n\t\t\tconst dataPipe = model.data().pipe;\n\t\t\t// Change one of default pipes to data pipes - cause default literaly means data\n\t\t\t// we can change only one because all other will be moved out during reduce\n\t\t\tconst index = units.indexOf(PipeUnit.default);\n\t\t\tif (index >= 0) {\n\t\t\t\tunits[index] = dataPipe;\n\t\t\t}\n\n\t\t\tunits = uniq(units);\n\t\t\tconst set = new Set(units);\n\n\t\t\tconst schema = new Map([\n\t\t\t\t[PipeUnit.default, dataPipe],\n\t\t\t\t[PipeUnit.view, PipeUnit.default],\n\t\t\t\t[PipeUnit.column, PipeUnit.view]\n\t\t\t]);\n\n\t\t\tconst shouldKeep = unit => {\n\t\t\t\tlet next;\n\t\t\t\twhile ((next = schema.get(unit))) {\n\t\t\t\t\tif (next === unit) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (set.has(next)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tunit = next;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\treturn units.reduce((memo, unit) => {\n\t\t\t\tif (shouldKeep(unit)) {\n\t\t\t\t\tmemo.push(unit);\n\t\t\t\t}\n\n\t\t\t\treturn memo;\n\t\t\t}, []);\n\t\t};\n\n\t\tthis.triggers = {\n\t\t\t'data': {\n\t\t\t\t'rows': PipeUnit.default,\n\t\t\t\t'columns': PipeUnit.column\n\t\t\t},\n\t\t\t'pagination': {\n\t\t\t\t'current': PipeUnit.default,\n\t\t\t\t'size': PipeUnit.default\n\t\t\t},\n\t\t\t'fetch': {\n\t\t\t\t'skip': PipeUnit.default\n\t\t\t},\n\t\t\t'sort': {\n\t\t\t\t'by': PipeUnit.default\n\t\t\t},\n\t\t\t'filter': {\n\t\t\t\t'by': PipeUnit.default,\n\t\t\t\t'match': PipeUnit.default,\n\t\t\t\t'custom': PipeUnit.default,\n\t\t\t\t'unit': PipeUnit.column,\n\t\t\t},\n\t\t\t'group': {\n\t\t\t\t'by': PipeUnit.default\n\t\t\t},\n\t\t\t'pivot': {\n\t\t\t\t'by': PipeUnit.default\n\t\t\t},\n\t\t\t'columnList': {\n\t\t\t\t'index': PipeUnit.columnIndex\n\t\t\t},\n\t\t\t'row': {\n\t\t\t\t'status': PipeUnit.rowDetails,\n\t\t\t\t'unit': PipeUnit.rowDetails,\n\t\t\t\t'canMove': PipeUnit.column,\n\t\t\t\t'canResize': PipeUnit.column\n\t\t\t},\n\t\t\t'rowList': {\n\t\t\t\t'index': PipeUnit.row\n\t\t\t},\n\t\t\t'animation': {\n\t\t\t\t'rows': PipeUnit.default\n\t\t\t}\n\t\t};\n\n\t\tthis.effect = {};\n\t}\n}\n\nclass PivotState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.by = [];\n\t}\n}\n\nclass PluginState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.imports = {};\n\t}\n}\n\nclass ProgressState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.isBusy = false;\n\t\tthis.queue = [];\n\t}\n}\n\nfunction serializeGet(model) {\n\tconst paginationState = model.pagination();\n\tconst sortState = model.sort();\n\tconst filterState = model.filter();\n\n\treturn {\n\t\torder: sortState.by\n\t\t\t.map(item => {\n\t\t\t\tconst field = Object.keys(item)[0];\n\t\t\t\tconst order = item[field];\n\t\t\t\treturn `${order === 'asc' ? '+' : '-'}${field}`;\n\t\t\t})\n\t\t\t.join(','),\n\t\tfilter: Object\n\t\t\t.keys(filterState.by)\n\t\t\t.map(field => {\n\t\t\t\tconst state = filterState.by[field];\n\t\t\t\tif(field === '$expression') {\n\t\t\t\t\treturn `$expression=where:${state}`;\n\t\t\t\t}\n\n\t\t\t\tif (state.items) {\n\t\t\t\t\treturn `${field}=in:${state.items.join(',')}`;\n\t\t\t\t}\n\n\t\t\t\tif (state.expression) {\n\t\t\t\t\treturn `${field}=where:${state.expression}`;\n\t\t\t\t}\n\n\t\t\t\treturn '';\n\t\t\t})\n\t\t\t.filter(part => !!part)\n\t\t\t.join(';'),\n\t\tskip: paginationState.current * paginationState.size,\n\t\ttake: paginationState.size\n\t};\n}\n\nclass RestState {\n\tconstructor() {\n\t\tthis.url = '';\n\t\tthis.method = 'get';\n\t\tthis.serialize = serializeGet;\n\t}\n}\n\nclass RowListState {\n\tconstructor() {\n\t\tthis.index = new Map();\n\t}\n}\n\nclass RowState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\n\t\tthis.mode = 'single'; // single | multiple | all\n\t\tthis.unit = 'data'; // data | details\n\t\tthis.height = element => element && element.offsetHeight || 64; // number | function(element, index)\t\t\n\t\tthis.status = new Map();\n\t\tthis.shortcut = {\n\t\t\ttoggle: 'space|enter'\n\t\t};\n\t\tthis.canMove = false;\n\t\tthis.canResize = false;\n\t\tthis.minHeight = 0;\n\t\tthis.pinTop = [];\n\t\tthis.pinBottom = [];\n\t\tthis.toggle = new Command();\n\t}\n}\n\nclass SceneState {\n\tconstructor() {\n\t\tthis.status = 'idle'; // idle | start | pull | push | stop\n\t\tthis.rows = [];\n\t\tthis.column = {\n\t\t\trows: [],\n\t\t\tline: [],\n\t\t\tarea: {\n\t\t\t\tleft: [],\n\t\t\t\tmid: [],\n\t\t\t\tright: []\n\t\t\t}\n\t\t};\n\t}\n}\n\nclass ScrollState {\n\tconstructor() {\n\t\tthis.mode = 'default';\n\n\t\tthis.top = 0;\n\t\tthis.left = 0;\t\t\n\t\tthis.cursor = 0;\n\n\t\tthis.map = {\n\t\t\trowToView: identity,\n\t\t\tviewToRow: identity\n\t\t};\n\n\t\tthis.resetTriggers = [\n\t\t\t'sort.view',\n\t\t\t'column.filter.view',\n\t\t\t'data.manipulation'\n\t\t];\n\t}\n}\n\nclass SelectionState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.unit = 'cell'; //row|cell|column|mix\n\t\tthis.mode = 'single'; //single|multiple|range|singleOnly\n\t\tthis.items = [];\n\t\tthis.area = 'body'; //body, custom\n\t\tthis.toggle = new Command({ source: 'selection.model' });\n\t\tthis.rowKey = identity;\n\t\tthis.columnKey = identity;\n\t\tthis.shortcut = {\n\t\t\ttoggleRow: 'shift+space|space',\n\t\t\ttogglePreviousRow: 'shift+up',\n\t\t\ttoggleNextRow: 'shift+down',\n\t\t\ttoggleColumn: 'ctrl+space',\n\t\t\ttoggleNextColumn: 'shift+right',\n\t\t\ttogglePreviousColumn: 'shift+left',\n\t\t\tselectAll: 'ctrl+a'\n\t\t};\n\t}\n}\n\nclass SortState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.by = [];\n\t\tthis.mode = 'mixed';\n\t\tthis.trigger = [];\n\t}\n}\n\nclass StyleState {\n\tconstructor() {\n\t\tthis.row = noop;\n\t\tthis.cell = noop;\n\n\t\tthis.rows = [];\n\t\tthis.cells = [];\n\t\tthis.classList = [];\n\n\t\tthis.invalidate = new Command({\n\t\t\tsource: 'style.model',\n\t\t\tcanExecute: context => context.model.edit().status === 'view'\n\t\t});\n\t}\n}\n\nclass TemplateState {\n\tconstructor() {\n\t\tthis.resource = {};\n\t}\n}\n\nclass ToolbarState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t}\n}\n\nclass ValidationState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.rules = [];\n\t}\n}\n\nclass ViewState {\n\tconstructor() {\n\t\tthis.rows = [];\n\t\tthis.columns = [];\n\t\tthis.nodes = [];\n\t\tthis.pivot = { head: new Node('$root', 0), rows: [] };\n\t}\n}\n\nclass VisibilityState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.head = true;\n\t\tthis.foot = true;\n\t\tthis.body = true;\n\t\tthis.toolbar = {\n\t\t\ttop: true,\n\t\t\tbottom: true,\n\t\t\tright: false,\n\t\t\tleft: false\n\t\t};\n\n\t\tthis.pin = {\n\t\t\tleft: false,\n\t\t\tright: false,\n\t\t\ttop: false,\n\t\t\tbottom: false\n\t\t};\n\n\t\tthis.plugin = {};\n\t}\n}\n\nclass ModelBuilder {\n    constructor() {\n        this.state = {};\n\n        this\n            .register('action', ActionState)\n            .register('animation', AnimationState)\n            .register('body', BodyState)\n            .register('clipboard', ClipboardState)\n            .register('columnList', ColumnListState)\n            .register('data', DataState)\n            .register('drag', DragState)\n            .register('edit', EditState)\n            .register('export', ExportState)\n            .register('fetch', FetchState)\n            .register('filter', FilterState)\n            .register('focus', FocusState)\n            .register('foot', FootState)\n            .register('grid', GridState)\n            .register('group', GroupState)\n            .register('head', HeadState)\n            .register('highlight', HighlightState)\n            .register('import', ImportState)\n            .register('keyboard', KeyboardState)\n            .register('layer', LayerState)\n            .register('layout', LayoutState)\n            .register('mouse', MouseState)\n            .register('navigation', NavigationState)\n            .register('pagination', PaginationState)\n            .register('persistence', PersistenceState)\n            .register('pipe', PipeState)\n            .register('pivot', PivotState)\n            .register('plugin', PluginState)\n            .register('progress', ProgressState)\n            .register('rest', RestState)\n            .register('row', RowState)\n            .register('rowList', RowListState)\n            .register('scene', SceneState)\n            .register('scroll', ScrollState)\n            .register('selection', SelectionState)\n            .register('sort', SortState)\n            .register('style', StyleState)\n            .register('template', TemplateState)\n            .register('toolbar', ToolbarState)\n            .register('validation', ValidationState)\n            .register('view', ViewState)\n            .register('visibility', VisibilityState);\n    }\n\n    register(key, ctor) {\n        if (this.state.hasOwnProperty(key)) {\n            throw new GridError(\n                'model',\n                `\"${key}\" is already registered`);\n        }\n\n        if (!isFunction(ctor)) {\n            throw new GridError(\n                `model.${key}`,\n                `\"${ctor}\" is not a valid type, should be an constructor function`);\n        }\n\n        this.state[key] = ctor;\n        return this;\n    }\n\n    build() {\n        const { state } = this;\n        const model = new Model();\n        for (let name of Object.keys(state)) {\n            const Type = state[name];\n            model.inject(name, Type);\n        }\n\n        return model;\n    }\n}\n\nconst NO_BUTTON = 0;\nconst LEFT_BUTTON = 1;\nconst MIDDLE_BUTTON = 2;\nconst RIGHT_BUTTON = 3;\n\nfunction checkButtonCode(event, code) {\n    return getButtonCode(event) === code;\n}\n\nfunction getButtonCode(event) {\n    return event.which;\n}\n\nfunction stringify(code) {\n    switch (code) {\n        case LEFT_BUTTON: return 'left';\n        case RIGHT_BUTTON: return 'right';\n        case MIDDLE_BUTTON: return 'middle';\n        default: return null;\n    }\n}\n\nclass Navigation {\n\tconstructor(model, table) {\n\t\tthis.model = model;\n\t\tthis.table = table;\n\t}\n\n\tposition(y, direction) {\n\t\tconst table = this.table;\n\t\tconst body = table.body;\n\t\tconst lastRow = this.lastRow;\n\t\tconst lower = table.view.scrollHeight() - table.view.height();\n\n\t\tlet index = 0;\n\t\tlet offset = 0;\n\n\t\t// TODO: improve performance\n\t\twhile (index <= lastRow && offset <= y) {\n\t\t\toffset += body.row(index).height();\n\t\t\tindex++;\n\t\t}\n\n\t\tif (direction === 'down' && body.row(index)) {\n\t\t\toffset -= body.row(index).height();\n\t\t\tindex--;\n\t\t}\n\n\t\tconst row = Math.max(this.firstRow, Math.min(lastRow, index));\n\t\toffset = Math.min(offset, lower);\n\t\treturn { row, offset };\n\t}\n\n\tgoTo(rowIndex, columnIndex, source = 'navigation') {\n\t\tlet cell = this.cell(rowIndex, columnIndex);\n\t\tif (!cell) {\n\t\t\t// TODO: make it better, right it just a huck for row-details,\n\t\t\t// need to support rowspan and colspan\n\t\t\tcell = this.cell(rowIndex, this.firstColumn);\n\t\t}\n\n\t\tthis.model.navigation({\n\t\t\tcell\n\t\t}, {\n\t\t\tsource\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tcolumns(rowIndex) {\n\t\tconst columns = this.table.body.columns(rowIndex);\n\t\tconst index = [];\n\t\tfor (let i = 0, length = columns.length; i < length; i++) {\n\t\t\tconst column = columns[i];\n\t\t\tif (column.model().canFocus) {\n\t\t\t\tindex.push(column.index);\n\t\t\t}\n\t\t}\n\t\treturn index;\n\t}\n\n\tget currentColumn() {\n\t\tconst columns = this.columns(this.currentRow);\n\t\tconst columnIndex = selectColumnIndex(this.model.navigation());\n\t\tconst index = columns.indexOf(columnIndex);\n\t\treturn columns.length ? columns[Math.max(index, 0)] : -1;\n\t}\n\n\tget nextColumn() {\n\t\tconst columns = this.columns(this.currentRow);\n\t\tconst index = columns.indexOf(this.currentColumn);\n\t\treturn index >= 0 && index < columns.length - 1 ? columns[index + 1] : -1;\n\t}\n\n\tget prevColumn() {\n\t\tconst columns = this.columns(this.currentRow);\n\t\tconst index = columns.indexOf(this.currentColumn);\n\t\treturn index > 0 && index < columns.length ? columns[index - 1] : -1;\n\t}\n\n\tget lastColumn() {\n\t\tconst columns = this.columns(this.currentRow);\n\t\tconst index = columns.length - 1;\n\t\treturn index >= 0 ? columns[index] : -1;\n\t}\n\n\tget firstColumn() {\n\t\tconst columns = this.columns(this.currentRow);\n\t\treturn columns.length ? columns[0] : -1;\n\t}\n\n\tget currentRow() {\n\t\tconst rowIndex = selectRowIndex(this.model.navigation());\n\t\tif (rowIndex < 0) {\n\t\t\treturn this.model.scene().rows.length ? 0 : -1;\n\t\t}\n\n\t\treturn rowIndex;\n\t}\n\n\tget nextRow() {\n\t\tconst row = this.currentRow + 1;\n\t\treturn row <= this.lastRow ? row : -1;\n\t}\n\n\tget prevRow() {\n\t\tconst row = this.currentRow - 1;\n\t\treturn row >= 0 ? row : -1;\n\t}\n\n\tget firstRow() {\n\t\treturn Math.min(0, this.lastRow);\n\t}\n\n\tget lastRow() {\n\t\treturn this.table.body.rowCount(this.currentColumn) - 1;\n\t}\n\n\tcell(rowIndex, columnIndex) {\n\t\tconst cell = this.table.body.cell(rowIndex, columnIndex);\n\t\tconst model = cell.model();\n\t\tif (model) {\n\t\t\tconst { row, column } = model;\n\t\t\treturn {\n\t\t\t\trowIndex,\n\t\t\t\tcolumnIndex,\n\t\t\t\trow,\n\t\t\t\tcolumn\n\t\t\t};\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tcontext(type, settings) {\n\t\tconst model = this.model;\n\t\tconst oldRow = this.currentRow;\n\t\tconst oldColumn = this.currentColumn;\n\t\tconst keyCode = model.action().shortcut.keyCode;\n\n\t\treturn Object.assign({\n\t\t\tmodel,\n\t\t\ttype,\n\t\t\toldRow,\n\t\t\toldColumn,\n\t\t\tkeyCode\n\t\t}, settings);\n\t}\n\n\tget commands() {\n\t\tconst { model, table } = this;\n\t\tconst { edit } = model;\n\t\tconst { shortcut, go } = model.navigation();\n\n\t\tconst canNavigate = () => {\n\t\t\tif (edit().status === 'view') {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst column = table.body.column(this.currentColumn).model();\n\t\t\treturn column && (column.editorOptions.trigger === 'focus' || column.editorOptions.cruise === 'transparent');\n\t\t};\n\n\t\tconst commands = {\n\t\t\tgoDown: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.down,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newRow = this.nextRow;\n\t\t\t\t\t\treturn newRow >= 0 && go.canExecute(this.context('down', { newRow }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst newRow = this.nextRow;\n\t\t\t\t\tconst newColumn = this.currentColumn;\n\t\t\t\t\treturn go.execute(this.context('down', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tgoUp: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.up,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newRow = this.prevRow;\n\t\t\t\t\t\treturn newRow >= 0 && go.canExecute(this.context('up', { newRow }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst newRow = this.prevRow;\n\t\t\t\t\tconst newColumn = this.currentColumn;\n\t\t\t\t\treturn go.execute(this.context('up', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tgoRight: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.right,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newColumn = this.nextColumn;\n\t\t\t\t\t\treturn newColumn >= 0 && go.canExecute(this.context('right', { newColumn }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst newRow = this.currentRow;\n\t\t\t\t\tconst newColumn = this.nextColumn;\n\t\t\t\t\treturn go.execute(this.context('right', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tgoLeft: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.left,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newColumn = this.prevColumn;\n\t\t\t\t\t\treturn newColumn >= 0 && go.canExecute(this.context('left', { newColumn }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst newRow = this.currentRow;\n\t\t\t\t\tconst newColumn = this.prevColumn;\n\t\t\t\t\treturn go.execute(this.context('left', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tgoNext: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.next,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tconst newRow = this.nextRow;\n\t\t\t\t\tconst newColumn = this.nextColumn;\n\t\t\t\t\tconst hasNextColumn = newColumn >= 0;\n\t\t\t\t\tconst hasNextRow = newRow >= 0;\n\t\t\t\t\treturn (hasNextColumn || hasNextRow) && go.canExecute(this.context('next', { newRow, newColumn }));\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst nextColumn = this.nextColumn;\n\t\t\t\t\tconst hasNextColumn = nextColumn >= 0;\n\t\t\t\t\tconst newRow = hasNextColumn ? this.currentRow : this.nextRow;\n\t\t\t\t\tconst newColumn = hasNextColumn ? nextColumn : this.firstColumn;\n\n\t\t\t\t\treturn go.execute(this.context('next', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tgoPrevious: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.previous,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tconst newColumn = this.prevColumn;\n\t\t\t\t\tconst newRow = this.prevRow;\n\t\t\t\t\tconst hasPrevColumn = newColumn >= 0;\n\t\t\t\t\tconst hasPrevRow = newRow >= 0;\n\t\t\t\t\treturn (hasPrevColumn || hasPrevRow) && go.canExecute(this.context('previous', { newRow, newColumn }));\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst prevColumn = this.prevColumn;\n\t\t\t\t\tconst hasPrevColumn = prevColumn >= 0;\n\t\t\t\t\tconst newColumn = hasPrevColumn ? prevColumn : this.lastColumn;\n\t\t\t\t\tconst newRow = hasPrevColumn ? this.currentRow : this.prevRow;\n\t\t\t\t\treturn go.execute(this.context('previous', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\thome: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.home,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newColumn = this.prevColumn;\n\t\t\t\t\t\treturn newColumn >= 0 && go.canExecute(this.context('end', { newColumn }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst newRow = this.currentRow;\n\t\t\t\t\tconst newColumn = this.firstColumn;\n\t\t\t\t\treturn go.execute(this.context('home', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tend: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.end,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newColumn = this.nextColumn;\n\t\t\t\t\t\treturn newColumn >= 0 && go.canExecute(this.context('home', { newColumn }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst newRow = this.currentRow;\n\t\t\t\t\tconst newColumn = this.lastColumn;\n\t\t\t\t\treturn go.execute(this.context('end', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tupward: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.upward,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newRow = this.prevRow;\n\t\t\t\t\t\treturn newRow >= 0 && go.canExecute(this.context('upward', { newRow }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst newRow = this.firstRow;\n\t\t\t\t\tconst newColumn = this.currentColumn;\n\t\t\t\t\treturn go.execute(this.context('upward', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tdownward: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.downward,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newRow = this.nextRow;\n\t\t\t\t\t\treturn newRow >= 0 && go.canExecute(this.context('downward', { newRow }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst newRow = this.lastRow;\n\t\t\t\t\tconst newColumn = this.currentColumn;\n\t\t\t\t\treturn go.execute(this.context('downward', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tpageUp: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.pageUp,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newRow = this.prevRow;\n\t\t\t\t\t\treturn newRow >= 0 && go.canExecute(this.context('pageUp', { newRow }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst view = table.view;\n\t\t\t\t\tconst position = this.position(view.scrollTop() - view.height(), 'up');\n\t\t\t\t\tconst newRow = position.row;\n\t\t\t\t\tconst newColumn = this.currentColumn;\n\t\t\t\t\tif (go.execute(this.context('pageUp', { newRow, newColumn }))) {\n\t\t\t\t\t\tthis.model.scroll({ top: position.offset }, { source: 'navigation' });\n\t\t\t\t\t\treturn this.goTo(newRow, newColumn, 'navigation.scroll');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}),\n\t\t\tpageDown: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.pageDown,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newRow = this.nextRow;\n\t\t\t\t\t\treturn newRow >= 0 && go.canExecute(this.context('pageDown', { newRow }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst view = table.view;\n\t\t\t\t\tconst position = this.position(view.scrollTop() + view.height(), 'down');\n\t\t\t\t\tconst newRow = position.row;\n\t\t\t\t\tconst newColumn = this.currentColumn;\n\t\t\t\t\tif (go.execute(this.context('pageDown', { newRow, newColumn }))) {\n\t\t\t\t\t\tthis.model.scroll({ top: position.offset }, { source: 'navigation' });\n\t\t\t\t\t\treturn this.goTo(position.row, this.currentColumn, 'navigation.scroll');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t})\n\t\t};\n\n\t\treturn new Map(Object.entries(commands));\n\t}\n}\n\nclass NavigationLet {\n\tconstructor(plugin, shortcut) {\n\t\tconst { model, table, observeReply } = plugin;\n\t\tthis.plugin = plugin;\n\n\t\tconst navigation = new Navigation(model, table);\n\t\tlet focusBlurs = [];\n\n\t\tshortcut.register(navigation.commands);\n\n\t\tthis.focus = new Command({\n\t\t\tsource: 'navigation.view',\n\t\t\tcanExecute: newCell => {\n\t\t\t\tconst { cell: oldCell } = model.navigation();\n\t\t\t\tif (newCell && newCell.column.canFocus && !Td.equals(newCell, oldCell)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\texecute: e => {\n\t\t\t\tconst { rowIndex, columnIndex, behavior } = e;\n\t\t\t\tconst td = table.body.cell(rowIndex, columnIndex).model();\n\t\t\t\tif (td) {\n\t\t\t\t\tconst { row, column } = td;\n\t\t\t\t\tmodel.navigation({\n\t\t\t\t\t\tcell: {\n\t\t\t\t\t\t\trowIndex,\n\t\t\t\t\t\t\tcolumnIndex,\n\t\t\t\t\t\t\trow,\n\t\t\t\t\t\t\tcolumn\n\t\t\t\t\t\t}\n\t\t\t\t\t}, {\n\t\t\t\t\t\tsource: 'navigation.view',\n\t\t\t\t\t\tbehavior\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tmodel.navigation({\n\t\t\t\t\t\tcell: null\n\t\t\t\t\t}, {\n\t\t\t\t\t\tsource: 'navigation.view',\n\t\t\t\t\t\tbehavior\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.scrollTo = new Command({\n\t\t\tsource: 'navigation.view',\n\t\t\texecute: (row, column) => {\n\t\t\t\tconst cell = table.body.cell(row, column);\n\t\t\t\tthis.scroll(table.view, cell);\n\t\t\t},\n\t\t\tcanExecute: (row, column) => table.body.cell(row, column).model() !== null\n\t\t});\n\n\t\tobserveReply(model.navigationChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('cell')) {\n\t\t\t\t\tif (e.tag.behavior !== 'core') {\n\t\t\t\t\t\t// We need this one to toggle focus from details to main grid\n\t\t\t\t\t\t// or when user change navigation cell through the model\n\t\t\t\t\t\tif (!table.view.isFocused()) {\n\t\t\t\t\t\t\ttable.view.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst rowIndex = selectRowIndex(e.state);\n\t\t\t\t\tconst columnIndex = selectColumnIndex(e.state);\n\n\t\t\t\t\tfocusBlurs = this.invalidateFocus(focusBlurs);\n\t\t\t\t\tif (e.tag.source !== 'navigation.scroll'\n\t\t\t\t\t\t&& e.tag.behavior !== 'core'\n\t\t\t\t\t\t&& this.scrollTo.canExecute(rowIndex, columnIndex)\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.scrollTo.execute(rowIndex, columnIndex);\n\t\t\t\t\t}\n\n\t\t\t\t\tmodel.focus({\n\t\t\t\t\t\trowIndex,\n\t\t\t\t\t\tcolumnIndex\n\t\t\t\t\t}, {\n\t\t\t\t\t\tsource: 'navigation.view'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.focusChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.tag.source === 'navigation.view') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.hasChanges('isActive')) {\n\t\t\t\t\tconst { view } = table;\n\t\t\t\t\tconst activeClassName = `${GRID_PREFIX}-active`;\n\t\t\t\t\tif (e.state.isActive) {\n\t\t\t\t\t\tFastdom.mutate(() => view.addClass(activeClassName));\n\t\t\t\t\t\tview.focus();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tFastdom.mutate(() => view.removeClass(activeClassName));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (e.hasChanges('rowIndex') || e.hasChanges('columnIndex')) {\n\t\t\t\t\tthis.focus.execute(e.state);\n\t\t\t\t}\n\n\t\t\t});\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('status')) {\n\t\t\t\t\tconst { status } = e.state;\n\t\t\t\t\tswitch (status) {\n\t\t\t\t\t\tcase 'stop': {\n\t\t\t\t\t\t\tconst navState = model.navigation();\n\t\t\t\t\t\t\tconst rowIndex = selectRowIndex(navState);\n\t\t\t\t\t\t\tconst columnIndex = selectColumnIndex(navState);\n\n\t\t\t\t\t\t\tif (rowIndex >= 0 && columnIndex >= 0) {\n\t\t\t\t\t\t\t\tlet td = table.body.cell(rowIndex, columnIndex).model();\n\t\t\t\t\t\t\t\tthis.focus.execute({\n\t\t\t\t\t\t\t\t\trowIndex: td ? td.rowIndex : -1,\n\t\t\t\t\t\t\t\t\tcolumnIndex: td ? td.columnIndex : -1,\n\t\t\t\t\t\t\t\t\tbehavior: 'core'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tinvalidateFocus(dispose) {\n\t\tconst { model, table } = this.plugin;\n\n\t\tdispose.forEach(f => f());\n\t\tdispose = [];\n\n\t\tconst rowIndex = selectRowIndex(model.navigation());\n\t\tconst columnIndex = selectColumnIndex(model.navigation());\n\t\tconst cell = table.body.cell(rowIndex, columnIndex);\n\t\tif (cell.model()) {\n\t\t\tconst row = table.body.row(rowIndex);\n\n\t\t\tFastdom.mutate(() => {\n\t\t\t\tcell.addClass(`${GRID_PREFIX}-focused`);\n\t\t\t\trow.addClass(`${GRID_PREFIX}-focused`);\n\t\t\t});\n\n\t\t\tdispose.push(() => Fastdom.mutate(() => {\n\t\t\t\tcell.removeClass(`${GRID_PREFIX}-focused`);\n\t\t\t\trow.removeClass(`${GRID_PREFIX}-focused`);\n\t\t\t}));\n\t\t}\n\n\t\treturn dispose;\n\t}\n\n\tscroll(view, target) {\n\t\tconst { model } = this.plugin;\n\t\tconst { scroll } = model;\n\t\tFastdom.measure(() => {\n\t\t\tconst tr = target.rect();\n\t\t\tconst vr = view.rect('body-mid');\n\t\t\tconst state = {};\n\n\t\t\tif (view.canScrollTo(target, 'left')) {\n\t\t\t\tif (vr.left > tr.left\n\t\t\t\t\t|| vr.left > tr.right\n\t\t\t\t\t|| vr.right < tr.left\n\t\t\t\t\t|| vr.right < tr.right) {\n\n\t\t\t\t\tif (vr.width < tr.width || vr.left > tr.left || vr.left > tr.right) {\n\t\t\t\t\t\tstate.left = tr.left - vr.left + scroll().left;\n\t\t\t\t\t}\n\t\t\t\t\telse if (vr.left < tr.left || vr.right < tr.right) {\n\t\t\t\t\t\tstate.left = tr.right - vr.right + scroll().left;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (view.canScrollTo(target, 'top')) {\n\t\t\t\tif (vr.top > tr.top\n\t\t\t\t\t|| vr.top > tr.bottom\n\t\t\t\t\t|| vr.bottom < tr.top\n\t\t\t\t\t|| vr.bottom < tr.bottom) {\n\n\t\t\t\t\tif (vr.height < tr.height || vr.top > tr.top || vr.top > tr.bottom) {\n\t\t\t\t\t\tstate.top = tr.top - vr.top + scroll().top;\n\t\t\t\t\t}\n\t\t\t\t\telse if (vr.top < tr.top || vr.bottom < tr.bottom) {\n\t\t\t\t\t\tstate.top = tr.bottom - vr.bottom + scroll().top;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Object.keys(state).length) {\n\t\t\t\tscroll(state, { behavior: 'core', source: 'navigation.view' });\n\t\t\t}\n\t\t});\n\t}\n}\n\nclass PaginationLet {\n\tconstructor(plugin) {\n\t\tthis.model = plugin.model;\n\t\t\n\t\tconst { model, observe } = plugin;\n\t\tconst { resetTriggers } = model.pagination();\n\n\t\tObject.keys(resetTriggers)\n\t\t\t.forEach(name =>\n\t\t\t\tobserve(model[name + 'Changed'])\n\t\t\t\t\t.subscribe(e => {\n\t\t\t\t\t\tif (e.tag.behavior === 'core') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (model.scroll().mode === 'virtual') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst trigger = resetTriggers[name];\n\t\t\t\t\t\tfor (const key of trigger) {\n\t\t\t\t\t\t\tif (e.hasChanges(key)) {\n\t\t\t\t\t\t\t\tmodel.pagination({ current: 0 }, { source: e.tag.source || 'pagination.view' });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t}\n\n\tget current() {\n\t\treturn this.model.pagination().current;\n\t}\n\n\tget size() {\n\t\treturn this.model.pagination().size;\n\t}\n}\n\n// TODO: refactor this to the commands\nclass PersistenceService {\n\tconstructor(model, createDefaultModel) {\n\t\tthis.model = model;\n\t\tthis.createDefaultModel = createDefaultModel;\n\t}\n\n\tsave(settings) {\n\t\tconst gridModel = this.model;\n\t\tsettings = settings || gridModel.persistence().settings;\n\n\t\tconst model = {};\n\t\tfor (const key in settings) {\n\t\t\tconst source = gridModel[key]();\n\t\t\tconst target = {};\n\t\t\tmodel[key] = target;\n\t\t\tfor (const p of settings[key]) {\n\t\t\t\tconst value = source[p];\n\t\t\t\ttarget[p] = clone(value);\n\t\t\t}\n\t\t}\n\n\t\treturn model;\n\t}\n\n\tload(model, settings) {\n\t\tconst gridModel = this.model;\n\t\tsettings = settings || gridModel.persistence().settings;\n\n\t\tfor (const key in settings) {\n\t\t\tconst source = model[key];\n\t\t\tif (source) {\n\t\t\t\tconst target = gridModel[key];\n\t\t\t\ttarget(source, { source: 'persistence.service' });\n\t\t\t}\n\t\t}\n\n\t\treturn model;\n\t}\n\n\treset(settings) {\n\t\tconst defaultModel = this.createDefaultModel();\n\t\tconst gridModel = this.model;\n\t\tsettings = settings || gridModel.persistence().settings;\n\n\t\tconst model = {};\n\t\tfor (let key in settings) {\n\t\t\tmodel[key] = {};\n\t\t\tconst source = defaultModel[key];\n\t\t\tconst target = gridModel[key];\n\t\t\tfor (const p of settings[key]) {\n\t\t\t\tmodel[key][p] = source()[p];\n\t\t\t}\n\t\t\ttarget(model[key], { source: 'persistence.service' });\n\t\t}\n\n\t\treturn model;\n\t}\n}\n\nclass PluginService {\n\tconstructor(model) {\n\t\tthis.model = model;\n\t}\n\n\tresolve(name) {\n\t\tconst lib = this.model.plugin().imports[name];\n\t\tif (!lib) {\n\t\t\tswitch (name) {\n\t\t\t\tcase 'xlsx': {\n\t\t\t\t\tthrow new GridError('plugin.service', 'To use export plugin for xlsx format please add http://github.com/SheetJS/js-xlsx library to your project');\n\t\t\t\t}\n\t\t\t\tcase 'fileSaver': {\n\t\t\t\t\tthrow new GridError('plugin.service', 'To use export plugin for file saving please add https://github.com/eligrey/FileSaver.js library to your project');\n\t\t\t\t}\n\t\t\t\tcase 'pdf': {\n\t\t\t\t\tthrow new GridError('plugin.service', 'To use export plugin for pdf format please add https://github.com/MrRio/jsPDF and https://github.com/simonbengtsson/jsPDF-AutoTable libraries to your project');\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\tthrow new GridError('import library', `Can't find ${name} library in imports`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn lib;\n\t}\n}\n\nfunction factory(resource, key) {\n\tconst data = resource.data;\n\tconst scope = resource.scope;\n\tif (resource instanceof EnumerableResource) {\n\t\tlet keyIndex = 1;\n\t\tlet count = resource.count;\n\t\tconst originKey = key;\n\t\twhile (data.hasOwnProperty(key)) {\n\t\t\tkey = originKey + keyIndex++;\n\t\t}\n\n\t\tif (count < keyIndex) {\n\t\t\tcount = keyIndex;\n\t\t}\n\n\t\treturn (content, env) => {\n\t\t\t// TODO: do we need full clone here?\n\t\t\tdata[key] = content;\n\t\t\tif (Object.keys(env).length) {\n\t\t\t\tscope[key] = env;\n\t\t\t}\n\t\t\treturn new EnumerableResource(data, scope, count);\n\t\t};\n\t}\n\n\treturn (content, env) => {\n\t\t// TODO: do we need full clone here?\n\t\tdata[key] = content;\n\t\tif (Object.keys(env).length) {\n\t\t\tscope[key] = env;\n\t\t}\n\t\treturn new Resource(data, scope);\n\t};\n}\n\nfunction serializePost(model) {\n\tconst paginationState = model.pagination();\n\tconst sortState = model.sort();\n\tconst filterState = model.filter();\n\n\treturn {\n\t\tfilter: filterState.by,\n\t\torder: sortState.by.map(s => {\n\t\t\tconst key = Object.keys(s)[0];\n\t\t\tconst value = s[key];\n\t\t\treturn (value === 'asc' ? '+' : '-') + key;\n\t\t}),\n\t\tskip: paginationState.current * paginationState.size,\n\t\ttake: paginationState.size\n\t};\n}\n\nclass RowDetailsLet {\n\tconstructor(plugin, shortcut) {\n\t\tconst { model, observeReply, observe, disposable } = plugin;\n\n\t\tthis.plugin = plugin;\n\n\t\tthis.toggleStatus = new Command({\n\t\t\tsource: 'row.details.view',\n\t\t\texecute: row => {\n\t\t\t\tif (!row) {\n\t\t\t\t\trow = selectRow(model.navigation());\n\t\t\t\t}\n\n\t\t\t\tconst { toggle, status, mode } = model.row();\n\t\t\t\tif (toggle.execute({ row }) !== false) {\n\t\t\t\t\tconst newStatus = toggleStatus([row], status, mode);\n\t\t\t\t\tmodel.row({ status: newStatus }, {\n\t\t\t\t\t\tsource: 'row.details.view'\n\t\t\t\t\t});\n\n\t\t\t\t\tobserve(model.sceneChanged)\n\t\t\t\t\t\t.pipe(\n\t\t\t\t\t\t\tfilter$1(e => e.hasChanges('status') && e.state.status === 'stop'),\n\t\t\t\t\t\t\ttakeOnce()\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.subscribe(e => {\n\t\t\t\t\t\t\tconst rowStatus = newStatus.get(row);\n\t\t\t\t\t\t\tif (rowStatus && rowStatus.expand) {\n\t\t\t\t\t\t\t\tconst index = model.view().rows.indexOf(row);\n\t\t\t\t\t\t\t\tmodel.focus({\n\t\t\t\t\t\t\t\t\trowIndex: index + 1\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\tsource: 'row.details.let'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tcanExecute: row => {\n\t\t\t\tif (!row) {\n\t\t\t\t\tconst { cell } = model.navigation();\n\t\t\t\t\tif (cell && cell.column.type === 'row-expand') {\n\t\t\t\t\t\trow = cell.row;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst { toggle } = model.row();\n\t\t\t\treturn !!row && toggle.canExecute({ row });\n\t\t\t},\n\t\t\tshortcut: model.row().shortcut.toggle\n\t\t});\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.tag.source === 'row.details.view') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.hasChanges('rows')) {\n\t\t\t\t\tconst { status, mode } = model.row();\n\t\t\t\t\tconst newStatus =\n\t\t\t\t\t\tinvalidateStatus(\n\t\t\t\t\t\t\tmodel.data().rows,\n\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\tmode\n\t\t\t\t\t\t);\n\n\t\t\t\t\tmodel.row({ status: newStatus }, {\n\t\t\t\t\t\tsource: 'row.details.view'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\tlet canExecuteCheckSub;\n\t\tconst unsubscribeCanExecuteCheck = () => {\n\t\t\tif (canExecuteCheckSub) {\n\t\t\t\tcanExecuteCheckSub.unsubscribe();\n\t\t\t\tcanExecuteCheckSub = null;\n\t\t\t}\n\t\t};\n\n\t\tdisposable.add(\n\t\t\tunsubscribeCanExecuteCheck\n\t\t);\n\n\t\tobserveReply(model.rowChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('toggle')) {\n\t\t\t\t\tconst { toggle } = e.state;\n\t\t\t\t\tunsubscribeCanExecuteCheck();\n\t\t\t\t\tcanExecuteCheckSub = toggle.canExecuteCheck\n\t\t\t\t\t\t.subscribe(() => {\n\t\t\t\t\t\t\tthis.toggleStatus.canExecuteCheck.next();\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\tshortcut.register([this.toggleStatus]);\n\t}\n\n\tstatus(row) {\n\t\tif (row instanceof RowDetails) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { model } = this.plugin;\n\t\tconst { status } = model.row();\n\t\tconst state = status.get(row);\n\t\treturn state && state.expand ? 'expand' : 'collapse';\n\t}\n}\n\nclass RowLet {\n\tconstructor(plugin, tagName) {\n\t\tconst { model, table, observe } = plugin;\n\n\t\tthis.plugin = plugin;\n\t\tthis.tagName = tagName;\n\n\t\tconst pathFinder = new PathService(table.box.bag.body);\n\n\t\tthis.drop = new Command({\n\t\t\tsource: 'row.view',\n\t\t\tcanExecute: e => {\n\t\t\t\tif (e.action === 'end') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tconst row = pathFinder.row(eventPath(e));\n\t\t\t\treturn !!row;\n\t\t\t},\n\t\t\texecute: e => {\n\t\t\t\tconst oldIndex = e.dragData;\n\t\t\t\tswitch (e.action) {\n\t\t\t\t\tcase 'over': {\n\t\t\t\t\t\tconst row = pathFinder.row(eventPath(e));\n\t\t\t\t\t\tif (!e.inAreaY(row.element)) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst newIndex = row.index;\n\t\t\t\t\t\tif (oldIndex !== newIndex) {\n\t\t\t\t\t\t\tconst oldRow = table.body.row(oldIndex);\n\t\t\t\t\t\t\toldRow.removeClass(`${GRID_PREFIX}-drag`);\n\n\t\t\t\t\t\t\tconst newRow = table.body.row(newIndex);\n\t\t\t\t\t\t\tnewRow.addClass(`${GRID_PREFIX}-drag`);\n\n\t\t\t\t\t\t\tconst tr = table.body.row(oldIndex).model();\n\t\t\t\t\t\t\tconst entries = [];\n\t\t\t\t\t\t\tfor (let entry of model.rowList().index.entries()) {\n\t\t\t\t\t\t\t\tconst index = entry[1];\n\t\t\t\t\t\t\t\tif (oldIndex < index && index <= newIndex) {\n\t\t\t\t\t\t\t\t\tentry[1] = index - 1;\n\t\t\t\t\t\t\t\t} else if (oldIndex > index && index >= newIndex) {\n\t\t\t\t\t\t\t\t\tentry[1] = index + 1;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tentries.push(entry);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst index = new Map(entries);\n\t\t\t\t\t\t\tconst { rowId } = model.data();\n\t\t\t\t\t\t\tconst key = rowId(newIndex, tr.model);\n\t\t\t\t\t\t\tindex.set(key, newIndex);\n\t\t\t\t\t\t\tmodel.rowList({ index }, { source: 'row.view' });\n\n\t\t\t\t\t\t\te.dragData = newIndex;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'drop':\n\t\t\t\t\tcase 'end': {\n\t\t\t\t\t\tconst oldRow = table.body.row(oldIndex);\n\t\t\t\t\t\toldRow.removeClass(`${GRID_PREFIX}-drag`);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.drag = new Command({\n\t\t\tsource: 'row.view',\n\t\t\texecute: e => {\n\t\t\t\tconst index = e.data;\n\t\t\t\tconst row = table.body.row(index);\n\t\t\t\trow.addClass(`${GRID_PREFIX}-drag`);\n\t\t\t\tconst tr = row.model();\n\t\t\t\tif (tr) {\n\t\t\t\t\treturn tr.element;\n\t\t\t\t}\n\t\t\t},\n\t\t\tcanExecute: e => {\n\t\t\t\tif (isNumber(e.data)) {\n\t\t\t\t\tconst index = e.data;\n\t\t\t\t\treturn index >= 0 && model.scene().rows.length > index;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\tthis.resize = new Command({\n\t\t\tsource: 'row.view'\n\t\t});\n\n\t\tobserve(model.dataChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('rows')) {\n\t\t\t\t\tmodel.rowList({\n\t\t\t\t\t\tindex: new Map(),\n\t\t\t\t\t}, {\n\t\t\t\t\t\tsource: 'row.view',\n\t\t\t\t\t\tbehavior: 'core'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tget canMove() {\n\t\tconst { model } = this.plugin;\n\t\treturn model.row().canMove;\n\t}\n\n\tget canResize() {\n\t\tconst { model } = this.plugin;\n\t\treturn model.row().canResize;\n\t}\n}\n\nclass ScrollLet {\n\tconstructor(plugin, vscroll) {\n\t\tconst { model, observeReply, service } = plugin;\n\t\tconst { scroll, row, pagination, fetch, pipe } = model;\n\n\t\tthis.plugin = plugin;\n\t\n\t\tconst rowHeight = row().height;\n\t\tconst settings = {\n\t\t\tthreshold: pagination().size,\n\t\t\tresetTriggers: []\n\t\t};\n\n\t\tif (rowHeight > 0 || isFunction(rowHeight)) {\n\t\t\tsettings.rowHeight = rowHeight;\n\t\t}\n\n\t\tthis.y = vscroll.factory(settings);\n\t\tthis.y.container.read = Fastdom.measure;\n\t\tthis.y.container.write = Fastdom.mutate;\n\n\t\tconst subscribe =\n\t\t\t(this.y.container.draw$.on || this.y.container.draw$.subscribe)\n\t\t\t\t.bind(this.y.container.draw$);\n\n\t\tconst updateCurrentPage = position => {\n\t\t\tconst { size, current, count } = pagination();\n\t\t\tconst newCurrent = size === 0\n\t\t\t\t? 0\n\t\t\t\t: count - 1 <= position + size\n\t\t\t\t\t? Math.ceil(count / size) - 1\n\t\t\t\t\t: Math.floor((position + size / 2) / size);\n\n\t\t\tif (newCurrent !== current) {\n\t\t\t\tpagination({ current: newCurrent }, {\n\t\t\t\t\tsource: 'scroll.view',\n\t\t\t\t\tbehavior: 'core'\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tconst updateTotalCount = () => {\n\t\t\tconst { effect } = pipe();\n\t\t\tif (effect.hasOwnProperty('memo')) {\n\t\t\t\tconst count = effect.memo.length;\n\t\t\t\tpagination({ count }, {\n\t\t\t\t\tsource: 'scroll.view',\n\t\t\t\t\tbehavior: 'core'\n\t\t\t\t});\n\n\t\t\t\treturn count;\n\t\t\t}\n\n\t\t\treturn pagination().count;\n\t\t};\n\n\t\tsubscribe(e => {\n\t\t\tconst { position } = e;\n\t\t\tupdateCurrentPage(position);\n\n\t\t\tscroll({ cursor: position }, {\n\t\t\t\tsource: 'scroll.view',\n\t\t\t\tbehavior: 'core'\n\t\t\t});\n\t\t});\n\n\t\tswitch (scroll().mode) {\n\t\t\tcase 'virtual': {\n\t\t\t\tthis.y.settings.fetch = (skip, take, d) => {\n\t\t\t\t\tfetch({ skip }, {\n\t\t\t\t\t\tsource: 'scroll.view',\n\t\t\t\t\t\tbehavior: 'core'\n\t\t\t\t\t});\n\n\t\t\t\t\tif (skip === 0) {\n\t\t\t\t\t\tconst count = updateTotalCount();\n\t\t\t\t\t\td.resolve(count);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tservice.invalidate({\n\t\t\t\t\t\t\tsource: 'scroll.view',\n\t\t\t\t\t\t\twhy: 'refresh'\n\t\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\t\tconst count = updateTotalCount();\n\t\t\t\t\t\t\td.resolve(count);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tlet startSource;\n\t\t\t\tconst resetTriggers = new Set(scroll().resetTriggers);\n\n\t\t\t\tobserveReply(model.sceneChanged)\n\t\t\t\t\t.subscribe(e => {\n\t\t\t\t\t\tif (e.hasChanges('status')) {\n\t\t\t\t\t\t\tconst { status } = e.state;\n\t\t\t\t\t\t\tswitch (status) {\n\t\t\t\t\t\t\t\tcase 'start': {\n\t\t\t\t\t\t\t\t\tstartSource = e.tag.source;\n\t\t\t\t\t\t\t\t\tif (resetTriggers.has(startSource)) {\n\t\t\t\t\t\t\t\t\t\tfetch({ skip: 0 }, {\n\t\t\t\t\t\t\t\t\t\t\tsource: 'scroll.view',\n\t\t\t\t\t\t\t\t\t\t\tbehavior: 'core'\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcase 'stop': {\n\t\t\t\t\t\t\t\t\tif (resetTriggers.has(startSource)) {\n\t\t\t\t\t\t\t\t\t\tthis.y.container.reset();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tobserveReply(model.paginationChanged)\n\t\t\t\t\t.subscribe(e => {\n\t\t\t\t\t\tif (e.tag.behavior !== 'core') {\n\t\t\t\t\t\t\tthis.y.container.reset();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tobserveReply(model.scrollChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.tag.source === 'scroll.view') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.hasChanges('mode')) {\n\t\t\t\t\tswitch (e.state.mode) {\n\t\t\t\t\t\tcase 'virtual': {\n\t\t\t\t\t\t\tscroll({\n\t\t\t\t\t\t\t\tmap: {\n\t\t\t\t\t\t\t\t\trowToView: index => index - this.y.container.position,\n\t\t\t\t\t\t\t\t\tviewToRow: index => index + this.y.container.position\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tsource: 'scroll.view',\n\t\t\t\t\t\t\t\tbehavior: 'core'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'default': {\n\t\t\t\t\t\t\tscroll({\n\t\t\t\t\t\t\t\tmap: {\n\t\t\t\t\t\t\t\t\trowToView: identity,\n\t\t\t\t\t\t\t\t\tviewToRow: identity\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (e.hasChanges('left') || e.hasChanges('top')) {\n\t\t\t\t\tthis.invalidate();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tinvalidate() {\n\t\tLog.info('layout', 'invalidate scroll');\n\n\t\tconst { model, table } = this.plugin;\n\t\tconst { view } = table;\n\t\tconst { left, top } = model.scroll();\n\n\t\tFastdom.mutate(() => {\n\t\t\tview.scrollLeft(left);\n\t\t\tview.scrollTop(top);\n\t\t});\n\t}\n\n\tget mode() {\n\t\treturn this.plugin.model.scroll().mode;\n\t}\n}\n\nclass SelectionCommandManager extends CompositeCommandManager {\n\tconstructor(model, manager) {\n\t\tsuper(manager);\n\n\t\tthis.model = model;\n\t}\n\n\tfilter(commands) {\n\t\tif (this.model.edit().status === 'edit') {\n\t\t\tconst { cell } = this.model.navigation();\n\t\t\tif (cell && cell.column.type !== 'select') {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\n\t\treturn super.filter(commands);\n\t}\n}\n\nclass SelectionRange {\n\tconstructor(model) {\n\t\tthis.model = model;\n\t}\n\n\tbuild() {\n\t\tconst rangeMap = {\n\t\t\t'row': this.buildRows.bind(this),\n\t\t\t'column': this.buildColumns.bind(this),\n\t\t\t'cell': this.buildCells.bind(this),\n\t\t\t'mix': this.buildMix.bind(this)\n\t\t};\n\n\t\tconst model = this.model;\n\t\treturn (...args) => {\n\t\t\tconst selection = model.selection();\n\t\t\tconst buildRange = rangeMap[selection.unit];\n\t\t\tif (!buildRange) {\n\t\t\t\tthrow new GridError('range.builder', `Invalid unit ${selection.unit}`);\n\t\t\t}\n\n\t\t\treturn buildRange(...args);\n\t\t};\n\t}\n\n\tbuildRows(startCell, endCell) {\n\t\tconst model = this.model;\n\t\tconst { rows } = model.scene();\n\t\tif (!endCell) {\n\t\t\treturn [rows[startCell.rowIndex]];\n\t\t}\n\n\t\tconst startIndex = Math.min(startCell.rowIndex, endCell.rowIndex);\n\t\tconst endIndex = Math.max(startCell.rowIndex, endCell.rowIndex);\n\t\treturn rows.slice(startIndex, endIndex + 1);\n\t}\n\n\tbuildColumns(startCell, endCell) {\n\t\tif (!endCell) {\n\t\t\treturn [startCell.column];\n\t\t}\n\n\t\tconst columns = this.model.columnList().line;\n\t\tconst startIndex = Math.min(startCell.columnIndex, endCell.columnIndex);\n\t\tconst endIndex = Math.max(startCell.columnIndex, endCell.columnIndex);\n\t\treturn columns.slice(startIndex, endIndex + 1);\n\t}\n\n\tbuildCells(startCell, endCell) {\n\t\tif (!endCell) {\n\t\t\treturn [{\n\t\t\t\tcolumn: startCell.column,\n\t\t\t\trow: startCell.row\n\t\t\t}];\n\t\t}\n\n\t\tconst model = this.model;\n\t\tconst { rows } = model.scene();\n\t\tconst { columns } = model.view();\n\n\t\tconst startRowIndex = Math.min(startCell.rowIndex, endCell.rowIndex);\n\t\tconst endRowIndex = Math.max(startCell.rowIndex, endCell.rowIndex);\n\n\t\tconst startColumnIndex = Math.min(startCell.columnIndex, endCell.columnIndex);\n\t\tconst endColumnIndex = Math.max(startCell.columnIndex, endCell.columnIndex);\n\n\t\tconst selectedRows = rows.slice(startRowIndex, endRowIndex + 1);\n\t\tconst selectedColumns = columns.slice(startColumnIndex, endColumnIndex + 1);\n\n\t\tconst items = [];\n\t\tselectedRows.forEach(row => {\n\t\t\tselectedColumns\n\t\t\t\t.filter(column => column.category === 'data')\n\t\t\t\t.forEach(column => {\n\t\t\t\t\titems.push({\n\t\t\t\t\t\tcolumn: column,\n\t\t\t\t\t\trow: row\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t});\n\n\t\treturn items;\n\t}\n\n\tbuildMix(startCell, endCell) {\n\t\tconst mixUnit = startCell.column.type === 'row-indicator' ? 'row' : 'cell';\n\t\tconst range = (mixUnit === 'row' ? this.buildRows(startCell, endCell) : this.buildCells(startCell, endCell));\n\t\treturn range\n\t\t\t.map(item => ({\n\t\t\t\titem: item,\n\t\t\t\tunit: mixUnit\n\t\t\t}));\n\t}\n}\n\nclass SubSelectionState {\n\tconstructor(model, service) {\n\t\tthis.model = model;\n\t\tthis.service = service;\n\t}\n\n\tselect(item, state = true, key) {\n\t\tkey = key || this.keyFactory();\n\t\tif (isArray$1(item)) {\n\t\t\titem.forEach(item => this.select(item, state, key));\n\t\t\treturn;\n\t\t}\n\n\t\tif (item instanceof Node) {\n\t\t\tconst { rows } = this.model.data();\n\t\t\tif (rows.length) {\n\t\t\t\titem.rows.forEach(index => this.select(rows[index], state, key));\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.selectCore(item, state, key);\n\t}\n\n\tcanSelect(item) {\n\t\treturn this.canSelectCore(item);\n\t}\n\n\ttoggle(item) {\n\t\tconst state = this.state(item);\n\t\treturn this.select(item, state === null || !state);\n\t}\n\n\tstate(item, key) {\n\t\tkey = key || this.keyFactory();\n\t\tif (isArray$1(item)) {\n\t\t\tconst all = item.every(item => this.state(item, key));\n\t\t\treturn all ? true : item.some(item => this.state(item, key)) ? null : false;\n\t\t}\n\n\t\tif (item instanceof Node) {\n\t\t\tconst { rows } = this.model.data();\n\t\t\tif (rows.length) {\n\t\t\t\tconst all = item.rows.length && item.rows.every(index => this.state(rows[index], key));\n\t\t\t\treturn all ? true : item.rows.some(index => this.state(rows[index], key)) ? null : false;\n\t\t\t}\n\t\t}\n\n\t\treturn this.stateCore(item, key);\n\t}\n\n\tstateAll(items) {\n\t\tif (!items.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst key = this.keyFactory();\n\n\t\tconst notSelected = items.findIndex(item => this.state(item, key) === false);\n\t\tif (notSelected < 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn notSelected === 0\n\t\t\t? items.every(item => this.state(item, key) === false)\n\t\t\t\t? false\n\t\t\t\t: null\n\t\t\t: null;\n\t}\n\n\tkeyFactory() {\n\t\treturn this.service.hashFactory();\n\t}\n\n\tclear() {\n\t\tthis.clearCore();\n\t}\n\n\tentries() {\n\t\treturn [];\n\t}\n\n\tselectCore() {\n\t}\n\n\tclearCore() {\n\t}\n\n\tstateCore() {\n\t\treturn false;\n\t}\n\n\tcanSelectCore() {\n\t\treturn true;\n\t}\n}\n\nclass SingleSelectionState extends SubSelectionState {\n\tconstructor(model, service) {\n\t\tsuper(model, service);\n\n\t\tthis.item = null;\n\t}\n\n\tentries() {\n\t\treturn this.item ? [this.item] : [];\n\t}\n\n\tselectCore(item, state) {\n\t\tif (state) {\n\t\t\tthis.item = item;\n\t\t}\n\t\telse {\n\t\t\tthis.item = null;\n\t\t}\n\t}\n\n\tstateCore(item, key) {\n\t\treturn this.item !== null && key(item) === key(this.item);\n\t}\n\n\tclearCore() {\n\t\tthis.item = null;\n\t}\n}\n\nclass SingleOnlySelectionState extends SubSelectionState {\n\tconstructor(model, service) {\n\t\tsuper(model, service);\n\n\t\tthis.item = null;\n\t}\n\n\tentries() {\n\t\treturn this.item ? [this.item] : [];\n\t}\n\n\tselectCore(item, state) {\n\t\tif (state) {\n\t\t\tthis.item = item;\n\t\t}\n\t}\n\n\tcanSelectCore(item) {\n\t\treturn item !== this.item;\n\t}\n\n\tstateCore(item, key) {\n\t\treturn this.item !== null && key(item) === key(this.item);\n\t}\n\n\tclearCore() {\n\t\tthis.item = null;\n\t}\n}\n\nclass MultipleSelectionState extends SubSelectionState {\n\tconstructor(model, service) {\n\t\tsuper(model, service);\n\n\t\tthis.items = new Map();\n\t}\n\n\tentries() {\n\t\treturn Array.from(this.items.values());\n\t}\n\n\tselectCore(item, state, key) {\n\t\tif (state) {\n\t\t\tthis.items.set(key(item), item);\n\t\t}\n\t\telse {\n\t\t\tthis.items.delete(key(item));\n\t\t}\n\t}\n\n\tstateCore(item, key) {\n\t\treturn this.items.has(key(item));\n\t}\n\n\tclearCore() {\n\t\tthis.items = new Map();\n\t}\n}\n\nclass RangeSelectionState extends MultipleSelectionState {\n\tconstructor(model, service) {\n\t\tsuper(model, service);\n\t}\n\n\tselect(item, state = true) {\n\t\tif (isArray$1(item)) {\n\t\t\tthis.clear();\n\t\t}\n\n\t\tsuper.select(item, state);\n\t}\n}\n\nfunction selectionStateFactory(model, service) {\n\tconst mode = model.selection().mode;\n\n\tswitch (mode) {\n\t\tcase 'single':\n\t\t\treturn new SingleSelectionState(model, service);\n\t\tcase 'singleOnly':\n\t\t\treturn new SingleOnlySelectionState(model, service);\n\t\tcase 'multiple':\n\t\t\treturn new MultipleSelectionState(model, service);\n\t\tcase 'range':\n\t\t\treturn new RangeSelectionState(model, service);\n\t\tdefault:\n\t\t\tthrow new GridError('selection.state.factory', `Invalid selection mode \"${mode}\"`);\n\t}\n}\n\nclass SelectionLet {\n  constructor(plugin, shortcut) {\n    const { model, table, observeReply } = plugin;\n\n    this.plugin = plugin;\n    this.selectionService = new SelectionService(model);\n    this.form = selectionStateFactory(model, this.selectionService);\n    this.selectionRange = new SelectionRange(model);\n\n    const commands = this.getCommands();\n    shortcut.register(commands);\n\n    this.toggleRow = commands.get('toggleRow');\n    this.toggleColumn = commands.get('toggleColumn');\n    this.toggleCell = commands.get('toggleCell');\n    this.reset = commands.get('reset');\n    this.stateCheck = new SubjectLike();\n\n    observeReply(model.navigationChanged)\n      .subscribe(e => {\n        if (e.tag.source === 'selection.view') {\n          return;\n        }\n\n        if (e.hasChanges('cell')) {\n          if (this.toggleCell.canExecute(e.state.cell)) {\n            this.toggleCell.execute(e.state.cell);\n          }\n        }\n      });\n\n    const modeClass = `${GRID_PREFIX}-select-${model.selection().mode}`;\n    const unitClass = `${GRID_PREFIX}-select-${model.selection().unit}`;\n\n    const { view } = table;\n    view.addClass(modeClass);\n    view.addClass(unitClass);\n\n    observeReply(model.selectionChanged)\n      .subscribe(e => {\n        if (e.hasChanges('mode')) {\n          const newModeClass = `${GRID_PREFIX}-select-${e.state.mode}`;\n          const oldModeClass = `${GRID_PREFIX}-select-${e.changes.mode.oldValue}`;\n\n          view.removeClass(oldModeClass);\n          view.addClass(newModeClass);\n        }\n\n        if (e.hasChanges('unit')) {\n          const newUnitClass = `${GRID_PREFIX}-select-${e.state.unit}`;\n          const oldUnitClass = `${GRID_PREFIX}-select-${e.changes.unit.oldValue}`;\n\n          view.removeClass(oldUnitClass);\n          view.addClass(newUnitClass);\n        }\n\n        if (e.hasChanges('unit') || e.hasChanges('mode')) {\n          if (!e.hasChanges('items')) {\n            this.form.clear();\n            if (model.selection().items.length) {\n              model.selection({ items: [] }, {\n                source: 'selection.view'\n              });\n            }\n\n            this.form = selectionStateFactory(model, this.selectionService);\n          }\n        }\n\n        if (e.hasChanges('items')) {\n          if (e.tag.source !== 'selection.view') {\n            // Don't use commit it came outside already\n\n            const oldEntries = this.selectionService.lookup(e.changes.items.oldValue);\n            this.select(oldEntries, false);\n\n            const newEntries = this.selectionService.lookup(e.state.items);\n            this.select(newEntries, true);\n          }\n          \n          this.stateCheck.next(e.state.items);\n        }\n      });\n\n    observeReply(model.dataChanged)\n      .subscribe(e => {\n        const { unit, items } = model.selection();\n\n        const needUpdateAfterRowsChanged = e.hasChanges('rows') && (unit === 'row' || unit === 'mix' || unit === 'cell');\n        const needUpdateAfterColumnsChanged = e.hasChanges('columns') && (unit === 'column' || unit === 'mix' || unit === 'cell');\n\n        if (needUpdateAfterRowsChanged || needUpdateAfterColumnsChanged) {\n          // re-invalidate selection\n          this.form.clear();\n          const entries = this.selectionService.lookup(items);\n          this.select(entries, true);\n        }\n      });\n  }\n\n  getCommands() {\n    const { model, table } = this.plugin;\n    const { shortcut } = model.selection();\n\n    const toggleActiveRow = new Command({\n      source: 'selection.view',\n      canExecute: () => {\n        const rowIndex = selectRowIndex(model.navigation());\n        const row = this.rows[rowIndex >= 0 ? rowIndex : rowIndex + 1];\n\n        if (!this.form.canSelect(row)) {\n          return false;\n        }\n\n        return model.selection().unit === 'row' && this.rows.length > 0;\n      },\n      execute: () => {\n        const rowIndex = selectRowIndex(model.navigation());\n        const row = this.rows[rowIndex >= 0 ? rowIndex : rowIndex + 1];\n        const commit = this.toggle(row);\n        commit();\n      },\n      shortcut: shortcut.toggleRow\n    });\n\n    const commands = {\n      toggleCell: new Command({\n        source: 'selection.view',\n        canExecute: item => {\n          const selectionState = model.selection();\n          return item && selectionState.mode !== 'range' && (selectionState.unit === 'cell' || selectionState.unit === 'mix');\n        },\n        execute: (item, source) => {\n          const selectionState = model.selection();\n          switch (selectionState.unit) {\n            case 'cell': {\n              const commit = this.toggle(item, source);\n              commit();\n              break;\n            }\n            case 'mix': {\n              if (item.column.type === 'row-indicator') {\n                const commit = this.toggle({ item: item.row, unit: 'row' }, source);\n                commit();\n                break;\n              }\n              else {\n                const commit = this.toggle({ item: item, unit: 'cell' }, source);\n                commit();\n                break;\n              }\n            }\n          }\n        }\n      }),\n      toggleRow: new Command({\n        source: 'selection.view',\n        execute: (item, source) => {\n          const commit = this.toggle(item, source);\n          commit();\n        },\n        canExecute: row => {\n          if (!this.form.canSelect(row)) {\n            return false;\n          }\n\n          const e = {\n            items: isUndefined(row)\n              ? model.scene().rows\n              : [row],\n            source: 'custom',\n            kind: 'toggleRow'\n          };\n\n          if (!row) {\n            return model.selection().toggle.canExecute(e) && this.mode === 'multiple';\n          }\n\n          return model.selection().toggle.canExecute(e);\n        }\n      }),\n      toggleColumn: new Command({\n        source: 'selection.view',\n        execute: (item, source) => {\n          const commit = this.toggle(item, source);\n          commit();\n        }\n      }),\n      commitRow: new Command({\n        source: 'selection.view',\n        canExecute: () => {\n          const column = selectColumn(model.navigation());\n          return column && column.type === 'select';\n        },\n        execute: () => {\n          if (toggleActiveRow.canExecute()) {\n            toggleActiveRow.execute();\n          }\n        },\n        shortcut: model.edit().commitShortcuts['select'] || ''\n      }),\n      toggleActiveRow: toggleActiveRow,\n      togglePrevRow: new Command({\n        source: 'selection.view',\n        canExecute: () => model.selection().unit === 'row' && selectRowIndex(model.navigation()) > 0,\n        execute: () => {\n          const rowIndex = selectRowIndex(model.navigation());\n          const columnIndex = selectColumnIndex(model.navigation());\n\n          const row = this.rows[rowIndex];\n          const commit = this.toggle(row);\n          commit();\n\n          this.navigateTo(rowIndex - 1, columnIndex);\n        },\n        shortcut: shortcut.togglePreviousRow\n      }),\n      toggleNextRow: new Command({\n        source: 'selection.view',\n        canExecute: () => model.selection().unit === 'row' && selectRowIndex(model.navigation()) < this.rows.length - 1,\n        execute: () => {\n          const rowIndex = selectRowIndex(model.navigation());\n          const columnIndex = selectColumnIndex(model.navigation());\n\n          const row = this.rows[rowIndex];\n          const commit = this.toggle(row);\n          commit();\n\n          this.navigateTo(rowIndex + 1, columnIndex);\n        },\n        shortcut: shortcut.toggleNextRow\n      }),\n      toggleActiveColumn: new Command({\n        source: 'selection.view',\n        canExecute: () => model.selection().unit === 'column' && selectColumnIndex(model.navigation()) >= 0,\n        execute: () => {\n          const columnIndex = selectColumnIndex(model.navigation());\n\n          const column = this.columns[columnIndex];\n          const commit = this.toggle(column);\n          commit();\n        },\n        shortcut: shortcut.toggleColumn\n      }),\n      toggleNextColumn: new Command({\n        source: 'selection.view',\n        canExecute: () => model.selection().unit === 'column' && selectColumnIndex(model.navigation()) < this.columns.length - 1,\n        execute: () => {\n          const rowIndex = selectRowIndex(model.navigation());\n          const columnIndex = selectColumnIndex(model.navigation());\n\n          const column = this.columns[columnIndex];\n          const commit = this.toggle(column);\n          commit();\n\n          this.navigateTo(rowIndex, columnIndex + 1);\n        },\n        shortcut: shortcut.toggleNextColumn\n      }),\n      togglePrevColumn: new Command({\n        source: 'selection.view',\n        canExecute: () => model.selection().unit === 'column' && selectColumnIndex(model.navigation()) > 0,\n        execute: () => {\n          const rowIndex = selectRowIndex(model.navigation());\n          const columnIndex = selectColumnIndex(model.navigation());\n\n          const column = this.columns[columnIndex];\n          const commit = this.toggle(column);\n          commit();\n\n          this.navigateTo(rowIndex, columnIndex - 1);\n        },\n        shortcut: shortcut.togglePreviousColumn\n      }),\n      selectAll: new Command({\n        source: 'selection.view',\n        canExecute: () => {\n          const { mode } = model.selection();\n          return mode === 'multiple' || mode === 'range';\n        },\n        execute: () => {\n          let entries = [];\n          switch (model.selection().unit) {\n            case 'row': {\n              entries = this.rows;\n              break;\n            }\n            case 'column': {\n              entries = model.columnList().line;\n              break;\n            }\n            case 'cell':\n            case 'mix': {\n              const { body } = table;\n\n              const buildRange = this.selectionRange.build();\n              const startCell = body.cell(0, 0);\n              const endCell = body.cell(this.rows.length, this.columns.length);\n\n              entries = buildRange(startCell, endCell);\n              break;\n            }\n            default: {\n              throw new GridError('selection.view', `Invalid unit ${model.selection().unit}`);\n            }\n          }\n\n          const commit = this.select(entries, true);\n          commit();\n        },\n        shortcut: shortcut.selectAll\n      })\n    };\n\n    return new Map(\n      Object.entries(commands)\n    );\n  }\n\n  selectRange(startCell, endCell, source) {\n    const buildRange = this.selectionRange.build();\n    const range = buildRange(startCell, endCell);\n    const commit = this.select(range, true, source);\n    commit();\n  }\n\n  toggle(items, source = 'custom') {\n    const { model } = this.plugin;\n    const { toggle } = model.selection();\n\n    items = !arguments.length || isUndefined(items)\n      ? this.rows\n      : isArray$1(items)\n        ? items : [items];\n\n    const e = { items, source, kind: 'toggle' };\n    if (toggle.canExecute(e)) {\n      toggle.execute(e);\n\n      const { form } = this;\n      form.toggle(items);\n\n      return () => {\n        model.selection({\n          items: this.selectionService.map(form.entries())\n        }, {\n          source: 'selection.view'\n        });\n      };\n    }\n\n    return noop;\n  }\n\n  select(items, state, source = 'custom') {\n    const { model } = this.plugin;\n    const { toggle } = model.selection();\n    const e = {\n      items,\n      source,\n      kind: 'select'\n    };\n\n    if (toggle.canExecute(e)) {\n      toggle.execute(e);\n\n      this.form.select(items, state);\n\n      return () => {\n        const items = this.selectionService.map(this.form.entries());\n        model.selection({ items }, {\n          source: 'selection.view'\n        });\n      };\n    } else {\n      return noop;\n    }\n  }\n\n  state(item) {\n    if (!arguments.length) {\n      return !!this.form.stateAll(this.rows);\n    }\n\n    return this.form.state(item) === true;\n  }\n\n  isIndeterminate(item) {\n    if (!arguments.length) {\n      return this.form.stateAll(this.rows) === null;\n    }\n\n    return this.form.state(item) === null;\n  }\n\n  get selection() {\n    return this.plugin.model.selection();\n  }\n\n  get mode() {\n    return this.selection.mode;\n  }\n\n  get items() {\n    return this.selection.items;\n  }\n\n  get rows() {\n    const { table } = this.plugin;\n    return table.data.rows();\n  }\n\n  get columns() {\n    const { table } = this.plugin;\n    return table.data.columns();\n  }\n\n  navigateTo(rowIndex, columnIndex) {\n    const { table, model } = this.plugin;\n    const { row, column } = table.body.cell(rowIndex, columnIndex).model();\n    model.navigation({\n      cell: {\n        rowIndex,\n        columnIndex,\n        row,\n        column\n      }\n    }, { source: 'selection.view' });\n  }\n}\n\nfunction stringifyFactory(property) {\n\tswitch (property) {\n\t\tcase 'filter':\n\t\t\treturn filter;\n\t\tcase 'sort':\n\t\t\treturn sort;\n\t\tcase 'group':\n\t\tcase 'pivot':\n\t\t\treturn transformBy(property);\n\t\tdefault:\n\t\t\treturn () => '';\n\t}\n}\n\nfunction filter(model) {\n\tconst values = Object.values(model.by)\n\t\t.map(column => column.items);\n\n\tif (values.length === 0) return '';\n\n\tconst by = flatten(values).join(', ');\n\treturn `filter ${by}`;\n}\n\nfunction sort(model) {\n\tconst keys = [];\n\tfor (let item of model.by) {\n\t\tfor (let key in item) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\n\tif (keys.length === 0) return '';\n\n\tconst by = keys.join(', ');\n\treturn `sort ${by}`;\n}\n\nfunction transformBy(property) {\n\treturn model => {\n\t\tconst keys = model.by;\n\t\tif (keys.length === 0) return '';\n\n\t\tconst by = keys.join(', ');\n\t\treturn `${property} ${by}`;\n\t};\n}\n\nfunction key(pair) {\n\tconst key = Object.keys(pair)[0];\n\tif (!key) {\n\t\tthrow new GridError(\n\t\t\t'pair',\n\t\t\t`Key is not defined in \"${pair}\"`);\n\t}\n\n\treturn key;\n}\n\nfunction index(pairs, pairKey) {\n\treturn pairs.map(key).findIndex(k => k === pairKey);\n}\n\nfunction value(pair) {\n\tconst pairKey = key(pair);\n\treturn pair[pairKey];\n}\n\nfunction map(pairs) {\n\treturn pairs.reduce((memo, pair) => {\n\t\tconst pairKey = key(pair);\n\t\tmemo[pairKey] = pair[pairKey];\n\t\treturn memo;\n\t}, {});\n}\n\nfunction predicateFactory(search) {\n\tif (isObject(search)) {\n\t\t// TODO: improve performance\n\t\tconst getters = Object\n\t\t\t.keys(search)\n\t\t\t.map(key => {\n\t\t\t\tconst value = compileGet(key);\n\t\t\t\treturn { key, value };\n\t\t\t});\n\n\t\tconst { length } = getters;\n\t\tswitch (length) {\n\t\t\tcase 0: {\n\t\t\t\treturn yes;\n\t\t\t}\n\t\t\tcase 1: {\n\t\t\t\tconst get = getters[0];\n\t\t\t\tconst pattern = search[get.key];\n\t\t\t\tif (!pattern) {\n\t\t\t\t\treturn yes;\n\t\t\t\t}\n\n\t\t\t\tconst expr = new RegExp(pattern, 'gi');\n\t\t\t\treturn item => expr.test(get.value(item));\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn item =>\n\t\t\t\t\tgetters.reduce((memo, get) =>\n\t\t\t\t\t\t(memo && new RegExp(search[get.key], 'gi').test(get.value(item)) || search[get.key] === ''),\n\t\t\t\t\t\ttrue);\n\n\t\t\t}\n\t\t}\n\t}\n\n\tconst pattern = escapeRegexp(search);\n\tconst expr = new RegExp(pattern, 'gi');\n\treturn item => {\n\t\texpr.lastIndex = 0;\n\t\treturn expr.test(item);\n\t}\n}\n\nfunction firstRowTitle(index, row) {\n\treturn row[index];\n}\nfunction numericTitle(index) {\n\treturn index;\n}\nfunction alphaTitle(index) {\n\tconst alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\n\tif (index < alphabet.length) {\n\t\treturn alphabet[index];\n\t} else {\n\t\tconst indexFirst = Math.floor(index / alphabet.length - 1);\n\t\tconst indexSecond = index % alphabet.length;\n\t\treturn `${alphabet[indexFirst]}${alphabet[indexSecond]}`;\n\t}\n}\n\nfunction upload(element) {\n\tconst { ownerDocument } = element;\n\tconst input = ownerDocument.createElement('input');\n\tinput.type = 'file';\n\tinput.style.display = 'none';\n\t\n\telement.appendChild(input);\n\tinput.click();\n}\n\nclass SortLet {\n\tconstructor(plugin) {\n\t\tconst { model } = plugin;\n\t\tthis.plugin = plugin;\n\n\t\tthis.hover = false;\n\t\tthis.toggle = new Command({\n\t\t\tsource: 'sort.view',\n\t\t\tcanExecute: column => {\n\t\t\t\tconst key = column.key;\n\t\t\t\tconst map = mapColumns(model.columnList().line);\n\t\t\t\treturn map.hasOwnProperty(key) && map[key].canSort !== false;\n\t\t\t},\n\t\t\texecute: column => {\n\t\t\t\tconst key = column.key;\n\t\t\t\tconst sort = model.sort;\n\t\t\t\tconst sortState = sort();\n\t\t\t\tlet by = Array.from(sortState.by);\n\n\t\t\t\tif (sortState.mode === 'mixed') {\n\t\t\t\t\tconst { code, status } = model.keyboard();\n\t\t\t\t\tconst isSingleMode = code !== 'shift' || status !== 'down';\n\t\t\t\t\t// if shift key is not pressed - reset sort for other columns and do sort like single mode\n\t\t\t\t\tif (isSingleMode) {\n\t\t\t\t\t\tconst index = getIndex(by, key);\n\t\t\t\t\t\tby = index >= 0 ? by.filter((_, i) => i === index) : [];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst index = getIndex(by, key);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tconst dir = getDirection(by[index]);\n\t\t\t\t\tswitch (dir) {\n\t\t\t\t\t\tcase 'desc': {\n\t\t\t\t\t\t\tby.splice(index, 1);\n\t\t\t\t\t\t\tthis.hover = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'asc': {\n\t\t\t\t\t\t\tconst entry = { [key]: 'desc' };\n\t\t\t\t\t\t\tby[index] = entry;\n\t\t\t\t\t\t\tthis.hover = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tthrow GridError(\n\t\t\t\t\t\t\t\t'head.core',\n\t\t\t\t\t\t\t\t`Invalid sort direction ${dir}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (sortState.mode === 'single') {\n\t\t\t\t\t\tby.length = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst entry = { [key]: 'asc' };\n\t\t\t\t\tby.push(entry);\n\n\t\t\t\t\tconst order = orderFactory(model);\n\t\t\t\t\torder(by);\n\t\t\t\t}\n\n\t\t\t\tsort({ by }, { source: 'sort.view' });\n\t\t\t}\n\t\t});\n\n\t\tthis.onInit();\n\t}\n\n\tonInit() {\n\t\tconst { model, observeReply } = this.plugin;\n\t\tconst { sort } = model;\n\n\t\tobserveReply(model.columnListChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('index')) {\n\t\t\t\t\tconst sortState = sort();\n\t\t\t\t\tconst order = orderFactory(model);\n\t\t\t\t\tconst sortBy = order(Array.from(sortState.by));\n\t\t\t\t\tif (!this.equals(sortBy, sortState.by)) {\n\t\t\t\t\t\tsort({ by: sortBy }, { source: 'sort.view' });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.dataChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('columns')) {\n\t\t\t\t\tconst { by } = sort();\n\t\t\t\t\tconst columnMap = mapColumns(e.state.columns);\n\t\t\t\t\tconst newBy = by.filter(entry => columnMap.hasOwnProperty(getKey(entry)));\n\t\t\t\t\tif (!this.equals(newBy, by)) {\n\t\t\t\t\t\tsort({ by: newBy }, { source: 'sort.view' });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tequals(x, y) {\n\t\treturn JSON.stringify(x) === JSON.stringify(y);\n\t}\n\n\tdirection(column) {\n\t\tconst { key } = column;\n\t\tconst { by } = this.plugin.model.sort();\n\t\treturn getMap(by)[key];\n\t}\n\n\torder(column) {\n\t\tconst { key } = column;\n\t\tconst { model } = this.plugin;\n\t\tconst { by } = model.sort();\n\t\treturn getIndex(by, key);\n\t}\n}\n\nclass StyleEntry {\n\tconstructor(element, sheets, markDirty) {\n\t\tthis.element = element;\n\t\tthis.list = new Set();\n\t\tthis.sheets = sheets;\n\t\tthis.markDirty = markDirty;\n\t}\n\n\tclass(key, style) {\n\t\tkey = escape$2(key);\n\t\tthis.list.add(key);\n\t\tthis.markDirty(this);\n\t\tif (style) {\n\t\t\tconst sheets = this.sheets;\n\t\t\tif (!sheets.has(key)) {\n\t\t\t\tsheets.set(key, style);\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass StyleMonitor {\n\tconstructor(model) {\n\t\tthis.model = model;\n\t\tthis.entries = new Set();\n\t\tthis.newSheets = new Map();\n\t\tthis.oldSheets = new Map();\n\t}\n\n\tenter() {\n\t\tconst newSheets = this.newSheets;\n\t\tlet entries = this.entries;\n\t\tfor (let entry of entries) {\n\t\t\tfor (let cls of entry.list) {\n\t\t\t\tentry.element.removeClass(cls, true);\n\t\t\t}\n\t\t}\n\n\t\tentries = this.entries = new Set();\n\t\tconst markDirty = entry => entries.add(entry);\n\n\t\treturn element => {\n\t\t\tconst entry = new StyleEntry(element, newSheets, markDirty);\n\t\t\treturn entry.class.bind(entry);\n\t\t};\n\t}\n\n\texit() {\n\t\tconst entries = this.entries;\n\t\tfor (let entry of entries) {\n\t\t\tfor (let cls of entry.list) {\n\t\t\t\tentry.element.addClass(cls, true);\n\t\t\t}\n\t\t}\n\n\t\tconst newSheets = this.newSheets;\n\t\tconst oldSheets = this.oldSheets;\n\t\tconst id = this.model.grid().id;\n\t\tfor (let cls of oldSheets.keys()) {\n\t\t\tif (!newSheets.has(cls)) {\n\t\t\t\tconst sheet$1 = sheet(id, cls);\n\t\t\t\tsheet$1.remove();\n\t\t\t}\n\t\t}\n\n\t\tfor (let [cls, style] of newSheets.entries()) {\n\t\t\tif (!oldSheets.has(cls)) {\n\t\t\t\tconst sheet$1 = sheet(id, cls);\n\t\t\t\tsheet$1.set({ [`.${cls}`]: style });\n\t\t\t}\n\t\t}\n\n\t\tthis.oldSheets = newSheets;\n\t\tthis.newSheets = new Map();\n\t}\n}\n\nclass StyleService {\n\tconstructor(model) {\n\t\tthis.style = model.style;\n\t}\n\n\trow() {\n\t\tconst { rows, row } = this.style();\n\t\tconst visitors = row === noop\n\t\t\t? rows\n\t\t\t: rows.concat([row]);\n\n\t\treturn Composite.func(visitors);\n\t}\n\n\tcell() {\n\t\tconst { cells, cell } = this.style();\n\t\tif (isFunction(cell)) {\n\t\t\tconst visitors = cell === noop\n\t\t\t\t? cells\n\t\t\t\t: cells.concat([cell]);\n\n\t\t\treturn Composite.func(visitors);\n\t\t}\n\n\t\tconst keys = Object.keys(cell);\n\t\tif (keys.length) {\n\t\t\tconst visitors = cells.concat(keys.map(key => {\n\t\t\t\tconst visit = cell[key];\n\t\t\t\treturn (row, column, context) => {\n\t\t\t\t\tif (column.key === key) {\n\t\t\t\t\t\tvisit(row, column, context);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}));\n\n\t\t\treturn Composite.func(visitors);\n\t\t}\n\n\t\treturn Composite.func(cells);\n\t}\n}\n\nclass VirtualRowStyle {\n\tconstructor(table, style) {\n\t\tthis.table = table;\n\t\tthis.style = style;\n\t}\n\n\tvisitFactory() {\n\t\tconst { style } = this;\n\t\tconst { rowBox } = this.table.body;\n\t\tconst { entries } = rowBox;\n\n\t\treturn (row, context) => {\n\t\t\tconst model = {\n\t\t\t\tdataIndex: context.row,\n\t\t\t};\n\n\t\t\tconst key = rowBox.key(model);\n\t\t\tconst classList = entries.get(key);\n\t\t\tif (classList) {\n\t\t\t\tfor (let cls of classList) {\n\t\t\t\t\tcontext.class(cls);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tstyle(row, context);\n\t\t};\n\t}\n}\n\nclass VirtualCellStyle {\n\tconstructor(table, style) {\n\t\tthis.table = table;\n\t\tthis.style = style;\n\t}\n\n\tvisitFactory() {\n\t\tconst { style } = this;\n\t\tconst { cellBox } = this.table.body;\n\t\tconst { columnBox } = this.table.body;\n\n\t\tconst cellEntries = cellBox.entries;\n\t\tconst columnEntries = columnBox.entries;\n\n\t\treturn (row, column, context) => {\n\t\t\t// column level\n\t\t\tconst columnModel = {\n\t\t\t\tdataIndex: context.column,\n\t\t\t};\n\n\t\t\tconst columnKey = columnBox.key(columnModel);\n\t\t\tconst columnClassList = columnEntries.get(columnKey);\n\t\t\tif (columnClassList) {\n\t\t\t\tfor (let cls of columnClassList) {\n\t\t\t\t\tcontext.class(cls);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// cell level\n\t\t\tconst cellModel = {\n\t\t\t\tdataRowIndex: context.row,\n\t\t\t\tdataColumnIndex: context.column,\n\t\t\t};\n\n\t\t\tconst cellKey = cellBox.key(cellModel);\n\t\t\tconst cellClassList = cellEntries.get(cellKey);\n\t\t\tif (cellClassList) {\n\t\t\t\tfor (let cls of cellClassList) {\n\t\t\t\t\tcontext.class(cls);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// add classes\n\t\t\tstyle(row, column, context);\n\t\t};\n\t}\n}\n\nclass StyleLet {\n\tconstructor(plugin) {\n\t\tconst { model, observeReply } = plugin;\n\n\t\tthis.plugin = plugin;\n\t\tthis.valueFactory = getValueFactory;\n\t\tthis.service = new StyleService(model);\n\t\tthis.active = {\n\t\t\trow: false,\n\t\t\tcell: false\n\t\t};\n\n\t\tthis.monitor = {\n\t\t\trow: new StyleMonitor(model),\n\t\t\tcell: new StyleMonitor(model)\n\t\t};\n\n\t\tobserveReply(model.styleChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('row') || e.hasChanges('rows')) {\n\t\t\t\t\tthis.active.row = e.state.row !== noop || e.state.rows.length > 0;\n\t\t\t\t}\n\n\t\t\t\tif (e.hasChanges('cell') || e.hasChanges('cells')) {\n\t\t\t\t\tthis.active.cell = e.state.cell !== noop || e.state.cells.length > 0;\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tneedInvalidate() {\n\t\tconst { model } = this.plugin;\n\t\tif (model.scene().status !== 'stop') {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst { active } = this;\n\t\tconst isVirtual = model.scroll().mode === 'virtual';\n\t\tconst isActive = isVirtual || active.row || active.cell;\n\n\t\tif (!isActive) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst { invalidate } = model.style();\n\t\tconst context = {\n\t\t\tmodel\n\t\t};\n\n\t\treturn invalidate.canExecute(context) && invalidate.execute(context) !== false;\n\t}\n\n\tinvalidate(domCell, domRow) {\n\t\tconst { model, table } = this.plugin;\n\t\tlet { row: isRowActive, cell: isCellActive } = this.active;\n\n\t\tconst isVirtual = model.scroll().mode === 'virtual';\n\n\t\t// TODO: improve performance\n\t\tconst valueCache = new Map();\n\t\tconst value = (row, column) => {\n\t\t\tlet getValue = valueCache.get(column);\n\t\t\tif (!getValue) {\n\t\t\t\tgetValue = getValueFactory(column);\n\t\t\t\tvalueCache.set(column, getValue);\n\t\t\t}\n\n\t\t\treturn getValue(row);\n\t\t};\n\n\t\tconst columnList = table.data.columns();\n\t\tconst columnMap = mapColumns(columnList);\n\n\t\tlet visitRow = this.service.row();\n\t\tlet visitCell = this.service.cell();\n\t\tif (isVirtual) {\n\t\t\tisRowActive = true;\n\t\t\tisCellActive = true;\n\t\t\tvisitRow = new VirtualRowStyle(table, visitRow).visitFactory();\n\t\t\tvisitCell = new VirtualCellStyle(table, visitCell).visitFactory();\n\t\t}\n\n\t\t// For performance reason we make rowContext and cellContext the same reference \n\t\t// for the all style calls.\n\t\tconst rowContext = {\n\t\t\tclass: noop,\n\t\t\trow: -1,\n\t\t\tvalue: null,\n\t\t\tcolumns: {\n\t\t\t\tmap: columnMap,\n\t\t\t\tlist: columnList\n\t\t\t}\n\t\t};\n\n\t\tconst cellContext = {\n\t\t\tclass: noop,\n\t\t\trow: -1,\n\t\t\tcolumn: -1,\n\t\t\tvalue: null,\n\t\t\tcolumns: rowContext.columns\n\t\t};\n\n\t\t// To improve performance take rows and cells directly from the bag and not from the DOM table. \n\t\tconst { body } = table;\n\t\tconst { rowToView, columnToView } = table.box.mapper;\n\t\tconst bodyBag = table.box.bag.body;\n\n\t\tif (isRowActive) {\n\t\t\tconst rows = bodyBag.getRowElements();\n\t\t\tfor (let tr of rows) {\n\t\t\t\tconst { index, element, model } = tr;\n\t\t\t\t// This private method we use only for performance, don't use it in other places.\n\t\t\t\tconst row = body.createRowCore(rowToView(index), element);\n\n\t\t\t\trowContext.class = domRow(row);\n\t\t\t\trowContext.row = index;\n\t\t\t\trowContext.value = value;\n\n\t\t\t\tvisitRow(model, rowContext);\n\t\t\t}\n\t\t}\n\n\t\tif (isCellActive) {\n\t\t\tconst cells = bodyBag.getCellElements();\n\t\t\tfor (let td of cells) {\n\t\t\t\tconst { rowIndex, columnIndex, element, row, column } = td;\n\t\t\t\t// This private method we use only for performance, don't use it in other places.\n\t\t\t\tconst cell = body.createCellCore(rowToView(rowIndex), columnToView(columnIndex), element);\n\n\t\t\t\tcellContext.class = domCell(cell);\n\t\t\t\tcellContext.row = rowIndex;\n\t\t\t\tcellContext.column = columnIndex;\n\t\t\t\tcellContext.value = value;\n\n\t\t\t\tvisitCell(row, column, cellContext);\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst builder = new ModelBuilder();\nfunction modelFactory() {\n\treturn builder.build();\n}\n\nfunction viewFactory(\n\tplugin,\n\tcommandManager,\n\tvscroll,\n\tselectors\n) {\n\tconst { model, disposable } = plugin;\n\tconst { shortcut } = model.action();\n\n\tconst navigationShortcut = {\n\t\tkeyCode: () => shortcut.keyCode,\n\t\tregister: commands =>\n\t\t\tdisposable.add(\n\t\t\t\tshortcut.register(\n\t\t\t\t\tcommandManager,\n\t\t\t\t\tcommands\n\t\t\t\t)\n\t\t\t),\n\t};\n\n\tconst selectionCommandManager =\n\t\tnew SelectionCommandManager(\n\t\t\tmodel,\n\t\t\tcommandManager\n\t\t);\n\n\tconst selectionShortcut = {\n\t\tregister: commands => {\n\t\t\tdisposable.add(\n\t\t\t\tshortcut.register(\n\t\t\t\t\tselectionCommandManager,\n\t\t\t\t\tcommands\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t};\n\n\treturn host => {\n\t\thost.head = new HeadLet(plugin, selectors.th);\n\t\thost.body = new BodyLet(plugin);\n\t\thost.foot = new FootLet(plugin);\n\t\thost.row = new RowLet(plugin, selectors.tr);\n\t\thost.layout = new LayoutLet(plugin);\n\t\thost.scroll = new ScrollLet(plugin, vscroll);\n\t\thost.highlight = new HighlightLet(plugin);\n\t\thost.sort = new SortLet(plugin);\n\t\thost.pagination = new PaginationLet(plugin);\n\t\thost.nav = new NavigationLet(plugin, navigationShortcut);\n\t\thost.group = new GroupLet(plugin, navigationShortcut);\n\t\thost.edit = new EditLet(plugin, navigationShortcut);\n\t\thost.filter = new FilterLet(plugin);\n\t\thost.rowDetails = new RowDetailsLet(plugin, navigationShortcut);\n\t\thost.selection = new SelectionLet(plugin, selectionShortcut);\n\t\thost.style = new StyleLet(plugin);\n\t\thost.clipboard = new ClipboardLet(plugin, navigationShortcut);\n\t};\n}\n\nclass ViewHost {\n  constructor(plugin) {\n    this.plugin = plugin;\n\n    this.watch(plugin.service);\n    this.final = final();\n\n    // todo: make the logic based on mouse state\n    this.startCell = null;\n  }\n\n  invalidate() {\n    this.final(() => {\n      const { view } = this.plugin;\n      const { style } = view;\n\n      if (style.needInvalidate()) {\n        const rowMonitor = style.monitor.row;\n        const cellMonitor = style.monitor.cell;\n\n        Fastdom.mutate(() => {\n          // Apply mutate inside another mutate to ensure that style.invalidate is triggered last.\n          Fastdom.mutate(() => {\n            const domCell = cellMonitor.enter();\n            const domRow = rowMonitor.enter();\n            try {\n              style.invalidate(domCell, domRow);\n            }\n            finally {\n              rowMonitor.exit();\n              cellMonitor.exit();\n            }\n          });\n        });\n      }\n    });\n  }\n\n  triggerLine(service, timeout) {\n    const { model } = this.plugin;\n    const { reduce } = model.pipe();\n\n    let session = [];\n    const job = jobLine(timeout);\n    return (source, changes, units) => {\n      model.scene({ status: 'start' }, {\n        source\n      });\n\n      session.push(...units);\n      job(() => {\n        const units = reduce(session, model);\n        session = [];\n\n        units.forEach(pipe =>\n          service.invalidate({\n            source,\n            changes,\n            pipe,\n            why: pipe.why || 'refresh'\n          })\n        );\n      });\n    };\n  }\n\n  watch(service) {\n    const { model, observeReply } = this.plugin;    const { triggers } = model.pipe();\n    const { pipe } = model.data();\n\n    const triggerJob = this.triggerLine(service, 10);\n    if (pipe !== PipeUnit.default) {\n      triggerJob('grid', {}, [pipe]);\n    }\n\n    Object.keys(triggers)\n      .forEach(name =>\n        observeReply(model[name + 'Changed'])\n          .subscribe(e => {\n            if (e.tag.behavior === 'core') {\n              return;\n            }\n\n            const units = [];\n            const trigger = triggers[name];\n            for (const key in e.changes) {\n              const unit = trigger[key];\n              if (unit) {\n                units.push(unit);\n              }\n            }\n\n            if (units.length > 0) {\n              triggerJob(e.tag.source || name, e.changes, units);\n            }\n          }));\n  }\n\n  mouseDown(e) {\n    const { model, view } = this.plugin;\n    const { edit } = model;\n\n    const td = this.findCell(e);\n\n    model.mouse({\n      code: stringify(getButtonCode(e)),\n      status: 'down',\n      target: td\n    }, {\n      source: 'mouse.down'\n    });\n\n    if (checkButtonCode(e, LEFT_BUTTON)) {\n      const { area, mode } = this.selection;\n\n      if (td) {\n        const fromNotEditMode = edit().status === 'view';\n\n        this.navigate(td);\n        if (area === 'body') {\n          this.select(td);\n        }\n\n        if (fromNotEditMode && view.edit.cell.enter.canExecute(td)) {\n          view.edit.cell.enter.execute(td);\n        }\n\n        if (mode === 'range' && td.column.type !== 'select') {\n          this.startCell = td;\n          view.selection.selectRange(td, null, 'body');\n        }\n      }\n    }\n  }\n\n  mouseUp(e) {\n    const { model } = this.plugin;\n    const { edit } = model;\n\n    const td = this.findCell(e);\n\n    this.startCell = null;\n\n    model.mouse({\n      code: stringify(getButtonCode(e)),\n      status: 'up',\n      target: td,\n    }, {\n      source: 'mouse.up'\n    });\n\n    if (checkButtonCode(e, LEFT_BUTTON)) {\n      if (edit().status === 'startBatch') {\n        edit({ status: 'endBatch' }, { source: 'body.ctrl' });\n      }\n    }\n\n    model.mouse({\n      code: stringify(NO_BUTTON),\n      status: 'release',\n      target: null,\n      timestamp: Date.now(),\n    }, {\n      source: 'mouse.up'\n    });\n  }\n\n  mouseMove(e) {\n    const { model, view } = this.plugin;\n    const { highlight } = view;\n    const { rows, cell } = model.highlight();\n\n    const td = this.findCell(e);\n    if (td) {\n\n      if (cell) {\n        highlight.cell.execute(cell, false);\n      }\n\n      const newCell = {\n        rowIndex: td.rowIndex,\n        columnIndex: td.columnIndex\n      };\n\n      model.mouse({\n        status: 'move',\n        target: cell || newCell\n      }, {\n        source: 'mouse.move'\n      });\n\n      if (highlight.cell.canExecute(newCell)) {\n        highlight.cell.execute(newCell, true);\n      }\n\n      const tr = this.findRow(e);\n      if (tr) {\n        const { index } = tr;\n\n        if (highlight.row.canExecute(index)) {\n          rows\n            .filter(i => i !== index)\n            .forEach(i => highlight.row.execute(i, false));\n\n          highlight.row.execute(index, true);\n        }\n      }\n\n      if (checkButtonCode(e, LEFT_BUTTON)) {\n        if (this.selection.mode === 'range') {\n          const startCell = this.startCell;\n          const endCell = td;\n\n          if (startCell && endCell) {\n            this.navigate(endCell);\n            view.selection.selectRange(startCell, endCell, 'body');\n          }\n        }\n      }\n\n    } else {\n      model.mouse({\n        status: 'move',\n        target: null,\n      }, {\n        source: 'mouse.move'\n      });\n    }\n  }\n\n  mouseEnter(e) {\n    const { model } = this.plugin;\n    model.mouse({\n      status: 'enter',\n      target: null,\n      code: null\n    }, {\n      source: 'mouse.enter'\n    });\n  }\n\n  mouseLeave() {\n    const { model } = this.plugin;\n\n    model.mouse({\n      status: 'leave',\n      target: null,\n      code: null\n    }, {\n      source: 'mouse.leave'\n    });\n\n    this.clearHighlight();\n  }\n\n  select(cell) {\n    const { area, mode, unit } = this.selection;\n    if (cell.column.type !== 'select' && (area !== 'body' || mode === 'range')) {\n      return;\n    }\n\n    const { model, view } = this.plugin;\n    const editMode = model.edit().mode;\n    switch (unit) {\n      case 'row': {\n        if (cell.column.type === 'select' && cell.column.editorOptions.trigger === 'focus') {\n          const focusState = model.focus();\n          if (focusState.rowIndex !== cell.rowIndex || focusState.columnIndex !== cell.columnIndex) {\n            if (view.selection.toggleRow.canExecute(cell.row)) {\n              view.selection.toggleRow.execute(cell.row, 'body');\n            }\n          }\n        } else if (!editMode && cell.column.category !== 'control') {\n          if (view.selection.toggleRow.canExecute(cell.row)) {\n            view.selection.toggleRow.execute(cell.row, 'body');\n          }\n        }\n\n        break;\n      }\n\n      case 'column': {\n        if (!editMode) {\n          view.selection.toggleColumn.execute(cell.column, 'body');\n        }\n\n        break;\n      }\n\n      case 'mix': {\n        if (cell.column.type === 'row-indicator') {\n          view.selection.toggleCell.execute(cell, 'body');\n        }\n\n        break;\n      }\n    }\n  }\n\n  navigate(cell) {\n    const { view } = this.plugin;\n    const { focus } = view.nav;\n\n    if (focus.canExecute(cell)) {\n      focus.execute(cell);\n    }\n  }\n\n  findCell(e) {\n    const { table } = this.plugin;\n    const pathFinder = new PathService(table.box.bag.body);\n    const path = eventPath(e);\n\n    let td = pathFinder.cell(path);\n    if (!td) {\n      const firstElement = path[0];\n      const isEditMarker =\n        firstElement\n        && firstElement.classList.contains('q-grid-edit-marker');\n\n      if (isEditMarker) {\n        const { model } = this.plugin;\n        const { rowIndex, columnIndex } = model.focus();\n        td = table.body.cell(rowIndex, columnIndex).model();\n      }\n    }\n\n    return td;\n  }\n\n  findRow(e) {\n    const { table } = this.plugin;\n    const pathFinder = new PathService(table.box.bag.body);\n    const path = eventPath(e);\n    return pathFinder.row(path);\n  }\n\n  clearHighlight() {\n    const { view } = this.plugin;\n    const { highlight } = view;\n    if (highlight.clear.canExecute()) {\n      highlight.clear.execute();\n    }\n  }\n\n  get selection() {\n    const { model } = this.plugin;\n    return model.selection();\n  }\n}\n\nexport { Action, ActionState, Aggregation, AnimationState, ArrayColumn, ArrayColumnModel, Bag, Body, BodyHost, BodyLet, BodyState, BoolColumn, BoolColumnModel, Box, BoxHost, Cache, CacheStrategy, Cell, CellBox, CellEditor, CellSelector, CharReader, ClipboardLet, ClipboardState, CohortColumn, CohortColumnModel, Column, ColumnBox, ColumnListHost, ColumnListState, ColumnModel, ColumnView, Command, CommandKey, CommandManager, Composite, CompositeCommandManager, Container, CsvExport, CsvImport, CurrencyColumn, CurrencyColumnModel, Data, DataColumnModel, DataRow, DataState, DateColumn, DateColumnModel, DateTimeColumn, DateTimeColumnModel, Defer, DetailsRow, Disposable, DragService, DragState, EditCellLet, EditLet, EditRowLet, EditService, EditState, Element, EmailColumn, EmailColumnModel, EnumerableResource, Event, EventListener, EventManager, ExportState, FakeClassList, FakeElement, FakeLayer, FakeTable, Fastdom, Fetch, FetchState, FileColumn, FileColumnModel, FilterLet, FilterRowColumn, FilterRowColumnModel, FilterState, FocusAfterRenderService, FocusService, FocusState, Foot, FootLet, FootState, FormatService, GRID_PREFIX, GridError, GridHost, GridService, GridState, GroupColumn, GroupColumnModel, GroupLet, GroupState, GroupSummaryColumn, GroupSummaryColumnModel, Guard, Head, HeadHost, HeadLet, HeadState, HighlightLet, HighlightState, IdColumn, IdColumnModel, ImageColumn, ImageColumnModel, ImportState, JsonExport, JsonImport, Keyboard, KeyboardState, LEFT_BUTTON, LayerState, LayoutLet, LayoutState, Lazy, Log, MIDDLE_BUTTON, MarkupVisitor, Matrix, Middleware, Model, ModelBinder, ModelBuilder, MouseState, MultipleSelectionState, NO_BUTTON, Navigation, NavigationLet, NavigationState, Node, NodeRow, NumberColumn, NumberColumnModel, ObservableEvent, ObservableReplyEvent, Operator, PadColumn, PadColumnModel, PaginationLet, PaginationState, PasswordColumn, PasswordColumnModel, PathService, PersistenceService, PersistenceState, PersistenceStorage, Pipe, PipeState, PipeUnit, PivotColumn, PivotColumnModel, PivotRow, PivotState, PluginService, PluginState, PredicateVisitor, ProgressState, RIGHT_BUTTON, Range, RangeSelectionState, ReferenceColumn, ReferenceColumnModel, Renderer, Resource, RestState, Row, RowBox, RowDetails, RowDetailsColumn, RowDetailsColumnModel, RowDetailsLet, RowDetailsStatus, RowEditor, RowExpandColumn, RowExpandColumnModel, RowIndicatorColumn, RowIndicatorColumnModel, RowLet, RowListState, RowNumberColumn, RowNumberColumnModel, RowOptionsColumn, RowOptionsColumnModel, RowState, Scene, SceneState, ScrollLet, ScrollState, SelectColumn, SelectColumnModel, SelectionCommandManager, SelectionLet, SelectionRange, SelectionService, SelectionState, Selector, SelectorCache, SelectorFactory, SelectorMark, SelectorMediator, Shortcut, ShortcutDispatcher, SingleOnlySelectionState, SingleSelectionState, SortLet, SortState, StyleBox, StyleEntry, StyleLet, StyleMonitor, StyleService, StyleState, SubSelectionState, SubjectLike, Table, TableCommandManager, Td, TemplatePath, TemplateState, TextColumn, TextColumnModel, TextSelection, TimeColumn, TimeColumnModel, ToolbarState, Tr, TrContainer, Unit, UnitFactory, UnsubscribableLike, UrlColumn, UrlColumnModel, ValidationState, View, ViewHost, ViewState, VirtualBody, VirtualBox, VirtualCell, VirtualCellStyle, VirtualColumn, VirtualElement, VirtualRow, VirtualRowStyle, VisibilityState, Visitor, XmlExport, XmlImport, alphaTitle, animationPipe, assignWith$1 as assignWith, bend, binarySearch, bodyCellClassifier, build$1 as build, buildExpression, buildFromModel, buildLines, buildPivot, calk, castFactory, checkButtonCode, clone, cloneDeepWith as cloneDeep, collapse, columnFactory, columnIndexPipe, columnIndexPipeUnit, columnPipe, columnPipeUnit, commandKey, compare, compareParseFactory, compile$1 as compile, compileGet, compileSet, copy, copyToClipboard, createValidator, css, dataPipe, defaultPipeUnit, deserialize, dropWhile, elementFromPoint, escape$2 as escape, escapeAttr, escapeRegexp, eventPath, expand, factory, filter$1 as filter, filterNode, filterPipe, final, findColumn, findFirstLeaf, findIndex, findLeaves, findLine, findNode, findType, firstRowTitle, flatView, flatten, flattenColumns, flattenFactory, flattenRows, generate, generateCommandKey, generateFactory, getButtonCode, getCellValue, getDirection, getIndex, getKey, getLabel, getLabelFactory, getMap, getType$1 as getType, getTypeName, getValue$1 as getValue, getValueFactory, graphFlatView, groupBuilder, groupPipe, groupPipeUnit, guid, hasRules, headCellClassifier, htmlEncode, identity, index, inferType, invalidateStatus, isArray$1 as isArray, isBoolean, isDate$1 as isDate, isEmail, isFileAnImage, isFunction, isImage, isNumber, isObject, isPrimitive, isString, isUndefined, isUrl, jobLine, key, lineView, map, mapColumns, match, matchISO8601, maxBy as max, memoPipe, merge$1 as merge, mergeTree, minBy as min, modelFactory, no, nodeBuilder, noop, numericTitle, orderBy, orderFactory, paginationPipe, parents, parseFactory, pivot, pivotForm, pivotPipe, preOrderDFS, predicateFactory, resolveType, rowDetailsPipeUnit, rowPipeUnit, isEqual as same, scenePipe, scenePipeUnit, selectColumn, selectColumnIndex, selectRow, selectRowIndex, selectionStateFactory, serialize, serializeGet, serializePost, setLabel, setValue, sheet, sortFactory, sortIndexFactory, sortPipe, startCase$1 as startCase, stringify, stringifyFactory, sumBy, tableFactory, takeOnce, takeWhile, toCamelCase, toggleStatus, uniq, upload, value, viewFactory, viewPipe, viewPipeUnit, widthFactory, yes, zip$1 as zip };\n","// action\nexport { Action } from './src/action/action.js';\nexport { ActionState } from './src/action/action.state';\n//animation\nexport { AnimationState } from './src/animation/animation.state';\n//body\nexport { BodyHost } from './src/body/body.host';\nexport { BodyLet } from './src/body/body.let';\nexport { BodyState } from './src/body/body.state';\n//box\nexport { BoxHost } from './src/box/box.host';\n//cell\nexport { bodyCellClassifier, headCellClassifier } from './src/cell/cell.classifier';\nexport { CellSelector } from './src/cell/cell.selector';\n//clipboard\nexport { copyToClipboard } from './src/clipboard/clipboard';\nexport { ClipboardLet } from './src/clipboard/clipboard.let';\nexport { ClipboardState } from './src/clipboard/clipboard.state';\n//column-list\nexport { generate, generateFactory } from './src/column-list/column.list.generate';\nexport { ColumnListHost } from './src/column-list/column.list.host';\nexport { mergeTree, sortIndexFactory } from './src/column-list/column.list.sort';\nexport { ColumnListState } from './src/column-list/column.list.state';\n//column-type\nexport { ArrayColumn, ArrayColumnModel } from './src/column-type/array.column';\nexport { BoolColumn, BoolColumnModel } from './src/column-type/bool.column';\nexport { CohortColumn, CohortColumnModel } from './src/column-type/cohort.column';\nexport { ColumnModel } from './src/column-type/column.model';\nexport { CurrencyColumn, CurrencyColumnModel } from './src/column-type/currency.column';\nexport { DataColumnModel } from './src/column-type/data.column.model';\nexport { DateColumn, DateColumnModel } from './src/column-type/date.column';\nexport { DateTimeColumn, DateTimeColumnModel } from './src/column-type/datetime.column';\nexport { EmailColumn, EmailColumnModel } from './src/column-type/email.column';\nexport { FileColumn, FileColumnModel } from './src/column-type/file.column';\nexport { FilterRowColumn, FilterRowColumnModel } from './src/column-type/filter.row.column';\nexport { GroupColumn, GroupColumnModel } from './src/column-type/group.column';\nexport { GroupSummaryColumn, GroupSummaryColumnModel } from './src/column-type/group.summary.column';\nexport { IdColumn, IdColumnModel } from './src/column-type/id.column';\nexport { ImageColumn, ImageColumnModel } from './src/column-type/image.column';\nexport { NumberColumn, NumberColumnModel } from './src/column-type/number.column';\nexport { PadColumn, PadColumnModel } from './src/column-type/pad.column';\nexport { PasswordColumn, PasswordColumnModel } from './src/column-type/password.column';\nexport { PivotColumn, PivotColumnModel } from './src/column-type/pivot.column';\nexport { ReferenceColumn, ReferenceColumnModel } from './src/column-type/reference.column';\nexport { RowDetailsColumn, RowDetailsColumnModel } from './src/column-type/row.details.column';\nexport { RowExpandColumn, RowExpandColumnModel } from './src/column-type/row.expand.column';\nexport { RowIndicatorColumn, RowIndicatorColumnModel } from './src/column-type/row.indicator.column';\nexport { RowNumberColumn, RowNumberColumnModel } from './src/column-type/row.number.column';\nexport { RowOptionsColumn, RowOptionsColumnModel } from './src/column-type/row.options.column';\nexport { SelectColumn, SelectColumnModel } from './src/column-type/select.column';\nexport { TextColumn, TextColumnModel } from './src/column-type/text.column';\nexport { TimeColumn, TimeColumnModel } from './src/column-type/time.column';\nexport { UrlColumn, UrlColumnModel } from './src/column-type/url.column';\n//column\nexport { columnFactory } from './src/column/column.factory';\nexport { collapse, expand, flattenRows } from './src/column/column.matrix';\nexport { findColumn, findIndex, findLine, flattenColumns, getCellValue, lineView, mapColumns, widthFactory } from './src/column/column.service';\n//command\nexport { Command } from './src/command/command';\nexport { CommandKey, commandKey, generateCommandKey } from './src/command/command.key';\nexport { CommandManager } from './src/command/command.manager';\nexport { CompositeCommandManager } from './src/command/composite.command.manager';\nexport { TableCommandManager } from './src/command/table.command.manager';\n//data\nexport { DataState } from './src/data/data.state';\n//definition.js\nexport { GRID_PREFIX } from './src/definition';\n//dom\nexport { Bag } from './src/dom/bag';\nexport { Body, VirtualBody } from './src/dom/body';\nexport { Box } from './src/dom/box';\nexport { Cell } from './src/dom/cell';\nexport { Column } from './src/dom/column';\nexport { Container, TrContainer } from './src/dom/container';\nexport { Data } from './src/dom/data';\nexport { Element } from './src/dom/element';\n//dom => fake\nexport { FakeClassList } from './src/dom/fake/class.list';\nexport { FakeElement } from './src/dom/fake/element';\nexport { FakeLayer } from './src/dom/fake/layer';\nexport { FakeTable } from './src/dom/fake/table';\n//dom\nexport { Foot } from './src/dom/foot';\nexport { Head } from './src/dom/head';\nexport { Row } from './src/dom/row';\n//dom => selector\nexport { Matrix } from './src/dom/selector/matrix';\nexport { Selector } from './src/dom/selector/selector';\nexport { SelectorCache } from './src/dom/selector/selector.cache';\nexport { SelectorFactory } from './src/dom/selector/selector.factory';\nexport { SelectorMark } from './src/dom/selector/selector.mark';\nexport { SelectorMediator } from './src/dom/selector/selector.mediate';\nexport { UnitFactory } from './src/dom/selector/unit.factory';\n//dom\nexport { Table } from './src/dom/table';\nexport { tableFactory } from './src/dom/table.factory';\nexport { Td } from './src/dom/td';\nexport { Tr } from './src/dom/tr';\nexport { Unit } from './src/dom/unit';\nexport { View } from './src/dom/view';\n//dom => virtual\nexport { VirtualBox } from './src/dom/virtual/box';\nexport { VirtualCell } from './src/dom/virtual/cell';\nexport { CellBox } from './src/dom/virtual/cell.box';\nexport { VirtualColumn } from './src/dom/virtual/column';\nexport { ColumnBox } from './src/dom/virtual/column.box';\nexport { VirtualElement } from './src/dom/virtual/element';\nexport { VirtualRow } from './src/dom/virtual/row';\nexport { RowBox } from './src/dom/virtual/row.box';\nexport { StyleBox } from './src/dom/virtual/style.box';\n//drag\nexport { DragService } from './src/drag/drag.service';\nexport { DragState } from './src/drag/drag.state';\n//edit\nexport { CellEditor } from './src/edit/edit.cell.editor';\nexport { EditCellLet } from './src/edit/edit.cell.let';\nexport { EditLet } from './src/edit/edit.let';\nexport { RowEditor } from './src/edit/edit.row.editor';\nexport { EditRowLet } from './src/edit/edit.row.let';\nexport { EditService } from './src/edit/edit.service';\nexport { EditState } from './src/edit/edit.state';\n//event\nexport { Event } from './src/event/event';\nexport { EventListener } from './src/event/event.listener';\nexport { EventManager } from './src/event/event.manager';\n//export => csv\nexport { CsvExport } from './src/export/csv/csv';\n//export\nexport { graphFlatView } from './src/export/export.service';\nexport { ExportState } from './src/export/export.state';\n//export => json\nexport { JsonExport } from './src/export/json/json';\nexport { XmlExport } from './src/export/xml/xml';\n//expression\nexport { castFactory } from './src/expression/cast.factory';\nexport { buildExpression } from './src/expression/expression.build';\nexport { Visitor } from './src/expression/expression.visitor';\nexport { MarkupVisitor } from './src/expression/markup.visitor';\nexport { PredicateVisitor } from './src/expression/predicate.visitor';\n//fetch\nexport { FetchState } from './src/fetch/fetch.state';\n//filter\nexport { FilterLet } from './src/filter/filter.let';\nexport { FilterState } from './src/filter/filter.state';\nexport { match } from './src/filter/match';\n//focus\nexport { FocusAfterRenderService, FocusService } from './src/focus/focus.service';\nexport { FocusState } from './src/focus/focus.state';\n//foot\nexport { FootLet } from './src/foot/foot.let';\nexport { FootState } from './src/foot/foot.state';\n//format\nexport { FormatService } from './src/format/format.service';\n//grid\nexport { GridHost } from './src/grid/grid.host';\nexport { GridService } from './src/grid/grid.service';\nexport { GridState } from './src/grid/grid.state';\n//group\nexport { groupBuilder } from './src/group/group.build';\nexport { GroupLet } from './src/group/group.let';\nexport { findFirstLeaf, flattenFactory } from './src/group/group.service';\nexport { GroupState } from './src/group/group.state';\n//head\nexport { HeadHost } from './src/head/head.host';\nexport { HeadLet } from './src/head/head.let';\nexport { HeadState } from './src/head/head.state';\n//highlight\nexport { HighlightLet } from './src/highlight/highlight.let';\nexport { HighlightState } from './src/highlight/highlight.state';\n//import => csv\nexport { CsvImport } from './src/import/csv/csv';\n//import\nexport { ImportState } from './src/import/import.state';\n//import => json\nexport { JsonImport } from './src/import/json/json';\n//import => xml\nexport { XmlImport } from './src/import/xml/xml';\n//infrastructure\nexport { Cache } from './src/infrastructure/cache';\nexport { Composite } from './src/infrastructure/composite';\nexport { Defer } from './src/infrastructure/defer';\nexport { Disposable } from './src/infrastructure/disposable';\nexport { GridError } from './src/infrastructure/error';\nexport { Fetch } from './src/infrastructure/fetch';\nexport { final } from './src/infrastructure/final';\nexport { Guard } from './src/infrastructure/guard';\nexport { Lazy } from './src/infrastructure/lazy';\nexport { Log } from './src/infrastructure/log';\nexport { Range } from './src/infrastructure/range';\n//io\nexport { CharReader } from './src/io/char.reader';\nexport { isFileAnImage } from './src/io/file';\n//keyboard\nexport { Keyboard } from './src/keyboard/keyboard';\nexport { KeyboardState } from './src/keyboard/keyboard.state';\n//layer\nexport { LayerState } from './src/layer/layer.state';\n//layout\nexport { LayoutLet } from './src/layout/layout.let';\nexport { LayoutState } from './src/layout/layout.state';\nexport { Model } from './src/model/model';\n//model\nexport { ModelBinder } from './src/model/model.bind';\nexport { ModelBuilder } from './src/model/model.builder';\n//mouse\nexport { checkButtonCode, getButtonCode, LEFT_BUTTON, MIDDLE_BUTTON, NO_BUTTON, RIGHT_BUTTON, stringify } from './src/mouse/mouse.code';\nexport { MouseState } from './src/mouse/mouse.state';\nexport { Navigation } from './src/navigation/navigation';\nexport { NavigationLet } from './src/navigation/navigation.let';\nexport { NavigationState } from './src/navigation/navigation.state';\nexport { selectColumn, selectColumnIndex, selectRow, selectRowIndex } from './src/navigation/navigation.state.selector';\n//node\nexport { Node } from './src/node/node';\nexport { nodeBuilder } from './src/node/node.build';\nexport { bend, calk, copy, filterNode, findLeaves, findNode, preOrderDFS } from './src/node/node.service';\n//pagination\nexport { PaginationLet } from './src/pagination/pagination.let';\nexport { PaginationState } from './src/pagination/pagination.state';\n//path\nexport { PathService } from './src/path/path.service';\n//persistence\nexport { PersistenceService } from './src/persistence/persistence.service';\nexport { PersistenceState } from './src/persistence/persistence.state';\nexport { deserialize, PersistenceStorage, serialize } from './src/persistence/persistence.storage';\n//pipe\nexport { animationPipe } from './src/pipe/animation.pipe';\nexport { columnIndexPipe } from './src/pipe/column.index.pipe';\nexport { columnPipe } from './src/pipe/column.pipe';\nexport { dataPipe } from './src/pipe/data.pipe';\nexport { filterPipe } from './src/pipe/filter.pipe';\nexport { groupPipe } from './src/pipe/group.pipe';\nexport { memoPipe } from './src/pipe/memo.pipe';\nexport { paginationPipe } from './src/pipe/pagination.pipe';\nexport { Pipe } from './src/pipe/pipe';\nexport { buildFromModel } from './src/pipe/pipe.build';\nexport { PipeState } from './src/pipe/pipe.state';\nexport { PipeUnit } from './src/pipe/pipe.unit';\nexport { pivotPipe } from './src/pipe/pivot.pipe';\nexport { scenePipe } from './src/pipe/scene.pipe';\nexport { sortPipe } from './src/pipe/sort.pipe';\n//pipe => units\nexport { columnIndexPipeUnit } from './src/pipe/units/column.index.pipe.unit';\nexport { columnPipeUnit } from './src/pipe/units/column.pipe.unit';\nexport { defaultPipeUnit } from './src/pipe/units/default.pipe.unit';\nexport { groupPipeUnit } from './src/pipe/units/group.pipe.unit';\nexport { rowDetailsPipeUnit } from './src/pipe/units/row.details.pipe.unit';\nexport { rowPipeUnit } from './src/pipe/units/row.pipe.unit';\nexport { scenePipeUnit } from './src/pipe/units/scene.pipe.unit';\nexport { viewPipeUnit } from './src/pipe/units/view.pipe.unit';\n//pipe\nexport { viewPipe } from './src/pipe/view.pipe';\n//pivot\nexport { pivot } from './src/pivot/pivot';\nexport { buildPivot } from './src/pivot/pivot.build';\nexport { pivotForm } from './src/pivot/pivot.form';\nexport { PivotState } from './src/pivot/pivot.state';\n//plugin\nexport { PluginService } from './src/plugin/plugin.service';\nexport { PluginState } from './src/plugin/plugin.state';\n//progress\nexport { ProgressState } from './src/progress/progress.state';\n//resource\nexport { Resource } from './src/resource/resource';\nexport { EnumerableResource } from './src/resource/resource.enumerable';\nexport { factory } from './src/resource/resource.factory';\n//rest\nexport { serializeGet } from './src/rest/get.serialize';\nexport { serializePost } from './src/rest/post.serialize';\nexport { RestState } from './src/rest/rest.state';\n//row-details\nexport { RowDetails } from './src/row-details/row.details';\nexport { RowDetailsLet } from './src/row-details/row.details.let';\nexport { flatView, invalidateStatus, toggleStatus } from './src/row-details/row.details.service';\nexport { RowDetailsStatus } from './src/row-details/row.details.status';\n//row-list\nexport { sortFactory } from './src/row-list/row.list.sort';\nexport { RowListState } from './src/row-list/row.list.state';\n//row\nexport { RowLet } from './src/row/row.let';\nexport { RowState } from './src/row/row.state';\n//rx\nexport { ObservableEvent, ObservableReplyEvent, Operator, SubjectLike, UnsubscribableLike } from './src/rx/rx';\nexport { filter, takeOnce } from './src/rx/rx.operators';\n//scene => render\nexport { CacheStrategy } from './src/scene/render/cache.strategy';\nexport { DataRow } from './src/scene/render/data.row';\nexport { DetailsRow } from './src/scene/render/details.row';\nexport { NodeRow } from './src/scene/render/node.row';\nexport { PivotRow } from './src/scene/render/pivot.row';\nexport { Renderer } from './src/scene/render/render';\n//scene\nexport { Scene } from './src/scene/scene';\nexport { SceneState } from './src/scene/scene.state';\n//scene => view\nexport { ColumnView } from './src/scene/view/column.view';\n//scroll\nexport { ScrollLet } from './src/scroll/scroll.let';\nexport { ScrollState } from './src/scroll/scroll.state';\n//selection\nexport { SelectionCommandManager } from './src/selection/selection.command.manager';\nexport { SelectionLet } from './src/selection/selection.let';\nexport { SelectionRange } from './src/selection/selection.range';\nexport { SelectionService } from './src/selection/selection.service';\nexport { SelectionState } from './src/selection/selection.state';\n//selection => state\nexport { MultipleSelectionState } from './src/selection/state/multiple.selection.state';\nexport { RangeSelectionState } from './src/selection/state/range.selection.state';\nexport { SubSelectionState } from './src/selection/state/selection.state';\nexport { selectionStateFactory } from './src/selection/state/selection.state.factory';\nexport { SingleOnlySelectionState } from './src/selection/state/single.only.selection.state';\nexport { SingleSelectionState } from './src/selection/state/single.selection.state';\n//services\nexport { Aggregation } from './src/services/aggregation';\nexport { compareParseFactory, findType, getType, inferType, isPrimitive, parseFactory, resolveType } from './src/services/convert';\nexport { escape, escapeAttr, sheet } from './src/services/css';\nexport { css, elementFromPoint, eventPath, parents } from './src/services/dom';\nexport { Fastdom } from './src/services/fastdom';\nexport { guid } from './src/services/guid';\nexport { jobLine } from './src/services/job.line';\nexport { getLabel, getLabelFactory, setLabel } from './src/services/label';\nexport { build, buildLines } from './src/services/markup';\nexport { merge } from './src/services/merge';\nexport { Middleware } from './src/services/middleware';\nexport { stringifyFactory } from './src/services/model.stringify';\nexport { index, key, map, value } from './src/services/pair';\nexport { compile, compileGet, compileSet } from './src/services/path';\nexport { predicateFactory } from './src/services/predicate';\nexport { TextSelection } from './src/services/text.selection';\nexport { alphaTitle, firstRowTitle, numericTitle } from './src/services/title';\nexport { upload } from './src/services/upload';\nexport { getValue, getValueFactory, setValue } from './src/services/value';\n//shortcut\nexport { Shortcut } from './src/shortcut/shortcut';\nexport { ShortcutDispatcher } from './src/shortcut/shortcut.dispatcher';\n//sort\nexport { SortLet } from './src/sort/sort.let';\nexport { getDirection, getIndex, getKey, getMap, orderFactory } from './src/sort/sort.service';\nexport { SortState } from './src/sort/sort.state';\n//style\nexport { StyleLet } from './src/style/style.let';\nexport { StyleEntry, StyleMonitor } from './src/style/style.monitor';\nexport { StyleService } from './src/style/style.service';\nexport { StyleState } from './src/style/style.state';\nexport { VirtualCellStyle, VirtualRowStyle } from './src/style/style.virtual';\n//template\nexport { TemplatePath } from './src/template/template.path';\nexport { TemplateState } from './src/template/template.state';\n//test\nexport { modelFactory } from './src/test/model.factory';\n//toolbar\nexport { ToolbarState } from './src/toolbar/toolbar.state';\n//utility\nexport { assignWith, binarySearch, clone, cloneDeep, compare, dropWhile, escapeRegexp, flatten, getTypeName, htmlEncode, identity, isArray, isBoolean, isDate, isEmail, isFunction, isImage, isNumber, isObject, isString, isUndefined, isUrl, matchISO8601, max, min, no, noop, orderBy, same, startCase, sumBy, takeWhile, toCamelCase, uniq, yes, zip } from './src/utility/kit';\n//validation\nexport { createValidator, hasRules } from './src/validation/validation.service';\nexport { ValidationState } from './src/validation/validation.state';\n//view\nexport { viewFactory } from './src/view/view.factory';\nexport { ViewHost } from './src/view/view.host';\nexport { ViewState } from './src/view/view.state';\n//visibility\nexport { VisibilityState } from './src/visibility/visibility.state';\n\n","export class Action {\n\tconstructor(command, title, icon, templateUrl) {\n\t\tthis.command = command;\n\n\t\tthis.title = title;\n\t\tthis.icon = icon;\n\t\tthis.templateUrl = templateUrl;\n\t}\n}\n","import { CommandManager } from '../command/command.manager';\nimport { Resource } from '../resource/resource';\nimport { Shortcut } from '../shortcut/shortcut';\nimport { ShortcutDispatcher } from '../shortcut/shortcut.dispatcher';\nimport { noop } from '../utility/kit';\n\nexport class ActionState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\n\t\tthis.items = [\n\t\t\t{\n\t\t\t\tcommand: {\n\t\t\t\t\texecute: noop,\n\t\t\t\t\tpriority: 0\n\t\t\t\t},\n\t\t\t\ttitle: `Column chooser`,\n\t\t\t\ticon: 'more_vert',\n\t\t\t\ttemplateUrl: 'plugin-column-chooser-trigger.tpl.html',\n\t\t\t}\n\t\t];\n\n\t\tthis.shortcut = new Shortcut(new ShortcutDispatcher());\n\t\tthis.manager = new CommandManager();\n\t}\n}","export class AnimationState {\n\tconstructor() {\n\t\tthis.apply = [];\n\t}\n}","import { Fastdom } from '../services/fastdom';\nimport { GRID_PREFIX } from '../definition';\nimport { jobLine } from '../services/job.line';\n\nconst VERTICAL_SCROLL_CLASS = `${GRID_PREFIX}-scroll-vertical`;\nconst HORIZONTAL_SCROLL_CLASS = `${GRID_PREFIX}-scroll-horizontal`;\nconst DEFAULT_DELTA_Y = 100;\n\nexport class BodyHost {\n\tconstructor(plugin) {\n\t\tthis.plugin = plugin;\n\t\tthis.scrollingJob = jobLine(100);\n\t}\n\n\tscroll(e) {\n\t\tconst { model, table } = this.plugin;\n\t\tconst { scroll } = model;\n\n\t\tconst oldValue = scroll();\n\t\tconst newValue = {};\n\t\tlet hasChanges = false;\n\t\tif (oldValue.top !== e.scrollTop) {\n\t\t\ttable.view.addClass(VERTICAL_SCROLL_CLASS);\n\t\t\tnewValue.top = e.scrollTop;\n\t\t\thasChanges = true;\n\t\t}\n\n\t\tif (oldValue.left !== e.scrollLeft) {\n\t\t\ttable.view.addClass(HORIZONTAL_SCROLL_CLASS);\n\t\t\tnewValue.left = e.scrollLeft;\n\t\t\thasChanges = true;\n\t\t}\n\n\t\tif (hasChanges) {\n\t\t\tscroll(newValue, {\n\t\t\t\tsource: 'body.core',\n\t\t\t\tbehavior: 'core'\n\t\t\t});\n\t\t}\n\n\t\tthis.scrollingJob(this.scrollEnd.bind(this));\n\t}\n\n\tscrollEnd() {\n\t\tconst { table } = this.plugin;\n\n\t\ttable.view.removeClass(VERTICAL_SCROLL_CLASS);\n\t\ttable.view.removeClass(HORIZONTAL_SCROLL_CLASS);\n\t}\n\n\twheel(e) {\n\t\tif (e.shiftKey) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { model, table } = this.plugin;\n\t\tif (model.edit().status === 'view') {\n\t\t\tconst { scroll } = model;\n\t\t\tconst upper = 0;\n\n\t\t\tFastdom.measure(() => {\n\t\t\t\tconst lower = table.view.scrollHeight() - table.view.height();\n\t\t\t\tconst deltaY = DEFAULT_DELTA_Y * Math.sign(e.deltaY);\n\t\t\t\tconst top = Math.min(lower, Math.max(upper, scroll().top + deltaY));\n\n\t\t\t\tscroll({ top }, { source: 'body.core' });\n\t\t\t});\n\t\t}\n\t}\n\n\tmouseLeave() {\n\t\tthis.clearHighlight();\n\t}\n\n\tclearHighlight() {\n\t\tconst { view } = this.plugin;\n\t\tconst { highlight } = view;\n\t\tif (highlight.clear.canExecute()) {\n\t\t\thighlight.clear.execute();\n\t\t}\n\t}\n}\n","import { Log } from '../infrastructure/log';\nimport { Renderer } from '../scene/render/render';\nimport { TextSelection } from '../services/text.selection';\n\nexport class BodyLet {\n\tconstructor(plugin) {\n\t\tconst { model, observe, disposable } = plugin;\n\t\tconst render = new Renderer(plugin);\n\n\t\tthis.plugin = plugin;\n\t\tthis.render = render;\n\t\tthis.columns = pin => render.defaultStrategy.columnList(pin);\n\n\t\tobserve(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('rows')) {\n\t\t\t\t\tthis.tryShowBlankLayer();\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserve(model.mouseChanged)\n\t\t\t.subscribe(({ state }) => {\n\t\t\t\tconst { code, status, target } = state;\n\t\t\t\t\n        if (target && code === 'right' && status === 'up') {\n\t\t\t\t\tthis.targetElement = target.element;\n\t\t\t\t\tthis.targetElement.classList.add('q-grid-can-select-text');\n\t\t\t\t\tTextSelection.set(this.targetElement);\n\t\t\t\t}\n\n\t\t\t\tif (this.targetElement && status === 'down') {\n\t\t\t\t\tTextSelection.clear();\n\t\t\t\t\tif (this.targetElement.classList) {\n\t\t\t\t\t\tthis.targetElement.classList.remove('q-grid-can-select-text');\n\t\t\t\t\t}\n          \n\t\t\t\t\tthis.targetElement = null;\n\t\t\t\t}\n\n\t\t\t});\n\n\t\tthis.tryShowBlankLayer();\n\t}\n\n\ttryShowBlankLayer() {\n\t\tLog.info('view.let', 'invalidate');\n\n\t\tconst { model, table } = this.plugin;\n\t\tconst { rows } = model.scene();\n\n\t\tif (!(rows.length || model.data().rows.length)) {\n\t\t\tif (!table.view.hasLayer('blank')) {\n\t\t\t\ttable.view.addLayer('blank');\n\t\t\t}\n\t\t} else {\n\t\t\tif (table.view.hasLayer('blank')) {\n\t\t\t\ttable.view.removeLayer('blank');\n\t\t\t}\n\t\t}\n\t}\n}\n","import { Resource } from '../resource/resource';\nimport { Cache } from '../infrastructure/cache';\n\nexport class BodyState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.cache = new Cache();\n\t}\n}","import { GRID_PREFIX } from '../definition';\n\nexport class BoxHost {\n\tconstructor(host, plugin) {\n\t\tconst { model, observeReply } = plugin;\n\n\t\thost.classList.add(GRID_PREFIX);\n\n\t\tobserveReply(model.dragChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('isActive')) {\n\t\t\t\t\tif (model.drag().isActive) {\n\t\t\t\t\t\thost.classList.add(`${GRID_PREFIX}-drag`);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\thost.classList.remove(`${GRID_PREFIX}-drag`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n}","import { GRID_PREFIX } from '../definition';\nimport { escapeAttr } from '../services/css';\n\nexport function bodyCellClassifier(column) {\n    const classList = [\n        `${GRID_PREFIX}-the-${escapeAttr(column.key)}`,\n        `${GRID_PREFIX}-${escapeAttr(column.type)}`,\n    ];\n\n    if (column.editor) {\n        classList.push(`${GRID_PREFIX}-${escapeAttr(column.editor)}`);\n    }\n\n    if (column.viewWidth) {\n        classList.push(`${GRID_PREFIX}-has-view-width`);\n    }\n\n    if (column.class) {\n        classList.push(escapeAttr(column.class));\n    }\n\n    const className = ' ' + classList.join(' ');\n    return element => element.className += className;\n}\n\nexport function headCellClassifier(column) {\n    const classList = [];\n    if (column.canEdit) {\n        classList.push(`${GRID_PREFIX}-can-edit`);\n    }\n\n    if (column.canResize) {\n        classList.push(`${GRID_PREFIX}-can-resize`);\n    }\n\n    if (column.canSort) {\n        classList.push(`${GRID_PREFIX}-can-sort`);\n    }\n\n    if (column.canMove) {\n        classList.push(`${GRID_PREFIX}-can-move`);\n    }\n\n    if (column.canFilter) {\n        classList.push(`${GRID_PREFIX}-can-filter`);\n    }\n\n    if (column.canHighlight) {\n        classList.push(`${GRID_PREFIX}-can-highlight`);\n    }\n\n    if (column.widthMode) {\n        classList.push(`${GRID_PREFIX}-${column.widthMode}`);\n    }\n\n    const className = ' ' + classList.join(' ');\n    return element => element.className += className;\n}","import { GridError } from '../infrastructure/error';\n\nexport class CellSelector {\n\tconstructor(model, table) {\n\t\tthis.model = model;\n\t\tthis.table = table;\n\t}\n\n\tmap(items) {\n\t\tconst selectionState = this.model.selection();\n\t\tswitch (selectionState.unit) {\n\t\t\tcase 'row':\n\t\t\t\treturn this.mapFromRows(items);\n\t\t\tcase 'column':\n\t\t\t\treturn this.mapFromColumns(items);\n\t\t\tcase 'cell':\n\t\t\t\treturn this.mapFromCells(items);\n\t\t\tcase 'mix':\n\t\t\t\treturn this.mapFromMix(items);\n\t\t\tdefault:\n\t\t\t\tthrow new GridError('cell.selector', `Invalid unit ${selectionState.unit}`);\n\t\t}\n\t}\n\n\tmapFromRows(items) {\n\t\tconst { table } = this;\n\t\tconst result = [];\n\t\tconst rows = table.data.rows();\n\n\t\tfor (let item of items) {\n\t\t\tconst index = rows.indexOf(item);\n\t\t\tfor (let cell of table.body.row(index).cells()) {\n\t\t\t\tresult.push(cell);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tmapFromColumns(items) {\n\t\tconst { table } = this;\n\t\tconst result = [];\n\t\tconst columns = table.data.columns();\n\n\t\tfor (let item of items) {\n\t\t\tconst index = columns.findIndex(c => c === item);\n\t\t\tresult.push(...table.body.column(index).cells());\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tmapFromCells(items) {\n\t\tconst { table } = this;\n\t\tconst result = [];\n\t\tconst rows = table.data.rows();\n\t\tconst columns = table.data.columns();\n\n\t\tfor (let item of items) {\n\t\t\tconst rowIndex = rows.indexOf(item.row);\n\t\t\tconst columnIndex = columns.findIndex((c) => c === item.column);\n\t\t\tresult.push(table.body.cell(rowIndex, columnIndex));\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tmapFromMix(items) {\n\t\tconst entries = Array.from(items);\n\t\tconst rows = entries.filter(item => item.unit === 'row').map(item => item.item);\n\t\tconst cells = entries.filter(item => item.unit === 'cell').map(item => item.item);\n\n\t\treturn [\n\t\t\t...this.mapFromRows(rows),\n\t\t\t...this.mapFromCells(cells)\n\t\t];\n\t}\n}","import { GridError } from '../infrastructure/error';\n\nexport function copyToClipboard(text) {\n\tconst textArea = document.createElement(\"textarea\");\n\n\t//\n\t// *** This styling is an extra step which is likely not required. ***\n\t//\n\t// Why is it here? To ensure:\n\t// 1. the element is able to have focus and selection.\n\t// 2. if element was to flash render it has minimal visual impact.\n\t// 3. less flakyness with selection and copying which **might** occur if\n\t//    the textarea element is not visible.\n\t//\n\t// The likelihood is the element won't even render, not even a\n\t// flash, so some of these are just precautions. However in\n\t// Internet Explorer the element is visible whilst the popup\n\t// box asking the user for permission for the web page to\n\t// copy to the clipboard.\n\t//\n\n\t// Place in top-left corner of screen regardless of scroll position.\n\ttextArea.style.position = 'fixed';\n\ttextArea.style.top = 0;\n\ttextArea.style.left = 0;\n\n\t// Ensure it has a small width and height. Setting to 1px / 1em\n\t// doesn't work as this gives a negative w/h on some browsers.\n\ttextArea.style.width = '2em';\n\ttextArea.style.height = '2em';\n\n\t// We don't need padding, reducing the size if it does flash render.\n\ttextArea.style.padding = 0;\n\n\t// Clean up any borders.\n\ttextArea.style.border = 'none';\n\ttextArea.style.outline = 'none';\n\ttextArea.style.boxShadow = 'none';\n\n\t// Avoid flash of white box if rendered for any reason.\n\ttextArea.style.background = 'transparent';\n\n\ttextArea.value = text;\n\n\tdocument.body.appendChild(textArea);\n\ttextArea.focus();\n\ttextArea.select();\n\n\ttry {\n\t\tdocument.execCommand('copy');\n\t} catch (ex) {\n\t\tthrow new GridError('clipboard', ex.message)\n\t}\n\n\tdocument.body.removeChild(textArea);\n}\n","import { Command } from '../command/command';\nimport { getLabelFactory } from '../services/label';\nimport { copyToClipboard } from './clipboard';\n\nexport class ClipboardLet {\n    constructor(plugin, shortcut) {\n        const { model, table } = plugin;\n\n        this.copy = new Command({\n            priority: 1,\n            source: 'clipboard.let',\n            shortcut: 'ctrl+c',\n            canExecute: () => {\n                const { status } = model.edit();\n                const { copy } = model.clipboard();\n                return status === 'view' && copy.canExecute();\n            },\n            execute: () => {\n                const { cell } = model.navigation();\n                if (cell) {\n                    const { copy } = model.clipboard();\n                    if (copy.execute() !== false) {\n                        const getLabel = getLabelFactory(cell.column);\n                        copyToClipboard(getLabel(cell.row));\n                        table.view.focus();\n                    }\n                }\n\n                return true;\n            }\n        });\n\n        shortcut.register([this.copy]);\n    }\n}\n","import { Command } from '../command/command';\n\nexport class ClipboardState {\n    constructor() {\n        this.copy = new Command();\n    }\n}\n","import { merge as mergeFactory } from '../services/merge';\nimport { compile } from '../services/path';\nimport { getType, inferType, resolveType } from '../services/convert';\nimport { TextColumnModel } from '../column-type/text.column';\nimport { assignWith, isUndefined, noop, startCase } from '../utility/kit';\nimport { columnFactory } from '../column/column.factory';\nimport { GridError } from '../infrastructure/error';\n\nfunction merge(left, right, force = false) {\n\tlet canAssign;\n\tif (force) {\n\t\tcanAssign = (source, target) => !isUndefined(target) && target !== null ? target : source;\n\t}\n\telse {\n\t\tcanAssign = (source, target) => !isUndefined(target) && target !== null && source === null ? target : source;\n\t}\n\n\tconst doMerge = mergeFactory({\n\t\tequals: (l, r) => l.key === r.key,\n\t\tupdate: (l, r) => assignWith(l, r, canAssign),\n\t\tinsert: (r, left) => left.push(r),\n\t\tremove: noop\n\t});\n\n\treturn doMerge(left, right);\n}\n\nfunction hasChanges(statistics) {\n\treturn statistics.some(st => st.inserted || st.update);\n}\n\nexport function generateFactory(model) {\n\tconst { data } = model;\n\tconst createColumn = columnFactory(model);\n\treturn () => {\n\t\tconst { rows } = data();\n\t\tconst htmlColumns = model.columnList().columns;\n\n\t\tconst spawnColumns = [];\n\t\tconst { generation, typeDetection } = model.columnList();\n\t\tif (generation) {\n\t\t\tlet settings = {\n\t\t\t\trows,\n\t\t\t\tcolumnFactory: createColumn,\n\t\t\t\tdeep: false,\n\t\t\t\tcohort: false,\n\t\t\t\ttypeDetection\n\t\t\t};\n\n\t\t\tswitch (generation) {\n\t\t\t\tcase 'shallow': {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'deep': {\n\t\t\t\t\tsettings.deep = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'cohort': {\n\t\t\t\t\tsettings.deep = true;\n\t\t\t\t\tsettings.cohort = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new GridError(\n\t\t\t\t\t\t'column.list.generate',\n\t\t\t\t\t\t`Invalid generation mode \"${generation}\"`\n\t\t\t\t\t);\n\t\t\t}\n\n\t\t\tspawnColumns.push(...generate(settings));\n\t\t}\n\n\t\tconst columns = Array.from(data().columns);\n\n\t\tlet statistics = [];\n\t\tif (spawnColumns.length) {\n\t\t\tstatistics.push(\n\t\t\t\tmerge(columns, spawnColumns, false)\n\t\t\t);\n\t\t}\n\n\t\tif (htmlColumns.length) {\n\t\t\tstatistics.push(\n\t\t\t\tmerge(columns, htmlColumns, true)\n\t\t\t);\n\t\t}\n\n\t\treturn {\n\t\t\tcolumns,\n\t\t\tstatistics,\n\t\t\thasChanges: hasChanges(statistics)\n\t\t};\n\t};\n}\n\nexport function generate(settings) {\n\tconst context = assignWith({\n\t\tdeep: true,\n\t\tcohort: false,\n\t\trows: [],\n\t\tcolumnFactory: () => new TextColumnModel(),\n\t\ttitle: startCase,\n\t\ttestNumber: 10,\n\t\ttypeDetection: 'inference'\n\t}, settings);\n\n\tif (context.rows.length) {\n\t\treturn build(\n\t\t\tcontext.rows[0],\n\t\t\t[],\n\t\t\t{\n\t\t\t\tcolumnFactory: context.columnFactory,\n\t\t\t\tdeep: context.deep,\n\t\t\t\tcohort: context.cohort,\n\t\t\t\ttitle: context.title,\n\t\t\t\ttypeDetection: context.typeDetection,\n\t\t\t\ttestRows: context.rows.slice(0, context.testNumber),\n\t\t\t}\n\t\t);\n\t}\n\n\treturn [];\n}\n\nfunction build(graph, pathParts, settings) {\n\tconst { columnFactory, deep, cohort, title, testRows, typeDetection } = settings;\n\n\tconst props = Object.getOwnPropertyNames(graph);\n\treturn props.reduce((memo, prop) => {\n\t\tconst propParts = [...pathParts, prop];\n\t\tconst propValue = compile(propParts);\n\t\tconst propPath = propParts.join('.');\n\n\t\tconst subject = graph[prop];\n\t\tconst type = typeDetection === 'raw'\n\t\t\t? resolveType(testRows.map(propValue))\n\t\t\t: inferType(testRows.map(propValue));\n\n\t\tswitch (type) {\n\t\t\tcase 'array': {\n\t\t\t\tconst column = columnFactory(type).model;\n\t\t\t\tcolumn.key = propPath;\n\t\t\t\tcolumn.title = title(propPath, graph, column.length);\n\t\t\t\tcolumn.value = propValue;\n\t\t\t\tcolumn.source = 'generation';\n\t\t\t\tif (subject.length) {\n\t\t\t\t\tcolumn.itemType = getType(subject[0]);\n\t\t\t\t\tswitch (column.itemType) {\n\t\t\t\t\t\tcase 'date': {\n\t\t\t\t\t\t\tcolumn.itemFormat = columnFactory('date').model.format;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'datetime': {\n\t\t\t\t\t\t\tcolumn.itemFormat = columnFactory('datetime').model.format;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tmemo.push(column);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'collection': {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'object': {\n\t\t\t\tif (deep) {\n\t\t\t\t\tconst columns = build(\n\t\t\t\t\t\tsubject,\n\t\t\t\t\t\tpropParts,\n\t\t\t\t\t\tsettings\n\t\t\t\t\t);\n\n\t\t\t\t\tif (cohort) {\n\t\t\t\t\t\tconst column = columnFactory('cohort').model;\n\t\t\t\t\t\tcolumn.key = propPath;\n\t\t\t\t\t\tcolumn.title = title(propPath, graph, column.length);\n\t\t\t\t\t\tcolumn.value = propValue;\n\t\t\t\t\t\tcolumn.source = 'generation';\n\t\t\t\t\t\tcolumn.children.push(...columns);\n\t\t\t\t\t\tmemo.push(column);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmemo.push(...columns);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tconst column = columnFactory(type).model;\n\t\t\t\tcolumn.key = propPath;\n\t\t\t\tcolumn.title = title(propPath, graph, column.length);\n\t\t\t\tcolumn.value = propValue;\n\t\t\t\tcolumn.source = 'generation';\n\t\t\t\tmemo.push(column);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn memo;\n\t}, []);\n}\n","import { columnFactory } from '../column/column.factory';\nimport * as columnService from '../column/column.service';\nimport { getType } from '../services/convert';\nimport { compile } from '../services/path';\nimport { clone, isUndefined } from '../utility/kit';\n\nexport class ColumnListHost {\n\tconstructor(model, canCopy, parseFactory) {\n\t\tthis.model = model;\n\t\tthis.canCopy = canCopy;\n\t\tthis.parseFactory = parseFactory;\n\t}\n\n\tgenerateKey(source) {\n\t\tif (!isUndefined(source.editor)) {\n\t\t\treturn `$default.${source.editor}`;\n\t\t}\n\n\t\tif (!isUndefined(source.type)) {\n\t\t\treturn `$default.${source.type}`;\n\t\t}\n\n\t\treturn '$default';\n\t}\n\n\tcopy(target, source) {\n\t\tconst canCopy = this.canCopy;\n\t\tconst parseFactory = this.parseFactory;\n\n\t\tObject.keys(source)\n\t\t\t.filter(key => canCopy(key, source, target))\n\t\t\t.forEach(key => {\n\t\t\t\tconst sourceValue = source[key];\n\t\t\t\tconst accessor = compile([key]);\n\t\t\t\tconst targetValue = accessor(target);\n\t\t\t\tconst targetType = getType(targetValue);\n\t\t\t\tlet value = sourceValue;\n\t\t\t\tif (targetValue !== null && !isUndefined(targetValue)) {\n\t\t\t\t\tconst parse = parseFactory(targetType);\n\t\t\t\t\tconst typedValue = parse(sourceValue, targetValue);\n\t\t\t\t\tif (typedValue !== null) {\n\t\t\t\t\t\tvalue = typedValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\taccessor(target, value);\n\t\t\t});\n\t}\n\n\tadd(column) {\n\t\tconst { columnList, scene, data } = this.model;\n\n\t\tconst columns = columnList().columns.concat([column]);\n\t\tcolumnList({ columns }, {\n\t\t\tsource: 'column.list.host',\n\t\t\tbehavior: 'core'\n\t\t});\n\n\t\tif (scene().status !== 'idle') {\n\t\t\tdata({\n\t\t\t\tcolumns: Array.from(data().columns)\n\t\t\t}, {\n\t\t\t\tsource: 'column.list.host'\n\t\t\t});\n\t\t}\n\t}\n\n\tregister(column) {\n\t\tconst { columnList } = this.model;\n\t\tconst reference = clone(columnList().reference);\n\n\t\treference[column.type || '$default'] = column;\n\t\tcolumnList({ reference }, {\n\t\t\tsource: 'column.list.host',\n\t\t\tbehavior: 'core'\n\t\t});\n\t}\n\n\textract(key, type) {\n\t\tconst { model } = this;\n\n\t\tconst buildColumn = columnFactory(model);\n\n\t\tlet tplColumn = columnService.findColumn(model.columnList().line, key);\n\t\tif (tplColumn) {\n\t\t\treturn buildColumn(type, tplColumn);\n\t\t}\n\n\t\ttplColumn = buildColumn(type || 'text').model;\n\t\ttplColumn.key = key;\n\t\ttplColumn.source = 'template';\n\n\t\tconst dataColumn = columnService.findColumn(model.data().columns, key);\n\t\tif (dataColumn) {\n\t\t\tthis.copy(tplColumn, dataColumn);\n\t\t}\n\n\t\treturn tplColumn;\n\t}\n\n\tdelete(key) {\n\t\tconst { columnList, data } = this.model;\n\n\t\tconst htmlColumns = columnList().columns;\n\t\tconst index = columnService.findIndex(htmlColumns, key);\n\t\tif (index >= 0) {\n\t\t\tconst columns = Array.from(htmlColumns);\n\t\t\tcolumns.splice(index, 1);\n\t\t\tcolumnList({ columns }, { source: 'column.list.host', behavior: 'core' });\n\t\t}\n\n\t\tconst dataColumns = Array.from(data().columns);\n\t\tconst line = columnService.findLine(dataColumns, key);\n\t\tif (line) {\n\t\t\tline.columns.splice(line.index, 1);\n\n\t\t\t// trigger columns pipe unit\n\t\t\tdata({ columns: dataColumns }, { source: 'column.list.host' });\n\t\t}\n\t}\n}\n","import { bend, copy, preOrderDFS } from '../node/node.service';\n\nexport { sortIndexFactory, mergeTree };\n\nfunction sortIndexFactory(model) {\n\tconst templateIndex = model.columnList().columns.map(c => c.key);\n\n\treturn (columns, scores) => {\n\t\tconst { length } = columns;\n\t\tscores = Object.assign({\n\t\t\tlist: column => (column.category === 'data' || column.category === 'cohort') ? 0.1 : 0.3,\n\t\t\tindex: () => 0.2,\n\t\t\tview: column => length + ((column.category !== 'data' && column.category !== 'cohort') ? 0.1 : 0.3),\n\t\t\ttemplate: () => length + 0.4\n\t\t}, scores);\n\n\t\tconst viewIndex = columns.map(c => c.key);\n\n\t\tconst sort = sortFactory(scores)(templateIndex, viewIndex);\n\t\tconst left = sort(columns.filter(c => c.pin === 'left'));\n\t\tconst middle = sort(columns.filter(c => c.pin === 'mid'));\n\t\tconst right = sort(columns.filter(c => c.pin === 'right'));\n\n\t\treturn left.concat(middle).concat(right);\n\t};\n}\n\nfunction sortFactory(scores) {\n\treturn (templateIndex, viewIndex) => {\n\t\tconst compare = compareFactory(scores, templateIndex, viewIndex);\n\t\treturn columns => {\n\t\t\tconst columnIndex = Array.from(columns);\n\t\t\tcolumnIndex.sort(compare);\n\n\t\t\treturn columnIndex.map(c => c.key);\n\t\t};\n\t};\n}\n\nfunction compareFactory(scoreFor, templateIndex, viewIndex) {\n\tconst viewFind = findFactory(viewIndex);\n\tconst templateFind = findFactory(templateIndex);\n\n\tconst weightCache = {};\n\tconst getWeight = column => {\n\t\tconst key = column.key;\n\t\tif (weightCache.hasOwnProperty(key)) {\n\t\t\treturn weightCache[key];\n\t\t}\n\n\t\tconst candidates = [\n\t\t\tcolumn.index + scoreFor.index(column),\n\t\t\tviewFind(key) + scoreFor.view(column),\n\t\t\ttemplateFind(key) + scoreFor.template(column)\n\t\t];\n\n\t\tconst weights = candidates.filter(w => w >= 0);\n\t\tconst weight = weights.length ? weights[0] : -1;\n\t\tweightCache[key] = weight;\n\n\t\treturn weight;\n\t};\n\n\treturn (x, y) => {\n\t\tconst xi = getWeight(x);\n\t\tconst yi = getWeight(y);\n\n\t\treturn yi === -1 ? -1 : xi === -1 ? 1 : xi - yi;\n\t};\n}\n\nfunction findFactory(index) {\n\tconst map = index.reduce((memo, key, i) => {\n\t\tmemo.set(key, i);\n\t\treturn memo;\n\t}, new Map());\n\n\treturn key => (map.has(key) ? map.get(key) : -1);\n}\n\nfunction mergeTree(newTree, oldTree, buildIndex) {\n\tconst current = running(newTree, buildIndex);\n\tconst screen = former(oldTree, current);\n\tconst insertNear = insertFactory(current, screen);\n\tconst insertCohort = insertCohortFactory(current, screen);\n\n\tconst root = current.line[0];\n\tif (!screen.set.has(root.key.model.key)) {\n\t\tscreen.line.unshift(copy(root));\n\t\tscreen.line.forEach(n => n.level++);\n\t}\n\n\tfor (let i = 1, length = current.line.length; i < length; i++) {\n\t\tconst node = current.line[i];\n\t\tconst { model } = node.key;\n\t\tif (screen.set.has(model.key)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst prevNode = current.line[i - 1];\n\t\tif (model.type === 'cohort') {\n\t\t\tinsertCohort(prevNode, node);\n\t\t} else {\n\t\t\tinsertNear(prevNode, node, i);\n\t\t}\n\t}\n\n\treturn bend(screen.line);\n}\n\nfunction running(tree, buildIndex) {\n\tconst result = {\n\t\tline: [],\n\t\tmap: new Map()\n\t};\n\n\tpreOrderDFS([tree], node => {\n\t\tresult.line.push(node);\n\t\tresult.map.set(node.key.model.key, node.key);\n\n\t\t// As we use pre order direction we can manipulate with children without affecting on algorithm.\n\t\t// Below we sort columns in appropriate order.\n\t\tconst columns = node.children.map(child => child.key.model);\n\t\tconst index = buildIndex(columns);\n\n\t\tlet cursor = 0;\n\t\tconst indexMap = index.reduce((memo, key) => {\n\t\t\tmemo[key] = cursor++;\n\t\t\treturn memo;\n\t\t}, {});\n\n\t\tnode.children.sort((x, y) => indexMap[x.key.model.key] - indexMap[y.key.model.key]);\n\t});\n\n\treturn result;\n}\n\nfunction former(tree, current) {\n\tconst result = {\n\t\tline: [],\n\t\tset: new Set()\n\t};\n\n\tpreOrderDFS([tree], node => {\n\t\t// Filter out nodes if they were deleted from newTree.\n\t\tconst { key } = node.key.model;\n\t\tconst view = current.map.get(key);\n\t\tif (view) {\n\t\t\tconst newNode = copy(node);\n\t\t\tnewNode.key = view;\n\t\t\tresult.line.push(newNode);\n\t\t\tresult.set.add(key);\n\t\t}\n\t});\n\n\treturn result;\n}\n\nfunction insertFactory(current, screen) {\n\tconst { line } = screen;\n\treturn (prevNode, node, i) => {\n\t\tlet pos = line.findIndex(n => n.key.model.key === prevNode.key.model.key);\n\n\t\tconst target = copy(node);\n\t\ttarget.level = node.level;\n\n\t\tif (everyNextIsNew(current, screen, i)) {\n\t\t\tline.push(target);\n\t\t} else {\n\t\t\tline.splice(pos + 1, 0, target);\n\t\t}\n\t};\n}\n\nfunction insertCohortFactory(current, screen) {\n\tconst insertNear = insertFactory(current, screen);\n\tconst { line } = screen;\n\treturn (prevNode, node) => {\n\t\tconst set = new Set(node.children.map(n => n.key.model.key));\n\t\tconst index = line.findIndex(n => set.has(n.key.model.key));\n\n\t\tif (index < 0) {\n\t\t\tinsertNear(prevNode, node);\n\t\t\treturn;\n\t\t}\n\n\t\tconst target = copy(node);\n\t\tconst { level } = line[index];\n\t\ttarget.level = level;\n\t\tline.splice(index, 0, target);\n\n\t\tfor (let i = index + 1, end = line.length; i < end; i++) {\n\t\t\tconst child = line[i];\n\t\t\tif (child.level !== level) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (set.has(child.key.model.key)) {\n\t\t\t\tchild.level = level + 1;\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction everyNextIsNew(current, screen, index) {\n\tconst { line } = current;\n\n\tlet n;\n\twhile ((n = line[++index])) {\n\t\tif (screen.set.has(n.key.model.key)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n","import { Node } from '../node/node';\nimport { CohortColumn, CohortColumnModel } from '../column-type/cohort.column';\n\nexport class ColumnListState {\n\tconstructor() {\n\t\tthis.generation = null; // deep | shallow | cohort | null\n\t\tthis.typeDetection = 'inference'; // inference | raw\n\n\t\tconst root = new CohortColumnModel();\n\t\troot.key = '$root';\n\n\t\tthis.index = new Node(new CohortColumn(root), 0);\n\t\t\n\t\tthis.columns = [];\n\t\tthis.reference = {};\n\t\tthis.line = [];\n\t}\n}\n","import { FormatService } from '../format/format.service';\nimport { ColumnView } from '../scene/view/column.view';\nimport { getValue } from '../services/value';\nimport { TemplatePath } from '../template/template.path';\nimport { isArray } from '../utility/kit';\nimport { DataColumnModel } from './data.column.model';\n\nTemplatePath.register('array-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('array-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nexport class ArrayColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('array');\n\n\t\tthis.itemType = 'text';\n\t\tthis.itemFormat = '';\n\n\t\tthis.label = function (row) {\n\t\t\tconst value = getValue(row, this);\n\t\t\tif (isArray(value)) {\n\t\t\t\tlet formatter;\n\t\t\t\tswitch (this.itemType) {\n\t\t\t\t\tcase 'number': {\n\t\t\t\t\t\tformatter = FormatService.number;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'date':\n\t\t\t\t\tcase 'datetime': {\n\t\t\t\t\t\tformatter = FormatService.date;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\tformatter = this.itemLabel.bind(this);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst format = this.itemFormat;\n\t\t\t\treturn value.map(item => formatter(item, format)).join(', ');\n\t\t\t}\n\n\t\t\treturn value;\n\t\t};\n\t}\n}\n\nexport class ArrayColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? ArrayColumn.assign(model) : new ArrayColumnModel();\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { DataColumnModel } from './data.column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('bool-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('bool-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nexport class BoolColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('bool');\n\n\t\tthis.trueValue = true;\n\t\tthis.falseValue = false;\n\n\t\tthis.editorOptions.cruise = 'transparent';\n\n\t\t// as we use 'this' pointer inside, we can't use lambda in 2 here\n\t\tthis.isIndeterminate = function (value) {\n\t\t\treturn !(value === this.trueValue || value === this.falseValue);\n\t\t};\n\n\t\tthis.isChecked = function (value) {\n\t\t\treturn value === this.trueValue;\n\t\t};\n\t}\n}\n\nexport class BoolColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? BoolColumn.assign(model) : new BoolColumnModel();\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { ColumnModel } from './column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('cohort-cell', (template) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: `${template.for}.${template.type}`\n\t};\n});\n\nexport class CohortColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper('cohort');\n\n\t\tthis.key = '$cohort';\n\n\t\tthis.canEdit = false;\n\t\tthis.canSort = false;\n\t\tthis.canResize = false;\n\t\tthis.canFocus = false;\n\t\tthis.canFilter = false;\n\t\tthis.category = 'cohort';\n\t}\n}\n\nexport class CohortColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? CohortColumn.assign(model) : new CohortColumnModel();\n\t}\n}","import { identity, compare } from '../utility/kit';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('custom-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('custom-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nexport class ColumnModel {\n\tconstructor(type = 'text') {\n\t\tthis.key = null;\n\t\tthis.path = null;\n\t\tthis.labelPath = null;\n\n\t\tthis.type = type;\n\t\tthis.title = null;\n\t\tthis.description = null;\n\t\tthis.pin = 'mid';\n\t\tthis.origin = 'specific';\n\t\tthis.source = 'user';\n\t\tthis.category = 'data';\n\t\tthis.class = null;\n\t\tthis.editor = null;\n\t\tthis.editorOptions = {\n\t\t\tmodelFactory: ({ createDefaultModel }) => createDefaultModel(),\n\t\t\ttrigger: 'click', // click | custom | focus\n\t\t\tcruise: 'control', // control | transparent\n\t\t\tlabel: null,\n\t\t\tvalue: identity,\n\t\t\tactions: []\n\t\t};\n\n\t\tthis.width = null;\n\t\tthis.minWidth = null;\n\t\tthis.maxWidth = null;\n\t\tthis.viewWidth = null;\n\n\t\tthis.widthMode = 'relative'; // relative | absolute | fit-head\n\n\t\tthis.canEdit = true;\n\t\tthis.canResize = true;\n\t\tthis.canSort = true;\n\t\tthis.canMove = true;\n\t\tthis.canFilter = true;\n\t\tthis.canHighlight = true;\n\t\tthis.canFocus = true;\n\n\t\tthis.isVisible = true;\n\t\tthis.index = -1;\n\n\t\tthis.value = null;\n\t\tthis.label = null;\n\n\t\tthis.compare = compare;\n\n\t\tthis.children = [];\n\n\t\tthis.$label = null;\n\t\tthis.$value = null;\n\n\t\tthis.itemLabel = identity;\n\n\t\tthis.startNumber = 1;\n\t}\n\n\ttoString() {\n\t\treturn `${this.type}: ${this.title}`;\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { DataColumnModel } from './data.column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('currency-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('currency-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\n\nexport class CurrencyColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('currency');\n\n\t\tthis.maxLength = 20;\n\t\tthis.symbol = '$';\n\t\tthis.code = 'USD';\n\t}\n}\n\nexport class CurrencyColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? CurrencyColumn.assign(model) : new CurrencyColumnModel();\n\t}\n}","import { ColumnModel } from './column.model';\n\nexport class DataColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper(...arguments);\n\n\t\tthis.isDefault = true;\n\t\tthis.aggregation = null;\n\t\tthis.aggregationOptions = {\n\t\t\tdistinct: false,\n\t\t\tseparator: '; '\n\t\t};\n\t}\n}","import { FormatService } from '../format/format.service';\nimport { Log } from '../infrastructure/log';\nimport { ColumnView } from '../scene/view/column.view';\nimport { parseFactory } from '../services/convert';\nimport { getValue } from '../services/value';\nimport { TemplatePath } from '../template/template.path';\nimport { DataColumnModel } from './data.column.model';\n\nTemplatePath.register('date-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('date-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nexport class DateColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('date');\n\n\t\tthis.format = 'MM/dd/yyyy';\n\t\tthis.parse = parseFactory('date');\n\n\t\tthis.label = function (row) {\n\t\t\tconst value = getValue(row, this);\n\t\t\ttry {\n\t\t\t\tconst date = this.parse(value);\n\t\t\t\treturn FormatService.date(date, this.format);\n\t\t\t} catch (ex) {\n\t\t\t\tLog.error('date.column', ex);\n\t\t\t\treturn value;\n\t\t\t}\n\t\t};\n\t}\n}\n\nexport class DateColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? DateColumn.assign(model) : new DateColumnModel();\n\t}\n}","import { FormatService } from '../format/format.service';\nimport { Log } from '../infrastructure/log';\nimport { ColumnView } from '../scene/view/column.view';\nimport { parseFactory } from '../services/convert';\nimport { getValue } from '../services/value';\nimport { TemplatePath } from '../template/template.path';\nimport { DataColumnModel } from './data.column.model';\n\nTemplatePath.register('datetime-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('datetime-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nexport class DateTimeColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('datetime');\n\n\t\tthis.format = 'MM/dd/yyyy h:mm a';\n\t\tthis.dateFormat = 'MM/dd/yyyy';\n\t\tthis.timeFormat = 'h:mm a';\n\t\tthis.parse = parseFactory('datetime');\n\n\t\tthis.label = function (row) {\n\t\t\tconst value = getValue(row, this);\n\t\t\ttry {\n\t\t\t\tconst date = this.parse(value);\n\t\t\t\treturn FormatService.date(date, this.format);\n\t\t\t} catch (ex) {\n\t\t\t\tLog.error('datetime.column', ex);\n\t\t\t\treturn value;\n\t\t\t}\n\t\t};\n\t}\n}\n\nexport class DateTimeColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? DateTimeColumn.assign(model) : new DateTimeColumnModel();\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { DataColumnModel } from './data.column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('email-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('email-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nexport class EmailColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('email');\n\n\t\tthis.editorOptions.trigger = 'custom';\n\t}\n}\n\nexport class EmailColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? EmailColumn.assign(model) : new EmailColumnModel();\n\t}\n}","import { isFileAnImage } from '../io/file';\nimport { ColumnView } from '../scene/view/column.view';\nimport { TemplatePath } from '../template/template.path';\nimport { yes } from '../utility/kit';\nimport { DataColumnModel } from './data.column.model';\n\nTemplatePath.register('file-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('file-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nexport class FileColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('file');\n\n\t\tthis.canUpload = yes;\n\t\tthis.editorOptions.trigger = 'custom';\n\n\t\tthis.hasPreview = name => isFileAnImage(name);\n\t\tthis.canSort = false;\n\t\tthis.canFilter = false;\n\t}\n}\n\nexport class FileColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? FileColumn.assign(model) : new FileColumnModel();\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { ColumnModel } from './column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('filter-row-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nexport class FilterRowColumnModel extends ColumnModel {\n\tconstructor(model) {\n\t\tsuper();\n\n\t\tObject.assign(this, model);\n\n\t\tthis.key = `$filter.row.${model.key}`;\n\t\tthis.type = 'filter-row';\n\t\tthis.category = 'control';\n\n\t\tthis.canResize = false;\n\t\tthis.canSort = false;\n\t\tthis.canMove = false;\n\n\t\tthis.model = model;\n\t}\n}\n\nexport class FilterRowColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(new FilterRowColumnModel(model));\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { ColumnModel } from './column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('group-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.type\n\t};\n});\n\nTemplatePath.register('group-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nexport class GroupColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper('group');\n\n\t\tthis.key = '$group';\n\t\tthis.path = 'key';\n\t\tthis.labelPath = 'key';\n\t\tthis.title = 'Group';\n\t\tthis.offset = 24;\n\t\tthis.canEdit = false;\n\t\tthis.canSort = false;\n\t\tthis.canFilter = false;\n\t\tthis.category = 'control';\n\t\tthis.by = null;\n\t\tthis.label = function (node) {\n\t\t\tif (node.type === 'row') {\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tconst { by, labelPath } = this;\n\t\t\treturn !by || by === node.source ? node[labelPath] : '';\n\t\t};\n\t}\n}\n\nexport class GroupColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? GroupColumn.assign(model) : new GroupColumnModel();\n\t}\n}\n","import { ColumnView } from '../scene/view/column.view';\nimport { DataColumnModel } from './data.column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('group-summary-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nexport class GroupSummaryColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('group-summary');\n\n\t\tthis.key = '$group.summary';\n\t\tthis.category = 'control';\n\n\t\tthis.canEdit = false;\n\t\tthis.canResize = false;\n\t\tthis.canHighlight = false;\n\t\tthis.canFilter = false;\n\t\tthis.canSort = false;\n\t\tthis.canMove = false;\n\t}\n}\n\nexport class GroupSummaryColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? GroupSummaryColumn.assign(model) : new GroupSummaryColumnModel();\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { DataColumnModel } from './data.column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('id-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('id-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nexport class IdColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('id');\n\t}\n}\n\nexport class IdColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? IdColumn.assign(model) : new IdColumnModel();\n\t}\n}","import { isFileAnImage } from '../io/file';\nimport { ColumnView } from '../scene/view/column.view';\nimport { TemplatePath } from '../template/template.path';\nimport { yes } from '../utility/kit';\nimport { DataColumnModel } from './data.column.model';\n\nTemplatePath.register('image-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('image-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nexport class ImageColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('image');\n\n\t\tthis.canSort = false;\n\t\tthis.canFilter = false;\n\t\tthis.canUpload = yes;\n\n\t\tthis.hasPreview = name => isFileAnImage(name);\n\t}\n}\n\nexport class ImageColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? ImageColumn.assign(model) : new ImageColumnModel();\n\t}\n}\n","import { ColumnView } from '../scene/view/column.view';\nimport { DataColumnModel } from './data.column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('number-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('number-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nexport class NumberColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('number');\n\n\t\tthis.format = '';\n\t}\n}\n\nexport class NumberColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? NumberColumn.assign(model) : new NumberColumnModel();\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { ColumnModel } from './column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('pad-cell', (template) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: `${template.for}.${template.type}`\n\t};\n});\n\nexport class PadColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper('pad');\n\n\t\tthis.key = '$pad';\n\t\tthis.category = 'markup';\n\n\t\tthis.title = '';\n\t\tthis.canEdit = false;\n\t\tthis.canSort = false;\n\t\tthis.canResize = false;\n\t\tthis.canHighlight = false;\n\t\tthis.canFocus = false;\n\t\tthis.canMove = false;\n\t\tthis.canFilter = false;\t\t\n\t\tthis.source = 'generation';\n\t}\n}\n\nexport class PadColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? PadColumn.assign(model) : new PadColumnModel();\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { DataColumnModel } from './data.column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('password-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('password-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nexport class PasswordColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('password');\n\n\t\tthis.canSort = false;\n\t\tthis.canFilter = false;\n\t}\n}\n\nexport class PasswordColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? PasswordColumn.assign(model) : new PasswordColumnModel();\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { ColumnModel } from './column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('pivot-cell', (template) => {\n\treturn {\n\t\tmodel: 'pivot',\n\t\tresource: template.for\n\t};\n});\n\nexport class PivotColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper('pivot');\n\n\t\tthis.key = '$pivot';\n\t\tthis.title = 'Pivot';\n\n\t\tthis.source = 'generation';\n\t\tthis.category = 'pivot';\n\t\tthis.canEdit = false;\n\t\tthis.canSort = false;\n\t\tthis.canResize = false;\n\t\tthis.canFilter = false;\n\t\tthis.canMove = false;\n\t}\n}\n\nexport class PivotColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? PivotColumn.assign(model) : new PivotColumnModel();\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { DataColumnModel } from './data.column.model';\nimport { TemplatePath } from '../template/template.path';\nimport { Model } from '../model/model';\n\nTemplatePath.register('reference-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('reference-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nexport class ReferenceColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('reference');\n\n\t\tthis.editorOptions.trigger = 'custom';\t\t\n\t}\n}\n\nexport class ReferenceColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? ReferenceColumn.assign(model) : new ReferenceColumnModel();\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { ColumnModel } from './column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('row-details-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nexport class RowDetailsColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper('row-details');\n\n\t\tthis.key = '$row.details';\n\t\tthis.category = 'control';\n\n\t\tthis.canEdit = false;\n\t\tthis.canResize = false;\n\t\tthis.canHighlight = false;\n\t\tthis.canFilter = false;\n\t\tthis.canSort = false;\n\t\tthis.canMove = false;\n\t}\n}\n\nexport class RowDetailsColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? RowDetailsColumn.assign(model) : new RowDetailsColumnModel();\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { ColumnModel } from './column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('row-expand-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nexport class RowExpandColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper('row-expand');\n\n\t\tthis.key = '$row.expand';\n\t\tthis.category = 'control';\n\n\t\tthis.canEdit = false;\n\t\tthis.canResize = false;\n\t\tthis.canFilter = false;\n\t\tthis.canSort = false;\n\t\tthis.canHighlight = false;\n\t\tthis.canMove = false;\n\t}\n}\n\nexport class RowExpandColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? RowExpandColumn.assign(model) : new RowExpandColumnModel();\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { ColumnModel } from './column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('row-indicator-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nexport class RowIndicatorColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper('row-indicator');\n\n\t\tthis.key = '$row.indicator';\n\t\tthis.category = 'control';\n\n\t\tthis.canEdit = false;\n\t\tthis.canSort = false;\n\t\tthis.canResize = false;\n\t\tthis.canMove = false;\n\t\tthis.canFocus = false;\n\t\tthis.canHighlight = false;\n\t\tthis.canFilter = false;\n\t\tthis.pin = 'left';\n\t}\n}\n\nexport class RowIndicatorColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? RowIndicatorColumn.assign(model) : new RowIndicatorColumnModel();\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { ColumnModel } from './column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('row-number-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nexport class RowNumberColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper('row-number');\n\n\t\tthis.pin = 'left';\n\t\tthis.key = '$row.number';\n\t\tthis.title = 'No.';\n\t\tthis.canEdit = false;\n\t\tthis.canResize = true;\n\t\tthis.canFocus = false;\n\t\tthis.canMove = false;\n\t\tthis.canHighlight = false;\n\t\tthis.canSort = false;\n\t\tthis.canFilter = false;\n\t\tthis.category = 'control';\n\t}\n}\n\nexport class RowNumberColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? RowNumberColumn.assign(model) : new RowNumberColumnModel();\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { DataColumnModel } from './data.column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('row-options-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('row-options-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nexport class RowOptionsColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('row-options');\n\n\t\tthis.key = '$row.options';\n\t\tthis.category = 'control';\n\n\t\tthis.canEdit = true;\n\t\tthis.canResize = false;\n\t\tthis.canMove = false;\n\t\tthis.canHighlight = false;\n\t\tthis.canFilter = false;\n\t\tthis.pin = 'right';\n\t}\n}\n\nexport class RowOptionsColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? RowOptionsColumn.assign(model) : new RowOptionsColumnModel();\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { ColumnModel } from './column.model';\nimport { TemplatePath } from '../template/template.path';\nimport { noop } from '../utility/kit';\n\nTemplatePath.register('select-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('select-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nexport class SelectColumnModel extends ColumnModel {\n\tconstructor() {\n\t\tsuper('select');\n\n\t\tthis.key = '$select';\n\t\tthis.title = '';\n\t\tthis.category = 'control';\n\n\t\tthis.canEdit = false;\n\t\tthis.editorOptions.cruise = 'transparent';\n\t\tthis.value = noop;\n\n\t\tthis.canResize = false;\n\t}\n}\n\nexport class SelectColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? SelectColumn.assign(model) : new SelectColumnModel();\n\t}\n}\n","import { ColumnView } from '../scene/view/column.view';\nimport { DataColumnModel } from './data.column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('text-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('text-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('text-area-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nexport class TextColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('text');\n\n\t\tthis.maxLength = 140;\n\t}\n}\n\nexport class TextColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? TextColumn.assign(model) : new TextColumnModel();\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { DataColumnModel } from './data.column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('time-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('time-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nexport class TimeColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('time');\n\n\t\tthis.format = 'h:mm a';\n\t}\n}\n\nexport class TimeColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? TimeColumn.assign(model) : new TimeColumnModel();\n\t}\n}","import { ColumnView } from '../scene/view/column.view';\nimport { DataColumnModel } from './data.column.model';\nimport { TemplatePath } from '../template/template.path';\n\nTemplatePath.register('url-cell', (template, column) => {\n\treturn {\n\t\tmodel: template.for,\n\t\tresource: column.key\n\t};\n});\n\nTemplatePath.register('url-cell-edit', (template, column) => {\n\treturn {\n\t\tmodel: 'edit',\n\t\tresource: column.key\n\t};\n});\n\nexport class UrlColumnModel extends DataColumnModel {\n\tconstructor() {\n\t\tsuper('url');\n\n\t\tthis.editorOptions.trigger = 'custom';\n\t}\n}\n\nexport class UrlColumn extends ColumnView {\n\tconstructor(model) {\n\t\tsuper(model);\n\t}\n\n\tstatic model(model) {\n\t\treturn model ? UrlColumn.assign(model) : new UrlColumnModel();\n\t}\n}","import { assignWith, clone, isUndefined } from '../utility/kit';\nimport { ColumnView as CustomColumn } from '../scene/view/column.view';\nimport { ArrayColumn } from '../column-type/array.column';\nimport { BoolColumn } from '../column-type/bool.column';\nimport { CohortColumn } from '../column-type/cohort.column';\nimport { CurrencyColumn } from '../column-type/currency.column';\nimport { DateColumn } from '../column-type/date.column';\nimport { DateTimeColumn } from '../column-type/datetime.column';\nimport { EmailColumn } from '../column-type/email.column';\nimport { FileColumn } from '../column-type/file.column';\nimport { GroupColumn } from '../column-type/group.column';\nimport { GroupSummaryColumn } from '../column-type/group.summary.column';\nimport { IdColumn } from '../column-type/id.column';\nimport { ImageColumn } from '../column-type/image.column';\nimport { NumberColumn } from '../column-type/number.column';\nimport { PadColumn } from '../column-type/pad.column';\nimport { PasswordColumn } from '../column-type/password.column';\nimport { PivotColumn } from '../column-type/pivot.column';\nimport { ReferenceColumn } from '../column-type/reference.column';\nimport { RowDetailsColumn } from '../column-type/row.details.column';\nimport { RowExpandColumn } from '../column-type/row.expand.column';\nimport { RowIndicatorColumn } from '../column-type/row.indicator.column';\nimport { RowNumberColumn } from '../column-type/row.number.column';\nimport { RowOptionsColumn } from '../column-type/row.options.column';\nimport { SelectColumn } from '../column-type/select.column';\nimport { TextColumn } from '../column-type/text.column';\nimport { TimeColumn } from '../column-type/time.column';\nimport { UrlColumn } from '../column-type/url.column';\n\nfunction merge(target, source) {\n\tif (target && source) {\n\t\treturn assignWith(target, source, (s, t) => isUndefined(s) ? t : s);\n\t}\n\n\treturn target || clone(source);\n}\n\nexport function columnFactory(model) {\n\tconst { columnList } = model;\n\tconst columnMap = {\n\t\t'array': ArrayColumn,\n\t\t'bool': BoolColumn,\n\t\t'cohort': CohortColumn,\n\t\t'currency': CurrencyColumn,\n\t\t'custom': CustomColumn,\n\t\t'date': DateColumn,\n\t\t'datetime': DateTimeColumn,\n\t\t'email': EmailColumn,\n\t\t'file': FileColumn,\n\t\t'group': GroupColumn,\n\t\t'id': IdColumn,\n\t\t'image': ImageColumn,\n\t\t'number': NumberColumn,\n\t\t'pad': PadColumn,\n\t\t'password': PasswordColumn,\n\t\t'pivot': PivotColumn,\n\t\t'reference': ReferenceColumn,\n\t\t'row-details': RowDetailsColumn,\n\t\t'row-expand': RowExpandColumn,\n\t\t'row-indicator': RowIndicatorColumn,\n\t\t'row-number': RowNumberColumn,\n\t\t'row-options': RowOptionsColumn,\n\t\t'select': SelectColumn,\n\t\t'group-summary': GroupSummaryColumn,\n\t\t'text': TextColumn,\n\t\t'time': TimeColumn,\n\t\t'url': UrlColumn\n\t};\n\n\tconst create = (entityType, columnType, body) => {\n\t\tconst Type = columnMap[entityType];\n\t\tconst { reference } = columnList();\n\t\tconst defaultSettings = reference['$default'];\n\t\tbody = merge(body, defaultSettings);\n\t\tconst typeSettings = reference[columnType];\n\t\tbody = merge(body, typeSettings);\n\n\t\tconst model = Type.model(body);\n\t\treturn new Type(model);\n\t};\n\n\treturn (type, body = null) => {\n\t\tif (!type) {\n\t\t\ttype = 'text';\n\t\t}\n\n\t\tif (columnMap.hasOwnProperty(type)) {\n\t\t\treturn create(type, type, body);\n\t\t}\n\n\t\treturn create('custom', type, body);\n\t};\n}\n","import { binarySearch } from '../utility/kit';\n\nexport function flattenRows(root) {\n\tconst rowsToUse = rowsToUseFactory();\n\n\tfunction markup(node, rowIndex, columnIndex, rowsLeft, result) {\n\t\tconst view = node.key;\n\t\tconst rowspan = rowsLeft - rowsToUse(node);\n\t\tview.rowspan = rowspan;\n\t\tview.rowIndex = rowIndex;\n\t\tview.columnIndex = columnIndex;\n\n\t\tconst { children } = node;\n\t\tif (children.length) {\n\t\t\tlet width = 0;\n\t\t\tconst childResult = [];\n\t\t\tfor (let child of children) {\n\t\t\t\tconst childView = markup(child, rowIndex + rowspan, columnIndex, rowsLeft - rowspan, childResult);\n\t\t\t\tif (!childView) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst { colspan } = childView;\n\t\t\t\twidth += colspan;\n\t\t\t\tcolumnIndex += colspan;\n\t\t\t}\n\n\t\t\tview.colspan = width;\n\t\t\tif (width > 0) {\n\t\t\t\tresult.push(view);\n\t\t\t\tresult.push(...childResult);\n\t\t\t}\n\t\t} else if (view.model.type !== 'cohort') {\n\t\t\tresult.push(view);\n\t\t}\n\n\t\treturn view;\n\t}\n\n\tconst result = [];\n\tmarkup(root, 0, 0, rowsToUse(root), result);\n\t// remove root \n\tresult.splice(0, 1);\n\treturn layout(result);\n}\n\nfunction layout(columns) {\n\tconst mx = [];\n\n\tcolumns.sort((x, y) => {\n\t\tconst xc = x.rowIndex - y.rowIndex;\n\t\tif (xc === 0) {\n\t\t\treturn x.columnIndex - y.columnIndex;\n\t\t}\n\n\t\treturn xc;\n\t});\n\n\tfor (let column of columns) {\n\t\tif (!mx[column.rowIndex]) {\n\t\t\tmx[column.rowIndex] = [];\n\t\t}\n\t\tmx[column.rowIndex].push(column);\n\t}\n\n\treturn mx;\n}\n\nfunction rowsToUseFactory() {\n\tconst cache = new Map();\n\treturn function rowsToUse(node, depth = 0) {\n\t\tconst { model } = node.key;\n\t\tif (cache.has(model.key)) {\n\t\t\treturn cache.get(model.key);\n\t\t}\n\n\t\tconst { children } = node;\n\t\tlet count = children.length == 0 ? 0 : 1;\n\t\tfor (let child of children) {\n\t\t\tcount = Math.max(count, rowsToUse(child, depth + 1));\n\t\t}\n\n\t\tconst result = 1 + count;\n\t\tcache.set(model.key, result);\n\t\treturn result;\n\t}\n}\n\n\nexport function expand(rows) {\n\tconst mx = [];\n\tconst offsets = [];\n\tfor (let y = 0, height = rows.length; y < height; y++) {\n\t\tconst columns = rows[y];\n\t\tconst offset = offsets.length > y ? offsets[y] : offsets[y] = [0];\n\t\tfor (let x = 0, width = columns.length; x < width; x++) {\n\t\t\tconst column = columns[x];\n\t\t\tconst { rowspan, colspan } = column;\n\t\t\tconst current = offset[0];\n\t\t\tconst next = current + colspan;\n\t\t\tfor (let i = 0; i < rowspan; i++) {\n\t\t\t\tconst yi = y + i;\n\t\t\t\tconst row = mx.length > yi ? mx[yi] : mx[yi] = [];\n\t\t\t\tfor (let j = 0; j < colspan; j++) {\n\t\t\t\t\tconst xj = current + j;\n\t\t\t\t\trow[xj] = column;\n\t\t\t\t}\n\n\t\t\t\tconst gaps = offsets.length > yi ? offsets[yi] : offsets[yi] = [0];\n\t\t\t\tconst index = binarySearch(gaps, current);\n\t\t\t\tif (row[next]) {\n\t\t\t\t\tgaps.splice(index, 1);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst xi = gaps[index];\n\t\t\t\t\tgaps.splice(index, row[xi] ? 1 : 0, next);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn mx;\n}\n\nexport function collapse(matrix) {\n\tconst line = [];\n\tconst height = matrix.length;\n\tif (height) {\n\t\tconst set = new Set();\n\t\tconst lastRow = matrix[height - 1];\n\t\tconst width = lastRow.length;\n\t\tfor (let i = 0; i < width; i++) {\n\t\t\tconst column = lastRow[i];\n\t\t\tif (set.has(column)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tline.push(column);\n\t\t\tset.add(column);\n\t\t}\n\t}\n\n\treturn line;\n}\n","import { GridError } from '../infrastructure/error';\nimport { Lazy } from '../infrastructure/lazy';\nimport { isFunction } from '../utility/kit';\nimport { collapse, expand } from './column.matrix';\n\nexport function flattenColumns(columns, result = []) {\n\tfor (let i = 0, length = columns.length; i < length; i++) {\n\t\tconst column = columns[i];\n\t\tresult.push(column);\n\n\t\tconst { children } = column;\n\t\tif (children && children.length) {\n\t\t\tflattenColumns(children, result);\n\t\t}\n\t}\n\n\treturn result;\n}\n\nexport function findLine(columns, key) {\n\tfor (let index = 0, length = columns.length; index < length; index++) {\n\t\tconst column = columns[index];\n\t\tif (column.key === key) {\n\t\t\treturn { columns, index };\n\t\t}\n\n\t\tconst { children } = column;\n\t\tif (children.length) {\n\t\t\tconst result = findLine(children, key);\n\t\t\tif (result) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn null;\n}\n\nexport function mapColumns(columns) {\n\treturn columns.reduce((memo, column) => {\n\t\tmemo[column.key] = column;\n\t\treturn memo;\n\t}, {});\n}\n\nexport function getCellValue(column) {\n\treturn isFunction(column.value)\n\t\t? row => column.value(row)\n\t\t: row => row[column.key];\n}\n\nexport function findColumn(columns, key) {\n\tconst index = findIndex(columns, key);\n\treturn index < 0 ? null : columns[index];\n}\n\nexport function findIndex(columns, key) {\n\tlet { length } = columns;\n\twhile (length--) {\n\t\tconst column = columns[length];\n\t\tif (column.key == key) {\n\t\t\treturn length;\n\t\t}\n\t}\n\n\treturn -1;\n}\n\nexport function lineView(columnRows) {\n\tconst height = columnRows.length;\n\tif (height === 1) {\n\t\treturn Array.from(columnRows[0]);\n\t}\n\n\tif (height > 1) {\n\t\tconst view = expand(columnRows);\n\t\treturn collapse(view);\n\t}\n\n\treturn [];\n}\n\nexport function widthFactory(table, form) {\n\tconst columns = table.data.columns();\n\tconst columnMap = mapColumns(columns);\n\t// 2 because pad column has left padding equals to 1px and width 100%\n\t// that can produce 1.## values\n\tconst PAD_SKIP = 2;\n\n\tconst occupied = columns\n\t\t.filter(c => form.has(c.key) || ('' + c.width).indexOf('%') < 0)\n\t\t.reduce((memo, c) => {\n\t\t\tconst width = calcWidth(c);\n\t\t\tif (width !== null) {\n\t\t\t\tmemo += width;\n\t\t\t}\n\n\t\t\treturn memo;\n\t\t}, 0);\n\n\n\tlet rectWidth = new Lazy(() =>\n\t\ttable.view.width('head-mid')\n\t\t+ table.view.width('head-left')\n\t\t+ table.view.width('head-right')\n\t);\n\n\tfunction calcWidth(column) {\n\t\tlet size = column;\n\t\tif (form.has(column.key)) {\n\t\t\tsize = form.get(column.key);\n\t\t}\n\n\t\tlet { width } = size;\n\t\tif (width || width === 0) {\n\t\t\tif (('' + width).indexOf('%') >= 0) {\n\t\t\t\tconst percent = Number.parseFloat(width);\n\t\t\t\tconst headWidth = rectWidth.instance;\n\t\t\t\tconst skipWidth = column.widthMode === 'absolute' ? PAD_SKIP : occupied + PAD_SKIP;\n\t\t\t\twidth = (headWidth - skipWidth) * percent / 100;\n\t\t\t}\n\n\t\t\tconst MIN_WIDTH = 0;\n\t\t\treturn Math.max(Number.parseInt(width, 10), Number.parseInt(column.minWidth, 10) || MIN_WIDTH);\n\t\t}\n\n\t\t// the right place it's here to avoid recalculation\n\t\tif (column.widthMode === 'fit-head') {\n\t\t\t// can we be here before table rendered? or we need to through error\n\t\t\tconst { cells } = table.head.context.bag;\n\t\t\tconst thCell = Array.from(cells).find(th => th.column === column);\n\t\t\tif (thCell) {\n\t\t\t\treturn table.head.cell(thCell.rowIndex, thCell.columnIndex).width() + PAD_SKIP;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\treturn key => {\n\t\tlet column = columnMap[key];\n\t\tif (!column) {\n\t\t\tthrow new GridError('column.service', `Column ${key} is not found`);\n\t\t}\n\n\t\treturn calcWidth(column);\n\t};\n}","import { SubjectLike } from '../rx/rx';\nimport { yes } from '../utility/kit';\n\nexport class Command {\n\tconstructor(context = {}) {\n\t\tthis.execute = yes;\n\t\tthis.canExecute = yes;\n\t\tthis.canExecuteCheck = new SubjectLike();\n\n\t\tthis.shortcut = '';\n\t\tthis.priority = -1;\n\t\tthis.source = '';\n\t\tthis.sink = null;\n\n\t\tObject.assign(this, context);\n\t}\n\n\tclone(context = {}) {\n\t\tconst cmd = new Command(this);\n\t\tObject.assign(cmd, context);\n\t\treturn cmd;\n\t}\n}","export class CommandKey {\n  constructor(name) {\n    this.name = name;\n  }\n}\n\nexport function commandKey(name) {\n  return CommandKey(name);\n}\n\nexport function generateCommandKey() {\n  return CommandKey(\"some name\");\n}","export class CommandManager {\n\tconstructor(apply = f => f(), context) {\n\t\tthis.apply = apply;\n\t\tthis.context = context;\n\t}\n\n\tinvoke(commands, context) {\n\t\tcontext = context || this.context;\n\t\tif (commands.length) {\n\n\t\t\tconst priorityCommands = Array.from(commands);\n\t\t\tpriorityCommands.sort((x, y) => y.priority - x.priority);\n\n\t\t\tthis.apply(() => {\n\t\t\t\tfor (const cmd of priorityCommands) {\n\t\t\t\t\tif (context) {\n\t\t\t\t\t\tif (cmd.execute(context) === false) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (cmd.execute() === false) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfilter(commands) {\n\t\treturn commands.filter(cmd => cmd.sink = cmd.canExecute());\n\t}\n}\n","export class CompositeCommandManager {\n\tconstructor(manager) {\n\t\tthis.manager = manager;\n\t}\n\n\tfilter(commands) {\n\t\treturn this.manager.filter(commands);\n\t}\n\n\tinvoke(commands, context, source) {\n\t\treturn this.manager.invoke(commands, context, source);\n\t}\n}","import { CommandManager } from './command.manager';\n\nexport class TableCommandManager extends CommandManager {\n\tconstructor(apply, table) {\n\t\tsuper(apply);\n\n\t\tthis.table = table;\n\t}\n\n\tfilter(commands, source) {\n\t\tif (source === 'editor' || this.isViewActive()) {\n\t\t\treturn super.filter(commands, source);\n\t\t}\n\n\t\treturn [];\n\t}\n\n\tisViewActive() {\n\t\treturn this.table.view.isFocused();\n\t}\n}","import { PipeUnit } from '../pipe/pipe.unit';\n\nexport class DataState {\n\tconstructor() {\n\t\tthis.rows = [];\n\t\tthis.columns = [];\n\t\tthis.pipe = PipeUnit.default;\n\n\t\tthis.rowId = (index, row) => row;\n\t\tthis.columnId = (index, column) => column.key;\n\t}\n}","export const GRID_PREFIX = 'q-grid';","import { TrContainer } from './container';\n\nexport class Bag {\n\tconstructor() {\n\t\tthis.rows = new Set();\n\t\tthis.cells = new Set();\n\t\tthis.elements = new Map();\n\t\tthis.rowContainer = new Map();\n\t}\n\n\tfindModel(element) {\n\t\treturn this.elements.get(element);\n\t}\n\n\thasModel(element) {\n\t\treturn this.elements.has(element);\n\t}\n\n\tgetRowElements() {\n\t\treturn this.rowContainer.values();\n\t}\n\n\tgetCellElements() {\n\t\treturn this.cells;\n\t}\n\n\taddRow(tr) {\n\t\tconst { rowContainer } = this;\n\t\tconst { model, element } = tr;\n\n\t\tthis.rows.add(tr);\n\t\tthis.elements.set(element, tr);\n\n\t\tconst container = rowContainer.get(model);\n\t\tif (container) {\n\t\t\tcontainer.elements.push(tr);\n\t\t} else {\n\t\t\trowContainer.set(model, new TrContainer([tr]));\n\t\t}\n\t}\n\n\taddCell(td) {\n\t\tthis.cells.add(td);\n\t\tthis.elements.set(td.element, td);\n\t}\n\n\tdeleteRow(tr) {\n\t\tconst { rowContainer } = this;\n\t\tconst { model, element } = tr;\n\n\t\tthis.rows.delete(tr);\n\t\tthis.elements.delete(element);\n\n\t\tconst container = rowContainer.get(model);\n\t\tif (container) {\n\t\t\tconst { elements } = container;\n\t\t\tconst index = elements.indexOf(element);\n\t\t\tif (index >= 0) {\n\t\t\t\telements.splice(index, 1);\n\t\t\t\tif (!element.length) {\n\t\t\t\t\trowContainer.delete(model);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteCell(td) {\n\t\tthis.cells.delete(td);\n\t\tthis.elements.delete(td.element);\n\t}\n}","import { VirtualBox } from './virtual/box';\nimport { Box } from './box';\nimport { SelectorMark } from './selector/selector.mark';\n\nexport class Body extends Box {\n\tconstructor(context, model) {\n\t\tsuper(context, model, new SelectorMark(model, context.markup, 'body'));\n\t}\n}\n\nexport class VirtualBody extends VirtualBox {\n\tconstructor(context, model) {\n\t\tsuper(context, model, new SelectorMark(model, context.markup, 'body'));\n\t}\n}","import { Row } from './row';\nimport { Column } from './column';\nimport { Cell } from './cell';\nimport { SelectorFactory } from './selector/selector.factory';\n\nexport class Box {\n\tconstructor(context, model, selectorMark) {\n\t\tthis.context = context;\n\t\tthis.model = model;\n\n\t\tthis.selectFactory = new SelectorFactory(context.bag, selectorMark);\n\n\t\tthis.selector = this.selectFactory.create();\n\t}\n\n\tcolumnCount(rowIndex) {\n\t\treturn this.selector.columnCount(rowIndex);\n\t}\n\n\tcolumn(columnIndex) {\n\t\treturn this.createColumnCore(columnIndex);\n\t}\n\n\tcolumns(rowIndex) {\n\t\treturn this.selector\n\t\t\t.rowCells(rowIndex)\n\t\t\t.map(cell => this.createColumnCore(cell.columnIndex));\n\t}\n\n\trow(rowIndex, columnIndex) {\n\t\treturn this.rowCore(rowIndex, columnIndex);\n\t}\n\n\trows(columnIndex) {\n\t\treturn this.selector.rows(columnIndex).map(row => this.createRowCore(row.index, row.element));\n\t}\n\n\trowCount(columnIndex) {\n\t\treturn this.selector.rowCount(columnIndex);\n\t}\n\n\tcell(rowIndex, columnIndex) {\n\t\treturn this.cellCore(rowIndex, columnIndex);\n\t}\n\n\tgetElements() {\n\t\treturn [];\n\t}\n\n\trowCore(rowIndex, columnIndex) {\n\t\treturn this.createRowCore(rowIndex, this.selector.row(rowIndex, columnIndex).element);\n\t}\n\n\tcellCore(rowIndex, columnIndex) {\n\t\tconst cell = this.selector.cell(rowIndex, columnIndex);\n\t\treturn this.createCellCore(cell.rowIndex, cell.columnIndex, cell.element);\n\t}\n\n\trowCellsCore(rowIndex) {\n\t\treturn this.selector\n\t\t\t.rowCells(rowIndex)\n\t\t\t.map(cell => this.createCellCore(cell.rowIndex, cell.columnIndex, cell.element));\n\t}\n\n\tcolumnCellsCore(columnIndex) {\n\t\treturn this.selector\n\t\t\t.columnCells(columnIndex)\n\t\t\t.map(cell => this.createCellCore(cell.rowIndex, cell.columnIndex, cell.element));\n\t}\n\n\tcreateRowCore(index, element) {\n\t\treturn new Row(this, index, element);\n\t}\n\n\tcreateColumnCore(index) {\n\t\treturn new Column(this, index);\n\t}\n\n\tcreateCellCore(rowIndex, columnIndex, element) {\n\t\treturn new Cell(this.context, rowIndex, columnIndex, element);\n\t}\n}","import { Element } from './element';\nimport { Td } from './td';\n\nexport class Cell extends Element {\n\tconstructor(context, rowIndex, columnIndex, element = null) {\n\t\tsuper(element);\n\n\t\tthis.context = context;\n\t\tthis.rowIndex = rowIndex;\n\t\tthis.columnIndex = columnIndex;\n\t}\n\n\tmodel() {\n\t\treturn this.modelCore();\n\t}\n\n\tmodelCore() {\n\t\tconst td = this.context.bag.findModel(this.getElement());\n\t\treturn td ? new Td(td) : null;\n\t}\n}","export class Column {\n\tconstructor(box, index) {\n\t\tthis.box = box;\n\t\tthis.index = index;\n\t}\n\n\tmodel() {\n\t\tconst { columns } = this.box.model.view();\n\t\tconst column = columns[this.index];\n\t\treturn column || null;\n\t}\n\n\tcells() {\n\t\treturn this.box.columnCellsCore(this.index);\n\t}\n\n\tcell(rowIndex) {\n\t\treturn this.box.cell(rowIndex, this.index);\n\t}\n\n\taddClass(name) {\n\t\tconst cells = this.cells();\n\t\tconst length = cells.length;\n\t\tlet i = 0;\n\t\twhile (i < length) {\n\t\t\tconst cell = cells[i++];\n\t\t\tcell.addClass(name);\n\t\t}\n\t}\n\n\tremoveClass(name) {\n\t\tconst cells = this.cells();\n\t\tconst length = cells.length;\n\t\tlet i = 0;\n\t\twhile (i < length) {\n\t\t\tconst cell = cells[i++];\n\t\t\tcell.removeClass(name);\n\t\t}\n\t}\n}","import { escapeAttr } from '../services/css';\nimport { min, max } from '../utility/kit';\nimport { Guard } from '../infrastructure/guard';\n\nexport class Container {\n\tconstructor(elements) {\n\t\tthis.elements = elements;\n\t}\n\n\tgetBoundingClientRect() {\n\t\tconst rects = this.elements.map(element => element.getBoundingClientRect());\n\t\tconst top = min(rects.map(r => r.top));\n\t\tconst left = min(rects.map(r => r.left));\n\t\tconst bottom = max(rects.map(r => r.bottom));\n\t\tconst right = max(rects.map(r => r.right));\n\t\treturn {\n\t\t\theight: bottom - top,\n\t\t\twidth: right - left,\n\t\t\ttop: top,\n\t\t\tleft: left,\n\t\t\tright: right,\n\t\t\tbottom: bottom\n\t\t};\n\t}\n\n\taddClass(name) {\n\t\tthis.elements.forEach(element => element.classList.add(escapeAttr(name)));\n\t}\n\n\tremoveClass(name) {\n\t\tthis.elements.forEach(element => element.classList.remove(escapeAttr(name)));\n\t}\n\n\thasClass(name) {\n\t\treturn this.elements.some(element => element.classList.contains(escapeAttr(name)));\n\t}\n\n\tget clientWidth() {\n\t\treturn max(this.elements.map(element => element.clientWidth));\n\t}\n\n\tget clientHeight() {\n\t\treturn max(this.elements.map(element => element.clientHeight));\n\t}\n\n\tget offsetWidth() {\n\t\treturn max(this.elements.map(element => element.offsetWidth));\n\t}\n\n\tget offsetHeight() {\n\t\treturn max(this.elements.map(element => element.offsetHeight));\n\t}\n\n\tget classList() {\n\t\treturn {\n\t\t\tadd: name => this.addClass(name),\n\t\t\tremove: name => this.removeClass(name),\n\t\t\tcontains: name => this.hasClass(name)\n\t\t};\n\t}\n}\n\nexport class TrContainer {\n\tconstructor(elements) {\n\t\tthis.elements = elements;\n\t}\n\n\tget index() {\n\t\tconst tr = this.elements[0];\n\t\tGuard.notNull(tr, \"tr\");\n\n\t\treturn tr.index;\n\t}\n\n\tget model() {\n\t\tconst tr = this.elements[0];\n\t\tGuard.notNull(tr, \"tr\");\n\n\t\treturn tr && tr.model;\n\t}\n\n\tget element() {\n\t\tconst { elements } = this;\n\t\tif (elements.length > 1) {\n\t\t\treturn new Container(elements.map(tr => tr.element));\n\t\t}\n\n\t\tconst tr = this.elements[0];\n\t\tGuard.notNull(tr, \"tr\");\n\n\t\treturn tr.element;\n\t}\n}","import * as columnService from '../column/column.service';\n\nexport class Data {\n\tconstructor(model) {\n\t\tthis.model = model;\n\t}\n\n\tcolumns() {\n\t\treturn this.model.view().columns;\n\t}\n\n\tcolumnMap() {\n\t\treturn columnService.mapColumns(this.columns());\n\t}\n\n\trows() {\n\t\treturn this.model.scene().rows;\n\t}\n}","import {Unit} from './unit';\n\nexport class Element extends Unit {\n\tconstructor(element) {\n\t\tsuper();\n\n\t\tthis.element = element;\n\t}\n\n\tgetElementCore() {\n\t\treturn this.element;\n\t}\n}","export class FakeClassList {\n\tconstructor() {\n\t}\n\n\tadd() {\n\t}\n\n\tremove() {\n\t}\n}","import {FakeClassList} from './class.list';\n\nconst emptyRect = Object.freeze({\n\tleft: 0,\n\tright: 0,\n\ttop: 0,\n\tbottom: 0,\n\twidth: 0,\n\theight: 0\n});\n\nexport class FakeElement {\n\tconstructor() {\n\t\tthis.classList = new FakeClassList();\n\t}\n\n\tgetBoundingClientRect() {\n\t\treturn emptyRect;\n\t}\n\n\tget clientWidth() {\n\t\treturn 0;\n\t}\n\n\tget clientHeight() {\n\t\treturn 0;\n\t}\n\n\tget offsetWidth() {\n\t\treturn 0;\n\t}\n\n\tget offsetHeight() {\n\t\treturn 0;\n\t}\n}","export class FakeLayer {\n\tconstructor() {\n\t}\n\n\tresource() {\n\t}\n\n\tdestroy() {\n\t}\n}\n\n","export class FakeTable {\n\tconstructor() {\n\t\tthis.rows = [];\n\t}\n}","import { Box } from './box';\nimport { SelectorMark } from './selector/selector.mark';\n\nexport class Foot extends Box {\n\tconstructor(context, model) {\n\t\tsuper(context, model, new SelectorMark(model, context.markup, 'foot'));\n\t}\n}","import { Box } from './box';\nimport { SelectorMark } from './selector/selector.mark';\n\nexport class Head extends Box {\n\tconstructor(context, model, markup) {\n\t\tsuper(context, model, new SelectorMark(model, context.markup, 'head'));\n\t}\n}","import { Element } from './element';\nimport { Tr } from './tr';\n\nexport class Row extends Element {\n\tconstructor(box, index, element = null) {\n\t\tsuper(element);\n\n\t\tthis.box = box;\n\t\tthis.index = index;\n\t}\n\n\tmodel() {\n\t\tconst tr = this.box.context.bag.findModel(this.getKeyElementCore());\n\t\tif (tr) {\n\t\t\treturn new Tr(tr);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tcells() {\n\t\treturn this.box.rowCellsCore(this.index);\n\t}\n\n\tcell(columnIndex) {\n\t\treturn this.box.cellCore(this.index, columnIndex);\n\t}\n\n\tgetKeyElementCore() {\n\t\tconst element = super.getElement();\n\t\tif (element.elements) {\n\t\t\treturn element.elements[0];\n\t\t}\n\n\t\treturn element;\n\t}\n}","import { binarySearch } from '../../utility/kit';\nimport { GridError } from '../../infrastructure/error';\n\nexport class Matrix {\n    constructor(isDataRow) {\n        this.isDataRow = isDataRow;\n    }\n\n    build(table) {\n        const rows = table.rows;\n        const isDataRow = this.isDataRow;\n\n        const mx = [];\n        const offsets = [];\n\n        let y = 0;\n        for (let cursor = 0, height = rows.length; cursor < height; cursor++) {\n            const tr = rows[cursor];\n            if (!isDataRow(tr)) {\n                continue;\n            }\n\n            const offset = offsets.length > y ? offsets[y] : offsets[y] = [0];\n            const cells = tr.cells;\n            for (let x = 0, width = cells.length; x < width; x++) {\n                const td = cells[x];\n                const { rowSpan, colSpan } = td;\n                const current = offset[0];\n                const next = current + colSpan;\n                for (let i = 0; i < rowSpan; i++) {\n                    const yi = y + i;\n                    const row = mx.length > yi ? mx[yi] : mx[yi] = [];\n                    for (let j = 0; j < colSpan; j++) {\n                        const xj = current + j;\n                        row[xj] = td;\n                    }\n\n                    const gaps = offsets.length > yi ? offsets[yi] : offsets[yi] = [0];\n                    const index = binarySearch(gaps, current);\n                    if (row[next]) {\n                        gaps.splice(index, 1);\n                    }\n                    else {\n                        const xi = gaps[index];\n                        gaps.splice(index, row[xi] ? 1 : 0, next);\n                    }\n                }\n            }\n            y++;\n        }\n\n        return mx;\n    }\n\n    assertFlatness(matrix) {\n        if (matrix.length) {\n            const height = matrix.length;\n            const width = matrix[0].length;\n            for (let i = 1; i < height; i++) {\n                if (matrix[i].length !== width) {\n                    throw new GridError(\n                        'matrix',\n                        `Matrix is not flat, expect width ${width}, actual ${matrix[i].length}`);\n                }\n            }\n        }\n    }\n}","export class SelectorCache {\n\tconstructor(selector) {\n\t\tthis.selector = selector;\n\n\t\tthis.clear();\n\t}\n\n\tclear() {\n\t\tthis.columnCountCache = {};\n\t\tthis.columnCellsCache = {};\n\t\tthis.rowCountCache = {};\n\t\tthis.rowsCache = {};\n\t\tthis.rowCellsCache = {};\n\t\tthis.rowCache = {};\n\t\tthis.cellCache = {};\n\t}\n\n\tcolumnCount(rowIndex) {\n\t\tif (this.columnCountCache.hasOwnProperty(rowIndex)) {\n\t\t\treturn this.columnCountCache.get(rowIndex);\n\t\t}\n\n\t\treturn this.columnCountCache[rowIndex] = this.selector.columnCount(rowIndex);\n\t}\n\n\tcolumnCells(columnIndex) {\n\t\tif (this.columnCells.hasOwnProperty(columnIndex)) {\n\t\t\treturn this.columnCells.get(columnIndex);\n\t\t}\n\n\t\treturn this.columnCells[columnIndex] = this.selector.columnCells(columnIndex);\n\t}\n\n\trowCount(columnIndex) {\n\t\tif (this.rowCountCache.hasOwnProperty(columnIndex)) {\n\t\t\treturn this.rowCountCache.get(columnIndex);\n\t\t}\n\n\t\treturn this.rowCountCache[columnIndex] = this.selector.rowCount(columnIndex);\n\t}\n\n\trows(columnIndex) {\n\t\tif (this.rowsCache.hasOwnProperty(columnIndex)) {\n\t\t\treturn this.rowsCache.get(columnIndex);\n\t\t}\n\n\t\treturn this.rowsCache[columnIndex] = this.selector.rows(columnIndex);\n\t}\n\n\trowCells(rowIndex) {\n\t\tif (this.rowCellsCache.hasOwnProperty(rowIndex)) {\n\t\t\treturn this.rowCellsCache.get(rowIndex);\n\t\t}\n\n\t\treturn this.rowCellsCache[rowIndex] = this.selector.rowCells(rowIndex);\n\t}\n\n\trow(rowIndex, columnIndex) {\n\t\tconst key = `${rowIndex}x${columnIndex}`;\n\t\tif (this.rowCache.hasOwnProperty(key)) {\n\t\t\treturn this.rowCache.get(key);\n\t\t}\n\n\t\treturn this.rowCache[key] = this.selector.row(rowIndex, columnIndex);\n\t}\n\n\tcell(rowIndex, columnIndex) {\n\t\tconst key = `${rowIndex}x${columnIndex}`;\n\t\tif (this.cellCache.hasOwnProperty(key)) {\n\t\t\treturn this.cellCache.get(key);\n\t\t}\n\n\t\treturn this.cellCache[key] = this.selector.cell(rowIndex, columnIndex);\n\t}\n}","import { Matrix } from './matrix';\nimport { Selector } from './selector';\nimport { SelectorMediator } from './selector.mediate';\nimport { UnitFactory } from './unit.factory';\nimport { Range } from '../../infrastructure/range';\n\nexport class SelectorFactory {\n\tconstructor(bag, selectorMark) {\n\t\tthis.bag = bag;\n\t\tthis.selectorMark = selectorMark;\n\t}\n\n\tcreate() {\n\t\tconst { bag, selectorMark } = this;\n\n\t\tconst matrix = new Matrix(tr => bag.elements.has(tr));\n\t\tconst entries =\n\t\t\tselectorMark\n\t\t\t\t.select()\n\t\t\t\t.map(({ element, rowRange, columnRange }) => ({\n\t\t\t\t\tmatrix: matrix.build(element),\n\t\t\t\t\trowRange,\n\t\t\t\t\tcolumnRange\n\t\t\t\t}));\n\n\t\tconst selectorFactory = context => {\n\t\t\treturn entries.map(entry => ({\n\t\t\t\tinvoke: f => {\n\t\t\t\t\tconst unitFactory = new UnitFactory(entry.rowRange, entry.columnRange);\n\t\t\t\t\tconst selector = new Selector(entry.matrix, bag, unitFactory);\n\n\t\t\t\t\tconst args = [];\n\t\t\t\t\targs.push(selector);\n\n\t\t\t\t\tif (context.hasOwnProperty('row')) {\n\t\t\t\t\t\targs.push(context.row - entry.rowRange.start);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (context.hasOwnProperty('column')) {\n\t\t\t\t\t\targs.push(context.column - entry.columnRange.start);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn f(...args);\n\t\t\t\t}\n\t\t\t}));\n\t\t};\n\n\t\tconst unitFactory = new UnitFactory(new Range(0, 0), new Range(0, 0));\n\t\treturn new SelectorMediator(selectorFactory, unitFactory);\n\t}\n}\n","import { FakeElement } from '../fake/element';\nimport { Container } from '../container';\nimport { isUndefined } from '../../utility/kit';\n\nexport class Selector {\n\tconstructor(matrix, bag, factory) {\n\t\tthis.matrix = matrix;\n\t\tthis.bag = bag;\n\t\tthis.factory = factory;\n\t}\n\n\tcolumnCount(rowIndex) {\n\t\tconst row = this.matrix[rowIndex];\n\t\treturn row ? new Set(row).size : 0;\n\t}\n\n\tcolumnCells(columnIndex) {\n\t\tconst { factory, matrix } = this;\n\n\t\tconst result = [];\n\t\tconst set = new Set();\n\t\tfor (let i = 0, length = matrix.length; i < length; i++) {\n\t\t\tconst row = matrix[i];\n\t\t\tif (row.length > columnIndex) {\n\t\t\t\tconst td = row[columnIndex];\n\t\t\t\tif (!set.has(td)) {\n\t\t\t\t\tset.add(td);\n\t\t\t\t\tresult.push(factory.cell(td, i, columnIndex));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\trowCount(columnIndex) {\n\t\tconst { matrix } = this;\n\t\tconst set = new Set();\n\t\tfor (let i = 0, length = matrix.length; i < length; i++) {\n\t\t\tconst row = matrix[i];\n\t\t\tif (row.length > columnIndex) {\n\t\t\t\tconst td = row[columnIndex];\n\t\t\t\tset.add(td);\n\t\t\t}\n\t\t}\n\n\t\treturn set.size;\n\t}\n\n\trows(columnIndex) {\n\t\tconst { matrix, factory, bag } = this;\n\t\tconst set = new Set();\n\t\tconst result = [];\n\t\tif (isUndefined(columnIndex)) {\n\t\t\tconst rows = bag.getRowElements();\n\t\t\tfor (let tr of rows) {\n\t\t\t\tresult.push(factory.row(tr.element, tr.index));\n\t\t\t}\n\n\t\t\tresult.sort((x, y) => x.index - y.index);\n\t\t} else {\n\t\t\tfor (let i = 0, length = matrix.length; i < length; i++) {\n\t\t\t\tconst row = matrix[i];\n\t\t\t\tif (row.length > columnIndex) {\n\t\t\t\t\tconst tr = row[columnIndex].parentElement;\n\t\t\t\t\tif (!set.has(tr)) {\n\t\t\t\t\t\tset.add(tr);\n\t\t\t\t\t\tresult.push(factory.row(tr, i));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\trowCells(rowIndex) {\n\t\tconst { matrix } = this;\n\n\t\tconst row = matrix[rowIndex];\n\t\tconst result = [];\n\t\tif (row) {\n\t\t\tconst set = new Set();\n\t\t\tconst factory = this.factory;\n\t\t\tfor (let i = 0, length = row.length; i < length; i++) {\n\t\t\t\tconst td = row[i];\n\t\t\t\tif (!set.has(td)) {\n\t\t\t\t\tset.add(td);\n\t\t\t\t\tresult.push(factory.cell(td, rowIndex, i));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\trow(rowIndex, columnIndex) {\n\t\tconst { factory } = this;\n\t\tif (!isUndefined(columnIndex)) {\n\t\t\tconst td = this.td(rowIndex, columnIndex);\n\t\t\treturn factory.row(td ? td.parentElement : new FakeElement(), rowIndex);\n\t\t}\n\n\t\tconst row = this.matrix[rowIndex];\n\t\tif (row) {\n\t\t\tconst set = new Set();\n\t\t\tfor (let td of row) {\n\t\t\t\tset.add(td.parentElement);\n\t\t\t}\n\n\t\t\tconst trs = Array.from(set);\n\t\t\treturn factory.row(trs.length > 1 ? new Container(trs) : trs[0], rowIndex);\n\t\t}\n\n\t\treturn factory.row(new FakeElement(), rowIndex);\n\t}\n\n\tcell(rowIndex, columnIndex) {\n\t\tconst td = this.td(rowIndex, columnIndex);\n\t\treturn this.factory.cell(td || new FakeElement(), rowIndex, columnIndex);\n\t}\n\n\ttd(rowIndex, columnIndex) {\n\t\tconst row = this.matrix[rowIndex];\n\t\tif (row) {\n\t\t\tconst td = row[columnIndex];\n\t\t\tif (td) {\n\t\t\t\treturn td;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","import { Range } from '../../infrastructure/range';\n\nexport class SelectorMark {\n\tconstructor(model, markup, name) {\n\t\tthis.model = model;\n\t\tthis.name = name;\n\t\tthis.markup = markup;\n\t}\n\n\tselect() {\n\t\tconst result = [];\n\t\tconst addNext = this.addFactory(result);\n\n\t\taddNext('left');\n\t\taddNext('mid');\n\t\taddNext('right');\n\n\t\treturn result;\n\t}\n\n\taddFactory(result) {\n\t\tconst { model } = this;\n\t\tconst { rows } = model.scene();\n\t\tconst columnArea = model.scene().column.area;\n\n\t\treturn pin => {\n\t\t\tconst name = pin ? `${this.name}-${pin}` : this.name;\n\t\t\tconst element = this.markup[name];\n\t\t\tif (element) {\n\t\t\t\tconst prev = result[result.length - 1];\n\t\t\t\tconst columnStart = prev ? prev.columnRange.end : 0;\n\t\t\t\tconst columnCount = columnArea[pin].length;\n\t\t\t\tconst rowStart = 0;\n\t\t\t\tconst rowCount = rows.length;\n\n\t\t\t\tresult.push({\n\t\t\t\t\telement,\n\t\t\t\t\tcolumnRange: new Range(columnStart, columnStart + columnCount),\n\t\t\t\t\trowRange: new Range(rowStart, rowStart + rowCount)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\t}\n}","import { FakeElement } from '../fake/element';\nimport { Container } from '../container';\nimport { zip, sumBy, max, isUndefined } from '../../utility/kit';\n\nexport class SelectorMediator {\n\tconstructor(selectorFactory, factory) {\n\t\tthis.buildSelectors = selectorFactory;\n\t\tthis.factory = factory;\n\t}\n\n\tcolumnCount(rowIndex) {\n\t\tconst selectors = this.buildSelectors({ row: rowIndex });\n\t\tif (!selectors.length) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn sumBy(selectors, s => s.invoke((s, rowIndex) => s.columnCount(rowIndex)));\n\t}\n\n\tcolumnCells(columnIndex) {\n\t\tconst selectors = this.buildSelectors({ column: columnIndex });\n\t\tconst result = [];\n\t\tfor (let i = 0, length = selectors.length; i < length; i++) {\n\t\t\tconst selector = selectors[i];\n\t\t\tconst cells = selector.invoke((s, columnIndex) => s.columnCells(columnIndex));\n\t\t\tresult.push(...cells);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\trowCount(columnIndex) {\n\t\tconst selectors = this.buildSelectors({ column: columnIndex });\n\t\tif (!selectors.length) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn max(selectors.map(s => s.invoke((s, columnIndex) => s.rowCount(columnIndex))));\n\t}\n\n\trows(columnIndex) {\n\t\tconst context = isUndefined(columnIndex) ? {} : { column: columnIndex };\n\t\tconst selectors = this.buildSelectors(context);\n\t\tconst factory = this.factory;\n\t\tconst areas = [];\n\t\tfor (let i = 0, length = selectors.length; i < length; i++) {\n\t\t\tconst selector = selectors[i];\n\t\t\tconst rows = selector.invoke((s, columnIndex) => s.rows(columnIndex));\n\t\t\tif (rows.length) {\n\t\t\t\tareas.push(rows);\n\t\t\t}\n\t\t}\n\n\t\tconst lines = zip(...areas);\n\t\tconst result = [];\n\t\tfor (let i = 0, length = lines.length; i < length; i++) {\n\t\t\tconst line = lines[i];\n\t\t\tconst elements = line.map(row => row.element);\n\t\t\tconst rowElement = elements.length > 1 ? new Container(elements) : elements[0];\n\t\t\tconst rowIndex = line[0].index;\n\t\t\tconst row = factory.row(rowElement, rowIndex);\n\t\t\tresult.push(row);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\trowCells(rowIndex) {\n\t\tconst selectors = this.buildSelectors({ row: rowIndex });\n\t\tconst result = [];\n\t\tfor (let i = 0, length = selectors.length; i < length; i++) {\n\t\t\tconst selector = selectors[i];\n\t\t\tconst cells = selector.invoke((s, rowIndex) => s.rowCells(rowIndex));\n\t\t\tresult.push(...cells);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\trow(rowIndex, columnIndex) {\n\t\tconst context = { row: rowIndex };\n\t\tif (!isUndefined(columnIndex)) {\n\t\t\tcontext.column = columnIndex;\n\t\t}\n\n\t\tconst selectors = this.buildSelectors(context);\n\t\tconst result = [];\n\t\tfor (let i = 0, length = selectors.length; i < length; i++) {\n\t\t\tconst selector = selectors[i];\n\t\t\tconst row = selector.invoke((s, rowIndex, columnIndex) => s.row(rowIndex, columnIndex));\n\t\t\tresult.push(row.element);\n\t\t}\n\n\t\treturn this.factory.row(new Container(result), rowIndex);\n\t}\n\n\tcell(rowIndex, columnIndex) {\n\t\tconst context = { row: rowIndex, column: columnIndex };\n\t\tconst selectors = this.buildSelectors(context);\n\t\tfor (let i = 0, length = selectors.length; i < length; i++) {\n\t\t\tconst selector = selectors[i];\n\t\t\tconst cell = selector.invoke((s, rowIndex, columnIndex) => s.cell(rowIndex, columnIndex));\n\t\t\tif (!(cell.element instanceof FakeElement)) {\n\t\t\t\treturn cell;\n\t\t\t}\n\t\t}\n\n\t\treturn this.factory.cell(new FakeElement(), rowIndex, columnIndex);\n\t}\n}","export class UnitFactory {\n\tconstructor(rowRange, columnRange) {\n\t\tthis.rowRange = rowRange;\n\t\tthis.columnRange = columnRange;\n\t}\n\n\tcell(element, rowIndex, columnIndex) {\n\t\treturn {\n\t\t\telement,\n\t\t\trowIndex: rowIndex + this.rowRange.start,\n\t\t\tcolumnIndex: columnIndex + this.columnRange.start\n\t\t};\n\t}\n\n\trow(element, rowIndex) {\n\t\treturn {\n\t\t\telement,\n\t\t\tindex: rowIndex + this.rowRange.start\n\t\t};\n\t}\n}","import { Bag } from './bag';\nimport { Table } from './table';\n\nexport function tableFactory(model, layer) {\n\tconst box = {\n\t\tmarkup: {\n\t\t\tdocument\n\t\t},\n\t\tbag: {\n\t\t\thead: new Bag(),\n\t\t\tbody: new Bag(),\n\t\t\tfoot: new Bag()\n\t\t},\n\t\tlayer,\n\t};\n\n\treturn new Table(model, box);\n}","import { assignWith, identity } from '../utility/kit';\nimport { Bag } from './bag';\nimport { Body, VirtualBody } from './body';\nimport { Data } from './data';\nimport { FakeLayer } from './fake/layer';\nimport { Foot } from './foot';\nimport { Head } from './head';\nimport { Lazy } from '../infrastructure/lazy';\nimport { View } from './view';\n\nexport class Table {\n\tconstructor(model, box) {\n\t\tthis.model = model;\n\n\t\tconst { scroll } = model;\n\t\tconst defaults = {\n\t\t\tmapper: {\n\t\t\t\trowToView: index => scroll().map.rowToView(index),\n\t\t\t\tviewToRow: index => scroll().map.viewToRow(index),\n\t\t\t\tcolumnToView: identity,\n\t\t\t\tviewToColumn: identity\n\t\t\t},\n\t\t\tlayer: () => new FakeLayer(),\n\t\t\tbag: {\n\t\t\t\thead: new Bag(),\n\t\t\t\tbody: new Bag(),\n\t\t\t\tfoot: new Bag()\n\t\t\t},\n\t\t\tmarkup: {}\n\t\t};\n\n\t\tthis.box = assignWith(defaults, box);\n\n\t\tthis._data = new Lazy(() => new Data(model));\n\t\tthis._view = new Lazy(() => new View(box, model));\n\t\tthis._head = new Lazy(() => new Head(this.boxContext('head'), model));\n\t\tthis._foot = new Lazy(() => new Foot(this.boxContext('foot'), model));\n\t\tthis._body = new Lazy(() => {\n\t\t\tconst context = this.boxContext('body');\n\t\t\treturn scroll().mode === 'virtual'\n\t\t\t\t? new VirtualBody(context, model)\n\t\t\t\t: new Body(context, model)\n\t\t});\n\t}\n\n\tinvalidate() {\n\t\tthis.head.selector = this.head.selectFactory.create();\n\t\tthis.body.selector = this.body.selectFactory.create();\n\t\tthis.foot.selector = this.foot.selectFactory.create();\n\t}\n\n\tget view() {\n\t\treturn this._view.instance;\n\t}\n\n\tget data() {\n\t\treturn this._data.instance;\n\t}\n\n\tget head() {\n\t\treturn this._head.instance;\n\t}\n\n\tget body() {\n\t\treturn this._body.instance;\n\t}\n\n\tget foot() {\n\t\treturn this._foot.instance;\n\t}\n\n\tboxContext(source) {\n\t\tconst { view, data } = this;\n\t\tconst { mapper, layer, bag, markup } = this.box;\n\n\t\tswitch (source) {\n\t\t\tcase 'body': {\n\t\t\t\treturn {\n\t\t\t\t\tmapper,\n\t\t\t\t\tlayer,\n\t\t\t\t\tbag: bag[source],\n\t\t\t\t\tview,\n\t\t\t\t\tdata,\n\t\t\t\t\tmarkup\n\t\t\t\t};\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn {\n\t\t\t\t\tmapper: {\n\t\t\t\t\t\trowToView: identity,\n\t\t\t\t\t\tviewToRow: identity,\n\t\t\t\t\t\tcolumnToView: identity,\n\t\t\t\t\t\tviewToColumn: identity\n\t\t\t\t\t},\n\t\t\t\t\tlayer,\n\t\t\t\t\tbag: bag[source],\n\t\t\t\t\tview,\n\t\t\t\t\tdata,\n\t\t\t\t\tmarkup\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n}","import { GridError } from '../infrastructure/error';\n\nexport class Td {\n\tconstructor(td) {\n\t\tthis.td = td;\n\n\t\t// We need to cache it due to possible virtual mode;\n\t\tthis.rowIndex = td.rowIndex;\n\t\tthis.columnIndex = td.columnIndex;\n\t}\n\n\tget row() {\n\t\tif (!Td.equals(this, this.td)) {\n\t\t\tthrow new GridError('td', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\treturn this.td.row;\n\t}\n\n\tget column() {\n\t\tif (!Td.equals(this, this.td)) {\n\t\t\tthrow new GridError('td', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\treturn this.td.column;\n\t}\n\n\tget value() {\n\t\tif (!Td.equals(this, this.td)) {\n\t\t\tthrow new GridError('td', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\treturn this.td.value;\n\t}\n\n\tset value(value) {\n\t\tif (!Td.equals(this, this.td)) {\n\t\t\tthrow new GridError('td', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\tthis.td.value = value;\n\t}\n\n\tget label() {\n\t\tif (!Td.equals(this, this.td)) {\n\t\t\tthrow new GridError('td', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\treturn this.td.label;\n\t}\n\n\tget element() {\n\t\tif (!Td.equals(this, this.td)) {\n\t\t\tthrow new GridError('td', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\treturn this.td.element;\n\t}\n\n\tset label(label) {\n\t\tif (!Td.equals(this, this.td)) {\n\t\t\tthrow new GridError('td', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\tthis.td.label = label;\n\t}\n\n\tmode(value) {\n\t\tif (!Td.equals(this, this.td)) {\n\t\t\tthrow new GridError('td', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\tthis.td.mode(value);\n\t}\n\n\tstatic equals(x, y) {\n\t\tif (x === y) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!x || !y) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn x.rowIndex === y.rowIndex && x.columnIndex === y.columnIndex;\n\t}\n}","import { GridError } from '../infrastructure/error';\n\nexport class Tr {\n\tconstructor(tr) {\n\t\tthis.tr = tr;\n\n\t\t// We need to cache it due to possible virtual mode;\n\t\tthis.index = tr.index;\n\t}\n\n\tget model() {\n\t\tif (!Tr.equals(this, this.tr)) {\n\t\t\tthrow new GridError('tr', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\treturn this.tr.model;\n\t}\n\n\tget element() {\n\t\tif (!Tr.equals(this, this.tr)) {\n\t\t\tthrow new GridError('tr', 'Internal model doesn\\'t match container');\n\t\t}\n\n\t\treturn this.tr.element;\n\t}\n\n\tstatic equals(x, y) {\n\t\tif (x === y) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!x || !y) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn x.index === y.index;\n\t}\n}","import { FakeElement } from './fake/element';\nimport { escapeAttr } from '../services/css';\n\nconst fakeElement = new FakeElement();\nexport class Unit {\n\tconstructor() {\n\t}\n\n\trect() {\n\t\treturn this.getElement().getBoundingClientRect();\n\t}\n\n\taddClass(name) {\n\t\tthis.addClassCore(name);\n\t}\n\n\tremoveClass(name) {\n\t\tthis.removeClassCore(name);\n\t}\n\n\thasClass(name) {\n\t\treturn this.hasClassCore(name);\n\t}\n\n\twidth() {\n\t\treturn this.getElement().clientWidth;\n\t}\n\n\theight() {\n\t\treturn this.getElement().clientHeight;\n\t}\n\n\tgetElement() {\n\t\treturn this.getElementCore() || fakeElement;\n\t}\n\n\taddClassCore(name) {\n\t\tthis.getElement().classList.add(escapeAttr(name));\n\t}\n\n\tremoveClassCore(name) {\n\t\tthis.getElement().classList.remove(escapeAttr(name));\n\t}\n\n\thasClassCore(name) {\n\t\treturn this.getElement().classList.contains(escapeAttr(name));\n\t}\n\n\tgetElementCore() {\n\t\treturn null;\n\t}\n}","import { Unit } from './unit';\nimport { FakeElement } from './fake/element';\nimport { escapeAttr } from '../services/css';\n\nfunction isParentOf(parent, element) {\n\twhile (element) {\n\t\tif (element === parent) {\n\t\t\treturn true;\n\t\t}\n\n\t\telement = element.parentNode;\n\t}\n\n\treturn false;\n}\n\nexport class View extends Unit {\n\tconstructor(context, model) {\n\t\tsuper();\n\n\t\tthis.context = context;\n\t\tthis.model = model;\n\t\tthis.layers = new Map();\n\t}\n\n\tcolumns() {\n\t\tconst { column } = this.model.scene();\n\t\treturn column.line;\n\t}\n\n\tfocus() {\n\t\tconst elements = this.getElementsCore('body');\n\t\tif (elements.length) {\n\t\t\telements[0].focus();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tblur() {\n\t\tthis.getElementsCore('body')\n\t\t\t.forEach(element => element.blur());\n\t}\n\n\tisFocused() {\n\t\treturn this.getElementsCore('body')\n\t\t\t.some(element => this.isFocusedCore(element));\n\t}\n\n\taddLayer(name) {\n\t\tconst layers = this.layers;\n\t\tif (layers.has(name)) {\n\t\t\treturn layers.get(name);\n\t\t}\n\n\t\tconst layer = this.context.layer(name);\n\t\tlayers.set(name, layer);\n\t\treturn layer;\n\t}\n\n\tremoveLayer(name) {\n\t\tconst layers = this.layers;\n\t\tif (layers.has(name)) {\n\t\t\tconst layer = layers.get(name);\n\t\t\tlayer.destroy();\n\t\t\tlayers.delete(name);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\thasLayer(name) {\n\t\treturn this.layers.has(name);\n\t}\n\n\taddClass(name) {\n\t\tconst { markup } = this.context;\n\t\tif (markup.view) {\n\t\t\tmarkup.view.classList.add(escapeAttr(name));\n\t\t}\n\t}\n\n\tremoveClass(name) {\n\t\tconst { markup } = this.context;\n\t\tif (markup.view) {\n\t\t\tmarkup.view.classList.remove(escapeAttr(name));\n\t\t}\n\t}\n\n\tscrollLeft(value) {\n\t\tconst { markup } = this.context;\n\t\tif (arguments.length) {\n\t\t\tconst headMid = markup['head-mid'];\n\t\t\tif (headMid) {\n\t\t\t\theadMid.scrollLeft = value;\n\t\t\t}\n\n\t\t\tconst footMid = markup['foot-mid'];\n\t\t\tif (footMid) {\n\t\t\t\tfootMid.scrollLeft = value;\n\t\t\t}\n\n\t\t\tconst bodyMid = markup['body-mid'];\n\t\t\tif (bodyMid) {\n\t\t\t\tbodyMid.scrollLeft = value;\n\t\t\t}\n\n\t\t\tconst bodyTop = markup['body-top'];\n\t\t\tif (bodyTop) {\n\t\t\t\tbodyTop.scrollLeft = value;\n\t\t\t}\n\n\t\t\tconst bodyBottom = markup['body-bottom'];\n\t\t\tif (bodyBottom) {\n\t\t\t\tbodyBottom.scrollLeft = value;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.getElement().scrollLeft;\n\t}\n\n\tscrollTop(value) {\n\t\tif (arguments.length) {\n\t\t\tthis.getElementsCore('body')\n\t\t\t\t.forEach(element => element.scrollTop = value);\n\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.getElement().scrollTop;\n\t}\n\n\tscrollHeight() {\n\t\treturn this.getElement().scrollHeight;\n\t}\n\n\tscrollWidth() {\n\t\treturn this.getElement().scrollWidth;\n\t}\n\n\tcanScrollTo(target, direction) {\n\t\tif (target && !(target.element instanceof FakeElement)) {\n\t\t\tswitch (direction) {\n\t\t\t\tcase 'left': {\n\t\t\t\t\ttarget = target.element;\n\t\t\t\t\tif (target) {\n\t\t\t\t\t\tconst { markup } = this.context;\n\t\t\t\t\t\tconst tableMid = markup['table-mid'];\n\t\t\t\t\t\tif (tableMid) {\n\t\t\t\t\t\t\treturn isParentOf(tableMid, target);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'top': {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\trect(area = 'body-mid') {\n\t\tconst { markup } = this.context;\n\t\tconst element = markup[area];\n\t\tif (element) {\n\t\t\t// TODO: get rid of that\n\t\t\tconst rect = element.getBoundingClientRect();\n\n\t\t\t// Get rect without scrolls\n\t\t\tconst width = element.clientWidth;\n\t\t\tconst height = element.clientHeight;\n\t\t\tconst left = rect.left;\n\t\t\tconst top = rect.top;\n\t\t\tconst right = left + width;\n\t\t\tconst bottom = top + height;\n\t\t\treturn { left, top, right, bottom, width, height };\n\t\t}\n\n\t\treturn super.rect();\n\t}\n\n\theight(area = 'body-mid') {\n\t\tconst { markup } = this.context;\n\t\tconst element = markup[area];\n\t\tif (element) {\n\t\t\treturn element.clientHeight;\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\twidth(area = 'body-mid') {\n\t\tconst { markup } = this.context;\n\t\tconst element = markup[area];\n\t\tif (element) {\n\t\t\treturn element.clientWidth;\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tgetElementCore() {\n\t\tconst { markup } = this.context;\n\t\treturn markup['body-mid'];\n\t}\n\n\tisFocusedCore(target) {\n\t\tconst { markup } = this.context;\n\t\tconst { activeElement } = markup['document'];\n\n\t\treturn isParentOf(target, activeElement);\n\t}\n\n\tgetElementsCore(key) {\n\t\tconst { markup } = this.context;\n\t\treturn [`${key}-left`, `${key}-mid`, `${key}-right`]\n\t\t\t.filter(key => markup.hasOwnProperty(key))\n\t\t\t.map(key => markup[key]);\n\t}\n}\n","import { Box } from '../box';\nimport { CellBox } from './cell.box';\nimport { ColumnBox } from './column.box';\nimport { Event } from '../../event/event';\nimport { isFunction } from '../../utility/kit';\nimport { RowBox } from './row.box';\nimport { VirtualCell } from './cell';\nimport { VirtualColumn } from './column';\nimport { VirtualElement } from './element';\nimport { VirtualRow } from './row';\n\nexport class VirtualBox extends Box {\n\tconstructor(context, model, selectorMark) {\n\t\tsuper(context, model, selectorMark);\n\n\t\tthis.cellBox = new CellBox(context);\n\t\tthis.rowBox = new RowBox(context);\n\t\tthis.columnBox = new ColumnBox(context);\n\t\tthis.requestInvalidate = new Event();\n\t}\n\n\taddCellClass(cell, name, force = false) {\n\t\tif (force) {\n\t\t\tcell.addClassCore(name);\n\t\t}\n\t\telse {\n\t\t\tthis.cellBox.addClass(cell, name);\n\t\t\tthis.requestInvalidate.emit({ source: 'addCellClass' });\n\t\t}\n\t}\n\n\tremoveCellClass(cell, name, force = false) {\n\t\tif (force) {\n\t\t\tcell.removeClassCore(name);\n\t\t}\n\t\telse {\n\t\t\tthis.cellBox.removeClass(cell, name);\n\t\t\tthis.requestInvalidate.emit({ source: 'removeCellClass' });\n\t\t}\n\t}\n\n\taddRowClass(row, name, force = false) {\n\t\tif (force) {\n\t\t\trow.addClassCore(name);\n\t\t}\n\t\telse {\n\t\t\tthis.rowBox.addClass(row, name);\n\t\t\tthis.requestInvalidate.emit({ source: 'addRowClass' });\n\t\t}\n\t}\n\n\tremoveRowClass(row, name, force = false) {\n\t\tif (force) {\n\t\t\trow.removeClassCore(name);\n\t\t}\n\t\telse {\n\t\t\tthis.rowBox.removeClass(row, name);\n\t\t\tthis.requestInvalidate.emit({ source: 'removeRowClass' });\n\t\t}\n\t}\n\n\taddColumnClass(column, name, force = false) {\n\t\tif (force) {\n\t\t\tcolumn.addClassCore(name);\n\t\t}\n\t\telse {\n\t\t\tthis.columnBox.addClass(column, name);\n\t\t\tthis.requestInvalidate.emit({ source: 'addColumnClass' });\n\t\t}\n\t}\n\n\tremoveColumnClass(column, name, force = false) {\n\t\tif (force) {\n\t\t\tcolumn.removeClassCore(name);\n\t\t}\n\t\telse {\n\t\t\tthis.columnBox.removeClass(column, name);\n\t\t\tthis.requestInvalidate.emit({ source: 'removeColumnClass' });\n\t\t}\n\t}\n\n\tcolumns() {\n\t\tconst columns = this.context.view.columns();\n\t\treturn columns.map((_, i) => this.createColumnCore(i));\n\t}\n\n\trows(columnIndex) {\n\t\tconst { mapper } = this.context;\n\t\treturn this.selector\n\t\t\t.rows(columnIndex)\n\t\t\t.map(row => this.createRowCore(mapper.rowToView(row.index), row.element));\n\t}\n\n\trowCount() {\n\t\treturn this.model.pagination().count;\n\t}\n\n\trowCore(index) {\n\t\tconst viewIndex = this.context.mapper.rowToView(index);\n\t\tif (viewIndex >= 0 && viewIndex < super.rowCount(0)) {\n\t\t\treturn super.rowCore(viewIndex);\n\t\t}\n\n\t\tconst createRect = this.rowRectFactory();\n\t\treturn this.createRowCore(viewIndex, new VirtualElement(createRect(viewIndex)));\n\t}\n\n\tcellCore(rowIndex, columnIndex) {\n\t\tconst { mapper } = this.context;\n\t\tconst viewRowIndex = mapper.rowToView(rowIndex);\n\t\tconst viewColumnIndex = mapper.columnToView(columnIndex);\n\t\tif (viewRowIndex >= 0 && viewRowIndex < super.rowCount(viewColumnIndex)) {\n\t\t\treturn super.cellCore(viewRowIndex, viewColumnIndex);\n\t\t}\n\n\t\tconst createRect = this.cellRectFactory();\n\t\treturn this.createCellCore(viewRowIndex, viewColumnIndex, new VirtualElement(createRect(viewRowIndex, viewColumnIndex)));\n\t}\n\n\trowCellsCore(index) {\n\t\tconst { mapper } = this.context;\n\t\tconst viewIndex = mapper.rowToView(index);\n\t\tif (viewIndex >= 0 && viewIndex < super.rowCount(0)) {\n\t\t\treturn super.rowCellsCore(viewIndex);\n\t\t}\n\n\t\tconst createRect = this.cellRectFactory();\n\t\treturn super\n\t\t\t.rowCellsCore(0)\n\t\t\t.map((cell, columnIndex) =>\n\t\t\t\tthis.createCellCore(\n\t\t\t\t\tviewIndex,\n\t\t\t\t\tcolumnIndex,\n\t\t\t\t\tnew VirtualElement(createRect(viewIndex, mapper.columnToView(columnIndex)))\n\t\t\t\t)\n\t\t\t);\n\t}\n\n\tcreateRowCore(index, element) {\n\t\treturn new VirtualRow(this, index, element);\n\t}\n\n\tcreateCellCore(rowIndex, columnIndex, element) {\n\t\treturn new VirtualCell(this, rowIndex, columnIndex, element);\n\t}\n\n\tcreateColumnCore(index) {\n\t\treturn new VirtualColumn(this, index);\n\t}\n\n\trowRectFactory() {\n\t\tconst { height } = this.model.row();\n\t\tconst getHeight = isFunction(height) ? height : () => height;\n\n\t\tlet rect = null;\n\t\t// as view.rect() can call getBoundingClientRect that impacts performance\n\t\t// and as virtual element rect function is used mostly for end/home navigation we make rect lazy\n\t\treturn index => () => {\n\t\t\tif (!rect) {\n\t\t\t\trect = this.context.view.rect('body-mid');\n\t\t\t}\n\n\t\t\t// TODO: add correct left, right, width\n\t\t\tconst rowHeight = getHeight(null, index);\n\t\t\treturn {\n\t\t\t\tleft: 0,\n\t\t\t\tright: 0,\n\t\t\t\ttop: rect.top + rowHeight * index,\n\t\t\t\tbottom: rect.top + rowHeight * (index + 1),\n\t\t\t\twidth: 0,\n\t\t\t\theight: rowHeight\n\t\t\t};\n\t\t};\n\t}\n\n\tcellRectFactory() {\n\t\tconst { model } = this;\n\t\tconst { height: rowHeight } = model.row();\n\t\tconst { count: pageCount } = model.pagination();\n\t\tconst { columns } = model.view();\n\t\tconst columnWidths = this.model.layout().columns;\n\n\t\tconst getHeight = isFunction(rowHeight) ? rowHeight : () => rowHeight;\n\n\t\tlet rect = null;\n\n\t\t// as view.rect() can call getBoundingClientRect that impacts performance\n\t\t// and as virtual element rect function is used mostly for end/home navigation we make rect lazy\n\t\treturn (rowIndex, columnIndex) => () => {\n\t\t\tif (!rect) {\n\t\t\t\trect = this.context.view.rect('body-mid');\n\t\t\t}\n\n\t\t\tconst column = columns[columnIndex];\n\n\t\t\t// TODO: add correct left, right, width\n\t\t\tconst height = getHeight(null, rowIndex);\n\t\t\tconst top = rect.top + height * rowIndex - (rowIndex > 0 ? 0 : (pageCount + rowIndex) * height);\n\t\t\tconst width = columnWidths.has(column.key) ? columnWidths.get(column.key).width : 0;\n\t\t\tconst left = 0;\n\t\t\treturn {\n\t\t\t\tleft,\n\t\t\t\tright: left + width,\n\t\t\t\ttop,\n\t\t\t\tbottom: top + height,\n\t\t\t\twidth,\n\t\t\t\theight\n\t\t\t};\n\t\t};\n\t}\n}","import { StyleBox } from './style.box';\n\nexport class CellBox extends StyleBox {\n\tconstructor(context) {\n\t\tsuper(context);\n\t}\n\n\tkey(cell) {\n\t\treturn `${cell.dataRowIndex}x${cell.dataColumnIndex}`;\n\t}\n}","import { Cell } from '../cell';\nimport { Td } from '../td';\nimport { GridError } from '../../infrastructure/error';\nimport { FakeElement } from '../fake/element';\n\nclass VirtualTd {\n\tconstructor(selector) {\n\t\tthis.selector = selector;\n\t}\n\n\tget model() {\n\t\tconst td = this.selector();\n\t\tif (!td) {\n\t\t\tthrow new GridError('cell', 'Model is not found');\n\t\t}\n\n\t\treturn td;\n\t}\n\n\tmode(value) {\n\t\treturn this.model.mode(value);\n\t}\n\n\tget value() {\n\t\treturn this.model.value;\n\t}\n\n\tset value(value) {\n\t\tthis.model.value = value;\n\t}\n\n\tget label() {\n\t\treturn this.model.label;\n\t}\n\n\tset label(value) {\n\t\tthis.model.label = value;\n\t}\n\n\tget element() {\n\t\treturn this.model.element || new FakeElement();\n\t}\n}\n\nexport class VirtualCell extends Cell {\n\tconstructor(box, rowIndex, columnIndex, element = null) {\n\t\tsuper(box.context, rowIndex, columnIndex, element);\n\n\t\tthis.box = box;\n\n\t\tconst { mapper } = box.context;\n\t\tthis.dataRowIndex = mapper.viewToRow(rowIndex);\n\t\tthis.dataColumnIndex = mapper.viewToColumn(columnIndex);\n\t}\n\n\tmodel() {\n\t\tconst rowIndex = this.dataRowIndex;\n\t\tconst columnIndex = this.dataColumnIndex;\n\n\t\tif (rowIndex >= 0 && columnIndex >= 0) {\n\t\t\tconst gridModel = this.box.model;\n\t\t\tconst { rows } = gridModel.data();\n\t\t\tconst { columns } = gridModel.view();\n\n\t\t\tif (rows.length > rowIndex && columns.length > columnIndex) {\n\t\t\t\tconst selector = () => this.box.cell(rowIndex, columnIndex).modelCore();\n\t\t\t\tconst vtd = new VirtualTd(selector);\n\t\t\t\tvtd.rowIndex = rowIndex;\n\t\t\t\tvtd.columnIndex = columnIndex;\n\t\t\t\tvtd.row = rows[rowIndex];\n\t\t\t\tvtd.column = columns[columnIndex];\n\n\t\t\t\treturn new Td(vtd);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\taddClass(name, force = false) {\n\t\tthis.box.addCellClass(this, name, force);\n\t}\n\n\tremoveClass(name, force = false) {\n\t\tthis.box.removeCellClass(this, name, force);\n\t}\n}","import { StyleBox } from './style.box';\n\nexport class ColumnBox extends StyleBox {\n\tconstructor(context) {\n\t\tsuper(context);\n\t}\n\n\tkey(column) {\n\t\treturn column.dataIndex;\n\t}\n}","import { Column } from '../column';\n\nexport class VirtualColumn extends Column {\n\tconstructor(box, index) {\n\t\tsuper(box, index);\n\n\t\tthis.box = box;\n\n\t\tconst { mapper } = box.context;\n\t\tthis.dataIndex = mapper.viewToColumn(index);\n\t}\n\n\tcells() {\n\t\treturn this.box.columnCellsCore(this.dataIndex);\n\t}\n\n\tcell(rowIndex) {\n\t\treturn this.box.cell(rowIndex, this.dataIndex);\n\t}\n\n\taddClass(name, force = false) {\n\t\tthis.box.addColumnClass(this, name, force);\n\t}\n\n\tremoveClass(name, force = false) {\n\t\tthis.box.removeColumnClass(this, name, force);\n\n\t}\n}\n","import { FakeClassList } from '../fake/class.list';\n\nexport class VirtualElement {\n\tconstructor(getRect) {\n\t\tthis.classList = new FakeClassList();\n\t\tthis.getRect = getRect;\n\t}\n\n\tgetBoundingClientRect() {\n\t\treturn this.getRect();\n\t}\n\n\tget clientWidth() {\n\t\treturn this.getRect().width;\n\t}\n\n\tget clientHeight() {\n\t\treturn this.getRect().height;\n\t}\n\n\tget offsetWidth() {\n\t\treturn this.getRect().width;\n\t}\n\n\tget offsetHeight() {\n\t\treturn this.getRect().height;\n\t}\n}","import { StyleBox } from './style.box';\n\nexport class RowBox extends StyleBox {\n\tconstructor(context) {\n\t\tsuper(context);\n\t}\n\n\tkey(row) {\n\t\treturn row.dataIndex;\n\t}\n}","import { Row } from '../row';\n\nexport class VirtualRow extends Row {\n\tconstructor(box, index, element = null) {\n\t\tsuper(box, index, element);\n\n\t\tconst { mapper } = box.context;\n\t\tthis.dataIndex = mapper.viewToRow(index);\n\t}\n\n\tmodel() {\n\t\tconst model = super.model();\n\t\tif (model) {\n\t\t\treturn model;\n\t\t}\n\n\t\tconst index = this.dataIndex;\n\t\tif (index >= 0) {\n\t\t\tconst gridModel = this.box.model;\n\t\t\tconst { rows } = gridModel.data();\n\t\t\tif (rows.length > index) {\n\t\t\t\treturn rows[index];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tcells() {\n\t\treturn this.box.rowCellsCore(this.dataIndex);\n\t}\n\n\tcell(columnIndex) {\n\t\treturn this.box.cellCore(this.dataIndex, columnIndex);\n\t}\n\n\taddClass(name, force = false) {\n\t\tthis.box.addRowClass(this, name, force);\n\t}\n\n\tremoveClass(name, force = false) {\n\t\tthis.box.removeRowClass(this, name, force);\n\t}\n}\n","export class StyleBox {\n\tconstructor(context) {\n\t\tthis.context = context;\n\t\tthis.entries = new Map();\n\t}\n\n\taddClass(item, name) {\n\t\tconst key = this.key(item);\n\t\tif (key !== null) {\n\t\t\tlet entry = this.entries.get(key);\n\t\t\tif (!entry) {\n\t\t\t\tentry = new Set();\n\t\t\t\tthis.entries.set(key, entry);\n\t\t\t}\n\n\t\t\tentry.add(name);\n\t\t}\n\t}\n\n\tremoveClass(item, name) {\n\t\tconst key = this.key(item);\n\t\tif (key !== null) {\n\t\t\tlet entry = this.entries.get(key);\n\t\t\tif (entry) {\n\t\t\t\tentry.delete(name);\n\t\t\t\tif (!entry.size) {\n\t\t\t\t\tthis.entries.delete(key);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tkey(item) {\n\t\treturn item;\n\t}\n}","import { GRID_PREFIX } from '../definition';\n\nexport class DragService {\n\tconstructor() {\n\t}\n\n\tstatic get mimeType() {\n\t\treturn `application/x-${GRID_PREFIX}+json`;\n\t}\n\n\tstatic decode(source) {\n\t\treturn JSON.parse(source);\n\t}\n\n\tstatic encode(source) {\n\t\treturn JSON.stringify(source);\n\t}\n}\n\nDragService.element = null;\nDragService.data = null;\nDragService.area = null;\nDragService.startPosition = null;\n","export class DragState {\n\tconstructor() {\n\t\tthis.isActive = false;\n\t}\n}","import { Fetch } from '../infrastructure/fetch';\nimport { parseFactory } from '../services/convert';\nimport { clone, isUndefined, noop } from '../utility/kit';\n\nclass CellEditorCore {\n\tconstructor(td) {\n\t\tthis.td = td;\n\n\t\tthis.value = null;\n\t\tthis.label = null;\n\n\t\tthis.fetch = noop;\n\t\tthis.resetFetch = noop;\n\t}\n\n\tcommit() {\n\t}\n\n\treset() {\n\t}\n\n\tclear() {\n\n\t}\n}\n\nconst empty = new CellEditorCore(null);\n\nexport class CellEditor extends CellEditorCore {\n\tconstructor(td) {\n\t\tsuper(td);\n\n\t\tthis.fetch = this.fetchFactory();\n\t\tthis.resetFetch = this.fetch.run(td.row);\n\n\t\tif (isUndefined(td.value)) {\n\t\t\tthis.value = null;\n\t\t}\n\t\telse {\n\t\t\tconst parse = parseFactory(td.column.type, td.column.editor);\n\t\t\tconst typedValue = parse(clone(td.value));\n\t\t\tthis.value = typedValue === null ? td.value : typedValue;\n\t\t}\n\n\t\tthis.label = isUndefined(td.label) ? null : clone(td.label);\n\t}\n\n\tcommit() {\n\t\tthis.td.value = this.value;\n\t\tthis.td.label = this.label;\n\n\t\tthis.resetFetch();\n\t\tthis.resetFetch = noop;\n\t}\n\n\treset() {\n\t\tthis.label = this.td.label;\n\t\tthis.value = this.td.value;\n\n\t\tthis.resetFetch();\n\t\tthis.resetFetch = noop;\n\t}\n\n\tclear() {\n\t\tthis.label = null;\n\t\tthis.value = null;\n\n\t\tthis.resetFetch();\n\t\tthis.resetFetch = noop;\n\t}\n\n\tfetchFactory() {\n\t\tconst { editorOptions } = this.td.column;\n\t\tif (editorOptions && editorOptions.fetch) {\n\t\t\treturn new Fetch(editorOptions.fetch);\n\t\t}\n\n\t\treturn new Fetch(this.td.value);\n\t}\n\n\tget cell() {\n\t\treturn this.td;\n\t}\n\n\tstatic get empty() {\n\t\treturn empty;\n\t}\n}","import { Command } from '../command/command';\nimport { Log } from '../infrastructure/log';\nimport { parseFactory } from '../services/convert';\nimport { getLabelFactory } from '../services/label';\nimport { getValueFactory } from '../services/value';\nimport { Shortcut } from '../shortcut/shortcut';\nimport * as validationService from '../validation/validation.service';\nimport { CellEditor } from './edit.cell.editor';\n\n// do not delete this importing it's required in the bundle\n// TODO: investigate how to avoid it\nimport { Td } from '../dom/td';\n\nexport class EditCellLet {\n\tconstructor(plugin, shortcut) {\n\t\tconst { model, observeReply } = plugin;\n\n\t\tthis.plugin = plugin;\n\t\tthis.shortcut = shortcut;\n\n\t\tthis.editor = CellEditor.empty;\n\t\tthis.requestClose = null;\n\n\t\tconst commands = this.getCommands();\n\t\tshortcut.register(commands);\n\n\t\tthis.enter = commands.get('enter');\n\t\tthis.commit = commands.get('commit');\n\t\tthis.push = commands.get('push');\n\t\tthis.cancel = commands.get('cancel');\n\t\tthis.reset = commands.get('reset');\n\t\tthis.exit = commands.get('exit');\n\t\tthis.clear = commands.get('clear');\n\n\t\tobserveReply(model.editChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('status') && e.tag.source !== 'edit.cell.view') {\n\t\t\t\t\tif (e.changes.status.newValue === 'edit') {\n\t\t\t\t\t\t// this is a trick to go back to the view mode and trigger enter\n\t\t\t\t\t\t// TODO: make it better\n\t\t\t\t\t\tmodel.edit({\n\t\t\t\t\t\t\tstatus: 'view'\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tsource: 'edit.cell.view'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (this.enter.canExecute()) {\n\t\t\t\t\t\t\tthis.enter.execute();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (e.changes.status.newValue === 'view') {\n\t\t\t\t\t\t// this is a trick to go back to the edit mode and trigger cancel\n\t\t\t\t\t\t// TODO: make it better\n\t\t\t\t\t\tmodel.edit({\n\t\t\t\t\t\t\tstatus: 'edit'\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tsource: 'edit.cell.view'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (this.requestClose) {\n\t\t\t\t\t\t\tif (this.requestClose()) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.cancel.canExecute()) {\n\t\t\t\t\t\t\tthis.cancel.execute();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.navigationChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('cell')) {\n\t\t\t\t\tif (this.requestClose) {\n\t\t\t\t\t\tif (this.requestClose()) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst editCell = this.editor.td;\n\t\t\t\t\tif (editCell) {\n\t\t\t\t\t\tif (editCell.column.category === 'data') {\n\t\t\t\t\t\t\tif (this.commit.canExecute(editCell)) {\n\t\t\t\t\t\t\t\tthis.commit.execute(editCell);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (this.cancel.canExecute(editCell)) {\n\t\t\t\t\t\t\t\tthis.cancel.execute(editCell);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst { cell } = e.state;\n\t\t\t\t\tif (cell && (cell.column.editorOptions.trigger === 'focus')) {\n\t\t\t\t\t\tif (this.enter.canExecute(cell)) {\n\t\t\t\t\t\t\tthis.enter.execute(cell);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tmode(cell, status) {\n\t\tconst { model } = this.plugin;\n\t\tmodel.edit({ status }, { source: 'edit.cell.view' });\n\t\tcell.mode(status);\n\t}\n\n\tgetCommands() {\n\t\tconst { model, table } = this.plugin;\n\n\t\tconst commands = {\n\t\t\tenter: new Command({\n\t\t\t\tpriority: 1,\n\t\t\t\tsource: 'edit.cell.view',\n\t\t\t\tshortcut: this.shortcutFactory('enter'),\n\t\t\t\tcanExecute: cell => {\n\t\t\t\t\t// TODO: source should be set up from outside\n\t\t\t\t\tconst source = cell ? 'mouse' : 'keyboard';\n\t\t\t\t\tif (source === 'keyboard' && Shortcut.isControl(this.shortcut.keyCode())) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tcell = cell || model.navigation().cell;\n\n          //cell is an array when using custom template\n          if(Array.isArray(cell)) {\n            if(cell.length > 0) {\n              if (cell[0].constructor.name == 'TdCoreDirective') {\n                cell = cell[0];\n              }\n            }\n          }\n          \n\t\t\t\t\treturn cell\n\t\t\t\t\t\t&& cell.column.canEdit\n\t\t\t\t\t\t&& (cell.column.category === 'control' || model.edit().mode === 'cell')\n\t\t\t\t\t\t&& model.edit().status === 'view'\n\t\t\t\t\t\t&& model.edit().enter.canExecute(this.contextFactory(cell, cell.value, cell.label));\n\t\t\t\t},\n\t\t\t\texecute: (cell, e) => {\n\t\t\t\t\tLog.info('cell.edit', 'edit mode');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\t// TODO: source should be set up from outside\n\t\t\t\t\tconst source = cell ? 'mouse' : 'keyboard';\n\t\t\t\t\tcell = cell || model.navigation().cell;\n\t\t\t\t\tif (cell && model.edit().enter.execute(this.contextFactory(cell, cell.value, cell.label)) !== false) {\n\t\t\t\t\t\tconst td = table.body.cell(cell.rowIndex, cell.columnIndex).model();\n\t\t\t\t\t\tthis.editor = new CellEditor(td);\n\n\t\t\t\t\t\tconst keyCode = this.shortcut.keyCode();\n\t\t\t\t\t\tif (source === 'keyboard' && Shortcut.isPrintable(keyCode)) {\n\t\t\t\t\t\t\tconst parse = parseFactory(cell.column.type, cell.column.editor);\n\t\t\t\t\t\t\tconst value = Shortcut.stringify(keyCode);\n\t\t\t\t\t\t\tconst typedValue = parse(value);\n\t\t\t\t\t\t\tif (typedValue !== null) {\n\t\t\t\t\t\t\t\tthis.value = typedValue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.mode(this.editor.td, 'edit');\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcommit: new Command({\n\t\t\t\tpriority: 1,\n\t\t\t\tsource: 'edit.cell.view',\n\t\t\t\tshortcut: this.shortcutFactory('commit'),\n\t\t\t\tcanExecute: cell => {\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\tconst canEdit = cell\n\t\t\t\t\t\t&& Td.equals(cell, this.editor.td)\n\t\t\t\t\t\t&& cell.column.canEdit\n\t\t\t\t\t\t&& (cell.column.category === 'control' || model.edit().mode === 'cell')\n\t\t\t\t\t\t&& model.edit().status === 'edit';\n\t\t\t\t\tif (canEdit) {\n\t\t\t\t\t\tconst context = this.contextFactory(cell, this.value, this.label, this.tag);\n\t\t\t\t\t\tconst key = context.column.key;\n\t\t\t\t\t\tconst validator = validationService.createValidator(model.validation().rules, key);\n\t\t\t\t\t\treturn model.edit().commit.canExecute(context) && validator.validate({ [key]: this.value }) !== false;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: (cell, e) => {\n\t\t\t\t\tLog.info('cell.edit', 'commit');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\tif (cell && model.edit().commit.execute(this.contextFactory(cell, this.value, this.label, this.tag)) !== false) {\n\t\t\t\t\t\tthis.editor.commit();\n\t\t\t\t\t\tthis.editor = CellEditor.empty;\n\t\t\t\t\t\tthis.requestClose = null;\n\n\t\t\t\t\t\tthis.mode(cell, 'view');\n\t\t\t\t\t\ttable.view.focus();\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}),\n\t\t\tpush: new Command({\n\t\t\t\tpriority: 1,\n\t\t\t\tsource: 'edit.cell.view',\n\t\t\t\tcanExecute: cell => {\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\tconst canEdit = cell && cell.column.canEdit;\n\t\t\t\t\tif (canEdit) {\n\t\t\t\t\t\tconst context = this.contextFactory(cell, this.value, this.label, this.tag);\n\t\t\t\t\t\tconst key = context.column.key;\n\t\t\t\t\t\tconst validator = validationService.createValidator(model.validation().rules, key);\n\t\t\t\t\t\treturn model.edit().commit.canExecute(context) && validator.validate({ [key]: this.value }) !== false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: (cell, e) => {\n\t\t\t\t\tLog.info('cell.edit', 'batch commit');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\tif (cell && model.edit().commit.execute(this.contextFactory(cell, this.value, this.label, this.tag)) !== false) {\n\t\t\t\t\t\tthis.editor.commit();\n\t\t\t\t\t\tthis.editor = CellEditor.empty;\n\t\t\t\t\t\tthis.requestClose = null;\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcancel: new Command({\n\t\t\t\tpriority: 1,\n\t\t\t\tsource: 'edit.cell.view',\n\t\t\t\tshortcut: this.shortcutFactory('cancel'),\n\t\t\t\tcanExecute: cell => {\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\treturn cell\n\t\t\t\t\t\t&& cell.column.canEdit\n\t\t\t\t\t\t&& (cell.column.category === 'control' || model.edit().mode === 'cell')\n\t\t\t\t\t\t&& model.edit().status === 'edit'\n\t\t\t\t\t\t&& model.edit().cancel.canExecute(this.contextFactory(cell, this.value, this.label));\n\t\t\t\t},\n\t\t\t\texecute: (cell, e) => {\n\t\t\t\t\tLog.info('cell.edit', 'cancel');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\tif (cell && model.edit().cancel.execute(this.contextFactory(cell, this.value, this.label)) !== false) {\n\t\t\t\t\t\tthis.editor.reset();\n\t\t\t\t\t\tthis.editor = CellEditor.empty;\n\t\t\t\t\t\tthis.requestClose = null;\n\n\t\t\t\t\t\tthis.mode(cell, 'view');\n\t\t\t\t\t\ttable.view.focus();\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}),\n\t\t\treset: new Command({\n\t\t\t\tpriority: 1,\n\t\t\t\tsource: 'edit.cell.view',\n\t\t\t\tcanExecute: cell => {\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\treturn cell\n\t\t\t\t\t\t&& cell.column.canEdit\n\t\t\t\t\t\t&& (cell.column.category === 'control' || model.edit().mode === 'cell')\n\t\t\t\t\t\t&& model.edit().status === 'edit'\n\t\t\t\t\t\t&& model.edit().reset.canExecute(this.contextFactory(cell, this.value, this.label));\n\t\t\t\t},\n\t\t\t\texecute: (cell, e) => {\n\t\t\t\t\tLog.info('cell.edit', 'reset');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\tif (cell && model.edit().reset.execute(this.contextFactory(cell, this.value, this.label)) !== false) {\n\t\t\t\t\t\tthis.editor.reset();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}),\n\t\t\texit: new Command({\n\t\t\t\tpriority: 1,\n\t\t\t\tsource: 'edit.cell.view',\n\t\t\t\texecute: (cell, e) => {\n\t\t\t\t\tLog.info('cell.edit', 'reset');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\tif (cell) {\n\t\t\t\t\t\tif (this.commit.canExecute(cell, e)) {\n\t\t\t\t\t\t\tconst originValue = cell.value;\n\t\t\t\t\t\t\tconst editValue = this.value;\n\t\t\t\t\t\t\tif (originValue !== editValue) {\n\t\t\t\t\t\t\t\tthis.commit.execute(cell, e);\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.cancel.canExecute(cell, e)) {\n\t\t\t\t\t\t\tthis.cancel.execute(cell, e);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}),\n\t\t\tclear: new Command({\n\t\t\t\tpriority: 1,\n\t\t\t\tsource: 'edit.cell.view',\n\t\t\t\tcanExecute: cell => {\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\treturn cell\n\t\t\t\t\t\t&& cell.column.canEdit\n\t\t\t\t\t\t&& (cell.column.category === 'control' || model.edit().mode === 'cell')\n\t\t\t\t\t\t&& model.edit().status === 'edit'\n\t\t\t\t\t\t&& model.edit().clear.canExecute(this.contextFactory(cell, this.value, this.label));\n\t\t\t\t},\n\t\t\t\texecute: (cell, e) => {\n\t\t\t\t\tLog.info('cell.edit', 'clear');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tcell = cell || this.editor.td;\n\t\t\t\t\tif (cell && model.edit().clear.execute(this.contextFactory(cell, this.value, this.label)) !== false) {\n\t\t\t\t\t\tthis.editor.clear();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}),\n\t\t};\n\n\t\treturn new Map(\n\t\t\tObject.entries(commands)\n\t\t);\n\t}\n\n\tcontextFactory(cell, newValue, newLabel, tag) {\n\t\tconst { column, row, columnIndex, rowIndex, value: oldValue, label: oldLabel } = cell;\n\t\treturn {\n\t\t\tcolumn,\n\t\t\trow,\n\t\t\tcolumnIndex,\n\t\t\trowIndex,\n\t\t\toldValue,\n\t\t\tnewValue,\n\t\t\toldLabel,\n\t\t\tnewLabel,\n\t\t\tunit: 'cell',\n\t\t\ttag,\n\t\t\tgetValueFactory,\n\t\t\tgetLabelFactory\n\t\t};\n\t}\n\n\tget fetch() {\n\t\treturn this.editor.fetch;\n\t}\n\n\tget value() {\n\t\treturn this.editor.value;\n\t}\n\n\tset value(value) {\n\t\tthis.editor.value = value;\n\t}\n\n\tget label() {\n\t\treturn this.editor.label;\n\t}\n\n\tset label(label) {\n\t\tthis.editor.label = label;\n\t}\n\n\tget row() {\n\t\treturn this.cell.row;\n\t}\n\n\tget column() {\n\t\treturn this.cell.column;\n\t}\n\n\tget cell() {\n\t\treturn this.editor.td;\n\t}\n\n\tget options() {\n\t\treturn this.column.options;\n\t}\n\n\tcanEdit(cell) {\n\t\tconst { model } = this.plugin;\n\n\t\tif (cell) {\n\t\t\treturn cell.column.canEdit && model.edit().mode === 'cell';\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tshortcutFactory(type) {\n\t\tconst { model } = this.plugin;\n\t\tconst { edit } = model;\n\t\treturn () => {\n\t\t\tconst shortcuts = edit()[type + 'Shortcuts'];\n\t\t\tconst { td } = this.editor;\n\t\t\tif (td) {\n\t\t\t\tconst type = td.column && td.column.editor ? td.column.editor : td.column.type;\n\t\t\t\tif (shortcuts && shortcuts.hasOwnProperty(type)) {\n\t\t\t\t\treturn shortcuts[type];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn shortcuts['$default'];\n\t\t};\n\t}\n}\n","import { EditCellLet } from './edit.cell.let';\nimport { EditRowLet } from './edit.row.let';\n\nexport class EditLet {\n\tconstructor(plugin, shortcut) {\n\t\tthis.cell = new EditCellLet(plugin, shortcut);\n\t\tthis.row = new EditRowLet(plugin, shortcut);\n\t}\n}","import { getLabel, setLabel } from '../services/label';\nimport { getValue, setValue } from '../services/value';\nimport { cloneDeep } from '../utility/kit';\nimport { CellEditor } from './edit.cell.editor';\n\n\nclass RowEditorCore {\n\tconstructor() {\n\t\tthis.editors = [];\n\t}\n\n\tcommit() {\n\t}\n\n\treset() {\n\t}\n}\n\n\nclass TdView {\n\tconstructor(row, column) {\n\t\tthis.row = row;\n\t\tthis.column = column;\n\t}\n\n\tget value() {\n\t\treturn getValue(this.row, this.column);\n\t}\n\n\tset value(value) {\n\t\treturn setValue(this.row, this.column, value);\n\t}\n\n\tget label() {\n\t\treturn getLabel(this.row, this.column);\n\t}\n\n\tset label(value) {\n\t\treturn setLabel(this.row, this.column, value);\n\t}\n}\n\nconst empty = new RowEditorCore();\nexport class RowEditor extends RowEditorCore {\n\tconstructor(row, columns) {\n\t\tsuper();\n\n\t\tthis.value = cloneDeep(row);\n\t\tthis.row = row;\n\n\t\tthis.editors =\n\t\t\tcolumns\n\t\t\t\t.filter(column => column.canEdit)\n\t\t\t\t.map(column => new CellEditor(new TdView(this.value, column)));\n\t}\n\n\tcommit() {\n\t\tthis.editors.forEach(editor => editor.commit());\n\t\tObject.assign(this.row, this.value);\n\t}\n\n\treset() {\n\t\tthis.editors.forEach(editor => editor.reset());\n\t\tthis.value = cloneDeep(this.row);\n\t}\n\n\tstatic get empty() {\n\t\treturn empty;\n\t}\n}","import { Log } from '../infrastructure/log';\nimport { Command } from '../command/command';\nimport { RowEditor } from './edit.row.editor';\nimport { selectRow } from '../navigation/navigation.state.selector';\n\nexport class EditRowLet {\n\tconstructor(plugin, shortcut) {\n\t\tthis.plugin = plugin;\n\t\tthis.editor = RowEditor.empty;\n\n\t\tconst commands = this.getCommands();\n\t\tshortcut.register(commands);\n\n\t\tthis.enter = commands.get('enter');\n\t\tthis.commit = commands.get('commit');\n\t\tthis.cancel = commands.get('cancel');\n\t\tthis.reset = commands.get('reset');\n\t}\n\n\tgetCommands() {\n\t\tconst { model } = this.plugin;\n\t\tconst commands = {\n\t\t\tenter: new Command({\n\t\t\t\tsource: 'edit.row.view',\n\t\t\t\tshortcut: this.shortcutFactory('enter'),\n\t\t\t\tcanExecute: row => {\n\t\t\t\t\trow = row || selectRow(model.navigation());\n\t\t\t\t\treturn row\n\t\t\t\t\t\t&& model.edit().mode === 'row'\n\t\t\t\t\t\t&& model.edit().status === 'view'\n\t\t\t\t\t\t&& model.edit().enter.canExecute(this.contextFactory(row));\n\t\t\t\t},\n\t\t\t\texecute: (row, e) => {\n\t\t\t\t\tLog.info('row.edit', 'edit mode');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tconst columns = this.model.columnList().line;\n\n\t\t\t\t\tthis.editor = new RowEditor(row, columns);\n\t\t\t\t\tmodel.edit({ status: 'edit' }, { source: 'edit.row.view' });\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcommit: new Command({\n\t\t\t\tsource: 'edit.row.view',\n\t\t\t\tshortcut: this.shortcutFactory('commit'),\n\t\t\t\t// TODO: add validation support\n\t\t\t\tcanExecute: row => {\n\t\t\t\t\trow = row || selectRow(model.navigation());\n\t\t\t\t\treturn row\n\t\t\t\t\t\t&& model.edit().mode === 'row'\n\t\t\t\t\t\t&& model.edit().status === 'edit'\n\t\t\t\t\t\t&& model.edit().commit.canExecute(this.contextFactory(row));\n\t\t\t\t},\n\t\t\t\texecute: (cell, e) => {\n\t\t\t\t\tLog.info('row.edit', 'commit');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.editor.commit();\n\t\t\t\t\tthis.editor = RowEditor.empty;\n\t\t\t\t\tmodel.edit({ status: 'view' }, { source: 'edit.row.view' });\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcancel: new Command({\n\t\t\t\tsource: 'edit.row.view',\n\t\t\t\tshortcut: this.shortcutFactory('cancel'),\n\t\t\t\tcanExecute: row => {\n\t\t\t\t\trow = row || selectRow(model.navigation());\n\t\t\t\t\treturn row\n\t\t\t\t\t\t&& model.edit().mode === 'row'\n\t\t\t\t\t\t&& model.edit().status === 'edit'\n\t\t\t\t\t\t&& model.edit().cancel.canExecute(this.contextFactory(row));\n\t\t\t\t},\n\t\t\t\texecute: (row, e) => {\n\t\t\t\t\tLog.info('cell.edit', 'cancel');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.editor.reset();\n\t\t\t\t\tthis.editor = RowEditor.empty;\n\t\t\t\t\tmodel.edit({ status: 'view' }, { source: 'edit.row.view' });\n\t\t\t\t}\n\t\t\t}),\n\t\t\treset: new Command({\n\t\t\t\tsource: 'edit.row.view',\n\t\t\t\tcanExecute: row => {\n\t\t\t\t\trow = row || selectRow(model.navigation());\n\t\t\t\t\treturn row\n\t\t\t\t\t\t&& model.edit().mode === 'row'\n\t\t\t\t\t\t&& model.edit().status === 'edit'\n\t\t\t\t\t\t&& model.edit().reset.canExecute(this.contextFactory(row));\n\t\t\t\t},\n\t\t\t\texecute: (row, e) => {\n\t\t\t\t\tLog.info('row.edit', 'reset');\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (row && model.edit().reset.execute(this.contextFactory(row)) !== false) {\n\t\t\t\t\t\tthis.editor.reset();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t};\n\t\treturn new Map(\n\t\t\tObject.entries(commands)\n\t\t);\n\t}\n\n\tcontextFactory(row) {\n\t\treturn {\n\t\t\trow: row,\n\t\t\tunit: 'row'\n\t\t};\n\t}\n\n\tshortcutFactory(type) {\n\t\tconst { model } = this.plugin;\n\t\tconst { edit } = model;\n\t\treturn () => {\n\t\t\tconst shortcuts = edit()[type + 'Shortcuts'];\n\t\t\treturn (shortcuts && shortcuts['row']) || shortcuts['$default'];\n\t\t};\n\t}\n}\n","import { CellEditor } from './edit.cell.editor';\nimport { EditCellLet } from './edit.cell.let';\n\nexport class EditService {\n\tconstructor(plugin) {\n\t\tthis.plugin = plugin;\n\t}\n\n\tstartBatch(startCell) {\n\t\tconst { model } = this.plugin;\n\n\t\tconst editStatus = model.edit().status;\n\t\tconst selectionMode = model.selection().mode;\n\n\t\tmodel.selection({ mode: 'range' });\n\t\tmodel.edit({ status: 'startBatch' });\n\n\t\treturn () => {\n\t\t\tmodel.edit({ status: editStatus });\n\t\t\tthis.doBatch(startCell);\n\t\t\tmodel.selection({ mode: selectionMode });\n\t\t}\n\t}\n\n\tdoBatch(startCell) {\n\t\tconst { table, model } = this.plugin;\n\n\t\tconst { rows } = model.scene();\n\t\tconst { columns } = model.view();\n\t\tconst { items } = model.selection();\n\n\t\tconst shortcut = { register: () => ({}), keyCode: () => '' };\n\t\tconst editView = new EditCellLet(this.plugin, shortcut);\n\n\t\tconst startTd = table.body.cell(startCell.rowIndex, startCell.columnIndex).model();\n\t\tconst { value, label } = startTd;\n\n\t\tconst startColumnType = startTd.column.type;\n\t\tfor (let i = 0, length = items.length; i < length; i++) {\n\t\t\tconst { row, column } = items[i];\n\t\t\tconst rowIndex = rows.indexOf(row);\n\t\t\tconst columnIndex = columns.indexOf(column);\n\n\t\t\tconst td = table.body.cell(rowIndex, columnIndex).model();\n\t\t\tconst type = td.column.type;\n\t\t\tif (startColumnType === type) {\n\t\t\t\tconst editor = new CellEditor(td);\n\t\t\t\teditor.label = label;\n\t\t\t\teditor.value = value;\n\n\t\t\t\teditView.editor = editor;\n\t\t\t\tif (editView.push.canExecute()) {\n\t\t\t\t\teditView.push.execute();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","import { Resource } from '../resource/resource';\nimport { Command } from '../command/command';\n\nexport class EditState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\n\t\tthis.mode = null; // cell | row\n\t\tthis.status = 'view'; // view | edit | startBatch | endBatch\n\t\tthis.method = null; // batch\n\n\t\tthis.enter = new Command({ source: 'edit.model' });\n\t\tthis.commit = new Command({ source: 'edit.model' });\n\t\tthis.cancel = new Command({ source: 'edit.model' });\n\t\tthis.reset = new Command({ source: 'edit.model' });\n\t\tthis.clear = new Command({ source: 'edit.model' });\n\n\t\tthis.cancelShortcuts = {\n\t\t\t'$default': 'escape'\n\t\t};\n\n\t\tthis.enterShortcuts = {\n\t\t\t'$default': '*',\n\t\t\t'row': 'F2|Enter',\n\t\t\t'form': 'F2|Enter'\n\t\t};\n\n\t\tthis.commitShortcuts = {\n\t\t\t'$default': 'tab|shift+tab|enter|ctrl+s',\n\t\t\t'reference': 'ctrl+s',\n\t\t\t'row': 'ctrl+s',\n\t\t\t'form': 'ctrl+s',\n\t\t\t'bool': 'tab|shift+tab|left|right|up|down|home|end|pageUp|pageDown',\n\t\t\t'text-area': 'ctrl+s|ctrl+enter'\n\t\t};\n\t}\n}\n","export class Event {\n\tconstructor(reply) {\n\t\tthis.handlers = [];\n\n\t\tthis.lastArg = null;\n\t\tthis.reply = reply || (() => this.lastArg);\n\t}\n\n\ton(next, lifecycle = 'app') {\n\t\tconst { handlers } = this;\n\n\t\tconst handler = { next, lifecycle };\n\t\tconst off = () => {\n\t\t\tconst index = handlers.indexOf(handler);\n\t\t\tif (index >= 0) {\n\t\t\t\thandlers.splice(index, 1);\n\t\t\t}\n\t\t};\n\n\t\thandler.off = off;\n\t\thandlers.push(handler);\n\n\t\treturn off;\n\t}\n\n\twatch(next, lifecycle = 'app') {\n\t\tconst off = this.on(next, lifecycle);\n\t\tif (this.lastArg) {\n\t\t\tconst e = this.reply();\n\t\t\tnext(e, off);\n\t\t}\n\n\t\treturn off;\n\t}\n\n\temit(value) {\n\t\tthis.lastArg = value;\n\n\t\tconst handlers = Array.from(this.handlers);\n\t\tfor (let i = 0, length = handlers.length; i < length; i++) {\n\t\t\tconst handler = handlers[i];\n\t\t\thandler.next(value, handler.off);\n\t\t}\n\t}\n}","export class EventListener {\n\tconstructor(element, manager) {\n\t\tthis.element = element;\n\t\tthis.manager = manager;\n\t\tthis.handlers = {};\n\t}\n\n\ton(name, f, settings = false) {\n\t\tconst manager = this.manager;\n\t\tconst handler = manager.bind(f);\n\t\tconst handlerSet = this.handlers[name] || (this.handlers[name] = []);\n\t\thandlerSet.push(handler);\n\n\t\tthis.element.addEventListener(name, handler, settings);\n\t\treturn () => {\n\t\t\tthis.element.removeEventListener(name, handler);\n\t\t\tconst index = handlerSet.indexOf(handler);\n\t\t\tif (index >= 0) {\n\t\t\t\thandlerSet.splice(index, 1);\n\t\t\t}\n\t\t};\n\t}\n\n\toff() {\n\t\tconst handlers = this.handlers;\n\t\tconst element = this.element;\n\t\tfor (let key of Object.keys(handlers)) {\n\t\t\tfor (let handler of Array.from(handlers[key])) {\n\t\t\t\telement.removeEventListener(key, handler);\n\t\t\t}\n\t\t}\n\t}\n}","export class EventManager {\n\tconstructor(context, apply = f => f()) {\n\t\tthis.context = context;\n\t\tthis.apply = apply;\n\t}\n\n\tbind(f) {\n\t\tconst handler = f.bind(this.context);\n\t\tconst apply = this.apply;\n\t\treturn (...args) => apply(() => handler(...args));\n\t}\n}","import { getValueFactory } from '../../services/value';\n\nconst DELIMITER = ',';\n\nfunction escape(value) {\n\tlet result = '' + value;\n\tresult = result.replace(/\"/g, '\"\"');\n\tresult = /[\\n\",]/.test(result) ? `\"${result}\"` : result;\n\treturn result;\n}\n\nexport class CsvExport {\n\twrite(rows, columns) {\n\t\tconst result = [];\n\t\tconst values = [];\n\t\tlet head = [];\n\t\tfor (let column of columns) {\n\t\t\tif (column.category === 'data') {\n\t\t\t\tvalues.push(getValueFactory(column));\n\t\t\t\thead.push(escape(column.title));\n\t\t\t}\n\t\t}\n\t\tresult.push(head.join(DELIMITER));\n\n\t\tfor (let row of rows) {\n\t\t\tconst line = [];\n\t\t\tfor (let getValue of values) {\n\t\t\t\tline.push(escape(getValue(row)));\n\t\t\t}\n\t\t\tresult.push(line.join(DELIMITER));\n\t\t}\n\n\t\treturn result.join('\\n');\n\t}\n}","import { isArray, isObject } from '../utility/kit';\n\nfunction graphFlatView(graph, separator = ', ') {\n\tconst result = {};\n\n\tfor (let [prop, value] of Object.entries(graph)) {\n\t\tif (isArray(value)) {\n\t\t\tconst items = [];\n\t\t\tfor (let item of value) {\n\t\t\t\titems.push(item);\n\t\t\t}\n\t\t\tresult[prop] = items.join(separator);\n\t\t} else if (isObject(value)) {\n\t\t\tconst flatObject = graphFlatView(value, separator);\n\t\t\tfor (let [flatProp, flatValue] of Object.entries(flatObject)) {\n\t\t\t\tresult[prop + '.' + flatProp] = flatValue;\n\t\t\t}\n\t\t} else {\n\t\t\tresult[prop] = value;\n\t\t}\n\t}\n\treturn result;\n}\n\nexport {\n  graphFlatView\n};\n","import { Resource } from '../resource/resource';\n\nexport class ExportState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t}\n}","import { graphFlatView } from '../export.service';\n\nexport class JsonExport {\n\twrite(rows, columns) {\n\t\tconst result = [];\n\n\t\tfor (let row of rows) {\n\t\t\tconst flatRow = graphFlatView(row);\n\t\t\tconst obj = {};\n\t\t\tfor (let column of columns) {\n\t\t\t\tobj[column.title] = flatRow[column.key];\n\t\t\t}\n\t\t\tresult.push(obj);\n\t\t}\n\n\t\treturn JSON.stringify(result, '', 2);\n\t}\n}\n","import { isArray, isObject, isString } from '../../utility/kit';\n\nconst begin = '<?xml version=\"1.0\" encoding=\"UTF-8\"?><root>';\n\nfunction escape(value) {\n\tlet result = '' + value;\n\tconst characters = [/</g, />/g, /&/g, /'/g, /\"/g, /\\s\\s+/g, /\\n/g];\n\tconst replacements = ['&lt;', '&gt;', '&amp;', '&apos;', '&quot;', ' ', '&#xA;'];\n\tfor (let i = 0; i < characters.length; i++) {\n\t\tresult = result.replace(characters[i], replacements[i]);\n\t}\n\treturn result;\n}\n\nfunction objToXml(obj) {\n\tlet result = '';\n\n\tfor (let [prop, value] of Object.entries(obj)) {\n\t\tif (obj.hasOwnProperty(prop)) {\n\t\t\tif (isObject(value) && !isArray(value) && !isString(value)) {\n\t\t\t\tresult += `<${prop}>${objToXml(value)}</${prop}>`;\n\t\t\t} else if (isArray(value)) {\n\t\t\t\tfor (let item of value) {\n\t\t\t\t\tif (isString(item)) {\n\t\t\t\t\t\tresult += `<${prop}>${escape(item)}</${prop}>`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult += `<${prop}>${objToXml(item)}</${prop}>`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (isString(value)) {\n\t\t\t\tresult += `<${prop}>${escape(value)}</${prop}>`;\n\t\t\t}\n\t\t}\n\t}\n\treturn result;\n}\n\nexport class XmlExport {\n\twrite(rows) {\n\t\tconst result = [begin];\n\t\tfor (let row of rows) {\n\t\t\tresult.push(objToXml({ row }));\n\t\t}\n\t\tresult.push('</root>');\n\t\treturn result.join('');\n\t}\n}","import { GridError } from '../infrastructure/error';\n\nexport function getType(type) {\n\treturn {}.toString.call(type).slice('[object]'.length, -1); // returns type of built-in objects\n}\n\nexport function castFactory(r) {\n\tconst rt = getType(r);\n\tconst asString = '' + r;\n\tconst asNumber = +r;\n\tconst asBool = !!r;\n\tconst asDate = new Date(r);\n\n\treturn l => {\n\t\tconst lt = getType(l);\n\t\tif (rt === lt) {\n\t\t\treturn r;\n\t\t}\n\n\t\tswitch (lt) {\n\t\t\tcase 'Number':\n\t\t\t\treturn asNumber;\n\t\t\tcase 'String':\n\t\t\t\treturn asString;\n\t\t\tcase 'Date':\n\t\t\t\treturn asDate;\n\t\t\tcase 'Boolean':\n\t\t\t\treturn asBool;\n\t\t\tdefault:\n\t\t\t\tthrow GridError(\n\t\t\t\t\t'cast.factory',\n\t\t\t\t\t`Unsupported format ${lt}`\n\t\t\t\t);\n\t\t}\n\t};\n}\n","export function buildExpression(filterBy, op = 'and') {\n\tconst result = [];\n\tfor (let [key, filter] of Object.entries(filterBy)) {\n\t\tif (key === '$expression') {\n\t\t\tresult.push(filter);\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (filter.expression) {\n\t\t\tresult.push(filter.expression);\n\t\t}\n\n\t\tconst expressions = [];\n\t\tif (filter.items && filter.items.length) {\n\t\t\texpressions.push(toInExpression(key, filter.items));\n\t\t}\n\n\t\tif (filter.blanks) {\n\t\t\texpressions.push(toIsEmptyExpression(key));\n\t\t}\n\n\t\tif (expressions.length) {\n\t\t\tif (expressions.length === 1) {\n\t\t\t\tresult.push(expressions[0]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresult.push(compile(expressions, 'or'));\n\t\t\t}\n\t\t}\n\t}\n\n\treturn compile(result, op);\n}\n\nfunction toIsEmptyExpression(key) {\n\treturn {\n\t\tkind: 'group',\n\t\top: 'and',\n\t\tleft: {\n\t\t\tkind: 'condition',\n\t\t\tleft: key,\n\t\t\top: 'isEmpty',\n\t\t\tright: null\n\t\t},\n\t\tright: null\n\t};\n}\n\nfunction toInExpression(key, items) {\n\treturn {\n\t\tkind: 'group',\n\t\top: 'and',\n\t\tleft: {\n\t\t\tkind: 'condition',\n\t\t\tleft: key,\n\t\t\top: 'in',\n\t\t\tright: Array.from(items)\n\n\t\t},\n\t\tright: null\n\t};\n}\n\nfunction compile(expressions, op) {\n\tconst root = {\n\t\tkind: 'group',\n\t\top,\n\t\tleft: null,\n\t\tright: null\n\t};\n\n\tlet current = root;\n\n\texpressions.forEach(expr => {\n\t\tif (!current.left) {\n\t\t\tcurrent.left = expr;\n\t\t}\n\t\telse {\n\t\t\tconst next = {\n\t\t\t\tkind: 'group',\n\t\t\t\top,\n\t\t\t\tleft: expr,\n\t\t\t\tright: null\n\t\t\t};\n\n\t\t\tcurrent.right = next;\n\t\t\tcurrent = next;\n\t\t}\n\t});\n\n\n\treturn root.left ? root : null;\n}\n","import { GridError } from '../infrastructure/error';\n\nexport class Visitor {\n\tconstructor() {\n\t}\n\n\tvisit(item, depth = 0) {\n\t\tswitch (item.kind) {\n\t\t\tcase 'group':\n\t\t\t\treturn this.visitGroup(item, depth + 1);\n\t\t\tcase 'condition':\n\t\t\t\treturn this.visitCondition(item, depth);\n\t\t\tcase 'function':\n\t\t\t\treturn this.visitFunction(item, depth);\n\t\t\tdefault:\n\t\t\t\tthrow GridError(\n\t\t\t\t\t'expression.visitor',\n\t\t\t\t\t`Invalid kind ${item.kind}`\n\t\t\t\t);\n\t\t}\n\t}\n\n\tvisitGroup(group, depth) {\n\t\tif (group.right) {\n\t\t\tthis.visit(group.left, depth);\n\t\t\tthis.visit(group.right, depth);\n\t\t}\n\n\t\treturn this.visit(group.left, depth);\n\t}\n\n\tvisitCondition(condition, depth) {\n\t\tswitch (condition.op) {\n\t\t\tcase 'isNotNull':\n\t\t\tcase 'isNull':\n\t\t\tcase 'isNotEmpty':\n\t\t\tcase 'isEmpty':\n\t\t\tcase 'isNumeric':\n\t\t\tcase 'isNotNumeric':\n\t\t\t\treturn this.visitUnary(condition, depth);\n\t\t\tcase 'equals':\n\t\t\tcase 'notEquals':\n\t\t\tcase 'greaterThanOrEquals':\n\t\t\tcase 'greaterThan':\n\t\t\tcase 'lessThanOrEquals':\n\t\t\tcase 'lessThan':\n\t\t\tcase 'like':\n\t\t\tcase 'notLike':\n\t\t\tcase 'startsWith':\n\t\t\tcase 'endsWith':\n\t\t\tcase 'match':\n\t\t\t\treturn this.visitBinary(condition, depth);\n\t\t\tcase 'between':\n\t\t\t\treturn this.visitBetween(condition, depth);\n\t\t\tcase 'in':\n\t\t\t\treturn this.visitIn(condition, depth);\n\t\t\tdefault:\n\t\t\t\tthrow new GridError(\n\t\t\t\t\t'expression.visitor',\n\t\t\t\t\t`Invalid operation ${condition.op}`\n\t\t\t\t);\n\t\t}\n\t}\n\n\tvisitUnary(condition) {\n\t\tthis.visitLeft(condition.left);\n\t}\n\n\tvisitBinary(condition/*, depth*/) {\n\t\tthis.visitLeft(condition.left);\n\t\tthis.visitRight(condition.right);\n\t}\n\n\tvisitLeft(left) {\n\t\tif (left.kind) {\n\t\t\tswitch (left.kind) {\n\t\t\t\tcase 'function':\n\t\t\t\t\tthis.visitArguments(left.arguments);\n\t\t\t}\n\t\t}\n\t}\n\n\tvisitBetween(/*condition, depth*/) {\n\t}\n\n\tvisitIn(/*condition, depth*/) {\n\t}\n\n\tvisitFunction(/*fn*/) {\n\t}\n\n\tvisitArguments(args) {\n\t\treturn args.map(arg => {\n\t\t\tswitch (arg.kind) {\n\t\t\t\tcase 'condition':\n\t\t\t\tcase 'group':\n\t\t\t\t\tthis.visit(arg);\n\t\t\t}\n\t\t});\n\t}\n}","import { Visitor } from './expression.visitor';\nimport { GridError } from '../infrastructure/error';\n\nfunction stringify(value, type, isValid) {\n    if (!isValid) {\n        return '<span class=\"q-grid-markup-condition-value-invalid\"></span>';\n    }\n\n    switch (type) {\n        case 'text':\n            return stringifyText(value);\n        case 'number':\n            return stringifyNumber(value);\n        case 'date':\n            return stringifyDate(value);\n        default:\n            return '' + value;\n    }\n}\n\nfunction stringifyText(value) {\n    return `<span class=\"q-grid-markup-condition-quote\">'</span>\n                <span class=\"q-grid-markup-condition-value q-grid-markup-condition-value-text\">${value}</span>\n            <span class=\"q-grid-markup-condition-quote\">'</span>`;\n}\n\nfunction stringifyDate(value) {\n    const date = new Date(value);\n    if (date !== 'Invalid Date' && !isNaN(date)) {\n        return `<span class=\"q-grid-markup-condition-quote\">'</span>\n                    <span class=\"q-grid-markup-condition-value q-grid-markup-condition-value-date\">${value}</span>\n                <span class=\"q-grid-markup-condition-quote\">'</span>`;\n    }\n\n    return `<span class=\"q-grid-markup-condition-quote\">'</span>\n                <span class=\"q-grid-markup-condition-value q-grid-markup-condition-value-date q-grid-markup-condition-error\">${value}</span>\n            <span class=\"q-grid-markup-condition-quote\">'</span>`;\n}\n\nfunction stringifyNumber(value) {\n    const number = Number.parseFloat(value);\n    if (!isNaN(number) && isFinite(number)) {\n        return `<span class=\"q-grid-markup-condition-value q-grid-markup-condition-number\">${value}</span>`;\n    }\n\n    return `<span class=\"q-grid-markup-condition-value q-grid-markup-condition-number q-grid-markup-condition-error\">${value}</span>`;\n}\n\nfunction stringifyInteger(value) {\n    const number = Number.parseInt(value, 10);\n    if (!isNaN(number) && isFinite(number)) {\n        return `<span class=\"q-grid-markup-condition-value q-grid-markup-condition-number\">${value}</span>`;\n    }\n\n    return `<span class=\"q-grid-markup-condition-value q-grid-markup-condition-number q-grid-markup-condition-error\">${value}</span>`;\n}\n\nexport class MarkupVisitor extends Visitor {\n    constructor(label, type, isValid) {\n        super();\n\n        this.label = label;\n        this.type = type;\n        this.isValid = isValid;\n    }\n\n    visitGroup(group, depth) {\n        if (group.right) {\n            const l = this.visit(group.left, depth);\n            const r = this.visit(group.right, depth);\n\n            const expr = `<div class=\"q-grid-markup-node-left\">${l}</div><span class=\"q-grid-markup-group-op\">${group.op}</span><div class=\"q-grid-markup-node-right\">${r}</div>`;\n            return `<div class=\"q-grid-markup-node\">${(depth > 1 ? `<span class=\"q-grid-markup-group-open\">(</span>${expr}<span class=\"q-grid-markup-group-close\">)</span>` : expr)}</div>`;\n        }\n\n        return `<div class=\"q-grid-markup-node\">${this.visit(group.left, depth)}<div class=\"q-grid-markup-node\">`;\n    }\n\n    visitUnary(condition) {\n        switch (condition.op) {\n            case 'isNotNull':\n                return `<span class=\"q-grid-markup-condition-left\">${this.label(condition.left)}</span><span class=\"q-grid-markup-condition-right q-grid-markup-condition-unary\">is not empty</span>`;\n            case 'isNull':\n                return `<span class=\"q-grid-markup-condition-left\">${this.label(condition.left)}</span><span class=\"q-grid-markup-condition-right q-grid-markup-condition-unary\">is empty</span>`;\n            default:\n                throw new GridError('markup.visitor', `Invalid operation ${condition.op}`)\n        }\n    }\n\n    visitBinary(condition) {\n        let op;\n\n        switch (condition.op) {\n            case 'equals':\n                op = '=';\n                break;\n            case 'notEquals':\n                op = '&lt;&gt;';\n                break;\n            case 'greaterThanOrEquals':\n                op = '&gt;='\n                break;\n            case 'greaterThan':\n                op = '&gt;';\n                break;\n            case 'lessThanOrEquals':\n                op = '&lt;=';\n                break;\n            case 'lessThan':\n                op = '&lt;';\n                break;\n            case 'like':\n                op = 'like';\n                break\n            case 'notLike':\n                op = 'not like';\n                break;\n            case 'startsWith':\n                op = 'starts with';\n                break;\n            case 'endsWith':\n                op = 'ends with';\n                break;\n            default:\n                throw new GridError('markup.visitor', `Invalid operation ${condition.op}`);\n        }\n\n        const isValid = this.isValid(condition.left, condition.right);\n        return `<span class=\"q-grid-markup-condition-left\">${this.label(condition.left)}</span>\n                <span class=\"q-grid-markup-condition-op\">${op}</span>\n                <span class=\"q-grid-markup-condition-right\">${stringify(condition.right, this.type(condition.left), isValid)}</span>`;\n    }\n\n    visitBetween(condition) {\n        const isValid = this.isValid(condition.left, condition.right);\n        return `<span class=\"q-grid-markup-condition-left\">${this.label(condition.left)}</span>\n                <span class=\"q-grid-markup-condition-op\">between</span>\n                <span class=\"q-grid-markup-condition-right\">${stringify(condition.right[0], this.type(condition.left), isValid)}</span>\n                <span class=\"q-grid-markup-condition-op\">and</span>\n                <span class=\"q-grid-markup-condition-right\">${stringify(condition.right[1], this.type(condition.left), isValid)}</span>`;\n    }\n\n    visitIn(condition) {\n        const isValid = this.isValid(condition.left, condition.right);\n        return `<span class=\"q-grid-markup-condition-left\">${this.label(condition.left)}</span>\n                <span class=\"q-grid-markup-condition-op\">in</span>\n                <span class=\"q-grid-markup-condition-open\">(</span>\n                <span class=\"q-grid-markup-condition-right\">${condition.right.map(item => stringify(item, this.type(condition.left), isValid)).join(', ')}</span>\n                <span class=\"q-grid-markup-condition-close\">)</span>`;\n    }\n}\n","import { GridError } from '../infrastructure/error';\nimport { compareParseFactory } from '../services/convert';\nimport { Visitor } from './expression.visitor';\nimport { isArray, identity, yes, isUndefined } from '../utility/kit';\n\nexport class PredicateVisitor extends Visitor {\n\tconstructor(valueFactory, assertFactory, getType) {\n\t\tsuper();\n\n\t\tthis.valueFactory = valueFactory;\n\t\tthis.assertFactory = assertFactory;\n\t\tthis.getType = getType;\n\t}\n\n\tvisitGroup(group) {\n\t\tif (group.right) {\n\t\t\tconst lp = this.visit(group.left);\n\t\t\tconst rp = this.visit(group.right);\n\n\t\t\tswitch (group.op) {\n\t\t\t\tcase 'and':\n\t\t\t\t\treturn value => {\n\t\t\t\t\t\treturn lp(value) && rp(value);\n\t\t\t\t\t};\n\t\t\t\tcase 'or':\n\t\t\t\t\treturn value => {\n\t\t\t\t\t\treturn lp(value) || rp(value);\n\t\t\t\t\t};\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow GridError(\n\t\t\t\t\t\t'predicate.visitor',\n\t\t\t\t\t\t`Invalid operation ${group.op}`\n\t\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn this.visit(group.left);\n\t}\n\n\tvisitCondition(condition) {\n\t\tconst r = condition.right;\n\t\tconst name = condition.left;\n\t\tconst getValue = this.valueFactory(name);\n\t\tconst assert = this.assertFactory(name);\n\t\tconst map = new Set();\n\n\t\tconst rt = this.getType(name, isArray(r) ? r[0] : r);\n\t\tlet parse = compareParseFactory(rt);\n\n\t\tif (isArray(r)) {\n\t\t\tif (r.length) {\n\t\t\t\tr.forEach(x => map.add('' + x));\n\t\t\t} else {\n\t\t\t\tparse = identity;\n\t\t\t}\n\t\t}\n\n\t\tconst { equals, isNull, lessThan } = assert;\n\n\t\tconst lessThanOrEquals = (x, y) => {\n\t\t\treturn equals(x, y) || lessThan(x, y);\n\t\t};\n\n\t\tconst greaterThan = (x, y) => {\n\t\t\treturn !equals(x, y) && !lessThan(x, y)\n\t\t};\n\n\t\tconst greaterThanOrEquals = (x, y) => {\n\t\t\treturn equals(x, y) || !lessThan(x, y);\n\t\t};\n\n\t\tlet predicate;\n\t\tswitch (condition.op) {\n\t\t\tcase 'isNotNull':\n\t\t\tcase 'isNotEmpty':\n\t\t\t\tpredicate = actual => !isNull(actual);\n\t\t\t\tbreak;\n\t\t\tcase 'isNull':\n\t\t\tcase 'isEmpty':\n\t\t\t\tpredicate = actual => isNull(actual);\n\t\t\t\tbreak;\n\t\t\tcase 'equals': {\n\t\t\t\tconst etalon = parse(r);\n\t\t\t\tpredicate = actual => equals(parse(actual), etalon);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'notEquals': {\n\t\t\t\tconst etalon = parse(r);\n\t\t\t\tpredicate = actual => !equals(parse(actual), etalon);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'greaterThanOrEquals': {\n\t\t\t\tconst etalon = parse(r);\n\t\t\t\tpredicate = actual => greaterThanOrEquals(parse(actual), etalon);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'greaterThan': {\n\t\t\t\tconst etalon = parse(r);\n\t\t\t\tpredicate = actual => greaterThan(parse(actual), etalon);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'lessThanOrEquals': {\n\t\t\t\tconst etalon = parse(r);\n\t\t\t\tpredicate = actual => lessThanOrEquals(parse(actual), etalon);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'lessThan': {\n\t\t\t\tconst etalon = parse(r);\n\t\t\t\tpredicate = actual => lessThan(parse(actual), etalon);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'between': {\n\t\t\t\tconst [start, end] = r;\n\t\t\t\tconst noStart = isUndefined(start);\n\t\t\t\tconst noEnd = isUndefined(end);\n\t\t\t\tif (noStart && noEnd) {\n\t\t\t\t\tpredicate = yes;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (noEnd) {\n\t\t\t\t\tconst etalon = parse(start);\n\t\t\t\t\tpredicate = actual => greaterThanOrEquals(parse(actual), etalon);\n\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\tif (noStart) {\n\t\t\t\t\tconst etalon = parse(end);\n\t\t\t\t\tpredicate = actual => lessThanOrEquals(parse(actual), etalon);\n\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\tconst etalonStart = parse(start);\n\t\t\t\tconst etalonEnd = parse(end);\n\t\t\t\tpredicate = actual => {\n\t\t\t\t\tconst actualValue = parse(actual);\n\t\t\t\t\treturn greaterThanOrEquals(actualValue, etalonStart)\n\t\t\t\t\t\t&& lessThanOrEquals(actualValue, etalonEnd);\n\t\t\t\t};\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'in': {\n\t\t\t\tpredicate = (actual) => {\n\t\t\t\t\tif (isArray(actual)) {\n\t\t\t\t\t\tfor (const value of map) {\n\t\t\t\t\t\t\tif (actual.some((item) => '' + item === value)) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst v = !actual && actual !== 0 ? 'null' : '' + actual;\n\t\t\t\t\treturn map.has(v);\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'like': {\n\t\t\t\tconst etalon = ('' + r).toLowerCase();\n\t\t\t\tpredicate = actual => actual && ('' + actual).toLowerCase().includes(etalon);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'notLike': {\n\t\t\t\tconst etalon = ('' + r).toLowerCase();\n\t\t\t\tpredicate = actual => actual && !('' + actual).toLowerCase().includes(etalon);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'startsWith': {\n\t\t\t\tconst etalon = ('' + r).toLowerCase();\n\t\t\t\tpredicate = actual => actual && (('' + actual).toLowerCase().indexOf(etalon) === 0);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'endsWith': {\n\t\t\t\tconst etalon = ('' + r).toLowerCase();\n\t\t\t\tpredicate = actual => {\n\t\t\t\t\tconst substr = ('' + actual).slice(-etalon.length).toLowerCase();\n\t\t\t\t\treturn etalon === substr;\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tthrow new GridError(\n\t\t\t\t\t'predicate.visitor',\n\t\t\t\t\t`Invalid operation ${condition.op}`\n\t\t\t\t);\n\t\t}\n\n\t\treturn row => {\n\t\t\tconst actual = getValue(row);\n\t\t\treturn predicate(actual);\n\t\t};\n\t}\n}\n","export class FetchState {\n\tconstructor() {\n\t\tthis.skip = 0;\n\t}\n}","import { Command } from '../command/command';\nimport { clone, isUndefined, isArray } from '../utility/kit';\n\nexport class FilterLet {\n\tconstructor(plugin) {\n\t\tconst { model } = plugin;\n\n\t\tthis.plugin = plugin;\n\n\t\tthis.column = new Command({\n\t\t\tsource: 'filter.view',\n\t\t\texecute: (column, search) => {\n\t\t\t\tconst { key } = column;\n\n\t\t\t\tlet { by, operatorFactory } = model.filter();\n\t\t\t\tby = clone(by);\n\n\t\t\t\tconst filter = by[key] || (by[key] = {});\n\t\t\t\tif (!isUndefined(search) && search !== null && search !== '') {\n\t\t\t\t\tconst opList = operatorFactory(column);\n\t\t\t\t\tconst op = filter.expression ? filter.expression.op : opList[0];\n\t\t\t\t\tswitch (op) {\n\t\t\t\t\t\tcase 'contains': {\n\t\t\t\t\t\t\tfilter.items = [search];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'between': {\n\t\t\t\t\t\t\tfilter.expression = {\n\t\t\t\t\t\t\t\tkind: 'condition',\n\t\t\t\t\t\t\t\tleft: key,\n\t\t\t\t\t\t\t\top,\n\t\t\t\t\t\t\t\tright: [null, search]\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\tfilter.expression = {\n\t\t\t\t\t\t\t\tkind: 'condition',\n\t\t\t\t\t\t\t\tleft: key,\n\t\t\t\t\t\t\t\top,\n\t\t\t\t\t\t\t\tright: search\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdelete by[key];\n\t\t\t\t}\n\n\t\t\t\tmodel.filter({ by }, { source: 'filter.view' });\n\t\t\t}\n\t\t});\n\t}\n\n\thas(column) {\n\t\tconst { model } = this.plugin;\n\t\tconst { by } = model.filter();\n\t\treturn by.hasOwnProperty(column.key);\n\t}\n\n\tvalue(column) {\n\t\tconst { model } = this.plugin;\n\t\tconst { key } = column;\n\t\tconst { by } = model.filter();\n\t\tif (by[key]) {\n\t\t\tconst { expression, items } = by[key];\n\t\t\treturn expression\n\t\t\t\t? isArray(expression.right)\n\t\t\t\t\t? expression.right[expression.right.length - 1]\n\t\t\t\t\t: expression.right\n\t\t\t\t: items && items.length\n\t\t\t\t\t? items[0]\n\t\t\t\t\t: null;\n\t\t}\n\n\t\treturn null;\n\t}\n}","import { Resource } from '../resource/resource';\nimport { match } from './match';\nimport { noop, yes } from '../utility/kit';\n\nexport class FilterState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\n\t\tthis.by = {};\n\t\tthis.match = match;\n\t\tthis.custom = yes;\n\t\tthis.fetch = noop;\n\t\tthis.unit = 'default';\t// default|row\n\n\t\tthis.assertFactory = () => ({\n\t\t\tequals: (x, y) => x === y,\n\t\t\tlessThan: (x, y) => x < y,\n\t\t\tisNull: x => x === '' || x === null || x === undefined\n\t\t});\n\n\t\tthis.operatorFactory = (column) => {\n\t\t\tswitch (column.type) {\n\t\t\t\tcase 'text':\n\t\t\t\tcase 'url':\n\t\t\t\tcase 'email':\n\t\t\t\tcase 'file': {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t'contains',\n\t\t\t\t\t\t'like',\n\t\t\t\t\t\t'notLike',\n\t\t\t\t\t\t'startsWith',\n\t\t\t\t\t\t'endsWith',\n\t\t\t\t\t\t'isEmpty',\n\t\t\t\t\t\t'isNotEmpty',\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\tcase 'date':\n\t\t\t\tcase 'datetime': {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t'between',\n\t\t\t\t\t\t'contains',\n\t\t\t\t\t\t'lessThan',\n\t\t\t\t\t\t'lessThanOrEquals',\n\t\t\t\t\t\t'greaterThan',\n\t\t\t\t\t\t'greaterThanOrEquals',\n\t\t\t\t\t\t'isEmpty',\n\t\t\t\t\t\t'isNotEmpty',\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\tcase 'id':\n\t\t\t\tcase 'currency':\n\t\t\t\tcase 'number': {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t'between',\n\t\t\t\t\t\t'contains',\n\t\t\t\t\t\t'like',\n\t\t\t\t\t\t'lessThan',\n\t\t\t\t\t\t'lessThanOrEquals',\n\t\t\t\t\t\t'greaterThan',\n\t\t\t\t\t\t'greaterThanOrEquals',\n\t\t\t\t\t\t'isEmpty',\n\t\t\t\t\t\t'isNotEmpty',\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\treturn ['contains'];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}","import * as columnService from '../column/column.service';\nimport { buildExpression } from '../expression/expression.build';\nimport { PredicateVisitor } from '../expression/predicate.visitor';\nimport { getValue } from '../services/value';\nimport { yes } from '../utility/kit';\n\nexport function match(context) {\n\tconst { model } = context;\n\n\tconst expression = buildExpression(model.filter().by);\n\tif (expression !== null) {\n\t\tconst { labelFactory } = context;\n\t\tconst { assertFactory } = model.filter();\n\n\t\tconst columnMap = columnService.mapColumns(model.columnList().line);\n\n\t\tconst valueColumnFactory = (key) => {\n\t\t\tconst column = columnMap[key];\n\t\t\tif (column.type === 'array') {\n\t\t\t\treturn (row) => getValue(row, column);\n\t\t\t}\n\n\t\t\treturn labelFactory(columnMap[key]);\n\t\t};\n\n\t\tconst assertColumnFactory = key => assertFactory(columnMap[key]);\n\t\tconst getType = key => {\n\t\t\tconst column = columnMap[key];\n\t\t\treturn (column && column.type) || 'text';\n\t\t};\n\n\t\tconst visitor =\n\t\t\tnew PredicateVisitor(\n\t\t\t\tvalueColumnFactory,\n\t\t\t\tassertColumnFactory,\n\t\t\t\tgetType\n\t\t\t);\n\n\t\treturn visitor.visit(expression);\n\t}\n\n\treturn yes;\n}","import { isUndefined } from '../utility/kit';\nimport { takeOnce, filter } from '../rx/rx.operators';\n\nexport class FocusService {\n    constructor(model) {\n        this.model = model;\n    }\n\n    activate(rowIndex, columnIndex) {\n        const { focus, scene, sceneChanged } = this.model;\n\n        if (isUndefined(rowIndex)) {\n            rowIndex = focus().rowIndex;\n        }\n\n        if (rowIndex < 0) {\n            rowIndex = 0;\n        }\n\n        if (isUndefined(columnIndex)) {\n            columnIndex = focus().columnIndex;\n        }\n\n        if (columnIndex < 0) {\n            columnIndex = scene().column.line.findIndex(c => c.model.canFocus);\n        }\n\n        if (scene().status === 'stop') {\n            this.focus(rowIndex, columnIndex);\n        } else {\n            sceneChanged.on((e, off) => {\n                if (e.hasChanges('status')) {\n                    if (e.state.status === 'stop') {\n                        off();\n\n                        this.focus(rowIndex, columnIndex);\n                    }\n                }\n            });\n        }\n    }\n\n    focus(rowIndex, columnIndex) {\n        const { pagination, focus } = this.model;\n        const { count, current, size } = pagination();\n\n        const last = this.getPage(count);\n        const target = Math.max(0, Math.min(this.getPage(rowIndex), last));\n\n        if (current !== target) {\n            pagination({\n                current: target\n            }, {\n                source: 'focus.service'\n            });\n\n            this.activate(rowIndex, columnIndex);\n            return;\n        }\n\n        rowIndex = rowIndex - size * current;\n\n        focus({\n            isActive: true,\n            rowIndex,\n            columnIndex\n        }, {\n            source: 'focus.service'\n        });\n    }\n\n    getPage(index) {\n        const { model } = this;\n        const { size } = model.pagination();\n\n        return Math.max(0, Math.floor(index / size));\n    }\n}\n\nexport class FocusAfterRenderService {\n    constructor(plugin) {\n        const { table, model, observe } = plugin;\n\n        observe(model.sceneChanged)\n            .pipe(\n                filter(e => e.hasChanges('status') && e.state.status === 'stop'),\n                takeOnce()\n            )\n            .subscribe(e => {\n                table.view.focus();\n            });\n    }\n}","export class FocusState {\n\tconstructor() {\n\t\tthis.isActive = false;\n\n\t\tthis.rowIndex = -1;\n\t\tthis.columnIndex = -1;\n\t}\n}","import { GridError } from '../infrastructure/error';\nimport { Log } from '../infrastructure/log';\nimport { Aggregation } from '../services/aggregation';\nimport { getValueFactory } from '../services/value';\n\nexport class FootLet {\n\tconstructor(plugin) {\n\t\tconst { model, observeReply } = plugin;\n\n\t\tthis.plugin = plugin;\n\t\tthis.valueFactory = getValueFactory;\n\t\tthis.rows = [];\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('column')) {\n\t\t\t\t\tthis.invalidate();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tinvalidate() {\n\t\tLog.info('view.foot', 'invalidate');\n\n\t\tthis.rows = new Array(this.count);\n\t}\n\n\tcolumns(row, pin) {\n\t\tconst { model } = this.plugin;\n\t\treturn model.scene().column.area[pin] || [];\n\t}\n\n\tget count() {\n\t\tconst { model } = this.plugin;\n\t\tconst { columns } = model.view();\n\t\tconst resourceCount = model.foot().resource.count;\n\n\t\tfor (let i = 0, length = columns.length; i < length; i++) {\n\t\t\tif (columns[i].aggregation) {\n\t\t\t\treturn Math.max(resourceCount, 1);\n\t\t\t}\n\t\t}\n\n\t\treturn resourceCount;\n\t}\n\n\tvalue(column) {\n\t\tif (column.aggregation) {\n\t\t\tconst aggregation = column.aggregation;\n\t\t\tconst aggregationOptions = column.aggregationOptions;\n\n\t\t\tif (!Aggregation.hasOwnProperty(aggregation)) {\n\t\t\t\tthrow new GridError(\n\t\t\t\t\t'foot',\n\t\t\t\t\t`Aggregation ${aggregation} is not registered`);\n\t\t\t}\n\n\t\t\tconst { model } = this.plugin;\n\t\t\tconst { rows } = model.data();\n\t\t\t\n\t\t\tconst getValue = this.valueFactory(column);\n\t\t\treturn Aggregation[aggregation](rows, getValue, aggregationOptions);\n\t\t}\n\n\t\treturn null;\n\t}\n}","import { EnumerableResource } from '../resource/resource.enumerable';\nimport { Cache } from '../infrastructure/cache';\n\nexport class FootState {\n\tconstructor() {\n\t\tthis.resource = new EnumerableResource();\n\t\tthis.cache = new Cache();\n\t}\n}","export class FormatService {\n    static number(x, format) {\n        return x;\n    }\n\n    static date(x, format) {\n        return x;\n    }\n\n    static currency(x, format) {\n        return x;\n    }\n}","\nimport { GridError } from '../infrastructure/error';\nimport { Keyboard } from '../keyboard/keyboard';\nimport { same, uniq } from '../utility/kit';\n\nexport class GridHost {\n\tconstructor(host, plugin) {\n\t\tconst { model, disposable, observe } = plugin;\n\t\tconst { grid } = model;\n\n\t\tthis.plugin = plugin;\n\n\t\tif (grid().status === 'bound') {\n\t\t\tthrow new GridError('grid.host', `Model is already used by grid \"${grid().id}\"`);\n\t\t}\n\n\t\tif (!host.id) {\n\t\t\thost.id = model.grid().id;\n\t\t}\n\n\t\tgrid({ status: 'bound' }, { source: 'grid.host' });\n\n\t\tthis.invalidateVisibility();\n\t\tobserve(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('column')) {\n\t\t\t\t\tthis.invalidateVisibility();\n\t\t\t\t}\n\t\t\t});\n\n\t\tdisposable.add(() => model.grid({ status: 'unbound' }, { source: 'grid.host' }));\n\t}\n\n\tkeyUp(e) {\n\t\tconst { model } = this.plugin;\n\t\tconst { codes } = model.keyboard();\n\t\tconst code = Keyboard.translate(e.keyCode);\n\t\tconst index = codes.indexOf(code);\n\t\tif (index >= 0) {\n\t\t\tconst newCodes = Array.from(codes);\n\t\t\tnewCodes.splice(index, 1)\n\t\t\tmodel.keyboard({\n\t\t\t\tcode,\n\t\t\t\tcodes: newCodes,\n\t\t\t\tstatus: 'up'\n\t\t\t}, {\n\t\t\t\tsource: 'key.up'\n\t\t\t});\n\t\t}\n\n\t\tmodel.keyboard({\n\t\t\tcode: null,\n\t\t\tstatus: 'release'\n\t\t}, {\n\t\t\tsource: 'key.up'\n\t\t});\n\t}\n\n\tkeyDown(e, source = 'grid') {\n\t\tconst { model } = this.plugin;\n\t\tconst { shortcut } = model.action();\n\n\t\tconst code = Keyboard.translate(e.keyCode);\n\t\tconst result = shortcut.keyDown(e, source);\n\t\tif (result.length > 0) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t} else {\n\t\t\tif (e.target.tagName === 'TBODY') {\n\t\t\t\tconst { prevent } = model.navigation();\n\t\t\t\tif (prevent.has(code)) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tmodel.keyboard({\n\t\t\tcode,\n\t\t\tcodes: uniq(model.keyboard().codes.concat(code)),\n\t\t\tstatus: 'down'\n\t\t}, {\n\t\t\tsource: 'key.down'\n\t\t});\n\n\t\treturn result;\n\t}\n\n\tinvalidateVisibility() {\n\t\tconst { model } = this.plugin;\n\t\tconst { left, right } = model.scene().column.area;\n\t\tconst { pinTop, pinBottom } = model.row();\n\n\t\tconst { pin: oldPin } = model.visibility();\n\t\tconst newPin = {\n\t\t\tleft: left.length > 0,\n\t\t\tright: right.length > 0,\n\t\t\ttop: pinTop.length > 0,\n\t\t\tbottom: pinBottom.length > 0\n\t\t};\n\n\t\tif (!same(oldPin, newPin)) {\n\t\t\tmodel.visibility({\n\t\t\t\tpin: newPin\n\t\t\t}, {\n\t\t\t\tsource: 'grid.host'\n\t\t\t});\n\t\t}\n\t}\n\n\tinvalidateActive() {\n\t\tconst { model, table, service } = this.plugin;\n\t\tif (table.view.isFocused()) {\n\t\t\tconst needFocusCell =\n\t\t\t\t!model.mouse().target\n\t\t\t\t&& (model.focus().rowIndex < 0 || model.focus().columnIndex < 0);\n\t\t\tif (needFocusCell) {\n\t\t\t\tservice.focus(\n\t\t\t\t\tmodel.pagination().size * model.pagination().current\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tmodel.focus({\n\t\t\t\t\tisActive: true\n\t\t\t\t}, {\n\t\t\t\t\tsource: 'grid.host'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tmodel.focus({ isActive: false }, { source: 'grid.host' });\n\t\t}\n\t}\n}\n","import { FocusService } from '../focus/focus.service';\nimport { Defer } from '../infrastructure/defer';\nimport { Log } from '../infrastructure/log';\nimport { buildFromModel } from '../pipe/pipe.build';\nimport { Fastdom } from '../services/fastdom';\nimport { guid } from '../services/guid';\nimport { Scheduler } from '../services/scheduler';\nimport { isString, noop } from '../utility/kit';\n\nfunction buildSettings(...args) {\n\tif (args.length) {\n\t\tif (isString(args[0])) {\n\t\t\treturn {\n\t\t\t\tsource: args[0],\n\t\t\t\tchanges: args[1] || {},\n\t\t\t\tpipe: args[2],\n\t\t\t\twhy: 'refresh'\n\t\t\t};\n\t\t}\n\n\t\treturn Object.assign({\n\t\t\tsource: 'invalidate',\n\t\t\tchanges: {},\n\t\t\tpipe: null,\n\t\t\twhy: 'refresh'\n\t\t}, args[0])\n\t}\n\n\treturn {\n\t\tsource: 'invalidate',\n\t\tchanges: {},\n\t\tpipe: null,\n\t\twhy: 'refresh'\n\t};\n}\n\nexport class GridService {\n\tconstructor(model) {\n\t\tthis.model = model;\n\t\tthis.scheduler = new Scheduler();\n\t}\n\n\tinvalidate(...args /*source = 'invalidate', changes = {}, pipe = null*/) {\n\t\tconst { source, changes, pipe, why } = buildSettings(...args);\n\t\tconst { scheduler, model } = this;\n\t\tconst { scene } = model;\n\n\t\tconst runPipe = buildFromModel(model);\n\t\tconst cancelBusy = why === 'refresh' ? this.busy() : noop;\n\n\t\tconst nextTask = () => {\n\t\t\tcancelBusy();\n\n\t\t\tif (!scheduler.next()) {\n\t\t\t\tscene({ status: 'pull' }, {\n\t\t\t\t\tsource,\n\t\t\t\t\tbehavior: 'core'\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tconst defer = new Defer();\n\t\tconst task = () => {\n\t\t\tLog.info('grid', `start task ${source}`);\n\t\t\tscene({ status: 'start' }, {\n\t\t\t\tsource,\n\t\t\t\tbehavior: 'core'\n\t\t\t});\n\n\t\t\tmodel.head().cache.clear();\n\t\t\tmodel.body().cache.clear();\n\t\t\tmodel.foot().cache.clear();\n\n\t\t\treturn Fastdom.invoke(() => runPipe(source, changes, pipe || model.data().pipe))\n\t\t\t\t.then(() => {\n\t\t\t\t\tLog.info('grid', `finish task ${source}`);\n\n\t\t\t\t\tnextTask();\n\t\t\t\t\tdefer.resolve();\n\t\t\t\t})\n\t\t\t\t.catch(ex => {\n\t\t\t\t\tLog.error('grid', ex);\n\n\t\t\t\t\tnextTask();\n\t\t\t\t\tdefer.reject();\n\t\t\t\t});\n\t\t};\n\n\t\tLog.info('grid', `add task ${source}`);\n\t\tscheduler.add(task);\n\n\t\treturn defer.promise;\n\t}\n\n\tbusy() {\n\t\tconst id = guid();\n\t\tconst { progress } = this.model;\n\t\tconst queue = progress().queue.concat([id]);\n\t\tprogress({ queue });\n\n\t\treturn () => {\n\t\t\tconst queue = Array.from(progress().queue);\n\t\t\tconst index = queue.indexOf(id);\n\t\t\tif (index >= 0) {\n\t\t\t\tqueue.splice(index, 1);\n\t\t\t\tprogress({ queue });\n\t\t\t}\n\t\t};\n\t}\n\n\tfocus(rowIndex, columnIndex) {\n\t\tconst focus = new FocusService(this.model);\n\t\tfocus.activate(rowIndex, columnIndex);\n\t}\n}\n","import { guid } from '../services/guid';\nimport { GRID_PREFIX } from '../definition';\n\nexport class GridState {\n\tconstructor() {\n\t\tthis.id = `${GRID_PREFIX}-${guid()}`;\n\t\tthis.status = 'unbound'; //unbound | bound\n\t\tthis.caption = '';\n\t\tthis.interactionMode = 'full' | 'readonly' | 'detached';\n\n\t\t// @deprecated\n\t\tthis.title = '';\n\t}\n}","import { mapColumns } from '../column/column.service';\nimport { GridError } from '../infrastructure/error';\nimport { Aggregation } from '../services/aggregation';\n\nexport function groupBuilder(model) {\n\tconst { rows } = model.data();\n\tconst { pivot } = model.view();\n\tconst nodes = model.scene().rows;\n\tconst columns = model.columnList().line;\n\n\tconst pivotRows = pivot.rows;\n\tconst pivotRowLength = pivotRows[0].length;\n\n\tconst groupBy = model.group().by;\n\tconst groupByLength = groupBy.length;\n\n\tconst columnMap = mapColumns(columns);\n\n\treturn valueFactory => {\n\t\tconst result = [];\n\t\tfor (let i = 0, nodeLength = nodes.length; i < nodeLength; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tconst key = groupBy[Math.min(node.level, groupByLength - 1)];\n\t\t\tconst column = columnMap[key];\n\t\t\tif (!column) {\n\t\t\t\tthrow new GridError(\n\t\t\t\t\t'group.build',\n\t\t\t\t\t`Invalid key \"${key}\"`);\n\t\t\t}\n\n\t\t\tconst aggregation = column.aggregation || 'count';\n\t\t\tif (!Aggregation.hasOwnProperty(aggregation)) {\n\t\t\t\tthrow new GridError(\n\t\t\t\t\t'group.build',\n\t\t\t\t\t`Aggregation ${aggregation} is not registered`);\n\t\t\t}\n\n\t\t\tconst getValue = valueFactory(column);\n\t\t\tconst aggregate = Aggregation[aggregation];\n\n\t\t\tconst aggRow = new Array(pivotRowLength);\n\t\t\tfor (let j = 0, rowLength = node.rows.length; j < rowLength; j++) {\n\t\t\t\tconst rowIndex = node.rows[j];\n\t\t\t\tconst pivotRow = pivotRows[rowIndex];\n\t\t\t\tconst row = rows[rowIndex];\n\t\t\t\tfor (let k = 0; k < pivotRowLength; k++) {\n\t\t\t\t\tif (pivotRow[k]) {\n\t\t\t\t\t\tlet value = aggRow[k];\n\t\t\t\t\t\tif (!value) {\n\t\t\t\t\t\t\tvalue = [];\n\t\t\t\t\t\t\taggRow[k] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalue.push(row);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult.push(aggRow.map(rs => aggregate(rs, getValue, column.aggregationOptions)));\n\t\t}\n\n\t\treturn result;\n\t};\n}","import { columnFactory } from '../column/column.factory';\nimport { Command } from '../command/command';\nimport { selectColumn, selectRow } from '../navigation/navigation.state.selector';\nimport { preOrderDFS } from '../node/node.service';\nimport { PipeUnit } from '../pipe/pipe.unit';\nimport { getLabelFactory } from '../services/label';\nimport { getValueFactory } from '../services/value';\nimport { identity, yes } from '../utility/kit';\n\nfunction rowspanGetNode(node, column) {\n\tif (node.source === column.by) {\n\t\treturn node;\n\t}\n\tif (node.children.length) {\n\t\treturn node.children[0];\n\t}\n\treturn node;\n}\n\nfunction flatVisible(node, column) {\n\treturn column.type !== 'group' || node.source === column.by;\n}\n\nfunction rowspanIsVisible(node, column, parent) {\n\tif (node.source === column.by) {\n\t\treturn !parent || parent.state.expand;\n\t}\n\n\tif (node.children.length) {\n\t\treturn rowspanIsVisible(node.children[0], column, node);\n\t}\n\n\treturn false;\n}\n\nexport class GroupLet {\n\tconstructor(plugin, shortcut) {\n\t\tconst { model, observeReply, disposable, service } = plugin;\n\n\t\tthis.plugin = plugin;\n\t\tthis.valueFactory = getValueFactory;\n\n\t\tconst toggleStatus = new Command({\n\t\t\tsource: 'group.view',\n\t\t\texecute: args => {\n\t\t\t\tlet row = selectRow(model.navigation());\n\t\t\t\tlet column = selectColumn(model.navigation());\n\n\t\t\t\tif (args) {\n\t\t\t\t\trow = args[0] || row;\n\t\t\t\t\tcolumn = args[1] || column;\n\t\t\t\t}\n\n\t\t\t\tconst node = this.getNode(row, column);\n\t\t\t\tconst { toggle } = model.group();\n\t\t\t\tif (toggle.execute(node) !== false) {\n\t\t\t\t\tnode.state.expand = !node.state.expand;\n\t\t\t\t\tservice.invalidate({\n\t\t\t\t\t\tsource: 'group.view',\n\t\t\t\t\t\tpipe: PipeUnit.group,\n\t\t\t\t\t\twhy: PipeUnit.group.why\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tcanExecute: args => {\n\t\t\t\tlet row = selectRow(model.navigation());\n\t\t\t\tlet column = selectColumn(model.navigation());\n\n\t\t\t\tif (args) {\n\t\t\t\t\trow = args[0] || row;\n\t\t\t\t\tcolumn = args[1] || column;\n\t\t\t\t}\n\n\t\t\t\tconst node = this.getNode(row, column);\n\t\t\t\tconst { toggle } = model.group();\n\t\t\t\treturn node && node.type === 'group' && toggle.canExecute(node);\n\t\t\t},\n\t\t\tshortcut: model.group().shortcut.toggle\n\t\t});\n\n\t\tlet shouldExpand = true;\n\n\t\tconst toggleAllStatus = new Command({\n\t\t\tsource: 'group.view',\n\t\t\texecute: () => {\n\t\t\t\tif (model.group().toggleAll.execute() !== false) {\n\t\t\t\t\tconst { nodes } = model.view();\n\t\t\t\t\tconst { toggle } = model.group();\n\n\t\t\t\t\tpreOrderDFS(nodes, node => {\n\t\t\t\t\t\tif (toggleStatus.canExecute([node])) {\n\t\t\t\t\t\t\tif (toggle.execute(node) !== false) {\n\t\t\t\t\t\t\t\tnode.state.expand = shouldExpand;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tshouldExpand = !shouldExpand;\n\t\t\t\t\tservice.invalidate({\n\t\t\t\t\t\tsource: 'group.view',\n\t\t\t\t\t\tpipe: PipeUnit.group,\n\t\t\t\t\t\twhy: PipeUnit.group.why\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tcanExecute: () => model.group().toggleAll.canExecute()\n\t\t});\n\n\t\tthis.toggleStatus = toggleStatus;\n\t\tthis.toggleAllStatus = toggleAllStatus;\n\n\t\tshortcut.register([toggleStatus, toggleAllStatus]);\n\n\t\tconst createColumn = columnFactory(model);\n\t\tthis.reference = {\n\t\t\tgroup: createColumn('group')\n\t\t};\n\n\t\tthis.getNode = identity;\n\t\tthis.isVisible = yes;\n\n\t\tobserveReply(model.groupChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('mode')) {\n\t\t\t\t\tswitch (e.state.mode) {\n\t\t\t\t\t\tcase 'rowspan': {\n\t\t\t\t\t\t\tthis.getNode = rowspanGetNode;\n\t\t\t\t\t\t\tthis.isVisible = rowspanIsVisible;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'flat':\n\t\t\t\t\t\t\tthis.getNode = identity;\n\t\t\t\t\t\t\tthis.isVisible = flatVisible;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\tthis.getNode = identity;\n\t\t\t\t\t\t\tthis.isVisible = yes;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tlet canExecuteCheckSub;\n\t\tconst unsubscribeCanExecuteCheck = () => {\n\t\t\tif (canExecuteCheckSub) {\n\t\t\t\tcanExecuteCheckSub.unsubscribe();\n\t\t\t\tcanExecuteCheckSub = null;\n\t\t\t}\n\t\t};\n\n\t\tdisposable.add(\n\t\t\tunsubscribeCanExecuteCheck\n\t\t);\n\n\t\tobserveReply(model.rowChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('toggle')) {\n\t\t\t\t\tconst { toggle } = e.state;\n\t\t\t\t\tunsubscribeCanExecuteCheck();\n\t\t\t\t\tcanExecuteCheckSub = toggle.canExecuteCheck\n\t\t\t\t\t\t.subscribe(() => {\n\t\t\t\t\t\t\tthis.toggleStatus.canExecuteCheck.next();\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tcount(node, column) {\n\t\tnode = this.getNode(node, column);\n\t\treturn node.children.length || node.rows.length;\n\t}\n\n\tstatus(node, column) {\n\t\tnode = this.getNode(node, column);\n\t\treturn node.state.expand ? 'expand' : 'collapse';\n\t}\n\n\toffset(node, column) {\n\t\tconst { model } = this.plugin;\n\n\t\tnode = this.getNode(node, column);\n\t\tconst { mode } = model.group();\n\t\tswitch (mode) {\n\t\t\tcase 'nest':\n\t\t\tcase 'subhead': {\n\t\t\t\treturn column ? column.offset * node.level : 0;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\t}\n\n\tvalue(node, column) {\n\t\tnode = this.getNode(node, column);\n\t\tif (column) {\n\t\t\tconst getLabel = getLabelFactory(column);\n\t\t\treturn getLabel(node);\n\t\t}\n\t\treturn null;\n\t}\n}","import { Node } from '../node/node';\nimport { noop } from '../utility/kit';\n\nexport function flattenFactory(model) {\n\tconst { mode, summary } = model.group();\n\n\tlet push = (node, pos, result) => result.push(node);\n\tswitch (mode) {\n\t\tcase 'rowspan': {\n\t\t\tpush = (node, pos, result) => {\n\t\t\t\tif (node.level === 0 || pos > 0) {\n\t\t\t\t\tresult.push(node);\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tlet pushSummary = noop;\n\tswitch (summary) {\n\t\tcase 'leaf': {\n\t\t\tpushSummary = (node, pos, result, parent, posInParent) => {\n\t\t\t\tif (parent && parent.children.length - 1 === posInParent) {\n\t\t\t\t\tconst { level, key } = node;\n\t\t\t\t\tconst summary = new Node(`${key}-group-summary`, level, 'summary');\n\t\t\t\t\tsummary.rows = Array.from(node.rows);\n\t\t\t\t\tresult.push(summary);\n\t\t\t\t}\n\t\t\t};\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn function flatView(nodes, result = [], parent = null, pos = 0) {\n\t\tfor (let i = 0, iLength = nodes.length; i < iLength; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tpush(node, i, result, parent, pos);\n\n\t\t\tif (node.state.expand) {\n\t\t\t\tconst children = node.children;\n\t\t\t\tif (children.length) {\n\t\t\t\t\tflatView(children, result, node, i);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst { rows, level, key } = node;\n\t\t\t\t\tconst nextLevel = level + 1;\n\t\t\t\t\tfor (let j = 0, jLength = rows.length; j < jLength; j++) {\n\t\t\t\t\t\tconst child = new Node(key, nextLevel, 'row');\n\t\t\t\t\t\tconst row = rows[j];\n\t\t\t\t\t\tchild.rows = [row];\n\n\t\t\t\t\t\tchildren.push(child);\n\t\t\t\t\t\tpush(child, j, result, parent, pos);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tpushSummary(node, i, result, parent, pos);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n}\n\nexport function findFirstLeaf(node) {\n\tif (node.type !== 'group') {\n\t\treturn node;\n\t}\n\n\tif (!node.state.expand) {\n\t\treturn null;\n\t}\n\n\treturn node.children.length && findFirstLeaf(node.children[0]);\n}\n\n","import { Resource } from '../resource/resource';\nimport { Command } from '../command/command';\nimport { flattenFactory } from './group.service';\n\nexport class GroupState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\n\t\tthis.mode = 'nest'; // nest | flat | subhead | rowspan\n\t\tthis.summary = null; // null | leaf\n\t\tthis.by = [];\n\n\t\tthis.toggle = new Command({ source: 'group.state' });\n\t\tthis.toggleAll = new Command({ source: 'group.state' });\n\n\t\tthis.flattenFactory = flattenFactory;\n\n\t\tthis.shortcut = {\n\t\t\ttoggle: 'space|enter'\n\t\t};\n\t}\n}","import { PathService } from '../path/path.service';\nimport { eventPath } from '../services/dom';\n\nexport class HeadHost {\n\tconstructor(plugin) {\n\t\tconst { model, table, observeReply } = plugin;\n\n\t\tthis.plugin = plugin;\n\t\tthis.column = null;\n\n\t\tobserveReply(model.dragChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('isActive')) {\n\t\t\t\t\tif(e.state.isActive) {\n\t\t\t\t\t\tthis.column = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tmouseMove(e) {\n\t\tconst { table } = this.plugin;\n\n\t\tconst pathFinder = new PathService(table.box.bag.head);\n\t\tconst cell = pathFinder.cell(eventPath(e));\n\t\tif (cell) {\n\t\t\tthis.highlight(cell.column);\n\t\t}\n\t}\n\n\tmouseLeave() {\n\t\tthis.highlight(null);\n\t}\n\n\thighlight(column) {\n\t\tconst { view } = this.plugin;\n\n\t\tconst { highlight } = view;\n\t\tif (!highlight.column.canExecute(column)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.column !== column) {\n\t\t\tif (this.column) {\n\t\t\t\thighlight.column.execute(this.column, false);\n\t\t\t}\n\n\t\t\tif (column) {\n\t\t\t\thighlight.column.execute(column, true);\n\t\t\t}\n\n\t\t\tthis.column = column;\n\t\t}\n\t}\n}","import { FilterRowColumn } from '../column-type/filter.row.column';\nimport * as columnService from '../column/column.service';\nimport { Command } from '../command/command';\nimport { GRID_PREFIX } from '../definition';\nimport { Log } from '../infrastructure/log';\nimport { calk, findLeaves, findNode, preOrderDFS } from '../node/node.service';\nimport { PathService } from '../path/path.service';\nimport { eventPath } from '../services/dom';\n\nexport class HeadLet {\n\tconstructor(plugin, tagName) {\n\t\tconst { model, table, observeReply } = plugin;\n\n\t\tthis.plugin = plugin;\n\t\tthis.tagName = tagName;\n\t\tthis.rows = [];\n\n\t\tconst pathFinder = new PathService(table.box.bag.head);\n\n\t\tthis.drop = new Command({\n\t\t\tsource: 'head.view',\n\t\t\tcanExecute: e => {\n\t\t\t\tif (e.action === 'end') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tconst cell = pathFinder.cell(eventPath(e));\n\t\t\t\treturn cell && cell.column.canMove;\n\t\t\t},\n\t\t\texecute: e => {\n\t\t\t\tconst sourceKey = e.dragData;\n\t\t\t\tswitch (e.action) {\n\t\t\t\t\tcase 'over': {\n\t\t\t\t\t\tconst th = pathFinder.cell(eventPath(e));\n\t\t\t\t\t\tif (!e.inAreaX(th.element)) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst targetKey = th.column.key;\n\t\t\t\t\t\tif (sourceKey !== targetKey) {\n\t\t\t\t\t\t\tconst { columnList } = model;\n\n\t\t\t\t\t\t\tconst tree = calk(columnList().index);\n\t\t\t\t\t\t\tconst oldPos = findNode(tree, node => node.key.model.key === sourceKey);\n\t\t\t\t\t\t\tconst newPos = findNode(tree, node => node.key.model.key === targetKey);\n              \n\t\t\t\t\t\t\tif (oldPos && newPos && newPos.path.indexOf(oldPos.node) < 0) {\n\t\t\t\t\t\t\t\tconst queue = oldPos.path.reverse();\n\t\t\t\t\t\t\t\tconst hostIndex = queue.findIndex(node => node.children.length > 1);\n\t\t\t\t\t\t\t\tif (hostIndex >= 0) {\n\t\t\t\t\t\t\t\t\tconst host = queue[hostIndex];\n\t\t\t\t\t\t\t\t\tconst target = queue[hostIndex - 1] || oldPos.node;\n\t\t\t\t\t\t\t\t\tconst index = host.children.indexOf(target);\n\n\t\t\t\t\t\t\t\t\thost.children.splice(index, 1);\n\t\t\t\t\t\t\t\t\tnewPos.parent.children.splice(newPos.index, 0, target);\n\n\t\t\t\t\t\t\t\t\ttarget.level = newPos.parent.level + 1;\n                  \n\t\t\t\t\t\t\t\t\tpreOrderDFS(\n\t\t\t\t\t\t\t\t\t\ttarget.children,\n\t\t\t\t\t\t\t\t\t\t(node, root, parent) => {\n\t\t\t\t\t\t\t\t\t\t\tnode.level = (root || parent).level + 1;\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ttarget\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\tcolumnList({ index: tree }, { source: 'head.view' });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'end':\n\t\t\t\t\tcase 'drop': {\n\t\t\t\t\t\tconst { index } = model.columnList();\n\t\t\t\t\t\tconst oldPos = findNode(index, node => node.key.model.key === sourceKey);\n\t\t\t\t\t\tif (oldPos) {\n\t\t\t\t\t\t\tfor (let leaf of findLeaves(oldPos.node)) {\n\t\t\t\t\t\t\t\tconst oldColumn = table.body.column(leaf.key.columnIndex);\n\t\t\t\t\t\t\t\toldColumn.removeClass(`${GRID_PREFIX}-drag`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.drag = new Command({\n\t\t\tsource: 'head.view',\n\t\t\tcanExecute: e => {\n\t\t\t\tconst sourceKey = e.data;\n\t\t\t\tconst { index } = model.columnList();\n\t\t\t\tconst pos = findNode(index, node => node.key.model.key === sourceKey);\n\t\t\t\treturn pos && pos.node.key.model.canMove;\n\t\t\t},\n\t\t\texecute: e => {\n\t\t\t\tconst sourceKey = e.data;\n\t\t\t\tconst { index } = model.columnList();\n\t\t\t\tconst pos = findNode(index, node => node.key.model.key === sourceKey);\n\t\t\t\tif (pos) {\n\t\t\t\t\tfor (let leaf of findLeaves(pos.node)) {\n\t\t\t\t\t\tconst column = table.body.column(leaf.key.columnIndex);\n\t\t\t\t\t\tcolumn.addClass(`${GRID_PREFIX}-drag`);\n\t\t\t\t\t\treturn () => table.head.cell;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\tthis.resize = new Command({\n\t\t\tsource: 'head.view',\n\t\t\tcanExecute: e => {\n\t\t\t\tconst key = e.data;\n\t\t\t\tconst map = table.data.columnMap();\n\t\t\t\treturn map.hasOwnProperty(key) && map[key].canResize !== false;\n\t\t\t}\n\t\t});\n\n\t\tobserveReply(model.dataChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('columns')) {\n\t\t\t\t\tconst line = columnService.flattenColumns(e.state.columns);\n\t\t\t\t\tmodel.columnList({ line }, { source: 'head.view' });\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('column')) {\n\t\t\t\t\tthis.invalidate();\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.filterChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('unit')) {\n\t\t\t\t\tthis.invalidate();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tcolumns(row, pin) {\n\t\treturn row.filter(c => c.model.pin === pin);\n\t}\n\n\tinvalidate() {\n\t\tLog.info('view.head', 'invalidate');\n\n\t\tconst { model, table } = this.plugin;\n\t\tthis.rows = Array.from(model.scene().column.rows);\n\n\t\tif (this.rows.length > 1) {\n\t\t\ttable.view.addClass(`${GRID_PREFIX}-head-span`);\n\t\t} else {\n\t\t\ttable.view.removeClass(`${GRID_PREFIX}-head-span`);\n\t\t}\n\n\t\tif (model.filter().unit === 'row') {\n\t\t\tconst filterRow = table.data.columns().map(c => new FilterRowColumn(c));\n\t\t\tthis.rows.push(filterRow);\n\t\t}\n\t}\n}\n","import { Resource } from '../resource/resource';\nimport { Cache } from '../infrastructure/cache';\n\nexport class HeadState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.cache = new Cache();\n\t}\n}","import { CellSelector } from '../cell/cell.selector';\nimport { Command } from '../command/command';\nimport { GRID_PREFIX } from '../definition';\nimport { findLeaves, findNode } from '../node/node.service';\nimport { SelectionService } from '../selection/selection.service';\nimport { Fastdom } from '../services/fastdom';\nimport * as sortService from '../sort/sort.service';\nimport { noop } from '../utility/kit';\n\nexport class HighlightLet {\n\tconstructor(plugin) {\n\t\tconst { model, table, observeReply, observe } = plugin;\n\t\tthis.plugin = plugin;\n\n\t\tthis.cellSelector = new CellSelector(model, table);\n\t\tthis.selectionService = new SelectionService(model);\n\n\t\tlet sortBlurs = [];\n\t\tlet columnHoverBlurs = [];\n\t\tlet columnFilterBlurs = [];\n\t\tlet rowHoverBlurs = [];\n\t\tlet selectionBlurs = [];\n\t\tlet cellHoverBlurs = [];\n\n\t\tthis.column = new Command({\n\t\t\tsource: 'highlight.view',\n\t\t\tcanExecute: () => !this.isRendering,\n\t\t\texecute: (column, state) => {\n\t\t\t\tconst columns = Array.from(model.highlight().columns);\n\t\t\t\tconst index = columns.indexOf(column.key);\n\t\t\t\tlet hasChanges = false;\n\t\t\t\tif (state) {\n\t\t\t\t\tif (index < 0) {\n\t\t\t\t\t\tcolumns.push(column.key);\n\t\t\t\t\t\thasChanges = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\tcolumns.splice(index, 1);\n\t\t\t\t\t\thasChanges = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (hasChanges) {\n\t\t\t\t\tmodel.highlight({ columns }, {\n\t\t\t\t\t\tsource: 'highlight.view',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.row = new Command({\n\t\t\tsource: 'highlight.view',\n\t\t\tcanExecute: () => !this.isRendering,\n\t\t\texecute: (row, state) => {\n\t\t\t\tconst rows = Array.from(model.highlight().rows);\n\t\t\t\tconst index = rows.indexOf(row);\n\t\t\t\tlet hasChanges = false;\n\t\t\t\tif (state) {\n\t\t\t\t\tif (index < 0) {\n\t\t\t\t\t\trows.push(row);\n\t\t\t\t\t\thasChanges = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\trows.splice(index, 1);\n\t\t\t\t\t\thasChanges = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (hasChanges) {\n\t\t\t\t\tmodel.highlight({ rows }, {\n\t\t\t\t\t\tsource: 'highlight.view'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.cell = new Command({\n\t\t\tsource: 'highlight.view',\n\t\t\tcanExecute: () => !this.isRendering,\n\t\t\texecute: (newCell, state) => {\n\t\t\t\tlet { cell } = model.highlight();\n\t\t\t\tlet hasChanges = true;\n\t\t\t\tif (newCell === cell) {\n\t\t\t\t\thasChanges = false;\n\t\t\t\t}\n\t\t\t\telse if (newCell && cell) {\n\t\t\t\t\thasChanges =\n\t\t\t\t\t\tnewCell.rowIndex !== cell.rowIndex\n\t\t\t\t\t\t|| newCell.columnIndex !== cell.columnIndex;\n\t\t\t\t}\n\n\t\t\t\tif (hasChanges) {\n\t\t\t\t\tmodel.highlight({ cell: newCell }, {\n\t\t\t\t\t\tsource: 'highlight.view'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.clear = new Command({\n\t\t\texecute: () => {\n\t\t\t\tconst { rows, cell } = model.highlight();\n\n\t\t\t\trows.forEach(rowIndex => this.row.execute(rowIndex, false));\n\n\t\t\t\tif (cell) {\n\t\t\t\t\tthis.cell.execute(null, false);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tobserveReply(model.selectionChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('items')) {\n\t\t\t\t\tselectionBlurs = this.invalidateSelection(selectionBlurs);\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('status')) {\n\t\t\t\t\tif (e.state.status === 'stop') {\n\t\t\t\t\t\tcolumnHoverBlurs = this.invalidateColumnHover(columnHoverBlurs);\n\t\t\t\t\t\trowHoverBlurs = this.invalidateRowHover(rowHoverBlurs);\n\t\t\t\t\t\tcellHoverBlurs = this.invalidateCellHover(cellHoverBlurs);\n\t\t\t\t\t\tsortBlurs = this.invalidateSortBy(sortBlurs);\n\t\t\t\t\t\tselectionBlurs = this.invalidateSelection(selectionBlurs);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.sortChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (!this.isRendering && e.hasChanges('by')) {\n\t\t\t\t\tsortBlurs = this.invalidateSortBy(sortBlurs);\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.filterChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (!this.isRendering && e.hasChanges('by')) {\n\t\t\t\t\tcolumnFilterBlurs = this.invalidateColumnFilterBy(columnFilterBlurs);\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.highlightChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (!this.isRendering) {\n\t\t\t\t\tif (e.hasChanges('cell')) {\n\t\t\t\t\t\tcellHoverBlurs = this.invalidateCellHover(cellHoverBlurs);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e.hasChanges('columns')) {\n\t\t\t\t\t\tcolumnHoverBlurs = this.invalidateColumnHover(columnHoverBlurs);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e.hasChanges('rows')) {\n\t\t\t\t\t\trowHoverBlurs = this.invalidateRowHover(rowHoverBlurs);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserve(model.dragChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('isActive')) {\n\t\t\t\t\tif (e.state.isActive) {\n\t\t\t\t\t\tmodel.highlight({\n\t\t\t\t\t\t\tcolumns: [],\n\t\t\t\t\t\t\trows: [],\n\t\t\t\t\t\t\tcell: null\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tsource: 'highlight.view'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tcolumnHoverBlurs = this.invalidateColumnHover(columnHoverBlurs);\n\t\t\t\t\t\trowHoverBlurs = this.invalidateRowHover(rowHoverBlurs);\n\t\t\t\t\t\tcellHoverBlurs = this.invalidateCellHover(cellHoverBlurs);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tget isRendering() {\n\t\tconst { model } = this.plugin;\n\t\treturn model.scene().status !== 'stop' || model.drag().isActive;\n\t}\n\n\tinvalidateColumnHover(dispose) {\n\t\tdispose.forEach(f => f());\n\n\t\tconst { model } = this.plugin;\n\t\tconst { columns } = model.highlight();\n\n\t\treturn columns\n\t\t\t.map(columnKey => this.highlightColumn(columnKey, 'highlighted'));\n\t}\n\n\tinvalidateColumnFilterBy(dispose) {\n\t\tdispose.forEach(f => f());\n\n\t\tconst { model } = this.plugin;\n\t\tconst { by } = model.filter();\n\n\t\tdispose = [];\n\t\tconst keys = Object.keys(by);\n\t\tfor (let key of keys) {\n\t\t\tif (key === '$expression') {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tdispose.push(this.highlightColumn(key, 'filtered'));\n\t\t}\n\n\t\treturn dispose;\n\t}\n\n\tinvalidateRowHover(dispose) {\n\t\tdispose.forEach(f => f());\n\n\t\tconst { model } = this.plugin;\n\t\tconst { rows } = model.highlight();\n\n\t\treturn rows\n\t\t\t.map(row => this.highlightRow(row, 'highlighted'));\n\t}\n\n\tinvalidateCellHover(dispose) {\n\t\tdispose.forEach(f => f());\n\n\t\tconst { model, table } = this.plugin;\n\t\tconst { cell } = model.highlight();\n\n\t\tdispose = [];\n\t\tif (cell) {\n\t\t\tconst { body } = table;\n\t\t\tconst { rowIndex, columnIndex } = cell;\n\t\t\tdispose.push(this.highlightCell(body.cell(rowIndex, columnIndex), 'highlighted'));\n\t\t}\n\n\t\treturn dispose;\n\t}\n\n\tinvalidateSortBy(dispose) {\n\t\tdispose.forEach(f => f());\n\n\t\tconst { model } = this.plugin;\n\t\tconst sortBy = model.sort().by;\n\n\t\tdispose = [];\n\t\tfor (let entry of sortBy) {\n\t\t\tconst key = sortService.getKey(entry);\n\t\t\tdispose.push(this.highlightColumn(key, 'sorted'));\n\t\t}\n\n\t\treturn dispose;\n\t}\n\n\tinvalidateSelection(dispose) {\n\t\tdispose.forEach(f => f());\n\n\t\tconst { model } = this.plugin;\n\t\tconst { items } = model.selection();\n\n\t\tconst entries = this.selectionService.lookup(items);\n\t\tconst cells = this.cellSelector.map(entries);\n\n\t\treturn cells\n\t\t\t.map(cell => this.highlightCell(cell, 'selected'));\n\t}\n\n\tfindColumnPosition(key) {\n\t\tconst { model } = this.plugin;\n\t\tconst { index } = model.columnList();\n\n\t\tconst pos = findNode(index, node => node.key.model.key === key);\n\t\tif (pos) {\n\t\t\treturn findLeaves(pos.node).map(leaf => leaf.key.columnIndex);\n\t\t}\n\n\t\treturn [];\n\t}\n\n\thighlightColumn(key, cls) {\n\t\tconst { table } = this.plugin;\n\n\t\tconst position = this.findColumnPosition(key);\n\t\tif (!position.length) {\n\t\t\treturn noop;\n\t\t}\n\n\t\tconst { head, body, foot } = table;\n\t\tFastdom.mutate(() => {\n\t\t\tconst isLeaf = position.length === 1;\n\t\t\tfor (let index of position) {\n\t\t\t\tif (isLeaf) {\n\t\t\t\t\thead.column(index).addClass(`${GRID_PREFIX}-${cls}`);\n\t\t\t\t\thead.column(index - 1).addClass(`${GRID_PREFIX}-${cls}-prev`);\n\t\t\t\t\thead.column(index + 1).addClass(`${GRID_PREFIX}-${cls}-next`);\n\t\t\t\t}\n\n\t\t\t\tconst bodyColumn = body.column(index);\n\t\t\t\tconst column = bodyColumn.model();\n\t\t\t\tif (column && column.canHighlight) {\n\t\t\t\t\tbodyColumn.addClass(`${GRID_PREFIX}-${cls}`);\n\t\t\t\t\tfoot.column(index).addClass(`${GRID_PREFIX}-${cls}`);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn this.blurColumn(key, cls);\n\t}\n\n\tblurColumn(key, cls) {\n\t\tconst { table } = this.plugin;\n\n\t\tconst position = this.findColumnPosition(key);\n\t\tif (!position.length) {\n\t\t\treturn noop;\n\t\t}\n\n\t\tconst { head, body, foot } = table;\n\t\treturn () => {\n\t\t\tFastdom.mutate(() => {\n\t\t\t\tfor (let index of position) {\n\t\t\t\t\thead.column(index).removeClass(`${GRID_PREFIX}-${cls}`);\n\t\t\t\t\thead.column(index - 1).removeClass(`${GRID_PREFIX}-${cls}-prev`);\n\t\t\t\t\thead.column(index + 1).removeClass(`${GRID_PREFIX}-${cls}-next`);\n\t\t\t\t\tbody.column(index).removeClass(`${GRID_PREFIX}-${cls}`);\n\t\t\t\t\tfoot.column(index).removeClass(`${GRID_PREFIX}-${cls}`);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t}\n\n\thighlightRow(index, cls) {\n\t\tconst { table } = this.plugin;\n\n\t\tif (index < 0) {\n\t\t\treturn noop;\n\t\t}\n\n\t\tconst { body } = table;\n\t\tFastdom.mutate(() => body.row(index).addClass(`${GRID_PREFIX}-${cls}`));\n\n\t\treturn this.blurRow(index, cls);\n\t}\n\n\tblurRow(index, cls) {\n\t\tconst { table } = this.plugin;\n\n\t\tif (index < 0) {\n\t\t\treturn noop;\n\t\t}\n\n\t\tconst row = table.body.row(index);\n\t\treturn () => Fastdom.mutate(() => row.removeClass(`${GRID_PREFIX}-${cls}`));\n\t}\n\n\thighlightCell(cell, cls) {\n\t\tFastdom.mutate(() => {\n\t\t\tcell.addClass(`${GRID_PREFIX}-${cls}`);\n\t\t});\n\n\t\treturn this.blurCell(cell, cls);\n\t}\n\n\tblurCell(cell, cls) {\n\t\treturn () =>\n\t\t\tFastdom.mutate(() => {\n\t\t\t\tcell.removeClass(`${GRID_PREFIX}-${cls}`);\n\t\t\t});\n\t}\n}","export class HighlightState {\n\tconstructor() {\n\t\tthis.columns = [];\n\t\tthis.rows = [];\n\t\tthis.cell = null;\n\t}\n}","import { CharReader } from '../../io/char.reader';\n\nexport class CsvImport {\n\tconstructor(delimiter = ',') {\n\t\tthis.delimiter = delimiter;\n\t}\n\n\tread(text) {\n\t\tconst reader = new CharReader(text);\n\t\tconst delimiter = this.delimiter;\n\n\t\tconst result = [];\n\t\tlet line = [];\n\t\tlet term = '';\n\t\tconst condition = true;\n\t\tdo {\n\t\t\tconst c = reader.peek();\n\t\t\tif (c === ' ') {\n\t\t\t\treader.read();\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (c === delimiter) {\n\t\t\t\treader.read();\n\n\t\t\t\tline.push(term);\n\t\t\t\tterm = '';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (c === '\\n') {\n\t\t\t\treader.read();\n\n\t\t\t\tif (line.length > 0 || term.length > 0) {\n\t\t\t\t\tline.push(term);\n\t\t\t\t\tterm = '';\n\t\t\t\t}\n\n\t\t\t\tif (line.length > 0) {\n\t\t\t\t\tresult.push(line);\n\t\t\t\t\tline = [];\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (c === '\\r' && reader.peekPeek() === '\\n') {\n\t\t\t\treader.read();\n\t\t\t\treader.read();\n\n\t\t\t\tif (line.length > 0 || term.length > 0) {\n\t\t\t\t\tline.push(term);\n\t\t\t\t\tterm = '';\n\t\t\t\t}\n\n\t\t\t\tif (line.length > 0) {\n\t\t\t\t\tresult.push(line);\n\t\t\t\t\tline = [];\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (c === CharReader.eof) {\n\t\t\t\treader.read();\n\n\t\t\t\tif (line.length > 0 || term.length > 0) {\n\t\t\t\t\tline.push(term);\n\t\t\t\t\tresult.push(line);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (c === '\"') {\n\t\t\t\tterm = this.readEscapedValue(reader, term);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tterm = this.readUnescapedValue(reader, term);\n\t\t\t}\n\t\t}\n\t\twhile (condition);\n\n\t\treturn result.map(this.lineToObj);\n\t}\n\n\treadEscapedValue(reader, term) {\n\t\t// Omit double quote\n\t\tlet c = reader.read();\n\t\twhile (c !== CharReader.eof) {\n\t\t\tc = reader.read();\n\t\t\tif (c === '\"') {\n\t\t\t\tif (reader.peek() === '\"') {\n\t\t\t\t\tterm += reader.read();\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tterm += c;\n\t\t}\n\n\t\treturn term;\n\t}\n\n\treadUnescapedValue(reader, term) {\n\t\tconst delimiter = this.delimiter;\n\t\tlet c = reader.peek();\n\t\twhile (c !== CharReader.eof) {\n\t\t\tif (c === delimiter || c === '\\n' ||\n\t\t\t\t(c === '\\r' && reader.peekPeek() === '\\n'))\n\t\t\t\tbreak;\n\n\t\t\tterm += reader.read();\n\t\t\tc = reader.peek();\n\t\t}\n\n\t\treturn term;\n\t}\n\n\tlineToObj(line) {\n\t\tconst result = {};\n\t\tfor (let i = 0, length = line.length; i < length; i++) {\n\t\t\tresult[i] = line[i];\n\t\t}\n\t\treturn result;\n\t}\n}\n","import { Resource } from '../resource/resource';\n\nexport class ImportState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t}\n}","import { isArray } from '../../utility/kit';\n\nexport class JsonImport {\n\tread(data) {\n\t\tconst rows = JSON.parse(data);\n\t\tif (isArray(rows)) {\n\t\t\treturn rows;\n\t\t}\n\t\treturn [rows];\n\t}\n}","import { isArray } from '../../utility/kit';\n\nconst NODE_TYPE = {\n\tELEMENT: 1,\n\tATTRIBUTE: 2,\n\tTEXT: 3,\n\tDOCUMENT: 9\n};\n\nexport class XmlImport {\n\tread(text) {\n\t\tif (!text) {\n\t\t\treturn [];\n\t\t}\n\t\tconst parser = new DOMParser();\n\t\tconst root = parser.parseFromString(text, 'text/xml').documentElement;\n\t\tconst statistics = this.getStatistics(root);\n\t\tconst graph = this.build(root, statistics, 'root');\n\t\tconst key = Object.keys(graph)[0];\n\t\tconst result = graph[key];\n\t\tif (isArray(result)) {\n\t\t\treturn result;\n\t\t}\n\n\t\treturn [result];\n\t}\n\n\tarrayFromChildren(node, statistics, path, tag) {\n\t\tconst result = [];\n\t\tconst children = Array.from(node.children).filter(child => child.nodeName === tag);\n\t\tfor (let child of children) {\n\t\t\tresult.push(this.buildNonArray(child, statistics, path));\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tbuild(node, statistics, path = 'root') {\n\t\tconst st = statistics.get(path);\n\t\tif (st.isArray) {\n\t\t\treturn this.arrayFromChildren(node.parentNode, statistics, path, node.nodeName);\n\t\t}\n\n\t\treturn this.buildNonArray(node, statistics, path);\n\t}\n\n\tbuildNonArray(node, statistics, path = 'root') {\n\t\tconst st = statistics.get(path);\n\t\tif (st.isObject) {\n\t\t\tconst result = {};\n\t\t\tconst visited = new Set();\n\t\t\tfor (let attr of Array.from(node.attributes)) {\n\t\t\t\tresult[attr.name] = attr.value;\n\t\t\t}\n\n\t\t\tfor (let child of Array.from(node.children)) {\n\t\t\t\tconst childPath = this.getPath(path, child.nodeName);\n\t\t\t\tif (visited.has(childPath)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvisited.add(childPath);\n\t\t\t\tresult[child.nodeName] = this.build(child, statistics, childPath);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tif (st.isText) {\n\t\t\treturn node.textContent;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tinfo(node, lastInfo) {\n\t\tif (!lastInfo) {\n\t\t\tlastInfo = {\n\t\t\t\tisArray: false,\n\t\t\t\tisObject: false,\n\t\t\t\tisText: false\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tisArray: lastInfo.isArray || Array.from(node.parentNode.children).filter(child => child.nodeName === node.nodeName).length > 1,\n\t\t\tisObject: lastInfo.isObject || node.children.length > 0 || node.attributes.length > 0,\n\t\t\tisText: lastInfo.isText || this.isTextContainer(node)\n\t\t};\n\t}\n\n\tgetStatistics(node, path = 'root', statistics = new Map()) {\n\t\tstatistics.set(path, this.info(node, statistics.get(path)));\n\n\t\tconst children = Array.from(node.children);\n\t\tif (children.length > 0) {\n\t\t\tfor (let child of children) {\n\t\t\t\tconst childPath = this.getPath(path, child.nodeName);\n\t\t\t\tthis.getStatistics(child, childPath, statistics);\n\t\t\t}\n\t\t}\n\n\t\treturn statistics;\n\t}\n\n\tisTextContainer(node) {\n\t\treturn node.nodeType === NODE_TYPE.ELEMENT && !node.children.length && node.childNodes.length;\n\t}\n\n\tgetPath(...args) {\n\t\treturn args.join('/');\n\t}\n}","import { GridError } from './error';\n\nexport class Cache {\n\tconstructor() {\n\t\tthis.items = {};\n\t}\n\n\tset(key, value) {\n\t\tthis.items[key] = value;\n\t}\n\n\tget(key) {\n\t\tconst entry = this.find(key);\n\t\tif (!entry) {\n\t\t\tthrow new GridError(\n\t\t\t\t'cache.get',\n\t\t\t\t`Entry with key was not found \"${key}\"`);\n\t\t}\n\n\t\treturn entry;\n\t}\n\n\thas(key) {\n\t\tconst items = this.items;\n\t\treturn items.hasOwnProperty(key);\n\t}\n\n\tfind(key) {\n\t\tconst items = this.items;\n\t\tif (items.hasOwnProperty(key)) {\n\t\t\treturn items[key];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tremove(key) {\n\t\tif (!this.items.hasOwnProperty(key)) {\n\t\t\tthrow new GridError(\n\t\t\t\t'cache.remove',\n\t\t\t\t`Entry with key was not found \"${key}\"`);\n\t\t}\n\n\t\tdelete this.items[key];\n\t}\n\n\tclear() {\n\t\tthis.items = {};\n\t}\n}","import { Command } from '../command/command';\nimport { noop } from '../utility/kit';\n\nexport class Composite {\n\tstatic func(list, reduce = noop, memo = null) {\n\t\treturn (...args) => {\n\t\t\tfor (const f of list) {\n\t\t\t\tmemo = reduce(memo, f(...args));\n\t\t\t}\n\n\t\t\treturn memo;\n\t\t};\n\t}\n\n\tstatic command(list) {\n\t\treturn new Command({\n\t\t\tsource: 'composite',\n\t\t\tcanExecute: (...args) => {\n\t\t\t\treturn list.reduce((memo, cmd) => memo || cmd.canExecute(...args), false);\n\t\t\t},\n\t\t\texecute: (...args) => {\n\t\t\t\treturn list\n\t\t\t\t\t.filter(cmd => cmd.canExecute(...args))\n\t\t\t\t\t.reduce((memo, cmd) => cmd.execute(...args) || memo, undefined);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic list(list) {\n\t\treturn list.reduce((memo, xs) => memo.concat(xs), []);\n\t}\n\n\tstatic object(list, memo = {}) {\n\t\treturn Object.assign(memo, ...list);\n\t}\n}","import { Event } from '../event/event';\n\nexport class Defer {\n\tconstructor() {\n\t\tthis.promise = new DeferPromise();\n\t}\n\n\treject() {\n\t\tthis.promise.reject();\n\t}\n\n\tresolve(value) {\n\t\tthis.promise.resolve(value);\n\t}\n}\n\nclass DeferPromise {\n\tconstructor() {\n\t\tthis.catchEvent = new Event();\n\t\tthis.thenEvent = new Event();\n\t}\n\n\treject() {\n\t\tthis.catchEvent.emit();\n\t\treturn this;\n\t}\n\n\tresolve(value) {\n\t\tthis.thenEvent.emit(value);\n\t\treturn this;\n\t}\n\n\tcatch(handler) {\n\t\tthis.catchEvent.on(handler);\n\t\treturn this;\n\t}\n\n\tthen(handler) {\n\t\tthis.thenEvent.on(handler);\n\t\treturn this;\n\t}\n}","import { isFunction } from '../utility/kit';\nimport { Guard } from './guard';\nimport { GridError } from './error';\n\nexport class Disposable {\n\tconstructor() {\n\t\tthis.disposes = [];\n\t}\n\n\tadd(resource) {\n\t\tGuard.notNull(resource, 'resource');\n\n\t\tconst test = resource;\n\t\tif (isFunction(test.finalize)) {\n\t\t\tthis.disposes.push(() => test.finalize());\n\t\t\treturn;\n\t\t}\n\n\t\tif (isFunction(test.unsubscribe)) {\n\t\t\tthis.disposes.push(() => test.unsubscribe());\n\t\t\treturn;\n\t\t}\n\n\t\tif (isFunction(test)) {\n\t\t\tthis.disposes.push(test);\n\t\t\treturn;\n\t\t}\n\n\t\tthrow new GridError(\n\t\t\t'disposable',\n\t\t\t`Resource is not a disposable`\n\t\t);\n\t}\n\n\tremove(resource) {\n\t\tconst index = this.disposes.indexOf(resource);\n\t\tif (index >= 0) {\n\t\t\tthis.disposes.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfinalize() {\n\t\tconst disposes = this.disposes;\n\t\tthis.disposes = [];\n\n\t\tfor (const dispose of disposes) {\n\t\t\tdispose();\n\t\t}\n\t}\n}\n","import { isFunction } from '../utility/kit';\n\nexport class GridError extends Error {\n\tconstructor(name, message) {\n\t\tsuper(message);\n\t\tthis.name = this.constructor.name;\n\t\tthis.message = `qgrid.${name}: ${message}`;\n\t\tif (isFunction(Error.captureStackTrace)) {\n\t\t\tError.captureStackTrace(this, this.constructor);\n\t\t} else {\n\t\t\tthis.stack = (new Error(message)).stack;\n\t\t}\n\t}\n}","import { isFunction, isUndefined } from '../utility/kit';\n\nexport class Fetch {\n\tconstructor(select) {\n\t\tthis.select = select;\n\t\tthis.busy = null;\n\t\tthis.result = null;\n\t}\n\n\trun(item) {\n\t\tconst select = this.select;\n\n\t\tthis.result = null;\n\t\tlet alive = true;\n\t\tthis.busy = new Promise((resolveBusy, rejectBusy) => {\n\t\t\tconst resolve = data => {\n\t\t\t\tif (alive) {\n\t\t\t\t\tthis.result = data;\n\t\t\t\t\tresolveBusy(data);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (isFunction(select)) {\n\t\t\t\tconst deferred = {\n\t\t\t\t\tresolve: resolve,\n\t\t\t\t\treject: rejectBusy\n\t\t\t\t};\n\n\t\t\t\tconst args = Array.from(arguments).slice(1) || [];\n\t\t\t\tconst result = select(item, deferred, ...args);\n\t\t\t\tif (!isUndefined(result)) {\n\t\t\t\t\tthis.invoke(result, resolve, rejectBusy);\n\t\t\t\t}\n\t\t\t\t// when user should invoke d.resolve or d.reject\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.invoke(select, resolve, rejectBusy);\n\t\t\t}\n\t\t});\n\n\t\treturn () => {\n\t\t\tthis.busy = null;\n\t\t\talive = false;\n\t\t};\n\t}\n\n\tinvoke(instance, resolve, reject) {\n\t\tif (instance && isFunction(instance.then)) {\n\t\t\t// when options.fetch returns promise\n\t\t\tinstance.then(resolve);\n\t\t\tif (isFunction(instance.catch)) {\n\t\t\t\tinstance.catch(reject);\n\t\t\t}\n\t\t} else if (instance && isFunction(instance.subscribe)) {\n\t\t\t// when options.fetch returns observable\n\t\t\tlet isProcessed = false;\n\t\t\tlet subscription;\n\t\t\tsubscription = instance.subscribe(\n\t\t\t\t(...args) => {\n\t\t\t\t\tresolve(...args);\n\t\t\t\t\tisProcessed = true;\n\t\t\t\t\tif (subscription && isFunction(subscription.unsubscribe)) {\n\t\t\t\t\t\t// when async\n\t\t\t\t\t\tsubscription.unsubscribe(); \n\t\t\t\t\t\tsubscription = null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\treject\n\t\t\t);\n\n\t\t\tif (isProcessed) {\n\t\t\t\tif (subscription && isFunction(subscription.unsubscribe)) {\n\t\t\t\t\t// when sync\n\t\t\t\t\tsubscription.unsubscribe();\n\t\t\t\t\tsubscription = null;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// when options.fetch return result\n\t\t\tresolve(instance);\n\t\t}\n\t}\n}","export function final() {\n    let isLocked = false;\n    return f => {\n        if (isLocked) {\n            return false;\n        }\n\n        isLocked = true;\n        try {\n            f();\n            return true;\n        } finally {\n            isLocked = false;\n        }\n    };\n}","import { GridError } from './error';\nimport { isUndefined, isFunction } from '../utility/kit';\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport class Guard {\n\t/**\n\t * If value is undefined exception will be thrown\n\t * @param {any} value - Value to check\n\t * @param {string} name - Argument name\n\t */\n\tstatic notUndefined(value, name) {\n\t\tif (isUndefined(value)) {\n\t\t\tthrow new GridError('guard.notUndefined', name);\n\t\t}\n\t}\n\n\n\t/**\n\t * If value is null or undefined exception will be thrown\n\t * @param {any} value - Value to check\n\t * @param {string} name - Argument name\n\t */\n\tstatic notNull(value, name) {\n\t\tif (value === null || isUndefined(value)) {\n\t\t\tthrow new GridError('guard.notNull', name);\n\t\t}\n\t}\n\n\t/**\n\t * If value is null or undefined or empty exception will be thrown\n\t * @param {any} value - Value to check\n\t * @param {string} name - Argument name\n\t */\n\tstatic notNullOrEmpty(value, name) {\n\t\tif (value === null || isUndefined(value) || value === '') {\n\t\t\tthrow new GridError('guard.notNullOrEmpty', name);\n\t\t}\n\t}\n\n\t/**\n\t * If value is not a function exception will be thrown\n\t * @param {any} value - Value to check\n\t * @param {string} name - Argument name\n\t */\n\tstatic invokable(value, name) {\n\t\tif (!isFunction(value)) {\n\t\t\tthrow new GridError('guard.invokable', name);\n\t\t}\n\t}\n\t\n\tstatic hasProperty(instance, name) {\n\t\tGuard.notNull(instance, 'instance');\n\t\tif (!hasOwnProperty.call(instance, name)) {\n\t\t\tthrow new GridError('guard.hasProperty', name);\n\t\t}\n\t}\n}","export class Lazy {\n    constructor(build) {\n        this.build = build;\n    }\n\n    get instance() {\n        return this.value || (this.value = this.build());\n    }\n}","/*eslint-disable  no-console*/\n\nexport class Log {\n\tstatic info(source, message) {\n\t\t//console.info(`qgrid.${source}: ${message}`);\n\t}\n\n\tstatic warn(source, message) {\n\t\t//console.warn(`qgrid.${source}: ${message}`);\n\t}\n\n\tstatic error(source, message) {\n\t\tconsole.error(`qgrid.${source}: ${message}`);\n\t}\n}\n\n/*eslint-enable*/","export class Range {\n\tconstructor(start, end) {\n\t\tthis.start = start;\n\t\tthis.end = end;\n\t}\n}","export class CharReader {\n\tconstructor(text) {\n\t\tthis.text = text || '';\n\t\tthis.peeks = [];\n\t\tthis.position = 0;\n\t\tthis.length = this.text.length;\n\t}\n\n\tstatic get eof() {\n\t\treturn undefined;\n\t}\n\n\tread() {\n\t\tconst peeks = this.peeks;\n\t\tif (peeks.length > 0) {\n\t\t\treturn peeks.pop();\n\t\t}\n\n\t\tconst nextPosition = this.position + 1;\n\t\tif (nextPosition < this.length) {\n\t\t\tconst c = this.text[this.position];\n\t\t\tthis.position = nextPosition;\n\t\t\treturn c;\n\t\t}\n\n\t\treturn CharReader.eof;\n\t}\n\n\tpeek() {\n\t\treturn this.peekCore(0);\n\t}\n\n\tpeekPeek() {\n\t\treturn this.peekCore(1);\n\t}\n\n\tpeekCore(offset) {\n\t\tconst peeks = this.peeks;\n\t\tif (offset < peeks.length) {\n\t\t\treturn peeks[offset];\n\t\t}\n\n\t\tconst length = this.length;\n\t\tfor (let i = peeks.length; i <= offset; i++) {\n\t\t\tconst nextPosition = this.position + 1;\n\t\t\tif (nextPosition >= length) {\n\t\t\t\treturn CharReader.eof;\n\t\t\t}\n\n\t\t\tconst c = this.text[this.position];\n\t\t\tthis.position = nextPosition;\n\t\t\tpeeks.push(c);\n\t\t}\n\n\t\treturn peeks[offset];\n\t}\n\n\tseek(offset) {\n\t\tconst peeks = this.peeks;\n\t\tconst peekCount = peeks.length;\n\t\tpeeks.splice(0, Math.Min(offset, peekCount));\n\t\toffset -= peekCount;\n\t\twhile (--offset >= 0) {\n\t\t\tthis.read();\n\t\t}\n\n\t\treturn this.peek();\n\t}\n}","export function isFileAnImage(name) {\n\treturn !!name && name.toLowerCase().search(/png|jpg|jpeg|svg/) > -1;\n}\n","const controlSet = new Set([\n\t'shift',\n\t'ctrl',\n\t'alt',\n\t'pause',\n\t'break',\n\t'capslock',\n\t'escape',\n\t'insert',\n\t'left',\n\t'right',\n\t'end',\n\t'home',\n\t'pageup',\n\t'pagedown',\n\t'up',\n\t'down',\n\t'f1',\n\t'f2',\n\t'f3',\n\t'f4',\n\t'f5',\n\t'f6',\n\t'f7',\n\t'f8',\n\t'f9',\n\t'f10',\n\t'f11',\n\t'f12',\n\t'numlock',\n\t'scrolllock'\n]);\n\nconst nonPrintableSet = new Set([\n\t'enter'\n]);\n\nconst codeMap = new Map()\n\t.set(8, 'backspace')\n\t.set(9, 'tab')\n\t.set(13, 'enter')\n\t.set(16, 'shift')\n\t.set(17, 'ctrl')\n\t.set(18, 'alt')\n\t.set(20, 'capslock')\n\t.set(27, 'escape')\n\t.set(32, 'space')\n\t.set(33, 'pageup')\n\t.set(34, 'pagedown')\n\t.set(35, 'end')\n\t.set(36, 'home')\n\t.set(37, 'left')\n\t.set(38, 'up')\n\t.set(39, 'right')\n\t.set(40, 'down')\n\t.set(45, 'insert')\n\t.set(46, 'delete')\n\t.set(96, 'numpad0')\n\t.set(97, 'numpad1')\n\t.set(98, 'numpad2')\n\t.set(99, 'numpad3')\n\t.set(100, 'numpad4')\n\t.set(101, 'numpad5')\n\t.set(102, 'numpad6')\n\t.set(103, 'numpad7')\n\t.set(104, 'numpad8')\n\t.set(105, 'numpad9')\n\t.set(112, 'f1')\n\t.set(113, 'f2')\n\t.set(114, 'f3')\n\t.set(115, 'f4')\n\t.set(116, 'f5')\n\t.set(117, 'f6')\n\t.set(118, 'f7')\n\t.set(119, 'f8')\n\t.set(120, 'f9')\n\t.set(121, 'f10')\n\t.set(122, 'f11')\n\t.set(123, 'f12')\n\t.set(144, 'numlock')\n\t.set(145, 'scrolllock');\n\nconst codeSet = new Set(codeMap.values());\n\nconst printableMap = new Map()\n\t.set('space', ' ');\n\nexport class Keyboard {\n\tstatic isPrintable(code) {\n\t\treturn !nonPrintableSet.has(code) && !Keyboard.isControl(code);\n\t}\n\n\tstatic isControl(code) {\n\t\treturn controlSet.has(code);\n\t}\n\n\tstatic stringify(code, key) {\n\t\tif (codeSet.has(code)) {\n\t\t\treturn printableMap.get(code) || '';\n\t\t}\n\n\t\treturn key;\n\t}\n\n\tstatic translate(code) {\n\t\treturn codeMap.get(code) || String.fromCharCode(code);\n\t}\n}\n\n","export class KeyboardState {\n\tconstructor() {\n\t\tthis.status = 'release';\n\t\tthis.codes = [];\n\t\tthis.code = null;\n\t}\n}","import { Resource } from '../resource/resource';\n\nexport class LayerState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t}\n}","import * as columnService from '../column/column.service';\nimport { Log } from '../infrastructure/log';\nimport { selectColumn } from '../navigation/navigation.state.selector';\nimport * as css from '../services/css';\nimport { Fastdom } from '../services/fastdom';\n\nexport class LayoutLet {\n\tconstructor(plugin) {\n\t\tconst { model, observeReply, disposable } = plugin;\n\t\tconst styleRow = this.styleRow.bind(this);\n\n\t\tthis.plugin = plugin;\n\n\t\tobserveReply(model.navigationChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('cell')) {\n\t\t\t\t\tconst { oldValue, newValue } = e.changes.cell;\n\t\t\t\t\tconst oldColumn = oldValue ? oldValue.column : {};\n\t\t\t\t\tconst newColumn = newValue ? newValue.column : {};\n\n\t\t\t\t\tif (oldColumn.key !== newColumn.key && (oldColumn.viewWidth || newColumn.viewWidth)) {\n\t\t\t\t\t\tFastdom.measure(() => {\n\t\t\t\t\t\t\tconst form = this.updateColumnForm();\n\t\t\t\t\t\t\tFastdom.mutate(() => this.invalidateColumns(form));\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.layoutChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.tag.source === 'layout.let') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.hasChanges('columns')) {\n\t\t\t\t\tFastdom.measure(() => {\n\t\t\t\t\t\tconst form = this.updateColumnForm();\n\t\t\t\t\t\tFastdom.mutate(() => this.invalidateColumns(form));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.rowChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('canResize')) {\n\t\t\t\t\tconst rows = Array.from(model.style().rows);\n\t\t\t\t\tif (e.state.canResize) {\n\t\t\t\t\t\trows.push(styleRow);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tconst index = model.style.rows.indexOf(styleRow);\n\t\t\t\t\t\trows.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t\tmodel.style({ rows }, { source: 'layout.let' });\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.dataChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('columns')) {\n\t\t\t\t\tmodel.layout({\n\t\t\t\t\t\tcolumns: new Map()\n\t\t\t\t\t}, {\n\t\t\t\t\t\tsource: 'layout.let',\n\t\t\t\t\t\tbehavior: 'core'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.viewChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('columns')) {\n\t\t\t\t\tconst columns = columnService.flattenColumns(e.state.columns);\n\t\t\t\t\tconst hasNonDefaultWidth = x => x.width !== null || x.minWidth !== null || x.maxWidth !== null || x.widthMode === 'fit-head';\n\t\t\t\t\tif (columns.some(hasNonDefaultWidth)) {\n\t\t\t\t\t\tFastdom.mutate(() => {\n\t\t\t\t\t\t\tconst { columns } = model.layout();\n\t\t\t\t\t\t\tthis.invalidateColumns(columns);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tdisposable.add(() => {\n\t\t\tconst sheet = css.sheet(this.gridId, 'column-layout');\n\t\t\tsheet.remove();\n\t\t});\n\t}\n\n\tupdateColumnForm() {\n\t\tconst { model, table } = this.plugin;\n\t\tconst { head } = table;\n\t\tconst { cells } = head.context.bag;\n\t\tconst layout = model.layout().columns;\n\n\t\tconst form = new Map();\n\t\tfor (let cell of cells) {\n\t\t\tconst { column, rowIndex, columnIndex } = cell;\n\t\t\tif (!column.canResize) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst { key } = column;\n\t\t\tif (layout.has(key)) {\n\t\t\t\tconst { width } = layout.get(key);\n\t\t\t\tform.set(key, { width });\n\t\t\t} else {\n\t\t\t\tconst th = head.cell(rowIndex, columnIndex);\n\t\t\t\tconst width = th.width();\n\n\t\t\t\t// It can be that clientWidth is zero on start, while css is not applied.\n\t\t\t\tif (width) {\n\t\t\t\t\tform.set(key, { width });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tmodel.layout({ columns: form }, { source: 'layout.let', behavior: 'core' });\n\n\t\tconst column = selectColumn(model.navigation());\n\t\tif (column && column.viewWidth) {\n\t\t\tconst viewForm = new Map(form)\n\t\t\tconst columnForm = form.get(column.key);\n\t\t\tviewForm.set(column.key, { width: columnForm ? Math.max(columnForm.width, column.viewWidth) : column.viewWidth });\n\t\t\treturn viewForm;\n\t\t}\n\n\t\treturn form;\n\t}\n\n\tinvalidateColumns(form) {\n\t\tLog.info('layout', 'invalidate columns');\n\n\t\tconst { table } = this.plugin;\n\t\tconst columns = table.data.columns();\n\t\tconst getWidth = columnService.widthFactory(table, form);\n\n\t\tconst style = {};\n\t\tlet { length } = columns;\n\n\t\twhile (length--) {\n\t\t\tconst column = columns[length];\n\t\t\tconst width = getWidth(column.key);\n\t\t\tif (null !== width) {\n\t\t\t\tconst key = css.escape(column.key);\n\t\t\t\tconst size = width + 'px';\n\t\t\t\tconst sizeStyle = {\n\t\t\t\t\t'width': size,\n\t\t\t\t\t'min-width': size,\n\t\t\t\t\t'max-width': size\n\t\t\t\t};\n\n\t\t\t\tstyle[`.q-grid-the-${key}`] = sizeStyle;\n\t\t\t}\n\t\t}\n\n\t\tconst sheet = css.sheet(this.gridId, 'column-layout');\n\t\tsheet.set(style);\n\t}\n\n\tstyleRow(row, context) {\n\t\tconst { model } = this.plugin;\n\t\tconst { layout } = model;\n\n\t\tconst form = layout().rows;\n\t\tconst style = form.get(row);\n\t\tif (style) {\n\t\t\tconst { minHeight } = model.row();\n\t\t\tif (minHeight > style.height){\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcontext.class(`resized-${style.height}px`, { height: style.height + 'px' });\n\t\t}\n\t}\n\n\tget gridId() {\n\t\treturn this.plugin.model.grid().id;\n\t}\n}","export class LayoutState {\n\tconstructor() {\n\t\tthis.columns = new Map();\n\t\tthis.rows = new Map();\n\t}\n}","import { noop, toCamelCase, isUndefined, isArray } from '../utility/kit';\nimport { Log } from '../infrastructure//log';\n\nexport class ModelBinder {\n\tconstructor(host, plugin) {\n\t\tthis.host = host;\n\t\tthis.plugin = plugin;\n\t}\n\n\tcanWrite(oldValue, newValue, key) {\n\t\tif (isUndefined(newValue)) {\n\t\t\tLog.warn('model.bind', `can't write undefined to the model[${key}]`);\n\t\t\treturn false;\n\t\t}\n\n\t\t// As `Observable | async` returns null by default so we need to filter it out\n\t\tif (isArray(oldValue) && newValue === null) {\n\t\t\tLog.warn('model.bind', `the model[${key}] expects array, got ${newValue}`);\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tbound(model, stateNames, run = true, track = true) {\n\t\tif (model) {\n\t\t\tconst commits = [];\n\t\t\tfor (let stateName of stateNames) {\n\t\t\t\tconst state = model[stateName];\n\t\t\t\tconst pack = this.packFactory(stateName);\n\t\t\t\tconst write = this.writeFactory(stateName);\n\n\t\t\t\tif (run) {\n\t\t\t\t\tconst oldState = state();\n\t\t\t\t\tconst newState = pack(oldState);\n\t\t\t\t\tconst changes = this.buildChanges(newState);\n\t\t\t\t\twrite({ changes });\n\t\t\t\t}\n\n\t\t\t\tif (track) {\n\t\t\t\t\tthis.disposable.add(\n\t\t\t\t\t\tmodel[stateName + 'Changed'].on(write)\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tcommits.push(() => {\n\t\t\t\t\tLog.info('model.bind', `to model \"${stateName}\"`);\n\n\t\t\t\t\tconst oldState = state();\n\t\t\t\t\tconst newState = pack(oldState);\n\t\t\t\t\tstate(newState);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn () => commits.forEach(commit => commit());\n\t\t}\n\n\t\treturn noop;\n\t}\n\n\twriteFactory(name) {\n\t\tconst host = this.host;\n\t\treturn e => {\n\t\t\tconst changes = Object.keys(e.changes);\n\t\t\tfor (let diffKey of changes) {\n\t\t\t\tconst hostKey = toCamelCase(name, diffKey);\n\t\t\t\tif (host.hasOwnProperty(hostKey)) {\n\t\t\t\t\tconst diff = e.changes[diffKey];\n\t\t\t\t\thost[hostKey] = diff.newValue;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tpackFactory(name) {\n\t\treturn state => {\n\t\t\tconst host = this.host;\n\t\t\tconst newState = {};\n\t\t\tfor (let stateKey of Object.keys(state)) {\n\t\t\t\tconst hostKey = toCamelCase(name, stateKey);\n\t\t\t\tif (host.hasOwnProperty(hostKey)) {\n\t\t\t\t\tconst oldValue = state[stateKey];\n\t\t\t\t\tconst newValue = host[hostKey];\n\t\t\t\t\tif (this.canWrite(oldValue, newValue, stateKey)) {\n\t\t\t\t\t\tnewState[stateKey] = newValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn newState;\n\t\t};\n\t}\n\n\tbuildChanges(state) {\n\t\treturn Object\n\t\t\t.keys(state)\n\t\t\t.reduce((memo, key) => {\n\t\t\t\tconst value = state[key];\n\t\t\t\tmemo[key] = {\n\t\t\t\t\tnewValue: value,\n\t\t\t\t\toldValue: value\n\t\t\t\t};\n\t\t\t\treturn memo;\n\t\t\t}, {})\n\t}\n}\n","import { ActionState } from '../action/action.state';\nimport { AnimationState } from '../animation/animation.state';\nimport { GridError } from '../infrastructure/error';\nimport { BodyState } from '../body/body.state';\nimport { ColumnListState } from '../column-list/column.list.state';\nimport { DataState } from '../data/data.state';\nimport { DragState } from '../drag/drag.state';\nimport { EditState } from '../edit/edit.state';\nimport { ExportState } from '../export/export.state';\nimport { FetchState } from '../fetch/fetch.state';\nimport { FilterState } from '../filter/filter.state';\nimport { FocusState } from '../focus/focus.state';\nimport { FootState } from '../foot/foot.state';\nimport { GridState } from '../grid/grid.state';\nimport { GroupState } from '../group/group.state';\nimport { HeadState } from '../head/head.state';\nimport { HighlightState } from '../highlight/highlight.state';\nimport { ImportState } from '../import/import.state';\nimport { isFunction } from '../utility/kit';\nimport { KeyboardState } from '../keyboard/keyboard.state';\nimport { LayerState } from '../layer/layer.state';\nimport { LayoutState } from '../layout/layout.state';\nimport { Model } from './model';\nimport { MouseState } from '../mouse/mouse.state';\nimport { NavigationState } from '../navigation/navigation.state';\nimport { PaginationState } from '../pagination/pagination.state';\nimport { PersistenceState } from '../persistence/persistence.state';\nimport { PipeState } from '../pipe/pipe.state';\nimport { PivotState } from '../pivot/pivot.state';\nimport { PluginState } from '../plugin/plugin.state';\nimport { ProgressState } from '../progress/progress.state';\nimport { RestState } from '../rest/rest.state';\nimport { RowListState } from '../row-list/row.list.state';\nimport { RowState } from '../row/row.state';\nimport { SceneState } from '../scene/scene.state';\nimport { ScrollState } from '../scroll/scroll.state';\nimport { SelectionState } from '../selection/selection.state';\nimport { SortState } from '../sort/sort.state';\nimport { StyleState } from '../style/style.state';\nimport { TemplateState } from '../template/template.state';\nimport { ToolbarState } from '../toolbar/toolbar.state';\nimport { ValidationState } from '../validation/validation.state';\nimport { ViewState } from '../view/view.state';\nimport { VisibilityState } from '../visibility/visibility.state';\nimport { ClipboardState } from '../clipboard/clipboard.state';\n\nexport class ModelBuilder {\n    constructor() {\n        this.state = {};\n\n        this\n            .register('action', ActionState)\n            .register('animation', AnimationState)\n            .register('body', BodyState)\n            .register('clipboard', ClipboardState)\n            .register('columnList', ColumnListState)\n            .register('data', DataState)\n            .register('drag', DragState)\n            .register('edit', EditState)\n            .register('export', ExportState)\n            .register('fetch', FetchState)\n            .register('filter', FilterState)\n            .register('focus', FocusState)\n            .register('foot', FootState)\n            .register('grid', GridState)\n            .register('group', GroupState)\n            .register('head', HeadState)\n            .register('highlight', HighlightState)\n            .register('import', ImportState)\n            .register('keyboard', KeyboardState)\n            .register('layer', LayerState)\n            .register('layout', LayoutState)\n            .register('mouse', MouseState)\n            .register('navigation', NavigationState)\n            .register('pagination', PaginationState)\n            .register('persistence', PersistenceState)\n            .register('pipe', PipeState)\n            .register('pivot', PivotState)\n            .register('plugin', PluginState)\n            .register('progress', ProgressState)\n            .register('rest', RestState)\n            .register('row', RowState)\n            .register('rowList', RowListState)\n            .register('scene', SceneState)\n            .register('scroll', ScrollState)\n            .register('selection', SelectionState)\n            .register('sort', SortState)\n            .register('style', StyleState)\n            .register('template', TemplateState)\n            .register('toolbar', ToolbarState)\n            .register('validation', ValidationState)\n            .register('view', ViewState)\n            .register('visibility', VisibilityState);\n    }\n\n    register(key, ctor) {\n        if (this.state.hasOwnProperty(key)) {\n            throw new GridError(\n                'model',\n                `\"${key}\" is already registered`);\n        }\n\n        if (!isFunction(ctor)) {\n            throw new GridError(\n                `model.${key}`,\n                `\"${ctor}\" is not a valid type, should be an constructor function`);\n        }\n\n        this.state[key] = ctor;\n        return this;\n    }\n\n    build() {\n        const { state } = this;\n        const model = new Model();\n        for (let name of Object.keys(state)) {\n            const Type = state[name];\n            model.inject(name, Type);\n        }\n\n        return model;\n    }\n}","import { GridError } from '../infrastructure/error';\nimport { Event } from '../event/event';\nimport { Guard } from '../infrastructure/guard';\nimport { isArray, isObject, getTypeName } from '../utility/kit';\nimport { Log } from '../infrastructure/log';\n\nfunction equals(x, y) {\n\t// TODO: improve equality algorithm\n\tif (x === y) {\n\t\treturn true;\n\t}\n\n\tif (isArray(x)) {\n\t\tif (x.length === 0 && y.length === 0) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tif (x instanceof Map) {\n\t\tif (x.size === 0 && y.size === 0) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tif (x instanceof Set) {\n\t\tif (x.size === 0 && y.size === 0) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\nexport class Model {\n\tconstructor() {\n\t\tthis.accessors = new Map();\n\t}\n\n\tinject(name, Type) {\n\t\tconst accessor = this.resolveAccessor(name, Type);\n\t\tthis[name + 'Changed'] = accessor.changed;\n\t\tthis[name] = accessor.state;\n\t}\n\n\tresolveAccessor(name, Type) {\n\t\tif (this.accessors.has(name)) {\n\t\t\tthrow new GridError(\n\t\t\t\t'model',\n\t\t\t\t`${name} accessor already exists`\n\t\t\t);\n\t\t}\n\n\t\tconst accessor = this.buildAccessor(name, Type);\n\t\tthis.accessors.set(Type, accessor);\n\t\treturn accessor;\n\t}\n\n\tbuildAccessor(name, Type) {\n\t\tlet state = new Type();\n\n\t\tconst changeSet = new Set();\n\t\tconst reply = () => {\n\t\t\tconst replyChanges = Array.from(changeSet.values())\n\t\t\t\t.reduce((memo, key) => {\n\t\t\t\t\tconst value = state[key];\n\t\t\t\t\tmemo[key] = { newValue: value, oldValue: value };\n\t\t\t\t\treturn memo;\n\t\t\t\t}, {});\n\n\t\t\treturn {\n\t\t\t\tstate,\n\t\t\t\tchanges: replyChanges,\n\t\t\t\thasChanges: replyChanges.hasOwnProperty.bind(replyChanges),\n\t\t\t\ttag: {},\n\t\t\t\tsource: 'watch',\n\t\t\t};\n\t\t};\n\n\t\tconst event = new Event(reply);\n\t\tconst getter = () => state;\n\t\tconst setter = (newState, tag) => {\n\t\t\tif (!isObject(newState)) {\n\t\t\t\tthrow new GridError(\n\t\t\t\t\t`model.${name}`,\n\t\t\t\t\t`\"${newState}\" is not a valid type, should be an object`);\n\t\t\t}\n\n\t\t\tconst changes = {};\n\t\t\tlet hasChanges = false;\n\n\t\t\tconst keys = Object.keys(newState);\n\t\t\tfor (let i = 0, keysLength = keys.length; i < keysLength; i++) {\n\t\t\t\tconst key = keys[i];\n\t\t\t\tif (!state.hasOwnProperty(key)) {\n\t\t\t\t\tthrow new GridError(\n\t\t\t\t\t\t`model.${name}`,\n\t\t\t\t\t\t`\"${key}\" is not a valid key, only [${Object.keys(state).join(', ')}] keys are supported`\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst newValue = newState[key];\n\t\t\t\tconst oldValue = state[key];\n\t\t\t\tif (!equals(newValue, oldValue)) {\n\t\t\t\t\tLog.info('model', `value changed - \"${name}.${key}\"`);\n\t\t\t\t\tGuard.notUndefined(newValue, `model.${name}.${key}`);\n\n\t\t\t\t\tstate[key] = newValue;\n\t\t\t\t\thasChanges = true;\n\t\t\t\t\tchanges[key] = { newValue, oldValue };\n\n\t\t\t\t\tchangeSet.add(key);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tLog.warn('model', `value was not changed - \"${name}.${key}\"`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (hasChanges) {\n\t\t\t\tstate = {\n\t\t\t\t\t...state\n\t\t\t\t};\n\n\t\t\t\tevent.emit({\n\t\t\t\t\tstate,\n\t\t\t\t\tchanges,\n\t\t\t\t\thasChanges: changes.hasOwnProperty.bind(changes),\n\t\t\t\t\ttag: tag || {},\n\t\t\t\t\tsource: 'emit'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this;\n\t\t}\n\n\t\tconst accessor = (...args) => {\n\t\t\tif (args.length) {\n\t\t\t\treturn setter(args[0], args[1]);\n\t\t\t}\n\n\t\t\treturn getter();\n\t\t};\n\n\t\treturn {\n\t\t\tchanged: event,\n\t\t\tstate: accessor,\n\t\t};\n\t}\n\n\tresolve(Type) {\n\t\tlet accessor = this.accessors.get(Type);\n\t\tif (!accessor) {\n\t\t\tconst name = getTypeName(Type);\n\t\t\taccessor = this.resolveAccessor(name, Type);\n\t\t}\n\n\t\treturn accessor;\n\t}\n}\n","export const NO_BUTTON = 0;\nexport const LEFT_BUTTON = 1;\nexport const MIDDLE_BUTTON = 2;\nexport const RIGHT_BUTTON = 3;\n\nexport function checkButtonCode(event, code) {\n    return getButtonCode(event) === code;\n}\n\nexport function getButtonCode(event) {\n    return event.which;\n}\n\nexport function stringify(code) {\n    switch (code) {\n        case LEFT_BUTTON: return 'left';\n        case RIGHT_BUTTON: return 'right';\n        case MIDDLE_BUTTON: return 'middle';\n        default: return null;\n    }\n}\n","export class MouseState {\n\tconstructor() {\n\t\tthis.status = 'release';\n\t\tthis.code = null;\n\t\tthis.target = null;\n\t\tthis.timestamp = Date.now()\n\t}\n}\n","import { Command } from '../command/command';\nimport { selectColumnIndex } from './navigation.state.selector';\nimport { selectRowIndex } from './navigation.state.selector';\n\nexport class Navigation {\n\tconstructor(model, table) {\n\t\tthis.model = model;\n\t\tthis.table = table;\n\t}\n\n\tposition(y, direction) {\n\t\tconst table = this.table;\n\t\tconst body = table.body;\n\t\tconst lastRow = this.lastRow;\n\t\tconst lower = table.view.scrollHeight() - table.view.height();\n\n\t\tlet index = 0;\n\t\tlet offset = 0;\n\n\t\t// TODO: improve performance\n\t\twhile (index <= lastRow && offset <= y) {\n\t\t\toffset += body.row(index).height();\n\t\t\tindex++;\n\t\t}\n\n\t\tif (direction === 'down' && body.row(index)) {\n\t\t\toffset -= body.row(index).height();\n\t\t\tindex--;\n\t\t}\n\n\t\tconst row = Math.max(this.firstRow, Math.min(lastRow, index));\n\t\toffset = Math.min(offset, lower);\n\t\treturn { row, offset };\n\t}\n\n\tgoTo(rowIndex, columnIndex, source = 'navigation') {\n\t\tlet cell = this.cell(rowIndex, columnIndex);\n\t\tif (!cell) {\n\t\t\t// TODO: make it better, right it just a huck for row-details,\n\t\t\t// need to support rowspan and colspan\n\t\t\tcell = this.cell(rowIndex, this.firstColumn);\n\t\t}\n\n\t\tthis.model.navigation({\n\t\t\tcell\n\t\t}, {\n\t\t\tsource\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tcolumns(rowIndex) {\n\t\tconst columns = this.table.body.columns(rowIndex);\n\t\tconst index = [];\n\t\tfor (let i = 0, length = columns.length; i < length; i++) {\n\t\t\tconst column = columns[i];\n\t\t\tif (column.model().canFocus) {\n\t\t\t\tindex.push(column.index);\n\t\t\t}\n\t\t}\n\t\treturn index;\n\t}\n\n\tget currentColumn() {\n\t\tconst columns = this.columns(this.currentRow);\n\t\tconst columnIndex = selectColumnIndex(this.model.navigation());\n\t\tconst index = columns.indexOf(columnIndex);\n\t\treturn columns.length ? columns[Math.max(index, 0)] : -1;\n\t}\n\n\tget nextColumn() {\n\t\tconst columns = this.columns(this.currentRow);\n\t\tconst index = columns.indexOf(this.currentColumn);\n\t\treturn index >= 0 && index < columns.length - 1 ? columns[index + 1] : -1;\n\t}\n\n\tget prevColumn() {\n\t\tconst columns = this.columns(this.currentRow);\n\t\tconst index = columns.indexOf(this.currentColumn);\n\t\treturn index > 0 && index < columns.length ? columns[index - 1] : -1;\n\t}\n\n\tget lastColumn() {\n\t\tconst columns = this.columns(this.currentRow);\n\t\tconst index = columns.length - 1;\n\t\treturn index >= 0 ? columns[index] : -1;\n\t}\n\n\tget firstColumn() {\n\t\tconst columns = this.columns(this.currentRow);\n\t\treturn columns.length ? columns[0] : -1;\n\t}\n\n\tget currentRow() {\n\t\tconst rowIndex = selectRowIndex(this.model.navigation());\n\t\tif (rowIndex < 0) {\n\t\t\treturn this.model.scene().rows.length ? 0 : -1;\n\t\t}\n\n\t\treturn rowIndex;\n\t}\n\n\tget nextRow() {\n\t\tconst row = this.currentRow + 1;\n\t\treturn row <= this.lastRow ? row : -1;\n\t}\n\n\tget prevRow() {\n\t\tconst row = this.currentRow - 1;\n\t\treturn row >= 0 ? row : -1;\n\t}\n\n\tget firstRow() {\n\t\treturn Math.min(0, this.lastRow);\n\t}\n\n\tget lastRow() {\n\t\treturn this.table.body.rowCount(this.currentColumn) - 1;\n\t}\n\n\tcell(rowIndex, columnIndex) {\n\t\tconst cell = this.table.body.cell(rowIndex, columnIndex);\n\t\tconst model = cell.model();\n\t\tif (model) {\n\t\t\tconst { row, column } = model;\n\t\t\treturn {\n\t\t\t\trowIndex,\n\t\t\t\tcolumnIndex,\n\t\t\t\trow,\n\t\t\t\tcolumn\n\t\t\t};\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tcontext(type, settings) {\n\t\tconst model = this.model;\n\t\tconst oldRow = this.currentRow;\n\t\tconst oldColumn = this.currentColumn;\n\t\tconst keyCode = model.action().shortcut.keyCode;\n\n\t\treturn Object.assign({\n\t\t\tmodel,\n\t\t\ttype,\n\t\t\toldRow,\n\t\t\toldColumn,\n\t\t\tkeyCode\n\t\t}, settings);\n\t}\n\n\tget commands() {\n\t\tconst { model, table } = this;\n\t\tconst { edit } = model;\n\t\tconst { shortcut, go } = model.navigation();\n\n\t\tconst canNavigate = () => {\n\t\t\tif (edit().status === 'view') {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst column = table.body.column(this.currentColumn).model();\n\t\t\treturn column && (column.editorOptions.trigger === 'focus' || column.editorOptions.cruise === 'transparent');\n\t\t};\n\n\t\tconst commands = {\n\t\t\tgoDown: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.down,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newRow = this.nextRow;\n\t\t\t\t\t\treturn newRow >= 0 && go.canExecute(this.context('down', { newRow }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst newRow = this.nextRow;\n\t\t\t\t\tconst newColumn = this.currentColumn;\n\t\t\t\t\treturn go.execute(this.context('down', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tgoUp: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.up,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newRow = this.prevRow;\n\t\t\t\t\t\treturn newRow >= 0 && go.canExecute(this.context('up', { newRow }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst newRow = this.prevRow;\n\t\t\t\t\tconst newColumn = this.currentColumn;\n\t\t\t\t\treturn go.execute(this.context('up', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tgoRight: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.right,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newColumn = this.nextColumn;\n\t\t\t\t\t\treturn newColumn >= 0 && go.canExecute(this.context('right', { newColumn }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst newRow = this.currentRow;\n\t\t\t\t\tconst newColumn = this.nextColumn;\n\t\t\t\t\treturn go.execute(this.context('right', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tgoLeft: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.left,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newColumn = this.prevColumn;\n\t\t\t\t\t\treturn newColumn >= 0 && go.canExecute(this.context('left', { newColumn }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst newRow = this.currentRow;\n\t\t\t\t\tconst newColumn = this.prevColumn;\n\t\t\t\t\treturn go.execute(this.context('left', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tgoNext: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.next,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tconst newRow = this.nextRow;\n\t\t\t\t\tconst newColumn = this.nextColumn;\n\t\t\t\t\tconst hasNextColumn = newColumn >= 0;\n\t\t\t\t\tconst hasNextRow = newRow >= 0;\n\t\t\t\t\treturn (hasNextColumn || hasNextRow) && go.canExecute(this.context('next', { newRow, newColumn }));\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst nextColumn = this.nextColumn;\n\t\t\t\t\tconst hasNextColumn = nextColumn >= 0;\n\t\t\t\t\tconst newRow = hasNextColumn ? this.currentRow : this.nextRow;\n\t\t\t\t\tconst newColumn = hasNextColumn ? nextColumn : this.firstColumn;\n\n\t\t\t\t\treturn go.execute(this.context('next', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tgoPrevious: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.previous,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tconst newColumn = this.prevColumn;\n\t\t\t\t\tconst newRow = this.prevRow;\n\t\t\t\t\tconst hasPrevColumn = newColumn >= 0;\n\t\t\t\t\tconst hasPrevRow = newRow >= 0;\n\t\t\t\t\treturn (hasPrevColumn || hasPrevRow) && go.canExecute(this.context('previous', { newRow, newColumn }));\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst prevColumn = this.prevColumn;\n\t\t\t\t\tconst hasPrevColumn = prevColumn >= 0;\n\t\t\t\t\tconst newColumn = hasPrevColumn ? prevColumn : this.lastColumn;\n\t\t\t\t\tconst newRow = hasPrevColumn ? this.currentRow : this.prevRow;\n\t\t\t\t\treturn go.execute(this.context('previous', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\thome: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.home,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newColumn = this.prevColumn;\n\t\t\t\t\t\treturn newColumn >= 0 && go.canExecute(this.context('end', { newColumn }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst newRow = this.currentRow;\n\t\t\t\t\tconst newColumn = this.firstColumn;\n\t\t\t\t\treturn go.execute(this.context('home', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tend: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.end,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newColumn = this.nextColumn;\n\t\t\t\t\t\treturn newColumn >= 0 && go.canExecute(this.context('home', { newColumn }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst newRow = this.currentRow;\n\t\t\t\t\tconst newColumn = this.lastColumn;\n\t\t\t\t\treturn go.execute(this.context('end', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tupward: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.upward,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newRow = this.prevRow;\n\t\t\t\t\t\treturn newRow >= 0 && go.canExecute(this.context('upward', { newRow }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst newRow = this.firstRow;\n\t\t\t\t\tconst newColumn = this.currentColumn;\n\t\t\t\t\treturn go.execute(this.context('upward', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tdownward: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.downward,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newRow = this.nextRow;\n\t\t\t\t\t\treturn newRow >= 0 && go.canExecute(this.context('downward', { newRow }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst newRow = this.lastRow;\n\t\t\t\t\tconst newColumn = this.currentColumn;\n\t\t\t\t\treturn go.execute(this.context('downward', { newRow, newColumn })) && this.goTo(newRow, newColumn);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tpageUp: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.pageUp,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newRow = this.prevRow;\n\t\t\t\t\t\treturn newRow >= 0 && go.canExecute(this.context('pageUp', { newRow }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst view = table.view;\n\t\t\t\t\tconst position = this.position(view.scrollTop() - view.height(), 'up');\n\t\t\t\t\tconst newRow = position.row;\n\t\t\t\t\tconst newColumn = this.currentColumn;\n\t\t\t\t\tif (go.execute(this.context('pageUp', { newRow, newColumn }))) {\n\t\t\t\t\t\tthis.model.scroll({ top: position.offset }, { source: 'navigation' });\n\t\t\t\t\t\treturn this.goTo(newRow, newColumn, 'navigation.scroll');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}),\n\t\t\tpageDown: new Command({\n\t\t\t\tsource: 'navigation',\n\t\t\t\tshortcut: shortcut.pageDown,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tif (canNavigate()) {\n\t\t\t\t\t\tconst newRow = this.nextRow;\n\t\t\t\t\t\treturn newRow >= 0 && go.canExecute(this.context('pageDown', { newRow }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst view = table.view;\n\t\t\t\t\tconst position = this.position(view.scrollTop() + view.height(), 'down');\n\t\t\t\t\tconst newRow = position.row;\n\t\t\t\t\tconst newColumn = this.currentColumn;\n\t\t\t\t\tif (go.execute(this.context('pageDown', { newRow, newColumn }))) {\n\t\t\t\t\t\tthis.model.scroll({ top: position.offset }, { source: 'navigation' });\n\t\t\t\t\t\treturn this.goTo(position.row, this.currentColumn, 'navigation.scroll');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t})\n\t\t};\n\n\t\treturn new Map(Object.entries(commands));\n\t}\n}","import { Command } from '../command/command';\nimport { Navigation } from './navigation';\nimport { GRID_PREFIX } from '../definition';\nimport { Fastdom } from '../services/fastdom';\nimport { Td } from '../dom/td';\nimport { selectColumnIndex, selectRowIndex, selectRow, selectColumn } from './navigation.state.selector';\n\nexport class NavigationLet {\n\tconstructor(plugin, shortcut) {\n\t\tconst { model, table, observeReply } = plugin;\n\t\tthis.plugin = plugin;\n\n\t\tconst navigation = new Navigation(model, table);\n\t\tlet focusBlurs = [];\n\n\t\tshortcut.register(navigation.commands);\n\n\t\tthis.focus = new Command({\n\t\t\tsource: 'navigation.view',\n\t\t\tcanExecute: newCell => {\n\t\t\t\tconst { cell: oldCell } = model.navigation();\n\t\t\t\tif (newCell && newCell.column.canFocus && !Td.equals(newCell, oldCell)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\texecute: e => {\n\t\t\t\tconst { rowIndex, columnIndex, behavior } = e;\n\t\t\t\tconst td = table.body.cell(rowIndex, columnIndex).model();\n\t\t\t\tif (td) {\n\t\t\t\t\tconst { row, column } = td;\n\t\t\t\t\tmodel.navigation({\n\t\t\t\t\t\tcell: {\n\t\t\t\t\t\t\trowIndex,\n\t\t\t\t\t\t\tcolumnIndex,\n\t\t\t\t\t\t\trow,\n\t\t\t\t\t\t\tcolumn\n\t\t\t\t\t\t}\n\t\t\t\t\t}, {\n\t\t\t\t\t\tsource: 'navigation.view',\n\t\t\t\t\t\tbehavior\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tmodel.navigation({\n\t\t\t\t\t\tcell: null\n\t\t\t\t\t}, {\n\t\t\t\t\t\tsource: 'navigation.view',\n\t\t\t\t\t\tbehavior\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.scrollTo = new Command({\n\t\t\tsource: 'navigation.view',\n\t\t\texecute: (row, column) => {\n\t\t\t\tconst cell = table.body.cell(row, column);\n\t\t\t\tthis.scroll(table.view, cell);\n\t\t\t},\n\t\t\tcanExecute: (row, column) => table.body.cell(row, column).model() !== null\n\t\t});\n\n\t\tobserveReply(model.navigationChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('cell')) {\n\t\t\t\t\tif (e.tag.behavior !== 'core') {\n\t\t\t\t\t\t// We need this one to toggle focus from details to main grid\n\t\t\t\t\t\t// or when user change navigation cell through the model\n\t\t\t\t\t\tif (!table.view.isFocused()) {\n\t\t\t\t\t\t\ttable.view.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst rowIndex = selectRowIndex(e.state);\n\t\t\t\t\tconst columnIndex = selectColumnIndex(e.state);\n\n\t\t\t\t\tfocusBlurs = this.invalidateFocus(focusBlurs);\n\t\t\t\t\tif (e.tag.source !== 'navigation.scroll'\n\t\t\t\t\t\t&& e.tag.behavior !== 'core'\n\t\t\t\t\t\t&& this.scrollTo.canExecute(rowIndex, columnIndex)\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.scrollTo.execute(rowIndex, columnIndex);\n\t\t\t\t\t}\n\n\t\t\t\t\tmodel.focus({\n\t\t\t\t\t\trowIndex,\n\t\t\t\t\t\tcolumnIndex\n\t\t\t\t\t}, {\n\t\t\t\t\t\tsource: 'navigation.view'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.focusChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.tag.source === 'navigation.view') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.hasChanges('isActive')) {\n\t\t\t\t\tconst { view } = table;\n\t\t\t\t\tconst activeClassName = `${GRID_PREFIX}-active`;\n\t\t\t\t\tif (e.state.isActive) {\n\t\t\t\t\t\tFastdom.mutate(() => view.addClass(activeClassName));\n\t\t\t\t\t\tview.focus();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tFastdom.mutate(() => view.removeClass(activeClassName));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (e.hasChanges('rowIndex') || e.hasChanges('columnIndex')) {\n\t\t\t\t\tthis.focus.execute(e.state);\n\t\t\t\t}\n\n\t\t\t});\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('status')) {\n\t\t\t\t\tconst { status } = e.state;\n\t\t\t\t\tswitch (status) {\n\t\t\t\t\t\tcase 'stop': {\n\t\t\t\t\t\t\tconst navState = model.navigation();\n\t\t\t\t\t\t\tconst rowIndex = selectRowIndex(navState);\n\t\t\t\t\t\t\tconst columnIndex = selectColumnIndex(navState);\n\n\t\t\t\t\t\t\tif (rowIndex >= 0 && columnIndex >= 0) {\n\t\t\t\t\t\t\t\tlet td = table.body.cell(rowIndex, columnIndex).model();\n\t\t\t\t\t\t\t\tthis.focus.execute({\n\t\t\t\t\t\t\t\t\trowIndex: td ? td.rowIndex : -1,\n\t\t\t\t\t\t\t\t\tcolumnIndex: td ? td.columnIndex : -1,\n\t\t\t\t\t\t\t\t\tbehavior: 'core'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tinvalidateFocus(dispose) {\n\t\tconst { model, table } = this.plugin;\n\n\t\tdispose.forEach(f => f());\n\t\tdispose = [];\n\n\t\tconst rowIndex = selectRowIndex(model.navigation());\n\t\tconst columnIndex = selectColumnIndex(model.navigation());\n\t\tconst cell = table.body.cell(rowIndex, columnIndex);\n\t\tif (cell.model()) {\n\t\t\tconst row = table.body.row(rowIndex);\n\n\t\t\tFastdom.mutate(() => {\n\t\t\t\tcell.addClass(`${GRID_PREFIX}-focused`);\n\t\t\t\trow.addClass(`${GRID_PREFIX}-focused`);\n\t\t\t});\n\n\t\t\tdispose.push(() => Fastdom.mutate(() => {\n\t\t\t\tcell.removeClass(`${GRID_PREFIX}-focused`);\n\t\t\t\trow.removeClass(`${GRID_PREFIX}-focused`);\n\t\t\t}));\n\t\t}\n\n\t\treturn dispose;\n\t}\n\n\tscroll(view, target) {\n\t\tconst { model } = this.plugin;\n\t\tconst { scroll } = model;\n\t\tFastdom.measure(() => {\n\t\t\tconst tr = target.rect();\n\t\t\tconst vr = view.rect('body-mid');\n\t\t\tconst state = {};\n\n\t\t\tif (view.canScrollTo(target, 'left')) {\n\t\t\t\tif (vr.left > tr.left\n\t\t\t\t\t|| vr.left > tr.right\n\t\t\t\t\t|| vr.right < tr.left\n\t\t\t\t\t|| vr.right < tr.right) {\n\n\t\t\t\t\tif (vr.width < tr.width || vr.left > tr.left || vr.left > tr.right) {\n\t\t\t\t\t\tstate.left = tr.left - vr.left + scroll().left;\n\t\t\t\t\t}\n\t\t\t\t\telse if (vr.left < tr.left || vr.right < tr.right) {\n\t\t\t\t\t\tstate.left = tr.right - vr.right + scroll().left;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (view.canScrollTo(target, 'top')) {\n\t\t\t\tif (vr.top > tr.top\n\t\t\t\t\t|| vr.top > tr.bottom\n\t\t\t\t\t|| vr.bottom < tr.top\n\t\t\t\t\t|| vr.bottom < tr.bottom) {\n\n\t\t\t\t\tif (vr.height < tr.height || vr.top > tr.top || vr.top > tr.bottom) {\n\t\t\t\t\t\tstate.top = tr.top - vr.top + scroll().top;\n\t\t\t\t\t}\n\t\t\t\t\telse if (vr.top < tr.top || vr.bottom < tr.bottom) {\n\t\t\t\t\t\tstate.top = tr.bottom - vr.bottom + scroll().top;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Object.keys(state).length) {\n\t\t\t\tscroll(state, { behavior: 'core', source: 'navigation.view' });\n\t\t\t}\n\t\t});\n\t}\n}","import { Command } from '../command/command';\n\nexport class NavigationState {\n\tconstructor() {\n\t\tthis.cell = null;\n\n\t\tthis.shortcut = {\n\t\t\tup: 'up',\n\t\t\tdown: 'down',\n\t\t\tleft: 'left',\n\t\t\tright: 'right',\n\t\t\tnext: 'tab',\n\t\t\tprevious: 'shift+tab',\n\t\t\thome: 'home',\n\t\t\tend: 'end',\n\t\t\tpageUp: 'pageUp',\n\t\t\tpageDown: 'pageDown',\n\t\t\tupward: 'shift+pageUp',\n\t\t\tdownward: 'shift+pageDown'\n\t\t};\n\n\t\tthis.go = new Command({ source: 'navigation.model' });\n\n\t\tthis.prevent = new Set([\n\t\t\t'space',\n\t\t\t'shift+space',\n\t\t\t'up',\n\t\t\t'down',\n\t\t\t'left',\n\t\t\t'right',\n\t\t\t'home',\n\t\t\t'end',\n\t\t\t'pageUp',\n\t\t\t'pageDown',\n\t\t\t'shift+pageDown',\n\t\t\t'shift+pageUp'\n\t\t]);\n\t}\n}\n","\nexport function selectRow(state) {\n\tconst { cell } = state;\n\tif (cell) {\n\t\treturn cell.row;\n\t}\n\n\treturn null;\n}\n\nexport function selectColumn(state) {\n\tconst { cell } = state;\n\tif (cell) {\n\t\treturn cell.column;\n\t}\n\n\treturn null;\n}\n\nexport function selectColumnIndex(state) {\n\tconst { cell } = state;\n\tif (cell) {\n\t\treturn cell.columnIndex;\n\t}\n\n\treturn -1;\n}\n\nexport function selectRowIndex(state) {\n\tconst { cell } = state;\n\tif (cell) {\n\t\treturn cell.rowIndex;\n\t}\n\n\treturn -1;\n}\n\n","import { GridError } from '../infrastructure/error';\nimport { getValueFactory } from '../services/value';\nimport { Node } from './node';\n\nexport function nodeBuilder(columnMap, groupBy, valueFactory, level = 0) {\n\tif (groupBy.length === 0) {\n\t\treturn () => [];\n\t}\n\n\tconst groupKey = groupBy[0];\n\tif (!columnMap.hasOwnProperty(groupKey)) {\n\t\tthrow new GridError('node.build', `can't find column \"${groupKey}\"`);\n\t}\n\n\tconst column = columnMap[groupKey];\n\tconst getValue = getValueFactory(column);\n\treturn (rows, getRowIndex = (i) => i) => {\n\t\tconst keys = [];\n\t\tconst nodes = [];\n\t\tconst groups = {};\n\t\tfor (let i = 0, length = rows.length; i < length; i++) {\n\t\t\tconst row = rows[i];\n\t\t\tconst index = getRowIndex(i);\n\t\t\tconst key = getValue(row);\n\t\t\tif (!groups.hasOwnProperty(key)) {\n\t\t\t\tconst node = new Node(key, level);\n\t\t\t\tnode.source = groupKey;\n\t\t\t\tnode.rows.push(index);\n\t\t\t\tkeys.push(key);\n\t\t\t\tnodes.push(node);\n\t\t\t\tgroups[key] = {\n\t\t\t\t\tnode,\n\t\t\t\t\trows: [row]\n\t\t\t\t};\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst group = groups[key];\n\t\t\t\tgroup.node.rows.push(index);\n\t\t\t\tgroup.rows.push(row);\n\t\t\t\tkeys.push(key);\n\t\t\t}\n\t\t}\n\n\t\tconst nextGroupBy = groupBy.slice(1);\n\t\tif (nextGroupBy.length) {\n\t\t\tconst build = nodeBuilder(columnMap, nextGroupBy, valueFactory, level + 1);\n\t\t\tfor (let i = 0, length = keys.length; i < length; i++) {\n\t\t\t\tconst key = keys[i];\n\t\t\t\tconst group = groups[key];\n\t\t\t\tconst node = group.node;\n\t\t\t\tconst rows = node.rows;\n\t\t\t\tnode.children = build(group.rows, i => rows[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn nodes;\n\t};\n}","export class Node {\n\tconstructor(key, level = 0, type = 'group') {\n\t\tthis.key = key;\n\t\tthis.level = level;\n\t\tthis.rows = [];\n\t\tthis.children = [];\n\t\tthis.type = type;\n\t\tthis.source = null;\n\t\tthis.value = null;\n\t\t\n\t\tthis.state = {\n\t\t\texpand: false\n\t\t};\n\t}\n}","import { GridError } from '../infrastructure/error';\nimport { cloneDeep } from '../utility/kit';\nimport { Node } from './node';\n\nexport function preOrderDFS(nodes, visit, memo = null, parent = null) {\n\tfor (let i = 0, length = nodes.length; i < length; i++) {\n\t\tconst node = nodes[i];\n\t\tconst nodeMemo = visit(node, memo, parent, i);\n\t\tpreOrderDFS(node.children, visit, nodeMemo, node);\n\t}\n\n\treturn memo;\n}\n\nexport function filterNode(node, test, parent = null) {\n\tconst { children } = node;\n\tnode = copy(node);\n\n\tlet result = false;\n\tfor (let i = 0, length = children.length; i < length; i++) {\n\t\tconst child = children[i];\n\t\tresult = filterNode(child, test, node) || result;\n\t}\n\n\tif (parent) {\n\t\tif (result || test(node)) {\n\t\t\tparent.children.push(node);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\treturn node;\n}\n\nexport function findLeaves(node, result = []) {\n\tconst { children } = node;\n\tif (!children.length) {\n\t\tresult.push(node);\n\t\treturn result;\n\t}\n\n\tfor (let i = 0, length = children.length; i < length; i++) {\n\t\tconst child = children[i];\n\t\tfindLeaves(child, result);\n\t}\n\n\treturn result;\n}\n\nexport function findNode(node, test, parent = null, index = -1, path = []) {\n\tif (test(node)) {\n\t\treturn { node, parent, index, path };\n\t}\n\n\tpath = path.slice();\n\tpath.push(node);\n\n\tconst { children } = node;\n\tfor (let i = 0, length = children.length; i < length; i++) {\n\t\tconst child = children[i];\n\t\tconst result = findNode(child, test, node, i, path);\n\t\tif (result) {\n\t\t\treturn result;\n\t\t}\n\t}\n\n\treturn null;\n}\n\nexport function calk(node) {\n\tconst result = new Node(node.key, node.level, node.type);\n\tresult.rows = Array.from(node.rows);\n\tresult.children = Array.from(node.children);\n\tresult.state = cloneDeep(node.state);\n\tresult.source = node.source;\n\tresult.value = node.value;\n\treturn result;\n}\n\nexport function copy(node) {\n\tconst result = new Node(node.key, node.level, node.type);\n\tresult.value = node.value;\n\tresult.source = node.source;\n\tresult.state.expand = node.state.expand;\n\treturn result;\n}\n\nexport function bend(line) {\n\tif (line.length === 0) {\n\t\tthrow new GridError('node.service', 'Line have no nodes');\n\t}\n\n\tconst root = copy(line[0]);\n\tconst parentStack = [root];\n\tfor (let i = 1, length = line.length; i < length; i++) {\n\t\tconst current = line[i];\n\n\t\tlet parent = parentStack[parentStack.length - 1];\n\t\twhile (current.level <= parent.level) {\n\t\t\tparentStack.pop();\n\t\t\tparent = parentStack[parentStack.length - 1];\n\t\t}\n\n\t\tconst child = copy(current);\n\t\tchild.level = parent.level + 1;\n\n\t\tparent.children.push(child);\n\t\tparentStack.push(child);\n\t}\n\n\treturn root;\n}\n","export class PaginationLet {\n\tconstructor(plugin) {\n\t\tthis.model = plugin.model;\n\t\t\n\t\tconst { model, observe } = plugin;\n\t\tconst { resetTriggers } = model.pagination();\n\n\t\tObject.keys(resetTriggers)\n\t\t\t.forEach(name =>\n\t\t\t\tobserve(model[name + 'Changed'])\n\t\t\t\t\t.subscribe(e => {\n\t\t\t\t\t\tif (e.tag.behavior === 'core') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (model.scroll().mode === 'virtual') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst trigger = resetTriggers[name];\n\t\t\t\t\t\tfor (const key of trigger) {\n\t\t\t\t\t\t\tif (e.hasChanges(key)) {\n\t\t\t\t\t\t\t\tmodel.pagination({ current: 0 }, { source: e.tag.source || 'pagination.view' });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t}\n\n\tget current() {\n\t\treturn this.model.pagination().current;\n\t}\n\n\tget size() {\n\t\treturn this.model.pagination().size;\n\t}\n}","import { Resource } from '../resource/resource';\n\nexport class PaginationState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\n\t\tthis.current = 0;\n\t\tthis.size = 50;\n\t\tthis.sizeList = [5, 10, 20, 30, 40, 50];\n\t\tthis.count = 0;\n\t\tthis.mode = 'showPages'; \n\n\t\tthis.resetTriggers = {\n\t\t\t'filter': ['by'],\n\t\t\t'pivot': ['by'],\n\t\t\t'group': ['by']\n\t\t};\n\n\t\tthis.shortcut = {\n\t\t\tprev: 'alt+pageup',\n\t\t\tnext: 'alt+pagedown',\n\t\t};\n\t}\n}\n","export class PathService {\n\tconstructor(bag) {\n\t\tthis.bag = bag;\n\t}\n\n\tcell(path) {\n\t\tfor (let node of path) {\n\t\t\tif (node.nodeName === 'TD' || node.nodeName === 'TH') {\n\t\t\t\tconst model = this.bag.findModel(node);\n\t\t\t\tif (!model) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\treturn model;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\trow(path) {\n\t\tfor (let node of path) {\n\t\t\tif (node.nodeName === 'TR') {\n\t\t\t\tconst model = this.bag.findModel(node);\n\t\t\t\tif (!model) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\treturn model;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}","import { clone } from '../utility/kit';\n\n// TODO: refactor this to the commands\nexport class PersistenceService {\n\tconstructor(model, createDefaultModel) {\n\t\tthis.model = model;\n\t\tthis.createDefaultModel = createDefaultModel;\n\t}\n\n\tsave(settings) {\n\t\tconst gridModel = this.model;\n\t\tsettings = settings || gridModel.persistence().settings;\n\n\t\tconst model = {};\n\t\tfor (const key in settings) {\n\t\t\tconst source = gridModel[key]();\n\t\t\tconst target = {};\n\t\t\tmodel[key] = target;\n\t\t\tfor (const p of settings[key]) {\n\t\t\t\tconst value = source[p];\n\t\t\t\ttarget[p] = clone(value);\n\t\t\t}\n\t\t}\n\n\t\treturn model;\n\t}\n\n\tload(model, settings) {\n\t\tconst gridModel = this.model;\n\t\tsettings = settings || gridModel.persistence().settings;\n\n\t\tfor (const key in settings) {\n\t\t\tconst source = model[key];\n\t\t\tif (source) {\n\t\t\t\tconst target = gridModel[key];\n\t\t\t\ttarget(source, { source: 'persistence.service' });\n\t\t\t}\n\t\t}\n\n\t\treturn model;\n\t}\n\n\treset(settings) {\n\t\tconst defaultModel = this.createDefaultModel();\n\t\tconst gridModel = this.model;\n\t\tsettings = settings || gridModel.persistence().settings;\n\n\t\tconst model = {};\n\t\tfor (let key in settings) {\n\t\t\tmodel[key] = {};\n\t\t\tconst source = defaultModel[key];\n\t\t\tconst target = gridModel[key];\n\t\t\tfor (const p of settings[key]) {\n\t\t\t\tmodel[key][p] = source()[p];\n\t\t\t}\n\t\t\ttarget(model[key], { source: 'persistence.service' });\n\t\t}\n\n\t\treturn model;\n\t}\n}\n","import { PersistenceStorage } from './persistence.storage';\nimport { Command } from '../command/command';\n\nexport class PersistenceState {\n\tconstructor() {\n\t\tthis.id = 'default';\n\t\tthis.defaultGroup = 'My Presets';\n\t\tthis.schedule = 'onDemand'; // onDemand | onStateChange\n\n\t\tthis.load = new Command({ source: 'persistence.model' });\n\t\tthis.remove = new Command({ source: 'persistence.model' });\n\t\tthis.create = new Command({ source: 'persistence.model' });\n\t\tthis.modify = new Command({ source: 'persistence.model' });\n\t\tthis.setDefault = new Command({ source: 'persistence.model' });\n\t\tthis.reset = new Command({ source: 'persistence.model' });\n\n\t\tthis.storage = new PersistenceStorage(localStorage);\n\t\tthis.settings = {\n\t\t\tgroup: ['by'],\n\t\t\tsort: ['by'],\n\t\t\tpivot: ['by'],\n\t\t\tfilter: ['by'],\n\t\t\tqueryBuilder: ['node'],\n\t\t\tpagination: ['current', 'size'],\n\t\t\tlayout: ['columns']\n\t\t};\n\t}\n}\n","function replacer(key, value) {\n\tif (value instanceof Map) {\n\t\treturn {\n\t\t\ttype: 'map',\n\t\t\tvalue: Array.from(value.entries()),\n\t\t};\n\t}\n\n\tif (value instanceof Set) {\n\t\treturn {\n\t\t\ttype: 'set',\n\t\t\tvalue: Array.from(value.values()),\n\t\t};\n\t}\n\n\treturn value;\n}\n\nfunction reviver(key, value) {\n\tif (typeof value === 'object' && value !== null) {\n\t\tif (value.type === 'map') {\n\t\t\treturn new Map(value.value);\n\t\t}\n\n\t\tif (value.type === 'set') {\n\t\t\treturn new Set(value.value);\n\t\t}\n\t}\n\n\treturn value;\n}\n\nexport const serialize = value => JSON.stringify(value, replacer);\nexport const deserialize = value => JSON.parse(value, reviver);\n\nexport class PersistenceStorage {\n\tconstructor(storage) {\n\t\tthis.storage = storage;\n\t}\n\n\tgetItem(key) {\n\t\treturn new Promise(resolve => {\n\t\t\tconst item = deserialize(this.storage.getItem(key));\n\t\t\tresolve(item);\n\t\t});\n\t}\n\n\tsetItem(key, value) {\n\t\treturn new Promise(resolve => {\n\t\t\tconst item = this.storage.setItem(key, serialize(value));\n\t\t\tresolve(item);\n\t\t});\n\t}\n}","export function animationPipe(memo, context, next) {\n\tconst { model } = context;\n\tconst { apply } = model.animation();\n\tlet { length } = apply;\n\tif (length) {\n\t\tconst doNext = () => {\n\t\t\tlength--;\n\t\t\tif (length === 0) {\n\t\t\t\tnext(memo);\n\t\t\t}\n\t\t};\n\n\t\tapply.forEach(animation => {\n\t\t\tanimation(memo, context, doNext);\n\t\t});\n\t} else {\n\t\tnext(memo);\n\t}\n}","import { flattenRows } from '../column/column.matrix';\nimport { Guard } from '../infrastructure/guard';\nimport { Node } from '../node/node';\n\nexport function columnIndexPipe(root, context, next) {\n\tGuard.notNull(root, 'root');\n\n\tconst { model } = context;\n\tconst filteredIndex = filter(model, root);\n\tconst columnRows = flattenRows(filteredIndex);\n\n\tnext({ columns: columnRows, index: root });\n}\n\nfunction filter(model, root) {\n\tconst groupBy = new Set(model.group().by);\n\tconst pivotBy = new Set(model.pivot().by);\n\n\tfunction doFilter(node, newNode) {\n\t\tconst { children } = node;\n\t\tfor (let i = 0, length = children.length; i < length; i++) {\n\t\t\tconst child = children[i];\n\t\t\tconst view = child.key;\n\t\t\tconst { isVisible, key } = view.model;\n\t\t\tif (isVisible && !groupBy.has(key) && !pivotBy.has(key)) {\n\t\t\t\tconst newChild = new Node(child.key, child.level);\n\t\t\t\tnewNode.children.push(newChild);\n\t\t\t\tdoFilter(child, newChild);\n\t\t\t}\n\t\t}\n\n\t\treturn newNode;\n\t}\n\n\treturn doFilter(root, new Node(root.key, root.level));\n}\n","import { generateFactory } from '../column-list/column.list.generate';\nimport { mergeTree, sortIndexFactory } from '../column-list/column.list.sort';\nimport { columnFactory } from '../column/column.factory';\nimport { Guard } from '../infrastructure/guard';\nimport { Node } from '../node/node';\nimport { noop } from '../utility/kit';\nimport { columnIndexPipe } from './column.index.pipe';\n\nexport function columnPipe(memo, context, next) {\n\tGuard.notNull(memo, 'memo');\n\n\tconst { model } = context;\n\tconst { pivot, nodes } = memo;\n\tconst { head } = pivot;\n\n\tconst createColumn = columnFactory(model);\n\tconst root = new Node(createColumn('cohort', { key: '$root' }), 0);\n\n\tconst addDataColumns = dataColumnsFactory(model);\n\tconst addSelectColumn = selectColumnFactory(model);\n\tconst addGroupColumn = groupColumnFactory(model, nodes);\n\tconst addRowExpandColumn = rowExpandColumnFactory(model);\n\tconst addRowIndicatorColumn = rowIndicatorColumnFactory(model);\n\tconst addPivotColumns = pivotColumnsFactory(model);\n\tconst addPadColumn = padColumnFactory(model);\n\n\t/*\n\t * We need to invoke addDataColumns earlier that others because it setups data.columns model property\n\t *\n\t */\n\taddDataColumns(root);\n\n\t/**\n\t * Control columns should be filled in reverse order because they use unshift inside.\n\t */\n\n\t/*\n\t * Add row expand column\n\t */\n\taddRowExpandColumn(root);\n\n\t/*\n\t * Add group column with nodes\n\t *\n\t */\n\taddGroupColumn(root);\n\n\t/*\n\t * Add column with select boxes\n\t * if selection unit is row\n\t *\n\t */\n\taddSelectColumn(root);\n\n\t/*\n\t * Add row indicator column\n\t * if rows can be dragged or resized\n\t *\n\t */\n\taddRowIndicatorColumn(root);\n\n\t/*\n\t * Add column rows for pivoted data\n\t * if pivot is turned on\n\t *\n\t */\n\taddPivotColumns(root, head);\n\n\tconst { columnList } = model;\n\tconst buildIndex = sortIndexFactory(model);\n\tconst tree = mergeTree(root, columnList().index, buildIndex);\n\n\t/*\n\t * Add special column type\n\t * that fills remaining place (width = 100%)\n\t *\n\t */\n\taddPadColumn(tree);\n\n\tcolumnIndexPipe(tree, context, ({ columns, index }) => {\n\t\tmemo.columns = columns;\n\n\t\tcolumnList({\n\t\t\tindex\n\t\t}, {\n\t\t\tbehavior: 'core',\n\t\t\tsource: 'column.pipe'\n\t\t});\n\n\t\tnext(memo);\n\t});\n}\n\nfunction selectColumnFactory(model) {\n\tconst dataColumns = model.columnList().line;\n\tconst selection = model.selection();\n\n\tconst selectColumn = dataColumns.find(item => item.type === 'select');\n\tconst indicatorColumn = dataColumns.find(item => item.type === 'row-indicator');\n\n\tif (!indicatorColumn && selection.unit === 'mix') {\n\t\tconst createColumn = columnFactory(model);\n\t\treturn node => {\n\t\t\tconst indicatorColumn = createColumn('row-indicator');\n\t\t\tindicatorColumn.model.source = 'generation';\n\t\t\tif (indicatorColumn.model.isVisible) {\n\t\t\t\tnode.children.unshift(new Node(indicatorColumn, node.level + 1));\n\t\t\t\treturn indicatorColumn;\n\t\t\t}\n\t\t};\n\t}\n\n\tif (!selectColumn && selection.unit === 'row') {\n\t\tconst createColumn = columnFactory(model);\n\t\treturn node => {\n\t\t\tconst selectColumn = createColumn('select');\n\t\t\tselectColumn.model.key = `$select-${model.selection().mode}`;\n\t\t\tselectColumn.model.source = 'generation';\n\t\t\tif (selectColumn.model.isVisible) {\n\t\t\t\tnode.children.unshift(new Node(selectColumn, node.level + 1));\n\t\t\t\treturn selectColumn;\n\t\t\t}\n\t\t};\n\t}\n\n\treturn noop;\n}\n\nfunction groupColumnFactory(model, nodes) {\n\tconst dataColumns = model.columnList().line;\n\tconst groupColumn = dataColumns.find(item => item.type === 'group');\n\tconst { by, mode } = model.group();\n\tconst createColumn = columnFactory(model);\n\n\tif (!groupColumn && (nodes.length || by.length)) {\n\t\tswitch (mode) {\n\t\t\tcase 'nest': {\n\t\t\t\treturn node => {\n\t\t\t\t\tconst groupColumn = createColumn('group');\n\t\t\t\t\tgroupColumn.model.source = 'generation';\n\t\t\t\t\tif (groupColumn.model.isVisible) {\n\t\t\t\t\t\tnode.children.unshift(new Node(groupColumn, node.level + 1));\n\t\t\t\t\t\treturn groupColumn;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase 'rowspan':\n\t\t\tcase 'flat': {\n\t\t\t\treturn node => {\n\t\t\t\t\tconst nodes = by\n\t\t\t\t\t\t.map(key => {\n\t\t\t\t\t\t\tconst groupColumn = createColumn('group');\n\t\t\t\t\t\t\tgroupColumn.model.source = 'generation';\n\t\t\t\t\t\t\tgroupColumn.model.key = `$group-${key}`;\n\t\t\t\t\t\t\tgroupColumn.model.title = key;\n\t\t\t\t\t\t\tgroupColumn.model.by = key;\n\t\t\t\t\t\t\treturn new Node(groupColumn, node.level + 1);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.filter(n => n.key.model.isVisible);\n\n\t\t\t\t\tnode.children.splice(0, 0, ...nodes);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn noop;\n}\n\nfunction rowExpandColumnFactory(model) {\n\tconst dataColumns = model.columnList().line;\n\tconst expandColumn = dataColumns.find(item => item.type === 'row-expand');\n\tif (model.row().unit === 'details' && !expandColumn) {\n\t\tconst createColumn = columnFactory(model);\n\t\treturn node => {\n\t\t\tconst expandColumn = createColumn('row-expand');\n\t\t\texpandColumn.model.source = 'generation';\n\t\t\tif (expandColumn.model.isVisible) {\n\t\t\t\tnode.children.unshift(new Node(expandColumn, node.level + 1));\n\t\t\t\treturn expandColumn;\n\t\t\t}\n\t\t};\n\t}\n\n\treturn noop;\n}\n\nfunction rowIndicatorColumnFactory(model) {\n\tconst dataColumns = model.columnList().line;\n\tconst rowIndicatorColumn = dataColumns.find(item => item.type === 'row-indicator');\n\tconst { canMove, canResize } = model.row();\n\tif ((canMove || canResize) && !rowIndicatorColumn) {\n\t\tconst createColumn = columnFactory(model);\n\t\treturn node => {\n\t\t\tconst expandColumn = createColumn('row-indicator');\n\t\t\texpandColumn.model.source = 'generation';\n\t\t\tif (expandColumn.model.isVisible) {\n\t\t\t\tnode.children.unshift(new Node(expandColumn, node.level + 1));\n\t\t\t\treturn expandColumn;\n\t\t\t}\n\t\t};\n\t}\n\n\treturn noop;\n}\n\nfunction dataColumnsFactory(model) {\n\tconst getColumns = generateFactory(model);\n\tconst createColumn = columnFactory(model);\n\tconst { hasChanges, columns } = getColumns();\n\tif (hasChanges) {\n\t\tmodel.data({ columns }, { source: 'column.pipe', behavior: 'core' });\n\t}\n\n\tfunction fill(node, columns) {\n\t\tfor (let column of columns) {\n\t\t\tconst view = createColumn(column.type, column);\n\t\t\tconst child = new Node(view, node.level + 1);\n\t\t\tnode.children.push(child);\n\t\t\tfill(child, view.model.children);\n\t\t}\n\t}\n\n\treturn node => fill(node, columns);\n}\n\nfunction padColumnFactory(model) {\n\tconst createColumn = columnFactory(model);\n\treturn node => {\n\t\tconst padColumn = createColumn('pad');\n\t\tpadColumn.model.key = '$pad';\n\n\t\tconst index = node.children.findIndex(n => n.key.model.pin === 'right');\n\t\tconst padNode = new Node(padColumn, node.level + 1);\n\t\tif (index >= 0) {\n\t\t\tnode.children.splice(index, 0, padNode);\n\t\t} else {\n\t\t\tnode.children.push(padNode);\n\t\t}\n\n\t\treturn padColumn;\n\t};\n}\n\nfunction pivotColumnsFactory(model) {\n\tconst createColumn = columnFactory(model);\n\treturn function fill(node, head) {\n\t\tconst { children } = head;\n\t\tfor (let i = 0, length = children.length; i < length; i++) {\n\t\t\tconst child = children[i];\n\t\t\tconst pivotColumn = createColumn('pivot');\n\t\t\tconst pivotColumnModel = pivotColumn.model;\n\t\t\tpivotColumnModel.title = child.key;\n\t\t\tpivotColumnModel.key = `$pivot-${child.key}`;\n\t\t\tconst pivotNode = new Node(pivotColumn, node.level + 1);\n\t\t\tnode.children.push(pivotNode);\n\t\t\tfill(pivotNode, child);\n\t\t}\n\t};\n}\n","import { columnFactory } from '../column/column.factory';\nimport { generateFactory } from '../column-list/column.list.generate';\n\nexport function dataPipe(rows, context, next) {\n\tconst { model } = context;\n\n\taddDataRows(model, rows);\n\taddDataColumns(model);\n\n\tmodel.pipe({\n\t\teffect: Object.assign({}, model.pipe().effect, { data: rows })\n\t}, {\n\t\tsource: 'data.pipe',\n\t\tbehavior: 'core'\n\t});\n\t\n\tnext(rows);\n}\n\nfunction addDataRows(model, rows) {\n\tconst tag = {\n\t\tsource: 'data.pipe',\n\t\tbehavior: 'core'\n\t};\n\n\tmodel.data({ rows }, tag);\n}\n\nfunction addDataColumns(model) {\n\tconst getColumns = generateFactory(model);\n\tconst createColumn = columnFactory(model);\n\tconst { hasChanges, columns } = getColumns();\n\n\tconst allColumns = columns\n\t\t.map(columnBody => createColumn(columnBody.type, columnBody).model);\n\n\tif (hasChanges) {\n\t\tconst tag = {\n\t\t\tsource: 'data.pipe',\n\t\t\tbehavior: 'core'\n\t\t};\n\n\t\tmodel.data({ columns: allColumns }, tag);\n\t}\n}\n\n","import { Guard } from '../infrastructure/guard';\nimport { yes } from '../utility/kit';\n\nexport function filterPipe(rows, context, next) {\n\tGuard.notNull(rows, 'rows');\n\n\tconst { model } = context;\n\n\tlet result = rows;\n\tif (rows.length) {\n\t\tconst { match, custom } = model.filter();\n\t\tconst matchPredicate = match(context);\n\n\t\tlet test;\n\t\tif (matchPredicate !== yes && custom !== yes) {\n\t\t\ttest = (row) => matchPredicate(row) && custom(row);\n\t\t} else if (matchPredicate !== yes) {\n\t\t\ttest = (row) => matchPredicate(row);\n\t\t} else if (custom !== yes) {\n\t\t\ttest = (row) => custom(row);\n\t\t}\n\n\t\tif (test) {\n\t\t\tresult = [];\n\t\t\tfor (let i = 0, length = rows.length; i < length; i++) {\n\t\t\t\tconst row = rows[i];\n\t\t\t\tif (test(row)) {\n\t\t\t\t\tresult.push(row);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tmodel.pipe({\n\t\teffect: Object.assign({}, model.pipe().effect, { filter: result })\n\t}, {\n\t\tsource: 'filter.pipe',\n\t\tbehavior: 'core'\n\t});\n\n\tnext(result);\n}","import { mapColumns } from '../column/column.service';\nimport { Guard } from '../infrastructure/guard';\nimport { nodeBuilder } from '../node/node.build';\n\nexport function groupPipe(memo, context, next) {\n\tGuard.notNull(memo, 'memo');\n\n\tconst { model } = context;\n\tconst { rows: memoRows, nodes: memoNodes } = memo;\n\tif (memoRows.length) {\n\t\tconst { rows } = model.data();\n\t\tconst { by } = model.group();\n\t\tconst columns = model.columnList().line;\n\t\tconst columnMap = mapColumns(columns);\n\t\tconst build = nodeBuilder(columnMap, by, context.valueFactory);\n\n\t\tmemo.nodes = build(memoRows, i => {\n\t\t\tconst row = memoRows[i];\n\t\t\tconst index = rows.indexOf(row);\n\t\t\treturn index < 0 ? i : index;\n\t\t});\n\t}\n\n\tmodel.pipe({\n\t\teffect: Object.assign({}, model.pipe().effect, { group: memoNodes })\n\t}, {\n\t\tsource: 'group.pipe',\n\t\tbehavior: 'core'\n\t});\n\n\tnext(memo);\n}","import { Guard } from '../infrastructure/guard';\nimport { Node } from '../node/node';\n\nexport function memoPipe(rows, context, next) {\n\tGuard.notNull(rows, 'rows');\n\n\tconst { model } = context;\n\n\tmodel.pipe({\n\t\teffect: Object.assign({}, model.pipe().effect, { memo: rows })\n\t}, {\n\t\t\tsource: 'memo.pipe',\n\t\t\tbehavior: 'core'\n\t\t});\n\n\tnext({\n\t\trows,\n\t\tpivot: { head: new Node('$root', 0), rows: [] },\n\t\tnodes: []\n\t});\n}","import { Guard } from '../infrastructure/guard';\n\nexport function paginationPipe(memo, context, next) {\n\tGuard.notNull(memo, 'memo');\n\n\tconst { model } = context;\n\n\tif (memo.hasOwnProperty('nodes') && memo.nodes.length) {\n\t\tconst { flattenFactory } = model.group();\n\n\t\tconst page = paginate(model, memo.nodes);\n\t\tconst flatten = flattenFactory(model);\n\n\t\tmemo.rows = flatten(page);\n\t\tnext(memo);\n\t\treturn;\n\t}\n\n\tif (memo.hasOwnProperty('rows')) {\n\t\tconst page = paginate(model, memo.rows);\n\t\tmemo.rows = page;\n\t\tnext(memo);\n\t\treturn;\n\t}\n\n\tconst rows = paginate(model, memo);\n\tnext(rows);\n}\n\nfunction paginate(model, rows) {\n\tconst { pinTop, pinBottom } = model.row();\n\tconst { mode } = model.scroll();\n\tlet { size, current } = model.pagination();\n\n\tconst pinned = new Set([...pinTop, ...pinBottom]);\n\tif (pinned.size) {\n\t\trows = rows.filter(row => !pinned.has(row))\n\t}\n\n\tconst count = rows.length;\n\tconst last = Math.max(0, Math.floor((count - 1) / size));\n\tcurrent = Math.min(last, current);\n\tconst start = current * size;\n\n\tmodel.pagination({ count, current }, { source: 'pagination.pipe', behavior: 'core' });\n\treturn mode === 'virtual' ? rows : rows.slice(start, start + size);\n}\n\n","import { getLabelFactory } from '../services/label';\nimport { Middleware } from '../services/middleware';\nimport { getValueFactory } from '../services/value';\n\nexport function buildFromModel(model) {\n\treturn function run(source, changes, pipe) {\n\t\tconst middleware = new Middleware(pipe);\n\t\tconst context = {\n\t\t\tmodel,\n\t\t\tsource,\n\t\t\tchanges,\n\t\t\tvalueFactory: getValueFactory,\n\t\t\tlabelFactory: getLabelFactory\n\t\t};\n\n\t\tconst { rows } = model.data();\n\t\treturn middleware.run(context, rows);\n\t};\n}","import { dataPipe } from './data.pipe';\nimport { filterPipe } from './filter.pipe';\nimport { paginationPipe } from './pagination.pipe';\nimport { sortPipe } from './sort.pipe';\nimport { memoPipe } from './memo.pipe';\nimport { groupPipe } from './group.pipe';\nimport { pivotPipe } from './pivot.pipe';\nimport { columnPipe } from './column.pipe';\nimport { columnIndexPipe } from './column.index.pipe'\nimport { animationPipe } from './animation.pipe';\nimport { viewPipe } from './view.pipe';\nimport { scenePipe } from './scene.pipe';\n\nexport class Pipe {\n\tstatic get data() {\n\t\treturn dataPipe;\n\t}\n\n\tstatic get filter() {\n\t\treturn filterPipe;\n\t}\n\n\tstatic get pagination() {\n\t\treturn paginationPipe;\n\t}\n\n\tstatic get sort() {\n\t\treturn sortPipe;\n\t}\n\n\tstatic get memo() {\n\t\treturn memoPipe;\n\t}\n\n\tstatic get group() {\n\t\treturn groupPipe;\n\t}\n\n\tstatic get pivot() {\n\t\treturn pivotPipe;\n\t}\n\n\tstatic get column() {\n\t\treturn columnPipe;\n\t}\n\n\tstatic get columnIndex() {\n\t\treturn columnIndexPipe;\n\t}\n\n\tstatic get animation() {\n\t\treturn animationPipe;\n\t}\n\n\tstatic get view() {\n\t\treturn viewPipe;\n\t}\n\n\tstatic get scene() {\n\t\treturn scenePipe;\n\t}\n}","import { PipeUnit as PU } from '../pipe/pipe.unit';\nimport { uniq } from '../utility/kit';\n\nexport class PipeState {\n\tconstructor() {\n\t\tthis.reduce = (units, model) => {\n\t\t\tconst dataPipe = model.data().pipe;\n\t\t\t// Change one of default pipes to data pipes - cause default literaly means data\n\t\t\t// we can change only one because all other will be moved out during reduce\n\t\t\tconst index = units.indexOf(PU.default);\n\t\t\tif (index >= 0) {\n\t\t\t\tunits[index] = dataPipe;\n\t\t\t}\n\n\t\t\tunits = uniq(units);\n\t\t\tconst set = new Set(units);\n\n\t\t\tconst schema = new Map([\n\t\t\t\t[PU.default, dataPipe],\n\t\t\t\t[PU.view, PU.default],\n\t\t\t\t[PU.column, PU.view]\n\t\t\t]);\n\n\t\t\tconst shouldKeep = unit => {\n\t\t\t\tlet next;\n\t\t\t\twhile ((next = schema.get(unit))) {\n\t\t\t\t\tif (next === unit) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (set.has(next)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tunit = next;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\treturn units.reduce((memo, unit) => {\n\t\t\t\tif (shouldKeep(unit)) {\n\t\t\t\t\tmemo.push(unit);\n\t\t\t\t}\n\n\t\t\t\treturn memo;\n\t\t\t}, []);\n\t\t};\n\n\t\tthis.triggers = {\n\t\t\t'data': {\n\t\t\t\t'rows': PU.default,\n\t\t\t\t'columns': PU.column\n\t\t\t},\n\t\t\t'pagination': {\n\t\t\t\t'current': PU.default,\n\t\t\t\t'size': PU.default\n\t\t\t},\n\t\t\t'fetch': {\n\t\t\t\t'skip': PU.default\n\t\t\t},\n\t\t\t'sort': {\n\t\t\t\t'by': PU.default\n\t\t\t},\n\t\t\t'filter': {\n\t\t\t\t'by': PU.default,\n\t\t\t\t'match': PU.default,\n\t\t\t\t'custom': PU.default,\n\t\t\t\t'unit': PU.column,\n\t\t\t},\n\t\t\t'group': {\n\t\t\t\t'by': PU.default\n\t\t\t},\n\t\t\t'pivot': {\n\t\t\t\t'by': PU.default\n\t\t\t},\n\t\t\t'columnList': {\n\t\t\t\t'index': PU.columnIndex\n\t\t\t},\n\t\t\t'row': {\n\t\t\t\t'status': PU.rowDetails,\n\t\t\t\t'unit': PU.rowDetails,\n\t\t\t\t'canMove': PU.column,\n\t\t\t\t'canResize': PU.column\n\t\t\t},\n\t\t\t'rowList': {\n\t\t\t\t'index': PU.row\n\t\t\t},\n\t\t\t'animation': {\n\t\t\t\t'rows': PU.default\n\t\t\t}\n\t\t};\n\n\t\tthis.effect = {};\n\t}\n}\n","import { columnPipeUnit } from './units/column.pipe.unit';\nimport { columnIndexPipeUnit } from './units/column.index.pipe.unit';\nimport { defaultPipeUnit } from './units/default.pipe.unit';\nimport { groupPipeUnit } from './units/group.pipe.unit';\nimport { rowDetailsPipeUnit } from './units/row.details.pipe.unit';\nimport { viewPipeUnit } from './units/view.pipe.unit';\nimport { scenePipeUnit } from './units/scene.pipe.unit';\nimport { rowPipeUnit } from './units/row.pipe.unit';\n\nexport class PipeUnit {\n\tstatic get default() {\n\t\treturn defaultPipeUnit;\n\t}\n\n\tstatic get view() {\n\t\treturn viewPipeUnit;\n\t}\n\n\tstatic get scene() {\n\t\treturn scenePipeUnit;\n\t}\n\n\tstatic get column() {\n\t\treturn columnPipeUnit;\n\t}\n\n\tstatic get columnIndex() {\n\t\treturn columnIndexPipeUnit;\n\t}\n\n\tstatic get rowDetails() {\n\t\treturn rowDetailsPipeUnit;\n\t}\n\n\tstatic get group() {\n\t\treturn groupPipeUnit;\n\t}\n\n\tstatic get row() {\n\t\treturn rowPipeUnit;\n\t}\n}","import { mapColumns } from '../column/column.service';\nimport { Guard } from '../infrastructure/guard';\nimport { buildPivot } from '../pivot/pivot.build';\n\nexport function pivotPipe(memo, context, next) {\n\tGuard.notNull(memo, 'memo');\n\n\tconst { model } = context;\n\tif (memo.rows.length) {\n\t\tconst { valueFactory } = context;\n\t\tconst { line } = model.columnList();\n\t\tconst { by } = model.pivot();\n\n\t\tconst build = buildPivot(mapColumns(line), by, valueFactory);\n\t\tmemo.pivot = build(memo.rows, by);\n\t}\n\n\tmodel.pipe({\n\t\teffect: Object.assign({}, model.pipe().effect, { pivot: memo.pivot })\n\t}, {\n\t\tsource: 'pivot.pipe',\n\t\tbehavior: 'core'\n\t});\n\n\tnext(memo);\n}","import { Scene } from '../scene/scene';\nimport { Guard } from '../infrastructure/guard';\nimport { sortFactory } from '../row-list/row.list.sort';\n\nexport function scenePipe(memo, context, next) {\n\tGuard.notNull(memo, 'memo');\n\n\tconst tag = {\n\t\tsource: context.source || 'scene.pipe',\n\t\tbehavior: 'core'\n\t};\n\n\tconst { model } = context;\n\n\tconst scene = new Scene(model);\n\tlet rows = scene.rows(memo);\n\n\tconst { columns } = memo;\n\tconst columnLine = scene.columnLine(columns);\n\n\tif (!model.sort().by.length) {\n\t\tconst order = sortFactory(model);\n\t\trows = order(rows);\n\t}\n\n\tmodel.scene({\n\t\trows,\n\t\tcolumn: {\n\t\t\trows: scene.columnRows(memo.columns),\n\t\t\tarea: scene.columnArea(memo.columns),\n\t\t\tline: columnLine\n\t\t}\n\t}, tag);\n\n\tnext(memo);\n}","import { findColumn } from '../column/column.service';\nimport { GridError } from '../infrastructure/error';\nimport { Guard } from '../infrastructure/guard';\nimport { parseFactory } from '../services/convert';\nimport { getDirection, getKey } from '../sort/sort.service';\nimport { orderBy } from '../utility/kit';\n\nexport function sortPipe(rows, context, next) {\n\tGuard.notNull(rows, 'rows');\n\n\tconst { model } = context;\n\n\tlet result = rows;\n\tif (rows.length) {\n\t\tconst { by } = model.sort();\n\t\tif (by.length) {\n\t\t\tconst columns = model.columnList().line;\n\t\t\tconst mappings = [];\n\t\t\tconst comparers = [];\n\n\t\t\tfor (let i = 0, length = by.length; i < length; i++) {\n\t\t\t\tconst sortEntry = by[i];\n\t\t\t\tconst sortKey = getKey(sortEntry);\n\t\t\t\tconst sortDir = getDirection(sortEntry);\n\t\t\t\tconst sortColumn = findColumn(columns, sortKey);\n\t\t\t\tif (!sortColumn) {\n\t\t\t\t\tthrow new GridError('sort.pipe', `Column \"${sortKey}\" is not found`);\n\t\t\t\t}\n\n\t\t\t\tconst getValue = context.valueFactory(sortColumn);\n\t\t\t\tconst parseValue = parseFactory(sortColumn.type, sortColumn.editor);\n\t\t\t\tconst compare = sortColumn.compare;\n\n\t\t\t\tmappings.push(row => {\n\t\t\t\t\tconst value = getValue(row);\n\t\t\t\t\tconst result = parseValue(value);\n\t\t\t\t\treturn result === null ? value : result;\n\t\t\t\t});\n\n\t\t\t\tcomparers.push(sortDir === 'asc' ? compare : (x, y) => -compare(x, y));\n\t\t\t}\n\n\t\t\tresult = orderBy(rows, mappings, comparers);\n\t\t}\n\t}\n\n\tmodel.pipe({\n\t\teffect: Object.assign({}, model.pipe().effect, { sort: result })\n\t}, {\n\t\tsource: 'sort.pipe',\n\t\tbehavior: 'core'\n\t});\n\n\tnext(result);\n}\n\n","import { Pipe } from '../pipe';\nimport { Scene } from '../../scene/scene';\n\nexport const columnIndexPipeUnit = [\n\t(_, context, next) => {\n\t\tconst { index } = context.model.columnList();\n\t\tnext(index);\n\t},\n\tPipe.columnIndex,\n\tPipe.animation,\n\t(memo, context, next) => {\n\t\tconst { model } = context;\n\t\tconst scene = new Scene(model);\n\t\tconst columnLine = scene.columnLine(memo.columns);\n\t\tconst tag = {\n\t\t\tsource: context.source || 'column.pipe.unit',\n\t\t\tbehavior: 'core'\n\t\t};\n\n\t\tmodel.view({\n\t\t\tcolumns: columnLine.map(c => c.model)\n\t\t}, tag);\n\n\t\tmodel.scene({\n\t\t\tcolumn: {\n\t\t\t\trows: scene.columnRows(memo.columns),\n\t\t\t\tarea: scene.columnArea(memo.columns),\n\t\t\t\tline: columnLine\n\t\t\t}\n\t\t}, tag);\n\n\t\tnext(memo);\n\t}\n];\n\ncolumnIndexPipeUnit.why = 'redraw';","import { Pipe } from '../pipe';\nimport { Scene } from '../../scene/scene';\nimport { Guard } from '../../infrastructure/guard';\n\nexport const columnPipeUnit = [\n\t(_, context, next) => {\n\t\tconst { view } = context.model;\n\t\tconst { rows, pivot, nodes } = view();\n\t\tnext({ rows, pivot, nodes });\n\t},\n\tPipe.column,\n\t(memo, context, next) => {\n\t\tconst { model } = context;\n\t\tconst scene = new Scene(model);\n\t\tconst columnLine = scene.columnLine(memo.columns);\n\t\tconst tag = {\n\t\t\tsource: context.source || 'column.pipe.unit',\n\t\t\tbehavior: 'core'\n\t\t};\n\n\t\tmodel.view({\n\t\t\tcolumns: columnLine.map(c => c.model)\n\t\t}, tag);\n\n\t\tcontext.model.scene({\n\t\t\tcolumn: {\n\t\t\t\trows: scene.columnRows(memo.columns),\n\t\t\t\tarea: scene.columnArea(memo.columns),\n\t\t\t\tline: columnLine\n\t\t\t}\n\t\t}, tag);\n\n\t\tnext(memo);\n\t}\n];\n\ncolumnPipeUnit.why = 'redraw';","import { Pipe } from '../pipe';\n\nexport const defaultPipeUnit = [\n\tPipe.data,\n\tPipe.filter,\n\tPipe.sort,\n\tPipe.memo,\n\tPipe.group,\n\tPipe.pivot,\n\tPipe.column,\n\tPipe.view,\n\tPipe.pagination,\n\tPipe.animation,\n\tPipe.scene\n];\n\ndefaultPipeUnit.why = 'refresh';","import { Pipe } from '../pipe';\n\nexport const groupPipeUnit = [\n\t(_, context, next) => {\n\t\tconst { model } = context;\n\t\tconst { nodes, rows } = model.view();\n\t\tnext({ nodes, rows });\n\t},\n\tPipe.pagination,\n\t(memo, context, next) => {\n\t\tconst { model } = context;\n\t\tconst tag = {\n\t\t\tsource: context.source || 'group.pipe.unit',\n\t\t\tbehavior: 'core'\n\t\t};\n\n\t\tconst { rows } = memo;\t\t\n\t\tmodel.scene({ rows }, tag);\n\n\t\tnext(memo);\n\t}\n];\n\ngroupPipeUnit.why = 'redraw';","import { flatView } from '../../row-details/row.details.service';\n\nexport const rowDetailsPipeUnit = [\n\t(_, context, next) => {\n\t\tconst tag = {\n\t\t\tsource: context.source || 'row.details.pipe.unit',\n\t\t\tbehavior: 'core'\n\t\t};\n\n\t\tconst { model } = context;\n\t\tconst { mode } = model.row();\n\t\tconst rows = flatView(model, mode);\n\t\tmodel.view({ rows }, tag);\n\t\tmodel.scene({ rows }, tag);\n\n\t\tnext(rows);\n\t}\n];\n\nrowDetailsPipeUnit.why = 'redraw';","import { sortFactory } from '../../row-list/row.list.sort';\nimport { Pipe } from '../pipe';\n\nexport const rowPipeUnit = [\n\t(_, context, next) => {\n\t\tconst { model } = context;\n\t\tconst { rows, pivot, nodes } = model.view();\n\t\tconst order = sortFactory(model);\n\t\tconst memo = {\n\t\t\trows: order(rows),\n\t\t\tpivot,\n\t\t\tnodes,\n\t\t};\n\n\t\tnext(memo);\n\t},\n\tPipe.animation,\n\t(memo, context, next) => {\n\t\tconst { model } = context;\n\t\tconst { rows } = memo;\n\n\t\tconst tag = {\n\t\t\tsource: context.source || 'row.pipe.unit',\n\t\t\tbehavior: 'core'\n\t\t};\n\n\t\tmodel.view({ rows }, tag);\n\t\tmodel.scene({ rows }, tag);\n\n\t\tnext(rows);\n\t}\n];\n\nrowPipeUnit.why = 'redraw';","import { Pipe } from '../pipe';\n\nexport const scenePipeUnit = [\n\tPipe.data,\n\tPipe.memo,\n\tPipe.column,\n\tPipe.view,\n\tPipe.pagination,\n\tPipe.animation,\n\tPipe.scene\n];\n\nscenePipeUnit.why = 'redraw';","import { Pipe } from '../pipe';\n\nexport const viewPipeUnit = [\n\tPipe.data,\n\tPipe.memo,\n\tPipe.column,\n\tPipe.view,\n\tPipe.scene\n];\n\nviewPipeUnit.why = 'refresh';","import { Scene } from '../scene/scene';\nimport { Guard } from '../infrastructure/guard';\nimport { sortFactory } from '../row-list/row.list.sort';\n\nexport function viewPipe(memo, context, next) {\n\tGuard.notNull(memo, 'memo');\n\n\tconst tag = {\n\t\tsource: context.source || 'view.pipe',\n\t\tbehavior: 'core'\n\t};\n\n\tconst { model } = context;\n\n\tconst scene = new Scene(model);\n\tlet rows = scene.rows(memo);\n\n\tconst { columns, nodes, pivot } = memo;\n\tconst columnLine = scene.columnLine(columns);\n\n\tif (!model.sort().by.length) {\n\t\tconst order = sortFactory(model);\n\t\trows = order(rows);\n\t}\n\n\tmodel.view({\n\t\trows,\n\t\tcolumns: columnLine.map(c => c.model),\n\t\tnodes,\n\t\tpivot\n\t}, tag);\n\n\tnext(memo);\n}","import { GridError } from '../infrastructure/error';\nimport { Node } from '../node/node';\nimport { identity } from '../utility/kit';\nimport { pivot } from './pivot';\nimport { pivotForm } from './pivot.form';\n\nfunction buildFactory(columnMap, valueFactory) {\n\treturn function run(pivot, pivotBy, level = 0) {\n\t\tconst key = pivotBy[0];\n\t\tconst column = columnMap[key];\n\t\tif(!column) {\n\t\t\tthrow new GridError(\n\t\t\t\t'pivot.build',\n\t\t\t\t`Invalid key \"${key}\"`);\n\t\t}\n\t\t\n\t\tconst getValue = valueFactory(column);\n\n\t\treturn pivot({\n\t\t\tfactory: () => ({}),\n\t\t\tselector: row => [getValue(row)],\n\t\t\tname: identity,\n\t\t\tvalue: (parent, row, pivot) => {\n\t\t\t\tconst nextPivotBy = pivotBy.slice(1);\n\t\t\t\tif (nextPivotBy.length) {\n\t\t\t\t\treturn run(\n\t\t\t\t\t\tpivot,\n\t\t\t\t\t\tnextPivotBy,\n\t\t\t\t\t\tlevel + 1)(row);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t};\n}\n\nexport function buildPivot(columnMap, pivotBy, valueFactory) {\n\tlet doPivot = null;\n\tif (pivotBy.length) {\n\t\tconst doBuild = buildFactory(columnMap, valueFactory);\n\t\tdoPivot = doBuild(pivot, pivotBy);\n\t}\n\n\treturn rows => {\n\t\tif (doPivot) {\n\t\t\tconst data = doPivot(rows);\n\t\t\treturn pivotForm(data);\n\t\t}\n\n\t\treturn { head: new Node('$root', 0), rows: [] };\n\t};\n}","import { flatten } from '../utility/kit';\nimport { Node } from '../node/node';\n\nfunction injectData(schema, source, target) {\n\treturn Object\n\t\t.keys(source)\n\t\t.filter(key => !schema.hasOwnProperty(key))\n\t\t.reduce((memo, key) => {\n\t\t\tmemo[key] = source[key];\n\t\t\treturn memo;\n\t\t}, target);\n}\n\nfunction expandData(schema, source) {\n\tconst baseline =\n\t\tObject.keys(schema)\n\t\t\t.map(key => {\n\t\t\t\tconst node = schema[key];\n\t\t\t\treturn source && source.hasOwnProperty(key)\n\t\t\t\t\t? expandData(node, source[key])\n\t\t\t\t\t: expandData(node);\n\t\t\t});\n\n\treturn baseline.length\n\t\t? flatten(baseline, true)\n\t\t: [source];\n}\n\nfunction liftSchema(schema) {\n\tconst baseline = [];\n\n\tfunction lift(schema, depth) {\n\t\tconst derivatives =\n\t\t\tschema\n\t\t\t\t? Object.keys(schema)\n\t\t\t\t\t.map(key => {\n\t\t\t\t\t\tconst node = schema[key];\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tkey: key,\n\t\t\t\t\t\t\tvalue: lift(node, depth + 1)\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t: [];\n\n\t\tif (derivatives.length > 0)\n\t\t\tif (!baseline[depth]) {\n\t\t\t\tbaseline[depth] = derivatives;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tbaseline[depth].push(...derivatives);\n\t\t\t}\n\n\t\treturn (derivatives.length && derivatives.reduce((memo, d) => memo + d.value, 0)) || 1;\n\t}\n\n\tlift(schema, 0);\n\treturn baseline;\n}\n\nfunction sortSchema(schema, comparator) {\n\treturn Object\n\t\t.keys(schema)\n\t\t.sort(comparator)\n\t\t.reduce((memo, key) => {\n\t\t\tmemo[key] = sortSchema(schema[key], comparator);\n\t\t\treturn memo;\n\t\t}, {});\n}\n\n\nfunction reduceSchema(schema) {\n\tconst baseline = [];\n\n\tfunction lift(schema, node) {\n\t\tif (schema) {\n\t\t\tObject\n\t\t\t\t.keys(schema)\n\t\t\t\t.forEach(key => {\n\t\t\t\t\tconst child = new Node(key, node.level + 1);\n\t\t\t\t\tnode.children.push(child);\n\t\t\t\t\tlift(schema[key], child);\n\t\t\t\t\treturn child;\n\t\t\t\t})\n\t\t}\n\n\t\treturn node;\n\t}\n\n\treturn lift(schema, new Node('$root', 0));\n}\n\nexport function pivotForm(source, comparator) {\n\tif (source.schema && source.data) {\n\t\tconst schema = sortSchema(source.schema, comparator);\n\t\tconst rows = source.data.map(row => injectData(schema, row, expandData(schema, row)));\n\t\tconst head = reduceSchema(schema);\n\t\treturn { head, rows };\n\t}\n\n\treturn { head: new Node('$root', 0), rows: [] };\n}","class Plan {\n\tconstructor(schema) {\n\t\tthis.isRoot = !arguments.length;\n\t\tthis.current = this.schema = schema || {};\n\t}\n\n\tbranch() {\n\t\treturn new Plan(this.current);\n\t}\n\n\tcursor(name) {\n\t\tconst schema = this.schema;\n\t\tthis.current =\n\t\t\tschema.hasOwnProperty(name)\n\t\t\t\t? schema[name]\n\t\t\t\t: schema[name] = {};\n\t}\n\n\tcompile(data) {\n\t\tif (this.isRoot) {\n\t\t\treturn {\n\t\t\t\tschema: this.schema,\n\t\t\t\tdata: data\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\treturn data;\n\t\t}\n\t}\n}\n\nfunction factory(plan) {\n\treturn name => {\n\t\tplan.cursor(name);\n\t\treturn settings => {\n\t\t\treturn pivot(settings, plan.branch());\n\t\t};\n\t};\n}\n\nexport function pivot(settings, plan) {\n\tplan = plan || new Plan();\n\n\tconst pivot = factory(plan);\n\tconst aggregate = row => {\n\t\treturn settings\n\t\t\t.selector(row)\n\t\t\t.reduce((memo, selection) => {\n\t\t\t\tconst name = settings.name(selection);\n\t\t\t\tmemo[name] = settings.value(selection, row, pivot(name));\n\t\t\t\treturn memo;\n\t\t\t}, settings.factory(row));\n\t};\n\n\treturn rows =>\n\t\tplan.compile(\n\t\t\tplan.isRoot\n\t\t\t\t? rows.map(aggregate)\n\t\t\t\t: aggregate(rows));\n}","import { Resource } from '../resource/resource';\n\nexport class PivotState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.by = [];\n\t}\n}","import { GridError } from '../infrastructure/error';\n\nexport class PluginService {\n\tconstructor(model) {\n\t\tthis.model = model;\n\t}\n\n\tresolve(name) {\n\t\tconst lib = this.model.plugin().imports[name];\n\t\tif (!lib) {\n\t\t\tswitch (name) {\n\t\t\t\tcase 'xlsx': {\n\t\t\t\t\tthrow new GridError('plugin.service', 'To use export plugin for xlsx format please add http://github.com/SheetJS/js-xlsx library to your project');\n\t\t\t\t}\n\t\t\t\tcase 'fileSaver': {\n\t\t\t\t\tthrow new GridError('plugin.service', 'To use export plugin for file saving please add https://github.com/eligrey/FileSaver.js library to your project');\n\t\t\t\t}\n\t\t\t\tcase 'pdf': {\n\t\t\t\t\tthrow new GridError('plugin.service', 'To use export plugin for pdf format please add https://github.com/MrRio/jsPDF and https://github.com/simonbengtsson/jsPDF-AutoTable libraries to your project');\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\tthrow new GridError('import library', `Can't find ${name} library in imports`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn lib;\n\t}\n}\n\n","import { Resource } from '../resource/resource';\n\nexport class PluginState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.imports = {};\n\t}\n}","import { Resource } from '../resource/resource';\n\nexport class ProgressState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.isBusy = false;\n\t\tthis.queue = [];\n\t}\n}\n","import {Resource} from './resource';\n\nexport class EnumerableResource extends Resource {\n\tconstructor(data = {}, scope = {}, count = 0) {\n\t\tsuper(data, scope);\n\n\t\tthis.count = count;\n\t}\n}\n","import {Resource} from './resource';\nimport {EnumerableResource} from './resource.enumerable';\n\nexport function factory(resource, key) {\n\tconst data = resource.data;\n\tconst scope = resource.scope;\n\tif (resource instanceof EnumerableResource) {\n\t\tlet keyIndex = 1;\n\t\tlet count = resource.count;\n\t\tconst originKey = key;\n\t\twhile (data.hasOwnProperty(key)) {\n\t\t\tkey = originKey + keyIndex++;\n\t\t}\n\n\t\tif (count < keyIndex) {\n\t\t\tcount = keyIndex;\n\t\t}\n\n\t\treturn (content, env) => {\n\t\t\t// TODO: do we need full clone here?\n\t\t\tdata[key] = content;\n\t\t\tif (Object.keys(env).length) {\n\t\t\t\tscope[key] = env;\n\t\t\t}\n\t\t\treturn new EnumerableResource(data, scope, count);\n\t\t};\n\t}\n\n\treturn (content, env) => {\n\t\t// TODO: do we need full clone here?\n\t\tdata[key] = content;\n\t\tif (Object.keys(env).length) {\n\t\t\tscope[key] = env;\n\t\t}\n\t\treturn new Resource(data, scope);\n\t};\n}","export class Resource {\n\tconstructor(data = {}, scope = {}) {\n\t\tthis.data = data;\n\t\tthis.scope = scope;\n\t}\n}","export function serializeGet(model) {\n\tconst paginationState = model.pagination();\n\tconst sortState = model.sort();\n\tconst filterState = model.filter();\n\n\treturn {\n\t\torder: sortState.by\n\t\t\t.map(item => {\n\t\t\t\tconst field = Object.keys(item)[0];\n\t\t\t\tconst order = item[field];\n\t\t\t\treturn `${order === 'asc' ? '+' : '-'}${field}`;\n\t\t\t})\n\t\t\t.join(','),\n\t\tfilter: Object\n\t\t\t.keys(filterState.by)\n\t\t\t.map(field => {\n\t\t\t\tconst state = filterState.by[field];\n\t\t\t\tif(field === '$expression') {\n\t\t\t\t\treturn `$expression=where:${state}`;\n\t\t\t\t}\n\n\t\t\t\tif (state.items) {\n\t\t\t\t\treturn `${field}=in:${state.items.join(',')}`;\n\t\t\t\t}\n\n\t\t\t\tif (state.expression) {\n\t\t\t\t\treturn `${field}=where:${state.expression}`;\n\t\t\t\t}\n\n\t\t\t\treturn '';\n\t\t\t})\n\t\t\t.filter(part => !!part)\n\t\t\t.join(';'),\n\t\tskip: paginationState.current * paginationState.size,\n\t\ttake: paginationState.size\n\t};\n}\n","export function serializePost(model) {\n\tconst paginationState = model.pagination();\n\tconst sortState = model.sort();\n\tconst filterState = model.filter();\n\n\treturn {\n\t\tfilter: filterState.by,\n\t\torder: sortState.by.map(s => {\n\t\t\tconst key = Object.keys(s)[0];\n\t\t\tconst value = s[key];\n\t\t\treturn (value === 'asc' ? '+' : '-') + key;\n\t\t}),\n\t\tskip: paginationState.current * paginationState.size,\n\t\ttake: paginationState.size\n\t};\n}\n","import { serializeGet } from './get.serialize';\n\nexport class RestState {\n\tconstructor() {\n\t\tthis.url = '';\n\t\tthis.method = 'get';\n\t\tthis.serialize = serializeGet;\n\t}\n}\n","export class RowDetails {\n\tconstructor(item, column) {\n\t\tthis.item = item;\n\t\tthis.column = column;\n\t}\n}","import { Command } from '../command/command';\nimport { RowDetails } from './row.details';\nimport { takeOnce, filter } from '../rx/rx.operators';\nimport { toggleStatus, invalidateStatus } from './row.details.service';\nimport { selectRow } from '../navigation/navigation.state.selector';\n\nexport class RowDetailsLet {\n\tconstructor(plugin, shortcut) {\n\t\tconst { model, observeReply, observe, disposable } = plugin;\n\n\t\tthis.plugin = plugin;\n\n\t\tthis.toggleStatus = new Command({\n\t\t\tsource: 'row.details.view',\n\t\t\texecute: row => {\n\t\t\t\tif (!row) {\n\t\t\t\t\trow = selectRow(model.navigation());\n\t\t\t\t}\n\n\t\t\t\tconst { toggle, status, mode } = model.row();\n\t\t\t\tif (toggle.execute({ row }) !== false) {\n\t\t\t\t\tconst newStatus = toggleStatus([row], status, mode);\n\t\t\t\t\tmodel.row({ status: newStatus }, {\n\t\t\t\t\t\tsource: 'row.details.view'\n\t\t\t\t\t});\n\n\t\t\t\t\tobserve(model.sceneChanged)\n\t\t\t\t\t\t.pipe(\n\t\t\t\t\t\t\tfilter(e => e.hasChanges('status') && e.state.status === 'stop'),\n\t\t\t\t\t\t\ttakeOnce()\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.subscribe(e => {\n\t\t\t\t\t\t\tconst rowStatus = newStatus.get(row);\n\t\t\t\t\t\t\tif (rowStatus && rowStatus.expand) {\n\t\t\t\t\t\t\t\tconst index = model.view().rows.indexOf(row)\n\t\t\t\t\t\t\t\tmodel.focus({\n\t\t\t\t\t\t\t\t\trowIndex: index + 1\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\tsource: 'row.details.let'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tcanExecute: row => {\n\t\t\t\tif (!row) {\n\t\t\t\t\tconst { cell } = model.navigation();\n\t\t\t\t\tif (cell && cell.column.type === 'row-expand') {\n\t\t\t\t\t\trow = cell.row;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst { toggle } = model.row();\n\t\t\t\treturn !!row && toggle.canExecute({ row });\n\t\t\t},\n\t\t\tshortcut: model.row().shortcut.toggle\n\t\t});\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.tag.source === 'row.details.view') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.hasChanges('rows')) {\n\t\t\t\t\tconst { status, mode } = model.row();\n\t\t\t\t\tconst newStatus =\n\t\t\t\t\t\tinvalidateStatus(\n\t\t\t\t\t\t\tmodel.data().rows,\n\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\tmode\n\t\t\t\t\t\t);\n\n\t\t\t\t\tmodel.row({ status: newStatus }, {\n\t\t\t\t\t\tsource: 'row.details.view'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\tlet canExecuteCheckSub;\n\t\tconst unsubscribeCanExecuteCheck = () => {\n\t\t\tif (canExecuteCheckSub) {\n\t\t\t\tcanExecuteCheckSub.unsubscribe();\n\t\t\t\tcanExecuteCheckSub = null;\n\t\t\t}\n\t\t};\n\n\t\tdisposable.add(\n\t\t\tunsubscribeCanExecuteCheck\n\t\t);\n\n\t\tobserveReply(model.rowChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('toggle')) {\n\t\t\t\t\tconst { toggle } = e.state;\n\t\t\t\t\tunsubscribeCanExecuteCheck();\n\t\t\t\t\tcanExecuteCheckSub = toggle.canExecuteCheck\n\t\t\t\t\t\t.subscribe(() => {\n\t\t\t\t\t\t\tthis.toggleStatus.canExecuteCheck.next();\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\tshortcut.register([this.toggleStatus]);\n\t}\n\n\tstatus(row) {\n\t\tif (row instanceof RowDetails) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { model } = this.plugin;\n\t\tconst { status } = model.row();\n\t\tconst state = status.get(row);\n\t\treturn state && state.expand ? 'expand' : 'collapse';\n\t}\n}","import { RowDetails } from './row.details';\nimport { RowDetailsStatus } from './row.details.status';\nimport { GridError } from '../infrastructure/error';\nimport { columnFactory } from '../column/column.factory';\n\nexport function flatView(model, mode) {\n\tconst { rows } = model.scene();\n\tconst { status } = model.row();\n\tconst { line } = model.scene().column;\n\n\tconst showAll = mode === 'all';\n\tconst expandColumn = line.find(c => c.model.type === 'row-expand');\n\tconst columnIndex = expandColumn ? expandColumn.columnIndex : 0;\n\n\tconst result = [];\n\tconst createColumn = columnFactory(model);\n\tfor (let cursor = 0, length = rows.length; cursor < length; cursor++) {\n\t\tconst dataRow = rows[cursor];\n\t\tresult.push(dataRow);\n\n\t\tconst nextRow = rows[cursor + 1];\n\t\tconst detailsRow = nextRow instanceof RowDetails ? nextRow : null;\n\t\tconst state = status.get(dataRow) || (showAll && new RowDetailsStatus(true));\n\t\tif (state instanceof RowDetailsStatus && state.expand) {\n\t\t\tif (detailsRow) {\n\t\t\t\tresult.push(detailsRow);\n\t\t\t\tcursor++;\n\t\t\t} else {\n\t\t\t\tconst column = createColumn('row-details');\n\t\t\t\tcolumn.columnIndex = columnIndex;\n\t\t\t\tresult.push(new RowDetails(dataRow, column));\n\t\t\t}\n\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (detailsRow) {\n\t\t\tcursor++;\n\t\t}\n\t}\n\n\treturn result;\n}\n\nexport function invalidateStatus(rows, status, mode) {\n\tswitch (mode) {\n\t\tcase 'all': {\n\t\t\tstatus = new Map(status.entries());\n\t\t\trows.forEach(row => {\n\t\t\t\tif (!status.has(row)) {\n\t\t\t\t\tstatus.set(row, new RowDetailsStatus(true));\n\t\t\t\t}\n\t\t\t});\n\t\t\tbreak;\n\t\t}\n\t\tcase 'single': {\n\t\t\tstatus = new Map(Array\n\t\t\t\t.from(status.entries())\n\t\t\t\t.filter(entry => {\n\t\t\t\t\tconst [row, status] = entry;\n\t\t\t\t\treturn rows.indexOf(row) >= 0 || !(status instanceof RowDetailsStatus);\n\t\t\t\t}));\n\t\t\tbreak;\n\t\t}\n\t\tcase 'multiple': {\n\t\t\tstatus = new Map(status.entries());\n\t\t\tbreak;\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new GridError(\n\t\t\t\t'row.details.service',\n\t\t\t\t`Invalid mode ${mode}`\n\t\t\t);\n\t\t}\n\t}\n\n\treturn status;\n}\n\nexport function toggleStatus(rows, status, mode = 'single') {\n\tstatus = invalidateStatus(rows, status, mode);\n\tif (mode !== 'all') {\n\t\trows.forEach(row => {\n\t\t\tconst state = status.get(row);\n\t\t\tif (!state) {\n\t\t\t\tstatus.set(row, new RowDetailsStatus(true));\n\t\t\t} else {\n\t\t\t\tstate.expand = !state.expand;\n\t\t\t}\n\t\t});\n\t}\n\n\treturn status;\n}","export class RowDetailsStatus {\n\tconstructor(expand) {\n\t\tthis.expand = expand;\n\t}\n}","import { identity } from '../utility/kit';\n\nexport function sortFactory(model) {\n    const { index } = model.rowList();\n    if (!index.size) {\n        return identity;\n    }\n\n    const { rowId } = model.data();\n    return rows => {\n        let cursor = 0;\n        const positions = new Map();\n        const result =\n            rows\n                .filter((row, i) => {\n                    const key = rowId(i, row);\n                    const position = index.get(key)\n                    if (position || position === 0) {\n                        positions.set(position, row);\n                        return false;\n                    }\n\n                    return true;\n                })\n                .reduce((memo, row) => {\n                    let indexRow;\n                    while (indexRow = positions.get(cursor)) {\n                        positions.delete(cursor);\n                        memo.push(indexRow)\n                        cursor++;\n                    }\n\n                    memo.push(row);\n                    cursor++;\n\n                    return memo;\n                }, []);\n\n        if (positions.size) {\n            const remain = Array.from(positions.entries());\n            remain.sort((x, y) => x[0] - y[0]);\n\n            return result.concat(remain.map(pos => pos[1]));\n        }\n\n        return result;\n    };\n}","export class RowListState {\n\tconstructor() {\n\t\tthis.index = new Map();\n\t}\n}","import { PathService } from '../path/path.service';\nimport { Command } from '../command/command';\nimport { isNumber } from '../utility/kit';\nimport { GRID_PREFIX } from '../definition';\nimport { eventPath } from '../services/dom';\n\nexport class RowLet {\n\tconstructor(plugin, tagName) {\n\t\tconst { model, table, observe } = plugin;\n\n\t\tthis.plugin = plugin;\n\t\tthis.tagName = tagName;\n\n\t\tconst pathFinder = new PathService(table.box.bag.body);\n\n\t\tthis.drop = new Command({\n\t\t\tsource: 'row.view',\n\t\t\tcanExecute: e => {\n\t\t\t\tif (e.action === 'end') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tconst row = pathFinder.row(eventPath(e));\n\t\t\t\treturn !!row;\n\t\t\t},\n\t\t\texecute: e => {\n\t\t\t\tconst oldIndex = e.dragData;\n\t\t\t\tswitch (e.action) {\n\t\t\t\t\tcase 'over': {\n\t\t\t\t\t\tconst row = pathFinder.row(eventPath(e));\n\t\t\t\t\t\tif (!e.inAreaY(row.element)) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst newIndex = row.index;\n\t\t\t\t\t\tif (oldIndex !== newIndex) {\n\t\t\t\t\t\t\tconst oldRow = table.body.row(oldIndex);\n\t\t\t\t\t\t\toldRow.removeClass(`${GRID_PREFIX}-drag`);\n\n\t\t\t\t\t\t\tconst newRow = table.body.row(newIndex);\n\t\t\t\t\t\t\tnewRow.addClass(`${GRID_PREFIX}-drag`);\n\n\t\t\t\t\t\t\tconst tr = table.body.row(oldIndex).model();\n\t\t\t\t\t\t\tconst entries = [];\n\t\t\t\t\t\t\tfor (let entry of model.rowList().index.entries()) {\n\t\t\t\t\t\t\t\tconst index = entry[1];\n\t\t\t\t\t\t\t\tif (oldIndex < index && index <= newIndex) {\n\t\t\t\t\t\t\t\t\tentry[1] = index - 1;\n\t\t\t\t\t\t\t\t} else if (oldIndex > index && index >= newIndex) {\n\t\t\t\t\t\t\t\t\tentry[1] = index + 1;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tentries.push(entry);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst index = new Map(entries);\n\t\t\t\t\t\t\tconst { rowId } = model.data();\n\t\t\t\t\t\t\tconst key = rowId(newIndex, tr.model);\n\t\t\t\t\t\t\tindex.set(key, newIndex);\n\t\t\t\t\t\t\tmodel.rowList({ index }, { source: 'row.view' });\n\n\t\t\t\t\t\t\te.dragData = newIndex;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'drop':\n\t\t\t\t\tcase 'end': {\n\t\t\t\t\t\tconst oldRow = table.body.row(oldIndex);\n\t\t\t\t\t\toldRow.removeClass(`${GRID_PREFIX}-drag`);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.drag = new Command({\n\t\t\tsource: 'row.view',\n\t\t\texecute: e => {\n\t\t\t\tconst index = e.data;\n\t\t\t\tconst row = table.body.row(index);\n\t\t\t\trow.addClass(`${GRID_PREFIX}-drag`);\n\t\t\t\tconst tr = row.model();\n\t\t\t\tif (tr) {\n\t\t\t\t\treturn tr.element;\n\t\t\t\t}\n\t\t\t},\n\t\t\tcanExecute: e => {\n\t\t\t\tif (isNumber(e.data)) {\n\t\t\t\t\tconst index = e.data;\n\t\t\t\t\treturn index >= 0 && model.scene().rows.length > index;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\tthis.resize = new Command({\n\t\t\tsource: 'row.view'\n\t\t});\n\n\t\tobserve(model.dataChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('rows')) {\n\t\t\t\t\tmodel.rowList({\n\t\t\t\t\t\tindex: new Map(),\n\t\t\t\t\t}, {\n\t\t\t\t\t\tsource: 'row.view',\n\t\t\t\t\t\tbehavior: 'core'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tget canMove() {\n\t\tconst { model } = this.plugin;\n\t\treturn model.row().canMove;\n\t}\n\n\tget canResize() {\n\t\tconst { model } = this.plugin;\n\t\treturn model.row().canResize;\n\t}\n}","import { Resource } from '../resource/resource';\nimport { Command } from '../command/command';\n\nexport class RowState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\n\t\tthis.mode = 'single'; // single | multiple | all\n\t\tthis.unit = 'data'; // data | details\n\t\tthis.height = element => element && element.offsetHeight || 64; // number | function(element, index)\t\t\n\t\tthis.status = new Map();\n\t\tthis.shortcut = {\n\t\t\ttoggle: 'space|enter'\n\t\t};\n\t\tthis.canMove = false;\n\t\tthis.canResize = false;\n\t\tthis.minHeight = 0;\n\t\tthis.pinTop = [];\n\t\tthis.pinBottom = [];\n\t\tthis.toggle = new Command();\n\t}\n}\n","import { Event } from '../event/event';\nimport { Disposable } from '../infrastructure/disposable';\nimport { isFunction, noop } from '../utility/kit';\n\nexport class UnsubscribableLike {\n  constructor(off) {\n    this.off = off;\n    this.closed = false;\n  }\n\n  unsubscribe() {\n    if (!this.closed) {\n      this.off();\n      \n      this.off = null;\n      this.closed = true;\n    }\n  }\n}\n\nexport class ObservableEvent {\n  constructor(nextSignal, disposable) {\n    this.errorSignal = new Event();\n    this.nextSignal = nextSignal;\n    this.disposable = disposable;\n  }\n\n  subscribe(...args) {\n    let observer = args[0];\n    if (isFunction(observer)) {\n      observer = {\n        next: args[0],\n        error: args[1],\n        complete: args[2]\n      };\n    }\n\n    if (observer.error) {\n      const errorOff = this.errorSignal.on(ex => observer.error(ex));\n      this.disposable.add(errorOff);\n    }\n\n    if (observer.next) {\n      const eventOff = this.subscribeEvent(e => observer.next(e));\n\n      let disposed = false;\n      const unsubscribe = () => {\n        if (!disposed) {\n          disposed = true;\n\n          eventOff();\n          this.disposable.remove(unsubscribe);\n\n          if (observer.complete) {\n            observer.complete();\n          }\n        }\n      };\n\n      this.disposable.add(unsubscribe);\n      return new UnsubscribableLike(unsubscribe);\n    }\n\n    return new UnsubscribableLike(noop);\n  }\n\n  subscribeEvent(next) {\n    return this\n      .nextSignal\n      .on(e => {\n        try {\n          next(e);\n        } catch (ex) {\n          this.catchError(ex);\n          throw ex;\n        }\n      });\n  }\n\n  catchError(ex) {\n    this.errorSignal.emit(ex);\n    throw ex;\n  }\n\n  toPromise() {\n    return new Promise(resolve => {\n      let isResolved = false;\n      const sub = this.subscribe(() => {\n        resolve();\n        isResolved = true;\n        if (sub) {\n          sub.unsubscribe();\n          sub = null;\n        }\n      });\n\n      if (isResolved && sub) {\n        sub.unsubscribe();\n      }\n    });\n  };\n\n  pipe(...operators) {\n    let source = this;\n    for (let op of operators) {\n      source = op(source);\n    }\n\n    return source;\n  }\n}\n\nexport class ObservableReplyEvent extends ObservableEvent {\n  subscribeEvent(next) {\n    return this\n      .nextSignal\n      .watch(e => {\n        try {\n          next(e);\n        } catch (ex) {\n          this.catchError(ex);\n        }\n      });\n  }\n}\n\nexport class SubjectLike extends ObservableEvent {\n  constructor() {\n    super(\n      new Event(),\n      new Disposable()\n    );\n\n    this.isCompleted = false;\n  }\n\n  next(value) {\n    if (this.isCompleted) {\n      return;\n    }\n\n    this.nextSignal.emit(value);\n  }\n\n  error(ex) {\n    if (this.isCompleted) {\n      return;\n    }\n\n    this.catchError(ex);\n  }\n\n  complete() {\n    if (!this.isCompleted) {\n      this.isCompleted = true;\n    }\n  }\n}\n\nexport class Operator extends SubjectLike {\n  constructor(subscriber) {\n    super();\n\n    this.subscriber = subscriber;\n  }\n\n  subscribe(...args) {\n    super.subscribe(...args);\n    this.subscriber(this);\n  }\n}","import { Operator } from './rx';\n\nexport function takeOnce() {\n    return source =>\n        new Operator(subscriber =>\n            source.subscribe({\n                next: x => {\n                    subscriber.next(x);\n                    subscriber.complete();\n                }\n            })\n        );\n}\n\nexport function filter(test) {\n    return source =>\n        new Operator(subscriber =>\n            source.subscribe({\n                next: x => {\n                    if (test(x)) {\n                        subscriber.next(x);\n                    }\n                }\n            })\n        );\n}","import { getLabelFactory } from '../../services/label';\nimport { getValueFactory } from '../../services/value';\n\nexport class CacheStrategy {\n    constructor(plugin, strategy) {\n        const { model, observeReply } = plugin;\n        let storage = new Map();\n\n        const defaultGetValue =\n            (row, column, select, rowIndex, columnIndex) => {\n                const key = `valueFactory-${column.key}`;\n                select = storage.get(key);\n                if (!select) {\n                    select = getValueFactory(column);\n                    storage.set(key, select);\n                }\n\n                return strategy.getValue(row, column, select, rowIndex, columnIndex);\n            };\n\n        const readonlyGetValue =\n            (row, column, select, rowIndex, columnIndex) => {\n                const key = `getValue-${rowIndex}x${column.key}`;\n                if (storage.has(key)) {\n                    return storage.get(key);\n                }\n\n                const value = defaultGetValue(row, column, select, rowIndex, columnIndex);\n                storage.set(key, value);\n                return value;\n            };\n\n        const defaultGetLabel =\n            (row, column, select, rowIndex, columnIndex) => {\n                const key = `labelFactory-${column.key}`;\n                select = storage.get(key);\n                if (!select) {\n                    select = getLabelFactory(column);\n                    storage.set(key, select);\n                }\n\n                return strategy.getLabel(row, column, select, rowIndex, columnIndex);\n            };\n\n        const readonlyGetLabel =\n            (row, column, select, rowIndex, columnIndex) => {\n                const key = `getLabel-${rowIndex}x${column.key}`;\n                if (storage.has(key)) {\n                    return storage.get(key);\n                }\n\n                const value = defaultGetLabel(row, column, select, rowIndex, columnIndex);\n                storage.set(key, value);\n                return value;\n            };\n\n\n        this.getValue = defaultGetValue;\n        this.getLabel = defaultGetLabel;\n\n        this.colspan = (row, column, rowIndex, columnIndex) => {\n            const key = `colspan-${rowIndex}x${column.model.key}`;\n            if (storage.has(key)) {\n                return storage.get(key);\n            }\n\n            const value = strategy.colspan(row, column, rowIndex, columnIndex);\n            storage.set(key, value);\n            return value;\n        };\n\n        this.rowspan = (row, column, rowIndex, columnIndex) => {\n            const key = `rowspan-${rowIndex}x${column.model.key}`;\n            if (storage.has(key)) {\n                return storage.get(key);\n            }\n\n            const value = strategy.rowspan(row, column, rowIndex, columnIndex);\n            storage.set(key, value);\n            return value;\n        };\n\n        this.columns = (row, pin, rowIndex) => {\n            const key = `columns-${pin}-${rowIndex}`;\n            if (storage.has(key)) {\n                return storage.get(key);\n            }\n\n            const value = strategy.columns(row, pin, rowIndex);\n            storage.set(key, value);\n            return value;\n        }\n\n        this.setValue = (...args) => strategy.setValue(...args);\n        this.setLabel = (...args) => strategy.setLabel(...args);\n\n        this.columnList = (pin = 'mid') => {\n            const key = `columnList-${pin}`;\n            if (storage.has(key)) {\n                return storage.get(key);\n            }\n\n            const value = strategy.columnList(pin);\n            storage.set(key, value);\n            return value;\n        }\n\n        observeReply(model.sceneChanged)\n            .subscribe(e => {\n                if (e.hasChanges('status')) {\n                    if (e.state.status !== 'stop') {\n                        storage = new Map();\n                    }\n                }\n            });\n\n        observeReply(model.gridChanged)\n            .subscribe(e => {\n                if (e.hasChanges('isReadonly')) {\n                    storage = new Map();\n\n                    if (e.state.isReadonly) {\n                        this.getValue = readonlyGetValue;\n                        this.getLabel = readonlyGetLabel;\n                    } else {\n                        this.getValue = getValue;\n                        this.getLabel = this.getLabel;\n                    }\n                }\n            });\n    }\n}","import { setLabel } from '../../services/label';\nimport { setValue } from '../../services/value';\n\n\nfunction defaultGetValue(row, column, select) {\n\treturn select(row, column);\n}\n\n// This class is not inheritable, but construct in a way to use it as a composition without binding to `this`.\nexport class DataRow {\n\tconstructor(plugin) {\n\t\tconst { model, observeReply } = plugin;\n\t\tlet area = {};\n\t\tlet line = [];\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('column')) {\n\t\t\t\t\tarea = e.state.column.area;\n\t\t\t\t\tline = e.state.column.line;\n\t\t\t\t}\n\t\t\t});\n\n\t\tthis.getValue = defaultGetValue;\n\t\tthis.getLabel = defaultGetValue;\n\t\tthis.setValue = setValue;\n\t\tthis.setLabel = setLabel;\n\n\t\tthis.colspan = (row, column) => column.colspan;\n\t\tthis.rowspan = () => 1;\n\n\t\tconst columnList = (pin = 'mid') => area[pin] || [];\n\n\t\tthis.columnList = columnList;\n\t\tthis.columns = (row, pin) => columnList(pin);\n\t}\n}\n","import { GridError } from '../../infrastructure/error';\nimport { sumBy } from '../../utility/kit';\nimport { columnFactory } from '../../column/column.factory';\n\nexport class DetailsRow {\n\tconstructor(model, dataRow) {\n\t\tconst createColumn = columnFactory(model);\n\t\tconst emptyColumn = createColumn('pad', { key: 'row-details-pad' });\n\n\t\tthis.columns = dataRow.getColumns;\n\t\tthis.rowspan = dataRow.rowspan;\n\n\t\tthis.colspan = (rowDetails, column) => {\n\t\t\treturn sumBy(dataRow.columnList(column.model.pin), c => c.colspan);\n\t\t};\n\n\t\tthis.columns = (rowDetails, pin) => {\n\t\t\tif (rowDetails.column.model.pin === pin) {\n\t\t\t\treturn [rowDetails.column];\n\t\t\t}\n\n\t\t\treturn [emptyColumn];\n\t\t};\n\n\t\tthis.getValue = () => null;\n\t\tthis.getLabel = () => null;\n\t\tthis.setValue = () => null;\n\t\tthis.setLabel = () => null;\n\t}\n}","import { takeWhile, dropWhile, sumBy } from '../../utility/kit';\nimport { columnFactory } from '../../column/column.factory';\nimport { Aggregation } from '../../services/aggregation';\nimport { GridError } from '../../infrastructure/error';\nimport { findFirstLeaf } from '../../group/group.service';\n\nexport class NodeRow {\n\tconstructor(model, dataRow) {\n\t\tconst { columnList, rowspan } = dataRow;\n\n\t\tthis.columnList = columnList;\n\t\tthis.rowspan = rowspan;\n\n\t\tconst createColumn = columnFactory(model);\n\t\tconst reference = {\n\t\t\tgroup: createColumn('group'),\n\t\t\tsummary: createColumn('group-summary')\n\t\t};\n\n\t\tthis.getLabel =\n\t\t\tthis.getValue = (node, column, select, rowIndex, columnIndex) => {\n\t\t\t\tif (column.type === 'pivot') {\n\t\t\t\t\treturn dataRow.getLabel(node, column, select, rowIndex, columnIndex);\n\t\t\t\t}\n\n\t\t\t\tconst { rows } = model.data();\n\t\t\t\tswitch (node.type) {\n\t\t\t\t\tcase 'group':\n\t\t\t\t\tcase 'summary': {\n\t\t\t\t\t\tconst agg = column.aggregation;\n\t\t\t\t\t\tif (agg) {\n\t\t\t\t\t\t\tif (!Aggregation.hasOwnProperty(agg)) {\n\t\t\t\t\t\t\t\tthrow new GridError(\n\t\t\t\t\t\t\t\t\t'node.row',\n\t\t\t\t\t\t\t\t\t`Aggregation ${agg} is not supported`);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst groupRows = node.rows.map(i => rows[i]);\n\t\t\t\t\t\t\treturn Aggregation[agg](groupRows, select, column.aggregationOptions);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'row': {\n\t\t\t\t\t\tconst rowIndex = node.rows[0];\n\t\t\t\t\t\treturn select(rows[rowIndex], column);\n\t\t\t\t\t}\n\t\t\t\t\tcase 'value': {\n\t\t\t\t\t\treturn select(node, column);\n\t\t\t\t\t}\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow new GridError(\n\t\t\t\t\t\t\t'node.row',\n\t\t\t\t\t\t\t`Invalid node type ${node.type}`\n\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t};\n\n\t\tthis.setValue = (node, column, value, rowIndex, columnIndex) => {\n\t\t\tswitch (node.type) {\n\t\t\t\tcase 'row': {\n\t\t\t\t\tconst { rows } = model.data();\n\t\t\t\t\tconst rowIndex = node.rows[0];\n\t\t\t\t\tdataRow.setValue(rows[rowIndex], column, value, rowIndex, columnIndex);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'value': {\n\t\t\t\t\tdataRow.setValue(node, column, value, rowIndex, columnIndex);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new GridError('node.row', `Can't set value to ${node.type} node`);\n\t\t\t}\n\t\t};\n\n\t\tthis.setLabel = (node, column, value, rowIndex, columnIndex) => {\n\t\t\tswitch (node.type) {\n\t\t\t\tcase 'row': {\n\t\t\t\t\tconst { rows } = model.data();\n\t\t\t\t\tconst rowIndex = node.rows[0];\n\t\t\t\t\tdataRow.setLabel(rows[rowIndex], column, value, rowIndex, columnIndex);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'value': {\n\t\t\t\t\tdataRow.setLabel(node, column, value, rowIndex, columnIndex);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new GridError('node.row', `Can't set label to ${node.type} node`);\n\t\t\t}\n\t\t};\n\n\t\tthis.colspan = (node, column) => {\n\t\t\tif (node.type === 'summary') {\n\t\t\t\treturn sumBy(columnList(column.model.pin), c => c.colspan);\n\t\t\t}\n\n\t\t\treturn column.colspan;\n\t\t};\n\n\t\tthis.columns = (node, pin) => {\n\t\t\tif (node.type === 'summary') {\n\t\t\t\t// TODO: add pin support\n\t\t\t\treturn [reference.summary];\n\t\t\t}\n\n\t\t\treturn columnList(pin);\n\t\t};\n\n\t\tthis.findGroupColumn = (pin) => {\n\t\t\tconst columns = columnList();\n\t\t\tlet groupColumn = columns.find(c => c.model.type === 'group');\n\t\t\tif (!groupColumn) {\n\t\t\t\tgroupColumn = reference.group;\n\t\t\t\tif (groupColumn.model.pin === pin) {\n\t\t\t\t\tconst firstColumn = columnList(pin)[0];\n\t\t\t\t\tgroupColumn.columnIndex = firstColumn ? firstColumn.columnIndex : 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn groupColumn.model.pin !== pin ? null : groupColumn;\n\t\t};\n\t}\n}\n\nexport class RowspanNodeRow {\n\tconstructor(model, nodeRow) {\n\t\tconst { columnList, getValue, getLabel, columns } = nodeRow;\n\n\t\tthis.setValue = nodeRow.setValue;\n\t\tthis.setLabel = nodeRow.setLabel;\n\t\tthis.colspan = nodeRow.colspan;\n\t\tthis.columnList = columnList;\n\t\t\n\t\tconst rowspan = (node, column, isRoot = true) => {\n\t\t\tswitch (node.type) {\n\t\t\t\tcase 'group': {\n\t\t\t\t\tif (column.model.type === 'group') {\n\t\t\t\t\t\tif (node.state.expand) {\n\t\t\t\t\t\t\tif (!isRoot || node.source === column.model.by) {\n\t\t\t\t\t\t\t\treturn node.children.reduce((memo, child, i) => memo + rowspan(child, column, false), 0);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (node.children.length) {\n\t\t\t\t\t\t\t\t\treturn rowspan(node.children[0], column, false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn 1;\n\t\t};\n\n\t\tthis.rowspan = rowspan;\n\n\t\tconst spanValue = getValue => (node, column, select) => {\n\t\t\tswitch (node.type) {\n\t\t\t\tcase 'group': {\n\t\t\t\t\tconst leaf = findFirstLeaf(node);\n\t\t\t\t\tif (leaf) {\n\t\t\t\t\t\tconst { rows } = model.data();\n\t\t\t\t\t\tconst rowIndex = leaf.rows[0];\n\t\t\t\t\t\treturn select(rows[rowIndex], column);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn getValue(node, column, select);\n\t\t};\n\n\t\tthis.getLabel = spanValue(getLabel);\n\t\tthis.getValue = spanValue(getValue);\n\n\t\tthis.columns = (node, pin) => {\n\t\t\tswitch (node.type) {\n\t\t\t\tcase 'group': {\n\t\t\t\t\treturn dropWhile(columnList(pin), c => c.model.type === 'group' && c.model.by !== node.source);\n\t\t\t\t}\n\t\t\t\tcase 'row': {\n\t\t\t\t\treturn columnList(pin).filter(c => c.model.type !== 'group');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn columns(node, pin);\n\t\t};\n\t}\n}\n\nexport class SubheadNodeRow {\n\tconstructor(nodeRow) {\n\t\tconst { columnList, columns, findGroupColumn } = nodeRow;\n\n\t\tthis.setValue = nodeRow.setValue;\n\t\tthis.setLabel = nodeRow.setLabel;\n\t\tthis.getValue = nodeRow.getValue;\n\t\tthis.getLabel = nodeRow.getLabel;\n\t\tthis.rowspan = nodeRow.rowspan;\n\t\tthis.columnList = columnList;\n\n\t\tthis.colspan = (node, column) => {\n\t\t\tswitch (node.type) {\n\t\t\t\tcase 'group': {\n\t\t\t\t\tif (column.model.type === 'group') {\n\t\t\t\t\t\tconst groupColumn = findGroupColumn(column.model.pin);\n\t\t\t\t\t\tif (groupColumn) {\n\t\t\t\t\t\t\tconst nearGroupColumns = columnList(column.model.pin);\n\t\t\t\t\t\t\tconst groupSpan = takeWhile(nearGroupColumns, c => !c.model.aggregation);\n\t\t\t\t\t\t\treturn sumBy(groupSpan, c => c.colspan);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn nodeRow.colspan(node, column);\n\t\t};\n\n\t\tthis.columns = (node, pin) => {\n\t\t\tswitch (node.type) {\n\t\t\t\tcase 'group': {\n\t\t\t\t\tconst groupColumn = findGroupColumn(pin);\n\t\t\t\t\tif (groupColumn) {\n\t\t\t\t\t\tconst nextColumns = dropWhile(columnList(pin), c => !c.model.aggregation);\n\t\t\t\t\t\treturn [groupColumn].concat(nextColumns);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn columns(node, pin);\n\t\t};\n\t}\n}\n","import { groupBuilder } from '../../group/group.build';\nimport { getValueFactory } from '../../services/value';\n\nexport class PivotRow {\n\tconstructor(plugin, dataRow) {\n\t\tconst { model, observeReply } = plugin;\n\t\tthis.columns = dataRow.columns;\n\t\tthis.rowspan = dataRow.rowspan;\n\t\tthis.colspan = dataRow.colspan;\n\n\t\tthis.getValue = dataRow.getValue;\n\t\tthis.setValue = dataRow.setValue;\n\n\t\tthis.getLabel = dataRow.getLabel;\n\t\tthis.setLabel = dataRow.setLabel;\n\n\t\tthis.columnList = dataRow.columnList;\n\n\t\tlet pivotRows = [];\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('column') || e.hasChanges('rows')) {\n\t\t\t\t\tconst { rows } = model.view().pivot;\n\t\t\t\t\tif (rows.length) {\n\t\t\t\t\t\tif (model.group().by.length) {\n\t\t\t\t\t\t\tconst build = groupBuilder(model);\n\t\t\t\t\t\t\tpivotRows = build(getValueFactory);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpivotRows = rows;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst pivotIndex = e.state.column.line.findIndex(c => c.model.type === 'pivot');\n\n\t\t\t\t\t\tthis.getValue = (row, column, select, rowIndex, columnIndex) => {\n\t\t\t\t\t\t\tif (column.type === 'pivot') {\n\t\t\t\t\t\t\t\tconst pivotRow = pivotRows[rowIndex];\n\t\t\t\t\t\t\t\treturn pivotRow[columnIndex - pivotIndex];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn dataRow.getValue(row, column, select, rowIndex, columnIndex);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthis.getLabel = (row, column, select, rowIndex, columnIndex) => {\n\t\t\t\t\t\t\tif (column.type === 'pivot') {\n\t\t\t\t\t\t\t\tconst pivotRow = pivotRows[rowIndex];\n\t\t\t\t\t\t\t\treturn pivotRow[columnIndex - pivotIndex];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn dataRow.getLabel(row, column, select, rowIndex, columnIndex);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tpivotRows = [];\n\t\t\t\t\t\tthis.getValue = dataRow.getValue;\n\t\t\t\t\t\tthis.getLabel = dataRow.getLabel;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n}\n","import { Node } from '../../node/node';\nimport { RowDetails } from '../../row-details/row.details';\nimport { getLabel } from '../../services/label';\nimport { getValue } from '../../services/value';\nimport { CacheStrategy } from './cache.strategy';\nimport { DataRow } from './data.row';\nimport { DetailsRow } from './details.row';\nimport { NodeRow, RowspanNodeRow, SubheadNodeRow } from './node.row';\nimport { PivotRow } from './pivot.row';\n\nexport class Renderer {\n\tconstructor(plugin) {\n\t\tconst { model, observe, observeReply } = plugin;\n\n\t\tconst dataRow = new DataRow(plugin);\n\t\tconst pivotRow = new CacheStrategy(plugin, new PivotRow(plugin, dataRow));\n\t\tconst nodeRow = new NodeRow(model, pivotRow);\n\t\tconst nestNodeRow = new CacheStrategy(plugin, nodeRow);\n\t\tconst subheadNodeRow = new CacheStrategy(plugin, new SubheadNodeRow(nodeRow));\n\t\tconst rowspanNodeRow = new CacheStrategy(plugin, new RowspanNodeRow(model, nodeRow));\n\t\tconst rowDetails = new CacheStrategy(plugin, new DetailsRow(model, pivotRow));\n\t\tconst defaultStrategy = pivotRow;\n\n\t\tconst strategies = new Map();\n\t\tstrategies.set(RowDetails, rowDetails);\n\n\t\tconst selectNodeRowStrategy = () => {\n\t\t\tconst { mode } = model.group();\n\t\t\tswitch (mode) {\n\t\t\t\tcase 'subhead':\n\t\t\t\t\tstrategies.set(Node, subheadNodeRow);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'rowspan':\n\t\t\t\t\tstrategies.set(Node, rowspanNodeRow);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tstrategies.set(Node, nestNodeRow);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\n\t\tselectNodeRowStrategy();\n\t\tobserve(model.groupChanged)\n\t\t\t.subscribe(selectNodeRowStrategy);\n\n\t\t// Public interface\n\t\tthis.defaultStrategy = defaultStrategy;\n\n\t\tthis.colspan = (row, column, rowIndex, columnIndex) => {\n\t\t\tconst strategy = strategies.get(row.constructor) || defaultStrategy;\n\t\t\treturn strategy.colspan(row, column, rowIndex, columnIndex);\n\t\t};\n\n\t\tthis.rowspan = (row, column, rowIndex, columnIndex) => {\n\t\t\tconst strategy = strategies.get(row.constructor) || defaultStrategy;\n\t\t\treturn strategy.rowspan(row, column, rowIndex, columnIndex);\n\t\t};\n\n\t\tthis.columns = (row, pin, rowIndex) => {\n\t\t\tconst strategy = strategies.get(row.constructor) || defaultStrategy;\n\t\t\treturn strategy.columns(row, pin, rowIndex);\n\t\t};\n\n\t\tthis.getValue = (row, column, rowIndex, columnIndex) => {\n\t\t\tconst strategy = strategies.get(row.constructor) || defaultStrategy;\n\t\t\treturn strategy.getValue(row, column, getValue, rowIndex, columnIndex);\n\t\t};\n\n\t\tthis.setValue = (row, column, value, rowIndex, columnIndex) => {\n\t\t\tconst strategy = strategies.get(row.constructor) || defaultStrategy;\n\t\t\treturn strategy.setValue(row, column, value, rowIndex, columnIndex);\n\t\t};\n\n\t\tthis.getLabel = (row, column, rowIndex, columnIndex) => {\n\t\t\tconst strategy = strategies.get(row.constructor) || defaultStrategy;\n\t\t\treturn strategy.getLabel(row, column, getLabel, rowIndex, columnIndex);\n\t\t};\n\n\t\tthis.setLabel = (row, column, value, rowIndex, columnIndex) => {\n\t\t\tconst strategy = strategies.get(row.constructor) || defaultStrategy;\n\t\t\treturn strategy.setLabel(row, column, value, rowIndex, columnIndex);\n\t\t};\n\n\t\tthis.rows = {\n\t\t\tleft: [],\n\t\t\tright: [],\n\t\t\tmid: []\n\t\t};\n\n\t\tconst invalidateRows = () => {\n\t\t\tconst { rows } = model.scene();\n\t\t\tconst { pinTop, pinBottom } = model.row();\n\n\t\t\tthis.rows = {\n\t\t\t\ttop: pinTop,\n\t\t\t\tbody: rows,\n\t\t\t\tbottom: pinBottom\n\t\t\t};\n\t\t}\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('rows')) {\n\t\t\t\t\tinvalidateRows();\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.rowChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('pinTop') || e.hasChanges('pinBottom')) {\n\t\t\t\t\tinvalidateRows();\n\t\t\t\t}\n\t\t\t});\n\t}\n}","import { GridError } from '../infrastructure/error';\nimport { lineView } from '../column/column.service';\nimport { Node } from '../node/node';\n\nexport class Scene {\n\tconstructor(model) {\n\t\tthis.model = model;\n\t}\n\n\trows(memo) {\n\t\tconst { nodes, rows } = memo;\n\t\tif (nodes.length) {\n\t\t\tif (!(rows.length && rows[0] instanceof Node)) {\n\t\t\t\tconst { flattenFactory } = this.model.group();\n\t\t\t\tconst flatten = flattenFactory(this.model);\n\t\t\t\treturn flatten(nodes);\n\t\t\t}\n\t\t}\n\n\t\treturn rows;\n\t}\n\n\tcolumnRows(items) {\n\t\treturn items;\n\t}\n\n\tcolumnLine(items) {\n\t\treturn lineView(items);\n\t}\n\n\tcolumnArea(items) {\n\t\tconst line = lineView(items);\n\t\tconst result = {\n\t\t\tleft: [],\n\t\t\tright: [],\n\t\t\tmid: []\n\t\t};\n\n\t\tfor (let i = 0, length = line.length; i < length; i++) {\n\t\t\tconst column = line[i];\n\t\t\tconst { pin } = column.model;\n\t\t\tlet area = result[pin];\n\t\t\tif (!area) {\n\t\t\t\tthrow new GridError('scene', `Unsupported pin ${pin}`);\n\t\t\t}\n\n\t\t\tarea.push(column);\n\t\t}\n\n\t\treturn result;\n\t}\n}","export class SceneState {\n\tconstructor() {\n\t\tthis.status = 'idle'; // idle | start | pull | push | stop\n\t\tthis.rows = [];\n\t\tthis.column = {\n\t\t\trows: [],\n\t\t\tline: [],\n\t\t\tarea: {\n\t\t\t\tleft: [],\n\t\t\t\tmid: [],\n\t\t\t\tright: []\n\t\t\t}\n\t\t};\n\t}\n}","import { ColumnModel } from '../../column-type/column.model';\nimport { isObject, isFunction, isArray } from '../../utility/kit';\n\nexport class ColumnView {\n\tconstructor(model) {\n\t\tthis.model = model;\n\n\t\tthis.colspan = 1;\n\t\tthis.rowspan = 1;\n\t\tthis.rowIndex = -1;\n\t\tthis.columnIndex = -1;\n\t}\n\n\tstatic model(model) {\n\t\tif (model) {\n\t\t\tColumnView.assign(model);\n\t\t}\n\t\telse {\n\t\t\tmodel = new ColumnModel();\n\t\t}\n\n\t\tmodel.origin = 'custom';\n\t\treturn model;\n\t}\n\n\tstatic assign(body) {\n\t\tconst etalon = this.model();\n\t\tfor (let key of Object.keys(etalon)) {\n\t\t\tif (!body.hasOwnProperty(key)) {\n\t\t\t\tlet etalonValue = etalon[key];\n\t\t\t\tif (isFunction(etalonValue)) {\n\t\t\t\t\tetalonValue = etalonValue.bind(body);\n\t\t\t\t}\n\t\t\t\tbody[key] = etalonValue;\n\t\t\t} else {\n\t\t\t\tconst value = body[key];\n\t\t\t\tif (isArray(value)) {\n\t\t\t\t\tbody[key] = Array.from(value);\n\t\t\t\t} else if (isObject(value) && !isFunction(value)) {\n\t\t\t\t\tbody[key] = Object.assign({}, etalon[key], value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn body;\n\t}\n}","import { Log } from '../infrastructure/log';\nimport { isFunction, identity } from '../utility/kit';\nimport { Fastdom } from '../services/fastdom';\n\nexport class ScrollLet {\n\tconstructor(plugin, vscroll) {\n\t\tconst { model, observeReply, service } = plugin;\n\t\tconst { scroll, row, pagination, fetch, pipe } = model;\n\n\t\tthis.plugin = plugin;\n\t\n\t\tconst rowHeight = row().height;\n\t\tconst settings = {\n\t\t\tthreshold: pagination().size,\n\t\t\tresetTriggers: []\n\t\t};\n\n\t\tif (rowHeight > 0 || isFunction(rowHeight)) {\n\t\t\tsettings.rowHeight = rowHeight;\n\t\t}\n\n\t\tthis.y = vscroll.factory(settings);\n\t\tthis.y.container.read = Fastdom.measure;\n\t\tthis.y.container.write = Fastdom.mutate;\n\n\t\tconst subscribe =\n\t\t\t(this.y.container.draw$.on || this.y.container.draw$.subscribe)\n\t\t\t\t.bind(this.y.container.draw$);\n\n\t\tconst updateCurrentPage = position => {\n\t\t\tconst { size, current, count } = pagination();\n\t\t\tconst newCurrent = size === 0\n\t\t\t\t? 0\n\t\t\t\t: count - 1 <= position + size\n\t\t\t\t\t? Math.ceil(count / size) - 1\n\t\t\t\t\t: Math.floor((position + size / 2) / size);\n\n\t\t\tif (newCurrent !== current) {\n\t\t\t\tpagination({ current: newCurrent }, {\n\t\t\t\t\tsource: 'scroll.view',\n\t\t\t\t\tbehavior: 'core'\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tconst updateTotalCount = () => {\n\t\t\tconst { effect } = pipe();\n\t\t\tif (effect.hasOwnProperty('memo')) {\n\t\t\t\tconst count = effect.memo.length;\n\t\t\t\tpagination({ count }, {\n\t\t\t\t\tsource: 'scroll.view',\n\t\t\t\t\tbehavior: 'core'\n\t\t\t\t});\n\n\t\t\t\treturn count;\n\t\t\t}\n\n\t\t\treturn pagination().count;\n\t\t};\n\n\t\tsubscribe(e => {\n\t\t\tconst { position } = e;\n\t\t\tupdateCurrentPage(position);\n\n\t\t\tscroll({ cursor: position }, {\n\t\t\t\tsource: 'scroll.view',\n\t\t\t\tbehavior: 'core'\n\t\t\t});\n\t\t});\n\n\t\tswitch (scroll().mode) {\n\t\t\tcase 'virtual': {\n\t\t\t\tthis.y.settings.fetch = (skip, take, d) => {\n\t\t\t\t\tfetch({ skip }, {\n\t\t\t\t\t\tsource: 'scroll.view',\n\t\t\t\t\t\tbehavior: 'core'\n\t\t\t\t\t});\n\n\t\t\t\t\tif (skip === 0) {\n\t\t\t\t\t\tconst count = updateTotalCount();\n\t\t\t\t\t\td.resolve(count);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tservice.invalidate({\n\t\t\t\t\t\t\tsource: 'scroll.view',\n\t\t\t\t\t\t\twhy: 'refresh'\n\t\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\t\tconst count = updateTotalCount();\n\t\t\t\t\t\t\td.resolve(count);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tlet startSource;\n\t\t\t\tconst resetTriggers = new Set(scroll().resetTriggers);\n\n\t\t\t\tobserveReply(model.sceneChanged)\n\t\t\t\t\t.subscribe(e => {\n\t\t\t\t\t\tif (e.hasChanges('status')) {\n\t\t\t\t\t\t\tconst { status } = e.state;\n\t\t\t\t\t\t\tswitch (status) {\n\t\t\t\t\t\t\t\tcase 'start': {\n\t\t\t\t\t\t\t\t\tstartSource = e.tag.source;\n\t\t\t\t\t\t\t\t\tif (resetTriggers.has(startSource)) {\n\t\t\t\t\t\t\t\t\t\tfetch({ skip: 0 }, {\n\t\t\t\t\t\t\t\t\t\t\tsource: 'scroll.view',\n\t\t\t\t\t\t\t\t\t\t\tbehavior: 'core'\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcase 'stop': {\n\t\t\t\t\t\t\t\t\tif (resetTriggers.has(startSource)) {\n\t\t\t\t\t\t\t\t\t\tthis.y.container.reset();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tobserveReply(model.paginationChanged)\n\t\t\t\t\t.subscribe(e => {\n\t\t\t\t\t\tif (e.tag.behavior !== 'core') {\n\t\t\t\t\t\t\tthis.y.container.reset();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tobserveReply(model.scrollChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.tag.source === 'scroll.view') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.hasChanges('mode')) {\n\t\t\t\t\tswitch (e.state.mode) {\n\t\t\t\t\t\tcase 'virtual': {\n\t\t\t\t\t\t\tscroll({\n\t\t\t\t\t\t\t\tmap: {\n\t\t\t\t\t\t\t\t\trowToView: index => index - this.y.container.position,\n\t\t\t\t\t\t\t\t\tviewToRow: index => index + this.y.container.position\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tsource: 'scroll.view',\n\t\t\t\t\t\t\t\tbehavior: 'core'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'default': {\n\t\t\t\t\t\t\tscroll({\n\t\t\t\t\t\t\t\tmap: {\n\t\t\t\t\t\t\t\t\trowToView: identity,\n\t\t\t\t\t\t\t\t\tviewToRow: identity\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (e.hasChanges('left') || e.hasChanges('top')) {\n\t\t\t\t\tthis.invalidate();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tinvalidate() {\n\t\tLog.info('layout', 'invalidate scroll');\n\n\t\tconst { model, table } = this.plugin;\n\t\tconst { view } = table;\n\t\tconst { left, top } = model.scroll();\n\n\t\tFastdom.mutate(() => {\n\t\t\tview.scrollLeft(left);\n\t\t\tview.scrollTop(top);\n\t\t});\n\t}\n\n\tget mode() {\n\t\treturn this.plugin.model.scroll().mode;\n\t}\n}","import { identity } from '../utility/kit';\n\nexport class ScrollState {\n\tconstructor() {\n\t\tthis.mode = 'default';\n\n\t\tthis.top = 0;\n\t\tthis.left = 0;\t\t\n\t\tthis.cursor = 0;\n\n\t\tthis.map = {\n\t\t\trowToView: identity,\n\t\t\tviewToRow: identity\n\t\t};\n\n\t\tthis.resetTriggers = [\n\t\t\t'sort.view',\n\t\t\t'column.filter.view',\n\t\t\t'data.manipulation'\n\t\t];\n\t}\n}","import { CompositeCommandManager } from '../command/composite.command.manager';\n\nexport class SelectionCommandManager extends CompositeCommandManager {\n\tconstructor(model, manager) {\n\t\tsuper(manager);\n\n\t\tthis.model = model;\n\t}\n\n\tfilter(commands) {\n\t\tif (this.model.edit().status === 'edit') {\n\t\t\tconst { cell } = this.model.navigation();\n\t\t\tif (cell && cell.column.type !== 'select') {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\n\t\treturn super.filter(commands);\n\t}\n}\n","import { Command } from '../command/command';\nimport { GRID_PREFIX } from '../definition';\nimport { GridError } from '../infrastructure/error';\nimport { selectColumn, selectColumnIndex, selectRowIndex } from '../navigation/navigation.state.selector';\nimport { SubjectLike } from '../rx/rx';\nimport { isArray, isUndefined, noop } from '../utility/kit';\nimport { SelectionRange } from './selection.range';\nimport { SelectionService } from './selection.service';\nimport { selectionStateFactory as formFactory } from './state/selection.state.factory';\n\nexport class SelectionLet {\n  constructor(plugin, shortcut) {\n    const { model, table, observeReply } = plugin;\n\n    this.plugin = plugin;\n    this.selectionService = new SelectionService(model);\n    this.form = formFactory(model, this.selectionService);\n    this.selectionRange = new SelectionRange(model);\n\n    const commands = this.getCommands();\n    shortcut.register(commands);\n\n    this.toggleRow = commands.get('toggleRow');\n    this.toggleColumn = commands.get('toggleColumn');\n    this.toggleCell = commands.get('toggleCell');\n    this.reset = commands.get('reset');\n    this.stateCheck = new SubjectLike();\n\n    observeReply(model.navigationChanged)\n      .subscribe(e => {\n        if (e.tag.source === 'selection.view') {\n          return;\n        }\n\n        if (e.hasChanges('cell')) {\n          if (this.toggleCell.canExecute(e.state.cell)) {\n            this.toggleCell.execute(e.state.cell);\n          }\n        }\n      });\n\n    const modeClass = `${GRID_PREFIX}-select-${model.selection().mode}`;\n    const unitClass = `${GRID_PREFIX}-select-${model.selection().unit}`;\n\n    const { view } = table;\n    view.addClass(modeClass);\n    view.addClass(unitClass);\n\n    observeReply(model.selectionChanged)\n      .subscribe(e => {\n        if (e.hasChanges('mode')) {\n          const newModeClass = `${GRID_PREFIX}-select-${e.state.mode}`;\n          const oldModeClass = `${GRID_PREFIX}-select-${e.changes.mode.oldValue}`;\n\n          view.removeClass(oldModeClass);\n          view.addClass(newModeClass);\n        }\n\n        if (e.hasChanges('unit')) {\n          const newUnitClass = `${GRID_PREFIX}-select-${e.state.unit}`;\n          const oldUnitClass = `${GRID_PREFIX}-select-${e.changes.unit.oldValue}`;\n\n          view.removeClass(oldUnitClass);\n          view.addClass(newUnitClass);\n        }\n\n        if (e.hasChanges('unit') || e.hasChanges('mode')) {\n          if (!e.hasChanges('items')) {\n            this.form.clear();\n            if (model.selection().items.length) {\n              model.selection({ items: [] }, {\n                source: 'selection.view'\n              });\n            }\n\n            this.form = formFactory(model, this.selectionService);\n          }\n        }\n\n        if (e.hasChanges('items')) {\n          if (e.tag.source !== 'selection.view') {\n            // Don't use commit it came outside already\n\n            const oldEntries = this.selectionService.lookup(e.changes.items.oldValue);\n            this.select(oldEntries, false);\n\n            const newEntries = this.selectionService.lookup(e.state.items);\n            this.select(newEntries, true);\n          }\n          \n          this.stateCheck.next(e.state.items);\n        }\n      });\n\n    observeReply(model.dataChanged)\n      .subscribe(e => {\n        const { unit, items } = model.selection();\n\n        const needUpdateAfterRowsChanged = e.hasChanges('rows') && (unit === 'row' || unit === 'mix' || unit === 'cell');\n        const needUpdateAfterColumnsChanged = e.hasChanges('columns') && (unit === 'column' || unit === 'mix' || unit === 'cell');\n\n        if (needUpdateAfterRowsChanged || needUpdateAfterColumnsChanged) {\n          // re-invalidate selection\n          this.form.clear();\n          const entries = this.selectionService.lookup(items);\n          this.select(entries, true);\n        }\n      });\n  }\n\n  getCommands() {\n    const { model, table } = this.plugin;\n    const { shortcut } = model.selection();\n\n    const toggleActiveRow = new Command({\n      source: 'selection.view',\n      canExecute: () => {\n        const rowIndex = selectRowIndex(model.navigation());\n        const row = this.rows[rowIndex >= 0 ? rowIndex : rowIndex + 1];\n\n        if (!this.form.canSelect(row)) {\n          return false;\n        }\n\n        return model.selection().unit === 'row' && this.rows.length > 0;\n      },\n      execute: () => {\n        const rowIndex = selectRowIndex(model.navigation());\n        const row = this.rows[rowIndex >= 0 ? rowIndex : rowIndex + 1];\n        const commit = this.toggle(row);\n        commit();\n      },\n      shortcut: shortcut.toggleRow\n    });\n\n    const commands = {\n      toggleCell: new Command({\n        source: 'selection.view',\n        canExecute: item => {\n          const selectionState = model.selection();\n          return item && selectionState.mode !== 'range' && (selectionState.unit === 'cell' || selectionState.unit === 'mix');\n        },\n        execute: (item, source) => {\n          const selectionState = model.selection();\n          switch (selectionState.unit) {\n            case 'cell': {\n              const commit = this.toggle(item, source);\n              commit();\n              break;\n            }\n            case 'mix': {\n              if (item.column.type === 'row-indicator') {\n                const commit = this.toggle({ item: item.row, unit: 'row' }, source);\n                commit();\n                break;\n              }\n              else {\n                const commit = this.toggle({ item: item, unit: 'cell' }, source);\n                commit();\n                break;\n              }\n            }\n          }\n        }\n      }),\n      toggleRow: new Command({\n        source: 'selection.view',\n        execute: (item, source) => {\n          const commit = this.toggle(item, source);\n          commit();\n        },\n        canExecute: row => {\n          if (!this.form.canSelect(row)) {\n            return false;\n          }\n\n          const e = {\n            items: isUndefined(row)\n              ? model.scene().rows\n              : [row],\n            source: 'custom',\n            kind: 'toggleRow'\n          };\n\n          if (!row) {\n            return model.selection().toggle.canExecute(e) && this.mode === 'multiple';\n          }\n\n          return model.selection().toggle.canExecute(e);\n        }\n      }),\n      toggleColumn: new Command({\n        source: 'selection.view',\n        execute: (item, source) => {\n          const commit = this.toggle(item, source);\n          commit();\n        }\n      }),\n      commitRow: new Command({\n        source: 'selection.view',\n        canExecute: () => {\n          const column = selectColumn(model.navigation());\n          return column && column.type === 'select';\n        },\n        execute: () => {\n          if (toggleActiveRow.canExecute()) {\n            toggleActiveRow.execute();\n          }\n        },\n        shortcut: model.edit().commitShortcuts['select'] || ''\n      }),\n      toggleActiveRow: toggleActiveRow,\n      togglePrevRow: new Command({\n        source: 'selection.view',\n        canExecute: () => model.selection().unit === 'row' && selectRowIndex(model.navigation()) > 0,\n        execute: () => {\n          const rowIndex = selectRowIndex(model.navigation());\n          const columnIndex = selectColumnIndex(model.navigation());\n\n          const row = this.rows[rowIndex];\n          const commit = this.toggle(row);\n          commit();\n\n          this.navigateTo(rowIndex - 1, columnIndex);\n        },\n        shortcut: shortcut.togglePreviousRow\n      }),\n      toggleNextRow: new Command({\n        source: 'selection.view',\n        canExecute: () => model.selection().unit === 'row' && selectRowIndex(model.navigation()) < this.rows.length - 1,\n        execute: () => {\n          const rowIndex = selectRowIndex(model.navigation());\n          const columnIndex = selectColumnIndex(model.navigation());\n\n          const row = this.rows[rowIndex];\n          const commit = this.toggle(row);\n          commit();\n\n          this.navigateTo(rowIndex + 1, columnIndex);\n        },\n        shortcut: shortcut.toggleNextRow\n      }),\n      toggleActiveColumn: new Command({\n        source: 'selection.view',\n        canExecute: () => model.selection().unit === 'column' && selectColumnIndex(model.navigation()) >= 0,\n        execute: () => {\n          const columnIndex = selectColumnIndex(model.navigation());\n\n          const column = this.columns[columnIndex];\n          const commit = this.toggle(column);\n          commit();\n        },\n        shortcut: shortcut.toggleColumn\n      }),\n      toggleNextColumn: new Command({\n        source: 'selection.view',\n        canExecute: () => model.selection().unit === 'column' && selectColumnIndex(model.navigation()) < this.columns.length - 1,\n        execute: () => {\n          const rowIndex = selectRowIndex(model.navigation());\n          const columnIndex = selectColumnIndex(model.navigation());\n\n          const column = this.columns[columnIndex];\n          const commit = this.toggle(column);\n          commit();\n\n          this.navigateTo(rowIndex, columnIndex + 1);\n        },\n        shortcut: shortcut.toggleNextColumn\n      }),\n      togglePrevColumn: new Command({\n        source: 'selection.view',\n        canExecute: () => model.selection().unit === 'column' && selectColumnIndex(model.navigation()) > 0,\n        execute: () => {\n          const rowIndex = selectRowIndex(model.navigation());\n          const columnIndex = selectColumnIndex(model.navigation());\n\n          const column = this.columns[columnIndex];\n          const commit = this.toggle(column);\n          commit();\n\n          this.navigateTo(rowIndex, columnIndex - 1);\n        },\n        shortcut: shortcut.togglePreviousColumn\n      }),\n      selectAll: new Command({\n        source: 'selection.view',\n        canExecute: () => {\n          const { mode } = model.selection();\n          return mode === 'multiple' || mode === 'range';\n        },\n        execute: () => {\n          let entries = [];\n          switch (model.selection().unit) {\n            case 'row': {\n              entries = this.rows;\n              break;\n            }\n            case 'column': {\n              entries = model.columnList().line;\n              break;\n            }\n            case 'cell':\n            case 'mix': {\n              const { body } = table;\n\n              const buildRange = this.selectionRange.build();\n              const startCell = body.cell(0, 0);\n              const endCell = body.cell(this.rows.length, this.columns.length);\n\n              entries = buildRange(startCell, endCell);\n              break;\n            }\n            default: {\n              throw new GridError('selection.view', `Invalid unit ${model.selection().unit}`);\n            }\n          }\n\n          const commit = this.select(entries, true);\n          commit();\n        },\n        shortcut: shortcut.selectAll\n      })\n    };\n\n    return new Map(\n      Object.entries(commands)\n    );\n  }\n\n  selectRange(startCell, endCell, source) {\n    const buildRange = this.selectionRange.build();\n    const range = buildRange(startCell, endCell);\n    const commit = this.select(range, true, source);\n    commit();\n  }\n\n  toggle(items, source = 'custom') {\n    const { model } = this.plugin;\n    const { toggle } = model.selection();\n\n    items = !arguments.length || isUndefined(items)\n      ? this.rows\n      : isArray(items)\n        ? items : [items];\n\n    const e = { items, source, kind: 'toggle' };\n    if (toggle.canExecute(e)) {\n      toggle.execute(e);\n\n      const { form } = this;\n      form.toggle(items);\n\n      return () => {\n        model.selection({\n          items: this.selectionService.map(form.entries())\n        }, {\n          source: 'selection.view'\n        });\n      };\n    }\n\n    return noop;\n  }\n\n  select(items, state, source = 'custom') {\n    const { model } = this.plugin;\n    const { toggle } = model.selection();\n    const e = {\n      items,\n      source,\n      kind: 'select'\n    };\n\n    if (toggle.canExecute(e)) {\n      toggle.execute(e);\n\n      this.form.select(items, state);\n\n      return () => {\n        const items = this.selectionService.map(this.form.entries());\n        model.selection({ items }, {\n          source: 'selection.view'\n        });\n      };\n    } else {\n      return noop;\n    }\n  }\n\n  state(item) {\n    if (!arguments.length) {\n      return !!this.form.stateAll(this.rows);\n    }\n\n    return this.form.state(item) === true;\n  }\n\n  isIndeterminate(item) {\n    if (!arguments.length) {\n      return this.form.stateAll(this.rows) === null;\n    }\n\n    return this.form.state(item) === null;\n  }\n\n  get selection() {\n    return this.plugin.model.selection();\n  }\n\n  get mode() {\n    return this.selection.mode;\n  }\n\n  get items() {\n    return this.selection.items;\n  }\n\n  get rows() {\n    const { table } = this.plugin;\n    return table.data.rows();\n  }\n\n  get columns() {\n    const { table } = this.plugin;\n    return table.data.columns();\n  }\n\n  navigateTo(rowIndex, columnIndex) {\n    const { table, model } = this.plugin;\n    const { row, column } = table.body.cell(rowIndex, columnIndex).model();\n    model.navigation({\n      cell: {\n        rowIndex,\n        columnIndex,\n        row,\n        column\n      }\n    }, { source: 'selection.view' });\n  }\n}\n","import { GridError } from '../infrastructure/error';\n\nexport class SelectionRange {\n\tconstructor(model) {\n\t\tthis.model = model;\n\t}\n\n\tbuild() {\n\t\tconst rangeMap = {\n\t\t\t'row': this.buildRows.bind(this),\n\t\t\t'column': this.buildColumns.bind(this),\n\t\t\t'cell': this.buildCells.bind(this),\n\t\t\t'mix': this.buildMix.bind(this)\n\t\t};\n\n\t\tconst model = this.model;\n\t\treturn (...args) => {\n\t\t\tconst selection = model.selection();\n\t\t\tconst buildRange = rangeMap[selection.unit];\n\t\t\tif (!buildRange) {\n\t\t\t\tthrow new GridError('range.builder', `Invalid unit ${selection.unit}`);\n\t\t\t}\n\n\t\t\treturn buildRange(...args);\n\t\t};\n\t}\n\n\tbuildRows(startCell, endCell) {\n\t\tconst model = this.model;\n\t\tconst { rows } = model.scene();\n\t\tif (!endCell) {\n\t\t\treturn [rows[startCell.rowIndex]];\n\t\t}\n\n\t\tconst startIndex = Math.min(startCell.rowIndex, endCell.rowIndex);\n\t\tconst endIndex = Math.max(startCell.rowIndex, endCell.rowIndex);\n\t\treturn rows.slice(startIndex, endIndex + 1);\n\t}\n\n\tbuildColumns(startCell, endCell) {\n\t\tif (!endCell) {\n\t\t\treturn [startCell.column];\n\t\t}\n\n\t\tconst columns = this.model.columnList().line;\n\t\tconst startIndex = Math.min(startCell.columnIndex, endCell.columnIndex);\n\t\tconst endIndex = Math.max(startCell.columnIndex, endCell.columnIndex);\n\t\treturn columns.slice(startIndex, endIndex + 1);\n\t}\n\n\tbuildCells(startCell, endCell) {\n\t\tif (!endCell) {\n\t\t\treturn [{\n\t\t\t\tcolumn: startCell.column,\n\t\t\t\trow: startCell.row\n\t\t\t}];\n\t\t}\n\n\t\tconst model = this.model;\n\t\tconst { rows } = model.scene();\n\t\tconst { columns } = model.view();\n\n\t\tconst startRowIndex = Math.min(startCell.rowIndex, endCell.rowIndex);\n\t\tconst endRowIndex = Math.max(startCell.rowIndex, endCell.rowIndex);\n\n\t\tconst startColumnIndex = Math.min(startCell.columnIndex, endCell.columnIndex);\n\t\tconst endColumnIndex = Math.max(startCell.columnIndex, endCell.columnIndex);\n\n\t\tconst selectedRows = rows.slice(startRowIndex, endRowIndex + 1);\n\t\tconst selectedColumns = columns.slice(startColumnIndex, endColumnIndex + 1);\n\n\t\tconst items = [];\n\t\tselectedRows.forEach(row => {\n\t\t\tselectedColumns\n\t\t\t\t.filter(column => column.category === 'data')\n\t\t\t\t.forEach(column => {\n\t\t\t\t\titems.push({\n\t\t\t\t\t\tcolumn: column,\n\t\t\t\t\t\trow: row\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t});\n\n\t\treturn items;\n\t}\n\n\tbuildMix(startCell, endCell) {\n\t\tconst mixUnit = startCell.column.type === 'row-indicator' ? 'row' : 'cell';\n\t\tconst range = (mixUnit === 'row' ? this.buildRows(startCell, endCell) : this.buildCells(startCell, endCell));\n\t\treturn range\n\t\t\t.map(item => ({\n\t\t\t\titem: item,\n\t\t\t\tunit: mixUnit\n\t\t\t}));\n\t}\n}","import { GridError } from '../infrastructure/error';\nimport { getValueFactory } from '../services/value';\nimport { identity, isUndefined } from '../utility/kit';\n\nfunction hashColumnKeyFactory(model) {\n  const { columnKey } = model.selection();\n  if (columnKey === identity) {\n    return column => column.key;\n  }\n\n  // TODO: investigate if is it necessary to use JSON.stringify here\n  return identity;\n}\n\nfunction hashRowKeyFactory(model) {\n  const { rowKey } = model.selection();\n  if (rowKey === identity) {\n    const columns = model.columnList().line;\n    const index = columns.findIndex(column => column.type === 'id');\n    if (index >= 0) {\n      const idColumn = columns[index];\n      const getId = getValueFactory(idColumn);\n      return getId;\n    }\n\n    const { rows } = model.data();\n    return row => rows.indexOf(row);\n  }\n\n  // TODO: investigate if is it necessary to use JSON.stringify here\n  return identity;\n}\n\nfunction hashKeyFactory(model) {\n  const selectionState = model.selection();\n  switch (selectionState.unit) {\n    case 'row':\n      return hashRowKeyFactory(model);\n    case 'column':\n      return hashColumnKeyFactory(model);\n    case 'cell': {\n      const hashColumnKey = hashColumnKeyFactory(model);\n      const hashRowKey = hashRowKeyFactory(model);\n      return key => `${hashColumnKey(key.column)}[${hashRowKey(key.row)}]`;\n    }\n    case 'mix': {\n      const hashColumnKey = hashColumnKeyFactory(model);\n      const hashRowKey = hashRowKeyFactory(model);\n      return (key, entry) => {\n        if (!entry.unit) {\n          return key;\n        }\n\n        switch (entry.unit) {\n          case 'column':\n            return hashColumnKey(key);\n          case 'row':\n            return hashRowKey(key);\n          case 'cell':\n            return `${hashColumnKey(key.column)}[${hashRowKey(key.row)}]`;\n          default:\n            throw new GridError('selection.service', `Invalid unit ${entry.unit}`);\n        }\n      };\n    }\n    default:\n      throw new GridError('selection.service', `Invalid unit ${selectionState.unit}`);\n  }\n}\n\nfunction cellMatchFactory() {\n  return (x, y) => x.column === y.column && x.row === y.row;\n}\n\nfunction keySelector(unit, rowKey, columnKey) {\n  switch (unit) {\n    case 'row':\n      return rowKey;\n    case 'column':\n      return columnKey;\n    case 'cell':\n      return entry => {\n        if (entry.row && entry.column) {\n          return {\n            row: rowKey(entry.row),\n            column: columnKey(entry.column)\n          };\n        }\n\n        return entry;\n      };\n    default:\n      throw new GridError('selection.state', `Invalid unit ${unit}`);\n  }\n}\n\nfunction lookupColumnFactory(model, selectKey) {\n  const columns = model.columnList().line;\n  return items => {\n    const result = [];\n    \n    columns.forEach(column => {\n      const columnKey = selectKey(column);\n      const found = items.indexOf(columnKey) >= 0;\n      if (found) {\n        result.push(column);\n      }\n    });\n\n    return result;\n  };\n}\n\nfunction lookupRowFactory(model, selectKey) {\n  const { rows } = model.data();\n  return items => {\n    const result = [];\n    \n    rows.forEach(row => {\n      const rowKey = selectKey(row);\n      const found = items.indexOf(rowKey) >= 0;\n      if (found) {\n        result.push(row);\n      }\n    });\n\n    return result;\n  };\n}\n\nfunction lookupCellFactory(model, selectKey) {\n  const { rows } = model.data();\n  const columns = model.columnList().line;\n  const match = cellMatchFactory();\n  \n  return items => {\n    const result = [];\n\n    columns.forEach(column => {\n      rows.forEach(row => {\n        const cell = {\n          column: column,\n          row: row\n        };\n\n        const index = items.findIndex(item => match(item, selectKey(cell)));\n        if (index >= 0) {\n          result.push(cell);\n        }\n      });\n    });\n\n    return result;\n  };\n}\n\nexport class SelectionService {\n  constructor(model) {\n    this.model = model;\n  }\n\n  lookup(items, unit) {\n    let entries = [];\n    if (items.length === 0) {\n      return entries;\n    }\n\n    const { model } = this;\n    if (isUndefined(unit)) {\n      unit = model.selection().unit;\n    }\n\n    switch (unit) {\n      case 'column': {\n        const selectKey = this.keyFactory('column');\n        const lookup = lookupColumnFactory(model, selectKey);\n        entries = lookup(items);\n        break;\n      }\n      case 'row': {\n        const selectKey = this.keyFactory('row');\n        const lookup = lookupRowFactory(model, selectKey);\n        entries = lookup(items);\n        break;\n      }\n      case 'cell': {\n        const selectKey = this.keyFactory('cell');\n        const lookup = lookupCellFactory(model, selectKey);\n        entries = lookup(items);\n        break;\n      }\n      case 'mix': {\n        const rowKeys = items.filter(key => key.unit === 'row').map(key => key.item);\n        const columnKeys = items.filter(key => key.unit === 'column').map(key => key.item);\n        const cellKeys = items.filter(key => key.unit === 'cell').map(key => key.item);\n\n        entries.push(...this.lookup(rowKeys, 'row').map(entry => ({ item: entry, unit: 'row' })));\n        entries.push(...this.lookup(columnKeys, 'column').map(entry => ({ item: entry, unit: 'column' })));\n        entries.push(...this.lookup(cellKeys, 'cell').map(entry => ({ item: entry, unit: 'cell' })));\n        break;\n      }\n      default:\n        throw new GridError('selection.state', `Invalid unit ${unit}`);\n    }\n\n    return entries;\n  }\n\n  map(entries) {\n    const selectionState = this.model.selection();\n    const selectKey = this.keyFactory();\n    switch (selectionState.unit) {\n      case 'column':\n      case 'row':\n      case 'cell':\n        return entries.map(selectKey);\n      case 'mix':\n        return entries.map(entry => ({\n          unit: entry.unit,\n          item: selectKey(entry)\n        }));\n      default:\n        throw new GridError('selection.state', `Invalid unit ${selectionState.unit}`);\n    }\n  }\n\n  keyFactory(selectionUnit) {\n    const { rowKey, columnKey, unit } = this.model.selection();\n\n    selectionUnit = selectionUnit || unit;\n    switch (selectionUnit) {\n      case 'column':\n      case 'row':\n      case 'cell':\n        return keySelector(selectionUnit, rowKey, columnKey);\n      case 'mix': {\n        const selectCellKey = keySelector('cell', rowKey, columnKey);\n        const selectRowKey = keySelector('row', rowKey, columnKey);\n        const selectColumnKey = keySelector('column', rowKey, columnKey);\n\n        return entry => {\n          if (!entry.unit) {\n            return identity;\n          }\n\n          switch (entry.unit) {\n            case 'column':\n              return selectColumnKey(entry.item);\n            case 'row':\n              return selectRowKey(entry.item);\n            case 'cell':\n              return selectCellKey(entry.item);\n            default:\n              throw new GridError('selection.service', `Invalid unit ${entry.unit}`);\n          }\n        };\n      }\n      default:\n        throw new GridError('selection.service', `Invalid unit ${selectionUnit}`);\n    }\n  }\n\n  hashFactory() {\n    const selectKey = this.keyFactory();\n    const selectHash = hashKeyFactory(this.model);\n    return entry => {\n      const key = selectKey(entry);\n      const hashKey = selectHash(key, entry);\n      return hashKey;\n    };\n  }\n}\n","import { Resource } from '../resource/resource';\nimport { identity } from '../utility/kit';\nimport { Command } from '../command/command';\n\nexport class SelectionState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.unit = 'cell'; //row|cell|column|mix\n\t\tthis.mode = 'single'; //single|multiple|range|singleOnly\n\t\tthis.items = [];\n\t\tthis.area = 'body'; //body, custom\n\t\tthis.toggle = new Command({ source: 'selection.model' });\n\t\tthis.rowKey = identity;\n\t\tthis.columnKey = identity;\n\t\tthis.shortcut = {\n\t\t\ttoggleRow: 'shift+space|space',\n\t\t\ttogglePreviousRow: 'shift+up',\n\t\t\ttoggleNextRow: 'shift+down',\n\t\t\ttoggleColumn: 'ctrl+space',\n\t\t\ttoggleNextColumn: 'shift+right',\n\t\t\ttogglePreviousColumn: 'shift+left',\n\t\t\tselectAll: 'ctrl+a'\n\t\t};\n\t}\n}\n","import { SubSelectionState } from './selection.state';\n\nexport class MultipleSelectionState extends SubSelectionState {\n\tconstructor(model, service) {\n\t\tsuper(model, service);\n\n\t\tthis.items = new Map();\n\t}\n\n\tentries() {\n\t\treturn Array.from(this.items.values());\n\t}\n\n\tselectCore(item, state, key) {\n\t\tif (state) {\n\t\t\tthis.items.set(key(item), item);\n\t\t}\n\t\telse {\n\t\t\tthis.items.delete(key(item));\n\t\t}\n\t}\n\n\tstateCore(item, key) {\n\t\treturn this.items.has(key(item));\n\t}\n\n\tclearCore() {\n\t\tthis.items = new Map();\n\t}\n}","import { MultipleSelectionState } from './multiple.selection.state';\nimport { isArray } from '../../utility/kit';\n\nexport class RangeSelectionState extends MultipleSelectionState {\n\tconstructor(model, service) {\n\t\tsuper(model, service);\n\t}\n\n\tselect(item, state = true) {\n\t\tif (isArray(item)) {\n\t\t\tthis.clear();\n\t\t}\n\n\t\tsuper.select(item, state);\n\t}\n}","import { GridError } from '../../infrastructure/error';\nimport { SingleSelectionState } from './single.selection.state';\nimport { SingleOnlySelectionState } from './single.only.selection.state';\nimport { MultipleSelectionState } from './multiple.selection.state';\nimport { RangeSelectionState } from './range.selection.state';\n\nexport function selectionStateFactory(model, service) {\n\tconst mode = model.selection().mode;\n\n\tswitch (mode) {\n\t\tcase 'single':\n\t\t\treturn new SingleSelectionState(model, service);\n\t\tcase 'singleOnly':\n\t\t\treturn new SingleOnlySelectionState(model, service);\n\t\tcase 'multiple':\n\t\t\treturn new MultipleSelectionState(model, service);\n\t\tcase 'range':\n\t\t\treturn new RangeSelectionState(model, service);\n\t\tdefault:\n\t\t\tthrow new GridError('selection.state.factory', `Invalid selection mode \"${mode}\"`);\n\t}\n}\n\n","import { Node } from '../../node/node';\nimport { isArray } from '../../utility/kit';\n\nexport class SubSelectionState {\n\tconstructor(model, service) {\n\t\tthis.model = model;\n\t\tthis.service = service;\n\t}\n\n\tselect(item, state = true, key) {\n\t\tkey = key || this.keyFactory();\n\t\tif (isArray(item)) {\n\t\t\titem.forEach(item => this.select(item, state, key));\n\t\t\treturn;\n\t\t}\n\n\t\tif (item instanceof Node) {\n\t\t\tconst { rows } = this.model.data();\n\t\t\tif (rows.length) {\n\t\t\t\titem.rows.forEach(index => this.select(rows[index], state, key));\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.selectCore(item, state, key);\n\t}\n\n\tcanSelect(item) {\n\t\treturn this.canSelectCore(item);\n\t}\n\n\ttoggle(item) {\n\t\tconst state = this.state(item);\n\t\treturn this.select(item, state === null || !state);\n\t}\n\n\tstate(item, key) {\n\t\tkey = key || this.keyFactory();\n\t\tif (isArray(item)) {\n\t\t\tconst all = item.every(item => this.state(item, key));\n\t\t\treturn all ? true : item.some(item => this.state(item, key)) ? null : false;\n\t\t}\n\n\t\tif (item instanceof Node) {\n\t\t\tconst { rows } = this.model.data();\n\t\t\tif (rows.length) {\n\t\t\t\tconst all = item.rows.length && item.rows.every(index => this.state(rows[index], key));\n\t\t\t\treturn all ? true : item.rows.some(index => this.state(rows[index], key)) ? null : false;\n\t\t\t}\n\t\t}\n\n\t\treturn this.stateCore(item, key);\n\t}\n\n\tstateAll(items) {\n\t\tif (!items.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst key = this.keyFactory();\n\n\t\tconst notSelected = items.findIndex(item => this.state(item, key) === false);\n\t\tif (notSelected < 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn notSelected === 0\n\t\t\t? items.every(item => this.state(item, key) === false)\n\t\t\t\t? false\n\t\t\t\t: null\n\t\t\t: null;\n\t}\n\n\tkeyFactory() {\n\t\treturn this.service.hashFactory();\n\t}\n\n\tclear() {\n\t\tthis.clearCore();\n\t}\n\n\tentries() {\n\t\treturn [];\n\t}\n\n\tselectCore() {\n\t}\n\n\tclearCore() {\n\t}\n\n\tstateCore() {\n\t\treturn false;\n\t}\n\n\tcanSelectCore() {\n\t\treturn true;\n\t}\n}","import { SubSelectionState } from './selection.state';\n\nexport class SingleOnlySelectionState extends SubSelectionState {\n\tconstructor(model, service) {\n\t\tsuper(model, service);\n\n\t\tthis.item = null;\n\t}\n\n\tentries() {\n\t\treturn this.item ? [this.item] : [];\n\t}\n\n\tselectCore(item, state) {\n\t\tif (state) {\n\t\t\tthis.item = item;\n\t\t}\n\t}\n\n\tcanSelectCore(item) {\n\t\treturn item !== this.item;\n\t}\n\n\tstateCore(item, key) {\n\t\treturn this.item !== null && key(item) === key(this.item);\n\t}\n\n\tclearCore() {\n\t\tthis.item = null;\n\t}\n}","import { SubSelectionState } from './selection.state';\n\nexport class SingleSelectionState extends SubSelectionState {\n\tconstructor(model, service) {\n\t\tsuper(model, service);\n\n\t\tthis.item = null;\n\t}\n\n\tentries() {\n\t\treturn this.item ? [this.item] : [];\n\t}\n\n\tselectCore(item, state) {\n\t\tif (state) {\n\t\t\tthis.item = item;\n\t\t}\n\t\telse {\n\t\t\tthis.item = null;\n\t\t}\n\t}\n\n\tstateCore(item, key) {\n\t\treturn this.item !== null && key(item) === key(this.item);\n\t}\n\n\tclearCore() {\n\t\tthis.item = null;\n\t}\n}","export class Aggregation {\n\tconstructor() {\n\t}\n\n\tstatic first(rows, getValue) {\n\t\tif (!rows.length) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn getValue(rows[0]);\n\t}\n\n\tstatic last(rows, getValue) {\n\t\tconst length = rows.length;\n\t\tif (!length) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn getValue(rows[length - 1]);\n\t}\n\n\tstatic max(rows, getValue) {\n\t\tlet length = rows.length;\n\t\tif (!length) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet max = Number.MIN_SAFE_INTEGER;\n\t\twhile (length--) {\n\t\t\tmax = Math.max(max, getValue(rows[length]));\n\t\t}\n\n\t\treturn max;\n\t}\n\n\tstatic min(rows, getValue) {\n\t\tlet length = rows.length;\n\t\tif (!length) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet min = Number.MAX_SAFE_INTEGER;\n\t\twhile (length--) {\n\t\t\tmin = Math.min(min, getValue(rows[length]));\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tstatic minMax(rows, getValue) {\n\t\tlet length = rows.length;\n\t\tif (!length) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet min = Number.MAX_SAFE_INTEGER;\n\t\tlet max = Number.MIN_SAFE_INTEGER;\n\t\twhile (length--) {\n\t\t\tconst value = getValue(rows[length]);\n\t\t\tmin = Math.min(min, value);\n\t\t\tmax = Math.max(max, value);\n\t\t}\n\n\t\treturn [min, max];\n\t}\n\n\tstatic avg(rows, getValue, options) {\n\t\tconst length = rows.length;\n\t\tif (!length) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (options.distinct) {\n\t\t\tconst set = new Set();\n\t\t\treturn Aggregation.sum(rows, getValue, options, set) / set.size;\n\t\t}\n\n\t\treturn Aggregation.sum(rows, getValue, options) / length;\n\t}\n\n\tstatic sum(rows, getValue, options, set) {\n\t\tlet length = rows.length;\n\t\tif (!length) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet sum = 0;\n\t\tif (options.distinct) {\n\t\t\tset = set || new Set();\n\t\t\twhile (length--) {\n\t\t\t\tconst value = getValue(rows[length]);\n\t\t\t\tif (!set.has(value)) {\n\t\t\t\t\tsum += value;\n\t\t\t\t\tset.add(value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\twhile (length--) {\n\t\t\t\tsum += Number(getValue(rows[length]));\n\t\t\t}\n\t\t}\n\n\t\treturn sum;\n\t}\n\n\tstatic join(rows, getValue, options) {\n\t\tconst length = rows.length;\n\t\tif (!length) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet result = getValue(rows[0]);\n\t\tconst separator = options.separator || '';\n\n\t\tif (options.distinct) {\n\t\t\tconst set = new Set();\n\t\t\tlet value = result;\n\t\t\tset.add(value);\n\n\t\t\tlet i = 1;\n\t\t\twhile (i < length) {\n\t\t\t\tvalue = getValue(rows[i]);\n\n\t\t\t\tif (!set.has(value)) {\n\t\t\t\t\tresult += separator + value;\n\t\t\t\t\tset.add(value);\n\t\t\t\t}\n\n\t\t\t\ti++;\n\t\t\t}\n\t\t} else {\n\t\t\tlet i = 1;\n\t\t\twhile (i < length) {\n\t\t\t\tresult += separator + getValue(rows[i]);\n\t\t\t\ti++;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic count(rows, getValue, options) {\n\t\tlet length = rows.length;\n\t\tif (!length) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (options.distinct) {\n\t\t\tlet set = new Set();\n\t\t\twhile (length--) {\n\t\t\t\tconst count = Number(getValue(rows[length]));\n\t\t\t\tset.add(count);\n\t\t\t}\n\n\t\t\treturn set.size;\n\t\t}\n\n\t\treturn length;\n\t}\n\n}\n","import {\n\tidentity,\n\tisObject,\n\tisArray,\n\tisBoolean,\n\tisDate,\n\tisNumber,\n\tisEmail,\n\tisString,\n\tisUrl,\n\tisImage,\n\tisUndefined,\n\tmatchISO8601\n} from '../utility/kit';\n\n// TODO: right now we check the empty result on null, \n// we need to have a way to make it more explicitly\nexport function parseFactory(type, editor) {\n\tswitch (type) {\n\t\tcase 'id': {\n\t\t\ttype = editor ? editor : 'text';\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tswitch (type) {\n\t\tcase 'text':\n\t\tcase 'email':\n\t\tcase 'url':\n\t\tcase 'password':\n\t\t\treturn parseText;\n\t\tcase 'number':\n\t\tcase 'currency':\n\t\t\treturn parseNumber;\n\t\tcase 'date':\n\t\t\treturn parseDate;\n\t\tcase 'time':\n\t\tcase 'datetime':\n\t\t\treturn parseDateTime;\n\t\tcase 'bool':\n\t\t\treturn parseBool;\n\t\tcase 'array':\n\t\t\treturn parseArray;\n\t\tdefault:\n\t\t\treturn identity;\n\t}\n}\n\nexport function compareParseFactory(type, editor) {\n\tswitch (type) {\n\t\tcase 'id': {\n\t\t\ttype = editor ? editor : 'text';\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tswitch (type) {\n\t\tcase 'date':\n\t\t\treturn x => {\n\t\t\t\tconst date = parseDate(x);\n\t\t\t\tif (date) {\n\t\t\t\t\treturn date.getTime();\n\t\t\t\t}\n\n\t\t\t\treturn date;\n\t\t\t};\n\t\tcase 'time':\n\t\tcase 'datetime':\n\t\t\treturn x => {\n\t\t\t\tconst date = parseDateTime(x);\n\t\t\t\tif (date) {\n\t\t\t\t\treturn date.getTime();\n\t\t\t\t}\n\n\t\t\t\treturn date;\n\t\t\t};\n\t\tdefault: {\n\t\t\treturn parseFactory(type, editor);\n\t\t}\n\t}\n}\n\n\n\nexport function resolveType(values) {\n\tconst types = values\n\t\t.filter(x => !(isUndefined(x) || x === null || x === ''))\n\t\t.map(getType);\n\n\tif (types.length) {\n\t\tconst test = types[0];\n\t\tif (types.every(x => x === test)) {\n\t\t\treturn test;\n\t\t}\n\t}\n\n\treturn 'text';\n}\n\nexport function getType(value) {\n\tif (isArray(value)) {\n\t\tif (value.length) {\n\t\t\tconst itemType = findType(value[0]);\n\t\t\tif (!isPrimitive(itemType)) {\n\t\t\t\treturn 'collection';\n\t\t\t}\n\t\t}\n\n\t\treturn 'array';\n\t}\n\n\tif (isNumber(value)) {\n\t\treturn 'number';\n\t}\n\n\tif (isBoolean(value)) {\n\t\treturn 'bool';\n\t}\n\n\tif (isDate(value)) {\n\t\treturn 'datetime';\n\t}\n\n\tif (isString(value)) {\n\t\treturn 'text';\n\t}\n\n\tif (isObject(value)) {\n\t\treturn 'object';\n\t}\n\n\treturn 'text';\n\n}\n\nexport function inferType(values) {\n\tconst types = values\n\t\t.filter(x => !(isUndefined(x) || x === null || x === ''))\n\t\t.map(findType);\n\n\tif (types.length) {\n\t\tconst test = types[0];\n\t\tif (types.every(x => x === test)) {\n\t\t\treturn test;\n\t\t}\n\t}\n\n\treturn 'text';\n}\n\nexport function findType(value) {\n\tif (isArray(value)) {\n\t\tif (value.length) {\n\t\t\tconst itemType = findType(value[0]);\n\t\t\tif (!isPrimitive(itemType)) {\n\t\t\t\treturn 'collection';\n\t\t\t}\n\t\t}\n\n\t\treturn 'array';\n\t}\n\n\tif (likeNumber(value)) {\n\t\treturn 'number';\n\t}\n\n\tif (isBoolean(value)) {\n\t\treturn 'bool';\n\t}\n\n\tif (likeDateTime(value)) {\n\t\treturn 'datetime';\n\t}\n\n\tif (likeDate(value)) {\n\t\treturn 'date';\n\t}\n\n\tif (isEmail(value)) {\n\t\treturn 'email';\n\t}\n\n\tif (isImage(value)) {\n\t\treturn 'image';\n\t}\n\n\tif (isUrl(value)) {\n\t\treturn 'url';\n\t}\n\n\tif (isString(value)) {\n\t\treturn 'text';\n\t}\n\n\tif (isObject(value)) {\n\t\treturn 'object';\n\t}\n\n\treturn 'text';\n}\n\nexport function isPrimitive(type) {\n\tswitch (type) {\n\t\tcase 'date':\n\t\tcase 'time':\n\t\tcase 'bool':\n\t\tcase 'text':\n\t\tcase 'number':\n\t\tcase 'email':\n\t\tcase 'url':\n\t\t\treturn true;\n\t\tdefault:\n\t\t\treturn false;\n\t}\n}\n\nfunction likeDateTime(value) {\n\tif (value === null || isUndefined(value) || value === '') {\n\t\treturn false;\n\t}\n\n\tif (value instanceof Date) {\n\t\treturn true;\n\t}\n\n\tvalue = '' + value;\n\n\treturn matchISO8601(value);\n}\n\nfunction likeDate(value) {\n\tif (value === null || isUndefined(value) || value === '') {\n\t\treturn false;\n\t}\n\n\tif (value instanceof Date) {\n\t\treturn true;\n\t}\n\n\tvalue = '' + value;\n\n\t// part of ISO_8601 for dates\n\treturn !!value.match(/^(\\d{4})(-(\\d{2})(-(\\d{2})))$/);\n}\n\nfunction likeNumber(value) {\n\tif (isNaN(value)) {\n\t\treturn false;\n\t}\n\n\tconst number = Number.parseFloat(value);\n\treturn !isNaN(number) && isFinite(number);\n}\n\nfunction parseBool(value) {\n\treturn value === null || isUndefined(value)\n\t\t? value\n\t\t: !!value;\n}\n\nfunction parseText(value) {\n\treturn value === null || isUndefined(value)\n\t\t? value\n\t\t: '' + value;\n}\n\nfunction parseDate(value) {\n\tif (value === null || isUndefined(value)) {\n\t\treturn value\n\t}\n\n\tif (value === '') {\n\t\treturn null;\n\t}\n\n\tif (value instanceof Date) {\n\t\treturn new Date(\n\t\t\tvalue.getFullYear(),\n\t\t\tvalue.getMonth(),\n\t\t\tvalue.getDate(),\n\t\t\t0, 0, 0, 0\n\t\t);\n\t}\n\n\tif (likeDate(value) || matchISO8601(value)) {\n\t\tconst yearMonthDay = ('' + value).split('-');\n\t\treturn new Date(\n\t\t\tNumber.parseInt(yearMonthDay[0]),\n\t\t\tNumber.parseInt(yearMonthDay[1]) - 1,\n\t\t\tNumber.parseInt(yearMonthDay[2]),\n\t\t\t0, 0, 0, 0\n\t\t);\n\t}\n\n\treturn new Date('' + value);\n}\n\nfunction parseDateTime(value) {\n\tif (value === null || isUndefined(value)) {\n\t\treturn value\n\t}\n\n\tif (value === '') {\n\t\treturn null;\n\t}\n\n\tif (value instanceof Date) {\n\t\treturn value;\n\t}\n\n\tconst date = new Date('' + value);\n\treturn date;\n}\n\nfunction parseNumber(value) {\n\tif (value === null || isUndefined(value)) {\n\t\treturn value\n\t}\n\n\tif (value === '' || isNaN(value)) {\n\t\treturn null;\n\t}\n\n\tconst number = Number.parseFloat(value);\n\tif (!isNaN(number) && isFinite(number)) {\n\t\treturn number;\n\t}\n\n\treturn null;\n}\n\nfunction parseArray(value) {\n\treturn value;\n}\n","import cssEscape from 'css.escape';\nimport * as markup from './markup';\n\nexport function sheet(id, source) {\n\tconst sheetId = `${id}-${source}`;\n\tlet sheet = document.getElementById(sheetId);\n\tconst getSheet = () => {\n\t\tif (!sheet) {\n\t\t\tsheet = document.createElement('style');\n\t\t\tsheet.type = 'text/css';\n\t\t\tsheet.id = escapeAttr(sheetId);\n\t\t\tdocument.getElementsByTagName('head')[0].appendChild(sheet);\n\t\t}\n\n\t\treturn sheet;\n\t};\n\n\treturn {\n\t\tset: css => {\n\t\t\tconst sheet = getSheet();\n\t\t\tconst lines = markup.buildLines(css);\n\t\t\tconst styleId = `#${escape(id)}`;\n\t\t\tsheet.innerHTML = lines.map(line => `${styleId} ${line}`).join('\\n');\n\t\t},\n\t\tremove: () => {\n\t\t\tif (sheet) {\n\t\t\t\tsheet.parentNode.removeChild(sheet);\n\t\t\t}\n\t\t}\n\t};\n}\n\nexport function escapeAttr(name) {\n\treturn ('' + name).replace(/\\s|\\t|\\n|\"|'/g, '_');\n}\n\nexport function escape(name) {\n\treturn cssEscape(escapeAttr(name));\n}\n","import { isUndefined } from '../utility/kit';\n\nexport function css(element, property, value) {\n\tconst normalizedProperty = normalize(property);\n\tif (isUndefined(value)) {\n\t\treturn element.style[normalizedProperty];\n\t} else {\n\t\telement.style[normalizedProperty] = value;\n\t\treturn normalizedProperty;\n\t}\n}\n\nfunction normalize(property) {\n\treturn property.replace(/-([a-z])/g, upperFirst);\n}\n\nfunction upperFirst(match, letter) {\n\treturn letter.toUpperCase();\n}\n\nexport function parents(element) {\n\tconst path = [];\n\twhile (element) {\n\t\tpath.unshift(element);\n\t\telement = element.parentNode;\n\t}\n\n\treturn path;\n}\n\nexport function eventPath(event) {\n\tconst path = (event.composedPath && event.composedPath()) || event.path;\n\tconst target = event.target;\n\n\tif (path) {\n\t\t// Safari doesn't include Window, but it should.\n\t\treturn (path.indexOf(window) < 0) ? path.concat(window) : path;\n\t}\n\n\tif (target === window) {\n\t\treturn [window];\n\t}\n\n\treturn [target].concat(parents(target), window);\n}\n\nexport function elementFromPoint(x, y) {\n\treturn document.elementFromPoint(x, y);\n}\n","import FastDom from 'fastdom';\n\nexport class Fastdom {\n    static mutate(task) {\n        return Fastdom.invoke(() => FastDom.mutate(task));\n    }\n\n    static measure(task) {\n        return Fastdom.invoke(() => FastDom.measure(task));\n    }\n\n    static clear(task) {\n        return Fastdom.invoke(() => FastDom.clear(task));\n    }\n\n    static invoke(task) {\n        return task();\n    }\n}\n","export function guid() {\n\tfunction p8(s) {\n\t\tconst p = (Math.random().toString(16) + '000000000').substr(2, 8);\n\t\treturn s ? '-' + p.substr(0, 4) + '-' + p.substr(4, 4) : p;\n\t}\n\n\treturn p8() + p8(true) + p8(true) + p8();\n}","import { Defer } from '../infrastructure/defer';\nimport { GridError } from '../infrastructure/error';\nimport { isFunction } from '../utility/kit';\nimport { Fastdom } from './fastdom';\n\nexport function jobLine(delay) {\n\tlet defer = null;\n\tconst reset = () => {\n\t\tif (defer) {\n\t\t\tdefer.reject();\n\t\t\tdefer = null;\n\t\t}\n\t};\n\n\treturn job => {\n\t\treset();\n\n\t\tif (!isFunction(job)) {\n\t\t\tthrow new GridError('job.line', 'job is not invocable');\n\t\t}\n\n\t\tconst doJob = () => {\n\t\t\tif (defer) {\n\t\t\t\tjob();\n\t\t\t\tdefer.resolve();\n\t\t\t\tdefer = null;\n\t\t\t}\n\t\t};\n\n\t\tdefer = jobLine.run(doJob, delay);\n\t\treturn defer.promise;\n\t};\n}\n\njobLine.run = (job, delay) => {\n\tconst defer = new Defer();\n\n\tconst token = Fastdom.invoke(() => setTimeout(job, delay));\n\tdefer.promise.catch(() => clearTimeout(token));\n\n\treturn defer;\n};","import { compileGet, compileSet } from '../services/path';\nimport { getValue } from '../services/value';\nimport { isFunction } from '../utility/kit';\n\nexport function getLabel(row, column) {\n\treturn column.$label\n\t\t? isFunction(column.$label) ? column.$label({ $row: row }) : column.$label\n\t\t: column.label\n\t\t\t? isFunction(column.label) ? column.label(row) : column.label\n\t\t\t: column.labelPath\n\t\t\t\t? compileGet(column.labelPath)(row)\n\t\t\t\t: getValue(row, column);\n}\n\nexport function getLabelFactory(column) {\n\tconst get = column.$label\n\t\t? isFunction(column.$label) ? row => column.$label({ $row: row }) : row => column.label\n\t\t: column.label\n\t\t\t? isFunction(column.label) ? row => column.label(row) : row => column.label\n\t\t\t: column.labelPath\n\t\t\t\t? compileGet(column.labelPath)\n\t\t\t\t: row => getValue(row, column);\n\n\treturn get;\n}\n\nexport function setLabel(row, column, label) {\n\tif (isFunction(column.$label)) {\n\t\treturn column.$label({ $row: row, $label: label });\n\t}\n\n\tif (isFunction(column.label)) {\n\t\treturn column.label(row, label);\n\t}\n\n\tif (column.labelPath) {\n\t\treturn compileSet(column.labelPath)(row, label);\n\t}\n}","export function build(style) {\n\treturn buildLines(style).join('\\n');\n}\n\nexport function buildLines(style) {\n\treturn Object\n\t\t.keys(style)\n\t\t.reduce((memo, key) => {\n\t\t\tconst entry = style[key];\n\t\t\tconst body = Object\n\t\t\t\t.keys(entry)\n\t\t\t\t.reduce((memo, key) => {\n\t\t\t\t\tmemo.push(`\\t${key}:${entry[key]} !important;`);\n\t\t\t\t\treturn memo;\n\t\t\t\t}, []);\n\n\t\t\tmemo.push(`${key}{\\n${body.join('\\n')}\\n}`);\n\t\t\treturn memo;\n\t\t}, []);\n}","import {assignWith} from '../utility/kit';\n\nexport function merge(settings) {\n\tconst context = assignWith({\n\t\tequals: (l, r) => l === r,\n\t\tupdate: (l, r /*left, i*/) => {\n\t\t\tassignWith(l, r);\n\t\t\treturn l;\n\t\t},\n\t\tremove: (l, left, i) => {\n\t\t\tleft.splice(i, 1);\n\t\t\treturn l;\n\t\t},\n\t\tinsert: (r, left) => {\n\t\t\tleft.push(r);\n\t\t\treturn r;\n\t\t}\n\t}, settings);\n\n\treturn (left, right, result) => {\n\t\tconst ls = left.slice();\n\t\tconst rs = right.slice();\n\t\tlet updated = 0;\n\t\tlet removed = 0;\n\n\t\tresult = result || left;\n\t\tfor (let i = 0, lsLength = ls.length; i < lsLength; i++) {\n\t\t\tconst l = ls[i];\n\t\t\tlet matched = false;\n\t\t\tfor (let j = 0, rsLength = rs.length; j < rsLength; j++) {\n\t\t\t\tconst r = rs[j];\n\t\t\t\tif (context.equals(l, r, i, j)) {\n\t\t\t\t\tcontext.update(l, r, result, result.indexOf(l));\n\t\t\t\t\tupdated++;\n\t\t\t\t\tmatched = true;\n\t\t\t\t\trs.splice(j, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!matched) {\n\t\t\t\tcontext.remove(l, result, result.indexOf(l));\n\t\t\t\tremoved++;\n\t\t\t}\n\t\t}\n\n\t\tconst inserted = rs.length;\n\t\tfor (let i = 0; i < inserted; i++) {\n\t\t\tcontext.insert(rs[i], result);\n\t\t}\n\n\t\tif (context.sort) {\n\t\t\tleft.sort(context.sort(left, right));\n\t\t}\n\n\t\treturn {updated, removed, inserted};\n\t};\n}","export class Middleware {\n\tconstructor(pipes) {\n\t\tthis.pipes = pipes;\n\t}\n\n\trun(context, memo = []) {\n\t\tconst tasks = this.pipes\n\t\t\t.map(pipe => memo =>\n\t\t\t\tnew Promise((resolve, reject) =>\n\t\t\t\t\tpipe(memo, context, resolve, reject)));\n\n\t\treturn start(tasks, memo);\n\t}\n}\n\nfunction start(tasks, memo) {\n\ttasks = Array.from(tasks);\n\treturn new Promise((resolve, reject) => {\n\t\tinvoke(memo);\n\n\t\tfunction invoke(memo) {\n\t\t\tif (tasks.length) {\n\t\t\t\tconst task = tasks.shift();\n\t\t\t\tconst promise = task(memo);\n\t\t\t\tpromise\n\t\t\t\t\t.then(invoke)\n\t\t\t\t\t.catch(ex => {\n\t\t\t\t\t\treject(ex);\n\t\t\t\t\t\tthrow ex;\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresolve(memo);\n\t\t\t}\n\t\t}\n\t});\n}","import {flatten} from '../utility/kit';\n\nexport function stringifyFactory(property) {\n\tswitch (property) {\n\t\tcase 'filter':\n\t\t\treturn filter;\n\t\tcase 'sort':\n\t\t\treturn sort;\n\t\tcase 'group':\n\t\tcase 'pivot':\n\t\t\treturn transformBy(property);\n\t\tdefault:\n\t\t\treturn () => '';\n\t}\n}\n\nfunction filter(model) {\n\tconst values = Object.values(model.by)\n\t\t.map(column => column.items);\n\n\tif (values.length === 0) return '';\n\n\tconst by = flatten(values).join(', ');\n\treturn `filter ${by}`;\n}\n\nfunction sort(model) {\n\tconst keys = [];\n\tfor (let item of model.by) {\n\t\tfor (let key in item) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\n\tif (keys.length === 0) return '';\n\n\tconst by = keys.join(', ');\n\treturn `sort ${by}`;\n}\n\nfunction transformBy(property) {\n\treturn model => {\n\t\tconst keys = model.by;\n\t\tif (keys.length === 0) return '';\n\n\t\tconst by = keys.join(', ');\n\t\treturn `${property} ${by}`;\n\t};\n}","import { GridError } from '../infrastructure/error';\n\nexport function key(pair) {\n\tconst key = Object.keys(pair)[0];\n\tif (!key) {\n\t\tthrow new GridError(\n\t\t\t'pair',\n\t\t\t`Key is not defined in \"${pair}\"`);\n\t}\n\n\treturn key;\n}\n\nexport function index(pairs, pairKey) {\n\treturn pairs.map(key).findIndex(k => k === pairKey);\n}\n\nexport function value(pair) {\n\tconst pairKey = key(pair);\n\treturn pair[pairKey];\n}\n\nexport function map(pairs) {\n\treturn pairs.reduce((memo, pair) => {\n\t\tconst pairKey = key(pair);\n\t\tmemo[pairKey] = pair[pairKey];\n\t\treturn memo;\n\t}, {});\n}\n\n","import { Log } from '../infrastructure/log';\n\nexport function compile(parts) {\n\tconst last = parts.length - 1;\n\tconst accessor = getAccessor(parts, last);\n\tconst key = parts[last];\n\tif (accessor) {\n\t\treturn function (entry, value) {\n\t\t\tif (arguments.length === 2) {\n\t\t\t\tconst host = accessor(entry);\n\t\t\t\tif (host) {\n\t\t\t\t\thost[key] = value;\n\t\t\t\t}\n\n\t\t\t\tLog.warn('path.compile', `Object reference ${parts.join('.')} is not set.`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst host = accessor(entry);\n\t\t\tif (host) {\n\t\t\t\treturn host[key];\n\t\t\t}\n\n\t\t\tLog.warn('path.compile', `Object reference ${parts.join('.')} is not set.`);\n\t\t\treturn null;\n\t\t};\n\t}\n\n\treturn function (entry, value) {\n\t\tif (!entry) {\n\t\t\tLog.warn('path.compile', `Object reference ${parts.join('.')} is not set.`);\n\t\t\treturn null;\n\t\t}\n\n\t\tif (arguments.length === 2) {\n\t\t\tentry[key] = value;\n\t\t}\n\n\t\treturn entry[key];\n\t};\n}\n\nexport function compileGet(path) {\n\tconst parts = path.split('.');\n\tconst last = parts.length - 1;\n\tconst accessor = getAccessor(parts, last);\n\tconst key = parts[last];\n\tif (accessor) {\n\t\treturn function (entry) {\n\t\t\tconst host = accessor(entry);\n\t\t\tif (host) {\n\t\t\t\treturn host[key];\n\t\t\t}\n\n\t\t\tLog.warn('path.compile', `Object reference ${parts.join('.')} is not set.`);\n\t\t\treturn null;\n\t\t};\n\t}\n\n\treturn function (entry) {\n\t\tif (!entry) {\n\t\t\tLog.warn('path.compile', `Object reference ${parts.join('.')} is not set.`);\n\t\t\treturn null;\n\t\t}\n\n\t\treturn entry[key];\n\t};\n}\n\nexport function compileSet(path) {\n\tconst parts = path.split('.');\n\tconst last = parts.length - 1;\n\tconst accessor = getAccessor(parts, last);\n\tconst key = parts[last];\n\tif (accessor) {\n\t\treturn function (entry, value) {\n\t\t\tconst host = accessor(entry);\n\t\t\tif (host) {\n\t\t\t\thost[key] = value;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tLog.warn('path.compile', `Object reference ${parts.join('.')} is not set.`);\n\t\t};\n\t}\n\n\treturn function (entry, value) {\n\t\tif (entry) {\n\t\t\tentry[key] = value;\n\t\t\treturn;\n\t\t}\n\n\t\tLog.warn('path.compile', `Object reference ${parts.join('.')} is not set.`);\n\t};\n}\n\nfunction getAccessor(parts, last) {\n\tif (parts.length > 1) {\n\t\tconst firstPart = parts[0];\n\t\treturn parts\n\t\t\t.filter((_, index) => index > 0 && index !== last)\n\t\t\t.reduce(\n\t\t\t\t(accessor, part) => {\n\t\t\t\t\treturn graph => {\n\t\t\t\t\t\tconst host = accessor(graph);\n\t\t\t\t\t\tif (host) {\n\t\t\t\t\t\t\treturn host[part];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tgraph => {\n\t\t\t\t\tif (graph) {\n\t\t\t\t\t\treturn graph[firstPart];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\treturn null;\n}\n","import { isObject, yes, escapeRegexp } from '../utility/kit';\nimport { compileGet } from './path';\n\nexport function predicateFactory(search) {\n\tif (isObject(search)) {\n\t\t// TODO: improve performance\n\t\tconst getters = Object\n\t\t\t.keys(search)\n\t\t\t.map(key => {\n\t\t\t\tconst value = compileGet(key);\n\t\t\t\treturn { key, value };\n\t\t\t});\n\n\t\tconst { length } = getters;\n\t\tswitch (length) {\n\t\t\tcase 0: {\n\t\t\t\treturn yes;\n\t\t\t}\n\t\t\tcase 1: {\n\t\t\t\tconst get = getters[0];\n\t\t\t\tconst pattern = search[get.key];\n\t\t\t\tif (!pattern) {\n\t\t\t\t\treturn yes;\n\t\t\t\t}\n\n\t\t\t\tconst expr = new RegExp(pattern, 'gi');\n\t\t\t\treturn item => expr.test(get.value(item));\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn item =>\n\t\t\t\t\tgetters.reduce((memo, get) =>\n\t\t\t\t\t\t(memo && new RegExp(search[get.key], 'gi').test(get.value(item)) || search[get.key] === ''),\n\t\t\t\t\t\ttrue);\n\n\t\t\t}\n\t\t}\n\t}\n\n\tconst pattern = escapeRegexp(search);\n\tconst expr = new RegExp(pattern, 'gi');\n\treturn item => {\n\t\texpr.lastIndex = 0;\n\t\treturn expr.test(item);\n\t}\n}","export class Scheduler {\n\tconstructor() {\n\t\tthis.tasks = [];\n\t}\n\n\tnext() {\n\t\tthis.tasks.shift();\n\t\tconst task = this.tasks[0];\n\t\tif (task) {\n\t\t\ttask();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tadd(task) {\n\t\tthis.tasks.push(task);\n\t\tif (this.tasks.length === 1) {\n\t\t\ttask();\n\t\t}\n\n\t\treturn this.tasks.length;\n\t}\n}","import { Log } from '../infrastructure/log';\n\nexport class TextSelection {\n  static set(element) {    \n    if (document.body.createTextRange) {\n      const range = document.body.createTextRange();\n      range.moveToElementText(element);\n      range.select();\n    } else if (window.getSelection) {\n      const selection = window.getSelection();\n      const range = document.createRange();\n      range.selectNodeContents(element);\n      selection.removeAllRanges();\n      selection.addRange(range);\n    } else {\n      Log.error('text.selection', 'Could not select text in element: Unsupported browser.');\n    }\n  }\n  \n  static clear() {\n    if (window.getSelection) {\n      const selection = window.getSelection();\n      selection.removeAllRanges();\t\n    }\n  }\n}\n","function firstRowTitle(index, row) {\n\treturn row[index];\n}\nfunction numericTitle(index) {\n\treturn index;\n}\nfunction alphaTitle(index) {\n\tconst alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\n\tif (index < alphabet.length) {\n\t\treturn alphabet[index];\n\t} else {\n\t\tconst indexFirst = Math.floor(index / alphabet.length - 1);\n\t\tconst indexSecond = index % alphabet.length;\n\t\treturn `${alphabet[indexFirst]}${alphabet[indexSecond]}`;\n\t}\n}\n\nexport {\n\tfirstRowTitle,\n\tnumericTitle,\n\talphaTitle\n};","function upload(element) {\n\tconst { ownerDocument } = element;\n\tconst input = ownerDocument.createElement('input');\n\tinput.type = 'file';\n\tinput.style.display = 'none';\n\t\n\telement.appendChild(input);\n\tinput.click();\n}\n\nexport {\n\tupload\n};","import { GridError } from '../infrastructure/error';\nimport { isFunction } from '../utility/kit';\nimport { compileGet, compileSet } from './path';\n\nexport function getValue(row, column) {\n\treturn column.$value\n\t\t? column.$value({ $row: row, $column: column })\n\t\t: column.value\n\t\t\t? column.value(row)\n\t\t\t: column.path\n\t\t\t\t? compileGet(column.path)(row)\n\t\t\t\t: row[column.key];\n}\n\nexport function getValueFactory(column) {\n\tconst get = column.$value\n\t\t? row => column.$value({ $row: row, $column: column })\n\t\t: column.value\n\t\t\t? row => column.value(row)\n\t\t\t: column.path\n\t\t\t\t? compileGet(column.path)\n\t\t\t\t: row => row[column.key];\n\n\treturn get;\n}\n\nexport function setValue(row, column, value) {\n\tif (isFunction(column.$value)) {\n\t\treturn column.$value({ $row: row, $value: value, $column: column });\n\t}\n\n\tif (isFunction(column.value)) {\n\t\treturn column.value(row, value);\n\t}\n\n\tif (column.path) {\n\t\treturn compileSet(column.path)(row, value);\n\t}\n\n\tif (row.hasOwnProperty(column.key)) {\n\t\treturn row[column.key] = value;\n\t}\n\n\tthrow new GridError(\n\t\t'value',\n\t\t`Row can't be edit on \"${column.key}\" column`\n\t);\n}","import { flatten, isFunction, yes } from '../utility/kit';\n\nconst WILDCARD_SYMBOL = '*';\nconst notWildcard = cmd => cmd.shortcut !== WILDCARD_SYMBOL;\n\n\nexport class ShortcutDispatcher {\n\tconstructor() {\n\t\tthis.managerMap = new Map();\n\t}\n\n\tregister(manager, commands) {\n\t\tcommands = commands.values ? commands.values() : commands;\n\t\tlet context = this.managerMap.get(manager);\n\t\tif (!context) {\n\t\t\tcontext = {\n\t\t\t\tcommands: [],\n\t\t\t\tshortcuts: new Map()\n\t\t\t};\n\n\t\t\tthis.managerMap.set(manager, context);\n\t\t}\n\n\t\tconst disposes = [];\n\t\tfor (let cmd of commands) {\n\t\t\tif (cmd.shortcut) {\n\t\t\t\tif (isFunction(cmd.shortcut)) {\n\t\t\t\t\tcontext.commands.push(cmd);\n\t\t\t\t\tdisposes.push(() => {\n\t\t\t\t\t\tconst index = context.commands.indexOf(cmd);\n\t\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\t\tcontext.commands.splice(index, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcmd.shortcut\n\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t.split('|')\n\t\t\t\t\t\t.forEach(shct => {\n\t\t\t\t\t\t\tlet shortcuts = [];\n\t\t\t\t\t\t\tif (context.shortcuts.has(shct)) {\n\t\t\t\t\t\t\t\tshortcuts = context.shortcuts.get(shct);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tshortcuts.push(cmd);\n\t\t\t\t\t\t\tcontext.shortcuts.set(shct, shortcuts);\n\t\t\t\t\t\t\tdisposes.push(() => {\n\t\t\t\t\t\t\t\tconst shortcutCommands = context.shortcuts.get(shct);\n\t\t\t\t\t\t\t\tif (shortcutCommands) {\n\t\t\t\t\t\t\t\t\tconst index = shortcutCommands.indexOf(cmd);\n\t\t\t\t\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\t\t\t\t\tshortcutCommands.splice(index, 1);\n\t\t\t\t\t\t\t\t\t\tif (!shortcutCommands.length) {\n\t\t\t\t\t\t\t\t\t\t\tcontext.shortcuts.delete(shct);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn () => {\n\t\t\tdisposes.forEach(dispose => dispose());\n\t\t\tif (context.commands.length === 0 && Object.keys(context.shortcuts).length === 0) {\n\t\t\t\tthis.managerMap.delete(manager);\n\t\t\t}\n\t\t};\n\t}\n\n\texecute(code, source) {\n\t\tconst activities = this.fetchActivities(code, source);\n\n\t\treturn activities.reduce((memo, activity) => {\n\t\t\tconst commands = activity.commands;\n\t\t\tconst manager = activity.manager;\n\t\t\tconst result = manager.invoke(commands, null, source) || result;\n\t\t\tif (result) {\n\t\t\t\tmemo.push(...commands.map(cmd => cmd.source));\n\t\t\t}\n\t\t\treturn memo;\n\t\t}, []);\n\t}\n\n\tcanExecute(code, source) {\n\t\tconst activities = this.fetchActivities(code, source);\n\t\treturn activities.length > 0;\n\t}\n\n\tfetchActivities(code, source) {\n\t\tconst search = this.searchFactory(code);\n\n\t\tconst candidates = Array\n\t\t\t.from(this.managerMap.entries())\n\t\t\t.map(([manager, context]) => ({\n\t\t\t\tmanager,\n\t\t\t\tcommands: manager.filter(search(context), source)\n\t\t\t}));\n\n\t\t// Skip wildcard commands if there are some explicit shortcuts\n\t\tconst allCommands = flatten(candidates.map(x => x.commands));\n\t\tconst hasNotWildcardCommand = allCommands.filter(notWildcard).length > 0;\n\t\tconst test = hasNotWildcardCommand ? notWildcard : yes;\n\t\treturn candidates\n\t\t\t.map(({ commands, manager }) => ({\n\t\t\t\tmanager,\n\t\t\t\tcommands: commands.filter(test),\n\t\t\t}))\n\t\t\t.filter(({ commands }) => commands.length > 0);\n\t}\n\n\tsearchFactory(code) {\n\t\treturn context => {\n\t\t\tlet result = [];\n\t\t\tif (context.shortcuts.has(code)) {\n\t\t\t\tresult = result.concat(context.shortcuts.get(code));\n\t\t\t}\n\n\t\t\tif (context.shortcuts.has(WILDCARD_SYMBOL) && code !== WILDCARD_SYMBOL) {\n\t\t\t\tresult = result.concat(context.shortcuts.get(WILDCARD_SYMBOL));\n\t\t\t}\n\n\t\t\tresult = result.concat(context.commands\n\t\t\t\t.map(cmd => cmd.clone({ shortcut: cmd.shortcut() }))\n\t\t\t\t.filter(cmd => this.test(cmd.shortcut, code)));\n\n\t\t\treturn result;\n\t\t};\n\t}\n\n\ttest(shortcut, code) {\n\t\tcode = code.toLowerCase();\n\t\treturn ('' + shortcut)\n\t\t\t.toLowerCase()\n\t\t\t.split('|')\n\t\t\t.some(shct => shct === WILDCARD_SYMBOL || code === shct);\n\t}\n}\n","import { Keyboard } from '../keyboard/keyboard';\n\nexport class Shortcut {\n\tconstructor(dispatcher) {\n\t\tthis.dispatcher = dispatcher;\n\t\tthis.keyCode = {\n\t\t\tkey: null,\n\t\t\tcode: null\n\t\t};\n\t}\n\n\tstatic isControl(keyCode) {\n\t\tif (!keyCode) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst code = keyCode.code;\n\t\tconst parts = code.split('+');\n\t\treturn parts.some(part => part === 'ctrl' || part === 'alt') ||\n\t\t\tparts.every(part => Keyboard.isControl(part));\n\t}\n\n\tstatic isPrintable(keyCode) {\n\t\tif (!keyCode) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst code = keyCode.code;\n\t\tconst parts = code.split('+');\n\t\treturn parts.some(part => Keyboard.isPrintable(part));\n\t}\n\n\tstatic stringify(keyCode) {\n\t\tif (!keyCode) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Keyboard.stringify(keyCode.code, keyCode.key);\n\t}\n\n\tstatic translate(e) {\n\t\tconst codes = [];\n\t\tconst code = Keyboard.translate(e.keyCode).toLowerCase();\n\t\tif (e.ctrlKey) {\n\t\t\tcodes.push('ctrl');\n\t\t}\n\n\t\tif (e.shiftKey) {\n\t\t\tcodes.push('shift');\n\t\t}\n\n\t\tif (e.altKey) {\n\t\t\tcodes.push('alt');\n\t\t}\n\n\t\tif (code !== 'ctrl' &&\n\t\t\tcode !== 'shift' &&\n\t\t\tcode !== 'alt') {\n\t\t\tcodes.push(code);\n\t\t}\n\n\t\treturn codes.join('+');\n\t}\n\n\tfactory(manager) {\n\t\tconst self = this;\n\t\treturn {\n\t\t\tregister: commands => self.register(manager, commands)\n\t\t};\n\t}\n\n\tkeyDown(e, source) {\n\t\tconst code = Shortcut.translate(e);\n\t\tthis.keyCode = {\n\t\t\tkey: e.key,\n\t\t\tcode: code\n\t\t};\n\n\t\treturn this.dispatcher.execute(code, source);\n\t}\n\n\tregister(manager, commands) {\n\t\treturn this.dispatcher.register(manager, commands);\n\t}\n}\n","import * as columnService from '../column/column.service';\nimport { Command } from '../command/command';\nimport { GridError } from '../infrastructure/error';\nimport * as sortService from '../sort/sort.service';\n\nexport class SortLet {\n\tconstructor(plugin) {\n\t\tconst { model } = plugin;\n\t\tthis.plugin = plugin;\n\n\t\tthis.hover = false;\n\t\tthis.toggle = new Command({\n\t\t\tsource: 'sort.view',\n\t\t\tcanExecute: column => {\n\t\t\t\tconst key = column.key;\n\t\t\t\tconst map = columnService.mapColumns(model.columnList().line);\n\t\t\t\treturn map.hasOwnProperty(key) && map[key].canSort !== false;\n\t\t\t},\n\t\t\texecute: column => {\n\t\t\t\tconst key = column.key;\n\t\t\t\tconst sort = model.sort;\n\t\t\t\tconst sortState = sort();\n\t\t\t\tlet by = Array.from(sortState.by);\n\n\t\t\t\tif (sortState.mode === 'mixed') {\n\t\t\t\t\tconst { code, status } = model.keyboard();\n\t\t\t\t\tconst isSingleMode = code !== 'shift' || status !== 'down';\n\t\t\t\t\t// if shift key is not pressed - reset sort for other columns and do sort like single mode\n\t\t\t\t\tif (isSingleMode) {\n\t\t\t\t\t\tconst index = sortService.getIndex(by, key);\n\t\t\t\t\t\tby = index >= 0 ? by.filter((_, i) => i === index) : [];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst index = sortService.getIndex(by, key);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tconst dir = sortService.getDirection(by[index]);\n\t\t\t\t\tswitch (dir) {\n\t\t\t\t\t\tcase 'desc': {\n\t\t\t\t\t\t\tby.splice(index, 1);\n\t\t\t\t\t\t\tthis.hover = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'asc': {\n\t\t\t\t\t\t\tconst entry = { [key]: 'desc' };\n\t\t\t\t\t\t\tby[index] = entry;\n\t\t\t\t\t\t\tthis.hover = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tthrow GridError(\n\t\t\t\t\t\t\t\t'head.core',\n\t\t\t\t\t\t\t\t`Invalid sort direction ${dir}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (sortState.mode === 'single') {\n\t\t\t\t\t\tby.length = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst entry = { [key]: 'asc' };\n\t\t\t\t\tby.push(entry);\n\n\t\t\t\t\tconst order = sortService.orderFactory(model);\n\t\t\t\t\torder(by);\n\t\t\t\t}\n\n\t\t\t\tsort({ by }, { source: 'sort.view' });\n\t\t\t}\n\t\t});\n\n\t\tthis.onInit();\n\t}\n\n\tonInit() {\n\t\tconst { model, observeReply } = this.plugin;\n\t\tconst { sort } = model;\n\n\t\tobserveReply(model.columnListChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('index')) {\n\t\t\t\t\tconst sortState = sort();\n\t\t\t\t\tconst order = sortService.orderFactory(model);\n\t\t\t\t\tconst sortBy = order(Array.from(sortState.by));\n\t\t\t\t\tif (!this.equals(sortBy, sortState.by)) {\n\t\t\t\t\t\tsort({ by: sortBy }, { source: 'sort.view' });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.dataChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('columns')) {\n\t\t\t\t\tconst { by } = sort();\n\t\t\t\t\tconst columnMap = columnService.mapColumns(e.state.columns);\n\t\t\t\t\tconst newBy = by.filter(entry => columnMap.hasOwnProperty(sortService.getKey(entry)));\n\t\t\t\t\tif (!this.equals(newBy, by)) {\n\t\t\t\t\t\tsort({ by: newBy }, { source: 'sort.view' });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tequals(x, y) {\n\t\treturn JSON.stringify(x) === JSON.stringify(y);\n\t}\n\n\tdirection(column) {\n\t\tconst { key } = column;\n\t\tconst { by } = this.plugin.model.sort();\n\t\treturn sortService.getMap(by)[key];\n\t}\n\n\torder(column) {\n\t\tconst { key } = column;\n\t\tconst { model } = this.plugin;\n\t\tconst { by } = model.sort();\n\t\treturn sortService.getIndex(by, key);\n\t}\n}","import { GridError } from '../infrastructure/error';\nimport { preOrderDFS } from '../node/node.service';\nimport { isString } from '../utility/kit';\n\nexport function orderFactory(model) {\n\tconst { sort } = model;\n\treturn by => {\n\t\tconst { trigger } = sort();\n\t\tif (trigger.indexOf('reorder') >= 0) {\n\t\t\tlet index = 0;\n\t\t\tconst indexMap = {};\n\t\t\tpreOrderDFS(model.columnList().index.children, node => {\n\t\t\t\tconst { key } = node.key.model;\n\t\t\t\tindexMap[key] = index++;\n\t\t\t});\n\n\t\t\tby.sort((x, y) => indexMap[getKey(x)] - indexMap[getKey(y)]);\n\t\t}\n\n\t\treturn by;\n\t};\n}\n\nexport function getKey(pair) {\n\tlet key;\n\tif (isString(pair)) {\n\t\tconst signedKey = pair.split(/[+-]/);\n\t\tkey = signedKey[1] || signedKey[0];\n\t} else {\n\t\tkey = Object.keys(pair)[0]\n\t}\n\n\tif (!key) {\n\t\tthrow new GridError(\n\t\t\t'sort.service',\n\t\t\t`Key is not defined in \"${pair}\"`);\n\t}\n\n\treturn key;\n}\n\nexport function getDirection(pair) {\n\tif (isString(pair)) {\n\t\tconst directions = { '-': 'desc', '+': 'asc' };\n\t\treturn directions[pair[0]] || 'asc';\n\t}\n\n\tconst pairKey = getKey(pair);\n\treturn pair[pairKey];\n}\n\nexport function getMap(pairs) {\n\treturn pairs.reduce((memo, pair) => {\n\t\tconst key = getKey(pair);\n\t\tmemo[key] = getDirection(pair);\n\t\treturn memo;\n\t}, {});\n}\n\nexport function getIndex(pairs, key) {\n\treturn pairs.map(getKey).findIndex(pairKey => pairKey === key);\n}","import { Resource } from '../resource/resource';\n\nexport class SortState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.by = [];\n\t\tthis.mode = 'mixed';\n\t\tthis.trigger = [];\n\t}\n}","import * as columnService from '../column/column.service';\nimport { getValueFactory } from '../services/value';\nimport { noop } from '../utility/kit';\nimport { StyleMonitor } from './style.monitor';\nimport { StyleService } from './style.service';\nimport { VirtualCellStyle, VirtualRowStyle } from './style.virtual';\n\nexport class StyleLet {\n\tconstructor(plugin) {\n\t\tconst { model, observeReply } = plugin;\n\n\t\tthis.plugin = plugin;\n\t\tthis.valueFactory = getValueFactory;\n\t\tthis.service = new StyleService(model);\n\t\tthis.active = {\n\t\t\trow: false,\n\t\t\tcell: false\n\t\t};\n\n\t\tthis.monitor = {\n\t\t\trow: new StyleMonitor(model),\n\t\t\tcell: new StyleMonitor(model)\n\t\t};\n\n\t\tobserveReply(model.styleChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('row') || e.hasChanges('rows')) {\n\t\t\t\t\tthis.active.row = e.state.row !== noop || e.state.rows.length > 0;\n\t\t\t\t}\n\n\t\t\t\tif (e.hasChanges('cell') || e.hasChanges('cells')) {\n\t\t\t\t\tthis.active.cell = e.state.cell !== noop || e.state.cells.length > 0;\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tneedInvalidate() {\n\t\tconst { model } = this.plugin;\n\t\tif (model.scene().status !== 'stop') {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst { active } = this;\n\t\tconst isVirtual = model.scroll().mode === 'virtual';\n\t\tconst isActive = isVirtual || active.row || active.cell;\n\n\t\tif (!isActive) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst { invalidate } = model.style();\n\t\tconst context = {\n\t\t\tmodel\n\t\t};\n\n\t\treturn invalidate.canExecute(context) && invalidate.execute(context) !== false;\n\t}\n\n\tinvalidate(domCell, domRow) {\n\t\tconst { model, table } = this.plugin;\n\t\tconst { valueFactory } = this;\n\t\tlet { row: isRowActive, cell: isCellActive } = this.active;\n\n\t\tconst isVirtual = model.scroll().mode === 'virtual';\n\n\t\t// TODO: improve performance\n\t\tconst valueCache = new Map();\n\t\tconst value = (row, column) => {\n\t\t\tlet getValue = valueCache.get(column);\n\t\t\tif (!getValue) {\n\t\t\t\tgetValue = getValueFactory(column);\n\t\t\t\tvalueCache.set(column, getValue);\n\t\t\t}\n\n\t\t\treturn getValue(row);\n\t\t};\n\n\t\tconst columnList = table.data.columns();\n\t\tconst columnMap = columnService.mapColumns(columnList);\n\n\t\tlet visitRow = this.service.row();\n\t\tlet visitCell = this.service.cell();\n\t\tif (isVirtual) {\n\t\t\tisRowActive = true;\n\t\t\tisCellActive = true;\n\t\t\tvisitRow = new VirtualRowStyle(table, visitRow).visitFactory();\n\t\t\tvisitCell = new VirtualCellStyle(table, visitCell).visitFactory();\n\t\t}\n\n\t\t// For performance reason we make rowContext and cellContext the same reference \n\t\t// for the all style calls.\n\t\tconst rowContext = {\n\t\t\tclass: noop,\n\t\t\trow: -1,\n\t\t\tvalue: null,\n\t\t\tcolumns: {\n\t\t\t\tmap: columnMap,\n\t\t\t\tlist: columnList\n\t\t\t}\n\t\t};\n\n\t\tconst cellContext = {\n\t\t\tclass: noop,\n\t\t\trow: -1,\n\t\t\tcolumn: -1,\n\t\t\tvalue: null,\n\t\t\tcolumns: rowContext.columns\n\t\t};\n\n\t\t// To improve performance take rows and cells directly from the bag and not from the DOM table. \n\t\tconst { body } = table;\n\t\tconst { rowToView, columnToView } = table.box.mapper;\n\t\tconst bodyBag = table.box.bag.body;\n\n\t\tif (isRowActive) {\n\t\t\tconst rows = bodyBag.getRowElements();\n\t\t\tfor (let tr of rows) {\n\t\t\t\tconst { index, element, model } = tr;\n\t\t\t\t// This private method we use only for performance, don't use it in other places.\n\t\t\t\tconst row = body.createRowCore(rowToView(index), element);\n\n\t\t\t\trowContext.class = domRow(row);\n\t\t\t\trowContext.row = index;\n\t\t\t\trowContext.value = value;\n\n\t\t\t\tvisitRow(model, rowContext);\n\t\t\t}\n\t\t}\n\n\t\tif (isCellActive) {\n\t\t\tconst cells = bodyBag.getCellElements();\n\t\t\tfor (let td of cells) {\n\t\t\t\tconst { rowIndex, columnIndex, element, row, column } = td;\n\t\t\t\t// This private method we use only for performance, don't use it in other places.\n\t\t\t\tconst cell = body.createCellCore(rowToView(rowIndex), columnToView(columnIndex), element);\n\n\t\t\t\tcellContext.class = domCell(cell);\n\t\t\t\tcellContext.row = rowIndex;\n\t\t\t\tcellContext.column = columnIndex;\n\t\t\t\tcellContext.value = value;\n\n\t\t\t\tvisitCell(row, column, cellContext);\n\t\t\t}\n\t\t}\n\t}\n}","import * as css from '../services/css';\n\nexport class StyleEntry {\n\tconstructor(element, sheets, markDirty) {\n\t\tthis.element = element;\n\t\tthis.list = new Set();\n\t\tthis.sheets = sheets;\n\t\tthis.markDirty = markDirty;\n\t}\n\n\tclass(key, style) {\n\t\tkey = css.escape(key);\n\t\tthis.list.add(key);\n\t\tthis.markDirty(this);\n\t\tif (style) {\n\t\t\tconst sheets = this.sheets;\n\t\t\tif (!sheets.has(key)) {\n\t\t\t\tsheets.set(key, style);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class StyleMonitor {\n\tconstructor(model) {\n\t\tthis.model = model;\n\t\tthis.entries = new Set();\n\t\tthis.newSheets = new Map();\n\t\tthis.oldSheets = new Map();\n\t}\n\n\tenter() {\n\t\tconst newSheets = this.newSheets;\n\t\tlet entries = this.entries;\n\t\tfor (let entry of entries) {\n\t\t\tfor (let cls of entry.list) {\n\t\t\t\tentry.element.removeClass(cls, true);\n\t\t\t}\n\t\t}\n\n\t\tentries = this.entries = new Set();\n\t\tconst markDirty = entry => entries.add(entry);\n\n\t\treturn element => {\n\t\t\tconst entry = new StyleEntry(element, newSheets, markDirty);\n\t\t\treturn entry.class.bind(entry);\n\t\t};\n\t}\n\n\texit() {\n\t\tconst entries = this.entries;\n\t\tfor (let entry of entries) {\n\t\t\tfor (let cls of entry.list) {\n\t\t\t\tentry.element.addClass(cls, true);\n\t\t\t}\n\t\t}\n\n\t\tconst newSheets = this.newSheets;\n\t\tconst oldSheets = this.oldSheets;\n\t\tconst id = this.model.grid().id;\n\t\tfor (let cls of oldSheets.keys()) {\n\t\t\tif (!newSheets.has(cls)) {\n\t\t\t\tconst sheet = css.sheet(id, cls);\n\t\t\t\tsheet.remove();\n\t\t\t}\n\t\t}\n\n\t\tfor (let [cls, style] of newSheets.entries()) {\n\t\t\tif (!oldSheets.has(cls)) {\n\t\t\t\tconst sheet = css.sheet(id, cls);\n\t\t\t\tsheet.set({ [`.${cls}`]: style });\n\t\t\t}\n\t\t}\n\n\t\tthis.oldSheets = newSheets;\n\t\tthis.newSheets = new Map();\n\t}\n}","import { noop, isFunction } from '../utility/kit';\nimport { Composite } from '../infrastructure/composite';\n\nexport class StyleService {\n\tconstructor(model) {\n\t\tthis.style = model.style;\n\t}\n\n\trow() {\n\t\tconst { rows, row } = this.style();\n\t\tconst visitors = row === noop\n\t\t\t? rows\n\t\t\t: rows.concat([row]);\n\n\t\treturn Composite.func(visitors);\n\t}\n\n\tcell() {\n\t\tconst { cells, cell } = this.style();\n\t\tif (isFunction(cell)) {\n\t\t\tconst visitors = cell === noop\n\t\t\t\t? cells\n\t\t\t\t: cells.concat([cell]);\n\n\t\t\treturn Composite.func(visitors);\n\t\t}\n\n\t\tconst keys = Object.keys(cell);\n\t\tif (keys.length) {\n\t\t\tconst visitors = cells.concat(keys.map(key => {\n\t\t\t\tconst visit = cell[key];\n\t\t\t\treturn (row, column, context) => {\n\t\t\t\t\tif (column.key === key) {\n\t\t\t\t\t\tvisit(row, column, context);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}));\n\n\t\t\treturn Composite.func(visitors);\n\t\t}\n\n\t\treturn Composite.func(cells);\n\t}\n}\n","import { noop } from '../utility/kit';\nimport { Command } from '../command/command';\n\nexport class StyleState {\n\tconstructor() {\n\t\tthis.row = noop;\n\t\tthis.cell = noop;\n\n\t\tthis.rows = [];\n\t\tthis.cells = [];\n\t\tthis.classList = [];\n\n\t\tthis.invalidate = new Command({\n\t\t\tsource: 'style.model',\n\t\t\tcanExecute: context => context.model.edit().status === 'view'\n\t\t});\n\t}\n}","export class VirtualRowStyle {\n\tconstructor(table, style) {\n\t\tthis.table = table;\n\t\tthis.style = style;\n\t}\n\n\tvisitFactory() {\n\t\tconst { style } = this;\n\t\tconst { rowBox } = this.table.body;\n\t\tconst { entries } = rowBox;\n\n\t\treturn (row, context) => {\n\t\t\tconst model = {\n\t\t\t\tdataIndex: context.row,\n\t\t\t};\n\n\t\t\tconst key = rowBox.key(model);\n\t\t\tconst classList = entries.get(key);\n\t\t\tif (classList) {\n\t\t\t\tfor (let cls of classList) {\n\t\t\t\t\tcontext.class(cls);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tstyle(row, context);\n\t\t};\n\t}\n}\n\nexport class VirtualCellStyle {\n\tconstructor(table, style) {\n\t\tthis.table = table;\n\t\tthis.style = style;\n\t}\n\n\tvisitFactory() {\n\t\tconst { style } = this;\n\t\tconst { cellBox } = this.table.body;\n\t\tconst { columnBox } = this.table.body;\n\n\t\tconst cellEntries = cellBox.entries;\n\t\tconst columnEntries = columnBox.entries;\n\n\t\treturn (row, column, context) => {\n\t\t\t// column level\n\t\t\tconst columnModel = {\n\t\t\t\tdataIndex: context.column,\n\t\t\t};\n\n\t\t\tconst columnKey = columnBox.key(columnModel);\n\t\t\tconst columnClassList = columnEntries.get(columnKey);\n\t\t\tif (columnClassList) {\n\t\t\t\tfor (let cls of columnClassList) {\n\t\t\t\t\tcontext.class(cls);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// cell level\n\t\t\tconst cellModel = {\n\t\t\t\tdataRowIndex: context.row,\n\t\t\t\tdataColumnIndex: context.column,\n\t\t\t};\n\n\t\t\tconst cellKey = cellBox.key(cellModel);\n\t\t\tconst cellClassList = cellEntries.get(cellKey);\n\t\t\tif (cellClassList) {\n\t\t\t\tfor (let cls of cellClassList) {\n\t\t\t\t\tcontext.class(cls);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// add classes\n\t\t\tstyle(row, column, context);\n\t\t};\n\t}\n}","import { GridError } from '../infrastructure/error';\nimport { isUndefined } from '../utility/kit';\n\nconst resolvers = {};\nexport class TemplatePath {\n\tconstructor() {\n\t}\n\n\tstatic register(name, resolve) {\n\t\tif (resolvers.hasOwnProperty(name)) {\n\t\t\tthrow new GridError(\n\t\t\t\t'template.path',\n\t\t\t\t`\"${name}\" is already registered`);\n\t\t}\n\n\t\tresolvers[name] = resolve;\n\t\treturn TemplatePath;\n\t}\n\n\tstatic get(source) {\n\t\tconst path = this.find(source);\n\t\tif (!path) {\n\t\t\tthrow new GridError(\n\t\t\t\t'template.path',\n\t\t\t\t'Template path can\\'t be found');\n\t\t}\n\n\t\treturn path;\n\t}\n\n\tstatic find(source) {\n\t\tconst getName = this.name;\n\t\tfor (let key of Object.keys(resolvers)) {\n\t\t\tconst name = getName(key);\n\t\t\tconst value = source[name];\n\t\t\tif (!isUndefined(value) && value !== null) {\n\t\t\t\tconst path = resolvers[key](source, value);\n\t\t\t\tif (path) {\n\t\t\t\t\treturn path;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tstatic getName(name) {\n\t\treturn '_' + name;\n\t}\n\n\tstatic get require() {\n\t\tconst getName = this.name;\n\t\treturn Object.keys(resolvers)\n\t\t\t.reduce((memo, key) => {\n\t\t\t\tmemo[getName(key)] = `^^?${key}`;\n\t\t\t\treturn memo;\n\t\t\t}, {});\n\t}\n}","export class TemplateState {\n\tconstructor() {\n\t\tthis.resource = {};\n\t}\n}","import { ModelBuilder } from '../model/model.builder';\n\nconst builder = new ModelBuilder();\nexport function modelFactory() {\n\treturn builder.build();\n}\n","import { Resource } from '../resource/resource';\n\nexport class ToolbarState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t}\n}","import assignWith from 'lodash-es/assignWith';\nimport clone from 'lodash-es/clone';\nimport cloneDeep from 'lodash-es/cloneDeepWith';\nimport dropWhile from 'lodash-es/dropWhile';\nimport flatten from 'lodash-es/flatten';\nimport isArray from 'lodash-es/isArray';\nimport isBoolean from 'lodash-es/isBoolean';\nimport isDate from 'lodash-es/isDate';\nimport isEqual from 'lodash-es/isEqual';\nimport isFunction from 'lodash-es/isFunction';\nimport isNumber from 'lodash-es/isNumber';\nimport isObject from 'lodash-es/isObject';\nimport isString from 'lodash-es/isString';\nimport isUndefined from 'lodash-es/isUndefined';\nimport max from 'lodash-es/maxBy';\nimport min from 'lodash-es/minBy';\nimport startCase from 'lodash-es/startCase';\nimport sumBy from 'lodash-es/sumBy';\nimport takeWhile from 'lodash-es/takeWhile';\nimport uniq from 'lodash-es/uniq';\nimport zip from 'lodash-es/zip';\n\nconst noop = () => { };\nconst yes = () => true;\nconst no = () => false;\nconst identity = x => x;\n\nconst toCamelCase = (...names) => {\n\tconst length = names.length;\n\tconst nameList = names.map(name => '' + name);\n\tif (length > 0) {\n\t\treturn (nameList[0] +\n\t\t\tnameList.slice(1)\n\t\t\t\t.map(name => name[0].toUpperCase() + name.substring(1, name.length))\n\t\t\t\t.join(''));\n\t}\n\n\treturn '';\n};\n\nconst isEmail = value => {\n\tif (value) {\n\t\tconst re = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i; // eslint-disable-line no-useless-escape\n\t\treturn re.test(value);\n\t}\n\n\treturn false;\n};\n\nfunction compare(x, y) {\n\tif (x === y) {\n\t\treturn 0;\n\t}\n\n\tif (x === null || x === undefined || x === '') {\n\t\treturn 1;\n\t}\n\n\tif (y === null || y === undefined || y === '') {\n\t\treturn -1;\n\t}\n\n\treturn x > y ? 1 : -1;\n}\n\nfunction orderBy(data, selectors, compares) {\n\tconst length = selectors.length;\n\tconst result = [];\n\tconst count = data.length;\n\n\t// iterate through data to create array with applied selectors\n\tlet index = count;\n\twhile (index--) {\n\t\tconst row = data[index];\n\t\tconst criteria = [];\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst select = selectors[i];\n\t\t\tcriteria.push(select(row));\n\t\t}\n\n\t\tresult.push({ row, criteria, index });\n\t}\n\n\t// multi selector comparator\n\tconst compare = (x, y) => {\n\t\tlet result = 0;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst compare = compares[i];\n\t\t\tconst xv = x.criteria[i];\n\t\t\tconst yv = y.criteria[i];\n\n\t\t\tresult = compare(xv, yv, x.row, y.row);\n\t\t\tif (result !== 0) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\n\t\t// ensures a stable sort\n\t\treturn x.index - y.index;\n\t};\n\n\tresult.sort(compare);\n\n\t// copy origin values to result array\n\tindex = count;\n\twhile (index--) {\n\t\tresult[index] = result[index].row;\n\t}\n\n\treturn result;\n}\n\nfunction htmlEncode(s) {\n\treturn String(s)\n\t\t.replace(/&/g, '&amp;')\n\t\t.replace(/\"/g, '&quot;')\n\t\t.replace(/'/g, '&#39;')\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;');\n}\n\nfunction escapeRegexp(text) {\n\tif (!text)\n\t\treturn text;\n\n\treturn text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n}\n\nfunction binarySearch(list, value) {\n\tlet low = 0;\n\tlet high = list.length;\n\twhile (low < high) {\n\t\tconst mid = (low + high) >>> 1;\n\t\tif (list[mid] < value) {\n\t\t\tlow = mid + 1\n\t\t}\n\t\telse {\n\t\t\thigh = mid\n\t\t}\n\t}\n\n\treturn low;\n}\n\nfunction isUrl(value) {\n\tvar a = document.createElement('a');\n\ta.href = value;\n\treturn (a.host && a.host != window.location.host);\n}\n\nfunction isImage(value) {\n\treturn ('' + value).match(/\\.(jpeg|jpg|gif|png)$/) != null;\n}\n\nfunction matchISO8601(date) {\n\treturn /^(\\d{4})(-(\\d{2})(-(\\d{2})([T ](\\d{2}):(\\d{2})(:(\\d{2})(\\.(\\d+))?)?(Z|(([-+])(\\d{2})(:?(\\d{2})))))))$/.test('' + date)\n}\n\nfunction getTypeName(type) {\n\tif (type.name) {\n\t\treturn type.name;\n\t}\n\n\tconst nameRegexp = /function (.{1,})\\(/;\n\tconst results = (nameRegexp).exec(type.constructor.toString());\n\treturn (results && results.length > 1) ? results[1] : \"\";\n};\n\nexport {\n  assignWith,\n  binarySearch,\n  clone,\n  cloneDeep,\n  compare,\n  dropWhile,\n  escapeRegexp,\n  flatten,\n  getTypeName,\n  htmlEncode,\n  identity,\n  isArray,\n  isBoolean,\n  isDate,\n  isEmail,\n  isEqual as same,\n  isFunction,\n  isImage,\n  isNumber,\n  isObject,\n  isString,\n  matchISO8601,\n  isUndefined,\n  isUrl,\n  max,\n  min,\n  no,\n  noop,\n  orderBy,\n  startCase,\n  sumBy,\n  takeWhile,\n  toCamelCase,\n  uniq,\n  yes,\n  zip,\n};\n\n","import LIVR from 'livr';\n\nfunction toLIVR(rules, key) {\n\tconst validationRules = [];\n\trules.forEach(rule => {\n\t\tif (rule.key === key) {\n\t\t\tfor (let name of Object.keys(rule)) {\n\t\t\t\tif (name !== 'key' && name !== 'for') {\n\t\t\t\t\tvalidationRules.push({\n\t\t\t\t\t\t[name]: rule[name]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn {\n\t\thasRules: validationRules.length > 0,\n\t\trules: { [key]: validationRules }\n\t};\n}\n\nexport function hasRules(rules, key) {\n\treturn toLIVR(rules, key).hasRules;\n}\n\nexport function createValidator(rules, key) {\n\tif (arguments.length === 2) {\n\t\tconst settings = toLIVR(rules, key);\n\t\treturn new LIVR.Validator(settings.rules);\n\t}\n\n\treturn new LIVR.Validator(rules);\n}\n","import { Resource } from '../resource/resource';\n\nexport class ValidationState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.rules = [];\n\t}\n}\n","import { SelectionCommandManager } from '../selection/selection.command.manager';\nimport { BodyLet } from '../body/body.let';\nimport { EditLet } from '../edit/edit.let';\nimport { FilterLet } from '../filter/filter.let';\nimport { FootLet } from '../foot/foot.let';\nimport { GroupLet } from '../group/group.let';\nimport { HeadLet } from '../head/head.let';\nimport { HighlightLet } from '../highlight/highlight.let';\nimport { LayoutLet } from '../layout/layout.let';\nimport { NavigationLet } from '../navigation/navigation.let';\nimport { PaginationLet } from '../pagination/pagination.let';\nimport { RowDetailsLet } from '../row-details/row.details.let';\nimport { RowLet } from '../row/row.let';\nimport { ScrollLet } from '../scroll/scroll.let';\nimport { SelectionLet } from '../selection/selection.let';\nimport { SortLet } from '../sort/sort.let';\nimport { StyleLet } from '../style/style.let';\nimport { ClipboardLet } from '../clipboard/clipboard.let';\n\nexport function viewFactory(\n\tplugin,\n\tcommandManager,\n\tvscroll,\n\tselectors\n) {\n\tconst { model, disposable } = plugin;\n\tconst { shortcut } = model.action();\n\n\tconst navigationShortcut = {\n\t\tkeyCode: () => shortcut.keyCode,\n\t\tregister: commands =>\n\t\t\tdisposable.add(\n\t\t\t\tshortcut.register(\n\t\t\t\t\tcommandManager,\n\t\t\t\t\tcommands\n\t\t\t\t)\n\t\t\t),\n\t};\n\n\tconst selectionCommandManager =\n\t\tnew SelectionCommandManager(\n\t\t\tmodel,\n\t\t\tcommandManager\n\t\t);\n\n\tconst selectionShortcut = {\n\t\tregister: commands => {\n\t\t\tdisposable.add(\n\t\t\t\tshortcut.register(\n\t\t\t\t\tselectionCommandManager,\n\t\t\t\t\tcommands\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t};\n\n\treturn host => {\n\t\thost.head = new HeadLet(plugin, selectors.th);\n\t\thost.body = new BodyLet(plugin);\n\t\thost.foot = new FootLet(plugin);\n\t\thost.row = new RowLet(plugin, selectors.tr);\n\t\thost.layout = new LayoutLet(plugin);\n\t\thost.scroll = new ScrollLet(plugin, vscroll);\n\t\thost.highlight = new HighlightLet(plugin);\n\t\thost.sort = new SortLet(plugin);\n\t\thost.pagination = new PaginationLet(plugin);\n\t\thost.nav = new NavigationLet(plugin, navigationShortcut);\n\t\thost.group = new GroupLet(plugin, navigationShortcut);\n\t\thost.edit = new EditLet(plugin, navigationShortcut);\n\t\thost.filter = new FilterLet(plugin);\n\t\thost.rowDetails = new RowDetailsLet(plugin, navigationShortcut);\n\t\thost.selection = new SelectionLet(plugin, selectionShortcut);\n\t\thost.style = new StyleLet(plugin);\n\t\thost.clipboard = new ClipboardLet(plugin, navigationShortcut);\n\t};\n}\n","import { final } from '../infrastructure/final';\nimport {\n\tcheckButtonCode, getButtonCode, LEFT_BUTTON,\n\tNO_BUTTON, stringify\n} from '../mouse/mouse.code';\nimport { PathService } from '../path/path.service';\nimport { PipeUnit } from '../pipe/pipe.unit';\nimport { eventPath } from '../services/dom';\nimport { Fastdom } from '../services/fastdom';\nimport { jobLine } from '../services/job.line';\n\nexport class ViewHost {\n  constructor(plugin) {\n    this.plugin = plugin;\n\n    this.watch(plugin.service);\n    this.final = final();\n\n    // todo: make the logic based on mouse state\n    this.startCell = null;\n  }\n\n  invalidate() {\n    this.final(() => {\n      const { view } = this.plugin;\n      const { style } = view;\n\n      if (style.needInvalidate()) {\n        const rowMonitor = style.monitor.row;\n        const cellMonitor = style.monitor.cell;\n\n        Fastdom.mutate(() => {\n          // Apply mutate inside another mutate to ensure that style.invalidate is triggered last.\n          Fastdom.mutate(() => {\n            const domCell = cellMonitor.enter();\n            const domRow = rowMonitor.enter();\n            try {\n              style.invalidate(domCell, domRow);\n            }\n            finally {\n              rowMonitor.exit();\n              cellMonitor.exit();\n            }\n          });\n        });\n      }\n    });\n  }\n\n  triggerLine(service, timeout) {\n    const { model } = this.plugin;\n    const { reduce } = model.pipe();\n\n    let session = [];\n    const job = jobLine(timeout);\n    return (source, changes, units) => {\n      model.scene({ status: 'start' }, {\n        source\n      });\n\n      session.push(...units);\n      job(() => {\n        const units = reduce(session, model);\n        session = [];\n\n        units.forEach(pipe =>\n          service.invalidate({\n            source,\n            changes,\n            pipe,\n            why: pipe.why || 'refresh'\n          })\n        );\n      });\n    };\n  }\n\n  watch(service) {\n    const { model, observeReply } = this.plugin;;\n    const { triggers } = model.pipe();\n    const { pipe } = model.data();\n\n    const triggerJob = this.triggerLine(service, 10);\n    if (pipe !== PipeUnit.default) {\n      triggerJob('grid', {}, [pipe]);\n    }\n\n    Object.keys(triggers)\n      .forEach(name =>\n        observeReply(model[name + 'Changed'])\n          .subscribe(e => {\n            if (e.tag.behavior === 'core') {\n              return;\n            }\n\n            const units = [];\n            const trigger = triggers[name];\n            for (const key in e.changes) {\n              const unit = trigger[key];\n              if (unit) {\n                units.push(unit);\n              }\n            }\n\n            if (units.length > 0) {\n              triggerJob(e.tag.source || name, e.changes, units);\n            }\n          }));\n  }\n\n  mouseDown(e) {\n    const { model, view } = this.plugin;\n    const { edit } = model;\n\n    const td = this.findCell(e);\n\n    model.mouse({\n      code: stringify(getButtonCode(e)),\n      status: 'down',\n      target: td\n    }, {\n      source: 'mouse.down'\n    });\n\n    if (checkButtonCode(e, LEFT_BUTTON)) {\n      const { area, mode } = this.selection;\n\n      if (td) {\n        const fromNotEditMode = edit().status === 'view'\n\n        this.navigate(td);\n        if (area === 'body') {\n          this.select(td);\n        }\n\n        if (fromNotEditMode && view.edit.cell.enter.canExecute(td)) {\n          view.edit.cell.enter.execute(td);\n        }\n\n        if (mode === 'range' && td.column.type !== 'select') {\n          this.startCell = td;\n          view.selection.selectRange(td, null, 'body');\n        }\n      }\n    }\n  }\n\n  mouseUp(e) {\n    const { model } = this.plugin;\n    const { edit } = model;\n\n    const td = this.findCell(e);\n\n    this.startCell = null;\n\n    model.mouse({\n      code: stringify(getButtonCode(e)),\n      status: 'up',\n      target: td,\n    }, {\n      source: 'mouse.up'\n    });\n\n    if (checkButtonCode(e, LEFT_BUTTON)) {\n      if (edit().status === 'startBatch') {\n        edit({ status: 'endBatch' }, { source: 'body.ctrl' });\n      }\n    }\n\n    model.mouse({\n      code: stringify(NO_BUTTON),\n      status: 'release',\n      target: null,\n      timestamp: Date.now(),\n    }, {\n      source: 'mouse.up'\n    });\n  }\n\n  mouseMove(e) {\n    const { model, view } = this.plugin;\n    const { highlight } = view;\n    const { rows, cell } = model.highlight();\n\n    const td = this.findCell(e);\n    if (td) {\n\n      if (cell) {\n        highlight.cell.execute(cell, false);\n      }\n\n      const newCell = {\n        rowIndex: td.rowIndex,\n        columnIndex: td.columnIndex\n      };\n\n      model.mouse({\n        status: 'move',\n        target: cell || newCell\n      }, {\n        source: 'mouse.move'\n      });\n\n      if (highlight.cell.canExecute(newCell)) {\n        highlight.cell.execute(newCell, true)\n      }\n\n      const tr = this.findRow(e);\n      if (tr) {\n        const { index } = tr;\n\n        if (highlight.row.canExecute(index)) {\n          rows\n            .filter(i => i !== index)\n            .forEach(i => highlight.row.execute(i, false));\n\n          highlight.row.execute(index, true);\n        }\n      }\n\n      if (checkButtonCode(e, LEFT_BUTTON)) {\n        if (this.selection.mode === 'range') {\n          const startCell = this.startCell;\n          const endCell = td;\n\n          if (startCell && endCell) {\n            this.navigate(endCell);\n            view.selection.selectRange(startCell, endCell, 'body');\n          }\n        }\n      }\n\n    } else {\n      model.mouse({\n        status: 'move',\n        target: null,\n      }, {\n        source: 'mouse.move'\n      });\n    }\n  }\n\n  mouseEnter(e) {\n    const { model } = this.plugin;\n    model.mouse({\n      status: 'enter',\n      target: null,\n      code: null\n    }, {\n      source: 'mouse.enter'\n    });\n  }\n\n  mouseLeave() {\n    const { model } = this.plugin;\n\n    model.mouse({\n      status: 'leave',\n      target: null,\n      code: null\n    }, {\n      source: 'mouse.leave'\n    });\n\n    this.clearHighlight();\n  }\n\n  select(cell) {\n    const { area, mode, unit } = this.selection;\n    if (cell.column.type !== 'select' && (area !== 'body' || mode === 'range')) {\n      return;\n    }\n\n    const { model, view } = this.plugin;\n    const editMode = model.edit().mode;\n    switch (unit) {\n      case 'row': {\n        if (cell.column.type === 'select' && cell.column.editorOptions.trigger === 'focus') {\n          const focusState = model.focus();\n          if (focusState.rowIndex !== cell.rowIndex || focusState.columnIndex !== cell.columnIndex) {\n            if (view.selection.toggleRow.canExecute(cell.row)) {\n              view.selection.toggleRow.execute(cell.row, 'body');\n            }\n          }\n        } else if (!editMode && cell.column.category !== 'control') {\n          if (view.selection.toggleRow.canExecute(cell.row)) {\n            view.selection.toggleRow.execute(cell.row, 'body');\n          }\n        }\n\n        break;\n      }\n\n      case 'column': {\n        if (!editMode) {\n          view.selection.toggleColumn.execute(cell.column, 'body');\n        }\n\n        break;\n      }\n\n      case 'mix': {\n        if (cell.column.type === 'row-indicator') {\n          view.selection.toggleCell.execute(cell, 'body');\n        }\n\n        break;\n      }\n    }\n  }\n\n  navigate(cell) {\n    const { view } = this.plugin;\n    const { focus } = view.nav;\n\n    if (focus.canExecute(cell)) {\n      focus.execute(cell);\n    }\n  }\n\n  findCell(e) {\n    const { table } = this.plugin;\n    const pathFinder = new PathService(table.box.bag.body);\n    const path = eventPath(e);\n\n    let td = pathFinder.cell(path);\n    if (!td) {\n      const firstElement = path[0];\n      const isEditMarker =\n        firstElement\n        && firstElement.classList.contains('q-grid-edit-marker');\n\n      if (isEditMarker) {\n        const { model } = this.plugin;\n        const { rowIndex, columnIndex } = model.focus();\n        td = table.body.cell(rowIndex, columnIndex).model();\n      }\n    }\n\n    return td;\n  }\n\n  findRow(e) {\n    const { table } = this.plugin;\n    const pathFinder = new PathService(table.box.bag.body);\n    const path = eventPath(e);\n    return pathFinder.row(path);\n  }\n\n  clearHighlight() {\n    const { view } = this.plugin;\n    const { highlight } = view;\n    if (highlight.clear.canExecute()) {\n      highlight.clear.execute();\n    }\n  }\n\n  get selection() {\n    const { model } = this.plugin;\n    return model.selection();\n  }\n}\n","import { Node } from '../node/node';\n\nexport class ViewState {\n\tconstructor() {\n\t\tthis.rows = [];\n\t\tthis.columns = [];\n\t\tthis.nodes = [];\n\t\tthis.pivot = { head: new Node('$root', 0), rows: [] };\n\t}\n}","import { Resource } from '../resource/resource';\n\nexport class VisibilityState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.head = true;\n\t\tthis.foot = true;\n\t\tthis.body = true;\n\t\tthis.toolbar = {\n\t\t\ttop: true,\n\t\t\tbottom: true,\n\t\t\tright: false,\n\t\t\tleft: false\n\t\t};\n\n\t\tthis.pin = {\n\t\t\tleft: false,\n\t\t\tright: false,\n\t\t\ttop: false,\n\t\t\tbottom: false\n\t\t};\n\n\t\tthis.plugin = {};\n\t}\n}\n","import * as columnService from '@qgrid/core';\nimport { filter, takeOnce, Event, EventListener, EventManager, checkButtonCode, LEFT_BUTTON, MIDDLE_BUTTON, elementFromPoint, Command, preOrderDFS, copy, Aggregation, isFunction, identity, Resource, getLabelFactory, isUndefined, clone, isArray, parseFactory, Fastdom, GRID_PREFIX, cloneDeep, isObject, isNumber, isDate, isBoolean, Action, GridError, setValue, setLabel, Composite, RowEditor, graphFlatView, PluginService, CsvExport, JsonExport, XmlExport, jobLine, CsvImport, generate, columnFactory, firstRowTitle, XmlImport, JsonImport, alphaTitle, numericTitle, upload, FocusAfterRenderService, PersistenceService, CommandManager, Shortcut, ShortcutDispatcher, serialize, stringifyFactory, max, PipeUnit, serializeGet, serializePost, hasRules, createValidator, isString, same } from '@qgrid/core';\n\nclass AutofocusPlugin {\n\tconstructor(plugin) {\n\t\tconst { model, table, observeReply } = plugin;\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.pipe(\n\t\t\t\tfilter(e => {\n\t\t\t\t\tif (e.hasChanges('status') && e.state.status === 'stop') {\n\t\t\t\t\t\tconst count = table.body.rowCount(0);\n\t\t\t\t\t\tif (count) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}),\n\t\t\t\ttakeOnce()\n\t\t\t)\n\t\t\t.subscribe(() => {\n\t\t\t\tconst key = Object.keys(table.box.markup).find(p => p.startsWith('body'));\n\n\t\t\t\tif (key) {\n\t\t\t\t\tconst element = table.box.markup[key];\n\t\t\t\t\tif (element) {\n\t\t\t\t\t\telement.focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst { body } = table;\n\t\t\t\tconst { focus } = model;\n\t\t\t\tconst focusState = focus();\n\t\t\t\tconst cell = body.cell(focusState.rowIndex, focusState.columnIndex);\n\t\t\t\tconst cellModel = cell.model();\n\n\t\t\t\tif (!cellModel || !cellModel.column.canFocus) {\n\t\t\t\t\tlet rowIndex = 0;\n\t\t\t\t\tconst rowCount = body.rowCount(0);\n\t\t\t\t\twhile (rowIndex < rowCount) {\n\t\t\t\t\t\tconst row = body.row(rowIndex);\n\t\t\t\t\t\tconst cells = row.cells();\n\t\t\t\t\t\tconst columnIndex = cells.findIndex(c => {\n\t\t\t\t\t\t\tconst m = c.model();\n\t\t\t\t\t\t\treturn m && m.column.canFocus;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (columnIndex >= 0) {\n\t\t\t\t\t\t\tfocus({ rowIndex, columnIndex }, { source: 'autofocus.plugin' });\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trowIndex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n}\n\nclass BackdropPlugin {\n\tconstructor(context) {\n\t\tthis.closeEvent = new Event();\n\n\t\tconst element = context.element;\n\t\tconst listener = new EventListener(element, new EventManager(this));\n\n\t\tlistener.on('mousedown', e => {\n\t\t\tif (checkButtonCode(e, LEFT_BUTTON) || checkButtonCode(e, MIDDLE_BUTTON)) {\n\t\t\t\te.stopPropagation();\n\t\t\t\telement.remove();\n\n\t\t\t\tif (context.propagate !== false) {\n\t\t\t\t\tconst target = elementFromPoint(e.clientX, e.clientY);\n\t\t\t\t\tconst event = document.createEvent('MouseEvents');\n\t\t\t\t\tevent.initEvent('mousedown', true, true);\n\t\t\t\t\ttarget.dispatchEvent(event);\n\t\t\t\t}\n\n\t\t\t\tthis.closeEvent.emit(e);\n\t\t\t}\n\t\t});\n\n\t\tlistener.on('keydown', e => context.onKeyDown({ $event: e }));\n\t}\n}\n\nclass ColumnChooserPlugin {\n\tconstructor(plugin, context) {\n\t\tthis.plugin = plugin;\n\n\t\tthis.context = context;\n\n\t\tthis.cancelEvent = new Event();\n\t\tthis.submitEvent = new Event();\n\t\tthis.dropEvent = new Event();\n\n\t\tconst setup = () => {\n\t\t\tconst { model: gridModel } = this.plugin;\n\t\t\tconst { index } = gridModel.columnList();\n\n\t\t\tthis.tree = preOrderDFS([index], (node, current, parent) => {\n\t\t\t\tconst { model } = node.key;\n\t\t\t\tconst column = {\n\t\t\t\t\tkey: model.key,\n\t\t\t\t\ttitle: model.title,\n\t\t\t\t\tisVisible: model.isVisible,\n\t\t\t\t\tisDefault: model.isDefault,\n\t\t\t\t\tcanMove: model.canMove,\n\t\t\t\t\taggregation: model.aggregation\n\t\t\t\t};\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tconst newNode = copy(node);\n\t\t\t\t\tnewNode.value = {\n\t\t\t\t\t\tcolumn,\n\t\t\t\t\t\tisVisible: model.category === 'data' || model.category === 'cohort',\n\t\t\t\t\t};\n\n\t\t\t\t\tcurrent.children.push(newNode);\n\t\t\t\t\treturn newNode;\n\t\t\t\t}\n\n\t\t\t\tcurrent.value = { column, isVisible: true };\n\t\t\t\treturn current;\n\t\t\t}, copy(index));\n\n\t\t\tupdateView();\n\t\t};\n\n\t\tlet applyFilter = identity;\n\t\tconst updateView = () => {\n\t\t\tthis.listView = [];\n\t\t\tthis.treeView = applyFilter(this.tree);\n\t\t\tpreOrderDFS([this.treeView], n => {\n\t\t\t\tif (n.value.isVisible) {\n\t\t\t\t\tthis.listView.push(n.value.column);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tthis.search = value => {\n\t\t\tconst search = ('' + value).toLowerCase();\n\t\t\tapplyFilter =\n\t\t\t\tsearch\n\t\t\t\t\t? node => filterNode(node, n => (n.value.column.title || '').toLowerCase().indexOf(search) >= 0)\n\t\t\t\t\t: identity;\n\n\t\t\tupdateView();\n\t\t};\n\n\t\tsetup();\n\n\t\tconst toggle = (node, value) => {\n\t\t\tconst { children } = node;\n\t\t\tconst { column } = node.value;\n\t\t\tcolumn.isVisible = value;\n\t\t\tif (children.length) {\n\t\t\t\tchildren.forEach(n => toggle(n, value));\n\t\t\t}\n\t\t};\n\n\t\tthis.toggle = new Command({\n\t\t\tsource: 'column.chooser',\n\t\t\tcanExecute: node => node.value.isVisible,\n\t\t\texecute: node => toggle(node, !this.state(node))\n\t\t});\n\n\t\tthis.toggleAll = new Command({\n\t\t\tsource: 'column.chooser',\n\t\t\texecute: () => {\n\t\t\t\tconst state = !this.stateAll();\n\t\t\t\tfor (let column of this.listView) {\n\t\t\t\t\tcolumn.isVisible = state;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.defaults = new Command({\n\t\t\tsource: 'column.chooser',\n\t\t\texecute: () => {\n\t\t\t\tfor (let column of this.listView) {\n\t\t\t\t\tcolumn.isVisible = column.isDefault !== false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.toggleAggregation = new Command({ source: 'column.chooser' });\n\n\t\tthis.drop = new Command({\n\t\t\tsource: 'column.chooser',\n\t\t\tcanExecute: e => {\n\t\t\t\tconst node = e.dropData;\n\t\t\t\treturn node && node.value.column.canMove;\n\n\t\t\t},\n\t\t\texecute: e => {\n\t\t\t\tswitch (e.action) {\n\t\t\t\t\tcase 'over': {\n\t\t\t\t\t\tconst src = e.dragData;\n\t\t\t\t\t\tconst trg = e.dropData;\n\t\t\t\t\t\tif (src !== trg) {\n\t\t\t\t\t\t\tconst tree = this.tree;\n\n\t\t\t\t\t\t\tconst oldPos = findNode(tree, node => node === src);\n\t\t\t\t\t\t\tconst newPos = findNode(tree, node => node === trg);\n\t\t\t\t\t\t\tif (oldPos && newPos && newPos.path.indexOf(oldPos.node) < 0) {\n\t\t\t\t\t\t\t\tconst queue = oldPos.path.reverse();\n\t\t\t\t\t\t\t\tconst hostIndex = queue.findIndex(node => node.children.length > 1);\n\t\t\t\t\t\t\t\tif (hostIndex >= 0) {\n\t\t\t\t\t\t\t\t\tconst host = queue[hostIndex];\n\t\t\t\t\t\t\t\t\tconst target = queue[hostIndex - 1] || oldPos.node;\n\t\t\t\t\t\t\t\t\tconst index = host.children.indexOf(target);\n\n\t\t\t\t\t\t\t\t\thost.children.splice(index, 1);\n\t\t\t\t\t\t\t\t\tnewPos.parent.children.splice(newPos.index, 0, target);\n\n\t\t\t\t\t\t\t\t\ttarget.level = newPos.parent.level + 1;\n\t\t\t\t\t\t\t\t\tpreOrderDFS(\n\t\t\t\t\t\t\t\t\t\ttarget.children,\n\t\t\t\t\t\t\t\t\t\t(node, root, parent) => {\n\t\t\t\t\t\t\t\t\t\t\tnode.level = (root || parent).level + 1;\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ttarget\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\tthis.dropEvent.emit();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.drag = new Command({\n\t\t\tsource: 'column.chooser',\n\t\t\tcanExecute: e => {\n\t\t\t\tconst node = e.data;\n\t\t\t\treturn node && node.value.column.canMove;\n\t\t\t}\n\t\t});\n\n\t\tthis.submit = new Command({\n\t\t\tsource: 'column.chooser',\n\t\t\texecute: () => {\n\t\t\t\tconst index = preOrderDFS([this.tree], (node, current, parent) => {\n\t\t\t\t\tif (parent) {\n\t\t\t\t\t\tconst newNode = copy(node);\n\t\t\t\t\t\tcurrent.children.push(newNode);\n\n\t\t\t\t\t\tconst { isVisible, column } = node.value;\n\t\t\t\t\t\tif (isVisible) {\n\t\t\t\t\t\t\tconst { model } = newNode.key;\n\t\t\t\t\t\t\tmodel.isVisible = column.isVisible;\n\t\t\t\t\t\t\tmodel.aggregation = column.aggregation;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnewNode.value = null;\n\t\t\t\t\t\treturn newNode;\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrent.value = null;\n\t\t\t\t\treturn current;\n\t\t\t\t}, copy(this.tree));\n\n\t\t\t\tconst { model: gridModel } = this.plugin;\n\t\t\t\tgridModel.columnList({ index }, {\n\t\t\t\t\tsource: 'column.chooser.view'\n\t\t\t\t});\n\n\t\t\t\tthis.submitEvent.emit();\n\t\t\t}\n\t\t});\n\n\t\tthis.cancel = new Command({\n\t\t\tsource: 'column.chooser',\n\t\t\texecute: () => this.cancelEvent.emit()\n\t\t});\n\n\t\tthis.reset = new Command({\n\t\t\tsource: 'column.chooser',\n\t\t\texecute: () => setup()\n\t\t});\n\n\t\tthis.aggregations = Object\n\t\t\t.getOwnPropertyNames(Aggregation)\n\t\t\t.filter(key => isFunction(Aggregation[key]));\n\n\t\tconst { model: gridModel, observe } = this.plugin;\n\t\tobserve(gridModel.dataChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.tag.source === 'column.chooser') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.hasChanges('columns')) {\n\t\t\t\t\tsetup();\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserve(gridModel.columnListChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.tag.source === 'column.chooser') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.hasChanges('index')) {\n\t\t\t\t\tsetup();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tstate(node) {\n\t\tconst { children } = node;\n\t\tconst { column } = node.value;\n\t\tif (children.length) {\n\t\t\treturn children.some(n => n.value.column.isVisible);\n\t\t}\n\n\t\treturn column.isVisible !== false;\n\t}\n\n\tstateAll() {\n\t\treturn this.listView.every(c => c.isVisible);\n\t}\n\n\tstateDefault() {\n\t\treturn this.listView.every(c => (c.isDefault !== false && c.isVisible !== false) || (c.isDefault === false && c.isVisible === false));\n\t}\n\n\tisIndeterminate() {\n\t\treturn !this.stateAll() && this.listView.some(c => c.isVisible);\n\t}\n\n\tget canAggregate() {\n\t\treturn this.columnChooserCanAggregate;\n\t}\n\n\tget resource() {\n\t\treturn this.plugin.model.columnChooser().resource;\n\t}\n}\n\nclass ColumnChooserState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\t\tthis.canAggregate = false;\n\t\tthis.canSort = true;\n\t}\n}\n\nclass ColumnFilterPlugin {\n\tconstructor(plugin, context) {\n\t\tconst { model } = plugin;\n\n\t\tthis.plugin = plugin;\n\t\tthis.column = context.column;\n\n\t\tthis.cancelEvent = new Event();\n\t\tthis.submitEvent = new Event();\n\t\tthis.resetEvent = new Event();\n\n\t\tconst filterBy = model.filter().by[this.column.key];\n\n\t\tthis.by = new Set((filterBy && filterBy.items) || []);\n\t\tthis.byBlanks = !!(filterBy && filterBy.blanks);\n\n\t\tlet defaultOperator = model.filter().operatorFactory(this.column)[0] || 'contains';\n\t\tif (filterBy && filterBy.items && filterBy.items.length) {\n\t\t\tdefaultOperator = 'contains';\n\t\t}\n\n\t\tthis.items = [];\n\t\tthis.operator = filterBy && filterBy.expression && filterBy.expression.op || defaultOperator;\n\t\tthis.value = filterBy && filterBy.expression && filterBy.expression.right || null;\n\t\tthis.title = this.column.title;\n\t\tthis.getValue = getLabelFactory(this.column);\n\n\t\tObject.assign(this, this.commands);\n\n\t\tthis.changeOperator.execute(this.operator);\n\t}\n\n\tstate(item) {\n\t\treturn this.by.has(item);\n\t}\n\n\tstateAll() {\n\t\treturn this.items.every(this.state.bind(this)) && (!this.hasBlanks || this.byBlanks);\n\t}\n\n\tisIndeterminate() {\n\t\treturn !this.stateAll() && (this.items.some(this.state.bind(this)) || this.byBlanks);\n\t}\n\n\tisEmpty() {\n\t\treturn !!this.by.size || this.byBlanks;\n\t};\n\n\tget commands() {\n\t\treturn {\n\t\t\ttoggle: new Command({\n\t\t\t\tsource: 'column.filter.view',\n\t\t\t\texecute: (item) => {\n\t\t\t\t\tif (this.by.has(item)) {\n\t\t\t\t\t\tthis.by.delete(item);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.by.add(item);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.by = new Set(this.by);\n\t\t\t\t}\n\t\t\t}),\n\t\t\ttoggleAll: new Command({\n\t\t\t\tsource: 'column.filter.view',\n\t\t\t\texecute: search => {\n\t\t\t\t\tconst state = !this.stateAll();\n\t\t\t\t\tif (state) {\n\t\t\t\t\t\tfor (let item of this.items) {\n\t\t\t\t\t\t\tthis.by.add(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (search) {\n\t\t\t\t\t\t\tfor (let item of this.by) {\n\t\t\t\t\t\t\t\tif (this.items.indexOf(item) >= 0) {\n\t\t\t\t\t\t\t\t\tthis.by.delete(item);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthis.by.clear();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.by = new Set(this.by);\n\t\t\t\t\tthis.byBlanks = this.hasBlanks && state;\n\t\t\t\t}\n\t\t\t}),\n\n\t\t\tchangeOperator: new Command({\n\t\t\t\tsource: 'column.filter.view',\n\t\t\t\texecute: (op) => {\n\t\t\t\t\tthis.operator = op;\n\n\t\t\t\t\tlet { value } = this;\n\t\t\t\t\tswitch (op) {\n\t\t\t\t\t\tcase 'between': {\n\t\t\t\t\t\t\tif (!Array.isArray(value)) {\n\t\t\t\t\t\t\t\tif (isUndefined(value)\n\t\t\t\t\t\t\t\t\t|| value === null\n\t\t\t\t\t\t\t\t\t|| value === '') {\n\t\t\t\t\t\t\t\t\tthis.value = [];\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.value = [value];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\t\t\t\tthis.value = value[0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\n\t\t\tsubmit: new Command({\n\t\t\t\tsource: 'column.filter.view',\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst { model } = this.plugin;\n\t\t\t\t\tconst by = clone(model.filter().by);\n\n\t\t\t\t\tconst filter = by[this.column.key] || {};\n\n\t\t\t\t\tfilter.items = Array.from(this.by);\n\t\t\t\t\tfilter.blanks = this.byBlanks;\n\n\t\t\t\t\tif (this.operator === 'contains') {\n\t\t\t\t\t\tdelete filter.expression;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfilter.items = [];\n\n\t\t\t\t\t\tif (this.operator.startsWith('is')) {\n\t\t\t\t\t\t\tfilter.expression = {\n\t\t\t\t\t\t\t\tkind: 'condition',\n\t\t\t\t\t\t\t\top: this.operator,\n\t\t\t\t\t\t\t\tleft: this.column.key,\n\t\t\t\t\t\t\t\tright: null,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (\n\t\t\t\t\t\t\tisUndefined(this.value)\n\t\t\t\t\t\t\t|| this.value === null\n\t\t\t\t\t\t\t|| this.value === ''\n\t\t\t\t\t\t\t|| (isArray(this.value) && this.value.length === 0)) {\n\t\t\t\t\t\t\tdelete filter.expression;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst parse = parseFactory(this.column.type, this.column.editorOptions.editor);\n\t\t\t\t\t\t\tfilter.expression = {\n\t\t\t\t\t\t\t\tkind: 'condition',\n\t\t\t\t\t\t\t\top: this.operator,\n\t\t\t\t\t\t\t\tleft: this.column.key,\n\t\t\t\t\t\t\t\tright: isArray(this.value) ? this.value.map(parse) : parse(this.value),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ((filter.items && filter.items.length) || filter.blanks || filter.expression) {\n\t\t\t\t\t\tby[this.column.key] = filter;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdelete by[this.column.key];\n\t\t\t\t\t}\n\n\t\t\t\t\tmodel.filter({ by }, { source: 'column.filter.view' });\n\n\t\t\t\t\tthis.submitEvent.emit();\n\t\t\t\t}\n\t\t\t}),\n\n\t\t\tcancel: new Command({\n\t\t\t\tsource: 'column.filter.view',\n\t\t\t\texecute: () => this.cancelEvent.emit()\n\t\t\t}),\n\n\t\t\treset: new Command({\n\t\t\t\tsource: 'column.filter.view',\n\t\t\t\texecute: () => {\n\t\t\t\t\tthis.by = new Set();\n\t\t\t\t\tthis.byBlanks = false;\n\t\t\t\t\tthis.value = this.operator === 'between' ? [] : null;\n\t\t\t\t\tthis.resetEvent.emit();\n\t\t\t\t}\n\t\t\t}),\n\t\t};\n\t}\n}\n\nclass ColumnFilterState {\n\tconstructor() {\n\t\tthis.threshold = 20;\n\t\tthis.source = 'data';\n\t}\n}\n\nconst GRID_ACTIVE_CLASS = `${GRID_PREFIX}-active`;\nconst GRID_HIDE_CLASS = `${GRID_PREFIX}-hide`;\n\nclass ColumnSortPlugin {\n\tconstructor(plugin, context) {\n\t\tconst { model, observeReply, view } = plugin;\n\t\tconst { column, iconDesc, iconAsc, element } = context;\n\n\t\tthis.element = element;\n\n\t\tobserveReply(model.sortChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('by')) {\n\t\t\t\t\tif (view.sort.order(column) < 0) {\n\t\t\t\t\t\tFastdom.mutate(() => {\n\t\t\t\t\t\t\telement.classList.add(GRID_HIDE_CLASS);\n\t\t\t\t\t\t\telement.classList.remove(GRID_ACTIVE_CLASS);\n\n\t\t\t\t\t\t\ticonAsc.classList.remove(GRID_ACTIVE_CLASS);\n\t\t\t\t\t\t\ticonDesc.classList.remove(GRID_ACTIVE_CLASS);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst direction = view.sort.direction(column);\n\t\t\t\t\t\tconst oldIcon = direction === 'asc' ? iconDesc : iconAsc;\n\t\t\t\t\t\tconst newIcon = direction === 'asc' ? iconAsc : iconDesc;\n\n\t\t\t\t\t\tFastdom.mutate(() => {\n\t\t\t\t\t\t\telement.classList.add(GRID_ACTIVE_CLASS);\n\t\t\t\t\t\t\telement.classList.remove(GRID_HIDE_CLASS);\n\n\t\t\t\t\t\t\toldIcon.classList.remove(GRID_ACTIVE_CLASS);\n\t\t\t\t\t\t\tnewIcon.classList.add(GRID_ACTIVE_CLASS);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tthis.toggle = new Command({\n\t\t\tcanExecute: () => view.sort.toggle.canExecute(column),\n\t\t\texecute: () => view.sort.toggle.execute(column)\n\t\t});\n\t}\n\n\tclick() {\n\t\tif (this.toggle.canExecute()) {\n\t\t\tthis.toggle.execute();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tmouseLeave() {\n\t\tFastdom.mutate(() => {\n\t\t\tthis.element.classList.remove(GRID_HIDE_CLASS);\n\t\t});\n\t}\n}\n\nclass DataManipulationState {\n\tconstructor() {\n\t\tthis.resource = new Resource();\n\n\t\tthis.deleted = new Set();\n\t\tthis.added = new Set();\n\t\tthis.edited = new Map();\n\n\t\tthis.rowFactory = etalonRow => {\n\t\t\tif (etalonRow) {\n\t\t\t\treturn cloneDeep(etalonRow, value => {\n\t\t\t\t\tif (isArray(value)) {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!isObject(value) ||\n\t\t\t\t\t\tisNumber(value) ||\n\t\t\t\t\t\tisDate(value) ||\n\t\t\t\t\t\tisBoolean(value) ||\n\t\t\t\t\t\tisFunction(value)) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}\n}\n\nclass DataManipulationPlugin {\n\tconstructor(plugin) {\n\t\tthis.plugin = plugin;\n\n\t\tthis.commitCommand = new Command({\n\t\t\texecute: e => {\n\t\t\t\tif (e.column.category !== 'data') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst rowId = this.rowId(e.rowIndex, e.row);\n\t\t\t\tconst columnId = this.columnId(e.columnIndex, e.column);\n\t\t\t\tconst { edited } = this.changes;\n\n\t\t\t\tlet entries = edited.get(rowId);\n\t\t\t\tif (!entries) {\n\t\t\t\t\tentries = [];\n\t\t\t\t\tedited.set(rowId, entries);\n\t\t\t\t}\n\n\t\t\t\tlet entryIndex = entries.findIndex(entry => entry.column === columnId);\n\t\t\t\tlet entry = entries[entryIndex];\n\t\t\t\tif (!entry) {\n\t\t\t\t\tentry = {\n\t\t\t\t\t\tcolumn: columnId,\n\t\t\t\t\t\toldValue: e.oldValue,\n\t\t\t\t\t\toldLabel: e.oldLabel\n\t\t\t\t\t};\n\n\t\t\t\t\tentryIndex = entries.length;\n\t\t\t\t\tentries.push(entry);\n\t\t\t\t}\n\n\t\t\t\tentry.newValue = e.newValue;\n\t\t\t\tentry.newLabel = e.newLabel;\n\n\t\t\t\t// TODO: understand if we need to track label changes?\n\t\t\t\tif (!this.hasChanges(entry.newValue, entry.oldValue)) {\n\t\t\t\t\tentries.splice(entryIndex, 1);\n\t\t\t\t\tif (!entries.length) {\n\t\t\t\t\t\tedited.delete(rowId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.actions = [\n\t\t\tnew Action(\n\t\t\t\tnew Command({\n\t\t\t\t\tsource: 'data.manipulation',\n\t\t\t\t\texecute: () => {\n\t\t\t\t\t\tconst { model, observe, table } = this.plugin;\n\t\t\t\t\t\tconst { data } = model;\n\n\t\t\t\t\t\tconst newRow = this.rowFactory(model.data().rows[0]);\n\t\t\t\t\t\tif (isUndefined(newRow)) {\n\t\t\t\t\t\t\tthrow new GridError('data.manipulation', 'Setup rowFactory property to add new rows');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst rowId = this.rowId(0, newRow);\n\t\t\t\t\t\tthis.changes.added.add(rowId);\n\t\t\t\t\t\tdata({\n\t\t\t\t\t\t\trows: [newRow].concat(data().rows)\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tsource: 'data.manipulation'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tobserve(model.sceneChanged)\n\t\t\t\t\t\t\t.pipe(\n\t\t\t\t\t\t\t\tfilter(e => e.hasChanges('status') && e.state.status === 'stop'),\n\t\t\t\t\t\t\t\ttakeOnce()\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.subscribe(e => {\n\t\t\t\t\t\t\t\tconst index = model.view().rows.indexOf(newRow);\n\t\t\t\t\t\t\t\tmodel.focus({\n\t\t\t\t\t\t\t\t\trowIndex: index\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\tsource: 'data.manipulation.plugin'\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\ttable.view.focus();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tshortcut: 'F7'\n\t\t\t\t}),\n\t\t\t\t'Add New Row',\n\t\t\t\t'add'\n\t\t\t)];\n\n\t\tthis.rowActions = [\n\t\t\tnew Action(\n\t\t\t\tnew Command({\n\t\t\t\t\tsource: 'data.manipulation',\n\t\t\t\t\tcanExecute: e => {\n\t\t\t\t\t\tconst rowId = this.rowId(e.rowIndex, e.row);\n\t\t\t\t\t\treturn !this.changes.deleted.has(rowId);\n\t\t\t\t\t},\n\t\t\t\t\texecute: e => {\n\t\t\t\t\t\tconst { model } = this.plugin;\n\t\t\t\t\t\tconst { data } = model;\n\n\t\t\t\t\t\tconst rowId = this.rowId(e.rowIndex, e.row);\n\t\t\t\t\t\tconst changes = this.changes;\n\t\t\t\t\t\tif (changes.added.has(rowId)) {\n\t\t\t\t\t\t\tchanges.added.delete(rowId);\n\t\t\t\t\t\t\tconst rows = data().rows.filter((row, i) => this.rowId(i, row) !== rowId);\n\t\t\t\t\t\t\tdata({ rows }, {\n\t\t\t\t\t\t\t\tsource: 'data.manipulation'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tchanges.deleted.add(rowId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\t'Delete Row',\n\t\t\t\t'delete'\n\t\t\t),\n\t\t\tnew Action(\n\t\t\t\tnew Command({\n\t\t\t\t\tsource: 'data.manipulation',\n\t\t\t\t\texecute: e => {\n\t\t\t\t\t\tconst rowId = this.rowId(e.rowIndex, e.row);\n\t\t\t\t\t\tif (this.changes.deleted.has(rowId)) {\n\t\t\t\t\t\t\tthis.changes.deleted.delete(rowId);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.changes.edited.has(rowId)) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tconst { model } = this.plugin;\n\n\t\t\t\t\t\t\t\tconst edits = this.changes.edited.get(rowId);\n\t\t\t\t\t\t\t\tconst columnMap = columnService.mapColumns(model.columnList().line);\n\t\t\t\t\t\t\t\tfor (const edit of edits) {\n\t\t\t\t\t\t\t\t\tconst column = columnMap[edit.column];\n\t\t\t\t\t\t\t\t\tif (!column) {\n\t\t\t\t\t\t\t\t\t\tthrow new GridError('data.manipulation', `Column ${edit.column} is not found`);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tsetValue(e.row, column, edit.oldValue);\n\t\t\t\t\t\t\t\t\tsetLabel(e.row, column, edit.oldLabel);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfinally {\n\t\t\t\t\t\t\t\tthis.changes.edited.delete(rowId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tcanExecute: e => {\n\t\t\t\t\t\tconst rowId = this.rowId(e.rowIndex, e.row);\n\t\t\t\t\t\treturn this.changes.deleted.has(rowId) || this.changes.edited.has(rowId);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\t'Revert Row',\n\t\t\t\t'restore'\n\t\t\t),\n\t\t\t// new Action(\n\t\t\t//\tsource: 'data.manipulation',\n\t\t\t// \tnew Command({\n\t\t\t// \t\texecute: () => {\n\t\t\t// \t\t\t// TODO make edit form service\n\t\t\t// \t\t}\n\t\t\t// \t}),\n\t\t\t// \t'Edit Form',\n\t\t\t// \t'edit'\n\t\t\t// )\n\t\t];\n\n\t\tconst { model, disposable, observeReply } = this.plugin;\n\n\t\tthis.rowId = model.data().rowId;\n\t\tthis.columnId = model.data().columnId;\n\n\t\tconst dm = model.resolve(DataManipulationState);\n\t\tthis.rowFactory = dm.state().rowFactory;\n\n\t\tconst styleState = model.style();\n\t\tconst rows = Array.from(styleState.rows);\n\t\tconst cells = Array.from(styleState.cells);\n\t\trows.push(this.styleRow.bind(this));\n\t\tcells.push(this.styleCell.bind(this));\n\n\n\t\tmodel\n\t\t\t.edit({\n\t\t\t\tmode: 'cell',\n\t\t\t\tcommit: Composite.command([this.commitCommand, model.edit().commit])\n\t\t\t})\n\t\t\t.style({\n\t\t\t\trows, cells\n\t\t\t})\n\t\t\t.action({\n\t\t\t\titems: Composite.list([this.actions, model.action().items])\n\t\t\t});\n\n\t\tdisposable.add(() => {\n\t\t\tconst { items } = model.action();\n\t\t\tconst notDMActions = items.filter(x => this.actions.every(y => y.id !== x.id));\n\t\t\tmodel.action({ items: notDMActions });\n\t\t});\n\n\t\tobserveReply(model.columnListChanged)\n\t\t\t.pipe(\n\t\t\t\tfilter(e => e.hasChanges('line')),\n\t\t\t\ttakeOnce()\n\t\t\t)\n\t\t\t.subscribe(e => {\n\t\t\t\tconst rowOptionsColumn = e.state.line.find(column => column.type === 'row-options');\n\t\t\t\tif (rowOptionsColumn) {\n\t\t\t\t\trowOptionsColumn.editorOptions.actions.push(...this.rowActions);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\thasChanges(newValue, oldValue) {\n\t\tif (Array.isArray(newValue) && Array.isArray(oldValue)) {\n\t\t\tconst haschanges = oldValue.some((item, index) => {\n\t\t\t\treturn item !== newValue[index];\n\t\t\t});\n\n\t\t\treturn haschanges;\n\t\t}\n\t\t\n\t\treturn newValue !== oldValue;\n\t}\n\n\tstyleRow(row, context) {\n\t\tconst rowId = this.rowId(context.row, row);\n\t\tif (this.changes.deleted.has(rowId)) {\n\t\t\tcontext.class('deleted', { opacity: 0.3 });\n\t\t}\n\t}\n\n\tstyleCell(row, column, context) {\n\t\tconst rowId = this.rowId(context.row, row);\n\t\tconst changes = this.changes;\n\t\tif (column.type === 'row-indicator') {\n\t\t\tif (changes.deleted.has(rowId)) {\n\t\t\t\tcontext.class('delete-indicator', { background: '#EF5350' });\n\t\t\t}\n\t\t\telse if (changes.added.has(rowId)) {\n\t\t\t\tcontext.class('add-indicator', { background: '#C8E6C9' });\n\t\t\t}\n\t\t\telse if (changes.edited.has(rowId)) {\n\t\t\t\tcontext.class('edit-indicator', { background: '#E3F2FD' });\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (changes.edited.has(rowId)) {\n\t\t\tconst entries = changes.edited.get(rowId);\n\t\t\tif (entries.findIndex(entry => entry.column === this.columnId(context.column, column)) >= 0) {\n\t\t\t\tcontext.class('edited', { background: '#E3F2FD' });\n\t\t\t}\n\t\t}\n\t}\n\n\tget changes() {\n\t\tconst { model } = this.plugin;\n\t\treturn model.dataManipulation();\n\t}\n\n\tget resource() {\n\t\tconst dm = this.model.resolve(DataManipulationState);\n\t\treturn dm.state().resource;\n\t}\n}\n\nclass EditFormEditorPlugin {\n\tconstructor(context) {\n\t\tthis.editor = context.editor;\n\t}\n}\n\nclass EditFormPanelPlugin {\n\tconstructor(plugin, context) {\n\t\tconst { model, disposable } = plugin;\n\n\t\tthis.plugin = plugin;\n\t\tthis.editor = new RowEditor(context.row, model.columnList().line);\n\t\tthis.caption = context.caption;\n\n\t\tthis.submitEvent = new Event();\n\t\tthis.cancelEvent = new Event();\n\t\tthis.resetEvent = new Event();\n\n\t\tthis.submit = this.commands.submit;\n\t\tthis.cancel = this.commands.cancel;\n\t\tthis.reset = this.commands.reset;\n\n\t\tif (!isUndefined(context.shortcut)) {\n\t\t\tdisposable.add(context.shortcut.register(new Map(\n\t\t\t\tObject.entries(this.commands)\n\t\t\t)));\n\t\t}\n\t}\n\n\tget editors() {\n\t\treturn this.editor.editors;\n\t}\n\n\tget commands() {\n\t\tconst commands = {\n\t\t\tsubmit: new Command({\n\t\t\t\tsource: 'edit.form.panel',\n\t\t\t\tshortcut: this.shortcutFactory('commit'),\n\t\t\t\texecute: () => {\n\t\t\t\t\tthis.editor.commit();\n\t\t\t\t\tthis.submitEvent.emit();\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcancel: new Command({\n\t\t\t\tsource: 'edit.form.panel',\n\t\t\t\tshortcut: this.shortcutFactory('cancel'),\n\t\t\t\texecute: () => this.cancelEvent.emit()\n\t\t\t}),\n\t\t\treset: new Command({\n\t\t\t\tsource: 'edit.form.panel',\n\t\t\t\texecute: () => {\n\t\t\t\t\tthis.editor.editors.forEach(e => e.reset());\n\t\t\t\t\tthis.resetEvent.emit();\n\t\t\t\t}\n\t\t\t})\n\t\t};\n\n\t\treturn commands;\n\t}\n\n\tshortcutFactory(type) {\n\t\tconst { model } = this.plugin;\n\t\treturn () => {\n\t\t\tconst shortcuts = model.edit()[type + 'Shortcuts'];\n\t\t\treturn shortcuts['reference'] || shortcuts['$default'];\n\t\t};\n\t}\n}\n\nclass EditFormPlugin {\n\tconstructor(model, context) {\n\t\tthis.model = model;\n\n\t\tthis.key = context.key;\n\t\tthis.title = context.title;\n\t\tthis.row = context.row;\n\n\t\tthis.submitEvent = new Event();\n\t\tthis.cancelEvent = new Event();\n\n\t\tthis.submit = this.commands.submit;\n\t\tthis.cancel = this.commands.cancel;\n\t}\n\n\tget commands() {\n\t\tconst commands = {\n\t\t\tsubmit: new Command({\n\t\t\t\tsource: 'edit.form',\n\t\t\t\texecute: () => this.submitEvent.emit()\n\t\t\t}),\n\t\t\tcancel: new Command({\n\t\t\t\tsource: 'edit.form',\n\t\t\t\texecute: () => this.cancelEvent.emit()\n\t\t\t})\n\t\t};\n\n\t\treturn commands;\n\t}\n}\n\nfunction downloadFactory(fileSaver) {\n\treturn function download(name, data, mimeType, extension) {\n\t\tconst blob = new Blob([data], {type: mimeType});\n\t\tconst type = extension ? extension : mimeType.split('/')[1];\n\t\tconst fileName = `${name}.${type}`;\n\t\tfileSaver.saveAs(blob, fileName);\n\t};\n}\n\nclass PdfWriter {\n\tconstructor(jsPDF) {\n\t\tthis.jsPDF = jsPDF;\n\t}\n\twrite(rows, columns, name) {\n\t\tconst jsPDF = this.jsPDF;\n\t\tconst titles = [];\n\t\tconst values = [];\n\t\tconst doc = new jsPDF({orientation: 'landscape', unit: 'in'});\n\t\tconst tableOptions = {\n\t\t\tstyles: {\n\t\t\t\toverflow: 'linebreak',\n\t\t\t\tfontSize: 8,\n\t\t\t\tcolumnWidth: 'auto',\n\t\t\t\toverflowColumns: true\n\t\t\t},\n\t\t\theaderStyles: {\n\t\t\t\toverflow: 'ellipsize',\n\t\t\t},\n\t\t\tpageBreak: 'auto',\n\t\t\tmargin: 0\n\t\t};\n\t\tfor (let column of columns) {\n\t\t\ttitles.push({title: column.title, dataKey: column.path});\n\t\t}\n\t\tfor (let row of rows) {\n\t\t\tvalues.push(graphFlatView(row));\n\t\t}\n\n\t\tdoc.autoTable(titles, values, tableOptions);\n\t\tdoc.save(`${name}.pdf`);\n\t}\n}\n\nfunction sheet_to_workbook(sheet) {\n\tconst sheets = {};\n\tsheets['Sheet1'] = sheet;\n\treturn {SheetNames: ['Sheet1'], Sheets: sheets};\n}\n\nfunction toArrayBuffer(excel) {\n\tconst buffer = new ArrayBuffer(excel.length);\n\tconst view = new Uint8Array(buffer);\n\tfor (let i = 0; i < excel.length; ++i) {\n\t\tview[i] = excel.charCodeAt(i) & 0xFF;\n\t}\n\treturn buffer;\n}\n\nclass XlsxWriter {\n\tconstructor(xlsx) {\n\t\tthis.xlsx = xlsx;\n\t}\n\twrite(rows, columns) {\n\t\tconst result = [];\n\t\tconst headers = [];\n\t\tconst excelOptions = {bookType: 'xlsx', bookSST: true, cellDates: true, compression: true, type: 'binary'};\n\n\t\tfor (let row of rows) {\n\t\t\tresult.push(graphFlatView(row));\n\t\t}\n\t\tfor (let column of columns) {\n\t\t\theaders.push(column.title);\n\t\t}\n\t\tconst worksheet = this.xlsx.utils.json_to_sheet(result);\n\t\tconst workbook = sheet_to_workbook(this.updateTitles(worksheet, headers));\n\t\tconst excel = this.xlsx.write(workbook, excelOptions);\n\n\t\treturn toArrayBuffer(excel);\n\t}\n\n\tupdateTitles(worksheet, headers) {\n\t\tconst range = this.xlsx.utils.decode_range(worksheet['!ref']);\n\t\tfor (let i = range.s.r; i <= range.e.r; ++i) {\n\t\t\tconst address = this.xlsx.utils.encode_col(i) + '1';\n\t\t\tif (!worksheet[address]) continue;\n\t\t\tworksheet[address].v = headers[i];\n\t\t}\n\t\treturn worksheet;\n\t}\n}\n\nclass ExportPlugin {\n\tconstructor(model, type) {\n\t\tthis.model = model;\n\t\tthis.type = type;\n\n\t\tthis.csv = new Command({\n\t\t\tsource: 'export',\n\t\t\tcanExecute: () => this.type === 'csv',\n\t\t\texecute: () => {\n\t\t\t\tconst pluginService = new PluginService(this.model);\n\t\t\t\tconst fileSaver = pluginService.resolve('fileSaver');\n\t\t\t\tconst csv = new CsvExport();\n\t\t\t\tconst data = csv.write(this.rows, this.columns);\n\t\t\t\tconst download = downloadFactory(fileSaver);\n\t\t\t\tdownload(this.id, data, `text/${this.type}`);\n\t\t\t}\n\t\t});\n\n\t\tthis.json = new Command({\n\t\t\tsource: 'export',\n\t\t\tcanExecute: () => this.type === 'json',\n\t\t\texecute: () => {\n\t\t\t\tconst pluginService = new PluginService(this.model);\n\t\t\t\tconst fileSaver = pluginService.resolve('fileSaver');\n\t\t\t\tconst json = new JsonExport();\n\t\t\t\tconst data = json.write(this.rows, this.columns);\n\t\t\t\tconst download = downloadFactory(fileSaver);\n\t\t\t\tdownload(this.id, data, `text/${this.type}`);\n\t\t\t}\n\t\t});\n\n\t\tthis.xml = new Command({\n\t\t\tsource: 'export',\n\t\t\tcanExecute: () => this.type === 'xml',\n\t\t\texecute: () => {\n\t\t\t\tconst pluginService = new PluginService(this.model);\n\t\t\t\tconst fileSaver = pluginService.resolve('fileSaver');\n\t\t\t\tconst xml = new XmlExport();\n\t\t\t\tconst data = xml.write(this.rows);\n\t\t\t\tconst download = downloadFactory(fileSaver);\n\t\t\t\tdownload(this.id, data, `application/${this.type}`);\n\t\t\t}\n\t\t});\n\n\t\tthis.xlsx = new Command({\n\t\t\tsource: 'export',\n\t\t\tcanExecute: () => this.type === 'xlsx',\n\t\t\texecute: () => {\n\t\t\t\tconst pluginService = new PluginService(this.model);\n\t\t\t\tconst lib = pluginService.resolve('xlsx');\n\t\t\t\tconst fileSaver = pluginService.resolve('fileSaver');\n\t\t\t\tconst xlsx = new XlsxWriter(lib);\n\t\t\t\tconst data = xlsx.write(this.rows, this.columns);\n\t\t\t\tconst download = downloadFactory(fileSaver);\n\t\t\t\tdownload(this.id, data, 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'xlsx');\n\t\t\t}\n\t\t});\n\n\t\tthis.pdf = new Command({\n\t\t\tsource: 'export',\n\t\t\tcanExecute: () => this.type === 'pdf',\n\t\t\texecute: () => {\n\t\t\t\tconst pluginService = new PluginService(this.model);\n\t\t\t\tconst lib = pluginService.resolve('pdf');\n\t\t\t\tconst pdf = new PdfWriter(lib);\n\t\t\t\tpdf.write(this.rows, this.columns, this.id);\n\t\t\t}\n\t\t});\n\t}\n\n\tget columns() {\n\t\treturn this.model.columnList().line;\n\t}\n\n\tget rows() {\n\t\treturn this.model.view().rows;\n\t}\n\n\tget id() {\n\t\treturn this.model.grid().id;\n\t}\n}\n\nclass FocusPlugin {\n\tconstructor(context) {\n\t\tthis.element = context.element;\n\t\tthis.targetSelector = context.targetSelector;\n\t\tthis.job = jobLine(context.delay);\n\t}\n\n\tset() {\n\t\tif (this.element.getAttribute('tabindex') === null\n\t\t\t|| this.element.getAttribute('tabindex') !== '') {\n\t\t\tthis.element.setAttribute('tabindex', -1);\n\t\t}\n\n\t\tthis.job(() => {\n\t\t\tlet targetElement = this.element;\n\t\t\tif (this.targetSelector) {\n\t\t\t\tconst target = this.element.querySelector(this.targetSelector);\n\t\t\t\tif (target) {\n\t\t\t\t\ttargetElement = target;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthrow new GridError('focus', `Element \"${this.targetSelector}\" is not found`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttargetElement.focus();\n\t\t});\n\t}\n}\n\nfunction rewriteObject(obj) {\n\tconst result = {};\n\tfor (let [key, value] of Object.entries(obj)) {\n\t\tresult[key] = value;\n\t}\n\treturn result;\n}\n\nclass XlsxReader {\n\tconstructor(xlsx) {\n\t\tthis.xlsx = xlsx;\n\t}\n\tread(data, options) {\n\n\t\tconst workbook = this.xlsx.read(data, {type: 'binary'});\n\t\treturn this.toJson(workbook, options);\n\t}\n\n\ttoJson(workbook, options = {}) {\n\t\tconst wbOptions = {};\n\t\tswitch (options.head) {\n\t\t\tcase 'alpha': {\n\t\t\t\twbOptions.header = 'A';\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'numeric': {\n\t\t\t\twbOptions.header = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tlet result = [];\n\t\tfor (let sheetName of workbook.SheetNames) {\n\t\t\tconst partial = this.xlsx.utils.sheet_to_json(workbook.Sheets[sheetName], wbOptions);\n\t\t\tresult = partial.concat(result);\n\t\t}\n\n\t\treturn result.map(rewriteObject);\n\t}\n}\n\nfunction getType(name) {\n\tconst delimiter = /[.]/g.test(name);\n\tif (delimiter) {\n\t\tconst type = name.split('.');\n\t\treturn type[type.length - 1];\n\t}\n}\n\nfunction readFile(e, file, model, options = {}) {\n\tconst data = e.target.result;\n\tconst type = file.type === '' ? getType(file.name) : file.type;\n\tconst pluginService = new PluginService(model);\n\tswitch (type) {\n\t\tcase 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':\n\t\tcase 'xlsx': {\n\t\t\tconst lib = pluginService.resolve('xlsx');\n\t\t\tconst xlsx = new XlsxReader(lib);\n\t\t\tconst rows = xlsx.read(data, options);\n\t\t\tconst createColumn = columnFactory(model);\n\t\t\tconst columns = generate({\n\t\t\t\trows,\n\t\t\t\tcolumnFactory: (type, body) => createColumn('text', body),\n\t\t\t\tdeep: false\n\t\t\t});\n\t\t\tmodel.data({\n\t\t\t\tcolumns,\n\t\t\t\trows\n\t\t\t}, { source: 'read' });\n\t\t\tbreak;\n\t\t}\n\t\tcase 'application/json':\n\t\tcase 'text/json':\n\t\tcase 'json': {\n\t\t\tconst json = new JsonImport();\n\t\t\tconst rows = json.read(data);\n\t\t\tif (rows.length) {\n\t\t\t\tconst createColumn = columnFactory(model);\n\t\t\t\tconst columns = generate({\n\t\t\t\t\trows,\n\t\t\t\t\tcolumnFactory: (type, body) => createColumn('text', body),\n\t\t\t\t\tdeep: true\n\t\t\t\t});\n\t\t\t\tmodel.data({\n\t\t\t\t\tcolumns,\n\t\t\t\t\trows\n\t\t\t\t}, { source: 'read' });\n\t\t\t} else {\n\t\t\t\tthrow new GridError('import', 'JSON for input should be an array of objects');\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\tcase 'application/xml':\n\t\tcase 'text/xml':\n\t\tcase 'xml': {\n\t\t\tconst xml = new XmlImport();\n\t\t\tconst rows = xml.read(data);\n\t\t\tconst columns = generate({\n\t\t\t\trows,\n\t\t\t\tcolumnFactory: columnFactory(model),\n\t\t\t\tdeep: true\n\t\t\t});\n\t\t\tmodel.data({\n\t\t\t\tcolumns,\n\t\t\t\trows\n\t\t\t}, { source: 'read' });\n\t\t\tbreak;\n\t\t}\n\t\tcase 'application/vnd.ms-excel':\n\t\tcase 'text/csv':\n\t\tcase 'csv': {\n\t\t\tconst csv = new CsvImport();\n\t\t\tconst rows = csv.read(data);\n\n\t\t\tlet title = firstRowTitle;\n\n\t\t\tif (options.head === 'alpha') {\n\t\t\t\ttitle = alphaTitle;\n\t\t\t} else if (options.head === 'numeric') {\n\t\t\t\ttitle = numericTitle;\n\t\t\t}\n\n\t\t\tconst columns = generate({\n\t\t\t\trows,\n\t\t\t\tcolumnFactory: columnFactory(model),\n\t\t\t\tdeep: false,\n\t\t\t\ttitle\n\t\t\t});\n\n\t\t\tif (title === firstRowTitle) {\n\t\t\t\trows.shift(0);\n\t\t\t}\n\t\t\tmodel.data({\n\t\t\t\tcolumns,\n\t\t\t\trows\n\t\t\t}, { source: 'read' });\n\t\t\tbreak;\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new GridError('import', `This is not valid file type ${type}`);\n\t\t}\n\t}\n}\n\nclass ImportPlugin {\n\tconstructor(model, element) {\n\t\tthis.model = model;\n\t\tthis.element = element;\n\t}\n\n\tupload() {\n\t\tupload(this.element);\n\t}\n\n\tload(e) {\n\t\tconst { files } = e.target;\n\t\tfor (let file of files) {\n\t\t\tconst reader = new FileReader();\n\t\t\treader.onload = e => readFile(e, file, this.model, this.options);\n\t\t\treader.readAsBinaryString(file);\n\t\t}\n\t}\n}\n\nclass PagerPlugin {\n\tconstructor(plugin) {\n\t\tconst { model } = plugin;\n\n\t\tthis.plugin = plugin;\n\n\t\tconst { shortcut } = model.pagination();\n\n\t\tthis.next = new Command({\n\t\t\tsource: 'pager',\n\t\t\tshortcut: shortcut.next,\n\t\t\texecute: () => {\n\t\t\t\tnew FocusAfterRenderService(plugin);\n\t\t\t\tmodel.pagination({ current: model.pagination().current + 1 }, { source: 'pager.view' });\n\t\t\t},\n\t\t\tcanExecute: () => (model.pagination().current + 1) * model.pagination().size < model.pagination().count\n\t\t});\n\n\t\tthis.prev = new Command({\n\t\t\tsource: 'pager',\n\t\t\tshortcut: shortcut.prev,\n\t\t\texecute: () => {\n\t\t\t\tnew FocusAfterRenderService(plugin);\n\t\t\t\tmodel.pagination({ current: model.pagination().current - 1 }, { source: 'pager.view' });\n\t\t\t},\n\t\t\tcanExecute: () => model.pagination().current > 0\n\t\t});\n\t}\n\n\tget theme() {\n\t\treturn this.plugin.model.style().classList\n\t}\n\n\tget resource() {\n\t\treturn this.plugin.model.pagination().resource;\n\t}\n\n\tget size() {\n\t\treturn this.plugin.model.pagination().size;\n\t}\n\n\tset size(value) {\n\t\tthis.plugin.model.pagination({ size: value, current: 0 }, { source: 'pager.view' });\n\t}\n\n\tget sizeList() {\n\t\treturn this.plugin.model.pagination().sizeList;\n\t}\n\n\tget current() {\n\t\treturn this.plugin.model.pagination().current;\n\t}\n\n\tset current(value) {\n\t\treturn this.plugin.model.pagination({ current: value }, { source: 'pager.view' });\n\t}\n\n\tget from() {\n\t\treturn Math.min(this.total, this.current * this.size + 1);\n\t}\n\n\tget to() {\n\t\treturn Math.min(this.total, (this.current + 1) * this.size);\n\t}\n\n\tget total() {\n\t\treturn this.plugin.model.pagination().count;\n\t}\n\n\tget totalPages() {\n\t\treturn this.size === 0\n\t\t\t? 0\n\t\t\t: Math.max(1, Math.ceil(this.total / this.size));\n\t}\n\n\tget scroll() {\n\t\treturn this.plugin.model.scroll();\n\t}\n\n\tget mode() {\n\t\treturn this.plugin.model.pagination().mode;\n\t}\n}\n\nclass PersistencePlugin {\n\tconstructor(plugin, createDefaultModel) {\n\t\tconst { model, observeReply } = plugin;\n\n\t\tthis.plugin = plugin;\n\t\tthis.service = new PersistenceService(model, createDefaultModel);\n\t\tthis.closeEvent = new Event();\n\t\tthis.items = [];\n\t\tthis.state = {\n\t\t\teditItem: null,\n\t\t\toldValue: null\n\t\t};\n\n\t\tconst { persistence } = model;\n\n\t\tthis.id = persistence().id;\n\t\tthis.title = this.stringify();\n\n\t\tpersistence()\n\t\t\t.storage\n\t\t\t.getItem(this.id)\n\t\t\t.then(items => {\n\t\t\t\tthis.items = items || [];\n\t\t\t\tthis.groups = this.buildGroups(this.items);\n\t\t\t});\n\n\t\tobserveReply(model.gridChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('status') && e.state.status === 'unbound') {\n\t\t\t\t\tthis.closeEvent.emit();\n\t\t\t\t}\n\t\t\t});\n\n\t\tthis.create = new Command({\n\t\t\tsource: 'persistence.view',\n\t\t\texecute: () => {\n\t\t\t\tconst item = {\n\t\t\t\t\ttitle: this.title,\n\t\t\t\t\tmodified: Date.now(),\n\t\t\t\t\tmodel: this.service.save(),\n\t\t\t\t\tisDefault: false,\n\t\t\t\t\tgroup: persistence().defaultGroup,\n\t\t\t\t\tcanEdit: true\n\t\t\t\t};\n\n\t\t\t\tif (persistence().create.execute(item) !== false) {\n\t\t\t\t\tthis.items.push(item);\n\t\t\t\t\tthis.persist();\n\t\t\t\t\tthis.title = '';\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tcanExecute: () => {\n\t\t\t\tif (!!this.title && this.isUniqueTitle(this.title)) {\n\t\t\t\t\tconst item = {\n\t\t\t\t\t\ttitle: this.title,\n\t\t\t\t\t\tmodified: Date.now(),\n\t\t\t\t\t\tmodel: this.service.save(),\n\t\t\t\t\t\tisDefault: false,\n\t\t\t\t\t\tgroup: persistence().defaultGroup,\n\t\t\t\t\t\tcanEdit: true\n\t\t\t\t\t};\n\n\t\t\t\t\treturn persistence().create.canExecute(item);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\tthis.edit = {\n\t\t\tenter: new Command({\n\t\t\t\tsource: 'persistence.view',\n\t\t\t\texecute: item => {\n\t\t\t\t\titem = item || this.items.find(this.isActive);\n\t\t\t\t\tif (!item) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tthis.state = {\n\t\t\t\t\t\teditItem: item,\n\t\t\t\t\t\toldValue: clone(item)\n\t\t\t\t\t};\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tcanExecute: item => this.state.editItem === null && item.canEdit\n\t\t\t}),\n\t\t\tcommit: new Command({\n\t\t\t\tsource: 'persistence.view',\n\t\t\t\tshortcut: 'enter',\n\t\t\t\texecute: item => {\n\t\t\t\t\titem = item || this.state.editItem;\n\t\t\t\t\tif (persistence().modify.execute(item) !== false) {\n\t\t\t\t\t\tconst title = item.title;\n\t\t\t\t\t\tif (!title || !this.isUniqueTitle(title)) {\n\t\t\t\t\t\t\tthis.edit.cancel.execute();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\titem.modified = Date.now();\n\t\t\t\t\t\tthis.persist();\n\t\t\t\t\t\tthis.state.editItem = null;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\tcanExecute: () =>\n\t\t\t\t\tthis.state.editItem !== null &&\n\t\t\t\t\tpersistence().modify.canExecute(this.state.editItem)\n\t\t\t}),\n\t\t\tcancel: new Command({\n\t\t\t\tsource: 'persistence.view',\n\t\t\t\tshortcut: 'escape',\n\t\t\t\texecute: () => {\n\t\t\t\t\tif (this.state.editItem !== null) {\n\t\t\t\t\t\tconst index = this.items.indexOf(this.state.editItem);\n\t\t\t\t\t\tthis.items.splice(index, 1, this.state.oldValue);\n\t\t\t\t\t\tthis.state.oldValue = null;\n\t\t\t\t\t\tthis.state.editItem = null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.closeEvent.emit();\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t})\n\t\t};\n\n\t\tthis.load = new Command({\n\t\t\tsource: 'persistence.view',\n\t\t\tcanExecute: item => persistence().load.canExecute(item),\n\t\t\texecute: item => {\n\t\t\t\tif (persistence().load.execute(item) !== false) {\n\t\t\t\t\tthis.service.load(item.model);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\tthis.reset = new Command({\n\t\t\tsource: 'persistence.view',\n\t\t\texecute: () => {\n\t\t\t\tif (persistence().reset.execute() !== false) {\n\t\t\t\t\tthis.service.reset();\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tcanExecute: () => persistence().reset.canExecute()\n\t\t});\n\n\t\tthis.remove = new Command({\n\t\t\tsource: 'persistence.view',\n\t\t\texecute: item => {\n\t\t\t\tconst index = this.items.indexOf(item);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tif (persistence().remove.execute(item) !== false) {\n\t\t\t\t\t\tthis.items.splice(index, 1);\n\n\t\t\t\t\t\tthis.persist();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tcanExecute: item =>\n\t\t\t\titem.canEdit && persistence().remove.canExecute(item)\n\t\t});\n\n\t\tthis.setDefault = new Command({\n\t\t\tsource: 'persistence.view',\n\t\t\tcanExecute: item => persistence().setDefault.canExecute(item),\n\t\t\texecute: item => {\n\t\t\t\tif (persistence().setDefault.execute(item) !== false) {\n\t\t\t\t\tconst index = this.items.indexOf(item);\n\t\t\t\t\tif (index === -1) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (item.isDefault) {\n\t\t\t\t\t\titem.isDefault = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.items.forEach(i => (i.isDefault = false));\n\t\t\t\t\t\titem.isDefault = true;\n\t\t\t\t\t}\n\t\t\t\t\tthis.items.splice(index, 1, item);\n\n\t\t\t\t\tthis.persist();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\tconst commandManager = new CommandManager();\n\t\tconst shortcut = new Shortcut(new ShortcutDispatcher());\n\n\t\tthis.keyDown = e => shortcut.keyDown(e);\n\n\t\tshortcut.register(commandManager, [\n\t\t\tthis.edit.enter,\n\t\t\tthis.edit.commit,\n\t\t\tthis.edit.cancel\n\t\t]);\n\t}\n\n\tget blank() {\n\t\treturn {\n\t\t\ttitle: 'Blank',\n\t\t\tmodified: Date.now(),\n\t\t\tmodel: {},\n\t\t\tisDefault: false,\n\t\t\tgroup: 'blank',\n\t\t\tcanEdit: false\n\t\t};\n\t}\n\n\tget sortedItems() {\n\t\treturn this.items.sort((a, b) => b.modified - a.modified);\n\t}\n\n\tbuildGroups(items) {\n\t\treturn items\n\t\t\t.reduce((memo, item) => {\n\t\t\t\tconst group = memo.find(m => m.key === item.group);\n\t\t\t\tif (group) {\n\t\t\t\t\tgroup.items.push(item);\n\t\t\t\t} else {\n\t\t\t\t\tmemo.push({\n\t\t\t\t\t\tkey: item.group,\n\t\t\t\t\t\titems: [item]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn memo;\n\t\t\t}, []);\n\t}\n\n\tisActive(item) {\n\t\treturn serialize(item.model) === serialize(this.service.save()); // eslint-disable-line angular/json-functions\n\t}\n\n\tpersist() {\n\t\tconst { model } = this.plugin;\n\n\t\tmodel\n\t\t\t.persistence()\n\t\t\t.storage\n\t\t\t.setItem(this.id, this.items.filter(item => item.canEdit));\n\n\t\tthis.groups = this.buildGroups(this.items);\n\t}\n\n\tstringify(item) {\n\t\tconst { settings } = this.plugin.model.persistence();\n\t\tconst model = item ? item.model : this.service.save();\n\t\tconst targets = [];\n\n\t\tfor (let key in settings) {\n\t\t\tif (!model[key]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst stringify = stringifyFactory(key);\n\t\t\tconst target = stringify(model[key]);\n\t\t\tif (target !== '') {\n\t\t\t\ttargets.push(target);\n\t\t\t}\n\t\t}\n\n\t\treturn targets.join('; ') || 'No settings';\n\t}\n\n\tisUniqueTitle(title) {\n\t\ttitle = (title || '').trim().toLowerCase();\n\t\treturn !this.items\n\t\t\t.some(item =>\n\t\t\t\titem !== this.state.editItem &&\n\t\t\t\t(item.title || '').toLowerCase() === title\n\t\t\t);\n\t}\n}\n\nclass PositionPlugin {\n\tconstructor(context, disposable) {\n\t\tthis.element = context.element;\n\t\tthis.targetName = context.targetName;\n\n\t\tconst windowListener = new EventListener(window, new EventManager(this));\n\t\tconst job = jobLine(400);\n\n\t\tdisposable.add(\n\t\t\twindowListener.on('resize', () => {\n\t\t\t\tthis.invalidate();\n\t\t\t\t// In case if after window resize there can different animated layout changes\n\t\t\t\tjob(() => this.invalidate());\n\t\t\t}));\n\t}\n\n\tinvalidate() {\n\t\tlet node = this.element.parentNode;\n\t\twhile (node) {\n\t\t\tconst targetName = (this.targetName || '').toLowerCase();\n\t\t\tif (node.nodeName.toLowerCase() === targetName) {\n\t\t\t\t// To gurantee last execution we cover mutate with measure\n\t\t\t\tFastdom.measure(() =>\n\t\t\t\t\tFastdom.mutate(() => {\n\t\t\t\t\t\tthis.layout(node, this.element);\n\t\t\t\t\t\tthis.element.style.opacity = 1;\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tnode = node.parentNode;\n\t\t}\n\t}\n\n\tlayout(target, source) {\n\t\tconst { top, right, left, bottom } = target.getBoundingClientRect();\n\t\tconst { width, height } = source.getBoundingClientRect();\n\n\t\tconst fitRect = this.boxRect();\n\t\tconst intersections = [];\n\n\t\tintersections.push(\n\t\t\tthis.intersection(fitRect, {\n\t\t\t\ttop: top,\n\t\t\t\tright: left + width,\n\t\t\t\tbottom: top + height,\n\t\t\t\tleft: left\n\t\t\t}));\n\n\t\tintersections.push(\n\t\t\tthis.intersection(fitRect, {\n\t\t\t\ttop: top,\n\t\t\t\tright: right,\n\t\t\t\tbottom: top + height,\n\t\t\t\tleft: right - width\n\t\t\t}));\n\n\t\tintersections.push(\n\t\t\tthis.intersection(fitRect, {\n\t\t\t\ttop: bottom - height,\n\t\t\t\tright: left + width,\n\t\t\t\tbottom: bottom,\n\t\t\t\tleft: left\n\t\t\t}));\n\n\t\tintersections.push(\n\t\t\tthis.intersection(fitRect, {\n\t\t\t\ttop: bottom - height,\n\t\t\t\tright: right,\n\t\t\t\tbottom: bottom,\n\t\t\t\tleft: right - width\n\t\t\t}));\n\n\t\tconst intersection = max(intersections, i => i.area);\n\t\tconst { left: l, top: t } = intersection.b;\n\t\tconst pos = this.fix({ left: l - fitRect.left, top: t - fitRect.top, width, height });\n\n\t\tsource.style.left = pos.left + 'px';\n\t\tsource.style.top = pos.top + 'px';\n\t}\n\n\tintersection(a, b) {\n\t\tconst xo = Math.max(0, Math.min(a.right, b.right) - Math.max(a.left, b.left));\n\t\tconst yo = Math.max(0, Math.min(a.bottom, b.bottom) - Math.max(a.top, b.top));\n\t\tconst area = xo * yo;\n\t\treturn { area, a, b };\n\t}\n\n\tfix(rect) {\n\t\tconst wr = this.windowRect();\n\t\tconst br = this.boxRect();\n\n\t\tconst { width: ww, height: wh } = wr;\n\t\tconst abx = br.left - wr.left;\n\t\tconst aby = br.top - wr.top;\n\n\t\tconst { height: rh, width: rw } = rect;\n\t\t//  absolute coords relative to window\n\t\tconst arx = rect.left + abx;\n\t\tconst ary = rect.top + aby;\n\n\t\tconst ltx0 = arx < wr.left;\n\t\tconst gtx1 = arx + rw > ww;\n\t\tconst lty0 = ary < wr.top;\n\t\tconst gty1 = ary + rh > wh;\n\n\t\t// we are trying to show right bottom corner\n\t\t// it often has control buttons\n\t\tconst left = ltx0 || gtx1\n\t\t\t? rect.left + (ww - arx - rw)\n\t\t\t: rect.left;\n\n\t\tconst top = lty0 || gty1\n\t\t\t? rect.top + (wh - ary - rh)\n\t\t\t: rect.top;\n\n\t\treturn { left, top };\n\t}\n\n\tboxRect() {\n\t\tlet view = this.element;\n\t\tconst marker = `${GRID_PREFIX}-box`;\n\t\twhile (view) {\n\t\t\tif (view.classList && view.classList.contains(marker)) {\n\t\t\t\treturn view.getBoundingClientRect();\n\t\t\t}\n\n\t\t\tview = view.parentNode;\n\t\t}\n\n\t\treturn this.windowRect();\n\t}\n\n\twindowRect() {\n\t\tconst { innerHeight: h, innerWidth: w } = window;\n\t\treturn {\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t\tbottom: h,\n\t\t\tright: w,\n\t\t\theight: h,\n\t\t\twidth: w\n\t\t};\n\t}\n}\n\nclass RestPlugin {\n\tconstructor(model, { get, post }) {\n\t\tthis.model = model;\n\n\t\tconst { method, url, serialize } = this.model.rest();\n\t\tif (!url) {\n\t\t\tthrow new GridError('rest', 'REST endpoint URL is required');\n\t\t}\n\n\t\tconst fetch = this.fetchFactory(method, get, post);\n\t\tconst doSerialize = this.serializeFactory(method, serialize);\n\n\t\tmodel.data({\n\t\t\tpipe: [\n\t\t\t\t(data, context, next) => {\n\t\t\t\t\tfetch(url, doSerialize(model)).then(data => next(data));\n\t\t\t\t},\n\t\t\t\t...PipeUnit.view\n\t\t\t]\n\t\t}, { source: 'rest.view' });\n\t}\n\n\tfetchFactory(method, get, post) {\n\t\tswitch (method.toLowerCase()) {\n\t\t\tcase 'get':\n\t\t\t\treturn get;\n\t\t\tcase 'post':\n\t\t\t\treturn post;\n\t\t\tdefault:\n\t\t\t\tthrow new GridError('rest', `\"${method}\" is incorrect REST method`);\n\t\t}\n\t}\n\n\tserializeFactory(method, serialize) {\n\t\tif (isFunction(serialize)) {\n\t\t\treturn serialize;\n\t\t} else if (method === 'get') {\n\t\t\treturn serializeGet;\n\t\t} else if (method === 'post') {\n\t\t\treturn serializePost;\n\t\t}\n\t}\n}\n\nclass ValidatorPlugin {\n\tconstructor(model, context) {\n\t\tthis.model = model;\n\t\tthis.context = context;\n\n\t\tthis.oldErrors = [];\n\t\tif (hasRules(this.rules, this.key)) {\n\t\t\tthis.validator = createValidator(this.rules, this.key);\n\t\t}\n\t}\n\n\tget errors() {\n\t\tif (this.validator) {\n\t\t\tconst target = {\n\t\t\t\t[this.key]: this.value\n\t\t\t};\n\n\t\t\tconst isValid = this.validator.validate(target);\n\t\t\tif (!isValid) {\n\t\t\t\tconst newError = this.validator.getErrors()[this.key];\n\t\t\t\tconst newErrors = isString(newError) ? [newError] : newError;\n\t\t\t\tif (!same(newErrors, this.oldErrors)) {\n\t\t\t\t\tthis.oldErrors = newErrors;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.oldErrors.length = 0;\n\t\t\t}\n\n\t\t\treturn this.stringify(this.oldErrors);\n\t\t}\n\t}\n\n\tget rules() {\n\t\treturn this.model.validation().rules;\n\t}\n\n\tget type() {\n\t\treturn this.context.type;\n\t}\n\n\tget value() {\n\t\treturn this.context.value;\n\t}\n\n\tget key() {\n\t\treturn this.context.key;\n\t}\n\n\tstringify(errors) {\n\t\tconst customErrors = [];\n\t\tlet rules = {};\n\t\tfor (const rule of this.validator.livrRules[this.key]) {\n\t\t\trules = Object.assign(rules, rule);\n\t\t}\n\n\t\tfor (const error of errors) {\n\t\t\tswitch (error) {\n\t\t\t\tcase 'REQUIRED': { customErrors.push(`Can't be empty`); break; }\n\t\t\t\tcase 'FORMAT_ERROR': { customErrors.push('Wrong format'); break; }\n\t\t\t\tcase 'TOO_LOW': { customErrors.push(`Must be > ${rules.min_number}`); break; }\n\t\t\t\tcase 'TOO_HIGH': { customErrors.push(`Must be < ${rules.max_number}`); break; }\n\t\t\t\tcase 'CANNOT BE EMPTY': { customErrors.push(`Can't be empty`); break; }\n\t\t\t\tcase 'WRONG_FORMAT': { customErrors.push('Must match the pattern'); break; }\n\t\t\t\tcase 'WRONG_EMAIL': { customErrors.push('Must be an email'); break; }\n\t\t\t\tcase 'WRONG_URL': { customErrors.push('Must be a url'); break; }\n\t\t\t\tcase 'WRONG_DATE': { customErrors.push('Must be a date'); break; }\n\t\t\t\tcase 'FIELDS_NOT_EQUAL': { customErrors.push(`Field must be equal ${rules.equal_to_field}`); break; }\n\t\t\t\tcase 'NOT_INTEGER': { customErrors.push('Must be an integer'); break; }\n\t\t\t\tcase 'NOT_POSITIVE_INTEGER': { customErrors.push('Must be a positive integer'); break; }\n\t\t\t\tcase 'NOT_DECIMAL': { customErrors.push('Must be a decimal'); break; }\n\t\t\t\tcase 'NOT_POSITIVE_DECIMAL': { customErrors.push('Must be a positive decimal'); break; }\n\t\t\t\tcase 'NOT_ALLOWED_VALUE': {\n\t\t\t\t\tif (rules.eq && rules.eq != this.value) {\n\t\t\t\t\t\tcustomErrors.push(`Must be equal to ${rules.eq}`);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tcustomErrors.push(`Must be one of ${rules.one_of}`);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'TOO_LONG': {\n\t\t\t\t\tif (rules.max_length && rules.max_length < this.value.length) {\n\t\t\t\t\t\tcustomErrors.push(`Length must be < ${rules.max_length}`);\n\t\t\t\t\t}\n\t\t\t\t\telse if (rules.length_equal && rules.length_equal != this.value.length) {\n\t\t\t\t\t\tcustomErrors.push(`Length must be equal to ${rules.length_equal}`);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tcustomErrors.push(`Length must be [${rules.length_between['0']},${rules.length_between['1']}]`);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'TOO_SHORT': {\n\t\t\t\t\tif (rules.min_length && rules.min_length > this.value.length) {\n\t\t\t\t\t\tcustomErrors.push(`Length must be > ${rules.min_length}`);\n\t\t\t\t\t}\n\t\t\t\t\telse if (rules.length_equal && rules.length_equal != this.value.length) {\n\t\t\t\t\t\tcustomErrors.push(`Length must be equal to ${rules.length_equal}`);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tcustomErrors.push(`Length must be [${rules.length_between['0']},${rules.length_between['1']}]`);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault: customErrors.push(error);\n\t\t\t}\n\t\t}\n\n\t\treturn customErrors;\n\t}\n}\n\nexport { AutofocusPlugin, BackdropPlugin, ColumnChooserPlugin, ColumnChooserState, ColumnFilterPlugin, ColumnFilterState, ColumnSortPlugin, DataManipulationPlugin, DataManipulationState, EditFormEditorPlugin, EditFormPanelPlugin, EditFormPlugin, ExportPlugin, FocusPlugin, ImportPlugin, PagerPlugin, PdfWriter, PersistencePlugin, PositionPlugin, RestPlugin, ValidatorPlugin, XlsxReader, XlsxWriter, downloadFactory, readFile };\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","import { NgModule } from '@angular/core';\nimport {\n\tChangeDetectorModule,\n\tColumnListModule,\n\tColumnModule,\n\tDndModule,\n\tGridModule,\n\tLayerModule,\n\tResizeModule,\n\tRowModule,\n\tTemplateModule,\n\tThemeModule,\n\tToolbarModule,\n\tVscrollModule\n} from '@qgrid/ngx';\nimport {\n\tActionBarModule,\n\tActionModule,\n\tAltModule,\n\tAutoCompleteEditorModule,\n\tBackdropModule,\n\tBoolEditorModule,\n\tCaptionModule,\n\tCellEditorModule,\n\tCellTooltipModule,\n\tColumnChooserModule,\n\tColumnChooserTriggerModule,\n\tColumnFilterModule,\n\tColumnSortModule,\n\tCommandModule,\n\tDataManipulationModule,\n\tEbModule,\n\tEditFormModule,\n\tExportModule,\n\tFileModule,\n\tFocusModule,\n\tImportModule,\n\tLayoutModule,\n\tLegendModule,\n\tLiveCellModule,\n\tLiveColumnModule,\n\tLiveRowModule,\n\tPagerModule,\n\tPaneModule,\n\tPersistenceModule,\n\tPipeModule,\n\tProgressModule,\n\tQueryBuilderModule,\n\tReferenceEditorModule,\n\tRestModule,\n\tDataProviderModule,\n\tStatusBarModule,\n\tTabTrapModule,\n\tValidationModule,\n\tVisibilityModule\n} from '@qgrid/ngx-plugins';\n\n\n\n@NgModule({\n\texports: [\n\t\tGridModule,\n\t\tColumnListModule,\n\t\tColumnModule,\n\t\tToolbarModule,\n\t\tRowModule,\n\t\tVscrollModule,\n\t\tThemeModule,\n\t\tResizeModule,\n\t\tDndModule,\n\t\tTemplateModule,\n\t\tActionBarModule,\n\t\tActionModule,\n\t\tAltModule,\n\t\tAutoCompleteEditorModule,\n\t\tBackdropModule,\n\t\tBoolEditorModule,\n\t\tCaptionModule,\n\t\tCellTooltipModule,\n\t\tCellEditorModule,\n\t\tChangeDetectorModule,\n\t\tColumnChooserModule,\n\t\tColumnChooserTriggerModule,\n\t\tColumnFilterModule,\n\t\tColumnSortModule,\n\t\tCommandModule,\n\t\tDataManipulationModule,\n\t\tEbModule,\n\t\tEditFormModule,\n\t\tExportModule,\n\t\tFileModule,\n\t\tFocusModule,\n\t\tImportModule,\n\t\tLayerModule,\n\t\tLayoutModule,\n\t\tLegendModule,\n\t\tLiveCellModule,\n\t\tLiveColumnModule,\n\t\tLiveRowModule,\n\t\tPagerModule,\n\t\tPaneModule,\n\t\tPersistenceModule,\n\t\tPipeModule,\n\t\tProgressModule,\n\t\tQueryBuilderModule,\n\t\tReferenceEditorModule,\n\t\tRestModule,\n\t\tDataProviderModule,\n\t\tStatusBarModule,\n\t\tTabTrapModule,\n\t\tValidationModule,\n\t\tVisibilityModule,\n\t],\n})\nexport class Ng2GridModule {\n}\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { Action } from '@qgrid/core';\nimport { GridPlugin } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-action-bar',\n\ttemplateUrl: './action-bar.component.html',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ActionBarComponent implements OnInit {\n\n\tcontext: { $implicit: ActionBarComponent } = {\n\t\t$implicit: this\n\t};\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate cd: ChangeDetectorRef,\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst { model, observeReply } = this.plugin;\n\n\t\tobserveReply(model.actionChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tconst initialItems = e.state.items;\n\t\t\t\tconst isSorted = this.isSorted(initialItems);\n\n\t\t\t\tif(isSorted) {\n\t\t\t\t\tthis.cd.markForCheck();\n\t\t\t\t\tthis.cd.detectChanges();\n\t\t\t\t} else {\n\t\t\t\t\tmodel.action({\n\t\t\t\t\t\titems: initialItems.sort((a: Action, b: Action) => {\n\t\t\t\t\t\t\treturn a.command.priority - b.command.priority;\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (e.hasChanges('items')) {\n\t\t\t\t\tthis.cd.markForCheck();\n\t\t\t\t\tthis.cd.detectChanges();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tget actions(): Action[] {\n\t\tconst { model } = this.plugin;\n\t\treturn model.action().items;\n\t}\n\n\tprivate isSorted(actions: Action[]): boolean {\n\t\tfor (let i = 0; i < actions.length - 1; i++) {\n\t\t\tconst action = actions[i];\n\t\t\tconst nextAction = actions[i+1];\n\t\t\tif (action.command.priority > nextAction.command.priority) {\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n}\n","<ng-container [key]=\"'plugin-action-bar.tpl.html'\"\n              [context]=\"context\">\n</ng-container>","import { NgModule } from '@angular/core';\nimport { TemplateModule } from '@qgrid/ngx';\nimport { ActionBarComponent } from './action-bar.component';\nimport { ActionListComponent } from './action-list.component';\n\n@NgModule({\n\tdeclarations: [\n\t\tActionBarComponent,\n\t\tActionListComponent,\n\t],\n\texports: [\n\t\tActionBarComponent,\n\t\tActionListComponent,\n\t],\n\timports: [\n\t\tTemplateModule\n\t]\n})\nexport class ActionBarModule { }\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\n@Component({\n\tselector: 'q-grid-actions',\n\ttemplate: '',\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ActionListComponent {\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport { Action, Command } from '@qgrid/core';\nimport { GridError, GridModel, GridPlugin } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-action-core',\n\ttemplateUrl: './action-core.component.html',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ActionCoreComponent {\n\t@Input() action: Action;\n\n\tcontext: { $implicit: ActionCoreComponent } = {\n\t\t$implicit: this\n\t};\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin\n\t) {\n\t}\n\n\tget model(): GridModel {\n\t\treturn this.plugin.model;\n\t}\n\n\tget command(): Command {\n\t\tconst { action } = this;\n\t\tif (!action) {\n\t\t\tthrow new GridError(\n\t\t\t\t'action-core.component',\n\t\t\t\t'Action is not set'\n\t\t\t);\n\t\t}\n\n\t\treturn action.command;\n\t}\n\n\tget title() {\n\t\tconst { action } = this;\n\t\tif (!action) {\n\t\t\tthrow new GridError(\n\t\t\t\t'action-core.component',\n\t\t\t\t'Action is not set'\n\t\t\t);\n\t\t}\n\n\t\treturn action.title;\n\t}\n\n\tget icon() {\n\t\tconst { action } = this;\n\t\tif (!action) {\n\t\t\tthrow new GridError(\n\t\t\t\t'action-core.component',\n\t\t\t\t'Action is not set'\n\t\t\t);\n\t\t}\n\n\t\treturn action.icon;\n\t}\n\n\tget templateUrl() {\n\t\tconst { action } = this;\n\t\tif (!action) {\n\t\t\tthrow new GridError(\n\t\t\t\t'action-core.component',\n\t\t\t\t'Action is not set'\n\t\t\t);\n\t\t}\n\n\t\treturn action.templateUrl;\n\t}\n\n\tget mode(): 'template' | 'icon' | 'text' | 'none' {\n\t\tconst { action } = this;\n\t\tif (!action) {\n\t\t\tthrow new GridError(\n\t\t\t\t'action-core.component',\n\t\t\t\t'Action is not set'\n\t\t\t);\n\t\t}\n\n\t\tif (action.templateUrl) {\n\t\t\treturn 'template';\n\t\t}\n\n\t\tif (action.icon) {\n\t\t\treturn 'icon';\n\t\t}\n\n\t\tif (action.title) {\n\t\t\treturn 'text';\n\t\t}\n\n\t\treturn 'none';\n\t}\n}\n","<ng-container key=\"plugin-action-core.tpl.html\"\n              [context]=\"context\">\n</ng-container>","import { ChangeDetectionStrategy, Component, ContentChild, Input, OnInit, TemplateRef } from '@angular/core';\nimport { Action, Command, guid } from '@qgrid/core';\nimport { GridPlugin, TemplateHostService } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-action',\n\ttemplate: '',\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tproviders: [\n\t\tGridPlugin,\n\t\tTemplateHostService\n\t]\n})\nexport class ActionComponent implements OnInit {\n\t@ContentChild(TemplateRef, { static: true }) templateRef: TemplateRef<any>;\n\n\t@Input() title: string;\n\t@Input() icon: string;\n\t@Input() command: Command;\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate templateHost: TemplateHostService\n\t) {\n\t\tconst id = guid();\n\t\ttemplateHost.key = source => `action-${source}-${id}.tpl.html`;\n\t}\n\n\tngOnInit() {\n\t\tconst { model, disposable } = this.plugin;\n\t\tconst action = new Action(\n\t\t\tthis.command || new Command(),\n\t\t\tthis.title,\n\t\t\tthis.icon\n\t\t);\n\n\t\tif (this.templateRef) {\n\t\t\taction.templateUrl = this.templateHost.key('trigger');\n\t\t}\n\n\t\tmodel.action({\n\t\t\titems: model\n\t\t\t\t.action()\n\t\t\t\t.items\n\t\t\t\t.concat([action])\n\t\t}, {\n\t\t\tsource: 'action.component'\n\t\t});\n\n\t\t\n\t\tdisposable.add(() =>\n\t\t\tmodel.action({\n\t\t\t\titems: model\n\t\t\t\t\t.action()\n\t\t\t\t\t.items\n\t\t\t\t\t.filter(x => x !== action)\n\t\t\t})\n\t\t);\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { ActionCoreComponent } from './action-core.component';\nimport { ActionComponent } from './action.component';\nimport { TemplateModule } from '@qgrid/ngx';\n\n@NgModule({\n\tdeclarations: [\n\t\tActionComponent,\n\t\tActionCoreComponent\n\t],\n\texports: [\n\t\tActionComponent,\n\t\tActionCoreComponent\n\t],\n\timports: [\n\t\tTemplateModule\n\t]\n})\nexport class ActionModule { }\n","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport { ColumnModel } from '@qgrid/core';\nimport { GridPlugin } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-alt',\n\ttemplateUrl: './alt.component.html',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AltComponent implements OnInit {\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst { model, observe, service } = this.plugin;\n\n\t\tconst altColumn: ColumnModel = {\n\t\t\tkey: '$alt.number',\n\t\t\ttype: 'row-number',\n\t\t\ttitle: 'Alt',\n\t\t\tcanHighlight: false,\n\t\t\tcanMove: false,\n\t\t\tcanResize: false,\n\t\t};\n\n\t\tmodel\n\t\t\t.pagination({\n\t\t\t\tsize: 10,\n\t\t\t}, {\n\t\t\t\tsource: 'alt.component'\n\t\t\t})\n\t\t\t.data({\n\t\t\t\tcolumns:\n\t\t\t\t\t[altColumn]\n\t\t\t\t\t\t.concat(model.data().columns)\n\t\t\t}, {\n\t\t\t\tsource: 'alt.component'\n\t\t\t});\n\n\t\tobserve(model.keyboardChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tconst { codes, status } = e.state;\n\t\t\t\tif (status === 'down') {\n\t\t\t\t\tswitch (codes[0]) {\n\t\t\t\t\t\tcase 'alt': {\n\t\t\t\t\t\t\tconst rowNo = Number.parseInt(codes[1], 10);\n\t\t\t\t\t\t\tif (!Number.isNaN(rowNo)) {\n\t\t\t\t\t\t\t\tconst { rows } = model.view();\n\t\t\t\t\t\t\t\tconst { current, size } = model.pagination();\n\n\t\t\t\t\t\t\t\tconst rowIndex = rowNo + current * size;\n\t\t\t\t\t\t\t\tconst altRow = rows[rowIndex];\n\t\t\t\t\t\t\t\tif (altRow) {\n\t\t\t\t\t\t\t\t\tmodel.selection({\n\t\t\t\t\t\t\t\t\t\titems: [altRow]\n\t\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\t\tsource: 'alt.component'\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\tservice.focus(rowIndex);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t}\n}\n","<ng-template for=\"body-cell-row-number-the-$alt.number.tpl.html\"\n             let-$cell>\n\t{{$cell.rowIndex}}\n</ng-template>","import { NgModule } from '@angular/core';\nimport { TemplateModule } from '@qgrid/ngx';\nimport { AltComponent } from './alt.component';\n\n@NgModule({\n\tdeclarations: [AltComponent],\n\texports: [AltComponent],\n\timports: [TemplateModule]\n})\nexport class AltModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { isArray, predicateFactory } from '@qgrid/core';\nimport { GridPlugin } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-autocomplete-editor',\n\ttemplateUrl: './autocomplete-editor.component.html',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AutoCompleteEditorComponent {\n\toptions: any[] = [];\n\n\tcontext: { $implicit: AutoCompleteEditorComponent } = {\n\t\t$implicit: this\n\t};\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t) {\n\t}\n\n\tfilter(search: string) {\n\t\tconst test = predicateFactory(search);\n\t\tconst getLabel = this.itemLabelFactory(this.cell.column);\n\t\tif (isArray(this.items)) {\n\t\t\tthis.options = this.items.filter(item => test(getLabel(item)));\n\t\t}\n\t}\n\n\treset() {\n\t\tthis.options = [];\n\t}\n\n\tget items() {\n\t\treturn (this.cell.fetch as any).result;\n\t}\n\n\tget title() {\n\t\treturn this.cell.column.title;\n\t}\n\n\tget value() {\n\t\treturn this.cell.value;\n\t}\n\n\tset value(value) {\n\t\tthis.cell.value = value;\n\t}\n\n\titemLabelFactory(column) {\n\t\tconst { itemLabel } = column;\n\t\tif (itemLabel) {\n\t\t\treturn (item) => {\n\t\t\t\treturn itemLabel(item);\n\t\t\t};\n\t\t}\n\n\t\treturn item => item;\n\t}\n\n\tprivate get cell() {\n\t\treturn this.plugin.view.edit.cell;\n\t}\n}\n","<ng-container key=\"plugin-autocomplete-editor.tpl.html\"\n              [context]=\"context\">\n</ng-container>","import { NgModule } from '@angular/core';\nimport { TemplateModule } from '@qgrid/ngx';\nimport { AutoCompleteEditorComponent } from './autocomplete-editor.component';\n\n@NgModule({\n\tdeclarations: [\n\t\tAutoCompleteEditorComponent\n\t],\n\texports: [\n\t\tAutoCompleteEditorComponent\n\t],\n\timports: [\n\t\tTemplateModule\n\t]\n})\nexport class AutoCompleteEditorModule {\n}\n","import {\n\tChangeDetectionStrategy, Component, ElementRef, EventEmitter, Input, OnDestroy, OnInit, Output, TemplateRef, ViewChild\n} from '@angular/core';\nimport { BackdropPlugin } from '@qgrid/plugins';\nimport { BackdropService } from './backdrop.service';\n\n@Component({\n\tselector: 'q-grid-backdrop',\n\ttemplateUrl: './backdrop.component.html',\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BackdropComponent implements OnInit, OnDestroy {\n\t@ViewChild(TemplateRef, { static: true }) template: TemplateRef<any>;\n\t@Output('close') closeEvent = new EventEmitter<any>();\n\t@Input() propagate = true;\n\n\tcontext: { $implicit: BackdropComponent } = {\n\t\t$implicit: this\n\t};\n\n\tconstructor(private backdropService: BackdropService, elementRef: ElementRef) {\n\t\tbackdropService.element = elementRef;\n\t}\n\n\tngOnInit() {\n\t\tconst context = {\n\t\t\telement: this.backdropService.element.nativeElement,\n\t\t\tpropagate: this.propagate,\n\t\t\tonKeyDown: () => { },\n\t\t};\n\n\t\tconst backdrop = new BackdropPlugin(context);\n\t\tbackdrop.closeEvent.on(() => this.closeEvent.emit());\n\t}\n\n\tngOnDestroy() {\n\t\tthis.backdropService.element = null;\n\t}\n}\n","<ng-container key=\"plugin-backdrop.tpl.html\" [context]=\"context\"></ng-container>\n","import { Output, EventEmitter, Directive, Input, NgZone, Inject } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\n\n@Directive({\n\tselector: '[q-grid-backdrop]'\n})\nexport class BackdropDirective {\n\t@Input('q-grid-backdrop-selector') selector = '';\n\t@Output('q-grid-backdrop') close = new EventEmitter<any>();\n\tprivate backdrop: HTMLElement;\n\n\tconstructor(private zone: NgZone, @Inject(DOCUMENT) private document: any) {\n\t}\n\n\t@Input('q-grid-backdrop-active')\n\tset backdropHost(value: any) {\n\t\tif (!value) {\n\t\t\tif (this.backdrop) {\n\t\t\t\tthis.backdrop.remove();\n\t\t\t\tthis.backdrop = null;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\t\tthis.backdrop = this.document.createElement('div');\n\t\tthis.backdrop.classList.add('q-grid-backdrop');\n\t\tthis.backdrop.style.zIndex = '1000';\n\n\t\tthis.zone.runOutsideAngular(() => {\n\t\t\tthis.backdrop.addEventListener('click', () => {\n\t\t\t\tif (this.backdrop) {\n\t\t\t\t\tthis.backdrop.remove();\n\t\t\t\t\tthis.backdrop = null;\n\t\t\t\t\tthis.close.emit();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tthis.zone.runOutsideAngular(() => {\n\t\t\tconst element = <HTMLElement>document.querySelector(this.selector);\n\n\t\t\telement.style.zIndex = '1001';\n\t\t\telement.parentElement.appendChild(this.backdrop);\n\t\t});\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { BackdropComponent } from './backdrop.component';\nimport { BackdropDirective } from './backdrop.directive';\nimport { BackdropService } from './backdrop.service';\nimport { TemplateModule } from '@qgrid/ngx';\n\n@NgModule({\n\tdeclarations: [\n\t\tBackdropComponent,\n\t\tBackdropDirective\n\t],\n\texports: [\n\t\tBackdropComponent,\n\t\tBackdropDirective\n\t],\n\timports: [\n\t\tTemplateModule\n\t],\n\tproviders: [\n\t\tBackdropService\n\t]\n})\nexport class BackdropModule {\n}\n","import { ElementRef, Injectable } from '@angular/core';\nimport { Guard } from '@qgrid/core';\n\n@Injectable()\nexport class BackdropService {\n\tisActive = true;\n\telement: ElementRef;\n\n\thide() {\n\t\tGuard.notNull(this.element, 'element');\n\n\t\tif (this.isActive) {\n\t\t\tthis.element.nativeElement.classList.add('q-grid-backdrop-inactive');\n\t\t\tthis.isActive = false;\n\t\t}\n\t}\n\n\treveal() {\n\t\tGuard.notNull(this.element, 'element');\n\n\t\tif (!this.isActive) {\n\t\t\tthis.element.nativeElement.classList.remove('q-grid-backdrop-inactive');\n\t\t\tthis.isActive = true;\n\t\t}\n\t}\n}\n","import { ChangeDetectionStrategy, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { BoolColumnModel } from '@qgrid/core';\n\n@Component({\n\tselector: 'q-grid-bool-editor',\n\ttemplateUrl: './bool-editor.component.html',\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BoolEditorComponent implements OnInit {\n\tprivate state: any;\n\n\t@Input() autofocus = false;\n\t@Input() column: BoolColumnModel;\n\t@Input() label: string;\n\t@Output() valueChange = new EventEmitter<any>();\n\n\tcontext: { $implicit: BoolEditorComponent } = {\n\t\t$implicit: this\n\t};\n\n\t@Input() get value() {\n\t\treturn this.state;\n\t}\n\n\tset value(value) {\n\t\tif (value !== this.value) {\n\t\t\tthis.state = value;\n\t\t\tthis.valueChange.emit(value);\n\t\t}\n\t}\n\n\tngOnInit() {\n\t\t// entering edit mode means toggling boolean value\n\t\tif (this.autofocus && this.column.editorOptions.trigger === 'click') {\n\t\t\tsetTimeout(() =>\n\t\t\t\tthis.value =\n\t\t\t\tthis.value === this.trueValue\n\t\t\t\t\t? this.falseValue\n\t\t\t\t\t: this.trueValue\n\t\t\t\t, 10);\n\t\t}\n\t}\n\n\tget isChecked() {\n\t\treturn this.column.isChecked(this.value);\n\t}\n\n\tset isChecked(value: boolean) {\n\t\tthis.value = value ? this.trueValue : this.falseValue;\n\t}\n\n\tisIndeterminate() {\n\t\treturn this.column.isIndeterminate(this.value);\n\t}\n\n\tget trueValue() {\n\t\treturn this.column.trueValue;\n\t}\n\n\tget falseValue() {\n\t\treturn this.column.falseValue;\n\t}\n}\n","<ng-container key=\"plugin-bool-editor.tpl.html\" [context]=\"context\"></ng-container>\n","import { NgModule } from '@angular/core';\nimport { BoolEditorComponent } from './bool-editor.component';\nimport { TemplateModule } from '@qgrid/ngx';\n\n@NgModule({\n\tdeclarations: [\n\t\tBoolEditorComponent\n\t],\n\texports: [\n\t\tBoolEditorComponent\n\t],\n\timports: [\n\t\tTemplateModule\n\t]\n})\nexport class BoolEditorModule {\n}\n","import { Component, ChangeDetectionStrategy, OnInit, ChangeDetectorRef } from '@angular/core';\nimport { GridPlugin } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-caption',\n\ttemplateUrl: './caption.component.html',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class CaptionComponent implements OnInit {\n\tcontext: { $implicit: CaptionComponent } = {\n\t\t$implicit: this\n\t};\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate cd: ChangeDetectorRef\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst { model, observe } = this.plugin;\n\t\tobserve(model.gridChanged)\n\t\t\t.subscribe(() => this.cd.detectChanges());\n\t}\n\n\tget value() {\n\t\tconst { caption, title } = this.plugin.model.grid();\n\t\treturn caption || title;\n\t}\n}\n","<ng-container key=\"plugin-caption.tpl.html\" [context]=\"context\"></ng-container>\n","import { NgModule } from '@angular/core';\nimport { CaptionComponent } from './caption.component';\nimport { TemplateModule } from '@qgrid/ngx';\n\n@NgModule({\n\tdeclarations: [CaptionComponent],\n\texports: [CaptionComponent],\n\timports: [TemplateModule]\n})\nexport class CaptionModule {}\n","import {\n\tComponent,\n\tTemplateRef,\n\tEventEmitter,\n\tOutput,\n\tViewChild,\n\tChangeDetectionStrategy,\n\tOnInit\n} from '@angular/core';\nimport { GridPlugin } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-cell-editor',\n\ttemplateUrl: './cell-editor.component.html',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class CellEditorComponent implements OnInit {\n\t@ViewChild(TemplateRef, { static: true }) template: TemplateRef<any>;\n\t@Output('close') closeEvent = new EventEmitter<any>();\n\n\tcontext: { $implicit: CellEditorComponent } = {\n\t\t$implicit: this\n\t};\n\n\tconstructor(private plugin: GridPlugin) {\n\t}\n\n\tngOnInit() {\n\t\tconst { view, disposable } = this.plugin;\n\t\tif (this.closeEvent.observers.length) {\n\t\t\tview.edit.cell.requestClose = () => {\n\t\t\t\tthis.close();\n\t\t\t\treturn true;\n\t\t\t};\n\t\t}\n\n\t\tdisposable.add(() => view.edit.cell.requestClose = null);\n\t}\n\n\tclose() {\n\t\tthis.closeEvent.emit();\n\t}\n}\n","<ng-template>\n    <ng-content>\n    </ng-content>\n</ng-template>\n\n<ng-container key=\"plugin-cell-editor.tpl.html\"\n              [context]=\"context\">\n</ng-container>","import { NgModule } from '@angular/core';\nimport { CellEditorComponent } from './cell-editor.component';\nimport { TemplateModule } from '@qgrid/ngx';\n\n@NgModule({\n\tdeclarations: [\n\t\tCellEditorComponent\n\t],\n\texports: [\n\t\tCellEditorComponent\n\t],\n\timports: [\n\t\tTemplateModule\n\t]\n})\nexport class CellEditorModule {\n}\n","import {\n\tApplicationRef, ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnInit\n} from '@angular/core';\nimport { DomTd, GridPlugin, TemplateHostService } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-cell-tooltip',\n\ttemplateUrl: './cell-tooltip.component.html',\n\tproviders: [GridPlugin, TemplateHostService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n})\n\nexport class CellTooltipComponent implements OnInit {\n\t@Input() showDelay: number;\n\n\tcontext: { $implicit: DomTd } = {\n\t\t$implicit: null,\n\t};\n\tcellElement: HTMLElement;\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate cd: ChangeDetectorRef,\n\t\tprivate appRef: ApplicationRef\n\t) { }\n\n\tngOnInit() {\n\t\tconst { model, observe, table } = this.plugin;\n\n\t\tobserve(model.mouseChanged)\n\t\t\t.subscribe((e) => {\n\t\t\t\tif (e.state.status !== 'move' && e.state.status !== 'leave') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.state.target) {\n\t\t\t\t\tconst { rowIndex, columnIndex } = e.state.target;\n\t\t\t\t\tconst domCell = table.body.cell(rowIndex, columnIndex);\n\n\t\t\t\t\tif (domCell.model()) {\n\t\t\t\t\t\tthis.context = {\n\t\t\t\t\t\t\t$implicit: domCell.model()\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.cellElement = domCell.element;\n\t\t\t\t\t\tthis.addTooltipLayer();\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tthis.cellElement = null;\n\t\t\t\t}\n\t\t\t\tthis.invalidate();\n\t\t\t});\n\t}\n\n\tprivate addTooltipLayer(): void {\n\t\tconst tooltipLayer = 'tooltip';\n\t\tconst table = this.plugin.table;\n\t\tif (table.view.hasLayer(tooltipLayer)) {\n\t\t\ttable.view.removeLayer(tooltipLayer);\n\t\t}\n\n\t\ttable.view.addLayer(tooltipLayer);\n\t}\n\n\tprivate invalidate(): void {\n\t\t// ToDo: Investigate how to improve.\n\t\tthis.cd.markForCheck();\n\t\tthis.cd.detectChanges();\n\t\tthis.appRef.tick();\n\t}\n}\n","<q-grid-layer>\n\t<ng-template for=\"tooltip\">\n\t\t<div class=\"q-grid-cell-tooltip q-grid-hide\"\n\t\t\t *ngIf=\"cellElement\"\n\t\t\t q-grid-tooltip\n\t\t\t [showDelay]=\"showDelay\"\n\t\t\t [host]=\"cellElement\">\n\n\t\t\t<ng-container key=\"body-cell-tooltip.tpl.html\"\n\t\t\t\t\t\t  [context]=\"context\">\n\t\t\t</ng-container>\n\t\t</div>\n\t</ng-template>\n</q-grid-layer>\n","import {\n\tDirective,\n\tElementRef, Input, OnChanges, Renderer2, SimpleChanges\n} from '@angular/core';\nimport { GRID_PREFIX, jobLine } from '@qgrid/core';\nimport { GridPlugin, TemplateHostService } from '@qgrid/ngx';\n\n@Directive({\n\tselector: '[q-grid-tooltip]',\n\tproviders: [GridPlugin, TemplateHostService],\n})\n\nexport class CellTooltipDirective implements OnChanges {\n\t@Input() host: HTMLElement;\n\t@Input() showDelay = 1000;\n\n\tprivate job = jobLine(this.showDelay);\n\n\tconstructor(\n\t\tprivate elementRef: ElementRef,\n\t\tprivate renderer: Renderer2\n\t) {\n\t}\n\n\tngOnChanges(e: SimpleChanges) {\n\t\tif (e.showDelay) {\n\t\t\tthis.job = jobLine(this.showDelay);\n\t\t}\n\n\t\tif (e.host && this.host) {\n\t\t\tconst { top, left, height } = this.host.getBoundingClientRect();\n\t\t\tconst box = this.getBoxRect(this.host);\n\t\t\tconst host = this.elementRef.nativeElement;\n\t\t\tthis.job(() => {\n\t\t\t\tthis.renderer.setStyle(host, 'top', top - box.top + height + 'px');\n\t\t\t\tthis.renderer.setStyle(host, 'left', left - box.left + 'px');\n\t\t\t\tthis.renderer.removeClass(host, 'q-grid-hide');\n\t\t\t});\n\n\t\t}\n\n\t}\n\n\t// TODO: Extract to external function\n\tprivate getBoxRect(element: HTMLElement) {\n\t\tlet view = element;\n\t\tconst marker = `${GRID_PREFIX}-box`;\n\t\twhile (view) {\n\t\t\tif (view.classList && view.classList.contains(marker)) {\n\t\t\t\treturn view.getBoundingClientRect();\n\t\t\t}\n\n\t\t\tview = view.parentNode as HTMLElement;\n\t\t}\n\n\t\treturn view.getBoundingClientRect();\n\t}\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CellTooltipComponent } from './cell-tooltip.component';\nimport { CellTooltipDirective } from './cell-tooltip.directive';\nimport { TemplateModule, LayerModule } from '@qgrid/ngx';\n\n@NgModule({\n\tdeclarations: [CellTooltipComponent, CellTooltipDirective],\n\texports: [CellTooltipComponent, CellTooltipDirective],\n\timports: [CommonModule, TemplateModule, LayerModule],\n})\nexport class CellTooltipModule {}\n","import {\n\tChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Input, NgZone, OnChanges, OnInit, Output\n} from '@angular/core';\nimport { Node, noop } from '@qgrid/core';\nimport { GridPlugin, StateAccessor } from '@qgrid/ngx';\nimport { ColumnChooserPlugin, ColumnChooserState } from '@qgrid/plugins';\nimport { FocusAfterRender } from '../focus/focus.service';\n\nconst COLUMN_CHOOSER_NAME = 'qGridColumnChooser';\n\nexport class RootContext {\n\tconstructor(public ctrl: ColumnChooserPlugin) {\n\t}\n\n\tget node(): Node {\n\t\treturn this.ctrl.treeView;\n\t}\n}\n\n@Component({\n\tselector: 'q-grid-column-chooser',\n\ttemplateUrl: './column-chooser.component.html',\n\tproviders: [\n\t\tFocusAfterRender,\n\t\tGridPlugin,\n\t\tStateAccessor\n\t],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ColumnChooserComponent implements OnInit, OnChanges {\n\tprivate ccState = this.stateAccessor.setter(ColumnChooserState);\n\n\t@Input('canAggregate') set columnChooserCanAggregate(canAggregate: boolean) { this.ccState({ canAggregate }); }\n\n\t@Output('submit') submitEvent = new EventEmitter<any>();\n\t@Output('cancel') cancelEvent = new EventEmitter<any>();\n\n\tcontext: {\n\t\t$implicit: ColumnChooserPlugin,\n\t\tplugin: ColumnChooserComponent\n\t};\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate zone: NgZone,\n\t\tprivate cd: ChangeDetectorRef,\n\t\tprivate stateAccessor: StateAccessor,\n\t\tfocusAfterRender: FocusAfterRender\n\t) {\n\t}\n\n\troot() {\n\t\treturn { $implicit: new RootContext(this.context.$implicit) };\n\t}\n\n\tngOnChanges() {\n\t\tconst { model } = this.plugin;\n\t\tthis.stateAccessor.write(model);\n\t}\n\n\tngOnInit() {\n\t\tconst context = {\n\t\t\tname: COLUMN_CHOOSER_NAME\n\t\t};\n\n\t\tconst columnChooser = new ColumnChooserPlugin(this.plugin, context);\n\t\tcolumnChooser.submitEvent.on(() => this.submitEvent.emit());\n\t\tcolumnChooser.cancelEvent.on(() => this.cancelEvent.emit());\n\t\tcolumnChooser.dropEvent.on(() => {\n\t\t\tthis.cd.markForCheck();\n\t\t\tthis.zone.run(noop);\n\t\t});\n\n\t\tthis.context = { $implicit: columnChooser, plugin: this };\n\t}\n}\n","<ng-container key=\"column-chooser.tpl.html\" [context]=\"context\"></ng-container>\n","import { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { GridModelBuilder, TemplateModule } from '@qgrid/ngx';\nimport { ColumnChooserState } from '@qgrid/plugins';\nimport { ColumnChooserComponent } from './column-chooser.component';\n\n@NgModule({\n\timports: [FormsModule, TemplateModule],\n\texports: [ColumnChooserComponent],\n\tdeclarations: [ColumnChooserComponent]\n})\nexport class ColumnChooserModule {\n\tconstructor(modelBuilder: GridModelBuilder) {\n\t\tmodelBuilder.register('columnChooser', ColumnChooserState);\n\t}\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\n\n@Component({\n\tselector: 'q-grid-column-chooser-trigger',\n\ttemplateUrl: './column-chooser-trigger.component.html',\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ColumnChooserTriggerComponent {}\n","<ng-container key=\"plugin-column-chooser-trigger.tpl.html\"></ng-container>\n","import { NgModule } from '@angular/core';\nimport { ColumnChooserTriggerComponent } from './column-chooser-trigger.component';\nimport { TemplateModule } from '@qgrid/ngx';\n\n@NgModule({\n\timports: [TemplateModule],\n\texports: [ColumnChooserTriggerComponent],\n\tdeclarations: [ColumnChooserTriggerComponent]\n})\nexport class ColumnChooserTriggerModule {}\n","import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output } from '@angular/core';\nimport { ColumnModel } from '@qgrid/core';\n\n@Component({\n\tselector: 'q-grid-column-filter-by',\n\ttemplateUrl: './column-filter-by.component.html',\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ColumnFilterByComponent {\n\t@Input() column: ColumnModel;\n\n\t@Input() by: Set<string>;\n\t@Input() byBlanks: boolean;\n\t@Output() byBlanksChange = new EventEmitter();\n\n\tcontext: { $implicit: ColumnFilterByComponent } = {\n\t\t$implicit: this\n\t};\n\n\tget isBlanks() {\n\t\treturn this.byBlanks;\n\t}\n\n\tremove(item: string): void {\n\t\tthis.by.delete(item);\n\t}\n\n\tremoveByBlanks() {\n\t\tthis.byBlanksChange.emit(false);\n\t}\n}\n","<ng-container key=\"plugin-column-filter-by.tpl.html\"\n              [context]=\"context\">\n</ng-container>","import { Directive, Input } from '@angular/core';\nimport { ColumnModel } from '@qgrid/core';\nimport { CellTemplateService } from '@qgrid/ngx';\n\n@Directive({\n\tselector: '[q-grid-column-filter-item-list]',\n\tproviders: [CellTemplateService]\n})\nexport class ColumnFilterItemListDirective {\n\t@Input('q-grid-column-filter-item-list') column: ColumnModel;\n\t@Input('q-grid-column-filter-search') search: string;\n\n\tconstructor(\n\t\tpublic cellService: CellTemplateService\n\t) {\n\t}\n}\n","import { Directive, Input, OnInit, ViewContainerRef } from '@angular/core';\nimport { ColumnFilterItemListDirective } from './column-filter-item-list.directive';\n\n@Directive({\n\tselector: '[q-grid-column-filter-item]'\n})\nexport class ColumnFilterItemDirective implements OnInit {\n\t@Input('q-grid-column-filter-item') value: any;\n\n\t$implicit = this;\n\n\tconstructor(\n\t\tprivate viewContainerRef: ViewContainerRef,\n\t\tprivate itemList: ColumnFilterItemListDirective\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst itemList = this.itemList;\n\t\tconst link = itemList.cellService.build('column-filter', itemList.column);\n\t\tlink(this.viewContainerRef, this);\n\t}\n}\n","import { ChangeDetectionStrategy, Component, ElementRef, Input, OnInit } from '@angular/core';\nimport { ColumnModel, GRID_PREFIX } from '@qgrid/core';\nimport { GridPlugin } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-column-filter-trigger',\n\ttemplateUrl: './column-filter-trigger.component.html',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ColumnFilterTriggerComponent implements OnInit {\n\t@Input() column: ColumnModel;\n\n\tcontext: { $implicit: ColumnFilterTriggerComponent } = {\n\t\t$implicit: this\n\t};\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate element: ElementRef\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst { model, observeReply } = this.plugin;\n\n\t\tobserveReply(model.filterChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('by')) {\n\t\t\t\t\tif (this.plugin.view.filter.has(this.column)) {\n\t\t\t\t\t\tthis.element.nativeElement.classList.add(`${GRID_PREFIX}-active`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.element.nativeElement.classList.remove(`${GRID_PREFIX}-active`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n}\n","<ng-container key=\"plugin-column-filter-trigger.tpl.html\"\n              [context]=\"context\">\n</ng-container>","import {\n\tChangeDetectionStrategy,\n\tChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output\n} from '@angular/core';\nimport { ColumnModel, Fetch, flatten, getValue, Guard, uniq } from '@qgrid/core';\nimport { Grid, GridError, GridPlugin, TemplateService, VscrollContext, VscrollService } from '@qgrid/ngx';\nimport { ColumnFilterPlugin, ColumnFilterState } from '@qgrid/plugins';\nimport { FocusAfterRender } from '../focus/focus.service';\n\n@Component({\n\tselector: 'q-grid-column-filter',\n\ttemplateUrl: './column-filter.component.html',\n\tproviders: [FocusAfterRender, GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ColumnFilterComponent implements OnInit {\n\t@Input() column: ColumnModel;\n\t@Input() search = '';\n\n\t@Output('submit') submitEvent = new EventEmitter<any>();\n\t@Output('cancel') cancelEvent = new EventEmitter<any>();\n\n\tcontext: {\n\t\t$implicit: ColumnFilterPlugin,\n\t\tplugin: ColumnFilterComponent,\n\t\tvscroll: VscrollContext\n\t};\n\n\tprivate vscrollContext: VscrollContext;\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate vscroll: VscrollService,\n\t\tprivate qgrid: Grid,\n\t\tprivate cd: ChangeDetectorRef,\n\t\tprivate templateService: TemplateService,\n\t\tfocusAfterRender: FocusAfterRender) {\n\t}\n\n\tget operators() {\n\t\tconst { model } = this.plugin;\n\t\treturn model\n\t\t\t.filter()\n\t\t\t.operatorFactory(this.column);\n\t}\n\n\tngOnInit() {\n\t\tconst { model } = this.plugin;\n\t\tconst { column } = this;\n\n\t\tconst context = { column };\n\t\tconst columnFilter = model.resolve(ColumnFilterState);\n\t\tconst columnFilterPlugin = new ColumnFilterPlugin(this.plugin, context);\n\n\t\tcolumnFilterPlugin.submitEvent.on(() => this.submitEvent.emit());\n\t\tcolumnFilterPlugin.cancelEvent.on(() => this.cancelEvent.emit());\n\n\t\tconst vscrollContext = this.vscroll.context({\n\t\t\temit: f => {\n\t\t\t\tf();\n\n\t\t\t\tthis.cd.markForCheck();\n\t\t\t\tthis.cd.detectChanges();\n\t\t\t},\n\t\t\tthreshold: columnFilter.state().threshold,\n\t\t\tfetch: (skip, take, d) => {\n\t\t\t\tconst filterState = model.filter();\n\t\t\t\tconst service = this.qgrid.service(model);\n\t\t\t\t// We need to close items property for correct reset behavior\n\t\t\t\tconst items = columnFilterPlugin.items;\n\t\t\t\tif (filterState.fetch !== this.qgrid.noop) {\n\t\t\t\t\tconst cancelBusy = service.busy();\n\t\t\t\t\tconst select = filterState\n\t\t\t\t\t\t.fetch(column.key, {\n\t\t\t\t\t\t\tskip,\n\t\t\t\t\t\t\ttake,\n\t\t\t\t\t\t\tvalue: columnFilterPlugin.getValue,\n\t\t\t\t\t\t\tsearch: '' + this.search,\n\n\t\t\t\t\t\t\t// @deprecated\n\t\t\t\t\t\t\tfilter: '' + this.search,\n\t\t\t\t\t\t});\n\n\t\t\t\t\tconst fetch = new Fetch(select);\n\t\t\t\t\tfetch.run();\n\t\t\t\t\tfetch.busy\n\t\t\t\t\t\t.then(page => {\n\t\t\t\t\t\t\titems.push(...page);\n\t\t\t\t\t\t\td.resolve(items.length + (page.length === take ? take : 0));\n\t\t\t\t\t\t\tcancelBusy();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(cancelBusy);\n\t\t\t\t} else {\n\t\t\t\t\tconst cancelBusy = service.busy();\n\t\t\t\t\tconst isBlank = model.filter().assertFactory().isNull;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (!items.length) {\n\t\t\t\t\t\t\tconst source = model[columnFilter.state().source];\n\t\t\t\t\t\t\tGuard.notNull(source, 'source');\n\n\t\t\t\t\t\t\tconst sourceState = source();\n\t\t\t\t\t\t\tGuard.hasProperty(sourceState, 'rows');\n\n\t\t\t\t\t\t\tlet values = null;\n\t\t\t\t\t\t\tif (columnFilterPlugin.column.type === 'array') {\n\t\t\t\t\t\t\t\tvalues = flatten(sourceState.rows.map(row => getValue(row, column)));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvalues = sourceState.rows.map(columnFilterPlugin.getValue);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst uniqValues = uniq(values);\n\t\t\t\t\t\t\tconst notBlankValues = uniqValues.filter(x => !isBlank(x));\n\n\t\t\t\t\t\t\t// TODO: improve search also\n\t\t\t\t\t\t\tconst search = ('' + this.search).toLowerCase();\n\t\t\t\t\t\t\tconst filteredItems = search\n\t\t\t\t\t\t\t\t? notBlankValues.filter(x => ('' + x).toLowerCase().indexOf(search) >= 0)\n\t\t\t\t\t\t\t\t: notBlankValues;\n\n\t\t\t\t\t\t\tfilteredItems.sort(columnFilterPlugin.column.compare);\n\t\t\t\t\t\t\tcolumnFilterPlugin.items = filteredItems;\n\t\t\t\t\t\t\tcolumnFilterPlugin.hasBlanks =\n\t\t\t\t\t\t\t\tnotBlankValues.length !== uniqValues.length &&\n\t\t\t\t\t\t\t\t(!search || 'blanks'.indexOf(search.toLowerCase()) >= 0);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\td.resolve(columnFilterPlugin.items.length);\n\t\t\t\t\t}\n\t\t\t\t\tfinally {\n\t\t\t\t\t\tcancelBusy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\tthis.vscrollContext = vscrollContext;\n\n\t\tthis.context = {\n\t\t\t$implicit: columnFilterPlugin,\n\t\t\tplugin: this,\n\t\t\tvscroll: vscrollContext\n\t\t};\n\t}\n\n\treset() {\n\t\tthis.context.$implicit.items = [];\n\t\tthis.vscrollContext.container.reset();\n\t}\n\n\tclear() {\n\t\tthis.search = '';\n\t\tthis.context.$implicit.reset.execute();\n\t}\n\n\tgetOperatorTemplateKey(op: string) {\n\t\tconst keys = this.buildTemplateKeys(op);\n\t\tfor (const key of keys) {\n\t\t\tif (this.templateService.find(key)) {\n\t\t\t\treturn key;\n\t\t\t}\n\t\t}\n\n\t\tthrow new GridError(\n\t\t\t'column-filter.component',\n\t\t\t`Column filter template for operator ${op} is not found`\n\t\t);\n\t}\n\n\tget hasOperators() {\n\t\treturn this.operators && this.operators.length > 1;\n\t}\n\n\tprivate buildTemplateKeys(op: string) {\n\t\tconst { key, type } = this.column;\n\t\tconst PREFIX = 'plugin-column-filter';\n\n\t\tconst keys = [\n\t\t\t`${PREFIX}-${type}-the-${key}-${op}.tpl.html`,\n\t\t\t`${PREFIX}-the-${key}-${op}.tpl.html`,\n\t\t\t`${PREFIX}-the-${key}.tpl.html`,\n\t\t\t`${PREFIX}-${type}-${op}.tpl.html`,\n\t\t\t`${PREFIX}-${type}.tpl.html`,\n\t\t\t`${PREFIX}-${op}.tpl.html`,\n\t\t];\n\n\t\tswitch (op) {\n\t\t\tcase 'isEmpty':\n\t\t\tcase 'isNotEmpty':\n\t\t\tcase 'isNull':\n\t\t\tcase 'isNotNull': {\n\t\t\t\tkeys.push(`${PREFIX}-${type}-the-${key}-label.tpl.html`);\n\t\t\t\tkeys.push(`${PREFIX}-${type}-label.tpl.html`);\n\t\t\t\tkeys.push(`${PREFIX}-label.tpl.html`);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'like':\n\t\t\tcase 'notLike':\n\t\t\tcase 'startsWith':\n\t\t\tcase 'endsWith':\n\t\t\tcase 'lessThan':\n\t\t\tcase 'lessThanOrEquals':\n\t\t\tcase 'greaterThan':\n\t\t\tcase 'greaterThanOrEquals': {\n\t\t\t\tkeys.push(`${PREFIX}-${type}-the-${key}-input.tpl.html`);\n\t\t\t\tkeys.push(`${PREFIX}-${type}-input.tpl.html`);\n\t\t\t\tkeys.push(`${PREFIX}-input.tpl.html`);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tkeys.push(`${PREFIX}-contains.tpl.html`);\n\t\treturn keys;\n\t}\n}\n","<ng-container key=\"plugin-column-filter.tpl.html\"\n              [context]=\"context\">\n</ng-container>","import { NgModule } from '@angular/core';\nimport { GridModelBuilder, TemplateModule } from '@qgrid/ngx';\nimport { ColumnFilterState } from '@qgrid/plugins';\nimport { ColumnFilterByComponent } from './column-filter-by.component';\nimport { ColumnFilterItemListDirective } from './column-filter-item-list.directive';\nimport { ColumnFilterItemDirective } from './column-filter-item.directive';\nimport { ColumnFilterTriggerComponent } from './column-filter-trigger.component';\nimport { ColumnFilterComponent } from './column-filter.component';\n\n@NgModule({\n\tdeclarations: [\n\t\tColumnFilterComponent,\n\t\tColumnFilterTriggerComponent,\n\t\tColumnFilterByComponent,\n\t\tColumnFilterItemListDirective,\n\t\tColumnFilterItemDirective\n\t],\n\texports: [\n\t\tColumnFilterComponent,\n\t\tColumnFilterTriggerComponent,\n\t\tColumnFilterByComponent,\n\t\tColumnFilterItemListDirective,\n\t\tColumnFilterItemDirective\n\t],\n\timports: [\n\t\tTemplateModule\n\t]\n})\nexport class ColumnFilterModule {\n\tconstructor(modelBuilder: GridModelBuilder) {\n\t\tmodelBuilder.register('columnFilter', ColumnFilterState);\n\t}\n}\n","import {\n\tAfterViewInit, ChangeDetectionStrategy, Component, ElementRef, Input, NgZone,\n\tTemplateRef, ViewChild\n} from '@angular/core';\nimport { ColumnModel, EventListener, EventManager } from '@qgrid/core';\nimport { GridPlugin } from '@qgrid/ngx';\nimport { ColumnSortPlugin } from '@qgrid/plugins';\nimport { FocusAfterRender } from '../focus/focus.service';\n\n@Component({\n\tselector: 'q-grid-column-sort',\n\ttemplateUrl: './column-sort.component.html',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ColumnSortComponent implements AfterViewInit {\n\t@ViewChild(TemplateRef, { static: true }) template: TemplateRef<any>;\n\t@Input() column: ColumnModel;\n\n\tcontext: { $implicit: ColumnSortComponent } = {\n\t\t$implicit: this\n\t};\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate elementRef: ElementRef,\n\t\tprivate zone: NgZone,\n\t) {\n\t}\n\n\tngAfterViewInit() {\n\t\tconst { nativeElement } = this.elementRef;\n\t\tconst iconAsc = nativeElement.querySelector('.q-grid-asc');\n\t\tconst iconDesc = nativeElement.querySelector('.q-grid-desc');\n\n\t\tconst columnSort = new ColumnSortPlugin(this.plugin, {\n\t\t\telement: nativeElement,\n\t\t\tcolumn: this.column,\n\t\t\ticonAsc,\n\t\t\ticonDesc\n\t\t});\n\n\t\tconst listener = new EventListener(nativeElement, new EventManager(this));\n\t\tlistener.on('click', () => {\n\t\t\tif (columnSort.click()) {\n\t\t\t\t// tslint:disable-next-line:no-unused-expression\n\t\t\t\tnew FocusAfterRender(this.plugin);\n\t\t\t}\n\t\t});\n\n\t\tthis.zone.runOutsideAngular(() =>\n\t\t\tlistener.on('mouseleave', () => columnSort.mouseLeave())\n\t\t);\n\t}\n}\n","<ng-template>\n    <ng-content></ng-content>\n</ng-template>\n\n<ng-container key=\"plugin-column-sort.tpl.html\"\n              [context]=\"context\">\n</ng-container>","import { NgModule } from '@angular/core';\nimport { ColumnSortComponent } from './column-sort.component';\nimport { TemplateModule } from '@qgrid/ngx';\n\n@NgModule({\n\tdeclarations: [\n\t\tColumnSortComponent\n\t],\n\texports: [\n\t\tColumnSortComponent\n\t],\n\timports: [\n\t\tTemplateModule\n\t]\n})\nexport class ColumnSortModule {\n}\n","import {\n\tAfterViewInit, Directive,\n\tDoCheck, ElementRef, EventEmitter, Input, NgZone, OnChanges, OnInit, Optional, Output, SimpleChanges\n} from '@angular/core';\nimport { Command, CommandManager, Shortcut, ShortcutDispatcher } from '@qgrid/core';\nimport { Disposable, GridPlugin } from '@qgrid/ngx';\n\nexport class ZoneCommandManager {\n\tconstructor(\n\t\tprivate run: <T>(f: () => T) => T,\n\t\tprivate manager: CommandManager,\n\t\tprivate commandArg: any\n\t) {\n\t}\n\n\tinvoke(commands: Command[]) {\n\t\treturn this.run(() =>\n\t\t\tthis.manager.invoke(commands, this.commandArg, 'command.directive')\n\t\t);\n\t}\n\n\tfilter(commands) {\n\t\treturn this.manager.filter(commands);\n\t}\n}\n\n@Directive({\n\tselector: '[q-grid-command]',\n\tproviders: [Disposable]\n})\nexport class CommandDirective implements DoCheck, OnChanges, OnInit, AfterViewInit {\n\tprivate isAfterViewInit = false;\n\n\t@Input('q-grid-command')\n\tcommand: Command<any>;\n\n\t@Input('q-grid-command-arg')\n\tcommandArg: any;\n\n\t@Input('q-grid-command-use-shortcut')\n\tuseCommandShortcut: boolean;\n\n\t@Input('q-grid-command-event')\n\tcommandEvent = 'click';\n\n\t@Input('q-grid-command-use-zone')\n\tuseZone: boolean;\n\n\t@Output('q-grid-command-execute')\n\tcommandExecute = new EventEmitter<any>();\n\n\t@Input('q-grid-command-host')\n\thost: 'grid' | 'document' = 'grid';\n\n\tconstructor(\n\t\tprivate disposable: Disposable,\n\t\tprivate elementRef: ElementRef,\n\t\tprivate zone: NgZone,\n\t\t@Optional() private plugin: GridPlugin\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst { nativeElement } = this.elementRef;\n\n\t\tthis.aroundZone(() =>\n\t\t\tnativeElement\n\t\t\t\t.addEventListener(this.commandEvent, e => this.execute(e))\n\t\t);\n\t}\n\n\tngDoCheck() {\n\t\tif (!this.isAfterViewInit) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.command) {\n\t\t\tthis.updateState();\n\t\t}\n\t}\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tif (changes.command) {\n\t\t\tthis.unregister();\n\n\t\t\tif (this.command) {\n\t\t\t\tthis.register();\n\t\t\t}\n\t\t}\n\t}\n\n\tngAfterViewInit() {\n\t\tif (this.command) {\n\t\t\tthis.updateState();\n\t\t}\n\n\t\tthis.isAfterViewInit = true;\n\t}\n\n\tprivate register() {\n\t\tconst { command, commandArg } = this;\n\n\t\tthis.disposable.add(\n\t\t\tcommand\n\t\t\t\t.canExecuteCheck\n\t\t\t\t.subscribe(() => this.updateState())\n\t\t);\n\n\t\tif (this.useCommandShortcut && command.shortcut) {\n\t\t\tif (this.plugin && this.host === 'grid') {\n\t\t\t\tconst { model } = this.plugin;\n\t\t\t\tconst { shortcut, manager } = model.action();\n\n\t\t\t\tconst zoneManager = new ZoneCommandManager(\n\t\t\t\t\tf => {\n\t\t\t\t\t\tconst result = this.aroundZone(f);\n\t\t\t\t\t\tthis.afterExecute();\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t},\n\t\t\t\t\tmanager,\n\t\t\t\t\tcommandArg,\n\t\t\t\t);\n\n\t\t\t\tthis.disposable.add(\n\t\t\t\t\tshortcut.register(zoneManager, [command])\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst manager = new CommandManager(f => {\n\t\t\t\t\tthis.aroundZone(f);\n\t\t\t\t\tthis.afterExecute();\n\t\t\t\t}, commandArg);\n\n\t\t\t\tconst shortcut = new Shortcut(new ShortcutDispatcher());\n\n\t\t\t\tconst keyDown = e => {\n\t\t\t\t\tshortcut.keyDown(e);\n\t\t\t\t};\n\n\t\t\t\tdocument.addEventListener('keydown', keyDown);\n\n\t\t\t\tthis.disposable.add(() =>\n\t\t\t\t\tdocument.removeEventListener('keydown', keyDown)\n\t\t\t\t);\n\n\t\t\t\tthis.disposable.add(\n\t\t\t\t\tshortcut.register(manager, [command])\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate execute(e?: MouseEvent) {\n\t\tconst { command, commandArg } = this;\n\t\tconst result = command.execute(commandArg) === true;\n\t\tif (result && e) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t}\n\n\t\tthis.afterExecute();\n\t}\n\n\tprivate afterExecute() {\n\t\tconst { commandArg } = this;\n\t\tthis.commandExecute.emit(commandArg);\n\t\tthis.command.canExecuteCheck.next();\n\t}\n\n\tprivate unregister() {\n\t\tthis.disposable.finalize();\n\t}\n\n\tprivate updateState() {\n\t\tconst nativeElement = this.elementRef.nativeElement as HTMLElement;\n\t\tif (!nativeElement.setAttribute) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { command, commandArg } = this;\n\t\tconst canExecute = command.canExecute(commandArg) === true;\n\t\tif (canExecute) {\n\t\t\tif (nativeElement.hasAttribute('disabled')) {\n\t\t\t\tnativeElement.removeAttribute('disabled');\n\t\t\t\tnativeElement.classList.remove('q-grid-disabled');\n\t\t\t}\n\t\t} else {\n\t\t\tif (!nativeElement.hasAttribute('!disabled')) {\n\t\t\t\tnativeElement.setAttribute('disabled', 'true');\n\t\t\t\tnativeElement.classList.add('q-grid-disabled');\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate aroundZone<T>(f: () => T): T {\n\t\tif (this.useZone) {\n\t\t\treturn this.zone.run(f);\n\t\t}\n\n\t\treturn this.zone.runOutsideAngular(f);\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { CommandDirective } from './command.directive';\n\n@NgModule({\n\tdeclarations: [\n\t\tCommandDirective\n\t],\n\texports: [\n\t\tCommandDirective\n\t]\n})\nexport class CommandModule {\n}\n","import { ChangeDetectionStrategy, Component, Input, OnChanges, OnInit } from '@angular/core';\nimport { GridPlugin, StateAccessor } from '@qgrid/ngx';\nimport { DataManipulationPlugin, DataManipulationState } from '@qgrid/plugins';\n\n@Component({\n\tselector: 'q-grid-data-manipulation',\n\ttemplate: '',\n\tproviders: [GridPlugin, StateAccessor],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class DataManipulationComponent implements OnInit, OnChanges {\n\tprivate dmState = this.stateAccessor.setter(DataManipulationState);\n\n\tcontext: {\n\t\t$implicit: DataManipulationPlugin\n\t};\n\n\t@Input('rowFactory') set dataManipulationRowFactory(rowFactory: (x: any) => any) { this.dmState({ rowFactory }); }\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate stateAccessor: StateAccessor,\n\t) {\n\t}\n\n\tngOnChanges() {\n\t\tconst { model } = this.plugin;\n\t\tthis.stateAccessor.write(model);\n\t}\n\n\tngOnInit() {\n\t\tconst dm = new DataManipulationPlugin(this.plugin);\n\t\tthis.context = { $implicit: dm };\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { GridModelBuilder } from '@qgrid/ngx';\nimport { DataManipulationState } from '@qgrid/plugins';\nimport { DataManipulationComponent } from './data-manipulation.component';\n\n@NgModule({\n\tdeclarations: [DataManipulationComponent],\n\texports: [DataManipulationComponent]\n})\nexport class DataManipulationModule {\n\tconstructor(modelBuilder: GridModelBuilder) {\n\t\tmodelBuilder\n\t\t\t.register('dataManipulation', DataManipulationState);\n\t}\n}\n","import { ChangeDetectionStrategy, Component, EventEmitter, Input, NgZone, OnInit, Output } from '@angular/core';\nimport { PipeUnit } from '@qgrid/core/public-api';\nimport { GridModel, GridPlugin } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-data-provider',\n\ttemplate: '',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DataProviderComponent implements OnInit {\n\tprivate next: (rows: any[]) => void;\n\n\t@Input('rows') set rows(value: any[]) {\n\t\tif (Array.isArray(value)) {\n\t\t\tconst next = this.next;\n\t\t\tif (next) {\n\t\t\t\tthis.next = null;\n\t\t\t\tnext(value);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Output() requestRows = new EventEmitter<GridModel>();\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate zone: NgZone,\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tthis.plugin.model.data({\n\t\t\tpipe: [\n\t\t\t\t(data, context, next) =>\n\t\t\t\t\tthis.zone.run(() => {\n\t\t\t\t\t\tthis.next = next;\n\t\t\t\t\t\tthis.requestRows.emit(context.model);\n\t\t\t\t\t}),\n\t\t\t\t...PipeUnit.view\n\t\t\t]\n\t\t}, { source: 'data.provider' });\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { DataProviderComponent } from './data-provider.component';\n\n@NgModule({\n\tdeclarations: [DataProviderComponent],\n\texports: [DataProviderComponent]\n})\nexport class DataProviderModule {\n}\n","import { Directive, ElementRef, HostListener, Input } from '@angular/core';\nimport { Keyboard } from '@qgrid/core';\n\nconst DELIMITER = '/';\n\n@Directive({\n\tselector: '[q-grid-date-mask]',\n})\nexport class DateMaskDirective {\n\t@Input('q-grid-date-mask') mask: string;\n\n\tconstructor(private elementRef: ElementRef) {\n\t}\n\n\t@HostListener('keypress', ['$event'])\n\tkeyUp(e: KeyboardEvent) {\n\t\tif (!this.mask) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst input = this.elementRef.nativeElement as HTMLInputElement;\n\t\tconst value = input.value || '';\n\t\tconst maskChar = this.mask[value.length];\n\t\tif (!maskChar) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\t// tslint:disable-next-line: deprecation\n\t\tconst code = Keyboard.translate(e.keyCode);\n\t\tif (this.isDigit(code)) {\n\t\t\tif (maskChar === DELIMITER) {\n\t\t\t\te.preventDefault();\n\t\t\t\tinput.value += DELIMITER + code;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst nextMaskChar = this.mask[input.value.length + 1];\n\t\t\tif (nextMaskChar === DELIMITER) {\n\t\t\t\te.preventDefault();\n\t\t\t\tinput.value += code + DELIMITER;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate isDigit(char: string) {\n\t\treturn /^[0-9]$/i.test(char);\n\t}\n}\n","import { Directive, TemplateRef, ViewContainerRef } from '@angular/core';\nimport { parseFactory } from '@qgrid/core';\nimport { DateService } from './date.service';\n\n@Directive({\n\tselector: '[q-grid-date]',\n})\nexport class DateDirective {\n\tprivate toMidnight: (x: Date | string) => Date = parseFactory('date');\n\n\tconstructor(\n\t\ttemplateRef: TemplateRef<any>,\n\t\tviewContainerRef: ViewContainerRef,\n\t\tprivate dateService: DateService,\n\t) {\n\t\tviewContainerRef.createEmbeddedView(templateRef, { $implicit: this });\n\t}\n\n\tisValid(dateOrText: Date | string, format: string) {\n\t\treturn this.dateService.isValid(dateOrText, format);\n\t}\n\n\tdateLow(value: Date | string, format: string) {\n\t\tconst date = this.dateService.parseDateTime(value, format);\n\t\tif (date) {\n\t\t\treturn this.toMidnight(date);\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tdatetime(previous: Date | string, current: Date | string, format: string) {\n\t\tconst previousDate = this.dateService.parseDateTime(previous, format);\n\t\tconst currentDate = this.dateService.parseDateTime(current, format);\n\t\tif (previousDate && currentDate) {\n\t\t\tconst midnight = this.toMidnight(currentDate);\n\t\t\tconst sameHours = new Date(\n\t\t\t\tmidnight.getFullYear(),\n\t\t\t\tmidnight.getMonth(),\n\t\t\t\tmidnight.getDate(),\n\t\t\t\tpreviousDate.getHours(),\n\t\t\t\tpreviousDate.getMinutes(),\n\t\t\t\tpreviousDate.getSeconds(),\n\t\t\t\tpreviousDate.getMilliseconds(),\n\t\t\t);\n\n\t\t\treturn sameHours;\n\t\t}\n\n\t\tif (currentDate) {\n\t\t\treturn this.toMidnight(currentDate);\n\t\t}\n\n\t\treturn current;\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { DateDirective } from './date.directive';\nimport { DateMaskDirective } from './date-mask.directive';\nimport { DateService } from './date.service';\n\n@NgModule({\n\tdeclarations: [\n\t\tDateDirective,\n\t\tDateMaskDirective,\n\t],\n\texports: [\n\t\tDateDirective,\n\t\tDateMaskDirective\n\t],\n\tproviders: [\n\t\tDateService,\n\t]\n})\nexport class DateModule {\n}\n","import { Injectable } from '@angular/core';\nimport { isDate, parseFactory } from '@qgrid/core';\n\n@Injectable()\nexport class DateService {\n\tprivate toDateTime: (x: Date | string) => Date = parseFactory('datetime');\n\n\tparseDateTime(dateOrText: Date | string, format: string): Date | null {\n\t\tif (!dateOrText) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (isDate(dateOrText)) {\n\t\t\treturn dateOrText as Date;\n\t\t}\n\n\t\tif (format) {\n\t\t\tconst simpleFormat = format.replace(/[^A-Za-z]/g, '');\n\t\t\tconst justDigitsValue = (dateOrText as string).replace(/[^0-9]/g, '');\n\t\t\treturn this.parseDateText(justDigitsValue, simpleFormat);\n\t\t}\n\n\t\treturn this.toDateTime(dateOrText);\n\t}\n\n\tisValid(dateOrText: Date | string, format: string) {\n\t\tif (!dateOrText) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst result = this.parseDateTime(dateOrText, format);\n\t\treturn result && !isNaN(result.getTime());\n\t}\n\n\tprivate parseDateText(text: string, format: string): Date | null {\n\t\tlet year = '';\n\t\tlet month = '';\n\t\tlet day = '';\n\n\t\tlet cursor = 0;\n\t\tfor (const formatKey of format) {\n\n\t\t\tswitch (formatKey) {\n\t\t\t\tcase 'y': {\n\t\t\t\t\tconst digit = text[cursor++];\n\t\t\t\t\tif (digit) {\n\t\t\t\t\t\tyear += digit;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'M': {\n\t\t\t\t\tconst digit = text[cursor++];\n\t\t\t\t\tif (digit) {\n\t\t\t\t\t\tmonth += digit;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'd': {\n\t\t\t\t\tconst digit = text[cursor++];\n\t\t\t\t\tif (digit) {\n\t\t\t\t\t\tday += digit;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (year.length < 4 || month.length < 1 || day.length < 1) {\n\t\t\treturn null;\n\t\t}\n\n\t\tmonth = month.length === 1 ? '0' + month : month;\n\t\tday = day.length === 1 ? '0' + day : day;\n\n\t\treturn this.toDateTime(`${year}-${month}-${day}`);\n\t}\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport { CellEditor } from '@qgrid/core';\n\n@Component({\n\tselector: 'q-grid-edit-form-control',\n\ttemplateUrl: './edit-form-control.component.html',\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class EditFormControlComponent {\n\t@Input() editor: CellEditor;\n\n\tget key() {\n\t\tif (this.editor) {\n\t\t\tconst { column } = this.editor.cell;\n\t\t\tconst type = column.editor || column.type;\n\t\t\treturn `edit-form-${type}.tpl.html`;\n\t\t}\n\n\t\treturn 'edit-form-text.tpl.html';\n\t}\n}\n","<ng-container key=\"{{key}}\"\n              [context]=\"{$implicit: editor}\">\n</ng-container>","import { Component, Input, ChangeDetectionStrategy } from '@angular/core';\nimport { DomTd } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-edit-form-trigger',\n\ttemplateUrl: './edit-form-trigger.component.html',\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class EditFormTriggerComponent {\n\t@Input() caption: string;\n\t@Input() row: any;\n\n\tcontext: any = {\n\t\t$implicit: this\n\t};\n}\n","<ng-container key=\"plugin-edit-form-trigger.tpl.html\"\n              [context]=\"context\">\n</ng-container>","import { ChangeDetectionStrategy, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { GridPlugin } from '@qgrid/ngx';\nimport { EditFormPanelPlugin } from '@qgrid/plugins';\n\n@Component({\n\tselector: 'q-grid-edit-form',\n\ttemplateUrl: './edit-form.component.html',\n\tproviders: [\n\t\tGridPlugin\n\t],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class EditFormComponent implements OnInit {\n\t@Input() caption: string;\n\t@Input() row: any;\n\n\t@Output() cancel = new EventEmitter();\n\t@Output() reset = new EventEmitter();\n\t@Output() submit = new EventEmitter();\n\n\tcontext: { $implicit: EditFormPanelPlugin };\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst context = {\n\t\t\trow: this.row,\n\t\t\tcaption: this.caption\n\t\t};\n\n\t\tconst editFormPanel = new EditFormPanelPlugin(this.plugin, context);\n\t\tconst { service } = this.plugin;\n\n\t\teditFormPanel.cancelEvent.on(() => this.cancel.emit());\n\t\teditFormPanel.resetEvent.on(() => this.reset.emit());\n\t\teditFormPanel.submitEvent.on(() => {\n\t\t\tthis.submit.emit();\n\n\t\t\tservice.invalidate({\n\t\t\t\tsource: 'edit-form.component',\n\t\t\t\twhy: 'refresh'\n\t\t\t});\n\t\t});\n\n\t\tthis.context = { $implicit: editFormPanel };\n\t}\n}\n","<ng-container key=\"plugin-edit-form.tpl.html\"\n              [context]=\"context\">\n</ng-container>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { EditFormTriggerComponent } from './edit-form-trigger.component';\nimport { EditFormComponent } from './edit-form.component';\nimport { EditFormControlComponent } from './edit-form-control.component';\nimport { TemplateModule } from '@qgrid/ngx';\n\n@NgModule({\n\tdeclarations: [\n\t\tEditFormTriggerComponent,\n\t\tEditFormComponent,\n\t\tEditFormControlComponent\n\t],\n\texports: [EditFormTriggerComponent, EditFormComponent, EditFormControlComponent],\n\timports: [CommonModule, TemplateModule]\n})\nexport class EditFormModule { }\n","import { AfterViewInit, ChangeDetectionStrategy, Component, ContentChild, Input, TemplateRef } from '@angular/core';\nimport { Action, Command, Composite } from '@qgrid/core';\nimport { GridPlugin, TemplateHostService } from '@qgrid/ngx';\nimport { ExportPlugin } from '@qgrid/plugins';\n\n@Component({\n\tselector: 'q-grid-export',\n\ttemplateUrl: './export.component.html',\n\tproviders: [\n\t\tTemplateHostService,\n\t\tGridPlugin\n\t],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ExportComponent implements AfterViewInit {\n\t@Input() type: string;\n\t@ContentChild(TemplateRef) templateRef: TemplateRef<any>;\n\n\tcontext: { $implicit: ExportComponent } = {\n\t\t$implicit: this\n\t};\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate templateHost: TemplateHostService\n\t) {\n\t\tthis.templateHost.key = () => `export-${this.type}`;\n\t}\n\n\tngAfterViewInit() {\n\t\tconst { model, disposable } = this.plugin;\n\t\tconst exportPlugin = new ExportPlugin(model, this.type);\n\t\tconst action = new Action(\n\t\t\tnew Command({\n\t\t\t\texecute: () => exportPlugin[this.type].execute()\n\t\t\t}),\n\t\t\t`Export to ${this.type}`,\n\t\t\t'file_download'\n\t\t);\n\n\t\tif (this.templateRef) {\n\t\t\taction.templateUrl = this.templateHost.key('trigger');\n\t\t}\n\n\t\tconst items = Composite.list([model.action().items, [action]]);\n\t\tmodel.action({\n\t\t\titems\n\t\t}, {\n\t\t\tsource: 'export.component'\n\t\t});\n\n\t\tdisposable.add(() => {\n\t\t\tmodel.action({\n\t\t\t\titems: model\n\t\t\t\t\t.action()\n\t\t\t\t\t.items\n\t\t\t\t\t.filter(x => x !== action)\n\t\t\t}, {\n\t\t\t\tsource: 'export.component'\n\t\t\t});\n\t\t});\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { ExportComponent } from './export.component';\nimport { TemplateModule } from '@qgrid/ngx';\n\n@NgModule({\n\tdeclarations: [\n\t\tExportComponent\n\t],\n\texports: [\n\t\tExportComponent\n\t],\n\timports: [\n\t\tTemplateModule\n\t]\n})\nexport class ExportModule {\n}\n","import { isArray, isFunction, isObject } from '@qgrid/core';\n\nexport function evaluateFactory(expression, args) {\n\treturn visit;\n\n\tfunction visit(value) {\n\t\tif (isArray(value)) {\n\t\t\treturn visitArray(value);\n\t\t} else if (isFunction(value)) {\n\t\t\treturn visitFunction(value);\n\t\t} else if (isObject(value)) {\n\t\t\treturn visitObject(value);\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tfunction visitObject(inst) {\n\t\tconst keys = Object.keys(inst);\n\t\tconst length = keys.length;\n\t\tconst result = {};\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst key = keys[i];\n\t\t\tresult[key] = visit(inst[key]);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tfunction visitArray(list) {\n\t\tconst result = [];\n\t\tfor (let i = 0, length = list.length; i < length; i++) {\n\t\t\tresult[i] = visit(list[i]);\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction visitFunction(delegate) {\n\t\treturn delegate.apply(expression, args);\n\t}\n}\n","import { evaluateFactory } from './evaluate';\n\nexport class Watcher {\n\tprivate evaluate: (x: any) => any;\n\tprivate oldValue: any;\n\tprivate isFirstRun = true;\n\n\tconstructor(\n\t\tprivate expression: any,\n\t\tprivate key: string,\n\t\tprivate handler: (context: any, e: any) => void,\n\t\tprivate args = []) {\n\n\t\tthis.evaluate = evaluateFactory(expression, args);\n\t\tthis.oldValue = this.evaluate(expression[key]);\n\t}\n\n\tdetect() {\n\t\tconst inst = this.expression[this.key];\n\t\tconst newValue = this.evaluate(inst);\n\t\tif (this.isFirstRun || this.oldValue !== newValue) {\n\t\t\tthis.isFirstRun = false;\n\n\t\t\tthis.handler.apply(this.expression, [newValue, this.oldValue].concat(this.args));\n\t\t\tthis.oldValue = newValue;\n\t\t}\n\t}\n}\n","import { Directive, DoCheck, ElementRef, Input, OnInit, Optional } from '@angular/core';\nimport { isArray } from '@qgrid/core';\nimport { evaluateFactory } from './digest/evaluate';\nimport { EbNodeComponent } from './eb-node.component';\n\n@Directive({\n\tselector: '[q-grid-eb-class]'\n})\nexport class EbClassDirective implements OnInit, DoCheck {\n\tprivate evaluate: (value: any) => any;\n\tprivate oldClassList: Array<string> = [];\n\n\t@Input('q-grid-eb-class') klass: any;\n\t@Input('q-grid-eb-class-model') model: any;\n\n\tconstructor(private elementRef: ElementRef, @Optional() private node: EbNodeComponent) {\n\t}\n\n\tngOnInit() {\n\t\tthis.evaluate = evaluateFactory(this.model, [this.node ? this.node.model : null]);\n\t}\n\n\tngDoCheck() {\n\t\tconst result = this.evaluate(this.klass);\n\t\tif (result) {\n\t\t\tconst classList = this.fetchClasses(result);\n\t\t\tif (this.oldClassList.length !== classList.length\n\t\t\t\t|| this.oldClassList.join(' ') !== classList.join(' ')) {\n\n\t\t\t\tconst element = this.elementRef.nativeElement as HTMLElement;\n\t\t\t\telement.classList.remove(...this.oldClassList);\n\t\t\t\telement.classList.add(...classList);\n\t\t\t\tthis.oldClassList = classList;\n\t\t\t}\n\t\t} else if (this.oldClassList.length) {\n\t\t\tconst element = this.elementRef.nativeElement as HTMLElement;\n\t\t\telement.classList.remove(...this.oldClassList);\n\t\t\tthis.oldClassList = [];\n\t\t}\n\t}\n\n\tprivate fetchClasses(meta) {\n\t\tif (isArray(meta)) {\n\t\t\treturn meta;\n\t\t}\n\n\t\tconst keys = Object.keys(meta);\n\t\tconst classList = [];\n\t\tfor (let i = 0, length = keys.length; i < length; i++) {\n\t\t\tconst key = keys[i];\n\t\t\tif (meta[key]) {\n\t\t\t\tclassList.push(key);\n\t\t\t}\n\t\t}\n\n\t\treturn classList;\n\t}\n}\n","import { Component, DoCheck, Input, OnInit, ChangeDetectionStrategy } from '@angular/core';\nimport { Line } from './model/line';\nimport { Node } from './model/node';\nimport { Watcher } from './digest/watch';\n\n@Component({\n\tselector: 'q-grid-eb-expression',\n\ttemplateUrl: './eb-expression.component.html',\n\t// changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class EbExpressionComponent implements OnInit, DoCheck {\n\tprivate watchers: Watcher[];\n\n\t@Input() node: Node;\n\t@Input() line: Line;\n\t@Input() model: any;\n\n\tcontext: { $implicit: any, node: Node, line: Line };\n\n\tngOnInit() {\n\t\tthis.context = { $implicit: this.model, node: this.node, line: this.line };\n\n\t\tconst $watch = this.model.$watch;\n\t\tif ($watch) {\n\t\t\tthis.watchers =\n\t\t\t\tObject\n\t\t\t\t\t.keys($watch)\n\t\t\t\t\t.map(key =>\n\t\t\t\t\t\tnew Watcher(\n\t\t\t\t\t\t\tthis.model,\n\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t$watch[key],\n\t\t\t\t\t\t\t[this.node, this.line])\n\t\t\t\t\t);\n\t\t}\n\t}\n\n\tngDoCheck() {\n\t\tconst ws = this.watchers;\n\t\tif (!ws) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let i = 0, length = ws.length; i < length; i++) {\n\t\t\tws[i].detect();\n\t\t}\n\t}\n}\n","<ng-container [key]=\"model.templateUrl\" [context]=\"context\">\n</ng-container>\n","import { Component, Input, ChangeDetectionStrategy } from '@angular/core';\nimport { Node } from './model/node';\nimport { EbNodeService } from './eb-node.service';\n\n@Component({\n\tselector: 'q-grid-eb-node',\n\ttemplateUrl: './eb-node.component.html',\n\t// changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class EbNodeComponent {\n\t@Input() model: Node;\n\n\tconstructor(public service: EbNodeService) {\n\t}\n\n\tselect(e) {\n\t\te.stopPropagation();\n\n\t\tif (this.model.parent) {\n\t\t\tthis.service.current = this.model;\n\t\t}\n\t}\n}\n","<ul class=\"q-grid-eb-node\"\n\t[q-grid-eb-class]=\"model.attr('class')\"\n\t[ngClass]=\"{'q-grid-eb-active': service.current === model}\"\n\t(click)=\"select($event)\">\n\t<li class=\"q-grid-eb-line\">\n\t\t<ul>\n\t\t\t<li *ngFor=\"let expr of model.line.expressions\"\n\t\t\t    class=\"q-grid-eb-expression\">\n\t\t\t\t<q-grid-eb-expression [model]=\"expr\"\n\t\t\t\t                      [node]=\"model\"\n\t\t\t\t                      [line]=\"model.line\">\n\t\t\t\t</q-grid-eb-expression>\n\t\t\t</li>\n\t\t</ul>\n\t</li>\n\n\t<li class=\"q-grid-eb-children\">\n\t\t<ul>\n\t\t\t<li *ngFor=\"let child of model.children\"\n\t\t\t    class=\"q-grid-eb-child\">\n\t\t\t\t<q-grid-eb-node [model]=\"child\">\n\t\t\t\t</q-grid-eb-node>\n\t\t\t</li>\n\t\t</ul>\n\t</li>\n</ul>\n\n<ng-template key=\"eb-group.tpl.html\"\n\t\t\t let-$group\n\t\t\t let-$node=\"node\"\n\t\t\t let-$line=\"line\">\n\t<ul class=\"q-grid-eb-group\">\n\t\t<li *ngFor=\"let expr of $group.expressions\"\n\t\t    class=\"q-grid-eb-expression\">\n\t\t\t<q-grid-eb-expression [model]=\"expr\"\n\t\t\t                      [node]=\"$node\"\n\t\t\t                      [line]=\"$line\">\n\t\t\t</q-grid-eb-expression>\n\t\t</li>\n\t</ul>\n</ng-template>\n","import { Injectable, EventEmitter } from '@angular/core';\nimport { EbNodeComponent } from './eb-node.component';\nimport { Node } from './model/node';\n\nexport interface EbNodeServiceEventArg<T> {\n\tnewValue: T;\n\toldValue: T;\n}\n\n@Injectable()\nexport class EbNodeService {\n\tprivate node: Node = null;\n\n\tcurrentChange = new EventEmitter<EbNodeServiceEventArg<Node>>();\n\n\tget current() {\n\t\treturn this.node;\n\t}\n\n\tset current(value) {\n\t\tconst oldNode = this.node;\n\t\tif (value !== oldNode) {\n\t\t\tthis.node = value;\n\t\t\tthis.currentChange.emit({\n\t\t\t\toldValue: oldNode,\n\t\t\t\tnewValue: value\n\t\t\t});\n\t\t}\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SerializationService } from './serialization.service';\nimport { EbNodeComponent } from './eb-node.component';\nimport { EbExpressionComponent } from './eb-expression.component';\nimport { EbClassDirective } from './eb-class.directive';\nimport { EbNodeService } from './eb-node.service';\nimport { TemplateModule } from '@qgrid/ngx';\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n\t\tTemplateModule\n\t],\n\texports: [\n\t\tEbNodeComponent,\n\t\tEbClassDirective\n\t],\n\tdeclarations: [\n\t\tEbNodeComponent,\n\t\tEbExpressionComponent,\n\t\tEbClassDirective\n\t],\n\tproviders: [\n\t\tSerializationService,\n\t\tEbNodeService\n\t]\n})\nexport class EbModule {\n}\n","import { guid, isFunction } from '@qgrid/core';\nimport * as patch from '../patch';\nimport * as utility from '../utility';\nimport { Expression, GroupExpression } from './expression';\nimport { GroupSchema } from './group.schema';\nimport { Line } from './line';\nimport { Node } from './node';\nimport { nodeSchema } from './node.schema';\nimport { EmptyStatement, IStatement } from './statement';\n\n\nexport class ExpressionBuilder {\n\tconstructor(private settings) {\n\t}\n\n\tbuild<T>(statements: Array<IStatement>): T {\n\t\tconst NodeSchemaT = nodeSchema(GroupSchema);\n\n\t\tconst settings = this.settings;\n\t\tstatements\n\t\t\t.concat([new EmptyStatement()])\n\t\t\t.forEach(statement => {\n\t\t\t\tconst factory = function (...args) {\n\t\t\t\t\tlet id = guid();\n\t\t\t\t\tlet sampleExpression: Expression;\n\t\t\t\t\tif (args.length > 1) {\n\t\t\t\t\t\tid = args[0];\n\t\t\t\t\t\tsampleExpression = args[1];\n\t\t\t\t\t} else if (args.length === 1) {\n\t\t\t\t\t\tsampleExpression = args[0];\n\t\t\t\t\t}\n\n\t\t\t\t\tconst build = function (node: Node, line: Line) {\n\t\t\t\t\t\tconst expression =\n\t\t\t\t\t\t\tutility.defaults<Expression>(\n\t\t\t\t\t\t\t\tsampleExpression,\n\t\t\t\t\t\t\t\tstatement.defaults,\n\t\t\t\t\t\t\t\tsettings.defaults\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\texpression.id = id;\n\t\t\t\t\t\texpression.type = statement.type;\n\t\t\t\t\t\texpression.templateUrl = statement.templateKey;\n\n\t\t\t\t\t\tconst group = new GroupExpression();\n\t\t\t\t\t\tgroup.id = id;\n\t\t\t\t\t\tgroup.expressions.push(expression);\n\n\t\t\t\t\t\tline.add(group);\n\t\t\t\t\t\tpatch.methodsOf(expression).with(node, line);\n\n\t\t\t\t\t\tconst keys = Object.keys(expression);\n\n\t\t\t\t\t\tkeys.forEach(key => {\n\t\t\t\t\t\t\tconst sourceFunction = expression[key];\n\n\t\t\t\t\t\t\tif (isFunction(sourceFunction)) {\n\t\t\t\t\t\t\t\texpression[key] = (...context) => {\n\t\t\t\t\t\t\t\t\tconst result = sourceFunction.apply(expression, context);\n\n\t\t\t\t\t\t\t\t\t// TODO add decorator for mutable methods instead of trigger\n\t\t\t\t\t\t\t\t\tif (!line.immutable) {\n\t\t\t\t\t\t\t\t\t\texpression.method = expression.method || [];\n\t\t\t\t\t\t\t\t\t\tif (expression.method.indexOf(key) < 0) {\n\t\t\t\t\t\t\t\t\t\t\texpression.method.push(key);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tline.immutable = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.plan.push(build);\n\t\t\t\t\tthis.planMap[id] = build;\n\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\tconst groupFactory = function (...args) {\n\t\t\t\t\tlet id = guid();\n\t\t\t\t\tlet sampleExpression: Expression;\n\t\t\t\t\tif (args.length > 1) {\n\t\t\t\t\t\tid = args[0];\n\t\t\t\t\t\tsampleExpression = args[1];\n\t\t\t\t\t} else if (args.length === 1) {\n\t\t\t\t\t\tsampleExpression = args[0];\n\t\t\t\t\t}\n\n\t\t\t\t\tconst build = function (node, line, expressionGroup) {\n\t\t\t\t\t\tconst expression =\n\t\t\t\t\t\t\tutility.defaults<Expression>(\n\t\t\t\t\t\t\t\tsampleExpression,\n\t\t\t\t\t\t\t\tstatement.defaults,\n\t\t\t\t\t\t\t\tsettings.defaults\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\texpression.id = id;\n\t\t\t\t\t\texpression.type = statement.type;\n\t\t\t\t\t\texpression.templateUrl = statement.templateKey;\n\t\t\t\t\t\texpressionGroup.expressions.push(expression);\n\n\t\t\t\t\t\tpatch.methodsOf(expression).with(node, line);\n\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.plan.push(build);\n\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\n\t\t\t\tNodeSchemaT.prototype[statement.type] = factory;\n\t\t\t\tGroupSchema.prototype[statement.type] = groupFactory;\n\t\t\t});\n\n\t\t// TODO: think how to avoid this\n\t\treturn new NodeSchemaT() as T;\n\t}\n}\n","export abstract class Expression {\n\tid: string;\n\ttype: string;\n\ttemplateUrl = '';\n\tmethod: string[] = [];\n}\n\nexport class GroupExpression extends Expression {\n\texpressions: Expression[] = [];\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.type = 'group';\n\t\tthis.templateUrl = 'eb-group.tpl.html';\n\t}\n}\n\n","import { Line } from './line';\nimport { Node } from './node';\nimport { GroupExpression } from './expression';\n\nexport class GroupSchema {\n\tplan: Array<(node: Node, line: Line, group: GroupExpression) => void> = [];\n\n\tconstructor(public node: Node, public line: Line) {\n\t}\n\n\tapply(group: GroupExpression) {\n\t\tthis.plan.forEach(p => p(this.node, this.line, group));\n\t}\n}\n","import { cloneDeep } from '@qgrid/core';\nimport { GridError } from '@qgrid/ngx';\nimport { Expression, GroupExpression } from './expression';\nimport { GroupSchema } from './group.schema';\nimport { Node } from './node';\n\ninterface ExpressionEntry {\n\tindex: number;\n\texpression: Expression;\n\tparent: GroupExpression;\n}\n\nexport class Line {\n\timmutable = true;\n\treadonly expressions: Expression[] = [];\n\n\tconstructor(private GroupSchemaT: typeof GroupSchema) {\n\t}\n\n\tprivate getIndex(id: string) {\n\t\tconst index = this.expressions.findIndex(item => item.id === id);\n\t\tif (index < 0) {\n\t\t\tthrow new GridError('line', `Expression ${id} not found`);\n\t\t}\n\n\t\treturn index;\n\t}\n\n\tprivate findById(expressions: Expression[], id: string, parent: GroupExpression = null): ExpressionEntry {\n\t\tfor (let index = 0, length = expressions.length; index < length; index++) {\n\t\t\tconst expression = expressions[index];\n\t\t\tif (expression.id === id) {\n\t\t\t\treturn { index, expression, parent };\n\t\t\t}\n\t\t\tif (expression instanceof GroupExpression) {\n\t\t\t\tconst group = expression as GroupExpression;\n\t\t\t\tconst groupChild = this.findById(group.expressions, id, group);\n\t\t\t\tif (groupChild) {\n\t\t\t\t\treturn groupChild;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tadd(expression: Expression) {\n\t\tthis.expressions.push(expression);\n\t}\n\n\tclone(id: string) {\n\t\treturn cloneDeep(this.get(id)) as Expression;\n\t}\n\n\tget(id: string) {\n\t\tconst expression = this.findById(this.expressions, id);\n\t\tif (!expression) {\n\t\t\tthrow new GridError('line', `Expression ${id} not found`);\n\t\t}\n\n\t\treturn expression.expression;\n\t}\n\n\tput(id: string, node: Node, build) {\n\t\tconst index = this.getIndex(id);\n\t\tconst schema = new this.GroupSchemaT(node, this);\n\t\tconst group = new GroupExpression();\n\n\t\tconst item = this.findById(this.expressions, id);\n\t\tif (item.expression instanceof GroupExpression) {\n\t\t\tbuild(schema);\n\t\t\tschema.apply(group);\n\t\t\tgroup.id = id;\n\t\t\tthis.expressions.splice(index, 1, group);\n\t\t\tthis.immutable = false;\n\t\t} else {\n\t\t\tthrow new GridError('line', 'Unsupported operation: put to expression, that is not a group');\n\t\t}\n\t}\n\n\tremove(id) {\n\t\tconst item = this.findById(this.expressions, id);\n\t\tconst expressions = item.parent ? item.parent.expressions : this.expressions;\n\t\tif (item.expression instanceof GroupExpression) {\n\t\t\titem.expression.expressions = [];\n\t\t} else {\n\t\t\tthrow new GridError('line', 'Unsupported operation: remove expression, that is not a group');\n\t\t}\n\t}\n}\n","import { GridError } from '@qgrid/ngx';\nimport { Line } from './line';\n\nexport class Node {\n\treadonly attributes: { [key: string]: any } = {};\n\tchildren: Node[] = [];\n\tlevel: number;\n\tline: Line;\n\n\tconstructor(public id: string, public schema, public parent?: Node) {\n\t\tthis.level = parent ? parent.level + 1 : 0;\n\t}\n\n\tattr(key: string, value?) {\n\t\tif (arguments.length === 2) {\n\t\t\tthis.attributes[key] = value;\n\t\t} else {\n\t\t\treturn this.attributes[key];\n\t\t}\n\t}\n\n\tclasses() {\n\t}\n\n\taddChildAfter(child: Node, after?: Node) {\n\t\tconst index = after ? this.children.indexOf(after) : this.children.length - 1;\n\n\t\tthis.children.splice(index + 1, 0, child);\n\t\tchild.parent = this;\n\t\tchild.level = this.level + 1;\n\t}\n\n\taddChildBefore(child: Node, before: Node) {\n\t\tconst index = before ? this.children.indexOf(before) : 0;\n\n\t\tthis.children.splice(index, 0, child);\n\t\tchild.parent = this;\n\t\tchild.level = this.level + 1;\n\t}\n\n\taddAfter(child: Node) {\n\t\tif (!this.parent) {\n\t\t\tthrow new GridError('node', 'Can\\'t add after root');\n\t\t}\n\t\tthis.parent.addChildAfter(child, this);\n\t}\n\n\taddBefore(child: Node) {\n\t\tif (!this.parent) {\n\t\t\tthrow new GridError('node', 'Can\\'t add after root');\n\t\t}\n\t\tthis.parent.addChildBefore(child, this);\n\t}\n\n\tclone() {\n\t\treturn this.schema.apply(new Node(this.id, this.schema));\n\t}\n\n\tremove() {\n\t\tif (!this.parent) {\n\t\t\tthrow new GridError('node', 'Root element can\\'t be removed');\n\t\t}\n\n\t\tconst index = this.parent.children.indexOf(this);\n\t\tthis.parent.children.splice(index, 1);\n\t}\n\n\tclear() {\n\t\tthis.children.forEach(child => child.parent = null);\n\t\tthis.children = [];\n\t}\n\n\ttoString(indent = 0) {\n\t\treturn Array(indent).join('-') + ' ' + this.level + '\\n' +\n\t\t\tthis.children\n\t\t\t\t.map(child => {\n\t\t\t\t\treturn child.toString(indent + 1);\n\t\t\t\t})\n\t\t\t\t.join('\\n');\n\t}\n\n\ttoTraceString() {\n\t\tif (null != this.parent) {\n\t\t\tlet parent = this.parent;\n\t\t\twhile (null !== parent.parent) {\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\n\t\t\treturn parent.toString();\n\t\t}\n\n\t\treturn this.toString();\n\t}\n}\n","import { GridError } from '@qgrid/ngx';\nimport { Line } from './line';\nimport { GroupExpression } from './expression';\nimport { Node } from './node';\nimport { GroupSchema } from './group.schema';\n\nexport interface INodeSchema {\n\tschemaMap: { [key: string]: INodeSchema };\n\n\tapply(node?: Node): Node;\n\tattr(key: string, value: any): INodeSchema;\n\tnode(id: string, build: (schema: INodeSchema) => void): INodeSchema;\n\tgroup(id: string, build: (schema: GroupSchema) => void): INodeSchema;\n\tget(id: string): INodeSchema;\n\tmaterialize(id: string): Node;\n}\n\nexport function nodeSchema(GroupSchemaT: typeof GroupSchema): any {\n\treturn class NodeSchema implements INodeSchema {\n\t\tplan = [];\n\t\tplanMap = {};\n\n\t\tconstructor(public schemaMap = {}) {\n\t\t}\n\n\t\tclone(): INodeSchema {\n\t\t\tconst schema = new NodeSchema({ ...this.schemaMap });\n\t\t\tschema.plan = [...this.plan];\n\t\t\tschema.planMap = { ...this.planMap };\n\t\t\treturn schema;\n\t\t}\n\n\t\tattr(key: string, value: any) {\n\t\t\tthis.plan.push(node => node.attr(key, value));\n\t\t\treturn this;\n\t\t}\n\n\t\tapply(node?: Node): Node {\n\t\t\tnode = node || new Node('#root', this);\n\n\t\t\tconst line = new Line(GroupSchemaT);\n\t\t\tnode.line = line;\n\n\t\t\tthis.plan.forEach(p => p(node, line));\n\n\t\t\treturn node;\n\t\t}\n\n\t\tnode(id: string, build: (schema: INodeSchema) => void) {\n\t\t\tif (!build) {\n\t\t\t\tthrow new GridError('node.schema', 'Build function is not defined');\n\t\t\t}\n\n\t\t\tthis.plan.push((node, line) => {\n\t\t\t\tconst schema = new NodeSchema(this.schemaMap);\n\t\t\t\tbuild(schema);\n\n\t\t\t\tconst newNode = new Node(id, schema, node);\n\t\t\t\tschema.apply(newNode);\n\t\t\t\tnode.addChildAfter(newNode);\n\t\t\t\tthis.schemaMap[id] = schema;\n\n\t\t\t\treturn node;\n\t\t\t});\n\n\t\t\treturn this;\n\t\t}\n\n\t\tgroup(id: string, build: (schema: GroupSchema) => void) {\n\t\t\tif (!build) {\n\t\t\t\tthrow new GridError('node.schema', 'Build function is not defined');\n\t\t\t}\n\n\t\t\tconst buildGroup = (node, line) => {\n\t\t\t\tconst group = new GroupExpression();\n\t\t\t\tgroup.id = id;\n\n\t\t\t\tconst schema = new GroupSchemaT(node, line);\n\t\t\t\tbuild(schema);\n\t\t\t\tschema.apply(group);\n\t\t\t\tline.add(group);\n\n\t\t\t\treturn node;\n\t\t\t};\n\n\t\t\tthis.plan.push(buildGroup);\n\t\t\tthis.planMap[id] = buildGroup;\n\n\t\t\treturn this;\n\t\t}\n\n\t\tget(id: string) {\n\t\t\tconst schema = this.schemaMap[id];\n\t\t\tif (!schema) {\n\t\t\t\tthrow new GridError('node.schema', `Schema ${id} is not found`);\n\t\t\t}\n\n\t\t\treturn schema;\n\t\t}\n\n\t\tmaterialize(id: string): Node {\n\t\t\tconst schema = this.get(id);\n\t\t\treturn schema.apply(new Node(id, schema));\n\t\t}\n\t};\n}\n","export interface IStatement {\n\ttype: string;\n\ttemplateKey: string;\n\tdefaults?: any;\n}\n\nexport class EmptyStatement implements IStatement {\n\ttype = 'empty';\n\ttemplateKey = 'eb-empty.tpl.html';\n}\n","import { isFunction } from '@qgrid/core';\n\nexport function method(inst: any, key: string) {\n\tconst sourceFn = inst[key];\n\n\treturn {\n\t\twith: withFactory(inst, key, sourceFn)\n\t};\n}\n\nexport function methodsOf(inst: any) {\n\tconst keys = Object.keys(inst);\n\tconst length = keys.length;\n\tconst patch = {};\n\n\tfor (let i = 0; i < length; i++) {\n\t\tconst key = keys[i];\n\t\tif (isFunction(inst[key])) {\n\t\t\tpatch[key] = method(inst, key);\n\t\t}\n\t}\n\n\treturn {\n\t\twith: (...args) => {\n\t\t\tconst patchKeys = Object.keys(patch);\n\t\t\tconst patchLength = patchKeys.length;\n\n\t\t\tfor (let i = 0; i < patchLength; i++) {\n\t\t\t\tconst key = patchKeys[i];\n\n\t\t\t\tinst.action = key;\n\t\t\t\tpatch[key].with.apply(inst, args);\n\t\t\t}\n\t\t}\n\t};\n}\n\nexport function withFactory(inst, key, sourceFn) {\n\tconst withFn = (...withArgs) =>\n\t\tinst[key] = (...keyArgs) =>\n\t\t\tsourceFn.apply(inst, withArgs.concat(keyArgs));\n\n\t(withFn as any).decorator = (...args) => {\n\t\tconst decorate = args[0];\n\t\targs = args.slice(1);\n\n\t\tinst[key] = () => decorate.apply(inst, [sourceFn, inst, key].concat(args));\n\t};\n\n\treturn withFn;\n}\n","import { Node } from './model/node';\nimport { Line } from './model/line';\nimport { GroupExpression } from './model/expression';\nimport { INodeSchema } from './model/node.schema';\nimport { override, indexOf } from './utility';\nimport { Injectable } from '@angular/core';\n\nclass Serializer {\n\tconstructor(private node: Node) {\n\t}\n\n\tserialize(): ISerializationNode {\n\t\tconst groups = this.node.line.expressions.map(expr => this.serializeGroup(expr));\n\n\t\treturn {\n\t\t\tid: this.node.id,\n\t\t\tattributes: this.serializeAttributes(this.node),\n\t\t\tchildren: this.node.children.map(child => new Serializer(child).serialize()),\n\t\t\tline: groups.filter(group => group.expressions.length)\n\t\t};\n\t}\n\n\tserializeGroup(group): ISerializationGroup {\n\t\treturn {\n\t\t\tid: group.id,\n\t\t\texpressions: group.expressions\n\t\t\t\t.filter(expr => this.canSerialize(expr))\n\t\t\t\t.map(expr => this.serializeExpression(expr))\n\t\t};\n\t}\n\n\tserializeExpression(expression): ISerializationExpression {\n\t\tconst result = {} as ISerializationExpression;\n\n\t\tconst serializeAttr = this.node.attr('serialize');\n\t\tconst serializableProps = serializeAttr[expression.id];\n\t\tfor (let i = 0, length = serializableProps.length; i < length; i++) {\n\t\t\tconst prop = serializableProps[i];\n\t\t\tresult[prop] = expression[prop];\n\t\t}\n\n\t\tresult.id = expression.id;\n\t\tresult.type = expression.type;\n\t\tresult.method = expression.method;\n\n\t\treturn result;\n\t}\n\n\tserializeAttributes(node) {\n\t\tconst serializeAttr = this.node.attr('serialize');\n\t\tif (serializeAttr && serializeAttr['@attr']) {\n\t\t\tconst props = serializeAttr['@attr'];\n\t\t\treturn props.reduce((memo, attr) => {\n\t\t\t\tmemo[attr] = this.node.attr(attr);\n\t\t\t\treturn memo;\n\t\t\t}, {});\n\t\t}\n\t\treturn {};\n\t}\n\n\tcanSerialize(expression) {\n\t\tconst serializeAttr = this.node.attr('serialize');\n\t\tif (!serializeAttr) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst props = serializeAttr[expression.id];\n\t\treturn !!(props && props.length);\n\t}\n}\n\nclass Deserializer {\n\tconstructor(private schema: INodeSchema) {\n\t}\n\n\tdeserialize(data: ISerializationNode, parent: Node = null, nodeMap?: { [key: string]: Node }) {\n\t\tnodeMap = nodeMap || {};\n\n\t\tlet node: Node;\n\t\tif (!parent) {\n\t\t\tnode = new Node(data.id, this.schema);\n\t\t\tthis.schema.apply(node);\n\t\t\ttraverse(node, nodeMap);\n\t\t\tnode.clear();\n\t\t} else {\n\t\t\tnode = nodeMap[data.id].clone();\n\t\t\tparent.addChildAfter(node);\n\t\t\ttraverse(parent, nodeMap);\n\t\t\tnode.clear();\n\t\t}\n\n\t\toverride(node.attributes, data.attributes);\n\n\t\tthis.deserializeLine(node, node.line, data.line);\n\n\t\tconst children = data.children;\n\t\tconst length = children.length;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst child = children[i];\n\t\t\tconst childSchema = this.schema.schemaMap[child.id];\n\t\t\tnew Deserializer(childSchema).deserialize(child, node, nodeMap);\n\t\t}\n\n\t\treturn node;\n\t}\n\n\tprivate deserializeLine(node: Node, line: Line, dataGroups: ISerializationGroup[]) {\n\t\tfor (let i = 0, length = dataGroups.length; i < length; i++) {\n\t\t\tconst dataGroup = dataGroups[i];\n\t\t\tconst exprGroup = line.get(dataGroup.id) as GroupExpression;\n\t\t\tthis.deserializeGroup(node, line, exprGroup, dataGroup);\n\t\t}\n\t}\n\n\tprivate deserializeGroup(node: Node, line: Line, group: GroupExpression, dataGroup: ISerializationGroup) {\n\t\tconst dataExpressions = dataGroup.expressions;\n\t\tconst length = dataExpressions.length;\n\n\t\tlet index;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst dataExp = dataExpressions[i];\n\t\t\tindex = indexOf(group.expressions, expr => expr.id === dataExp.id);\n\t\t\toverride(group.expressions[index], dataExp);\n\t\t}\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst dataExpr = dataExpressions[i];\n\t\t\tif (dataExpr.method) {\n\t\t\t\tdataExpr.method.forEach(m => {\n\t\t\t\t\tgroup.expressions[index][m](node, line);\n\t\t\t\t\tgroup.expressions[index].method = dataExpressions[i].method;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction traverse(node: Node, map: { [key: string]: Node }) {\n\tif (!map.hasOwnProperty(node.id)) {\n\t\tmap[node.id] = node;\n\t}\n\n\tfor (let i = 0, length = node.children.length; i < length; i++) {\n\t\tconst child = node.children[0];\n\t\ttraverse(child, map);\n\t}\n}\n\nexport declare interface ISerializationNode {\n\tid: string;\n\tattributes: any;\n\tchildren: ISerializationNode[];\n\tline: ISerializationGroup[];\n}\n\nexport declare interface ISerializationGroup {\n\tid: string;\n\texpressions: ISerializationExpression[];\n}\n\nexport declare interface ISerializationExpression {\n\tid: string;\n\ttype: string;\n\tmethod: Array<string>;\n}\n\n@Injectable()\nexport class SerializationService {\n\tserialize(node: Node): ISerializationNode {\n\t\treturn new Serializer(node).serialize();\n\t}\n\n\tdeserialize(schema: INodeSchema, data: ISerializationNode): Node {\n\t\treturn new Deserializer(schema).deserialize(data);\n\t}\n}\n","import { Node } from './model/node';\n\nexport class TraverseService {\n\tfindUp(node: Node, test: (node: Node) => boolean) {\n\t\twhile (node) {\n\t\t\tif (test(node)) {\n\t\t\t\treturn node;\n\t\t\t}\n\n\t\t\tnode = node.parent;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfindUpSibling(node: Node) {\n\t\tif (node.parent) {\n\t\t\tconst children = node.parent.children;\n\t\t\tconst index = children.indexOf(node);\n\t\t\tif (index >= 0) {\n\t\t\t\tif (index > 0) {\n\t\t\t\t\treturn children[index - 1];\n\t\t\t\t}\n\n\t\t\t\treturn node.parent;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tdepth(root: Node): (reduce: any, memo: any) => any {\n\t\treturn (reduce, memo) => {\n\t\t\tmemo = this.visitLine(reduce, memo, root, root.line);\n\n\t\t\tconst children = root.children;\n\t\t\tconst length = children.length;\n\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tmemo = this.depth(children[i])(reduce, memo);\n\t\t\t}\n\n\t\t\treturn memo;\n\t\t};\n\t}\n\n\tprivate visitLine(reduce, memo, node, line) {\n\t\tconst groups = line.expressions;\n\t\tconst length = groups.length;\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tmemo = this.visitGroup(reduce, memo, node, line, groups[i]);\n\t\t}\n\n\t\treturn memo;\n\t}\n\n\tprivate visitGroup(reduce, memo, node, line, group) {\n\t\tconst expressions = group.expressions;\n\t\tconst length = expressions.length;\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tmemo = reduce(memo, expressions[i], line, node);\n\t\t}\n\n\t\treturn memo;\n\t}\n}\n","import { clone } from '@qgrid/core';\n\nexport function indexOf(array, predicate) {\n\tfor (let i = 0, length = array.length; i < length; i++) {\n\t\tif (predicate(array[i], i)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\nexport function defaults<T>(...args: any[]): T {\n\tconst dst = args[0];\n\tconst result = clone(dst) as T;\n\n\tfor (let i = 1, sourcesLength = args.length; i < sourcesLength; i++) {\n\t\tconst source = args[i];\n\n\t\tif (!source) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst keys = Object.keys(source);\n\n\t\tfor (let k = 0, keysLength = keys.length; k < keysLength; k++) {\n\t\t\tconst key = keys[k];\n\t\t\tif (!result.hasOwnProperty(key)) {\n\t\t\t\tresult[key] = source[key];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result;\n}\n\nexport function override(dst, src) {\n\tconst keys = Object.keys(src);\n\tconst length = keys.length;\n\n\tfor (let i = 0; i < length; i++) {\n\t\tconst key = keys[i];\n\t\tdst[key] = src[key];\n\t}\n\n\treturn dst;\n}\n","import { Directive, ElementRef, EventEmitter, Input, Optional, Output } from '@angular/core';\nimport { EventListener, EventManager, yes } from '@qgrid/core';\nimport { Disposable } from '@qgrid/ngx';\nimport { BackdropService } from '../backdrop/backdrop.service';\n\n@Directive({\n\tselector: '[q-grid-file]',\n\tproviders: [Disposable]\n})\nexport class FileDirective {\n\tprivate reader = new FileReader();\n\tprivate _value: any;\n\tprivate _label: string;\n\n\t@Output('q-grid-fileChange') valueChange = new EventEmitter<any>();\n\t@Output('q-grid-file-labelChange') labelChange = new EventEmitter<string>();\n\n\t@Input('q-grid-file-is-valid') isValid: (name: string) => boolean = yes;\n\n\t@Input('q-grid-file') get value() {\n\t\treturn this._value;\n\t}\n\n\tset value(value: any) {\n\t\tif (value !== this._value) {\n\t\t\tthis._value = value;\n\t\t\tthis.valueChange.emit(value);\n\t\t}\n\t}\n\n\t@Input('q-grid-file-label') get label() {\n\t\treturn this._label;\n\t}\n\n\tset label(value: string) {\n\t\tif (value !== this._label) {\n\t\t\tthis._label = value;\n\t\t\tthis.labelChange.emit(value);\n\t\t}\n\t}\n\n\tconstructor(\n\t\t@Optional() private backdropService: BackdropService,\n\t\tdisposable: Disposable,\n\t\telementRef: ElementRef) {\n\n\t\tconst listener = new EventListener(elementRef.nativeElement, new EventManager(this));\n\n\t\tdisposable.add(listener.on('change', this.onUpload));\n\t\tdisposable.add(listener.on('drop', this.onUpload));\n\t\tdisposable.add(listener.on('click', this.hideBackdrop));\n\t\tdisposable.add(listener.on('focus', this.revealBackdrop));\n\n\t\tthis.reader.onloadend = e => this.onLoadEnd(e);\n\t}\n\n\tonUpload(e) {\n\t\tconst { files } = e.target;\n\t\tconst file = files[0];\n\t\tif (file && this.isValid(file.name)) {\n\t\t\tthis.reader.readAsDataURL(file);\n\t\t\tthis.label = file.name;\n\t\t}\n\t}\n\n\tonLoadEnd(e) {\n\t\tif (e.target.readyState === this.reader.DONE) {\n\t\t\tthis.value = e.target.result;\n\t\t}\n\t}\n\n\thideBackdrop() {\n\t\tif (this.backdropService) {\n\t\t\tthis.backdropService.hide();\n\t\t}\n\t}\n\n\trevealBackdrop() {\n\t\tif (this.backdropService) {\n\t\t\tif (!this.backdropService.isActive) {\n\t\t\t\tsetTimeout(() => this.backdropService.reveal(), 300);\n\t\t\t}\n\t\t}\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { FileDirective } from './file.directive';\n\n@NgModule({\n\tdeclarations: [FileDirective],\n\texports: [FileDirective]\n})\nexport class FileModule {}\n","import { AfterViewInit, Directive, Input } from '@angular/core';\nimport { GridPlugin } from '@qgrid/ngx';\nimport { AutofocusPlugin } from '@qgrid/plugins';\n\n@Directive({\n\tselector: '[q-grid-autofocus]',\n\tproviders: [GridPlugin]\n})\nexport class AutoFocusDirective implements AfterViewInit {\n\t@Input('q-grid-autofocus') enabled: boolean | string;\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin\n\t) { }\n\n\tngAfterViewInit() {\n\t\tif (this.enabled !== false) {\n\t\t\t// tslint:disable-next-line:no-unused-expression\n\t\t\tnew AutofocusPlugin(\n\t\t\t\tthis.plugin\n\t\t\t);\n\t\t}\n\t}\n}\n","import { Directive, ElementRef, Input, OnInit, Renderer2 } from '@angular/core';\nimport { noop } from '@qgrid/core';\n\n@Directive({\n\tselector: '[q-grid-on-blur]'\n})\nexport class BlurDirective implements OnInit {\n\t@Input('q-grid-on-blur') onBlur = noop;\n\t@Input('q-grid-on-blur-selector') selector = 'input';\n\n\tconstructor(private renderer: Renderer2, private elementRef: ElementRef) {\n\t}\n\n\tngOnInit() {\n\t\tconst element = this.renderer.selectRootElement(this.selector);\n\t\tthis.renderer.listen(element, 'blur', this.onBlur);\n\t}\n}\n","import {\n\tAfterViewInit, Directive,\n\tElementRef,\n\tInput, NgZone\n} from '@angular/core';\nimport { isFunction, isString } from '@qgrid/core';\nimport { GridError } from '@qgrid/ngx';\n\n@Directive({\n\tselector: '[q-grid-focus]'\n})\nexport class FocusDirective implements AfterViewInit {\n\t@Input('q-grid-focus') selector;\n\t@Input('q-grid-focus-disabled') disabled = false;\n\n\tconstructor(\n\t\tprivate elementRef: ElementRef,\n\t\tprivate zone: NgZone\n\t) { }\n\n\tngAfterViewInit() {\n\t\tif (this.disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selector = this.selector;\n\t\tconst element = selector\n\t\t\t? isString(selector) ? this.elementRef.nativeElement.querySelector(selector) : selector\n\t\t\t: this.elementRef.nativeElement;\n\n\t\tif (!element) {\n\t\t\tthrow new GridError(\n\t\t\t\t'focus.directive',\n\t\t\t\t`Element ${this.selector} is not found`\n\t\t\t);\n\t\t}\n\n\t\tif (!isFunction(element.focus)) {\n\t\t\tthrow new GridError(\n\t\t\t\t'focus.directive',\n\t\t\t\t`Can't find focus method in ${element}`\n\t\t\t);\n\t\t}\n\n\t\t// we need a small timeout to wait, for example, position directive\n\t\t// in other case it will scroll to element before layout\n\t\tthis.zone.runOutsideAngular(() =>\n\t\t\tsetTimeout(() => {\n\t\t\t\telement.focus();\n\t\t\t}, 10));\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { FocusDirective } from './focus.directive';\nimport { AutoFocusDirective } from './autofocus.directive';\nimport { BlurDirective } from './blur.directive';\n\n@NgModule({\n\tdeclarations: [\n\t\tFocusDirective,\n\t\tAutoFocusDirective,\n\t\tBlurDirective\n\t],\n\texports: [\n\t\tFocusDirective,\n\t\tAutoFocusDirective,\n\t\tBlurDirective\n\t]\n})\nexport class FocusModule {\n}\n","import { Injectable, Optional } from '@angular/core';\nimport { FocusAfterRenderService } from '@qgrid/core';\nimport { GridPlugin } from '@qgrid/ngx';\n\n@Injectable()\nexport class FocusAfterRender {\n\tconstructor(\n\t\t@Optional() plugin: GridPlugin,\n\t) {\n\t\tif (plugin) {\n\t\t\t// tslint:disable-next-line:no-unused-expression\n\t\t\tnew FocusAfterRenderService(plugin);\n\t\t}\n\t}\n}\n","import { AfterViewInit, ChangeDetectionStrategy, Component, ContentChild, ElementRef, Input, TemplateRef } from '@angular/core';\nimport { Action, ColumnModel, Command, Composite, EventListener, EventManager } from '@qgrid/core';\nimport { GridPlugin, TemplateHostService } from '@qgrid/ngx';\nimport { ImportPlugin } from '@qgrid/plugins';\n\n@Component({\n\tselector: 'q-grid-import',\n\ttemplateUrl: './import.component.html',\n\tproviders: [TemplateHostService, GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ImportComponent implements AfterViewInit {\n\t@Input() options: any;\n\t@ContentChild(TemplateRef) templateRef: TemplateRef<any>;\n\n\tcontext: { $implicit: ImportComponent } = {\n\t\t$implicit: this\n\t};\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate templateHost: TemplateHostService,\n\t\tprivate hostElement: ElementRef\n\t) {\n\t\tthis.templateHost.key = () => `import`;\n\t}\n\n\tngAfterViewInit() {\n\t\tconst { model, disposable } = this.plugin;\n\t\tconst { nativeElement } = this.hostElement;\n\n\t\tconst eventListener = new EventListener(nativeElement, new EventManager(this));\n\t\tconst importPlugin = new ImportPlugin(model, nativeElement, this.options);\n\n\t\teventListener.on('change', (e) => importPlugin.load(e));\n\n\t\tconst action = new Action(\n\t\t\tnew Command({\n\t\t\t\texecute: () => importPlugin.upload()\n\t\t\t}),\n\t\t\t`Import data`,\n\t\t\t'file_upload'\n\t\t);\n\n\t\tif (this.templateRef) {\n\t\t\taction.templateUrl = this.templateHost.key('trigger');\n\t\t}\n\n\t\tconst items = Composite.list([model.action().items, [action]]);\n\n\t\tmodel.action({\n\t\t\titems\n\t\t}, {\n\t\t\tsource: 'import.component'\n\t\t});\n\n\t\tdisposable.add(() => {\n\t\t\tconst notImportItems =\n\t\t\t\tmodel.action({\n\t\t\t\t\titems: model\n\t\t\t\t\t\t.action()\n\t\t\t\t\t\t.items\n\t\t\t\t\t\t.filter(x => x !== action)\n\t\t\t\t}, {\n\t\t\t\t\tsource: 'import.component'\n\t\t\t\t});\n\t\t});\n\t}\n\n\tget rows() {\n\t\treturn this.plugin.model.data().rows;\n\t}\n\n\tget columns(): ColumnModel[] {\n\t\treturn this.plugin.model.columnList().line;\n\t}\n\n\tget id() {\n\t\treturn this.plugin.model.grid().id;\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { ImportComponent } from './import.component';\nimport { TemplateModule } from '@qgrid/ngx';\n\n@NgModule({\n\tdeclarations: [\n\t\tImportComponent\n\t],\n\texports: [\n\t\tImportComponent\n\t],\n\timports: [\n\t\tTemplateModule\n\t]\n})\nexport class ImportModule {\n}\n","import { NgModule } from '@angular/core';\nimport { PositionDirective } from './position.directive';\n\n@NgModule({\n\tdeclarations: [\n\t\tPositionDirective,\n\t],\n\texports: [\n\t\tPositionDirective,\n\t]\n})\nexport class LayoutModule {\n}\n","import { Directive, ElementRef, Input, OnInit } from '@angular/core';\nimport { Disposable } from '@qgrid/ngx';\nimport { PositionPlugin } from '@qgrid/plugins';\n\n@Directive({\n\tselector: '[q-grid-position]',\n\tproviders: [Disposable]\n})\nexport class PositionDirective implements OnInit {\n\t@Input('q-grid-position') target = '';\n\n\tconstructor(\n\t\tprivate elementRef: ElementRef,\n\t\tprivate disposable: Disposable\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst position = new PositionPlugin({\n\t\t\telement: this.elementRef.nativeElement,\n\t\t\ttargetName: this.target,\n\t\t},\n\t\t\tthis.disposable\n\t\t);\n\n\t\tposition.invalidate();\n\t}\n}\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { TemplateHostService } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-legend',\n\ttemplateUrl: './legend.component.html',\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tproviders: [TemplateHostService]\n})\nexport class LegendComponent {\n\tcontext: { $implicit: LegendComponent } = {\n\t\t$implicit: this\n\t};\n\n\tconstructor(templateHost: TemplateHostService) {\n\t\ttemplateHost.key = () => 'plugin-legend-core.tpl.html';\n\t}\n}\n","<ng-container key=\"plugin-legend-core.tpl.html\"\n              [context]=\"context\">\n</ng-container>","import { NgModule } from '@angular/core';\nimport { LegendComponent } from './legend.component';\nimport { TemplateModule as TemplateModule } from '@qgrid/ngx';\n\n@NgModule({\n\tdeclarations: [\n\t\tLegendComponent\n\t],\n\texports: [\n\t\tLegendComponent\n\t],\n\timports: [\n\t\tTemplateModule\n\t]\n})\nexport class LegendModule {\n}\n","import {\n\tComponent,\n\tInput,\n\tOnInit,\n\tSimpleChange,\n\tChangeDetectionStrategy,\n\tNgZone,\n\tHostBinding,\n\tTemplateRef,\n\tViewChild,\n\tOnDestroy\n} from '@angular/core';\nimport { TemplateHostService, TdCoreDirective, GridError } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-live-cell',\n\ttemplateUrl: './live-cell.tpl.html',\n\tproviders: [TemplateHostService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class LiveCellComponent implements OnInit, OnDestroy {\n\t@Input() cell: TdCoreDirective;\n\t@Input() duration = 500;\n\n\t@HostBinding('class') class: string;\n\n\t@ViewChild('currency', { static: true }) currencyTemplate: TemplateRef<any>;\n\t@ViewChild('number', { static: true }) numberTemplate: TemplateRef<any>;\n\t@ViewChild('time', { static: true }) timeTemplate: TemplateRef<any>;\n\t@ViewChild('text', { static: true }) textTemplate: TemplateRef<any>;\n\n\ttimeoutId: any = null;\n\n\tconstructor(private zone: NgZone) {\n\t}\n\n\tngOnInit() {\n\t\tif (!this.cell.changes) {\n\t\t\tthrow new GridError('live-cell.component', 'No changes found');\n\t\t}\n\t\tthis.class = `q-grid-live-cell q-grid-live-cell-${this.cell.column.type} `;\n\n\t\tif (this.getDifference(this.cell.changes)) {\n\t\t\tthis.class += this.getDifference(this.cell.changes) > 0 ? `q-grid-live-cell-up ` : `q-grid-live-cell-down `;\n\t\t}\n\t\tthis.zone.runOutsideAngular(() => {\n\t\t\tthis.timeoutId = setTimeout(() => {\n\t\t\t\tthis.cell.mode('view');\n\t\t\t}, this.duration);\n\t\t});\n\t}\n\n\tngOnDestroy() {\n\t\tif (this.timeoutId) {\n\t\t\tclearTimeout(this.timeoutId);\n\t\t}\n\t}\n\n\tgetDifference(value: SimpleChange) {\n\t\tswitch (this.cell.column.type) {\n\t\t\tcase 'number':\n\t\t\tcase 'currency':\n\t\t\t\treturn +value.currentValue - +value.previousValue;\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetTemplate() {\n\t\tswitch (this.cell.column.type) {\n\t\t\tcase 'currency':\n\t\t\t\treturn this.currencyTemplate;\n\t\t\tcase 'time':\n\t\t\t\treturn this.timeTemplate;\n\t\t\tcase 'number':\n\t\t\t\treturn this.numberTemplate;\n\t\t\tdefault:\n\t\t\t\treturn this.textTemplate;\n\t\t}\n\t}\n}\n","<ng-container *ngTemplateOutlet=\"getTemplate()\"></ng-container>\n\n<ng-template #currency>\n    <span class=\"q-grid-live-cell-arrow\">\n        <i *ngIf=\"getDifference(cell.changes) > 0\"\n           class=\"q-grid-icon q-grid-asc\">\n            &uarr;\n        </i>\n        <i *ngIf=\"getDifference(cell.changes) < 0\"\n           class=\"q-grid-icon q-grid-desc\">\n            &darr;\n        </i>\n    </span>\n    <span class=\"q-grid-live-cell-diff\">{{ getDifference(cell.changes) | qGridCurrency: cell.column.code}}</span>\n    <span class=\"q-grid-live-cell-prev\">{{ cell.changes.previousValue | qGridCurrency: cell.column.code}}</span>\n    <span class=\"q-grid-live-cell-curr\">{{ cell.label | qGridCurrency: cell.column.code}}</span>\n</ng-template>\n\n<ng-template #number>\n    <span class=\"q-grid-live-cell-curr\">{{ cell.label }}</span>\n    <span class=\"q-grid-live-cell-prev\">{{ cell.changes.previousValue }}</span>\n    <span class=\"q-grid-live-cell-diff\">{{ getDifference(cell.changes) }}</span>\n    <span class=\"q-grid-live-cell-arrow\">\n        <i *ngIf=\"getDifference(cell.changes) > 0\"\n           class=\"q-grid-icon q-grid-asc\">\n            &uarr;\n        </i>\n        <i *ngIf=\"getDifference(cell.changes) < 0\"\n           class=\"q-grid-icon q-grid-desc\">\n            &darr;\n        </i>\n    </span>\n</ng-template>\n\n<ng-template #time>\n    <span class=\"q-grid-live-cell-prev\">{{ cell.changes.previousValue }}</span>\n    <span class=\"q-grid-live-cell-curr\">{{ cell.label }}</span>\n</ng-template>\n\n<ng-template #text>\n    <span class=\"q-grid-live-cell-prev\">{{ cell.changes.previousValue }}</span>\n    <span class=\"q-grid-live-cell-curr\">{{ cell.label }}</span>\n</ng-template>","import { NgModule, } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TemplateModule } from '@qgrid/ngx';\nimport { LiveCellComponent } from './live-cell.component';\nimport { PipeModule } from '../pipes/pipe.module';\n\n@NgModule({\n\tdeclarations: [\n\t\tLiveCellComponent,\n\t],\n\texports: [\n\t\tLiveCellComponent\n\t],\n\timports: [\n\t\tTemplateModule,\n\t\tCommonModule,\n\t\tPipeModule\n\t]\n})\nexport class LiveCellModule {\n}\n","import { ChangeDetectionStrategy, Component, Input, NgZone, OnInit } from '@angular/core';\nimport { Fastdom, GRID_PREFIX } from '@qgrid/core';\nimport { GridPlugin } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-live-columns',\n\ttemplate: '',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class LiveColumnComponent implements OnInit {\n\t@Input('duration') duration = 500;\n\n\tconstructor(private plugin: GridPlugin, private zone: NgZone) { }\n\n\tngOnInit() {\n\t\tlet startPos: number;\n\t\tlet endPos: number;\n\t\tconst { model } = this.plugin;\n\t\tlet currentColumns: any[];\n\n\t\tmodel.animation({\n\t\t\tapply: model.animation().apply.concat((memo, context, complete) => {\n\t\t\t\tconst previousColumns = currentColumns;\n\t\t\t\tcurrentColumns = memo.columns ? memo.columns[0] : currentColumns;\n\n\t\t\t\tif (!previousColumns || !memo.columns) {\n\t\t\t\t\tcomplete(0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst { columnId } = model.data();\n\t\t\t\tconst animations = [];\n\n\t\t\t\tstartPos = currentColumns.length;\n\t\t\t\tendPos = 0;\n\n\t\t\t\tfor (let columnIndex = 0, length = previousColumns.length; columnIndex < length; columnIndex++) {\n\t\t\t\t\tconst newColumnIndex = currentColumns.findIndex((column, i) =>\n\t\t\t\t\t\tcolumnId(i, column.model) === columnId(columnIndex, previousColumns[columnIndex].model));\n\n\t\t\t\t\tif (newColumnIndex !== columnIndex) {\n\t\t\t\t\t\tstartPos = Math.min(Math.min(columnIndex, newColumnIndex), startPos);\n\t\t\t\t\t\tendPos = Math.max(Math.max(columnIndex, newColumnIndex), endPos);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (let columnIndex = 0, length = previousColumns.length; columnIndex < length; columnIndex++) {\n\t\t\t\t\tconst newColumnIndex = currentColumns.findIndex((column, i) =>\n\t\t\t\t\t\tcolumnId(i, column.model) === columnId(columnIndex, previousColumns[columnIndex].model));\n\n\t\t\t\t\tif (newColumnIndex !== columnIndex) {\n\t\t\t\t\t\tanimations.push(this.moveColumn(columnIndex, newColumnIndex, startPos, endPos));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.zone.runOutsideAngular(() => {\n\t\t\t\t\tPromise.all(animations)\n\t\t\t\t\t\t.then(complete);\n\t\t\t\t});\n\t\t\t})\n\t\t});\n\t}\n\n\tprivate moveColumn(from: number, to: number, startPos: number, endPos: number) {\n\t\tconst { table } = this.plugin;\n\n\t\treturn new Promise((animationEnd, animationError) => {\n\t\t\tconst oldColumn = table.body.column(from);\n\t\t\tconst newColumn = table.body.column(to);\n\t\t\tconst startColumn = table.body.column(startPos);\n\t\t\tconst endColumn = table.body.column(endPos);\n\n\t\t\tif (!oldColumn.model() || !newColumn.model()) {\n\t\t\t\tconst errorIndex = oldColumn.model() ? to : from;\n\t\t\t\tanimationError(`Can't find model for column ${errorIndex}`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tFastdom.measure(() => {\n\t\t\t\tconst newRect = newColumn.cells()[0].rect();\n\t\t\t\tconst oldRect = oldColumn.cells()[0].rect();\n\t\t\t\tconst startRect = startColumn.cells()[0].rect();\n\t\t\t\tconst endRect = endColumn.cells()[0].rect();\n\t\t\t\tlet offset = 0;\n\n\t\t\t\tif (from < to) {\n\t\t\t\t\toffset = (Math.abs(from - to) > 1) ? newRect.left - oldRect.right + endRect.width : endRect.width;\n\t\t\t\t} else {\n\t\t\t\t\toffset = (Math.abs(from - to) > 1) ? newRect.left - oldRect.left : -1 * startRect.width;\n\t\t\t\t}\n\n\t\t\t\tFastdom.mutate(() => {\n\t\t\t\t\tconst animatedCells = [];\n\t\t\t\t\toldColumn.addClass(`${GRID_PREFIX}-live-column`);\n\t\t\t\t\toldColumn.cells().forEach(cell => animatedCells.push(\n\t\t\t\t\t\tnew Promise(columnAnimationEnd => {\n\t\t\t\t\t\t\tconst animation = cell.model().element.animate([\n\t\t\t\t\t\t\t\t{ transform: `translateX(0px)` },\n\t\t\t\t\t\t\t\t{ transform: `translateX(${offset}px)` }],\n\t\t\t\t\t\t\t\t{ duration: this.duration }\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tanimation.onfinish = () => Fastdom.mutate(() => {\n\t\t\t\t\t\t\t\toldColumn.removeClass(`${GRID_PREFIX}-live-column`);\n\t\t\t\t\t\t\t\toldColumn.removeClass(`${GRID_PREFIX}-drag`);\n\t\t\t\t\t\t\t\tcolumnAnimationEnd(null);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})));\n\n\t\t\t\t\tPromise.all(animatedCells).finally(() => animationEnd(null));\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LiveColumnComponent } from './live-column.component';\n\n@NgModule({\n\tdeclarations: [\n\t\tLiveColumnComponent\n\t],\n\texports: [\n\t\tLiveColumnComponent\n\t],\n\timports: [\n\t\tCommonModule\n\t]\n})\nexport class LiveColumnModule {\n}\n","import { ChangeDetectionStrategy, Component, Input, NgZone, OnInit } from '@angular/core';\nimport { Fastdom, GRID_PREFIX } from '@qgrid/core';\nimport { GridPlugin } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-live-rows',\n\ttemplate: '',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class LiveRowComponent implements OnInit {\n\t@Input('duration') duration = 400;\n\n\tconstructor(private plugin: GridPlugin, private zone: NgZone) { }\n\n\tngOnInit() {\n\t\tconst { model } = this.plugin;\n\t\tlet currentRows: any[];\n\n\t\tmodel.animation({\n\t\t\tapply: model.animation().apply.concat((memo, context, complete) => {\n\t\t\t\tconst previousRows = currentRows;\n\t\t\t\tcurrentRows = memo.rows ? memo.rows : currentRows;\n\n\t\t\t\tif (!previousRows || !currentRows) {\n\t\t\t\t\tcomplete(0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst { rowId } = model.data();\n\t\t\t\tconst animations = [];\n\n\t\t\t\tfor (let rowIndex = 0, length = previousRows.length; rowIndex < length; rowIndex++) {\n\t\t\t\t\tconst newRowIndex = currentRows.findIndex((row, i) => rowId(i, row) === rowId(rowIndex, previousRows[rowIndex]));\n\t\t\t\t\tif (newRowIndex < 0) {\n\t\t\t\t\t\tanimations.push(this.fadeOutRow(rowIndex));\n\t\t\t\t\t} else if (newRowIndex !== rowIndex) {\n\t\t\t\t\t\tanimations.push(this.moveRow(rowIndex, newRowIndex));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.zone.runOutsideAngular(() => {\n\t\t\t\t\tPromise.all(animations)\n\t\t\t\t\t\t.then(complete);\n\t\t\t\t});\n\t\t\t})\n\t\t});\n\t}\n\n\tprivate fadeOutRow(index: number) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst tr = this.plugin.table.body.row(index);\n\t\t\tif (!tr.model()) {\n\t\t\t\treject(`Can't find model for row ${index}`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tFastdom.mutate(() => {\n\t\t\t\tconst animation = tr.model().tr.element.animate([\n\t\t\t\t\t{ opacity: `1` },\n\t\t\t\t\t{ opacity: `0` }],\n\t\t\t\t\t{ duration: this.duration }\n\t\t\t\t);\n\n\t\t\t\tanimation.onfinish = () => resolve(null);\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate moveRow(from: number, to: number) {\n\t\tconst { table } = this.plugin;\n\n\t\treturn new Promise((animationEnd, animationError) => {\n\t\t\tconst oldTr = table.body.row(from);\n\t\t\tconst newTr = table.body.row(to);\n\n\t\t\tif (!oldTr.model() || !newTr.model()) {\n\t\t\t\tconst errorIndex = oldTr.model() ? to : from;\n\t\t\t\tanimationError(`Can't find model for row ${errorIndex}`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tFastdom.measure(() => {\n\t\t\t\tconst offset = newTr.rect().top - oldTr.rect().top;\n\n\t\t\t\tFastdom.mutate(() => {\n\t\t\t\t\tconst animatedRows = [];\n\t\t\t\t\toldTr.addClass(`${GRID_PREFIX}-live-row`);\n\t\t\t\t\t(oldTr.getElement() as any)\n\t\t\t\t\t\t.elements\n\t\t\t\t\t\t.forEach(rowElement =>\n\t\t\t\t\t\t\tanimatedRows.push(\n\t\t\t\t\t\t\t\tnew Promise(animationRowEnd => {\n\t\t\t\t\t\t\t\t\tconst animation = rowElement.animate([\n\t\t\t\t\t\t\t\t\t\t{ transform: `translateY(0px)` },\n\t\t\t\t\t\t\t\t\t\t{ transform: `translateY(${offset}px)` }],\n\t\t\t\t\t\t\t\t\t\t{ duration: this.duration }\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\tanimation.onfinish = () => Fastdom.mutate(() => {\n\t\t\t\t\t\t\t\t\t\toldTr.removeClass(`${GRID_PREFIX}-live-row`);\n\t\t\t\t\t\t\t\t\t\toldTr.removeClass(`${GRID_PREFIX}-drag`);\n\t\t\t\t\t\t\t\t\t\tanimationRowEnd(null);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t);\n\n\t\t\t\t\tPromise.all(animatedRows).finally(() => animationEnd(null));\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LiveRowComponent } from './live-row.component';\n\n@NgModule({\n\tdeclarations: [\n\t\tLiveRowComponent,\n\t],\n\texports: [\n\t\tLiveRowComponent\n\t],\n\timports: [\n\t\tCommonModule\n\t]\n})\nexport class LiveRowModule {\n}\n","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport { Shortcut } from '@qgrid/core';\nimport { GridPlugin } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-pager-target',\n\ttemplateUrl: './pager-target.component.html',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PagerTargetComponent implements OnInit {\n\tprivate value: number;\n\n\tcontext: { $implicit: PagerTargetComponent } = {\n\t\t$implicit: this\n\t};\n\n\tconstructor(private plugin: GridPlugin) {\n\t}\n\n\tngOnInit() {\n\t\tthis.value = this.current;\n\t}\n\n\tkeyDown(e: KeyboardEvent) {\n\t\tlet code = Shortcut.translate(e);\n\t\tif (code.startsWith('numpad')) {\n\t\t\tcode = code.slice(6);\n\t\t}\n\n\t\tconst value = this.value || 0;\n\n\t\tswitch (code) {\n\t\t\tcase 'enter': {\n\t\t\t\tif (value) {\n\t\t\t\t\tconst current = value - 1;\n\t\t\t\t\tif (this.plugin.model.pagination().current !== current) {\n\t\t\t\t\t\t// tslint:disable-next-line:no-unused-expression\n\t\t\t\t\t\t// new FocusAfterRender(this.plugin);\n\t\t\t\t\t\tthis.plugin.model.pagination({\n\t\t\t\t\t\t\tcurrent\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tsource: 'pager-target.component'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'up': {\n\t\t\t\tif (value < this.total) {\n\t\t\t\t\tthis.value = value + 1;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'down': {\n\t\t\t\tif (value > 1) {\n\t\t\t\t\tthis.value = value - 1;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'left':\n\t\t\tcase 'right':\n\t\t\tcase 'backspace': {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tconst digit = Number.parseInt(code, 10);\n\t\t\t\tconst page = Number.parseInt('' + value + digit, 10);\n\t\t\t\tconst min = 1;\n\t\t\t\tconst max = this.total;\n\t\t\t\tconst isValid = page >= min && page <= max && !isNaN(digit);\n\n\t\t\t\tif (!isValid) {\n\t\t\t\t\tpage > this.total ? this.value = max : this.value = min;\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget current() {\n\t\treturn this.plugin.model.pagination().current + 1;\n\t}\n\n\tget total() {\n\t\tconst { count, size } = this.plugin.model.pagination();\n\t\treturn size === 0 ? 0 : Math.max(1, Math.ceil(count / size));\n\t}\n}\n","<ng-container key=\"plugin-pager-target.tpl.html\" [context]=\"context\"></ng-container>\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnChanges, OnInit } from '@angular/core';\nimport { PaginationState, PaginationStateMode } from '@qgrid/core';\nimport { GridPlugin, StateAccessor } from '@qgrid/ngx';\nimport { PagerPlugin } from '@qgrid/plugins';\n\n@Component({\n\tselector: 'q-grid-pager',\n\ttemplateUrl: './pager.component.html',\n\tproviders: [GridPlugin, StateAccessor],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PagerComponent implements OnInit, OnChanges {\n\tprivate pagerState = this.stateAccessor.setter(PaginationState);\n\n\tcontext: { $implicit: PagerPlugin };\n\n\t@Input('size') set size(size: number) { this.pagerState({ size }); }\n\t@Input('sizeList') set sizeList(sizeList: number[]) { this.pagerState({ sizeList }); }\n\t@Input('mode') set mode(mode: PaginationStateMode) { this.pagerState({ mode }); }\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate cd: ChangeDetectorRef,\n\t\tprivate stateAccessor: StateAccessor,\n\t) {\n\t}\n\n\tngOnChanges() {\n\t\tconst { model } = this.plugin;\n\t\tthis.stateAccessor.write(model);\n\t}\n\n\tngOnInit() {\n\t\tconst { model, observe } = this.plugin;\n\n\t\tconst pager = new PagerPlugin(this.plugin);\n\t\tthis.context = { $implicit: pager };\n\n\t\tobserve(model.paginationChanged)\n\t\t\t.subscribe(() => this.cd.detectChanges());\n\t}\n}\n","<ng-container key=\"plugin-pager.tpl.html\" [context]=\"context\"></ng-container>\n","import { NgModule } from '@angular/core';\nimport { PagerComponent } from './pager.component';\nimport { PagerTargetComponent } from './pager-target.component';\nimport { TemplateModule } from '@qgrid/ngx';\n\n@NgModule({\n\tdeclarations: [\n\t\tPagerComponent,\n\t\tPagerTargetComponent\n\t],\n\texports: [\n\t\tPagerComponent,\n\t\tPagerTargetComponent\n\t],\n\timports: [\n\t\tTemplateModule\n\t]\n})\nexport class PagerModule {\n}\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\nimport { isUndefined } from '@qgrid/core';\nimport { GridError, GridEventArg, GridPlugin, TemplateHostService } from '@qgrid/ngx';\n\ntype PaneSide = 'left' | 'right';\nconst DEFAULT_SIDE: PaneSide = 'right';\n\n@Component({\n\tselector: 'q-grid-pane',\n\ttemplateUrl: './pane.component.html',\n\tproviders: [\n\t\tGridPlugin,\n\t\tTemplateHostService\n\t],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PaneComponent implements OnInit {\n\t@Input() trigger: string;\n\n\tcontext: {\n\t\t[side in PaneSide]?: {\n\t\t\t$implicit: PaneComponent,\n\t\t\tvalue: any;\n\t\t}\n\t};\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate cd: ChangeDetectorRef,\n\t\ttemplateHost: TemplateHostService\n\t) {\n\t\ttemplateHost.key = source => `plugin-pane-${source}.tpl.html`;\n\n\t\tthis.context = {\n\t\t\tleft: {\n\t\t\t\t$implicit: this,\n\t\t\t\tvalue: null\n\t\t\t},\n\t\t\tright: {\n\t\t\t\t$implicit: this,\n\t\t\t\tvalue: null\n\t\t\t}\n\t\t};\n\t}\n\n\tngOnInit() {\n\t\tconst { model, observeReply } = this.plugin;\n\t\tconst scope = this.parse();\n\t\tif (scope) {\n\t\t\tconst [state, prop] = scope;\n\t\t\tobserveReply(model[`${state}Changed`])\n\t\t\t\t.subscribe((e: GridEventArg<any>) => {\n\t\t\t\t\tif (!prop || e.hasChanges(prop)) {\n\t\t\t\t\t\tthis.open(DEFAULT_SIDE);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t}\n\n\topen(side: PaneSide = DEFAULT_SIDE, value?: any) {\n\t\tconst { table, model } = this.plugin;\n\n\t\tconst scope = this.parse();\n\t\tif (scope && isUndefined(value)) {\n\t\t\tconst [state, prop] = scope;\n\t\t\tvalue = model[state]()[prop];\n\t\t}\n\n\t\tthis.context[side] = { $implicit: this, value };\n\n\t\tconst paneLayer = `pane-${side}`;\n\t\tif (table.view.hasLayer(paneLayer)) {\n\t\t\ttable.view.removeLayer(paneLayer);\n\t\t}\n\t\ttable.view.addLayer(paneLayer);\n\n\t\tthis.invalidate();\n\t}\n\n\tclose(side: PaneSide = DEFAULT_SIDE) {\n\t\tconst { table } = this.plugin;\n\n\t\ttable.view.removeLayer(`pane-${side}`);\n\n\t\tthis.context[side] = null;\n\n\t\tthis.invalidate();\n\t}\n\n\tprivate invalidate(): void {\n\t\tthis.cd.markForCheck();\n\t\tthis.cd.detectChanges();\n\t}\n\n\tprivate parse() {\n\t\tconst { model } = this.plugin;\n\t\tconst parts = this.trigger ? this.trigger.split('.') : [];\n\t\tif (parts.length > 0) {\n\t\t\tconst [state, prop] = parts;\n\t\t\tif (!model[state]) {\n\t\t\t\tthrow new GridError('pane.component', `Trigger ${state} not found`);\n\t\t\t}\n\t\t\treturn [state, prop];\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","<q-grid-layer>\n    <ng-template for=\"pane-right\">\n        <div class=\"q-grid-pane q-grid-pane-right\">\n            <ng-container key=\"plugin-pane-right.tpl.html\"\n                          [context]=\"context.right\">\n            </ng-container>\n        </div>\n    </ng-template>\n    <ng-template for=\"pane-left\">\n        <div class=\"q-grid-pane q-grid-pane-left\">\n            <ng-container key=\"plugin-pane-left.tpl.html\"\n                          [context]=\"context.left\">\n            </ng-container>\n        </div>\n    </ng-template>\n</q-grid-layer>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TemplateModule, LayerModule } from '@qgrid/ngx';\nimport { PaneComponent } from './pane.component';\n\n@NgModule({\n\tdeclarations: [\n\t\tPaneComponent,\n\t],\n\texports: [\n\t\tPaneComponent,\n\t],\n\timports: [\n\t\tCommonModule,\n\t\tTemplateModule,\n\t\tLayerModule\n\t]\n})\nexport class PaneModule { }\n","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport { GridModelBuilder, GridPlugin } from '@qgrid/ngx';\nimport { PersistencePlugin } from '@qgrid/plugins';\n\n@Component({\n\tselector: 'q-grid-persistence-panel',\n\ttemplateUrl: './persistence-panel.component.html',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PersistencePanelComponent implements OnInit {\n\tcontext: {\n\t\t$implicit: PersistencePlugin\n\t};\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate modelBuilder: GridModelBuilder\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst persistence = new PersistencePlugin(this.plugin, () => this.modelBuilder.build());\n\t\tthis.context = { $implicit: persistence };\n\t}\n}\n","<ng-container key=\"plugin-persistence-panel.tpl.html\" [context]=\"context\"></ng-container>\n","import { ChangeDetectionStrategy, Component, Input, OnChanges, OnInit } from '@angular/core';\nimport { Action, Command, Composite, filter, PersistenceSchedule, PersistenceService, PersistenceState, PersistenceStorage, takeOnce } from '@qgrid/core';\nimport { GridEvent, GridModelBuilder, GridPlugin, StateAccessor } from '@qgrid/ngx';\nimport { PersistenceItem } from '@qgrid/plugins';\n\n@Component({\n\tselector: 'q-grid-persistence',\n\ttemplate: '',\n\tproviders: [GridPlugin, StateAccessor],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PersistenceComponent implements OnInit, OnChanges {\n\tprivate persistenceState = this.stateAccessor.setter(PersistenceState);\n\tprivate service: PersistenceService | null = null;\n\n\t@Input('schedule') set schedule(schedule: PersistenceSchedule) { this.persistenceState({ schedule }); }\n\t@Input('storage') set storage(storage: PersistenceStorage) { this.persistenceState({ storage }); }\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate modelBuilder: GridModelBuilder,\n\t\tprivate stateAccessor: StateAccessor,\n\t) {\n\t}\n\n\tngOnChanges() {\n\t\tconst { model } = this.plugin;\n\t\tthis.stateAccessor.write(model);\n\t}\n\n\tngOnInit() {\n\t\tconst { model, disposable, observe, observeReply, table } = this.plugin;\n\n\t\tconst id = `q-grid:${model.grid().id}:persistence-list`;\n\t\tmodel.persistence({ id });\n\n\t\tthis.service = new PersistenceService(model, () => this.modelBuilder.build());\n\n\t\tobserveReply(model.dataChanged)\n\t\t\t.pipe(\n\t\t\t\tfilter(e => {\n\t\t\t\t\tif (e.hasChanges('rows') || e.hasChanges('columns')) {\n\t\t\t\t\t\tconst {rows, columns} = e.state;\n\t\t\t\t\t\tif (rows.length > 0 && columns.length > 0) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}),\n\t\t\t\ttakeOnce()\n\t\t\t)\n\t\t\t.subscribe(() =>\n\t\t\t\tmodel.persistence()\n\t\t\t\t\t.storage\n\t\t\t\t\t.getItem(id)\n\t\t\t\t\t.then((items: PersistenceItem[]) => {\n\t\t\t\t\t\tif (!items || items.length === 0) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst defaultItem = items.find(item => item.isDefault);\n\t\t\t\t\t\tif (defaultItem) {\n\t\t\t\t\t\t\tthis.service.load(defaultItem.model);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t);\n\n\t\tswitch (model.persistence().schedule) {\n\t\t\tcase 'onDemand': {\n\t\t\t\tconst historyAction =\n\t\t\t\t\tnew Action(\n\t\t\t\t\t\tnew Command(),\n\t\t\t\t\t\t'Save/Load',\n\t\t\t\t\t\t'history'\n\t\t\t\t\t);\n\n\t\t\t\thistoryAction.templateUrl = 'plugin-persistence.tpl.html';\n\n\t\t\t\tconst items = Composite.list([model.action().items, [historyAction]]);\n\t\t\t\tmodel.action({ items }, { source: 'persistence.component' });\n\n\t\t\t\tdisposable.add(() => {\n\t\t\t\t\tconst notPersistenceActions = model.action().items.filter(x => x !== historyAction);\n\t\t\t\t\tmodel.action({ items: notPersistenceActions }, { source: 'persistence.component' });\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'onStateChange': {\n\t\t\t\tconst { settings, storage, defaultGroup } = model.persistence();\n\t\t\t\tfor (const state of Object.keys(settings)) {\n\t\t\t\t\tfor (const key of settings[state]) {\n\t\t\t\t\t\tobserve(model[state + 'Changed'] as GridEvent<any>)\n\t\t\t\t\t\t\t.pipe(\n\t\t\t\t\t\t\t\t// TODO: get rid of e.tag.source check\n\t\t\t\t\t\t\t\tfilter(e => e.hasChanges(key) && e.tag.source !== 'persistence.service')\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.subscribe(e => {\n\t\t\t\t\t\t\t\tconst currentModel = this.service.save();\n\t\t\t\t\t\t\t\tconst item = {\n\t\t\t\t\t\t\t\t\ttitle: `auto-save: ${state}.${key} changed`,\n\t\t\t\t\t\t\t\t\tmodified: Date.now(),\n\t\t\t\t\t\t\t\t\tgroup: defaultGroup,\n\t\t\t\t\t\t\t\t\tmodel: currentModel,\n\t\t\t\t\t\t\t\t\tisDefault: true,\n\t\t\t\t\t\t\t\t\tcanEdit: false\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tstorage.setItem(id, [item]);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { PersistenceComponent } from './persistence.component';\nimport { PersistencePanelComponent } from './persistence-panel.component';\nimport { TemplateModule } from '@qgrid/ngx';\n\n@NgModule({\n\timports: [\n\t\tFormsModule,\n\t\tTemplateModule\n\t],\n\texports: [\n\t\tPersistenceComponent,\n\t\tPersistencePanelComponent\n\t],\n\tdeclarations: [\n\t\tPersistenceComponent,\n\t\tPersistencePanelComponent\n\t],\n\tentryComponents: [\n\t\tPersistencePanelComponent\n\t]\n})\nexport class PersistenceModule {\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { isArray, isUndefined, Log } from '@qgrid/core';\n\n@Pipe({\n\tname: 'qGridArray'\n})\nexport class ArrayPipe implements PipeTransform {\n\ttransform(value: any) {\n\t\tif (isArray(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\tLog.warn('ArrayPipe', `${value} is not of array type`);\n\t\treturn isUndefined(value) || value === null ? [] : [value];\n\t}\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { parseFactory } from '@qgrid/core';\n\n@Pipe({\n\tname: 'qGridConvert'\n})\nexport class ConvertPipe implements PipeTransform {\n\tconstructor() { }\n\n\ttransform(value: any, type: string) {\n\t\tconst parse = parseFactory(type);\n\t\tconst result = parse(value);\n\t\treturn result === null ? value : result;\n\t}\n}\n","import { CurrencyPipe as NgCurrencyPipe } from '@angular/common';\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { Log } from '@qgrid/core';\n\n@Pipe({\n\tname: 'qGridCurrency'\n})\nexport class CurrencyPipe implements PipeTransform {\n\tconstructor(private pipe: NgCurrencyPipe) { }\n\n\ttransform(value: any, currencyCode?: string, display?: boolean, digitsInfo?: any, locale?: any) {\n\t\ttry {\n\t\t\treturn this.pipe.transform(value, currencyCode, display, digitsInfo, locale);\n\t\t} catch (ex) {\n\t\t\tLog.warn('DatePipe', ex.message);\n\t\t\treturn value;\n\t\t}\n\t}\n}\n","import { DatePipe as NgDatePipe } from '@angular/common';\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { Log } from '@qgrid/core';\n\n@Pipe({\n\tname: 'qGridDate'\n})\nexport class DatePipe implements PipeTransform {\n\tconstructor(private pipe: NgDatePipe) { }\n\n\ttransform(value: any, format?: any, timezone?: any, locale?: any) {\n\t\ttry {\n\t\t\t// The value expression: a Date object, a number (milliseconds since UTC epoch), or an ISO string\n\t\t\treturn this.pipe.transform(value, format, timezone, locale);\n\t\t} catch (ex) {\n\t\t\tLog.warn('DatePipe', ex.message);\n\t\t\treturn value;\n\t\t}\n\t}\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { filterNode, Node, predicateFactory } from '@qgrid/core';\n\n@Pipe({\n\tname: 'qGridFilter'\n})\nexport class FilterPipe implements PipeTransform {\n\ttransform(items: any[] | Node, { search = null, type = 'plain' }) {\n\t\tif (search || search === 0 || search === false) {\n\t\t\tconst predicate = predicateFactory(search);\n\t\t\tswitch (type) {\n\t\t\t\tcase 'node': {\n\t\t\t\t\tconst root = items as Node;\n\t\t\t\t\treturn filterNode(root, predicate);\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\treturn (items as any[]).filter(predicate);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn items;\n\t}\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { escapeRegexp, GRID_PREFIX, htmlEncode } from '@qgrid/core';\n\n\n@Pipe({\n\tname: 'qGridHighlight'\n})\nexport class HighlightPipe implements PipeTransform {\n\ttransform(text: string | number, search: string | number): string {\n\t\tif ((text || text === 0) && (search || search === 0)) {\n\t\t\ttext = text.toString();\n\t\t\tsearch = search.toString();\n\n\t\t\tconst contains = new RegExp(escapeRegexp(search), 'gi');\n\t\t\tif (contains.test(text)) {\n\t\t\t\treturn text.replace(contains,\n\t\t\t\t\ts => `<span class=\"${GRID_PREFIX}-highlight-part\">${htmlEncode(s)}</span>`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst contained = new RegExp(escapeRegexp(text), 'gi');\n\t\t\tif (contained.test(search)) {\n\t\t\t\treturn `<span class=\"${GRID_PREFIX}-highlight-part\">${htmlEncode(text)}</span>`;\n\t\t\t}\n\t\t}\n\n\t\treturn htmlEncode(text as string);\n\t}\n}\n","import { PipeTransform, Pipe } from '@angular/core';\n\n@Pipe({\n\tname: 'qGridItemLabel'\n})\nexport class ItemLabelPipe implements PipeTransform {\n\tconstructor() { }\n\n\ttransform(value: any, itemLabel: (x: any) => string) {\n\t\tif (itemLabel) {\n\t\t\treturn itemLabel(value);\n\t\t}\n\n\t\treturn value;\n\t}\n}\n","import { DecimalPipe } from '@angular/common';\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { Log } from '@qgrid/core';\n\n@Pipe({\n\tname: 'qGridNumber'\n})\nexport class NumberPipe implements PipeTransform {\n\tconstructor(private pipe: DecimalPipe) { }\n\n\ttransform(value: any, digitsInfo?: any, locale?: any) {\n\t\ttry {\n\t\t\treturn this.pipe.transform(value, digitsInfo, locale);\n\t\t} catch (ex) {\n\t\t\tLog.warn('NumberPipe', ex.message);\n\t\t\treturn value;\n\t\t}\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { HighlightPipe } from './highlight.pipe';\nimport { FilterPipe } from './filter.pipe';\nimport { TimePipe } from './time.pipe';\nimport { NumberPipe } from './number.pipe';\nimport { DatePipe } from './date.pipe';\nimport { TextPipe } from './text.pipe';\nimport { CurrencyPipe } from './currency.pipe';\nimport { ArrayPipe } from './array.pipe';\nimport { ItemLabelPipe } from './item-label.pipe';\nimport { ConvertPipe } from './convert.pipe';\n\n@NgModule({\n\tdeclarations: [\n\t\tArrayPipe,\n\t\tConvertPipe,\n\t\tCurrencyPipe,\n\t\tDatePipe,\n\t\tFilterPipe,\n\t\tHighlightPipe,\n\t\tItemLabelPipe,\n\t\tNumberPipe,\n\t\tTextPipe,\n\t\tTimePipe,\n\t],\n\texports: [\n\t\tArrayPipe,\n\t\tConvertPipe,\n\t\tCurrencyPipe,\n\t\tDatePipe,\n\t\tFilterPipe,\n\t\tHighlightPipe,\n\t\tItemLabelPipe,\n\t\tNumberPipe,\n\t\tTextPipe,\n\t\tTimePipe,\n\t]\n})\nexport class PipeModule {\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { GridError } from '@qgrid/ngx';\n\n@Pipe({\n\tname: 'qGridText'\n})\nexport class TextPipe implements PipeTransform {\n\ttransform(item: string, format: 'fromCamelCase'): string {\n\t\tswitch (format) {\n\t\t\tcase 'fromCamelCase': {\n\t\t\t\treturn item.replace(/([a-z])([A-Z])/g, '$1 $2').toLowerCase();\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tthrow new GridError('text.pipe', `Unknown input format type '${format}'`);\n\t\t\t}\n\t\t}\n\t}\n}\n","import { DatePipe } from '@angular/common';\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { Log } from '@qgrid/core';\n\n@Pipe({\n\tname: 'qGridTime'\n})\nexport class TimePipe implements PipeTransform {\n\tconstructor(private pipe: DatePipe) { }\n\n\ttransform(value: any, format?: any, timezone?: any, locale?: any) {\n\t\ttry {\n\t\t\treturn this.pipe.transform(value, format, timezone, locale);\n\t\t} catch (ex) {\n\t\t\tLog.warn('TimePipe', ex.message);\n\t\t\treturn value;\n\t\t}\n\t}\n}\n","import { Component, ChangeDetectionStrategy, ChangeDetectorRef, OnInit } from '@angular/core';\nimport { GridPlugin } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-progress',\n\ttemplateUrl: './progress.component.html',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProgressComponent implements OnInit {\n\tcontext: { $implicit: ProgressComponent } = {\n\t\t$implicit: this\n\t};\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate cd: ChangeDetectorRef\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst { model, observeReply } = this.plugin;\n\n\t\tobserveReply(model.progressChanged)\n\t\t\t.subscribe(() => this.cd.detectChanges());\n\t}\n\n\tget isBusy() {\n\t\tconst { isBusy, queue } = this.plugin.model.progress();\n\t\treturn isBusy || queue.length;\n\t}\n}\n","<ng-container key=\"plugin-progress.tpl.html\" [context]=\"context\"></ng-container>\n","import { NgModule } from '@angular/core';\nimport { ProgressComponent } from './progress.component';\nimport { TemplateModule } from '@qgrid/ngx';\n\n@NgModule({\n\tdeclarations: [\n\t\tProgressComponent\n\t],\n\texports: [\n\t\tProgressComponent\n\t],\n\timports: [\n\t\tTemplateModule\n\t]\n})\nexport class ProgressModule {\n}\n","import { Component, EventEmitter, OnInit, Output } from '@angular/core';\nimport { clone, Command } from '@qgrid/core';\nimport { GridPlugin } from '@qgrid/ngx';\nimport { EbNodeService } from '../expression-builder/eb-node.service';\nimport { Node } from '../expression-builder/model/node';\nimport { INodeSchema } from '../expression-builder/model/node.schema';\nimport { SerializationService } from '../expression-builder/serialization.service';\nimport { TraverseService } from '../expression-builder/traverse.service';\nimport { FocusAfterRender } from '../focus/focus.service';\nimport { QueryBuilderModel } from './query-builder.model';\nimport { QueryBuilderService } from './query-builder.service';\nimport * as converter from './schema/converter';\nimport { WhereSchema } from './schema/where.schema';\n\n@Component({\n\tselector: 'q-grid-query-builder-panel',\n\ttemplateUrl: './query-builder-panel.component.html',\n\tproviders: [FocusAfterRender, GridPlugin],\n\t// changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class QueryBuilderPanelComponent implements OnInit {\n\tnode: Node;\n\t@Output() close = new EventEmitter<any>();\n\tqueryService: QueryBuilderService;\n\n\tcontext: { $implicit: QueryBuilderPanelComponent } = {\n\t\t$implicit: this\n\t};\n\n\tprivate traverse = new TraverseService();\n\n\taddGroup = new Command({\n\t\texecute: () => {\n\t\t\tconst current = this.nodeService.current;\n\t\t\tconst parent = this.findLogicalNode(current);\n\t\t\tconst group = parent.clone();\n\t\t\tparent.addChildAfter(group, current.id === '#condition' && current);\n\t\t\tif (current.id === '#condition') {\n\t\t\t\tthis.nodeService.current = group;\n\t\t\t}\n\t\t},\n\t\tcanExecute: () => !!this.findLogicalNode(this.nodeService.current)\n\t});\n\n\taddRule = new Command({\n\t\texecute: () => {\n\t\t\tconst current = this.nodeService.current;\n\t\t\tconst parent = this.findLogicalNode(current);\n\t\t\tconst rule = this.plan.materialize('#condition');\n\t\t\tparent.addChildAfter(rule, current.id === '#condition' && current);\n\t\t\tif (current.id === '#condition') {\n\t\t\t\tthis.nodeService.current = rule;\n\t\t\t}\n\t\t},\n\t\tcanExecute: () => !!this.findLogicalNode(this.nodeService.current)\n\t});\n\n\tremove = new Command({\n\t\texecute: () => {\n\t\t\tconst current = this.nodeService.current;\n\t\t\tif (current.id === '#logical' && current.level === 1) {\n\t\t\t\tcurrent.clear();\n\t\t\t} else {\n\t\t\t\tconst previous = this.traverse.findUpSibling(current);\n\t\t\t\tthis.nodeService.current = previous;\n\t\t\t\tcurrent.remove();\n\t\t\t}\n\t\t},\n\t\tcanExecute: () => {\n\t\t\tconst current = this.nodeService.current;\n\t\t\treturn current && (current.id === '#condition' || (current.level > 1 || current.children.length > 0));\n\t\t}\n\t});\n\n\tsubmit = new Command({\n\t\tsource: 'query-builder.component',\n\t\texecute: () => {\n\t\t\tconst serializer = new SerializationService();\n\t\t\tconst node = serializer.serialize(this.node);\n\n\t\t\tconst by = clone(this.plugin.model.filter().by);\n\t\t\tby.$expression = converter.visit(node);\n\n\t\t\tconst { model } = this.plugin;\n\t\t\tmodel.filter({ by });\n\t\t\tconst qb = model.resolve(QueryBuilderModel);\n\t\t\tqb.state({ node: by.$expression ? node : null });\n\n\t\t\tthis.close.emit();\n\t\t},\n\t\tcanExecute: () => {\n\t\t\tconst depth = this.traverse.depth(this.node);\n\t\t\treturn depth((memo, expression, line, node) =>\n\t\t\t\tnode.attr('placeholder')\n\t\t\t\t\t? memo\n\t\t\t\t\t: memo && expression.isValid()\n\t\t\t\t, true);\n\t\t}\n\t});\n\n\tcancel = new Command({\n\t\tsource: 'query-builder.component',\n\t\texecute: () => {\n\t\t\tthis.close.emit();\n\t\t}\n\t});\n\n\treset = new Command({\n\t\tsource: 'query-builder.component',\n\t\texecute: () => {\n\t\t\tconst schema = new WhereSchema(this.queryService);\n\t\t\tconst plan = schema.factory();\n\t\t\tthis.node = plan.apply();\n\n\t\t\tconst root = this.node.children[0];\n\t\t\troot.clear();\n\n\t\t\tthis.nodeService.current = this.node.children[0];\n\n\t\t}\n\t});\n\n\tprivate plan: INodeSchema;\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate nodeService: EbNodeService,\n\t\tfocusAfterRender: FocusAfterRender\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tthis.queryService = new QueryBuilderService(this.plugin.model);\n\n\t\tconst schema = new WhereSchema(this.queryService);\n\t\tthis.plan = schema.factory() as any;\n\t\tthis.node = this.plan.apply();\n\n\t\tconst serializer = new SerializationService();\n\t\tconst qb = this.plugin.model.resolve(QueryBuilderModel);\n\t\tconst { node } = qb.state();\n\t\tif (node) {\n\t\t\tthis.node = serializer.deserialize(this.plan, node);\n\t\t}\n\n\t\tthis.nodeService.current = this.node.children[0];\n\t}\n\n\tprivate findLogicalNode(node: Node) {\n\t\treturn this.traverse.findUp(node, n => n.id === '#logical');\n\t}\n}\n","<ng-container key=\"plugin-query-builder-panel.tpl.html\"\n              [context]=\"context\">\n</ng-container>","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport { Action, Command, Composite } from '@qgrid/core';\nimport { GridPlugin } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-query-builder',\n\ttemplateUrl: './query-builder.component.html',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class QueryBuilderComponent implements OnInit {\n\tcontext: { $implicit: QueryBuilderComponent } = {\n\t\t$implicit: this\n\t};\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst { model, disposable } = this.plugin;\n\t\tconst action =\n\t\t\tnew Action(\n\t\t\t\tnew Command(),\n\t\t\t\t'Query Builder',\n\t\t\t\t'filter'\n\t\t\t);\n\n\t\taction.templateUrl = 'plugin-query-builder.tpl.html';\n\n\t\tconst items = Composite.list([model.action().items, [action]]);\n\t\tmodel.action({\n\t\t\titems\n\t\t}, {\n\t\t\tsource: 'query-builder.component'\n\t\t});\n\n\t\tdisposable.add(() => {\n\t\t\tmodel.action({\n\t\t\t\titems: model\n\t\t\t\t\t.action()\n\t\t\t\t\t.items\n\t\t\t\t\t.filter(x => x !== action)\n\t\t\t}, {\n\t\t\t\tsource: 'query-builder.component'\n\t\t\t});\n\t\t});\n\t}\n}\n","<ng-container key=\"plugin-query-builder.tpl.html\"\n              [context]=\"context\">\n</ng-container>","import { ISerializationNode } from '../expression-builder/serialization.service';\n\nexport class QueryBuilderModel {\n\tnode: ISerializationNode = null;\n}\n","import { NgModule } from '@angular/core';\nimport { TemplateModule, GridModelBuilder } from '@qgrid/ngx';\nimport { QueryBuilderComponent } from './query-builder.component';\nimport { QueryBuilderPanelComponent } from './query-builder-panel.component';\nimport { QueryBuilderPipe } from './query-builder.pipe';\nimport { QueryBuilderModel } from './query-builder.model';\n\n@NgModule({\n\timports: [\n\t\tTemplateModule\n\t],\n\texports: [\n\t\tQueryBuilderComponent,\n\t\tQueryBuilderPanelComponent,\n\t\tQueryBuilderPipe\n\t],\n\tdeclarations: [\n\t\tQueryBuilderComponent,\n\t\tQueryBuilderPanelComponent,\n\t\tQueryBuilderPipe\n\t]\n})\nexport class QueryBuilderModule {\n\tconstructor(modelBuilder: GridModelBuilder) {\n\t\tmodelBuilder\n\t\t\t.register('queryBuilder', QueryBuilderModel);\n\t}\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { MarkupVisitor } from '@qgrid/core';\nimport { Node } from '../expression-builder/model/node';\nimport { SerializationService } from '../expression-builder/serialization.service';\nimport { QueryBuilderService } from './query-builder.service';\nimport * as converter from './schema/converter';\nimport { Validator } from './schema/validator';\n\n@Pipe({\n\tname: 'qGridQueryBuilderMarkup',\n\tpure: false\n})\nexport class QueryBuilderPipe implements PipeTransform {\n\tvisitor: MarkupVisitor;\n\n\ttransform(value: any, service: QueryBuilderService): any {\n\t\tconst node = value as Node;\n\t\tif (node) {\n\t\t\tif (!this.visitor) {\n\t\t\t\tconst validator = new Validator(service);\n\t\t\t\tconst columnMap = service.columnMap();\n\t\t\t\tthis.visitor =\n\t\t\t\t\tnew MarkupVisitor(\n\t\t\t\t\t\tk => columnMap[k].title,\n\t\t\t\t\t\tk => columnMap[k].type,\n\t\t\t\t\t\t(k, v) => validator.for(k)(v).length === 0\n\t\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst serializer = new SerializationService();\n\t\t\tconst filter = serializer.serialize(node);\n\t\t\tconst expression = converter.visit(filter);\n\t\t\tif (expression) {\n\t\t\t\treturn this.visitor.visit(expression);\n\t\t\t}\n\t\t}\n\n\t\treturn 'Please, select a query';\n\t}\n}\n","import * as columnService from '@qgrid/core';\nimport { getValueFactory, isUndefined, uniq } from '@qgrid/core';\nimport { GridError, GridModel } from '@qgrid/ngx';\nimport { ExpressionBuilder } from '../expression-builder/model/expression.builder';\nimport { Node } from '../expression-builder/model/node';\nimport { typeMapping } from './schema/operator';\n\nexport interface Column {\n\tkey: string; title: string; type: string;\n}\n\nexport interface ColumnMap {\n\t[key: string]: Column;\n}\n\nexport interface IQueryBuilderSchema {\n\tapply(node?: Node): Node;\n\tattr(key: string, value: any): IQueryBuilderSchema;\n\tnode(id: string, build: (schema: IQueryBuilderSchema) => void): IQueryBuilderSchema;\n\tgroup(id: string, build: (schema: IQueryBuilderSchema) => void): IQueryBuilderSchema;\n\tget(id: string): IQueryBuilderSchema;\n\tmaterialize(id: string): Node;\n\n\tautocomplete(id: string, settings?: any): IQueryBuilderSchema;\n\tbutton(id: string, settings?: any): IQueryBuilderSchema;\n\tinput(id: string, settings?: any): IQueryBuilderSchema;\n\ticonButton(id: string, settings?: any): IQueryBuilderSchema;\n\tlabel(id: string, settings?: any): IQueryBuilderSchema;\n\tmultiselect(id: string, settings?: any): IQueryBuilderSchema;\n\tselect(id: string, settings?: any): IQueryBuilderSchema;\n}\n\nexport class QueryBuilderService {\n\tconstructor(private model: GridModel) {\n\t}\n\n\tcolumns(): Array<Column> {\n\t\tconst model = this.model;\n\t\treturn model\n\t\t\t.columnList()\n\t\t\t.line\n\t\t\t.filter(column => typeMapping.hasOwnProperty(column.type))\n\t\t\t.map(column => ({\n\t\t\t\tkey: column.key,\n\t\t\t\ttitle: column.title,\n\t\t\t\ttype: column.type\n\t\t\t}));\n\t}\n\n\tcolumnMap(): ColumnMap {\n\t\treturn this.columns().reduce((memo, column) => {\n\t\t\tmemo[column.key] = column;\n\t\t\treturn memo;\n\t\t}, {});\n\t}\n\n\tsubmit(expression) {\n\t\tconst model = this.model;\n\t\tmodel.filter({\n\t\t\tby: expression\n\t\t}, {\n\t\t\t\tsource: 'query-builder.service'\n\t\t\t});\n\t}\n\n\tsuggest(key, skip, take, search, selection?: Array<string>): Promise<string[]> {\n\t\tselection = (selection || []).map(item => ('' + item).toLowerCase());\n\n\t\tconst model = this.model;\n\t\tconst columnMap = columnService.mapColumns(model.columnList().line);\n\t\tconst column = columnMap[key];\n\t\tif (!column) {\n\t\t\tthrow new GridError('query-builder.service', `Column ${key} is not found`);\n\t\t}\n\n\t\tconst getValue = getValueFactory(column);\n\t\treturn new Promise(resolve => {\n\t\t\tconst view = model\n\t\t\t\t.data()\n\t\t\t\t.rows\n\t\t\t\t.map(getValue)\n\t\t\t\t.filter(item =>\n\t\t\t\t\t!isUndefined(item) &&\n\t\t\t\t\titem !== '' &&\n\t\t\t\t\titem !== null &&\n\t\t\t\t\tselection.indexOf(('' + item).toLowerCase()) < 0\n\t\t\t\t);\n\n\t\t\tconst uniqueView = uniq(view);\n\t\t\tconst sortedView = uniqueView.sort();\n\t\t\tconst searchText = ('' + search).toLowerCase();\n\t\t\tconst filterView = searchText\n\t\t\t\t? sortedView.filter(x => ('' + x).toLowerCase().indexOf(searchText) >= 0)\n\t\t\t\t: sortedView;\n\n\t\t\tconst toggleView = filterView.length ? filterView : sortedView;\n\t\t\tconst pageView = toggleView.slice(skip, take);\n\t\t\tresolve(pageView);\n\t\t});\n\t}\n\n\tbuild(): IQueryBuilderSchema {\n\t\tconst statements = [\n\t\t\t{\n\t\t\t\ttype: 'label',\n\t\t\t\ttemplateKey: 'plugin-eb-label.tpl.html'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'input',\n\t\t\t\ttemplateKey: 'plugin-eb-input.tpl.html'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'select',\n\t\t\t\ttemplateKey: 'plugin-eb-select.tpl.html'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'button',\n\t\t\t\ttemplateKey: 'plugin-eb-button.tpl.html'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'iconButton',\n\t\t\t\ttemplateKey: 'plugin-eb-icon-button.tpl.html'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'autocomplete',\n\t\t\t\ttemplateKey: 'plugin-eb-autocomplete.tpl.html'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'multiselect',\n\t\t\t\ttemplateKey: 'plugin-eb-multiselect.tpl.html'\n\t\t\t}\n\t\t];\n\n\t\tconst settings = {\n\t\t\tdefaults: {\n\t\t\t\tisValid: function () {\n\t\t\t\t\treturn !this.validate || !(this.state = this.validate()).length;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\treturn new ExpressionBuilder(settings)\n\t\t\t.build<IQueryBuilderSchema>(statements);\n\t}\n}\n","import { cloneDeep } from '@qgrid/core';\nimport { GridError } from '@qgrid/ngx';\nimport { camelCaseMapping } from './operator';\n\nexport function visit(item) {\n\tswitch (item.id) {\n\t\tcase '#root':\n\t\t\treturn visit(item.children[0]);\n\t\tcase '#logical':\n\t\t\tconst group = visitGroup(item);\n\t\t\tif (group) {\n\t\t\t\tif (!(group.left || group.right)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn group;\n\t\tcase '#condition':\n\t\t\treturn visitCondition(item);\n\t\tdefault:\n\t\t\tthrow new GridError('converter', `Invalid kind ${item.kind}`);\n\t}\n}\n\nfunction visitGroup(node) {\n\tconst line = node.line;\n\tconst opExpr = find(line, '#logical-op', '#logical-op');\n\tconst children = node.children.filter(notPlaceholder).map(visit);\n\n\tif (children.length === 0) {\n\t\treturn null;\n\t}\n\n\tif (children.length === 1) {\n\t\treturn {\n\t\t\tkind: 'group',\n\t\t\top: opExpr.value.toLowerCase(),\n\t\t\tleft: children[0],\n\t\t\tright: null\n\t\t};\n\t}\n\n\treturn children\n\t\t.slice(1)\n\t\t.reduce((memo, item) => ({\n\t\t\tkind: 'group',\n\t\t\top: opExpr.value.toLowerCase(),\n\t\t\tleft: memo,\n\t\t\tright: item\n\t\t}), children[0]);\n}\n\nfunction visitCondition(node) {\n\tconst line = node.line;\n\tconst opExpr = find(line, '#operator', '#operator');\n\tconst value = opExpr.value.toUpperCase();\n\n\tlet condition;\n\tswitch (value) {\n\t\tcase 'IS NOT EMPTY':\n\t\tcase 'IS EMPTY':\n\t\t\tcondition = visitUnary(line, opExpr.value);\n\t\t\tbreak;\n\t\tcase 'EQUALS':\n\t\tcase 'NOT EQUALS':\n\t\tcase 'GREATER OR EQ. TO':\n\t\tcase 'GREATER THAN':\n\t\tcase 'LESS OR EQ. TO':\n\t\tcase 'LESS THAN':\n\t\tcase 'LIKE':\n\t\tcase 'NOT LIKE':\n\t\tcase 'STARTS WITH':\n\t\tcase 'ENDS WITH':\n\t\t\tcondition = visitBinary(line, opExpr.value);\n\t\t\tbreak;\n\t\tcase 'BETWEEN':\n\t\t\tcondition = visitBetween(line);\n\t\t\tbreak;\n\t\tcase 'IN':\n\t\t\tcondition = visitIn(line);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow new GridError('converter', `Invalid operation ${value}`);\n\t}\n\n\tcondition.kind = 'condition';\n\treturn condition;\n}\n\nfunction visitUnary(line, op) {\n\tconst left = visitField(line);\n\n\treturn {\n\t\tleft: left.value,\n\t\top: camelCaseMapping[op.toUpperCase()]\n\t};\n}\n\nfunction visitBinary(line, op) {\n\tconst left = visitField(line);\n\tconst right = find(line, '#operand', '#value') || find(line, '#fieldRight');\n\n\treturn {\n\t\tleft: left.value,\n\t\top: camelCaseMapping[op.toUpperCase()],\n\t\tright: right.value\n\t};\n}\n\nfunction visitIn(line) {\n\tconst left = visitField(line);\n\tconst right = find(line, '#operand', '#in-operand') || find(line, '#fieldRight');\n\n\treturn {\n\t\tleft: left.value,\n\t\top: 'in',\n\t\tright: cloneDeep(right.values) || right.value\n\t};\n}\n\nfunction visitBetween(line) {\n\tconst left = visitField(line);\n\tconst from = find(line, '#operand', '#from') || find(line, '#fieldFrom');\n\tconst to = find(line, '#operand', '#to') || find(line, '#fieldTo');\n\n\treturn {\n\t\tleft: left.value,\n\t\top: 'between',\n\t\tright: [from.value, to.value]\n\t};\n}\n\nfunction visitField(line) {\n\treturn find(line, '#field') || find(line, '#fieldLeft');\n}\n\nfunction notPlaceholder(node) {\n\treturn !node.attributes.placeholder;\n}\n\nfunction find(line, groupId: string, exprId?: string) {\n\tconst group = findById(line, groupId);\n\tif (!group) {\n\t\treturn null;\n\t}\n\n\treturn findById(group.expressions, exprId || groupId);\n}\n\nfunction findById(items, id: string) {\n\tconst result = items.filter(item => item.id === id);\n\tconst length = result.length;\n\n\tif (length === 1) {\n\t\treturn result[0];\n\t}\n\n\tif (length > 1) {\n\t\tthrow new GridError('converter', `Ambiguous id ${id}`);\n\t}\n\n\treturn null;\n}\n","function swap(inst: { [key: string]: string }): { [key: string]: string } {\n\tconst result = {};\n\tfor (const prop in inst) {\n\t\tif (inst.hasOwnProperty(prop)) {\n\t\t\tresult[inst[prop]] = prop;\n\t\t}\n\t}\n\n\treturn result;\n}\n\nconst commonOperators = [\n\t'EQUALS',\n\t'NOT EQUALS',\n\t'IN',\n\t'IS EMPTY',\n\t'IS NOT EMPTY'\n];\n\nconst oneToOneCommonOperators = [\n\t'EQUALS',\n\t'NOT EQUALS'\n];\n\nconst textOperators = [\n\t'LIKE',\n\t'NOT LIKE',\n\t'STARTS WITH',\n\t'ENDS WITH'\n];\n\nconst numberOperators = [\n\t'BETWEEN',\n\t'GREATER THAN',\n\t'LESS THAN',\n\t'GREATER OR EQ. TO',\n\t'LESS OR EQ. TO'\n];\n\nconst oneToOneNumberOperators = [\n\t'GREATER THAN',\n\t'LESS THAN',\n\t'GREATER OR EQ. TO',\n\t'LESS OR EQ. TO'\n];\n\nexport const camelCaseMapping = {\n\t'IS EMPTY': 'isNull',\n\t'IS NOT EMPTY': 'isNotNull',\n\t'EQUALS': 'equals',\n\t'NOT EQUALS': 'notEquals',\n\t'GREATER OR EQ. TO': 'greaterThanOrEquals',\n\t'LESS OR EQ. TO': 'lessThanOrEquals',\n\t'GREATER THAN': 'greaterThan',\n\t'LESS THAN': 'lessThan',\n\t'LIKE': 'like',\n\t'NOT LIKE': 'notLike',\n\t'STARTS WITH': 'startsWith',\n\t'ENDS WITH': 'endsWith',\n\t'IN': 'in',\n\t'BETWEEN': 'between'\n};\n\nexport const typeMapping = {\n\tbool: oneToOneCommonOperators,\n\tid: commonOperators.concat(textOperators),\n\ttext: commonOperators.concat(textOperators),\n\temail: commonOperators.concat(textOperators),\n\turl: commonOperators.concat(textOperators),\n\tpassword: commonOperators.concat(textOperators),\n\tnumber: commonOperators.concat(numberOperators),\n\tdate: commonOperators.concat(numberOperators),\n\ttime: commonOperators.concat(numberOperators),\n\tcurrency: commonOperators.concat(numberOperators)\n};\n\nexport const oneToOneMapping = {\n\tbool: oneToOneCommonOperators,\n\tid: oneToOneCommonOperators.concat(textOperators),\n\ttext: oneToOneCommonOperators.concat(textOperators),\n\temail: oneToOneCommonOperators.concat(textOperators),\n\turl: oneToOneCommonOperators.concat(textOperators),\n\tpassword: oneToOneCommonOperators.concat(textOperators),\n\tnumber: oneToOneCommonOperators.concat(oneToOneNumberOperators),\n\tdate: oneToOneCommonOperators.concat(oneToOneNumberOperators),\n\ttime: oneToOneCommonOperators.concat(oneToOneNumberOperators),\n\tcurrency: oneToOneCommonOperators.concat(oneToOneNumberOperators)\n};\n\nexport const labelMapping = swap(camelCaseMapping);\n","import { QueryBuilderService } from '../query-builder.service';\n\nexport function suggestFactory(service: QueryBuilderService, name: string) {\n\treturn function (node, line) {\n\t\tconst search = this.value == null ? '' : ('' + this.value).toLowerCase();\n\t\tconst field = line.get(name).expressions[0].value;\n\t\treturn service.suggest(field, 0, 10, search);\n\t};\n}\n\nexport function suggestsFactory(service: QueryBuilderService, name: string) {\n\treturn function (node, line) {\n\t\tconst search = this.search;\n\t\tconst field = line.get(name).expressions[0].value;\n\t\tconst selection =\n\t\t\t(this.values || [])\n\t\t\t\t.map(item => ('' + item).toLowerCase());\n\n\t\treturn new Promise((resolve, reject) =>\n\t\t\tservice\n\t\t\t\t.suggest(field, 0, 10, search, selection)\n\t\t\t\t.then(items => {\n\t\t\t\t\tconst result = selection.length\n\t\t\t\t\t\t? items.filter(item => selection.indexOf(('' + item).toLowerCase()) < 0)\n\t\t\t\t\t\t: items;\n\t\t\t\t})\n\t\t\t\t.catch(ex => reject(ex))\n\t\t);\n\t};\n}\n","import { createValidator, isArray } from '@qgrid/core';\nimport { GridError } from '@qgrid/ngx';\nimport { ColumnMap, QueryBuilderService } from '../query-builder.service';\n\nexport class Validator {\n\tprivate columnMap: ColumnMap;\n\tprivate trueResult: Array<string> = [];\n\tprivate validators: { [key: string]: (value: any) => Array<string> } = {};\n\tprivate rules = {\n\t\t'bool': ['required'],\n\t\t'currency': ['required', 'decimal'],\n\t\t'date': ['required', 'iso_date'],\n\t\t'email': ['required' /*, 'email'*/],\n\t\t'file': ['required'],\n\t\t'id': ['required'],\n\t\t'image': ['required'],\n\t\t'number': ['required', 'decimal'],\n\t\t'password': ['required'],\n\t\t'url': ['required'/*, 'url'*/],\n\t\t'reference': ['required'],\n\t\t'text': ['required', 'string'],\n\t\t'time': ['required']\n\t};\n\n\tconstructor(service: QueryBuilderService) {\n\t\tthis.columnMap = service.columnMap();\n\t}\n\n\tfor(key: string) {\n\t\tconst validators = this.validators;\n\t\tif (validators.hasOwnProperty('key')) {\n\t\t\treturn validators[key];\n\t\t}\n\n\t\tconst column = this.columnMap[key];\n\t\tif (!column) {\n\t\t\tthrow new GridError('validator', `Can't find column ${key}`);\n\t\t}\n\n\t\tconst trueResult = this.trueResult;\n\t\tconst id = column.type;\n\t\tconst rule = this.rules[id];\n\t\tlet validate = (value: any) => trueResult;\n\t\tif (rule) {\n\t\t\tconst schema = { [id]: rule };\n\t\t\tvalidate = function test(value): Array<string> {\n\t\t\t\tif (isArray(value)) {\n\t\t\t\t\tconst result = [];\n\t\t\t\t\tfor (const item of value) {\n\t\t\t\t\t\tresult.push(...test(item));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tconst target = { [id]: value };\n\t\t\t\tconst validator = createValidator(schema);\n\t\t\t\tconst isValid = validator.validate(target);\n\t\t\t\tif (isValid) {\n\t\t\t\t\treturn trueResult;\n\t\t\t\t}\n\n\t\t\t\tconst error = validator.getErrors()[id];\n\t\t\t\treturn isArray(error) ? error : [error];\n\t\t\t};\n\t\t}\n\n\t\tvalidators[key] = validate;\n\t\treturn validate;\n\t}\n}\n","import { isArray, noop } from '@qgrid/core';\nimport { IQueryBuilderSchema, QueryBuilderService } from '../query-builder.service';\nimport { typeMapping } from './operator';\nimport { suggestFactory, suggestsFactory } from './suggest.service';\nimport { Validator } from './validator';\n\nexport const getValue = (line, id, props) => {\n\tconst group = line.get(id);\n\tif (group) {\n\t\tif (group.expressions.length === 1) {\n\t\t\tconst expr = group.expressions[0];\n\t\t\tconst prop = props.filter(p => expr.hasOwnProperty(p))[0];\n\t\t\tif (prop) {\n\t\t\t\tconst value = expr[prop];\n\t\t\t\tif (isArray(value) && value.length) {\n\t\t\t\t\treturn value[0];\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn null;\n};\n\nexport class WhereSchema {\n\tconstructor(private service: QueryBuilderService) {\n\t}\n\n\tfactory(): IQueryBuilderSchema {\n\t\tconst service = this.service;\n\t\tconst suggest = suggestFactory(service, '#field');\n\t\tconst suggests = suggestsFactory(service, '#field');\n\t\tconst validator = new Validator(service);\n\n\t\treturn this.service.build()\n\t\t\t.node('#logical', function (logical) {\n\t\t\t\tlogical\n\t\t\t\t\t.attr('serialize', {\n\t\t\t\t\t\t'#logical-op': ['value']\n\t\t\t\t\t})\n\t\t\t\t\t.attr('class', {\n\t\t\t\t\t\t'qb-logical': true,\n\t\t\t\t\t\t'qb-and': function (node) {\n\t\t\t\t\t\t\tconst op = node.line.get('#logical-op');\n\t\t\t\t\t\t\treturn op.expressions[0].value === 'AND';\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'qb-or': function (node) {\n\t\t\t\t\t\t\tconst op = node.line.get('#logical-op');\n\t\t\t\t\t\t\treturn op.expressions[0].value === 'OR';\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.select('#logical-op', {\n\t\t\t\t\t\tclasses: ['qb-operation'],\n\t\t\t\t\t\toptions: ['AND', 'OR'],\n\t\t\t\t\t\tvalue: 'AND'\n\t\t\t\t\t})\n\t\t\t\t\t.node('#condition', function (condition) {\n\t\t\t\t\t\tcondition\n\t\t\t\t\t\t\t.attr('serialize', {\n\t\t\t\t\t\t\t\t'#field': ['value'],\n\t\t\t\t\t\t\t\t'#operator': ['value'],\n\t\t\t\t\t\t\t\t'#value': ['value'],\n\t\t\t\t\t\t\t\t'#from': ['value'],\n\t\t\t\t\t\t\t\t'#to': ['value'],\n\t\t\t\t\t\t\t\t'#in-operand': ['values']\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.select('#field', {\n\t\t\t\t\t\t\t\tclasses: ['qb-field'],\n\t\t\t\t\t\t\t\toptions: service.columns().map(c => c.key),\n\t\t\t\t\t\t\t\tvalue: service.columns().length ? service.columns()[0].key : '',\n\t\t\t\t\t\t\t\tgetLabel: function (node, line, key) {\n\t\t\t\t\t\t\t\t\tconst column = service.columns().filter(c => c.key === key)[0];\n\t\t\t\t\t\t\t\t\treturn (column && column.title) || null;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tgetType: function (node, line, key) {\n\t\t\t\t\t\t\t\t\tconst column = service.columns().filter(c => c.key === key)[0];\n\t\t\t\t\t\t\t\t\treturn (column && column.type) || null;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tchange: function (node, line) {\n\t\t\t\t\t\t\t\t\tconst field = this.value;\n\t\t\t\t\t\t\t\t\tconst type = this.getType(field);\n\t\t\t\t\t\t\t\t\tconst ops = typeMapping[type] || [];\n\t\t\t\t\t\t\t\t\tconst op = line.get('#operator').expressions[0];\n\n\t\t\t\t\t\t\t\t\tif (ops.indexOf(op.value) < 0) {\n\t\t\t\t\t\t\t\t\t\top.value = ops.length ? ops[0] : null;\n\t\t\t\t\t\t\t\t\t\top.change();\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tconst operand = line.get('#operand').expressions[0];\n\t\t\t\t\t\t\t\t\t\tif (operand.validate) {\n\t\t\t\t\t\t\t\t\t\t\tconst result = operand.validate();\n\t\t\t\t\t\t\t\t\t\t\tif (result.length) {\n\t\t\t\t\t\t\t\t\t\t\t\toperand.value = null;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\toperand.value = null;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.select('#operator', {\n\t\t\t\t\t\t\t\tclasses: ['qb-operator'],\n\t\t\t\t\t\t\t\tgetOptions: function (node, line) {\n\t\t\t\t\t\t\t\t\tconst field = line.get('#field').expressions[0];\n\t\t\t\t\t\t\t\t\tconst name = field.value;\n\t\t\t\t\t\t\t\t\tconst type = field.getType(name);\n\n\t\t\t\t\t\t\t\t\treturn type ? typeMapping[type] : [];\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tvalue: 'EQUALS',\n\t\t\t\t\t\t\t\tchange: function (node, line) {\n\t\t\t\t\t\t\t\t\tswitch (this.value.toLowerCase()) {\n\t\t\t\t\t\t\t\t\t\tcase 'equals':\n\t\t\t\t\t\t\t\t\t\tcase 'not equals':\n\t\t\t\t\t\t\t\t\t\tcase 'greater than':\n\t\t\t\t\t\t\t\t\t\tcase 'less than':\n\t\t\t\t\t\t\t\t\t\tcase 'greater or eq. to':\n\t\t\t\t\t\t\t\t\t\tcase 'less or eq. to':\n\t\t\t\t\t\t\t\t\t\tcase 'like':\n\t\t\t\t\t\t\t\t\t\tcase 'not like':\n\t\t\t\t\t\t\t\t\t\tcase 'starts with':\n\t\t\t\t\t\t\t\t\t\tcase 'ends with':\n\t\t\t\t\t\t\t\t\t\t\tconst value = getValue(line, '#operand', ['value', 'values']);\n\n\t\t\t\t\t\t\t\t\t\t\tline.put('#operand', node, function (schema) {\n\t\t\t\t\t\t\t\t\t\t\t\tschema.input('#value', {\n\t\t\t\t\t\t\t\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'qb-operand': true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'qb-has-value': function () {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn !!this.value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'qb-invalid': function (n) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn !this.isValid(n);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalidate: function () {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst field = line.get('#field').expressions[0].value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn validator.for(field)(this.value);\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholderText: 'Select value',\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuggest: suggest,\n\t\t\t\t\t\t\t\t\t\t\t\t\toptions: null,\n\t\t\t\t\t\t\t\t\t\t\t\t\trefresh: function (n, l) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.options = this.suggest(n, l);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase 'between':\n\t\t\t\t\t\t\t\t\t\t\tline.put('#operand', node, function (operand) {\n\t\t\t\t\t\t\t\t\t\t\t\toperand\n\t\t\t\t\t\t\t\t\t\t\t\t\t.input('#from', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'qb-operand': true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'qb-has-value': function () {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn !!this.value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'qb-invalid': function (n) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn !this.isValid(n);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidate: function () {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst field = line.get('#field').expressions[0].value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn validator.for(field)(this.value);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions: suggest,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholderText: 'Select value'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t.label('#and', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclasses: ['qb-operand', 'qb-operand-and-label'],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: 'AND'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t.input('#to', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'qb-operand': true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'qb-has-value': function () {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn !!this.value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'qb-invalid': function (n) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn !this.isValid(n);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidate: function () {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst field = line.get('#field').expressions[0].value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn validator.for(field)(this.value);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholderText: 'Select value',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuggest: suggest,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions: null,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trefresh: function (n, l) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.options = this.suggest(n, l);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase 'in':\n\t\t\t\t\t\t\t\t\t\t\tline.put('#operand', node, function (schema) {\n\t\t\t\t\t\t\t\t\t\t\t\tschema\n\t\t\t\t\t\t\t\t\t\t\t\t\t.label('#in-open', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: '('\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t.multiselect('#in-operand', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'qb-operand': true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'qb-has-value': function () {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn !!this.values.length;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'qb-invalid': function (n) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn !this.isValid(n);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidate: function () {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst field = line.get('#field').expressions[0].value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn validator.for(field)(this.values);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalues: [],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions: suggests,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholderText: 'Select value',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tadd: function (n, l, v) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (v && this.values.indexOf(v) < 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.values.push(v);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t.label('#in-close', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: ')'\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase 'is empty':\n\t\t\t\t\t\t\t\t\t\tcase 'is not empty':\n\t\t\t\t\t\t\t\t\t\t\tline.put('#operand', node, noop);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.group('#operand', function (schema) {\n\t\t\t\t\t\t\t\tschema.autocomplete('#value', {\n\t\t\t\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\t\t\t\t'qb-operand': true,\n\t\t\t\t\t\t\t\t\t\t'qb-has-value': function () {\n\t\t\t\t\t\t\t\t\t\t\treturn !!this.value;\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t'qb-invalid': function (node) {\n\t\t\t\t\t\t\t\t\t\t\treturn !this.isValid(node);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\t\t\t\tvalidate: function (node, line) {\n\t\t\t\t\t\t\t\t\t\tconst field = line.get('#field').expressions[0].value;\n\t\t\t\t\t\t\t\t\t\treturn validator.for(field)(this.value);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tplaceholderText: 'Select value',\n\t\t\t\t\t\t\t\t\tsuggest: suggest,\n\t\t\t\t\t\t\t\t\toptions: null,\n\t\t\t\t\t\t\t\t\trefresh: function (node, line) {\n\t\t\t\t\t\t\t\t\t\tthis.options = this.suggest(node, line);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t});\n\t}\n}\n","import { AfterViewInit, ChangeDetectionStrategy, Component, EventEmitter, Input, Output } from '@angular/core';\nimport { CellView, Command, SelectionService } from '@qgrid/core';\nimport { Disposable, GridModel } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-reference-editor',\n\ttemplateUrl: './reference-editor.component.html',\n\tproviders: [Disposable],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ReferenceEditorComponent implements AfterViewInit {\n\tprivate state: any;\n\n\t@Input() caption = '';\n\t@Input() cell: CellView;\n\n\t@Output() valueChange = new EventEmitter<any>();\n\t@Output() afterSubmit = new EventEmitter();\n\t@Output() afterCancel = new EventEmitter();\n\n\treference: { commit: Command, cancel: Command };\n\tmodel: GridModel;\n\n\tcontext: { $implicit: ReferenceEditorComponent } = {\n\t\t$implicit: this\n\t};\n\n\tsubmit = new Command();\n\tcancel = new Command();\n\n\tconstructor(private disposable: Disposable) { }\n\n\t@Input() get value() {\n\t\treturn this.state;\n\t}\n\n\tset value(value) {\n\t\tif (value !== this.state) {\n\t\t\tthis.state = value;\n\t\t\tthis.valueChange.emit(value);\n\t\t}\n\t}\n\n\tngAfterViewInit() {\n\t\tconst { model } = this;\n\t\tconst { commit, cancel } = this.reference;\n\n\t\tconst { commitShortcuts, cancelShortcuts } = model.edit();\n\t\tconst selectionService = new SelectionService(model);\n\n\t\t// TODO: think how to get rid of this shit.\n\t\tsetTimeout(() => {\n\t\t\tthis.submit = new Command({\n\t\t\t\tshortcut: commitShortcuts.form,\n\t\t\t\tcanExecute: () => {\n\t\t\t\t\tconst { items } = model.selection();\n\t\t\t\t\tconst entries = selectionService.lookup(items);\n\t\t\t\t\tconst context = { items, entries };\n\n\t\t\t\t\treturn commit.canExecute(context);\n\t\t\t\t},\n\t\t\t\texecute: () => {\n\t\t\t\t\tconst { items } = model.selection();\n\t\t\t\t\tconst entries = selectionService.lookup(items);\n\t\t\t\t\tconst context = { items, entries };\n\t\t\t\t\tif (commit.execute(context) !== false) {\n\t\t\t\t\t\tthis.afterSubmit.emit();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.afterCancel.emit();\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.cancel = new Command({\n\t\t\t\tshortcut: cancelShortcuts.form || cancelShortcuts.$default,\n\t\t\t\tcanExecute: () => cancel.canExecute(),\n\t\t\t\texecute: () => {\n\t\t\t\t\tif (cancel.execute() !== false) {\n\t\t\t\t\t\tthis.afterCancel.emit();\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst { shortcut, manager } = model.action();\n\t\t\tthis.disposable.add(\n\t\t\t\tshortcut.register(manager, [this.submit, this.cancel])\n\t\t\t);\n\t\t}, 0);\n\t}\n}\n","<ng-container key=\"plugin-reference-editor.tpl.html\" [context]=\"context\"></ng-container>\n","import { NgModule } from '@angular/core';\nimport { ReferenceEditorComponent } from './reference-editor.component';\nimport { ReferenceComponent } from './reference.component';\nimport { TemplateModule } from '@qgrid/ngx';\n\n@NgModule({\n\tdeclarations: [ReferenceEditorComponent, ReferenceComponent],\n\texports: [ReferenceEditorComponent, ReferenceComponent],\n\timports: [TemplateModule]\n})\nexport class ReferenceEditorModule {}\n","import { ChangeDetectionStrategy, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { CellView, Command, getValueFactory, isArray, isUndefined, SelectionService } from '@qgrid/core';\nimport { Disposable, GridModel, GridModelBuilder } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-reference',\n\ttemplateUrl: './reference.component.html',\n\tproviders: [Disposable],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ReferenceComponent implements OnInit {\n\tprivate _value: any;\n\tprivate _model: GridModel;\n\tprivate _reference: {\n\t\tcommit: Command,\n\t\tcancel: Command,\n\t\tvalue: any\n\t};\n\n\t@Input() caption = '';\n\t@Input() autofocus = false;\n\t@Input() cell: CellView;\n\n\tget value() { return this._value; }\n\t@Output() valueChange = new EventEmitter<any>();\n\t@Input() set value(value) {\n\t\tif (value !== this._value) {\n\t\t\tthis._value = value;\n\t\t\tthis.valueChange.emit(value);\n\t\t}\n\t}\n\n\tget model() { return this._model; }\n\t@Output() modelChange = new EventEmitter<GridModel>();\n\t@Input() set model(value) {\n\t\tif (value !== this._model) {\n\t\t\tthis._model = value;\n\t\t\tthis.modelChange.emit(value);\n\t\t}\n\t}\n\n\tget reference() { return this._reference; }\n\t@Output() referenceChange = new EventEmitter<{ commit: Command, cancel: Command, value: any }>();\n\t@Input() set reference(value) {\n\t\tif (value !== this._reference) {\n\t\t\tthis._reference = value;\n\t\t\tthis.referenceChange.emit(value);\n\t\t}\n\t}\n\n\tcontext: { $implicit: ReferenceComponent } = {\n\t\t$implicit: this\n\t};\n\n\tconstructor(\n\t\tprivate modelBuilder: GridModelBuilder,\n\t\tprivate disposable: Disposable\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tthis.reference = {\n\t\t\tcommit: new Command({ execute: e => this.value = e.entries }),\n\t\t\tcancel: new Command(),\n\t\t\tvalue: this.value\n\t\t};\n\n\t\tthis.model = this.cell.column.editorOptions.modelFactory({\n\t\t\treference: this.reference,\n\t\t\trow: this.cell.row,\n\t\t\tcolumn: this.cell.column,\n\t\t\tgetValue: getValueFactory(this.cell.column),\n\t\t\tcreateDefaultModel: () => this.modelBuilder.build(),\n\t\t} as any);\n\n\t\tconst selectionService = new SelectionService(this.model);\n\t\tthis.disposable.add(\n\t\t\tthis.model.dataChanged.watch((e, off) => {\n\t\t\t\tif (e.hasChanges('rows') && e.state.rows.length > 0) {\n\t\t\t\t\toff();\n\n\t\t\t\t\tif (!this.model.selection().items.length) {\n\t\t\t\t\t\tconst { value } = this.reference;\n\t\t\t\t\t\tif (!isUndefined(value)) {\n\t\t\t\t\t\t\tconst entries = isArray(value) ? value : [value];\n\t\t\t\t\t\t\tconst items = selectionService.map(entries);\n\t\t\t\t\t\t\tthis.model.selection({\n\t\t\t\t\t\t\t\titems\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tsource: 'reference.component'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\n\t\tthis.disposable.add(\n\t\t\tthis.model\n\t\t\t\t.selectionChanged\n\t\t\t\t// TODO: use rx syntax\n\t\t\t\t.watch(e => {\n\t\t\t\t\t// TODO: get rid of this check\n\t\t\t\t\tif (e.tag.source === 'reference.component') {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e.hasChanges('items')) {\n\t\t\t\t\t\tconst entries = selectionService.lookup(e.state.items);\n\t\t\t\t\t\tthis.value = entries;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t);\n\t}\n}\n","<ng-container key=\"plugin-reference.tpl.html\"\n              [context]=\"context\">\n</ng-container>","import { HttpClient } from '@angular/common/http';\nimport { ChangeDetectionStrategy, Component, Input, OnChanges, OnInit } from '@angular/core';\nimport { RestState } from '@qgrid/core';\nimport { GridPlugin, StateAccessor } from '@qgrid/ngx';\nimport { RestPlugin } from '@qgrid/plugins';\n\n@Component({\n\tselector: 'q-grid-rest',\n\ttemplate: '',\n\tproviders: [GridPlugin, StateAccessor],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class RestComponent implements OnInit, OnChanges {\n\tprivate restState = this.stateAccessor.setter(RestState);\n\n\t@Input('url') set restUrl(url: string) { this.restState({ url }); }\n\t@Input('method') set restMethod(method: string) { this.restState({ method }); }\n\t@Input('serialize') set restSerialize(serialize: (x: any) => any) { this.restState({ serialize }); }\n\n\tcontext: { $implicit: RestPlugin };\n\n\tconstructor(\n\t\tprivate http: HttpClient,\n\t\tprivate plugin: GridPlugin,\n\t\tprivate stateAccessor: StateAccessor\n\t) {\n\t}\n\n\tngOnChanges() {\n\t\tconst { model } = this.plugin;\n\t\tthis.stateAccessor.write(model);\n\t}\n\n\tngOnInit() {\n\t\tconst rest = new RestPlugin(\n\t\t\tthis.plugin.model, {\n\t\t\tget: (url, params) => this.http.get(url, { params }).toPromise(),\n\t\t\tpost: (url, data) => this.http.post(url, { data }).toPromise()\n\t\t});\n\n\t\tthis.context = { $implicit: rest };\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { RestComponent } from './rest.component';\n\n@NgModule({\n\tdeclarations: [RestComponent],\n\texports: [RestComponent]\n})\nexport class RestModule {\n}\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { selectColumnIndex, selectRowIndex } from '@qgrid/core';\nimport { GridPlugin, TemplateHostService } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-status-bar',\n\ttemplateUrl: './status-bar.component.html',\n\tproviders: [TemplateHostService, GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class StatusBarComponent implements OnInit {\n\tcontext: { $implicit: StatusBarComponent } = {\n\t\t$implicit: this\n\t};\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate cd: ChangeDetectorRef,\n\t\ttemplateHost: TemplateHostService) {\n\t\ttemplateHost.key = () => 'plugin-status-bar.tpl.html';\n\t}\n\n\tngOnInit() {\n\t\tconst { model, observe } = this.plugin;\n\t\tobserve(model.navigationChanged)\n\t\t\t.subscribe(() => this.cd.detectChanges());\n\t}\n\n\tget rowIndex() {\n\t\treturn selectRowIndex(this.plugin.model.navigation());\n\t}\n\n\tget columnIndex() {\n\t\treturn selectColumnIndex(this.plugin.model.navigation());\n\t}\n}\n","<ng-container key=\"plugin-status-bar.tpl.html\" [context]=\"context\"></ng-container>\n","import { NgModule } from '@angular/core';\nimport { TemplateModule } from '@qgrid/ngx';\nimport { StatusBarComponent } from './status-bar.component';\n\n@NgModule({\n\tdeclarations: [\n\t\tStatusBarComponent\n\t],\n\texports: [\n\t\tStatusBarComponent\n\t],\n\timports: [\n\t\tTemplateModule\n\t]\n})\nexport class StatusBarModule {\n}\n","import { Directive, ElementRef, Input, OnInit } from '@angular/core';\nimport { EventListener, EventManager } from '@qgrid/core';\nimport { TabTrapComponent } from './tab-trap.component';\n\n@Directive({\n\tselector: '[q-grid-tab-trap-in]'\n})\nexport class TabTrapInDirective implements OnInit {\n\t@Input('q-grid-tab-trap-in') target;\n\t@Input('q-grid-tab-trap-host') host: TabTrapComponent;\n\n\tconstructor(private elementRef: ElementRef) {\n\t\telementRef.nativeElement.tabIndex = 0;\n\n\t\tconst listener = new EventListener(elementRef.nativeElement, new EventManager(this));\n\t\tlistener.on('focus', () => this.host.activate(this.target));\n\t}\n\n\tngOnInit() {\n\t\tthis.host.traps.set(this.target, this);\n\t}\n\n\tfocus() {\n\t\tthis.elementRef.nativeElement.focus();\n\t}\n}\n","import {\n\tChangeDetectionStrategy, Component, ElementRef,\n\tInput, TemplateRef, ViewChild\n} from '@angular/core';\nimport { EventListener, EventManager, Shortcut } from '@qgrid/core';\nimport { GridError, GridPlugin } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-tab-trap',\n\ttemplateUrl: './tab-trap.component.html',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TabTrapComponent {\n\tprivate isActivating = false;\n\n\t@ViewChild(TemplateRef, { static: true }) template: TemplateRef<any>;\n\t@Input() roundTrip = false;\n\n\tcontext: { $implicit: TabTrapComponent } = {\n\t\t$implicit: this\n\t};\n\n\ttraps = new Map<string, any>();\n\n\tconstructor(private plugin: GridPlugin, elementRef: ElementRef) {\n\t\tconst listener = new EventListener(elementRef.nativeElement, new EventManager(this));\n\t\tlistener.on('keydown', e => {\n\t\t\tconst code = Shortcut.translate(e);\n\t\t\tif (code === 'tab' || code === 'shift+tab') {\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t});\n\t}\n\n\tactivate(target) {\n\t\tif (this.isActivating) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isActivating = true;\n\t\ttry {\n\t\t\tif (this.roundTrip) {\n\t\t\t\tthis.goRound(target);\n\t\t\t} else {\n\t\t\t\tthis.exit(target);\n\t\t\t}\n\t\t} finally {\n\t\t\tthis.isActivating = false;\n\t\t}\n\t}\n\n\texit(target) {\n\t\tconst e = {\n\t\t\tkey: 'Tab',\n\t\t\tkeyCode: 9,\n\t\t\tshiftKey: target === 'start'\n\t\t};\n\n\t\tconst { model } = this.plugin;\n\t\tconst shortcut = model.action().shortcut;\n\t\tshortcut.keyDown(e, 'tab-trap');\n\t}\n\n\tgoRound(target) {\n\t\tswitch (target) {\n\t\t\tcase 'start': {\n\t\t\t\tconst end = this.traps.get('end');\n\t\t\t\tend.focus();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'end': {\n\t\t\t\tconst start = this.traps.get('start');\n\t\t\t\tstart.focus();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tthrow new GridError('tab.trap', `Invalid target ${target}`);\n\t\t}\n\t}\n}\n","<ng-template>\n    <ng-content></ng-content>\n</ng-template>\n\n<ng-container key=\"plugin-tab-trap.tpl.html\" [context]=\"context\"></ng-container>\n","import { NgModule } from '@angular/core';\nimport { TabTrapComponent } from './tab-trap.component';\nimport { TemplateModule } from '@qgrid/ngx';\nimport { TabTrapInDirective } from './tab-trap-in.directive';\n\n@NgModule({\n\tdeclarations: [\n\t\tTabTrapComponent,\n\t\tTabTrapInDirective\n\t],\n\texports: [\n\t\tTabTrapComponent,\n\t\tTabTrapInDirective\n\t],\n\timports: [\n\t\tTemplateModule\n\t]\n})\nexport class TabTrapModule {\n}\n","import { Directive, TemplateRef, ViewContainerRef } from '@angular/core';\nimport { parseFactory } from '@qgrid/core';\n\n@Directive({\n\tselector: '[q-grid-time]'\n})\nexport class TimeDirective {\n\tprivate toMidnight: (x: Date | string) => Date = parseFactory('date');\n\n\tconstructor(templateRef: TemplateRef<any>, viewContainerRef: ViewContainerRef) {\n\t\tviewContainerRef.createEmbeddedView(templateRef, { $implicit: this });\n\t}\n\n\ttime(previous, current) {\n\t\tif (!previous) {\n\t\t\tprevious = new Date();\n\t\t}\n\n\t\tconst midnight = this.toMidnight(previous);\n\t\tconst [hours, minutes, seconds, ms] = current.split(':');\n\n\t\tif (hours && minutes) {\n\t\t\tconst time = new Date(\n\t\t\t\tmidnight.getFullYear(),\n\t\t\t\tmidnight.getMonth(),\n\t\t\t\tmidnight.getDate(),\n\t\t\t\t+hours,\n\t\t\t\t+minutes,\n\t\t\t\tseconds ? +seconds : 0,\n\t\t\t\tms ? +ms : 0\n\t\t\t);\n\n\t\t\treturn time;\n\t\t}\n\n\t\treturn midnight;\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { TimeDirective } from './time.directive';\n\n@NgModule({\n\tdeclarations: [\n\t\tTimeDirective\n\t],\n\texports: [\n\t\tTimeDirective\n\t]\n})\nexport class TimeModule {\n}\n","import { Component, Input, OnChanges, SimpleChanges, TemplateRef, ViewChild, ChangeDetectionStrategy } from '@angular/core';\nimport { GridPlugin } from '@qgrid/ngx';\nimport { TemplateHostService } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-rule',\n\ttemplateUrl: './rule.component.html',\n\tproviders: [TemplateHostService, GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class RuleComponent implements OnChanges {\n\t@Input() for: string;\n\t@Input() key: string;\n\n\t// Common Rules\n\t@Input() required: string;\n\t@Input('notEmptyList') not_empty_list: string;\n\t@Input('anyObject') any_object: string;\n\n\t// String Rules\n\t@Input('equal') eq: string;\n\t@Input() string: string;\n\t@Input('lengthBetween') length_between: number[];\n\t@Input('lengthEqual') length_equal: number;\n\t@Input('minLength') min_length: number;\n\t@Input('maxLength') max_length: number;\n\t@Input('oneOf') one_of: string[];\n\t@Input('pattern') like: string;\n\n\t// Numeric Rules\n\t@Input() integer: string;\n\t@Input('positiveInteger') positive_integer: string;\n\t@Input() decimal: string;\n\t@Input('positiveDecimal') positive_decimal: string;\n\t@Input('maxNumber') max_number: number;\n\t@Input('minNumber') min_number: number;\n\n\t// Special Rules\n\t@Input() email: string;\n\t@Input() url: string;\n\t@Input('isoDate') iso_date: string;\n\t@Input('equalToField') equal_to_field: string;\n\t@Input('listOf') list_of: string[];\n\n\t@ViewChild(TemplateRef, { static: true }) templateRef: TemplateRef<any>;\n\n\tcontext: { $implicit: RuleComponent } = {\n\t\t$implicit: this\n\t};\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate templateHost: TemplateHostService\n\t) {\n\t\tthis.templateHost.key = () => `rule`;\n\t}\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tconst rule = {\n\t\t\tfor: this.for,\n\t\t\tkey: this.key\n\t\t};\n\n\t\tconst { model } = this.plugin;\n\t\tconst validation = model.validation;\n\t\tconst rules = Array.from(validation().rules);\n\n\t\tObject\n\t\t\t.keys(changes)\n\t\t\t.forEach(key => {\n\t\t\t\tif (!['for', 'key'].includes(key) && changes[key].firstChange) {\n\t\t\t\t\trule[key] = this[key];\n\t\t\t\t}\n\t\t\t});\n\n\t\trules.push(rule);\n\t\tvalidation({ rules });\n\t}\n}\n","<ng-template>\n\t<ng-content>\n\t</ng-content>\n</ng-template>","import { Component, Input, ChangeDetectionStrategy } from '@angular/core';\nimport { GridPlugin } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-validation',\n\ttemplate: '',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ValidationComponent {\n\t@Input() type: string;\n}\n","import { NgModule } from '@angular/core';\nimport { ValidatorComponent } from './validator.component';\nimport { RuleComponent } from './rule.component';\nimport { ValidationComponent } from './validation.component';\nimport { TemplateModule } from '@qgrid/ngx';\n\n@NgModule({\n\tdeclarations: [\n\t\tValidationComponent,\n\t\tValidatorComponent,\n\t\tRuleComponent\n\t],\n\texports: [\n\t\tValidationComponent,\n\t\tValidatorComponent,\n\t\tRuleComponent\n\t],\n\timports: [\n\t\tTemplateModule\n\t]\n})\nexport class ValidationModule {\n}\n","import { ChangeDetectionStrategy, Component, Input, OnInit } from '@angular/core';\nimport { GridPlugin, TemplateHostService } from '@qgrid/ngx';\nimport { ValidatorPlugin } from '@qgrid/plugins';\n\n@Component({\n\tselector: 'q-grid-validator',\n\ttemplateUrl: './validator.component.html',\n\tproviders: [TemplateHostService, GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ValidatorComponent implements OnInit {\n\t@Input() value: string;\n\t@Input() key: string;\n\t@Input() type: string;\n\tcontext: { $implicit: ValidatorPlugin };\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate templateHost: TemplateHostService\n\t) {\n\t\tthis.templateHost.key = () => `validator`;\n\t}\n\n\tngOnInit() {\n\t\tconst { model } = this.plugin;\n\t\tconst validator = new ValidatorPlugin(model, this);\n\t\tthis.context = { $implicit: validator };\n\t}\n}\n","<ng-container key=\"plugin-validator.tpl.html\"\n              [context]=\"context\"></ng-container>\n","import { Component, Input, OnChanges, ChangeDetectionStrategy } from '@angular/core';\nimport { GridPlugin } from '@qgrid/ngx';\n\n@Component({\n\tselector: 'q-grid-visibility',\n\ttemplate: '',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class VisibilityComponent implements OnChanges {\n\t@Input() head = true;\n\t@Input() foot = true;\n\t@Input() body = true;\n\t@Input() toolbarTop = true;\n\t@Input() toolbarBottom = true;\n\t@Input() toolbarRight = false;\n\t@Input() toolbarLeft = false;\n\n\t@Input() pinLeft = false;\n\t@Input() pinTop = false;\n\t@Input() pinRight = false;\n\t@Input() pinBottom = false;\n\n\tconstructor(private plugin: GridPlugin) {\n\t}\n\n\tngOnChanges() {\n\t\tconst { model } = this.plugin;\n\t\tmodel.visibility({\n\t\t\tbody: this.body,\n\t\t\tfoot: this.foot,\n\t\t\thead: this.head,\n\t\t\ttoolbar: {\n\t\t\t\tbottom: this.toolbarBottom,\n\t\t\t\tleft: this.toolbarLeft,\n\t\t\t\tright: this.toolbarRight,\n\t\t\t\ttop: this.toolbarTop,\n\t\t\t},\n\t\t\tpin: {\n\t\t\t\tbottom: this.pinBottom,\n\t\t\t\tleft: this.pinLeft,\n\t\t\t\tright: this.pinRight,\n\t\t\t\ttop: this.pinTop,\n\t\t\t},\n\t\t});\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { VisibilityComponent } from './visibility.component';\n\n@NgModule({\n\tdeclarations: [\n\t\tVisibilityComponent,\n\t],\n\texports: [\n\t\tVisibilityComponent\n\t],\n})\nexport class VisibilityModule {\n}\n","import {\n\tDirective,\n\tElementRef,\n\tContentChild,\n\tAfterViewInit,\n\tOutput,\n\tEventEmitter,\n\tNgZone\n} from '@angular/core';\nimport { MatChipInput } from '@angular/material/chips';\nimport { Shortcut } from 'ng2-qgrid';\nimport { ChipsDirective } from './chips.directive';\n\n@Directive({\n\tselector: '[q-grid-chips-push]'\n})\nexport class ChipsPushDirective implements AfterViewInit {\n\t@ContentChild(MatChipInput) inputComponent: MatChipInput;\n\t@ContentChild('qGridInput') inputElement: ElementRef;\n\n\t@Output('q-grid-chips-push') push = new EventEmitter<string>();\n\n\tconstructor(private zone: NgZone, private chipsDirective: ChipsDirective) { }\n\n\tngAfterViewInit() {\n\t\tthis.inputComponent.chipEnd.subscribe(e => {\n\t\t\t// we need to override it to prevent default behavior\n\t\t});\n\n\t\tconst input = this.inputElement.nativeElement;\n\t\tthis.zone.runOutsideAngular(() =>\n\t\t\tinput.addEventListener('keydown', e => {\n\t\t\t\tconst code = Shortcut.translate(e);\n\t\t\t\tif (code === 'enter') {\n\t\t\t\t\tconst value = (input.value || '').trim() as string;\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tthis.push.emit(value);\n\n\t\t\t\t\t\tinput.value = '';\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\tthis.chipsDirective.tick();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n}\n","import {\n\tDirective,\n\tContentChild,\n\tAfterViewInit,\n\tOutput,\n\tEventEmitter\n} from '@angular/core';\nimport { ChipsDirective } from './chips.directive';\nimport { MatChip } from '@angular/material/chips';\n\n@Directive({\n\tselector: '[q-grid-chips-remove]'\n})\nexport class ChipsRemoveDirective implements AfterViewInit {\n\t@ContentChild(MatChip) list: MatChip;\n\t@Output('q-grid-chips-remove') remove = new EventEmitter<any>();\n\n\tconstructor(private chipsDirective: ChipsDirective) { }\n\n\tngAfterViewInit() {\n\t\tthis.list.removed.subscribe(() => {\n\t\t\tif (this.remove) {\n\t\t\t\tthis.remove.emit();\n\t\t\t\tthis.chipsDirective.tick();\n\t\t\t}\n\t\t});\n\t}\n}\n","import { Directive, ApplicationRef } from '@angular/core';\n\n@Directive({\n\tselector: '[q-grid-chips]'\n})\nexport class ChipsDirective {\n\tconstructor(\n\t\tprivate app: ApplicationRef\n\t) { }\n\n\ttick() {\n\t\tthis.app.tick();\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { ChipsDirective } from './chips.directive';\nimport { ChipsPushDirective } from './chips-push.directive';\nimport { ChipsRemoveDirective } from './chips-remove.directive';\n\n@NgModule({\n\tdeclarations: [\n\t\tChipsDirective,\n\t\tChipsPushDirective,\n\t\tChipsRemoveDirective,\n\t],\n\texports: [\n\t\tChipsDirective,\n\t\tChipsPushDirective,\n\t\tChipsRemoveDirective,\n\t]\n})\nexport class ChipsModule {\n}\n","import { DatePipe } from '@angular/common';\nimport { Directive, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { DateAdapter } from '@angular/material/core';\nimport { FormatDateAdapter } from './format-date-adapter';\n\n@Directive({\n\tselector: '[q-grid-date-adapter]',\n\tproviders: [\n\t\tDatePipe,\n\t\t{ provide: DateAdapter, useClass: FormatDateAdapter }\n\t]\n})\nexport class DateAdapterDirective implements OnChanges {\n\t@Input('q-grid-date-adapter') format: string;\n\n\tconstructor(\n\t\tdatePipe: DatePipe,\n\t\tprivate adapter: DateAdapter<Date>) {\n\t\tconst formatAdapter = this.adapter as FormatDateAdapter;\n\t\tformatAdapter.datePipe = datePipe;\n\t}\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tif (changes.format) {\n\t\t\tconst formatAdapter = this.adapter as FormatDateAdapter;\n\t\t\tformatAdapter.useFormat = this.format;\n\t\t}\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { DateAdapterDirective } from './date-adapter.directive';\n\n@NgModule({\n\tdeclarations: [DateAdapterDirective],\n\texports: [DateAdapterDirective]\n})\nexport class DateAdapterModule { }\n","import { DatePipe } from '@angular/common';\nimport { NativeDateAdapter } from '@angular/material/core';\n\nexport class FormatDateAdapter extends NativeDateAdapter {\n\tuseFormat: string;\n\tdatePipe: DatePipe;\n\n\tformat(date: Date, displayFormat: Object): string {\n\t\tif (this.useFormat) {\n\t\t\treturn this.datePipe.transform(date, this.useFormat);\n\t\t}\n\n\t\treturn super.format(date, displayFormat);\n\t}\n}\n","import {\n\tDirective,\n\tContentChild,\n\tEventEmitter,\n\tOutput,\n\tAfterViewInit\n} from '@angular/core';\nimport { MatMenuTrigger } from '@angular/material/menu';\nimport { Disposable, Guard } from 'ng2-qgrid';\n\n@Directive({\n\tselector: '[q-grid-menu-trigger]',\n\tproviders: [Disposable]\n})\nexport class MenuTriggerDirective implements AfterViewInit {\n\t@ContentChild(MatMenuTrigger, { static: true }) trigger: MatMenuTrigger;\n\t@Output('q-grid-menu-trigger') close = new EventEmitter<any>();\n\n\tconstructor(private disposable: Disposable) {\n\t}\n\n\tngAfterViewInit() {\n\t\tGuard.notNull(this.trigger, 'trigger');\n\n\t\tsetTimeout(() => this.trigger.openMenu(), 10);\n\n\t\tthis.disposable.add(\n\t\t\tthis.trigger\n\t\t\t\t.menuClosed\n\t\t\t\t.subscribe(() => {\n\t\t\t\t\tif (this.close) {\n\t\t\t\t\t\tsetTimeout(() => this.close.emit(), 10);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t);\n\t}\n}\n","import { Directive, ElementRef, NgZone } from '@angular/core';\n\n@Directive({\n\tselector: '[q-grid-menu]'\n})\nexport class MenuDirective {\n\tconstructor(element: ElementRef, zone: NgZone) {\n\t\tzone.runOutsideAngular(() =>\n\t\t\telement.nativeElement.addEventListener('click', e => e.stopPropagation())\n\t\t);\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { MenuDirective } from './menu.directive';\nimport { MenuTriggerDirective } from './menu-trigger.directive';\n\n@NgModule({\n\tdeclarations: [MenuDirective, MenuTriggerDirective],\n\texports: [MenuDirective, MenuTriggerDirective]\n})\nexport class MenuModule {}\n","import { Directive, AfterViewInit, ContentChild } from '@angular/core';\nimport { MatSelect } from '@angular/material/select';\n\n@Directive({\n\tselector: '[q-grid-select]'\n})\nexport class SelectDirective implements AfterViewInit {\n\t@ContentChild(MatSelect) private input: MatSelect;\n\n\tngAfterViewInit() {\n\t\tthis.input.focus();\n\t\tsetTimeout(() => this.input.open(), 10);\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { SelectDirective } from './select.directive';\n\n@NgModule({\n\tdeclarations: [SelectDirective],\n\texports: [SelectDirective]\n})\nexport class SelectModule {}\n","import { Directive, ElementRef, Renderer2, AfterViewInit } from '@angular/core';\nimport { GridError, GridPlugin } from 'ng2-qgrid';\n\n@Directive({\n\tselector: '[q-grid-theme-overlay]',\n\tproviders: [GridPlugin]\n})\nexport class ThemeOverlayDirective implements AfterViewInit {\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate elementRef: ElementRef,\n\t\tprivate renderer: Renderer2) {\n\t}\n\n\tngAfterViewInit(): void {\n\t\tconst { model } = this.plugin;\n\t\tconst element = this.elementRef.nativeElement;\n\t\tlet parent = this.renderer.parentNode(element);\n\t\tlet overlayContainer: any = null;\n\n\t\twhile (parent && !(parent.id && parent.id.startsWith('cdk-overlay'))) {\n\t\t\tparent = this.renderer.parentNode(parent);\n\t\t\tif (parent.nodeName === 'BODY') {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (parent.nodeName !== 'BODY') {\n\t\t\toverlayContainer = parent;\n\t\t}\n\n\t\tif (!overlayContainer) {\n\t\t\tthrow new GridError(\n\t\t\t\t'theme-overlay.directive',\n\t\t\t\t`cdk-overlay container is not found`\n\t\t\t);\n\t\t}\n\n\t\tmodel.style().classList.forEach(cssClass => {\n\t\t\tthis.renderer.addClass(overlayContainer, cssClass);\n\t\t});\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { ThemeOverlayDirective } from './theme-overlay.directive';\n\n@NgModule({\n\tdeclarations: [\n\t\tThemeOverlayDirective\n\t],\n\texports: [\n\t\tThemeOverlayDirective\n\t]\n})\nexport class ThemeOverlayModule {\n}\n","import { ChangeDetectionStrategy, Component, ViewEncapsulation } from '@angular/core';\n\n@Component({\n\tselector: 'q-grid-theme',\n\tstyleUrls: ['./theme.component.scss'],\n\ttemplateUrl: './theme.component.gen.html',\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class ThemeComponent {\n}\n","<ng-template key=\"body-cell-array-of-date.tpl.html\"\n\t\t\t let-$cell>\n\t<ul>\n\t\t<li *ngFor=\"let item of $cell.label | qGridArray\">\n\t\t\t{{item}}\n\t\t</li>\n\t</ul>\n</ng-template><ng-template key=\"body-cell-array-of-datetime.tpl.html\"\n\t\t\t let-$cell>\n\t<ul>\n\t\t<li *ngFor=\"let item of $cell.label | qGridArray\">\n\t\t\t{{item}}\n\t\t</li>\n\t</ul>\n</ng-template><ng-template key=\"body-cell-array-of-number.tpl.html\"\n\t\t\t let-$cell>\n\t<ul>\n\t\t<li *ngFor=\"let item of $cell.value | qGridArray\">{{item | qGridNumber: $cell.column.itemFormat}}</li>\n\t</ul>\n</ng-template><ng-template key=\"body-cell-array.tpl.html\"\n             let-$cell>\n\t<ul>\n\t\t<li *ngFor=\"let item of $cell.value | qGridArray\">{{item | qGridItemLabel : $cell.column.itemLabel}}</li>\n\t</ul>\n</ng-template><ng-template key=\"body-cell-bool.tpl.html\"\n             let-$cell>\n    <mat-icon class=\"q-grid-icon\"\n              *ngIf=\"$cell.value === $cell.column.trueValue\">\n        check\n    </mat-icon>\n    <mat-icon class=\"q-grid-icon\"\n              *ngIf=\"$cell.column.isIndeterminate($cell.value)\">\n        remove\n    </mat-icon>\n</ng-template><ng-template key=\"body-cell-currency.tpl.html\"\n             let-$cell>\n\t{{$cell.value | qGridCurrency: $cell.column.code}}\n</ng-template><ng-template key=\"body-cell-date.tpl.html\" let-$cell>\n\t{{$cell.label}}\n</ng-template>\n<ng-template key=\"body-cell-datetime.tpl.html\" let-$cell>\n\t{{$cell.label}}\n</ng-template>\n<ng-template key=\"body-cell-email.tpl.html\"\n             let-$cell\n             let-$view=\"$view\">\n    <a href=\"mailto:{{$cell.value}}\"\n       tabindex=\"-1\">\n        {{$cell.label || $cell.value}}\n    </a>\n    <button *ngIf=\"$view.edit.cell.canEdit($cell)\"\n            class=\"q-grid-url-edit q-grid-edit-trigger\"\n            color=\"primary\"\n            mat-icon-button\n            matTooltip=\"Edit Email\"\n            [matTooltipShowDelay]=\"800\"\n            matTooltipPosition=\"before\"\n            [q-grid-command]=\"$view.edit.cell.enter\"\n            [q-grid-command-arg]=\"$cell\"\n            tabindex=\"-1\"\n            aria-label=\"'email'\">\n        <mat-icon class=\"q-grid-icon\">edit</mat-icon>\n    </button>\n</ng-template><ng-template key=\"body-cell-file.tpl.html\"\n             let-$cell\n             let-$view=\"$view\">\n    <a [href]=\"$cell.value\"\n       tabindex=\"-1\">\n        {{$cell.label || $cell.value}}\n    </a>\n    <button *ngIf=\"$view.edit.cell.canEdit($cell)\"\n            mat-icon-button\n            class=\"q-grid-file-edit q-grid-edit-trigger\"\n            matTooltip=\"Upload\"\n            [q-grid-command]=\"$view.edit.cell.enter\"\n            [q-grid-command-arg]=\"$cell\"\n            aria-label=\"Upload file\"\n            tabindex=\"-1\">\n        <mat-icon class=\"q-grid-icon\">file_upload</mat-icon>\n    </button>\n</ng-template><ng-template key=\"body-cell-group.tpl.html\"\n\t\t\t let-$cell\n\t\t\t let-$view=\"$view\">\n\t<div [ngStyle]=\"{'padding-left': $view.group.offset($cell.row, $cell.column) + 'px'}\"\n\t\t *ngIf=\"$view.group.isVisible($cell.row, $cell.column)\">\n\t\t<button mat-icon-button\n\t\t\t\t[q-grid-command]=\"$view.group.toggleStatus\"\n\t\t\t\t[q-grid-command-arg]=\"[$cell.row, $cell.column]\"\n\t\t\t\t[ngClass]=\"'q-grid-' + $view.group.status($cell.row, $cell.column)\"\n\t\t\t\ttabindex=\"-1\">\n\t\t\t<mat-icon class=\"q-grid-icon\">\n\t\t\t\tchevron_right\n\t\t\t</mat-icon>\n\n\t\t\t<span class=\"q-grid-group-label\">\n\t\t\t\t{{$view.group.value($cell.row, $cell.column)}}\n\t\t\t</span>\n\t\t\t<span class=\"q-grid-group-count\">\n\t\t\t\t({{$view.group.count($cell.row, $cell.column)}})\n\t\t\t</span>\n\t\t</button>\n\t</div>\n</ng-template><ng-template key=\"body-cell-image.tpl.html\"\n             let-$cell>\n\t<img *ngIf=\"$cell.value\"\n\t     [src]=\"$cell.value\" />\n\t<mat-icon class=\"q-grid-icon\"\n\t          *ngIf=\"!$cell.value\">\n\t\tinsert_photo\n\t</mat-icon>\n</ng-template><ng-template key=\"body-cell-number.tpl.html\"\n             let-$cell>\n\t{{$cell.label | qGridNumber: $cell.column.format}}\n</ng-template>\n<ng-template key=\"body-cell-password.tpl.html\">\n    ***\n</ng-template><ng-template key=\"body-cell-reference.tpl.html\"\n\t\t\t let-$cell\n\t\t\t let-$view=\"$view\">\n\t<span>{{$cell.label}}</span>\n\t<button *ngIf=\"$view.edit.cell.canEdit($cell)\"\n\t\t\tclass=\"q-grid-reference-edit q-grid-edit-trigger\"\n\t\t\ttype=\"button\"\n\t\t\tmat-icon-button\n\t\t\tmatTooltip=\"Edit reference\"\n\t\t\tmatTooltipPosition=\"below\"\n\t\t\t[q-grid-command]=\"$view.edit.cell.enter\"\n\t\t\t[q-grid-command-arg]=\"$cell\"\n\t\t\ttabindex=\"-1\">\n\t\t<mat-icon matSuffix\n\t\t\t\t  class=\"q-grid-icon\">\n\t\t\tsearch\n\t\t</mat-icon>\n\t</button>\n</ng-template><ng-template key=\"body-cell-row-expand.tpl.html\"\n\t\t\t let-$cell\n\t\t\t let-$view=\"$view\">\n\t<button mat-icon-button\n\t\t\t[q-grid-command]=\"$view.rowDetails.toggleStatus\"\n\t\t\t[q-grid-command-arg]=\"$cell.row\"\n\t\t\t[ngClass]=\"'q-grid-' + $view.rowDetails.status($cell.row)\"\n\t\t\ttabindex=\"-1\">\n\t\t<mat-icon class=\"q-grid-icon\">\n\t\t\tchevron_right\n\t\t</mat-icon>\n\t</button>\n</ng-template><ng-template key=\"body-cell-row-indicator.tpl.html\"\n             let-$cell\n             let-$view=\"$view\">\n\t<ng-container *ngIf=\"$view.row.canMove\">\n\t\t<div [q-grid-drag]=\"$view.row.drag\"\n\t\t     [q-grid-drag-data]=\"$cell.rowIndex\"\n\t\t     q-grid-drop-area=\"body\">\n\t\t\t<mat-icon class=\"q-grid-icon\">drag_indicator</mat-icon>\n\t\t</div>\n\t</ng-container>\n\t<ng-container *ngIf=\"$view.row.canResize\">\n\t\t<div [q-grid-drag]=\"$view.row.resize\"\n\t\t\t [q-grid-resize]=\"$cell.row\"\n\t\t\t q-grid-resize-selector=\"parent\"\n\t\t     q-grid-resize-path=\"rows\"\n\t\t     [q-grid-can-resize]=\"$view.row.resize.canExecute\">\n\t\t</div>\n\t</ng-container>\n</ng-template><ng-template key=\"body-cell-row-number.tpl.html\" \n\t\t\t\t\t\t let-$cell let-$view=\"$view\">\n\t{{ $cell.rowIndex + $cell.column.startNumber + $view.pagination.current * $view.pagination.size }}\n</ng-template><ng-template key=\"body-cell-row-options.tpl.html\">\n    <mat-icon class=\"q-grid-icon\">\n        more_vert\n    </mat-icon>\n</ng-template><ng-template key=\"body-cell-select-the-$select-singleOnly.tpl.html\"\n\t\t\t let-$cell\n\t\t\t let-$view=\"$view\">\n\t<ng-container [q-grid-dirty]=\"$view.selection.stateCheck | async\">\n\t\t<mat-radio-button [checked]=\"$view.selection.state($cell.row)\"\n\t\t\t\t\t\t  [disabled]=\"!$view.selection.state($cell.row) && !$view.selection.toggleRow.canExecute($cell.row)\"\n\t\t\t\t\t\t  (change)=\"$view.selection.toggleRow.execute($cell.row)\"\n\t\t\t\t\t\t  tabindex=\"-1\"\n\t\t\t\t\t\t  aria-label=\"Select\"\n\t\t\t\t\t\t  class=\"q-grid-radio\">\n\t\t</mat-radio-button>\n\t</ng-container>\n</ng-template><ng-template key=\"body-cell-select.tpl.html\"\n\t\t\t let-$cell\n\t\t\t let-$view=\"$view\">\n\t<ng-container [q-grid-dirty]=\"$view.selection.stateCheck | async\">\n\t\t<mat-checkbox [indeterminate]=\"$view.selection.isIndeterminate($cell.row)\"\n\t\t\t\t\t  [checked]=\"$view.selection.state($cell.row)\"\n\t\t\t\t\t  [disabled]=\"!$view.selection.toggleRow.canExecute($cell.row)\"\n\t\t\t\t\t  (change)=\"$view.selection.toggleRow.execute($cell.row)\"\n\t\t\t\t\t  tabindex=\"-1\"\n\t\t\t\t\t  aria-label=\"Select\"\n\t\t\t\t\t  class=\"q-grid-checkbox\">\n\t\t</mat-checkbox>\n\t</ng-container>\n</ng-template><ng-template key=\"body-cell-text.tpl.html\"\n             let-$cell>\n    {{$cell.label}}\n</ng-template><ng-template key=\"body-cell-time.tpl.html\"\n             let-$cell>\n    {{$cell.label | qGridTime: $cell.column.format}}\n</ng-template><ng-template key=\"body-cell-tooltip.tpl.html\" let-$cell>\n    {{ $cell.label }}\n</ng-template>\n<ng-template key=\"body-cell-url.tpl.html\"\n             let-$cell\n             let-$view=\"$view\">\n    <a [attr.href]=\"$cell.value\"\n       tabindex=\"-1\"\n       target=\"_blank\">\n        {{$cell.label || $cell.value}}\n    </a>\n    <button *ngIf=\"$view.edit.cell.canEdit($cell)\"\n            class=\"q-grid-url-edit q-grid-edit-trigger\"\n            mat-icon-button\n            aria-label=\"url\"\n            tabindex=\"-1\"\n            matTooltip=\"Edit Url\"\n            matTooltipPosition=\"below\"\n            [matTooltipShowDelay]=\"800\"\n            [q-grid-command]=\"$view.edit.cell.enter\"\n            [q-grid-command-arg]=\"$cell\">\n        <mat-icon class=\"q-grid-icon\">edit</mat-icon>\n    </button>\n</ng-template><ng-template key=\"column-filter-cell-currency.tpl.html\"\n             let-$item\n             let-$list=\"itemList\">\n    <span [innerHTML]=\"$item.value | qGridCurrency: $list.column.code | qGridHighlight: $list.search\"></span>\n</ng-template><ng-template key=\"column-filter-cell-date.tpl.html\"\n             let-$item\n             let-$list=\"itemList\">\n    <span [innerHTML]=\"$item.value | qGridDate: $list.column.format | qGridHighlight: $list.search\"></span>\n</ng-template><ng-template key=\"column-filter-cell-datetime.tpl.html\"\n             let-$item\n             let-$list=\"itemList\">\n    <span [innerHTML]=\"$item.value | qGridDate: $list.column.format | qGridHighlight: $list.search\"></span>\n</ng-template><ng-template key=\"column-filter-cell-number.tpl.html\"\n             let-$item\n             let-$list=\"itemList\">\n    <span [innerHTML]=\"$item.value | qGridNumber: $list.column.format | qGridHighlight: $list.search\"></span>\n</ng-template><ng-template key=\"column-filter-cell-text.tpl.html\"\n             let-$item\n             let-$list=\"itemList\">\n    <span [innerHTML]=\"$item.value | qGridHighlight: $list.search\"></span>\n</ng-template><ng-template key=\"edit-cell-array.tpl.html\"\n\t\t\t let-$cell\n\t\t\t let-$view=\"$view\">\n\t<q-grid-cell-editor class=\"q-grid-array q-grid-editor q-grid-position\"\n\t\t\t\t\t\t(close)=\"$view.edit.cell.exit.execute($cell)\"\n\t\t\t\t\t\tq-grid-position=\"td\"\n\t\t\t\t\t\tq-grid-chips>\n\t\t<div class=\"q-grid-array-view\">\n\t\t\t<mat-chip-list #chipList>\n\t\t\t\t<ng-container *ngFor=\"let value of $view.edit.cell.value;let $index = index\"\n\t\t\t\t\t\t\t  (q-grid-chips-remove)=\"$view.edit.cell.value.splice($index, 1)\">\n\t\t\t\t\t<mat-chip class=\"q-grid-array-item\"\n\t\t\t\t\t\t\t  selectable=\"true\"\n\t\t\t\t\t\t\t  removable=\"true\">\n\t\t\t\t\t\t{{value}}\n\t\t\t\t\t\t<mat-icon class=\"q-grid-icon\"\n\t\t\t\t\t\t\t\t  matChipRemove>\n\t\t\t\t\t\t\tcancel\n\t\t\t\t\t\t</mat-icon>\n\t\t\t\t\t</mat-chip>\n\t\t\t\t</ng-container>\n\t\t\t</mat-chip-list>\n\t\t</div>\n\t\t<mat-form-field (q-grid-chips-push)=\"($view.edit.cell.value || []).push($event)\"\n\t\t\t\t\t\t[floatLabel]=\"'never'\">\n\t\t\t<input class=\"q-grid-array-input\"\n\t\t\t\t   matInput\n\t\t\t\t   type={{$cell.column.itemType}}\n\t\t\t\t   #qGridInput\n\t\t\t\t   q-grid-focus\n\t\t\t\t   [matChipInputFor]=\"chipList\" />\n\t\t</mat-form-field>\n\t\t<q-grid-validator class=\"q-grid-validator\"\n\t\t\t\t\t\t  [key]=\"$cell.column.key\"\n\t\t\t\t\t\t  [type]=\"$cell.column.type\"\n\t\t\t\t\t\t  [value]=\"$view.edit.cell.value\">\n\t\t</q-grid-validator>\n\t</q-grid-cell-editor>\n</ng-template><ng-template key=\"edit-cell-autocomplete.tpl.html\"\n             let-$cell\n             let-$view=\"$view\">\n    <q-grid-cell-editor class=\"q-grid-editor q-grid-position\"\n                        (close)=\"$view.edit.cell.exit.execute($cell)\"\n                        q-grid-position=\"td\">\n        <q-grid-autocomplete-editor>\n        </q-grid-autocomplete-editor>\n        <q-grid-validator class=\"q-grid-validator\"\n                          [key]=\"$cell.column.key\"\n                          [type]=\"$cell.column.type\"\n                          [value]=\"$view.edit.cell.value\">\n        </q-grid-validator>\n    </q-grid-cell-editor>\n</ng-template><ng-template key=\"edit-cell-bool.tpl.html\"\n             let-$cell\n             let-$view=\"$view\">\n    <q-grid-bool-editor [autofocus]=\"true\"\n                        [column]=\"$cell.column\"\n                        [(value)]=\"$view.edit.cell.value\">\n    </q-grid-bool-editor>\n</ng-template><ng-template key=\"edit-cell-currency.tpl.html\"\n\t\t\t let-$cell\n\t\t\t let-$view=\"$view\">\n\t<q-grid-cell-editor class=\"q-grid-currency q-grid-editor q-grid-position q-grid-text\"\n\t\t\t\t\t\t(close)=\"$view.edit.cell.exit.execute($cell)\"\n\t\t\t\t\t\tq-grid-position=\"td\">\n\t\t<mat-form-field>\n\t\t\t<input matInput\n\t\t\t\t   type=\"number\"\n\t\t\t\t   #input\n\t\t\t\t   q-grid-focus\n\t\t\t\t   [(ngModel)]=\"$view.edit.cell.value\" />\n\t\t</mat-form-field>\n\t\t<q-grid-validator class=\"q-grid-validator\"\n\t\t\t\t\t\t  [key]=\"$cell.column.key\"\n\t\t\t\t\t\t  [type]=\"$cell.column.type\"\n\t\t\t\t\t\t  [value]=\"$view.edit.cell.value\">\n\t\t</q-grid-validator>\n\t</q-grid-cell-editor>\n</ng-template><ng-template key=\"edit-cell-date.tpl.html\"\n\t\t\t let-$cell\n\t\t\t let-$view=\"$view\">\n\t<q-grid-cell-editor class=\"q-grid-date q-grid-editor q-grid-position q-grid-text\"\n\t\t\t\t\t\t(close)=\"$view.edit.cell.exit.execute($cell)\"\n\t\t\t\t\t\tq-grid-position=\"td\">\n\n\t\t<mat-form-field *q-grid-date=\"let qGridDate\"\n\t\t\t\t\t\t[q-grid-date-adapter]=\"$cell.column.format\"\n\t\t\t\t\t\t[ngClass]=\"{'mat-form-field-invalid': !qGridDate.isValid(input.value, $cell.column.format)}\">\n\n\t\t\t<mat-label>\n\t\t\t</mat-label>\n\n\t\t\t<input #input\n\t\t\t\t   q-grid-focus\n\t\t\t\t   matInput\n\t\t\t\t   [q-grid-date-mask]=\"$cell.column.format\"\n\t\t\t\t   [placeholder]=\"$cell.column.format\"\n\t\t\t\t   [matDatepicker]=\"picker\"\n\t\t\t\t   [value]=\"$view.edit.cell.value | qGridConvert: 'date'\"\n\t\t\t\t   (dateChange)=\"$view.edit.cell.value = qGridDate.dateLow($event.value)\"\n\t\t\t\t   (input)=\"qGridDate.isValid(input.value, $cell.column.format) && ($view.edit.cell.value = qGridDate.dateLow(input.value, $cell.column.format))\" />\n\n\t\t\t<mat-datepicker-toggle matSuffix\n\t\t\t\t\t\t\t\t   [for]=\"picker\">\n\t\t\t</mat-datepicker-toggle>\n\n\t\t\t<mat-datepicker #picker\n\t\t\t\t\t\t\tpanelClass=\"q-grid-editor-part\">\n\t\t\t</mat-datepicker>\n\n\t\t</mat-form-field>\n\n\t\t<q-grid-validator class=\"q-grid-validator\"\n\t\t\t\t\t\t  [key]=\"$cell.column.key\"\n\t\t\t\t\t\t  [type]=\"$cell.column.type\"\n\t\t\t\t\t\t  [value]=\"$view.edit.cell.value\">\n\t\t</q-grid-validator>\n\t</q-grid-cell-editor>\n</ng-template><ng-template key=\"edit-cell-datetime.tpl.html\"\n\t\t\t let-$cell\n\t\t\t let-$view=\"$view\">\n\t<q-grid-cell-editor class=\"q-grid-editor q-grid-position q-grid-text q-grid-datetime\"\n\t\t\t\t\t\t(close)=\"$view.edit.cell.exit.execute($cell)\"\n\t\t\t\t\t\tq-grid-position=\"td\">\n\n\t\t<q-grid-tab-trap>\n\t\t\t<mat-form-field *q-grid-date=\"let qGridDate\"\n\t\t\t\t\t\t\tclass=\"q-grid-datetime-date\"\n\t\t\t\t\t\t\t[q-grid-date-adapter]=\"$cell.column.dateFormat\"\n\t\t\t\t\t\t\t[ngClass]=\"{'mat-form-field-invalid': !qGridDate.isValid(input.value, $cell.column.dateFormat)}\">\n\n\t\t\t\t<mat-label>\n\t\t\t\t</mat-label>\n\n\t\t\t\t<input q-grid-focus\n\t\t\t\t\t   matInput\n\t\t\t\t\t   #input\n\t\t\t\t\t   [q-grid-date-mask]=\"$cell.column.dateFormat\"\n\t\t\t\t\t   [placeholder]=\"$cell.column.dateFormat\"\n\t\t\t\t\t   [matDatepicker]=\"picker\"\n\t\t\t\t\t   [value]=\"$view.edit.cell.value | qGridConvert: 'date'\"\n\t\t\t\t\t   (dateChange)=\"$view.edit.cell.value = qGridDate.datetime($view.edit.cell.value, $event.value, $cell.column.dateFormat)\"\n\t\t\t\t\t   (input)=\"qGridDate.isValid(input.value, $cell.column.dateFormat) && ($view.edit.cell.value = qGridDate.datetime($view.edit.cell.value, input.value, $cell.column.dateFormat))\" />\n\n\t\t\t\t<mat-datepicker-toggle matSuffix\n\t\t\t\t\t\t\t\t\t   [for]=\"picker\">\n\t\t\t\t</mat-datepicker-toggle>\n\n\t\t\t\t<mat-datepicker #picker\n\t\t\t\t\t\t\t\tpanelClass=\"q-grid-editor-part\">\n\t\t\t\t</mat-datepicker>\n\n\t\t\t</mat-form-field>\n\n\t\t\t<mat-form-field *q-grid-time=\"let qGridTime\"\n\t\t\t\t\t\t\tclass=\"q-grid-datetime-time\">\n\t\t\t\t<input matInput\n\t\t\t\t\t   type=\"time\"\n\t\t\t\t\t   #input\n\t\t\t\t\t   [value]=\"$view.edit.cell.value | qGridTime: 'HH:mm'\"\n\t\t\t\t\t   (change)=\"$view.edit.cell.value = qGridTime.time($view.edit.cell.value, input.value)\" />\n\t\t\t</mat-form-field>\n\t\t</q-grid-tab-trap>\n\n\t\t<q-grid-validator class=\"q-grid-validator\"\n\t\t\t\t\t\t  [key]=\"$cell.column.key\"\n\t\t\t\t\t\t  [type]=\"$cell.column.type\"\n\t\t\t\t\t\t  [value]=\"$view.edit.cell.value\">\n\t\t</q-grid-validator>\n\t</q-grid-cell-editor>\n</ng-template><ng-template key=\"edit-cell-dropdown.tpl.html\"\n\t\t\t let-$cell\n\t\t\t let-$view=\"$view\">\n\t<ng-container q-grid-select>\n\t\t<mat-select class=\"q-grid-dropdown\"\n\t\t\t\t\tdisableRipple\n\t\t\t\t\t[(value)]=\"$view.edit.cell.value\"\n\t\t\t\t\t(selectionChange)=\"$view.edit.cell.exit.execute()\">\n\t\t\t<mat-option *ngFor=\"let option of $view.edit.cell.fetch.result\"\n\t\t\t\t\t\t[value]=\"option\"\n\t\t\t\t\t\tq-grid-stop-propagate=\"mousedown\">\n\t\t\t\t{{option | qGridItemLabel : $cell.column.itemLabel}}\n\t\t\t</mat-option>\n\t\t</mat-select>\n\t</ng-container>\n\n</ng-template><ng-template key=\"edit-cell-email.tpl.html\"\n\t\t\t let-$cell\n\t\t\t let-$view=\"$view\">\n\t<q-grid-cell-editor class=\"q-grid-email q-grid-editor q-grid-position\"\n\t\t\t\t\t\t(close)=\"$view.edit.cell.exit.execute($cell)\"\n\t\t\t\t\t\tq-grid-position=\"td\">\n\t\t<q-grid-tab-trap>\n\t\t\t<div class=\"q-grid-flex q-grid-layout-column q-grid-email-fields\">\n\t\t\t\t<mat-form-field *ngIf=\"$cell.column.label !== null\">\n\t\t\t\t\t<input matInput\n\t\t\t\t\t\t   type=\"text\"\n\t\t\t\t\t\t   [(ngModel)]=\"$view.edit.cell.label\"\n\t\t\t\t\t\t   placeholder=\"Label\" />\n\t\t\t\t</mat-form-field>\n\t\t\t\t<mat-form-field>\n\t\t\t\t\t<input q-grid-focus\n\t\t\t\t\t\t   matInput\n\t\t\t\t\t\t   type=\"email\"\n\t\t\t\t\t\t   [(ngModel)]=\"$view.edit.cell.value\"\n\t\t\t\t\t\t   placeholder=\"Email\" />\n\t\t\t\t</mat-form-field>\n\t\t\t</div>\n\t\t\t<q-grid-validator class=\"q-grid-validator\"\n\t\t\t\t\t\t\t  [key]=\"$cell.column.key\"\n\t\t\t\t\t\t\t  [type]=\"$cell.column.type\"\n\t\t\t\t\t\t\t  [value]=\"$view.edit.cell.value\">\n\t\t\t</q-grid-validator>\n\t\t</q-grid-tab-trap>\n\t</q-grid-cell-editor>\n</ng-template><ng-template key=\"edit-cell-file.tpl.html\"\n             let-$cell\n             let-$view=\"$view\">\n    <q-grid-cell-editor class=\"q-grid-editor q-grid-file q-grid-position\"\n                        (close)=\"$view.edit.cell.cancel.execute($cell)\"\n                        q-grid-position=\"td\">\n        <div class=\"q-grid-layout-column q-grid-flex\">\n            <div class=\"q-grid-file-upload-area\"\n                 [ngClass]=\"{'q-grid-file-has-preview': $cell.column.hasPreview($view.edit.cell.label)}\">\n                <div class=\"q-grid-layout-column q-grid-file-upload-message\"\n                     [ngSwitch]=\"!!$view.edit.cell.value\">\n                    <span class=\"q-grid-file-upload-filename\"\n                          *ngSwitchCase=\"true\">\n                        {{$view.edit.cell.label}}\n                    </span>\n                    <div class=\"q-grid-layout-row q-grid-layout-align-center-center\">\n                        <mat-icon>file_upload</mat-icon>\n                        <span *ngSwitchCase=\"false\">Drag and drop a file here or click</span>\n                        <span *ngSwitchCase=\"true\">Drag and drop or click to replace </span>\n                    </div>\n                </div>\n                <input [(q-grid-file)]=\"$view.edit.cell.value\"\n                       [(q-grid-file-label)]=\"$view.edit.cell.label\"\n                       [q-grid-file-is-valid]=\"$cell.column.canUpload\"\n                       type=\"file\" />\n                <div class=\"q-grid-file-preview\"\n                     *ngIf=\"$cell.column.hasPreview($view.edit.cell.label)\">\n                    <img [src]=\"$view.edit.cell.value\" />\n                </div>\n            </div>\n        </div>\n        <div class=\"q-grid-actions\">\n            <button mat-button\n                    color=\"primary\"\n                    [q-grid-command]=\"$view.edit.cell.commit\"\n                    [q-grid-command-arg]=\"$cell\">\n                Save\n            </button>\n            <button mat-button\n                    [q-grid-command]=\"$view.edit.cell.clear\"\n                    [q-grid-command-arg]=\"$cell\">\n                Clear\n            </button>\n            <button mat-button\n                    [q-grid-command]=\"$view.edit.cell.cancel\"\n                    [q-grid-command-arg]=\"$cell\">\n                Cancel\n            </button>\n        </div>\n    </q-grid-cell-editor>\n</ng-template><ng-template key=\"edit-cell-image.tpl.html\"\n             let-$cell\n             let-$view=\"$view\">\n    <q-grid-cell-editor class=\"q-grid-editor q-grid-file q-grid-position\"\n                        (close)=\"$view.edit.cell.cancel.execute($cell)\"\n                        q-grid-position=\"td\">\n        <div class=\"q-grid-layout-column q-grid-flex\">\n            <div class=\"q-grid-file-upload-area\"\n                 [ngClass]=\"{'q-grid-file-has-preview': $cell.column.hasPreview($view.edit.cell.label)}\">\n                <div class=\"q-grid-layout-column q-grid-file-upload-message\"\n                     [ngSwitch]=\"!!$view.edit.cell.value\">\n                    <span class=\"q-grid-file-upload-filename\"\n                          *ngSwitchCase=\"true\">\n                        {{$view.edit.cell.label}}\n                    </span>\n                    <div class=\"q-grid-layout-row q-grid-layout-align-center-center\">\n                        <mat-icon>file_upload</mat-icon>\n                        <span *ngSwitchCase=\"false\">Drag and drop an image here or click</span>\n                        <span *ngSwitchCase=\"true\">Drag and drop or click to replace </span>\n                    </div>\n                </div>\n                <input [(q-grid-file)]=\"$view.edit.cell.value\"\n                       [(q-grid-file-label)]=\"$view.edit.cell.label\"\n                       [q-grid-file-is-valid]=\"$cell.column.canUpload\"\n                       type=\"file\" />\n                <div class=\"q-grid-file-preview\"\n                     *ngIf=\"$cell.column.hasPreview($view.edit.cell.label)\">\n                    <img [src]=\"$view.edit.cell.value\" />\n                </div>\n            </div>\n        </div>\n        <div class=\"q-grid-actions\">\n            <button mat-button\n                    color=\"primary\"\n                    [q-grid-command]=\"$view.edit.cell.commit\"\n                    [q-grid-command-arg]=\"$cell\">\n                Save\n            </button>\n            <button mat-button\n                    [q-grid-command]=\"$view.edit.cell.clear\"\n                    [q-grid-command-arg]=\"$cell\">\n                Clear\n            </button>\n            <button mat-button\n                    [q-grid-command]=\"$view.edit.cell.cancel\"\n                    [q-grid-command-arg]=\"$cell\">\n                Cancel\n            </button>\n        </div>\n    </q-grid-cell-editor>\n</ng-template><ng-template key=\"edit-cell-number.tpl.html\"\n\t\t\t let-$cell\n\t\t\t let-$view=\"$view\">\n\t<q-grid-cell-editor class=\"q-grid-number q-grid-editor q-grid-position q-grid-text\"\n\t\t\t\t\t\t(close)=\"$view.edit.cell.exit.execute($cell)\"\n\t\t\t\t\t\tq-grid-position=\"td\">\n\t\t<mat-form-field>\n\t\t\t<input matInput\n\t\t\t\t   type=\"number\"\n\t\t\t\t   #input\n\t\t\t\t   q-grid-focus\n\t\t\t\t   [(ngModel)]=\"$view.edit.cell.value\" />\n\t\t</mat-form-field>\n\t\t<q-grid-validator class=\"q-grid-validator\"\n\t\t\t\t\t\t  [key]=\"$cell.column.key\"\n\t\t\t\t\t\t  [type]=\"$cell.column.type\"\n\t\t\t\t\t\t  [value]=\"$view.edit.cell.value\">\n\t\t</q-grid-validator>\n\t</q-grid-cell-editor>\n</ng-template><ng-template key=\"edit-cell-password.tpl.html\"\n\t\t\t let-$cell\n\t\t\t let-$view=\"$view\">\n\t<q-grid-cell-editor class=\"q-grid-password q-grid-editor q-grid-position q-grid-text\"\n\t\t\t\t\t\t(close)=\"$view.edit.cell.exit.execute($cell)\"\n\t\t\t\t\t\tq-grid-position=\"td\">\n\t\t<mat-form-field>\n\t\t\t<input matInput\n\t\t\t\t   [type]=\"'password'\"\n\t\t\t\t   q-grid-focus\n\t\t\t\t   [(ngModel)]=\"$view.edit.cell.value\" />\n\t\t</mat-form-field>\n\t\t<q-grid-validator class=\"q-grid-validator\"\n\t\t\t\t\t\t  [key]=\"$cell.column.key\"\n\t\t\t\t\t\t  [type]=\"$cell.column.type\"\n\t\t\t\t\t\t  [value]=\"$view.edit.cell.value\">\n\t\t</q-grid-validator>\n\t</q-grid-cell-editor>\n</ng-template><ng-template key=\"edit-cell-reference.tpl.html\"\n\t\t\t let-$cell\n\t\t\t let-$view=\"$view\">\n\t<q-grid-cell-editor class=\"q-grid-reference q-grid-editor q-grid-position\"\n\t\t\t\t\t\t(close)=\"$view.edit.cell.cancel.execute($cell)\"\n\t\t\t\t\t\tq-grid-position=\"td\">\n\t\t<q-grid-reference-editor [cell]=\"$cell\"\n\t\t\t\t\t\t\t\t [(value)]=\"$view.edit.cell.value\"\n\t\t\t\t\t\t\t\t [caption]=\"$cell.column.title\"\n\t\t\t\t\t\t\t\t (afterSubmit)=\"$view.edit.cell.commit.canExecute() && $view.edit.cell.commit.execute()\"\n\t\t\t\t\t\t\t\t (afterCancel)=\"$view.edit.cell.cancel.execute()\">\n\t\t</q-grid-reference-editor>\n\t</q-grid-cell-editor>\n</ng-template><ng-template key=\"edit-cell-row-options.tpl.html\"\n             let-$cell\n             let-$view=\"$view\">\n    <ng-container (q-grid-menu-trigger)=\"$view.edit.cell.cancel.execute($cell)\">\n        <mat-icon [matMenuTriggerFor]=\"menu\"\n                  class=\"q-grid-icon\">\n            more_vert\n        </mat-icon>\n    </ng-container>\n\n    <mat-menu #menu=\"matMenu\"\n              class=\"q-grid-row-options\">\n        <ng-container *ngFor=\"let $action of $cell.column.editorOptions.actions\"\n                      [ngSwitch]=$action.title>\n\n            <mat-divider *ngSwitchCase=\"'---'\">\n            </mat-divider>\n\n            <button *ngSwitchDefault\n                    mat-menu-item\n                    [q-grid-command]=\"$action.command\"\n                    q-grid-command-event=\"mousedown\"\n                    q-grid-command-host=\"document\"\n                    [q-grid-command-arg]=\"$cell\"\n                    [q-grid-command-use-shortcut]=\"true\"\n                    (keydown.enter)=\"$action.command.canExecute($cell) === true && $action.command.execute($cell)\"\n                    (q-grid-command-execute)=\"$view.edit.cell.cancel.execute($cell)\">\n                <mat-icon class=\"q-grid-icon\">{{$action.icon}}</mat-icon>\n                <span>{{$action.title}}</span>\n                <span *ngIf=\"$action.command.shortcut\"\n                      class=\"q-grid-shortcut\">\n                    {{$action.command.shortcut}}\n                </span>\n            </button>\n        </ng-container>\n    </mat-menu>\n</ng-template><ng-template key=\"edit-cell-text-area.tpl.html\"\n\t\t\t let-$cell\n\t\t\t let-$view=\"$view\">\n\t<q-grid-cell-editor class=\"q-grid-text-area q-grid-editor q-grid-position\"\n\t\t\t\t\t\t(close)=\"$view.edit.cell.exit.execute($cell)\"\n\t\t\t\t\t\tq-grid-position=\"td\">\n\t\t<mat-form-field>\n\t\t\t<textarea matInput\n\t\t\t\t\t  #input\n\t\t\t\t\t  rows=\"10\"\n\t\t\t\t\t  q-grid-focus\n\t\t\t\t\t  maxlength=\"{{$cell.column.maxLength}}\"\n\t\t\t\t\t  [(ngModel)]=\"$view.edit.cell.value\">\n                </textarea>\n\t\t\t<mat-hint align=\"end\">{{input.value.length}} / {{$cell.column.maxLength}}</mat-hint>\n\t\t</mat-form-field>\n\t\t<q-grid-validator class=\"q-grid-validator\"\n\t\t\t\t\t\t  [key]=\"$cell.column.key\"\n\t\t\t\t\t\t  [type]=\"$cell.column.type\"\n\t\t\t\t\t\t  [value]=\"$view.edit.cell.value\">\n\t\t</q-grid-validator>\n\t</q-grid-cell-editor>\n</ng-template><ng-template key=\"edit-cell-text.tpl.html\"\n\t\t\t let-$cell\n\t\t\t let-$view=\"$view\">\n\t<q-grid-cell-editor class=\"q-grid-text q-grid-editor q-grid-position\"\n\t\t\t\t\t\t(close)=\"$view.edit.cell.exit.execute($cell)\"\n\t\t\t\t\t\tq-grid-position=\"td\">\n\t\t<mat-form-field>\n\t\t\t<input matInput\n\t\t\t\t   #input\n\t\t\t\t   q-grid-focus\n\t\t\t\t   maxlength=\"{{$cell.column.maxLength}}\"\n\t\t\t\t   [(ngModel)]=\"$view.edit.cell.value\" />\n\t\t\t<mat-hint align=\"end\">{{input.value.length}} / {{$cell.column.maxLength}}</mat-hint>\n\t\t</mat-form-field>\n\t\t<q-grid-validator *ngIf=\"$view?.edit\"\n\t\t\t\t\t\t  class=\"q-grid-validator\"\n\t\t\t\t\t\t  [key]=\"$cell.column.key\"\n\t\t\t\t\t\t  [type]=\"$cell.column.type\"\n\t\t\t\t\t\t  [value]=\"$view.edit.cell.value\">\n\t\t</q-grid-validator>\n\t</q-grid-cell-editor>\n</ng-template><ng-template key=\"edit-cell-time.tpl.html\"\n\t\t\t let-$cell\n\t\t\t let-$view=\"$view\">\n\t<q-grid-cell-editor class=\"q-grid-time q-grid-editor q-grid-position q-grid-text\"\n\t\t\t\t\t\t(close)=\"$view.edit.cell.exit.execute($cell)\"\n\t\t\t\t\t\tq-grid-position=\"td\">\n\t\t<mat-form-field *q-grid-time=\"let qGridTime\">\n\t\t\t<input matInput\n\t\t\t\t   type=\"time\"\n\t\t\t\t   #input\n\t\t\t\t   q-grid-focus\n\t\t\t\t   [value]=\"$view.edit.cell.value | qGridTime: 'HH:mm'\"\n\t\t\t\t   (change)=\"$view.edit.cell.value = qGridTime.time($view.edit.cell.value, input.value)\" />\n\t\t</mat-form-field>\n\t\t<q-grid-validator class=\"q-grid-validator\"\n\t\t\t\t\t\t  [key]=\"$cell.column.key\"\n\t\t\t\t\t\t  [type]=\"$cell.column.type\"\n\t\t\t\t\t\t  [value]=\"$view.edit.cell.value\">\n\t\t</q-grid-validator>\n\t</q-grid-cell-editor>\n</ng-template><ng-template key=\"edit-cell-url.tpl.html\"\n\t\t\t let-$cell\n\t\t\t let-$view=\"$view\">\n\t<q-grid-cell-editor class=\"q-grid-url q-grid-editor q-grid-position\"\n\t\t\t\t\t\t(close)=\"$view.edit.cell.exit.execute($cell)\"\n\t\t\t\t\t\tq-grid-position=\"td\">\n\t\t<q-grid-tab-trap>\n\t\t\t<div class=\"q-grid-flex q-grid-layout-column q-grid-url-fields\">\n\t\t\t\t<mat-form-field *ngIf=\"$cell.column.label !== null\">\n\t\t\t\t\t<input matInput\n\t\t\t\t\t\t   type=\"text\"\n\t\t\t\t\t\t   [(ngModel)]=\"$view.edit.cell.label\"\n\t\t\t\t\t\t   placeholder=\"Label\" />\n\t\t\t\t</mat-form-field>\n\t\t\t\t<mat-form-field>\n\t\t\t\t\t<input matInput\n\t\t\t\t\t\t   type=\"url\"\n\t\t\t\t\t\t   q-grid-focus\n\t\t\t\t\t\t   [(ngModel)]=\"$view.edit.cell.value\"\n\t\t\t\t\t\t   placeholder=\"Url\" />\n\t\t\t\t</mat-form-field>\n\t\t\t\t<q-grid-validator class=\"q-grid-validator\"\n\t\t\t\t\t\t\t\t  [key]=\"$cell.column.key\"\n\t\t\t\t\t\t\t\t  [type]=\"$cell.column.type\"\n\t\t\t\t\t\t\t\t  [value]=\"$view.edit.cell.value\">\n\t\t\t\t</q-grid-validator>\n\t\t\t</div>\n\t\t</q-grid-tab-trap>\n\t</q-grid-cell-editor>\n</ng-template><ng-template key=\"edit-form-array.tpl.html\"\n             let-$editor>\n    <ng-container q-grid-chips>\n        <h3>{{$editor.cell.column.title}}</h3>\n        <div class=\"q-grid-array-view\">\n            <mat-chip-list #chipList>\n                <ng-container *ngFor=\"let value of $editor.value;let $index = index\"\n                              (q-grid-chips-remove)=\"$editor.value.splice($index, 1)\">\n                    <mat-chip class=\"q-grid-array-item\"\n                              selectable=\"true\"\n                              removable=\"true\">\n                        {{value}}\n                        <mat-icon class=\"q-grid-icon\"\n                                  matChipRemove>\n                            cancel\n                        </mat-icon>\n                    </mat-chip>\n                </ng-container>\n            </mat-chip-list>\n        </div>\n        <mat-form-field (q-grid-chips-push)=\"$editor.value.push($event)\"\n                        [floatLabel]=\"'never'\">\n            <input class=\"q-grid-array-input\"\n                   matInput\n                   type={{$editor.cell.column.itemType}}\n                   #qGridInput\n                   [matChipInputFor]=\"chipList\" />\n        </mat-form-field>\n    </ng-container>\n</ng-template><ng-template key=\"edit-form-bool.tpl.html\"\n             let-$editor>\n    <q-grid-bool-editor [column]=\"$editor.cell.column\"\n                        [(value)]=\"$editor.value\"\n                        [label]=\"$editor.cell.column.title\">\n    </q-grid-bool-editor>\n</ng-template><ng-template key=\"edit-form-currency.tpl.html\"\n             let-$editor>\n    <mat-form-field>\n        <input matInput\n               type=\"number\"\n               [placeholder]=\"$editor.cell.column.title\"\n               [(ngModel)]=\"$editor.value\" />\n    </mat-form-field>\n</ng-template><ng-template key=\"edit-form-date.tpl.html\"\n             let-$editor>\n    <mat-form-field>\n        <input matInput\n               [matDatepicker]=\"picker\"\n               [placeholder]=\"$editor.cell.column.title\"\n               [(ngModel)]=\"$editor.value\" />\n        <mat-datepicker-toggle matSuffix\n                               [for]=\"picker\">\n        </mat-datepicker-toggle>\n        <mat-datepicker #picker>\n        </mat-datepicker>\n    </mat-form-field>\n</ng-template><ng-template key=\"edit-form-datetime.tpl.html\"\n             let-$editor>\n    <mat-form-field>\n        <input matInput\n               [matDatepicker]=\"picker\"\n               [placeholder]=\"$editor.cell.column.title\"\n               [(ngModel)]=\"$editor.value\" />\n        <mat-datepicker-toggle matSuffix\n                               [for]=\"picker\">\n        </mat-datepicker-toggle>\n        <mat-datepicker #picker>\n        </mat-datepicker>\n    </mat-form-field>\n</ng-template><ng-template key=\"edit-form-dropdown.tpl.html\">\n    Dropdown is not implemented\n</ng-template><ng-template key=\"edit-form-email.tpl.html\"\n             let-$editor>\n    <h3>{{$editor.cell.column.title}}</h3>\n    <mat-form-field *ngIf=\"$editor.cell.column.label !== null\">\n        <input matInput\n               type=\"text\"\n               [(ngModel)]=\"$editor.label\"\n               placeholder=\"Label\" />\n    </mat-form-field>\n    <mat-form-field>\n        <input matInput\n               type=\"email\"\n               [(ngModel)]=\"$editor.value\"\n               placeholder=\"Email\" />\n    </mat-form-field>\n</ng-template><ng-template key=\"edit-form-file.tpl.html\"\n             let-$editor>\n    <h3>{{$editor.cell.column.title}}</h3>\n    <div class=\"q-grid-file-upload-area\"\n         [ngClass]=\"{'q-grid-file-has-preview': $editor.cell.column.hasPreview($editor.label)}\">\n        <div class=\"q-grid-layout-column q-grid-file-upload-message\"\n             [ngSwitch]=\"!!$editor.value\">\n            <span class=\"q-grid-file-upload-filename\"\n                  *ngSwitchCase=\"true\">\n                {{$editor.label}}\n            </span>\n            <div class=\"q-grid-layout-row q-grid-layout-align-center-center\">\n                <mat-icon>file_upload</mat-icon>\n                <span *ngSwitchCase=\"false\">Drag and drop a file here or click</span>\n                <span *ngSwitchCase=\"true\">Drag and drop or click to replace </span>\n            </div>\n        </div>\n        <input [(q-grid-file)]=\"$editor.value\"\n               [(q-grid-file-label)]=\"$editor.label\"\n               [q-grid-file-is-valid]=\"$editor.cell.column.canUpload\"\n               q-grid-file\n               type=\"file\" />\n        <div class=\"q-grid-file-preview\"\n             *ngIf=\"$editor.cell.column.hasPreview($editor.label)\">\n            <img [src]=\"$editor.value\" />\n        </div>\n    </div>\n</ng-template><ng-template key=\"edit-form-image.tpl.html\"\n             let-$editor>\n    <h3>{{$editor.cell.column.title}}</h3>\n    <div class=\"q-grid-file-upload-area\"\n         [ngClass]=\"{'q-grid-file-has-preview': $editor.cell.column.hasPreview($editor.label)}\">\n        <div class=\"q-grid-layout-column q-grid-file-upload-message\"\n             [ngSwitch]=\"!!$editor.value\">\n            <span class=\"q-grid-file-upload-filename\"\n                  *ngSwitchCase=\"true\">\n                {{$editor.label}}\n            </span>\n            <div class=\"q-grid-layout-row q-grid-layout-align-center-center\">\n                <mat-icon>file_upload</mat-icon>\n                <span *ngSwitchCase=\"false\">Drag and drop an image here or click</span>\n                <span *ngSwitchCase=\"true\">Drag and drop or click to replace </span>\n            </div>\n        </div>\n        <input [(q-grid-file)]=\"$editor.value\"\n               [(q-grid-file-label)]=\"$editor.label\"\n               [q-grid-file-is-valid]=\"$editor.cell.column.canUpload\"\n               type=\"file\" />\n        <div class=\"q-grid-file-preview\"\n             *ngIf=\"$editor.cell.column.hasPreview($editor.label)\">\n            <img [src]=\"$editor.value\" />\n        </div>\n    </div>\n</ng-template><ng-template key=\"edit-form-number.tpl.html\"\n             let-$editor>\n    <mat-form-field>\n        <input matInput\n               type=\"number\"\n               #input\n               [placeholder]=\"$editor.cell.column.title\"\n               [(ngModel)]=\"$editor.value\" />\n    </mat-form-field>\n</ng-template><ng-template key=\"edit-form-password.tpl.html\"\n             let-$editor>\n    <mat-form-field>\n        <input matInput\n               type=\"password\"\n               [placeholder]=\"$editor.cell.column.title\"\n               [(ngModel)]=\"$editor.value\" />\n    </mat-form-field>\n</ng-template><ng-template key=\"edit-form-reference.tpl.html\"\n             let-$editor>\n    <h3>{{$editor.cell.column.title}}</h3>\n    <q-grid-reference [cell]=\"$editor.cell\"\n                      [(value)]=\"$editor.value\"\n                      [autofocus]=\"false\">\n    </q-grid-reference>\n</ng-template><ng-template key=\"edit-form-text-area.tpl.html\"\n             let-$editor>\n    <mat-form-field>\n        <textarea matInput\n                  #input\n                  rows=\"10\"\n                  [placeholder]=\"$editor.cell.column.title\"\n                  [(ngModel)]=\"$editor.value\">\n                </textarea>\n        <mat-hint align=\"end\">{{input.value.length}} / {{$editor.cell.column.maxLength}}</mat-hint>\n    </mat-form-field>\n</ng-template><ng-template key=\"edit-form-text.tpl.html\"\n             let-$editor>\n    <mat-form-field class=\"edit-form-text\">\n        <input matInput\n               #input\n               maxlength=\"{{$editor.cell.column.maxLength}}\"\n               [(ngModel)]=\"$editor.value\"\n               [placeholder]=\"$editor.cell.column.title\" />\n        <mat-hint align=\"end\">{{input.value.length}} / {{$editor.cell.column.maxLength}}</mat-hint>\n    </mat-form-field>\n</ng-template><ng-template key=\"edit-form-time.tpl.html\"\n             let-$editor>\n    <mat-form-field>\n        <input matInput\n               type=\"time\"\n               [placeholder]=\"$editor.cell.column.title\"\n               [(ngModel)]=\"$editor.value\" />\n    </mat-form-field>\n</ng-template><ng-template key=\"edit-form-url.tpl.html\"\n             let-$editor>\n    <h3>{{$editor.cell.column.title}}</h3>\n    <mat-form-field *ngIf=\"$editor.cell.column.label !== null\">\n        <input matInput\n               type=\"text\"\n               [(ngModel)]=\"$editor.label\"\n               placeholder=\"Label\" />\n    </mat-form-field>\n    <mat-form-field>\n        <input matInput\n               type=\"url\"\n               [(ngModel)]=\"$editor.value\"\n               placeholder=\"Url\" />\n    </mat-form-field>\n</ng-template><ng-template key=\"filter-cell-bool.tpl.html\"\n             let-$cell\n             let-$view=\"$view\">\n    <mat-checkbox *ngIf=\"$cell.column.canFilter\"\n                  aria-label=\"Bool cell filter\"\n                  class=\"q-grid-checkbox\"\n                  #input\n                  [value]=\"$view.filter.value($cell.column.model)\"\n                  (change)=\"$view.filter.column.execute($cell.column.model, input.checked)\">\n    </mat-checkbox>\n</ng-template><ng-template key=\"filter-cell-currency.tpl.html\"\n             let-$cell\n             let-$view=\"$view\">\n    <mat-form-field *ngIf=\"$cell.column.canFilter\"\n                    floatLabel=\"never\">\n        <mat-placeholder>\n            <mat-icon class=\"q-grid-icon q-grid-placeholder\">\n                filter_list\n            </mat-icon>\n        </mat-placeholder>\n\n        <input type=\"number\"\n               matInput\n               #input\n               [value]=\"$view.filter.value($cell.column.model)\"\n               (change)=\"$view.filter.column.execute($cell.column.model, input.value)\" />\n\n        <mat-icon *ngIf=\"!!$view.filter.value($cell.column.model)\"\n                  (click)=\"$view.filter.column.execute($cell.column.model, null)\"\n                  class=\"q-grid-icon q-grid-close\"\n                  matSuffix>\n            close\n        </mat-icon>\n\n    </mat-form-field>\n</ng-template><ng-template key=\"filter-cell-date.tpl.html\"\n             let-$cell\n             let-$view=\"$view\">\n    <ng-container *ngIf=\"$cell.column.canFilter\">\n        <mat-form-field *q-grid-date=\"let qGridDate\"\n                        [q-grid-date-adapter]=\"$cell.column.format\"\n                        [ngClass]=\"{'mat-form-field-invalid': !qGridDate.isValid(input.value, $cell.column.format)}\"\n                        floatLabel=\"never\">\n            <mat-placeholder>\n                <mat-icon class=\"q-grid-icon q-grid-placeholder\">\n                    filter_list\n                </mat-icon>\n            </mat-placeholder>\n\n            <input matInput\n                   #input\n                   [matDatepicker]=\"picker\"\n                   [q-grid-date-mask]=\"$cell.column.format\"\n                   [value]=\"$view.filter.value($cell.column.model) | qGridConvert: 'date'\"\n                   (dateChange)=\"$view.filter.column.execute($cell.column.model, qGridDate.dateLow($event.value, $cell.column.format))\"\n                   (input)=\"qGridDate.isValid(input.value, $cell.column.format) && $view.filter.column.execute($cell.column.model, qGridDate.dateLow(input.value, $cell.column.format))\" />\n\n            <mat-datepicker-toggle matSuffix\n                                   [for]=\"picker\">\n            </mat-datepicker-toggle>\n\n            <mat-icon *ngIf=\"!!$view.filter.value($cell.column.model)\"\n                      (click)=\"$view.filter.column.execute($cell.column.model, null)\"\n                      class=\"q-grid-icon q-grid-close\"\n                      matSuffix>\n                close\n            </mat-icon>\n\n            <mat-datepicker #picker>\n            </mat-datepicker>\n\n        </mat-form-field>\n    </ng-container>\n</ng-template><ng-template key=\"filter-cell-datetime.tpl.html\"\n             let-$cell\n             let-$view=\"$view\">\n    <ng-container *ngIf=\"$cell.column.canFilter\">\n        <mat-form-field *q-grid-date=\"let qGridDate\"\n                        [q-grid-date-adapter]=\"$cell.column.dateFormat\"\n                        [ngClass]=\"{'mat-form-field-invalid': !qGridDate.isValid(input.value, $cell.column.dateFormat)}\"\n                        floatLabel=\"never\">\n            <mat-placeholder>\n                <mat-icon class=\"q-grid-icon q-grid-placeholder\">\n                    filter_list\n                </mat-icon>\n            </mat-placeholder>\n\n            <input matInput\n                   #input\n                   [matDatepicker]=\"picker\"\n                   [q-grid-date-mask]=\"$cell.column.dateFormat\"\n                   [value]=\"$view.filter.value($cell.column.model) | qGridConvert: 'date'\"\n                   (dateChange)=\"$view.filter.column.execute($cell.column.model, qGridDate.dateLow($event.value, $cell.column.dateFormat))\"\n                   (input)=\"qGridDate.isValid(input.value, $cell.column.dateFormat) && $view.filter.column.execute($cell.column.model, qGridDate.dateLow(input.value, $cell.column.dateFormat))\" />\n\n            <mat-datepicker-toggle matSuffix\n                                   [for]=\"picker\">\n            </mat-datepicker-toggle>\n\n            <mat-icon *ngIf=\"!!$view.filter.value($cell.column.model)\"\n                      (click)=\"$view.filter.column.execute($cell.column.model, null)\"\n                      class=\"q-grid-icon q-grid-close\"\n                      matSuffix>\n                close\n            </mat-icon>\n\n            <mat-datepicker #picker>\n            </mat-datepicker>\n\n        </mat-form-field>\n    </ng-container>\n</ng-template><ng-template key=\"filter-cell-number.tpl.html\"\n             let-$cell\n             let-$view=\"$view\">\n    <mat-form-field *ngIf=\"$cell.column.canFilter\"\n                    floatLabel=\"never\">\n        <mat-placeholder>\n            <mat-icon class=\"q-grid-icon q-grid-placeholder\">\n                filter_list\n            </mat-icon>\n        </mat-placeholder>\n        <input type=\"number\"\n               matInput\n               #input\n               [value]=\"$view.filter.value($cell.column.model)\"\n               (change)=\"$view.filter.column.execute($cell.column.model, input.value)\" />\n\n        <mat-icon *ngIf=\"!!$view.filter.value($cell.column.model)\"\n                  (click)=\"$view.filter.column.execute($cell.column.model, null)\"\n                  class=\"q-grid-icon q-grid-close\"\n                  matSuffix>\n            close\n        </mat-icon>\n    </mat-form-field>\n</ng-template><ng-template key=\"filter-cell-text.tpl.html\"\n             let-$cell\n             let-$view=\"$view\">\n    <mat-form-field *ngIf=\"$cell.column.canFilter\"\n                    floatLabel=\"never\">\n        <mat-placeholder>\n            <mat-icon class=\"q-grid-icon q-grid-placeholder\">\n                filter_list\n            </mat-icon>\n        </mat-placeholder>\n        <input type=\"search\"\n               matInput\n               #input\n               [value]=\"$view.filter.value($cell.column.model)\"\n               (change)=\"$view.filter.column.execute($cell.column.model, input.value)\" />\n\n        <mat-icon *ngIf=\"!!$view.filter.value($cell.column.model)\"\n                  (click)=\"$view.filter.column.execute($cell.column.model, null)\"\n                  class=\"q-grid-icon q-grid-close\"\n                  matSuffix>\n            close\n        </mat-icon>\n    </mat-form-field>\n</ng-template><ng-template key=\"foot-cell-currency.tpl.html\"\n             let-$cell>\n\t{{$cell.value | qGridCurrency: $cell.column.code}}\n</ng-template><ng-template key=\"foot-cell-number.tpl.html\"\n             let-$cell>\n    {{$cell.value | qGridNumber:$cell.column.format}}\n</ng-template><ng-template key=\"foot-cell-text.tpl.html\" let-$cell>\n\t{{$cell.value}}\n</ng-template>\n<ng-template key=\"head-cell-group.tpl.html\"\n             let-$cell\n             let-$view=\"$view\">\n    <label tabindex=\"-1\"\n           [matTooltip]=\"$cell.column.description\"\n           [matTooltipShowDelay]=\"800\"\n           [q-grid-command]=\"$view.group.toggleAllStatus\">\n        {{$cell.column.title}}\n    </label>\n</ng-template><ng-template key=\"head-cell-select.tpl.html\"\n             let-$view=\"$view\">\n    <ng-container [q-grid-dirty]=\"$view.selection.stateCheck | async\">\n        <mat-checkbox *ngIf=\"$view.selection.mode !== 'singleOnly'\"\n                      [indeterminate]=\"$view.selection.isIndeterminate()\"\n                      [checked]=\"$view.selection.state()\"\n                      [disabled]=\"!$view.selection.toggleRow.canExecute()\"\n                      (change)=\"$view.selection.toggleRow.execute()\"\n                      tabindex=\"-1\"\n                      aria-label=\"Select all\"\n                      class=\"q-grid-checkbox\">\n        </mat-checkbox>\n    </ng-container>\n</ng-template><ng-template key=\"head-cell-text.tpl.html\"\n             let-$cell\n             let-$view=\"$view\">\n    <q-grid-column-sort *ngIf=\"$cell.column.canSort\"\n                        [column]=\"$cell.column\"\n                        class=\"q-grid-sort\">\n        <label [matTooltip]=\"$cell.column.description\"\n               [matTooltipShowDelay]=\"800\">\n            {{$cell.column.title}}\n        </label>\n    </q-grid-column-sort>\n    <label *ngIf=\"!$cell.column.canSort\"\n           [matTooltip]=\"$cell.column.description\"\n           [matTooltipShowDelay]=\"800\">\n        {{$cell.column.title}}\n    </label>\n    <q-grid-column-filter-trigger class=\"q-grid-column-filter-trigger\"\n                                  *ngIf=\"$cell.column.canFilter\"\n                                  [column]=\"$cell.column\">\n    </q-grid-column-filter-trigger>\n</ng-template><ng-template key=\"plugin-action-bar.tpl.html\"\n             let-$actionBar>\n\t<div class=\"q-grid-layout-row\">\n\t\t<div class=\"q-grid-flex-100 q-grid-layout-row q-grid-layout-align-start-center\">\n\t\t</div>\n\t\t<div class=\"q-grid-actions q-grid-flex-none q-grid-layout-row q-grid-layout-align-end-center\">\n\t\t\t<q-grid-action-core *ngFor=\"let action of $actionBar.actions\"\n\t\t\t                    [action]=\"action\">\n\t\t\t</q-grid-action-core>\n\t\t</div>\n\t</div>\n</ng-template>\n<ng-template key=\"plugin-action-core.tpl.html\"\n\t\t\t let-$action>\n\t<div class=\"q-grid-action\"\n\t\t [ngSwitch]=\"$action.mode\">\n\n\t\t<ng-container *ngSwitchCase=\"'template'\"\n\t\t\t\t\t  [key]=\"$action.templateUrl\"\n\t\t\t\t\t  [context]=\"{$implicit: $action}\">\n\t\t</ng-container>\n\n\t\t<button *ngSwitchCase=\"'icon'\"\n\t\t\t\tmat-icon-button\n\t\t\t\t[q-grid-command]=\"$action.command\"\n\t\t\t\t[q-grid-command-use-shortcut]=\"true\"\n\t\t\t\t[matTooltip]=\"$action.title + ($action.command.shortcut ? ' (' + ($action.command.shortcut | uppercase) + ')' : '')\"\n\t\t\t\t[matTooltipShowDelay]=\"800\"\n\t\t\t\ttabindex=\"-1\">\n\t\t\t<mat-icon>{{$action.icon}}</mat-icon>\n\t\t</button>\n\n\t\t<button *ngSwitchCase=\"'text'\"\n\t\t\t\tmat-button\n\t\t\t\t[q-grid-command]=\"$action.command\"\n\t\t\t\t[q-grid-command-use-shortcut]=\"true\"\n\t\t\t\ttabindex=\"-1\">\n\t\t\t{{$action.title + ($action.command.shortcut ? ' (' + ($action.command.shortcut | uppercase) + ')' :\n\t\t\t'')}}\n\t\t</button>\n\n\t\t<ng-container *ngSwitchDefault\n\t\t\t\t\t  [q-grid-command]=\"$action.command\"\n\t\t\t\t\t  [q-grid-command-use-shortcut]=\"true\">\n\t\t</ng-container>\n\n\t</div>\n</ng-template><ng-template key=\"plugin-autocomplete-editor.tpl.html\"\n             let-$editor>\n    <mat-form-field>\n        <input type=\"text\"\n               #input\n               q-grid-focus\n               matInput\n               placeholder=\"Pick a {{$editor.title}}\"\n               [(ngModel)]=\"$editor.value\"\n               (ngModelChange)=\"$editor.filter(input.value)\"\n               [matAutocomplete]=\"autocomplete\">\n    </mat-form-field>\n    <mat-autocomplete #autocomplete=\"matAutocomplete\"\n                      [displayWith]=\"$editor.itemLabelFactory($editor.cell.column)\">\n        <mat-option *ngFor=\"let option of $editor.options\"\n                    [value]=\"option\"\n                    q-grid-stop-propagate=\"mousedown\">\n            {{option | qGridItemLabel : $editor.itemLabelFactory($editor.cell.column)}}\n        </mat-option>\n    </mat-autocomplete>\n</ng-template><ng-template key=\"plugin-backdrop.tpl.html\" let-$backdrop>\n    <div class=\"q-grid-backdrop\">\n        <ng-container *ngTemplateOutlet=\"$backdrop.template\"></ng-container>\n    </div>\n</ng-template><ng-template key=\"plugin-bool-editor.tpl.html\"\n             let-$editor>\n    <mat-checkbox #checkbox\n                  aria-label=\"Bool cell edit\"\n                  class=\"q-grid-checkbox\"\n                  [q-grid-focus]=\"checkbox\"\n                  [q-grid-focus-disabled]=\"!$editor.autofocus\"\n                  [checked]=\"$editor.isChecked\"\n                  (change)=\"$editor.isChecked = $event.checked\">\n        {{$editor.label}}\n    </mat-checkbox>\n</ng-template><ng-template key=\"plugin-caption.tpl.html\"\n\t\t\t let-$caption>\n\t<h3 class=\"mat-card-title\">\n\t\t{{$caption.value}}\n\t</h3>\n</ng-template><ng-template key=\"plugin-cell-editor.tpl.html\"\n             let-$editor>\n\n    <q-grid-backdrop (close)=\"$editor.close($event)\">\n    </q-grid-backdrop>\n\n    <div class=\"q-grid-editor-content\"\n         [q-grid-stop-propagate]=\"['click', 'mousedown', 'mouseup']\">\n        <ng-container *ngTemplateOutlet=\"$editor.template\">\n        </ng-container>\n    </div>\n\n</ng-template><ng-template key=\"plugin-column-chooser-trigger.tpl.html\">\n\t<button mat-icon-button\n\t\t\ttabindex=\"-1\"\n\t\t\t#trigger=\"matMenuTrigger\"\n\t\t\t[matMenuTriggerFor]=\"menu\"\n\t\t\taria-label=\"Column chooser\">\n\t\t<mat-icon class=\"q-grid-icon\">more_vert</mat-icon>\n\t</button>\n\n\t<mat-menu #menu=\"matMenu\"\n\t\t\t  class=\"q-grid-column-chooser q-grid-menu\">\n\t\t<q-grid-column-chooser q-grid-menu\n\t\t\t\t\t\t\t   q-grid-theme-overlay\n\t\t\t\t\t\t\t   *ngIf=\"trigger.menuOpen\"\n\t\t\t\t\t\t\t   (cancel)=\"trigger.closeMenu()\"\n\t\t\t\t\t\t\t   (submit)=\"trigger.closeMenu()\">\n\t\t</q-grid-column-chooser>\n\t</mat-menu>\n</ng-template>\n<ng-template key=\"column-chooser.tpl.html\"\n\t\t\t let-$columnChooser\n\t\t\t let-$plugin=\"plugin\">\n\t<mat-card class=\"mat-elevation-z\">\n\t\t<mat-card-header>\n\t\t\t<mat-card-title>Columns Filter</mat-card-title>\n\t\t</mat-card-header>\n\t\t<mat-card-content>\n\t\t\t<div class=\"q-grid-flex-none q-grid-layout-row\">\n\t\t\t\t<mat-form-field class=\"q-grid-column-chooser-filter\">\n\t\t\t\t\t<input type=\"search\"\n\t\t\t\t\t\t   placeholder=\"Find in the list\"\n\t\t\t\t\t\t   matInput\n\t\t\t\t\t\t   (input)=\"$columnChooser.search($columnChooser.searchText)\"\n\t\t\t\t\t\t   [(ngModel)]=\"$columnChooser.searchText\"\n\t\t\t\t\t\t   q-grid-focus />\n\t\t\t\t</mat-form-field>\n\t\t\t</div>\n\t\t\t<div class=\"q-grid-flex q-grid-layout-column\">\n\t\t\t\t<ul class=\"q-grid-column-chooser-toolbar\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<mat-checkbox [checked]=\"$columnChooser.stateAll()\"\n\t\t\t\t\t\t\t\t\t  (change)=\"$columnChooser.toggleAll.execute()\"\n\t\t\t\t\t\t\t\t\t  [indeterminate]=\"$columnChooser.isIndeterminate()\">\n\t\t\t\t\t\t\tSelect All\n\t\t\t\t\t\t</mat-checkbox>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<mat-checkbox [checked]=\"$columnChooser.stateDefault()\"\n\t\t\t\t\t\t\t\t\t  (change)=\"$columnChooser.defaults.execute()\">\n\t\t\t\t\t\t\tSelect Defaults\n\t\t\t\t\t\t</mat-checkbox>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<div class=\"q-grid-column-chooser-list\">\n\t\t\t\t\t<ng-container key=\"column-chooser-node.tpl.html\"\n\t\t\t\t\t\t\t\t  [context]=\"$plugin.root()\">\n\t\t\t\t\t</ng-container>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</mat-card-content>\n\t\t<mat-card-actions>\n\t\t\t<button mat-button\n\t\t\t\t\t[q-grid-command]=\"$columnChooser.cancel\">\n\t\t\t\tCancel\n\t\t\t</button>\n\t\t\t<button mat-button\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t[q-grid-command]=\"$columnChooser.submit\">\n\t\t\t\tApply\n\t\t\t</button>\n\t\t</mat-card-actions>\n\t</mat-card>\n</ng-template>\n\n<ng-template key=\"column-chooser-node.tpl.html\"\n\t\t\t let-$context>\n\t<ul>\n\t\t<ng-container *ngFor=\"let node of $context.node.children\">\n\t\t\t<li *ngIf=\"$context.ctrl.toggle.canExecute(node)\"\n\t\t\t\t[q-grid-drop]=\"$context.ctrl.drop\"\n\t\t\t\t[q-grid-drop-data]=\"node\"\n\t\t\t\t[q-grid-drag-over]=\"$context.ctrl.drop\"\n\t\t\t\tq-grid-drop-area=\"column-chooser\"\n\t\t\t\tq-grid-drag-direction=\"y\">\n\t\t\t\t<div [q-grid-drag]=\"$context.ctrl.drag\"\n\t\t\t\t\t [q-grid-drag-data]=\"node\"\n\t\t\t\t\t q-grid-drop-area=\"column-chooser\">\n\t\t\t\t\t<mat-icon class=\"q-grid-icon\">drag_indicator</mat-icon>\n\t\t\t\t</div>\n\t\t\t\t<mat-checkbox [checked]=\"$context.ctrl.state(node)\"\n\t\t\t\t\t\t\t  (change)=\"$context.ctrl.toggle.execute(node)\"\n\t\t\t\t\t\t\t  aria-label=\"Selection\">\n\t\t\t\t\t<span [innerHTML]=\"node.value.column.title | qGridHighlight: $context.ctrl.searchText\"></span>\n\t\t\t\t</mat-checkbox>\n\t\t\t</li>\n\t\t\t<ng-container key=\"column-chooser-node.tpl.html\"\n\t\t\t\t\t\t  [context]=\"{$implicit: {ctrl: $context.ctrl, node: node}}\">\n\t\t\t</ng-container>\n\t\t</ng-container>\n\t</ul>\n</ng-template><ng-template key=\"plugin-column-filter-between.tpl.html\"\n\t\t\t let-$columnFilter\n\t\t\t let-$plugin=\"plugin\"\n\t\t\t let-$vscroll=\"vscroll\">\n\n\t<q-grid-tab-trap>\n\t\t<mat-form-field class=\"q-grid-column-filter-input q-grid-column-filter-input-half \">\n\t\t\t<input matInput\n\t\t\t\t   placeholder=\"From\"\n\t\t\t\t   [(ngModel)]=\"$columnFilter.value[0]\"\n\t\t\t\t   [type]=\"$columnFilter.column.type\"\n\t\t\t\t   q-grid-focus />\n\t\t</mat-form-field>\n\n\t\t<mat-form-field class=\"q-grid-column-filter-input q-grid-column-filter-input-half \">\n\t\t\t<input matInput\n\t\t\t\t   placeholder=\"To\"\n\t\t\t\t   [(ngModel)]=\"$columnFilter.value[1]\"\n\t\t\t\t   [type]=\"$columnFilter.column.type\" />\n\t\t</mat-form-field>\n\t</q-grid-tab-trap>\n</ng-template><ng-template key=\"plugin-column-filter-by.tpl.html\"\n\t\t\t let-$by>\n\t<ul [q-grid-column-filter-item-list]=\"$by.column\">\n\t\t<li *ngFor=\"let item of $by.by\">\n\t\t\t<div class=\"q-grid-filter-by\">\n\t\t\t\t<div class=\"q-grid-filter-by-item\">\n\t\t\t\t\t<ng-container [q-grid-column-filter-item]=\"item\"></ng-container>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"q-grid-filter-by-remove\"\n\t\t\t\t\t (click)=\"$by.remove(item)\">\n\t\t\t\t\t<mat-icon class=\"q-grid-icon\">clear</mat-icon>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</li>\n\t\t<li *ngIf=\"$by.isBlanks\">\n\t\t\t<div class=\"q-grid-filter-by\">\n\t\t\t\t<div class=\"q-grid-filter-by-item\">\n\t\t\t\t\t(Blanks)\n\t\t\t\t</div>\n\t\t\t\t<div class=\"q-grid-filter-by-remove\"\n\t\t\t\t\t (click)=\"$by.removeByBlanks()\">\n\t\t\t\t\t<mat-icon class=\"q-grid-icon\">clear</mat-icon>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</li>\n\t</ul>\n</ng-template><ng-template key=\"plugin-column-filter-contains.tpl.html\"\n\t\t\t let-$columnFilter\n\t\t\t let-$plugin=\"plugin\"\n\t\t\t let-$vscroll=\"vscroll\">\n\n\t<mat-form-field class=\"q-grid-column-filter-input\">\n\t\t<input matInput\n\t\t\t   placeholder=\"Find in the list\"\n\t\t\t   [(ngModel)]=\"$plugin.search\"\n\t\t\t   (input)=\"$plugin.reset()\"\n\t\t\t   q-grid-focus />\n\t</mat-form-field>\n\n\t<ul class=\"q-grid-column-filter-toolbar\">\n\t\t<li>\n\t\t\t<mat-checkbox [checked]=\"$columnFilter.stateAll()\"\n\t\t\t\t\t\t  (change)=\"$columnFilter.toggleAll.execute($plugin.search)\"\n\t\t\t\t\t\t  [indeterminate]=\"$columnFilter.isIndeterminate()\">\n\t\t\t\tSelect All\n\t\t\t</mat-checkbox>\n\t\t</li>\n\t</ul>\n\t<div [ngSwitch]=\"$columnFilter.isEmpty()\"\n\t\t class=\"q-grid-column-filter-by\">\n\t\t<ng-container *ngSwitchCase=\"false\">\n\t\t\t<div class=\"q-grid-column-filter-by-blank\">\n\t\t\t\tNO SELECTED FILTERS\n\t\t\t</div>\n\t\t</ng-container>\n\t\t<ng-container *ngSwitchCase=\"true\">\n\t\t\t<q-grid-column-filter-by [by]=\"$columnFilter.by\"\n\t\t\t\t\t\t\t\t\t [(byBlanks)]=\"$columnFilter.byBlanks\"\n\t\t\t\t\t\t\t\t\t [column]=\"$plugin.column\">\n\t\t\t</q-grid-column-filter-by>\n\t\t</ng-container>\n\t</div>\n\t<div class=\"q-grid-column-filter-list\"\n\t\t [q-grid-column-filter-item-list]=\"$plugin.column\"\n\t\t [q-grid-column-filter-search]=\"$plugin.search\"\n\t\t q-grid-vscroll>\n\t\t<ul [q-grid-vscroll-port-y]=\"$vscroll\">\n\t\t\t<li *ngFor=\"let item of $columnFilter.items | qGridVscroll$: $vscroll | async; let $index = index; trackBy: $vscroll.id\"\n\t\t\t\t[q-grid-vscroll-row]=\"$index\">\n\t\t\t\t<mat-checkbox [checked]=\"$columnFilter.state(item)\"\n\t\t\t\t\t\t\t  *ngIf=\"$columnFilter.toggle.canExecute(item)\"\n\t\t\t\t\t\t\t  (change)=\"$columnFilter.toggle.execute(item)\"\n\t\t\t\t\t\t\t  aria-label=\"Select filter value\">\n\t\t\t\t\t<ng-container [q-grid-column-filter-item]=\"item\"></ng-container>\n\t\t\t\t</mat-checkbox>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<mat-checkbox *ngIf=\"$columnFilter.hasBlanks\"\n\t\t\t\t\t\t\t  [(ngModel)]=\"$columnFilter.byBlanks\"\n\t\t\t\t\t\t\t  aria-label=\"Select blanks\">\n\t\t\t\t\t<span [innerHTML]=\"'(Blanks)' | qGridHighlight: $plugin.search\"></span>\n\t\t\t\t</mat-checkbox>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n\n</ng-template><ng-template key=\"plugin-column-filter-date-between.tpl.html\"\n\t\t\t let-$columnFilter\n\t\t\t let-$plugin=\"plugin\"\n\t\t\t let-$vscroll=\"vscroll\">\n\n\t<q-grid-tab-trap>\n\t\t<mat-form-field class=\"q-grid-column-filter-input q-grid-column-filter-input-half \"\n\t\t\t\t\t\t*q-grid-date=\"let qGridDate\"\n\t\t\t\t\t\t[q-grid-date-adapter]=\"$columnFilter.column.format\"\n\t\t\t\t\t\t[ngClass]=\"{'mat-form-field-invalid': !qGridDate.isValid(inputLeft.value, $columnFilter.column.format)}\">\n\t\t\t<input q-grid-focus\n\t\t\t\t   matInput\n\t\t\t\t   #inputLeft\n\t\t\t\t   placeholder=\"From\"\n\t\t\t\t   [q-grid-date-mask]=\"$columnFilter.column.format\"\n\t\t\t\t   [matDatepicker]=\"leftPicker\"\n\t\t\t\t   [value]=\"$columnFilter.value[0] | qGridConvert: 'date'\"\n\t\t\t\t   (dateChange)=\"$columnFilter.value[0] = qGridDate.dateLow($event.value)\"\n\t\t\t\t   (input)=\"qGridDate.isValid(inputLeft.value, $columnFilter.column.format) && ($columnFilter.value[0] = qGridDate.dateLow(inputLeft.value, $columnFilter.column.format))\" />\n\n\t\t\t<mat-datepicker-toggle matSuffix\n\t\t\t\t\t\t\t\t   [for]=\"leftPicker\">\n\t\t\t</mat-datepicker-toggle>\n\n\t\t\t<mat-datepicker #leftPicker>\n\t\t\t</mat-datepicker>\n\t\t</mat-form-field>\n\n\t\t<mat-form-field class=\"q-grid-column-filter-input q-grid-column-filter-input-half \"\n\t\t\t\t\t\t*q-grid-date=\"let qGridDate\"\n\t\t\t\t\t\t[q-grid-date-adapter]=\"$columnFilter.column.format\"\n\t\t\t\t\t\t[ngClass]=\"{'mat-form-field-invalid': !qGridDate.isValid(inputRight.value, $columnFilter.column.format)}\">\n\t\t\t<input matInput\n\t\t\t\t   #inputRight\n\t\t\t\t   placeholder=\"To\"\n\t\t\t\t   [q-grid-date-mask]=\"$columnFilter.column.format\"\n\t\t\t\t   [matDatepicker]=\"rightPicker\"\n\t\t\t\t   [value]=\"$columnFilter.value[1] | qGridConvert: 'date'\"\n\t\t\t\t   (dateChange)=\"$columnFilter.value[1] = qGridDate.dateLow($event.value)\"\n\t\t\t\t   (input)=\"qGridDate.isValid(inputRight.value, $columnFilter.column.format) && ($columnFilter.value[1] = qGridDate.dateLow(inputRight.value, $columnFilter.column.format))\" />\n\n\t\t\t<mat-datepicker-toggle matSuffix\n\t\t\t\t\t\t\t\t   [for]=\"rightPicker\">\n\t\t\t</mat-datepicker-toggle>\n\n\t\t\t<mat-datepicker #rightPicker> </mat-datepicker>\n\t\t</mat-form-field>\n\t</q-grid-tab-trap>\n\n</ng-template><ng-template key=\"plugin-column-filter-date-input.tpl.html\"\n\t\t\t let-$columnFilter\n\t\t\t let-$plugin=\"plugin\"\n\t\t\t let-$vscroll=\"vscroll\">\n\n\t<mat-form-field class=\"q-grid-column-filter-input\"\n\t\t\t\t\t*q-grid-date=\"let qGridDate\"\n\t\t\t\t\t[q-grid-date-adapter]=\"$columnFilter.column.format\"\n\t\t\t\t\t[ngClass]=\"{'mat-form-field-invalid': !qGridDate.isValid(input.value, $columnFilter.column.format)}\">\n\n\t\t<input #input\n\t\t\t   q-grid-focus\n\t\t\t   matInput\n\t\t\t   [q-grid-date-mask]=\"$columnFilter.column.format\"\n\t\t\t   [placeholder]=\"$columnFilter.operator | qGridText : 'fromCamelCase'\"\n\t\t\t   [matDatepicker]=\"picker\"\n\t\t\t   [value]=\"$columnFilter.value | qGridConvert: 'date'\"\n\t\t\t   (dateChange)=\"$columnFilter.value = qGridDate.dateLow($event.value)\"\n\t\t\t   (input)=\"qGridDate.isValid(input.value, $columnFilter.column.format) && ($columnFilter.value = qGridDate.dateLow(input.value, $columnFilter.column.format))\" />\n\n\t\t<mat-datepicker-toggle matSuffix\n\t\t\t\t\t\t\t   [for]=\"picker\">\n\t\t</mat-datepicker-toggle>\n\n\t\t<mat-datepicker #picker>\n\t\t</mat-datepicker>\n\n\t</mat-form-field>\n</ng-template><ng-template key=\"plugin-column-filter-datetime-between.tpl.html\"\n\t\t\t let-$columnFilter\n\t\t\t let-$plugin=\"plugin\"\n\t\t\t let-$vscroll=\"vscroll\">\n\t<q-grid-tab-trap>\n\t\t<div>\n\t\t\t<mat-form-field class=\"q-grid-column-filter-input q-grid-column-filter-input-half \"\n\t\t\t\t\t\t\t*q-grid-date=\"let qGridDate\"\n\t\t\t\t\t\t\t[q-grid-date-adapter]=\"$columnFilter.column.dateFormat\"\n\t\t\t\t\t\t\t[ngClass]=\"{'mat-form-field-invalid': !qGridDate.isValid(inputDateLeft.value, $columnFilter.column.format)}\">\n\t\t\t\t<input q-grid-focus\n\t\t\t\t\t   matInput\n\t\t\t\t\t   #inputDateLeft\n\t\t\t\t\t   [matDatepicker]=\"leftPicker\"\n\t\t\t\t\t   placeholder=\"from\"\n\t\t\t\t\t   [q-grid-date-mask]=\"$columnFilter.column.dateFormat\"\n\t\t\t\t\t   [value]=\"$columnFilter.value[0] | qGridConvert: 'datetime'\"\n\t\t\t\t\t   (dateChange)=\"$columnFilter.value[0] = qGridDate.datetime($columnFilter.value[0], $event.value, $columnFilter.column.dateFormat)\"\n\t\t\t\t\t   (input)=\"qGridDate.isValid(inputDateLeft.value, $columnFilter.column.format) && ($columnFilter.value[0] = qGridDate.datetime($columnFilter.value[0], inputDateLeft.value, $columnFilter.column.format))\" />\n\n\t\t\t\t<mat-datepicker-toggle matSuffix\n\t\t\t\t\t\t\t\t\t   [for]=\"leftPicker\">\n\t\t\t\t</mat-datepicker-toggle>\n\n\t\t\t\t<mat-datepicker #leftPicker>\n\t\t\t\t</mat-datepicker>\n\t\t\t</mat-form-field>\n\n\t\t\t<mat-form-field *q-grid-time=\"let qGridTime\"\n\t\t\t\t\t\t\tclass=\"q-grid-column-filter-input q-grid-column-filter-input-half\">\n\t\t\t\t<input matInput\n\t\t\t\t\t   type=\"time\"\n\t\t\t\t\t   #inputTimeLeft\n\t\t\t\t\t   [value]=\"$columnFilter.value[0] | qGridTime: 'HH:mm'\"\n\t\t\t\t\t   (change)=\"$columnFilter.value[0] = qGridTime.time($columnFilter.value[0], inputTimeLeft.value)\" />\n\t\t\t</mat-form-field>\n\t\t</div>\n\n\t\t<div>\n\t\t\t<mat-form-field class=\"q-grid-column-filter-input q-grid-column-filter-input-half \"\n\t\t\t\t\t\t\t*q-grid-date=\"let qGridDate\"\n\t\t\t\t\t\t\t[q-grid-date-adapter]=\"$columnFilter.column.dateFormat\"\n\t\t\t\t\t\t\t[ngClass]=\"{'mat-form-field-invalid': !qGridDate.isValid(inputDateRight.value, $columnFilter.column.format)}\">\n\t\t\t\t<input q-grid-focus\n\t\t\t\t\t   matInput\n\t\t\t\t\t   #inputDateRight\n\t\t\t\t\t   [matDatepicker]=\"rightPicker\"\n\t\t\t\t\t   placeholder=\"to\"\n\t\t\t\t\t   [q-grid-date-mask]=\"$columnFilter.column.dateFormat\"\n\t\t\t\t\t   [value]=\"$columnFilter.value[1] | qGridConvert: 'datetime'\"\n\t\t\t\t\t   (dateChange)=\"$columnFilter.value[1] = qGridDate.datetime($columnFilter.value[1], $event.value, $columnFilter.column.dateFormat)\"\n\t\t\t\t\t   (input)=\"qGridDate.isValid(inputDateRight.value, $columnFilter.column.format) && ($columnFilter.value[1] = qGridDate.datetime($columnFilter.value[1], inputDateRight.value, $columnFilter.column.format))\" />\n\t\t\t\t\t   \n\t\t\t\t<mat-datepicker-toggle matSuffix\n\t\t\t\t\t\t\t\t\t   [for]=\"rightPicker\">\n\t\t\t\t</mat-datepicker-toggle>\n\n\t\t\t\t<mat-datepicker #rightPicker>\n\t\t\t\t</mat-datepicker>\n\t\t\t</mat-form-field>\n\n\t\t\t<mat-form-field *q-grid-time=\"let qGridTime\"\n\t\t\t\t\t\t\tclass=\"q-grid-column-filter-input q-grid-column-filter-input-half\">\n\t\t\t\t<input matInput\n\t\t\t\t\t   type=\"time\"\n\t\t\t\t\t   #inputTimeRight\n\t\t\t\t\t   [value]=\"$columnFilter.value[1] | qGridTime: 'HH:mm'\"\n\t\t\t\t\t   (change)=\"$columnFilter.value[1] = qGridTime.time($columnFilter.value[1], inputTimeRight.value)\" />\n\t\t\t</mat-form-field>\n\t\t</div>\n\t</q-grid-tab-trap>\n\n</ng-template><ng-template key=\"plugin-column-filter-datetime-input.tpl.html\"\n\t\t\t let-$columnFilter\n\t\t\t let-$plugin=\"plugin\"\n\t\t\t let-$vscroll=\"vscroll\">\n\n\t<q-grid-tab-trap>\n\t\t<mat-form-field *q-grid-date=\"let qGridDate\"\n\t\t\t\t\t\tclass=\"q-grid-column-filter-input q-grid-column-filter-input-half\"\n\t\t\t\t\t\t[q-grid-date-adapter]=\"$columnFilter.column.dateFormat\"\n\t\t\t\t\t\t[ngClass]=\"{'mat-form-field-invalid': !qGridDate.isValid(input.value, $columnFilter.column.dateFormat)}\">\n\n\t\t\t<input q-grid-focus\n\t\t\t\t   matInput\n\t\t\t\t   #input\n\t\t\t\t   [q-grid-date-mask]=\"$columnFilter.column.dateFormat\"\n\t\t\t\t   [placeholder]=\"$columnFilter.operator | qGridText : 'fromCamelCase'\"\n\t\t\t\t   [matDatepicker]=\"picker\"\n\t\t\t\t   [value]=\"$columnFilter.value | qGridConvert: 'date'\"\n\t\t\t\t   (dateChange)=\"$columnFilter.value = qGridDate.datetime($columnFilter.value, $event.value, $columnFilter.column.dateFormat)\"\n\t\t\t\t   (input)=\"qGridDate.isValid(input.value, $columnFilter.column.dateFormat) && ($columnFilter.value = qGridDate.datetime($columnFilter.value, input.value, $columnFilter.column.dateFormat))\" />\n\n\t\t\t<mat-datepicker-toggle matSuffix\n\t\t\t\t\t\t\t\t   [for]=\"picker\">\n\t\t\t</mat-datepicker-toggle>\n\n\t\t\t<mat-datepicker #picker>\n\t\t\t</mat-datepicker>\n\n\t\t</mat-form-field>\n\t\t<mat-form-field *q-grid-time=\"let qGridTime\"\n\t\t\t\t\t\tclass=\"q-grid-column-filter-input q-grid-column-filter-input-half\">\n\t\t\t<input matInput\n\t\t\t\t   type=\"time\"\n\t\t\t\t   #input\n\t\t\t\t   [value]=\"$columnFilter.value | qGridTime: 'HH:mm'\"\n\t\t\t\t   (change)=\"$columnFilter.value = qGridTime.time($columnFilter.value, input.value)\" />\n\t\t</mat-form-field>\n\t</q-grid-tab-trap>\n</ng-template><ng-template key=\"plugin-column-filter-input.tpl.html\"\n\t\t\t let-$columnFilter\n\t\t\t let-$plugin=\"plugin\"\n\t\t\t let-$vscroll=\"vscroll\">\n\n\t<mat-form-field class=\"q-grid-column-filter-input\">\n\t\t<input matInput\n\t\t\t   [type]=\"$columnFilter.column.type\"\n\t\t\t   [placeholder]=\"$columnFilter.operator | qGridText : 'fromCamelCase'\"\n\t\t\t   [(ngModel)]=\"$columnFilter.value\"\n\t\t\t   q-grid-focus />\n\t</mat-form-field>\n\n</ng-template><ng-template key=\"plugin-column-filter-label.tpl.html\"\n             let-$columnFilter\n             let-$plugin=\"plugin\"\n             let-$vscroll=\"vscroll\">\n\n\t<mat-form-field class=\"q-grid-column-filter-input\">\n\t\t<input matInput\n\t\t       [placeholder]=\"$columnFilter.operator | qGridText : 'fromCamelCase'\"\n\t\t       disabled />\n\t</mat-form-field>\n</ng-template><ng-template key=\"plugin-column-filter-trigger.tpl.html\"\n             let-$columnFilterTrigger>\n    <button mat-icon-button\n            tabindex=\"-1\"\n            #trigger=\"matMenuTrigger\"\n            [matMenuTriggerFor]=\"menu\"\n            aria-label=\"Column filter\">\n        <mat-icon class=\"q-grid-icon\">filter_list</mat-icon>\n    </button>\n    <mat-menu #menu=\"matMenu\"\n              class=\"q-grid-column-filter q-grid-menu\">\n        <q-grid-column-filter q-grid-menu\n                              q-grid-theme-overlay\n                              *ngIf=\"trigger.menuOpen\"\n                              [column]=\"$columnFilterTrigger.column\"\n                              (cancel)=\"trigger.closeMenu()\"\n                              (submit)=\"trigger.closeMenu()\">\n        </q-grid-column-filter>\n    </mat-menu>\n</ng-template><ng-template key=\"plugin-column-filter.tpl.html\"\n             let-$columnFilter\n             let-$plugin=\"plugin\"\n             let-$vscroll=\"vscroll\">\n    <mat-card class=\"mat-elevation-z\">\n        <mat-card-header>\n            <mat-card-title>\n                {{$columnFilter.title}} Filter\n            </mat-card-title>\n        </mat-card-header>\n        <mat-card-content>\n            <div class=\"q-grid-column-filter-{{$columnFilter.operator}}\"\n                 [ngClass]=\"{ 'q-grid-column-filter-with-operators' : $plugin.hasOperators }\">\n\n                <mat-select class=\"q-grid-column-filter-operator-select\"\n                            *ngIf=\"$plugin.hasOperators\"\n                            [(value)]=\"$columnFilter.operator\"\n                            (selectionChange)=\"$plugin.reset(); $columnFilter.changeOperator.execute($columnFilter.operator)\">\n                    <mat-select-trigger>\n                        <mat-icon class=\"q-grid-icon\">more_vert</mat-icon>\n                    </mat-select-trigger>\n                    <mat-option *ngFor=\"let op of $plugin.operators\"\n                                [value]=\"op\">\n                        {{ op | qGridText : 'fromCamelCase' }}\n                    </mat-option>\n                </mat-select>\n\n                <ng-container [key]=\"$plugin.getOperatorTemplateKey($columnFilter.operator)\"\n                              [context]=\"{ \n                                 $implicit: $columnFilter, \n                                 plugin: $plugin, \n                                 vscroll: $vscroll \n                              }\">\n                </ng-container>\n\n            </div>\n        </mat-card-content>\n        <mat-card-actions>\n            <button mat-button\n                    [q-grid-command]=\"$columnFilter.cancel\">\n                Cancel\n            </button>\n            <button mat-button\n                    *ngIf=\"$columnFilter.operator !== 'isEmpty' && $columnFilter.operator !== 'isNotEmpty'\"\n                    (click)=\"$plugin.clear()\">\n                Clear\n            </button>\n            <button mat-button\n                    color=\"primary\"\n                    [q-grid-command]=\"$columnFilter.submit\">\n                Apply\n            </button>\n        </mat-card-actions>\n    </mat-card>\n</ng-template><ng-template key=\"plugin-column-sort.tpl.html\" let-$columnSort>\n    <mat-icon class=\"q-grid-icon q-grid-asc\">arrow_upward</mat-icon>\n    <mat-icon class=\"q-grid-icon q-grid-desc\">arrow_downward</mat-icon>\n    <ng-container *ngTemplateOutlet=\"$columnSort.template\"></ng-container>\n</ng-template><ng-template key=\"plugin-eb-autocomplete.tpl.html\"\n\t\t\t\t let-$expr>\n\t<mat-form-field floatLabel=\"never\"\n\t\t\t\t\t\t q-grid-autosize=\"input\"\n\t\t\t\t\t\t [q-grid-autosize-value]=\"$expr.value\"\n\t\t\t\t\t\t [q-grid-eb-class]=\"$expr.classes\"\n\t\t\t\t\t\t [q-grid-eb-class-model]=\"$expr\"\n\t\t\t\t\t\t matTooltip=\"{{$expr.state && $expr.state.join(', ')}}\"\n\t\t\t\t\t\t matTooltipPosition=\"after\"\n\t\t\t\t\t\t matTooltipShowDelay=\"800\"\n\t\t\t\t\t\t matTooltipClass=\"q-grid-query-builder-error-tooltip\">\n\t\t<input matInput\n\t\t\t\t #input=\"matAutocompleteTrigger\"\n\t\t\t\t [(ngModel)]=\"$expr.value\"\n\t\t\t\t (click)=\"$expr.refresh && $expr.refresh() && input.openPanel()\"\n\t\t\t\t (input)=\"$expr.change && $expr.change();$expr.refresh && $expr.refresh()\"\n\t\t\t\t (optionSelected)=\"$expr.change && $expr.change()\"\n\t\t\t\t [placeholder]=\"$expr.placeholderText\"\n\t\t\t\t [matAutocomplete]=\"autocomplete\">\n\n\t\t<mat-autocomplete #autocomplete=\"matAutocomplete\"\n\t\t\t\t\t\t\t\t(q-grid-backdrop)=\"input.closePanel()\"\n\t\t\t\t\t\t\t\t[q-grid-backdrop-active]=\"autocomplete.isOpen\"\n\t\t\t\t\t\t\t\tq-grid-backdrop-selector=\".mat-autocomplete-panel\">\n\t\t\t<mat-option *ngFor=\"let option of $expr.options | async\"\n\t\t\t\t\t\t\t[value]=\"option\">\n\t\t\t\t{{option}}\n\t\t\t</mat-option>\n\t\t</mat-autocomplete>\n\t</mat-form-field>\n</ng-template>\n<ng-template key=\"plugin-eb-button.tpl.html\"\n             let-$expr>\n\t<button mat-button\n\t        class=\"q-grid-query-builder-button\"\n\t        (click)=\"$expr.click && $expr.click($event)\"\n\t        [ngClass]=\"$expr.classes\">\n\t\t{{$expr.text}}\n\t</button>\n</ng-template><ng-template key=\"plugin-eb-icon-button.tpl.html\"\n             let-$expr>\n\t<button class=\"q-grid-query-builder-icon-button\"\n\t        (click)=\"$expr.click && $expr.click($event)\"\n\t        [ngClass]=\"$expr.classes\"\n\t        mat-icon-button>\n\t\t<mat-icon class=\"q-grid-icon\">\n\t\t\t{{ $expr.icon }}\n\t\t</mat-icon>\n\t</button>\n</ng-template><ng-template key=\"plugin-eb-input.tpl.html\"\n\t\t\t let-$expr>\n\t<mat-form-field floatLabel=\"never\"\n\t\t\t\t\tq-grid-autosize=\"input\"\n\t\t\t\t\t[q-grid-autosize-value]=\"$expr.value\"\n\t\t\t\t\t[q-grid-eb-class]=\"$expr.classes\"\n\t\t\t\t\t[q-grid-eb-class-model]=\"$expr\"\n\t\t\t\t\tmatTooltip=\"{{$expr.state && $expr.state.join(', ')}}\"\n\t\t\t\t\tmatTooltipPosition=\"after\"\n\t\t\t\t\tmatTooltipShowDelay=\"800\"\n\t\t\t\t\tmatTooltipClass=\"q-grid-query-builder-error-tooltip\">\n\t\t<input matInput\n\t\t\t   [(ngModel)]=\"$expr.value\"\n\t\t\t   (input)=\"$expr.change && $expr.change();$expr.refresh && $expr.refresh()\"\n\t\t\t   [placeholder]=\"$expr.placeholderText\" />\n\t</mat-form-field>\n</ng-template><ng-template key=\"plugin-eb-label.tpl.html\"\n             let-$expr>\n\t<label class=\"q-grid-query-builder-label\">\n\t\t{{$expr.text}}\n\t</label>\n</ng-template><ng-template key=\"plugin-eb-multiselect.tpl.html\"\n             let-$expr>\n    <mat-chip-list #chipList\n                   class=\"q-grid-query-builder-multiselect\"\n                   [ngClass]=\"$expr.classes\">\n        <mat-chip *ngFor=\"let value of $expr.values; let $index = index;\"\n                  class=\"mat-basic-chip\"\n                  selectable=\"false\"\n                  removable=\"true\"                  \n                  (removed)=\"$expr.values.splice($index, 1)\">\n            {{value}}\n            <mat-icon class=\"q-grid-icon\"\n                      matChipRemove>\n                close\n            </mat-icon>\n        </mat-chip>\n    </mat-chip-list>\n    <mat-form-field [floatLabel]=\"'never'\">\n        <input matInput\n               #chipInput\n               [placeholder]=\"$expr.placeholderText\"\n               [matChipInputFor]=\"chipList\"\n               matChipInputAddOnBlur=\"true\"\n               (matChipInputTokenEnd)=\"$expr.add($event.value);$event.input.value = '';\" />\n    </mat-form-field>\n</ng-template><ng-template key=\"plugin-eb-select.tpl.html\"\n             let-$expr>\n    <mat-select [(value)]=\"$expr.value\"\n                (selectionChange)=\"$expr.change && $expr.change($event)\"\n                (openedChange)=\"$expr.open && $expr.open($event)\"\n                [q-grid-eb-class]=\"$expr.classes\"\n                [q-grid-eb-class-model]=\"$expr\">\n        <mat-option *ngFor=\"let option of ($expr.options || $expr.getOptions())\"\n                    [value]=\"option\"\n                    [disabled]=\"$expr.disabled && $expr.disabled(option)\">\n            <mat-icon *ngIf=\"$expr.icon\">{{$expr.icon(option)}}</mat-icon>\n            {{($expr.getLabel && $expr.getLabel(option)) || option}}\n        </mat-option>\n    </mat-select>\n</ng-template><ng-template key=\"plugin-edit-form-trigger.tpl.html\"\n\t\t\t let-$trigger>\n\t<button mat-icon-button\n\t\t\tclass=\"q-grid-icon-button\"\n\t\t\t#trigger=\"matMenuTrigger\"\n\t\t\t[matMenuTriggerFor]=\"menu\"\n\t\t\taria-label=\"Edit form\">\n\t\t<mat-icon class=\"q-grid-icon\">\n\t\t\tedit\n\t\t</mat-icon>\n\t</button>\n\t<mat-menu #menu=\"matMenu\"\n\t\t\t  class=\"q-grid-edit-form q-grid-menu\">\n\t\t<q-grid-edit-form q-grid-menu\n\t\t\t\t\t\t  *ngIf=\"trigger.menuOpen\"\n\t\t\t\t\t\t  [caption]=\"$trigger.caption\"\n\t\t\t\t\t\t  [row]=\"$trigger.row\"\n\t\t\t\t\t\t  (cancel)=\"trigger.closeMenu()\"\n\t\t\t\t\t\t  (submit)=\"trigger.closeMenu()\">\n\t\t</q-grid-edit-form>\n\t</mat-menu>\n</ng-template><ng-template key=\"plugin-edit-form.tpl.html\"\n\t\t\t let-$editForm>\n\t<mat-card class=\"mat-elevation-z q-grid-edit-form-card\"\n\t\t\t  (keydown)=\"$event.stopPropagation()\">\n\t\t<mat-card-header>\n\t\t\t<mat-card-title>\n\t\t\t\t{{$editForm.caption}}\n\t\t\t</mat-card-title>\n\t\t</mat-card-header>\n\t\t<mat-card-content class=\"q-grid-edit-form-content\">\n\t\t\t<q-grid-edit-form-control *ngFor=\"let editor of $editForm.editors\"\n\t\t\t\t\t\t\t\t\t  class=\"q-grid-edit-form-control\"\n\t\t\t\t\t\t\t\t\t  [ngClass]=\"'q-grid-edit-form-control-' + (editor.cell.column.editor || editor.cell.column.type)\"\n\t\t\t\t\t\t\t\t\t  [editor]=\"editor\">\n\t\t\t</q-grid-edit-form-control>\n\t\t</mat-card-content>\n\t\t<mat-card-actions>\n\t\t\t<button mat-button\n\t\t\t\t\tq-grid-focus\n\t\t\t\t\t[q-grid-command]=\"$editForm.cancel\">\n\t\t\t\tCancel\n\t\t\t</button>\n\t\t\t<button mat-button\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t[q-grid-command]=\"$editForm.submit\">\n\t\t\t\tSave\n\t\t\t</button>\n\t\t</mat-card-actions>\n\t</mat-card>\n</ng-template><ng-template key=\"plugin-export.tpl.html\"\n\t\t\t let-$export>\n\t<div class=\"q-grid-export\">\n\t\t<button mat-button\n\t\t\t\t*ngIf=\"$export[$export.type]\"\n\t\t\t\t[q-grid-command]=\"$export[$export.type]\">\n\t\t\t<mat-icon class=\"q-grid-icon\">\n\t\t\t\tfile_download\n\t\t\t</mat-icon>\n\n\t\t\tExport to {{$export.type}}\n\t\t</button>\n\t</div>\n</ng-template><ng-template key=\"plugin-pager-target.tpl.html\"\n\t\t\t let-$target>\n\n\t<mat-menu #menu=\"matMenu\"\n\t\t\t  class=\"q-grid-mat-menu\">\n\t\t<mat-card *ngIf=\"trigger.menuOpen\" [q-grid-stop-propagate]=\"['keydown', 'keypress', 'keyup']\" >\n\t\t\t<mat-form-field>\n\t\t\t\t<input id=\"q-grid-menu-input\"\n\t\t\t\t\t   matInput\n\t\t\t\t\t   type=\"number\"\n\t\t\t\t\t   #input\n\t\t\t\t\t   (click)=\"$event.stopPropagation()\"\n\t\t\t\t\t   [(ngModel)]=\"$target.value\"\n\t\t\t\t\t   [max]=\"$target.total\"\n\t\t\t\t\t   [min]=\"1\"\n\t\t\t\t\t   q-grid-focus\n\t\t\t\t\t   (keydown)=\"$target.keyDown($event)\"\n\t\t\t\t\t   (keyup.enter)=\"trigger.closeMenu()\"\n\t\t\t\t\t   placeholder=\"Go to page:\" />\n\t\t\t\t<mat-hint align=\"end\">{{$target.value}} / {{$target.total}}</mat-hint>\n\t\t\t</mat-form-field>\n\t\t</mat-card>\n\t</mat-menu>\n\n\t<button #trigger=\"matMenuTrigger\"\n\t\t\t[matMenuTriggerFor]=\"menu\"\n\t\t\ttabindex=\"-1\"\n\t\t\tmat-button\n\t\t\t(click)=\"$target.value = $target.current\"\n\t\t\tclass=\"q-grid-pager-target-trigger mat-icon-button\">\n\t\t<mat-icon class=\"q-grid-icon-class\">location_searching</mat-icon>\n\t</button>\n\n</ng-template><ng-template key=\"plugin-pager.tpl.html\"\n\t\t\t let-$pager>\n\t<div class=\"q-grid-pager\"\n\t\t [ngSwitch]=\"$pager.scroll.mode\">\n\t\t<div *ngSwitchCase=\"'virtual'\">\n\t\t\t<label class=\"q-grid-pager-page\"\n\t\t\t\t   [ngSwitch]=\"$pager.mode\">\n\t\t\t\t<span *ngSwitchCase=\"'showRows'\">{{$pager.from}}-{{$pager.to}} of {{$pager.total}}</span>\n\t\t\t\t<span *ngSwitchDefault>{{$pager.current + 1}} of {{$pager.totalPages}}</span>\n\t\t\t</label>\n\t\t</div>\n\t\t<div *ngSwitchDefault>\n\t\t\t<label class=\"q-grid-pager-page-size q-grid-hide-xs\">Rows per page:</label>\n\t\t\t<mat-select tabindex=\"-1\"\n\t\t\t\t\t\taria-label=\"Page Size List\"\n\t\t\t\t\t\tclass=\"q-grid-pager-page-size q-grid-hide-xs\"\n\t\t\t\t\t\t[panelClass]=$pager.theme\n\t\t\t\t\t\t[(value)]=\"$pager.size\">\n\t\t\t\t<mat-option *ngFor=\"let size of $pager.sizeList\"\n\t\t\t\t\t\t\t[value]=\"size\">\n\t\t\t\t\t{{size}}\n\t\t\t\t</mat-option>\n\t\t\t</mat-select>\n\t\t\t<label class=\"q-grid-pager-page q-grid-hide-xs\"\n\t\t\t\t   [ngSwitch]=\"$pager.mode\">\n\t\t\t\t<span *ngSwitchCase=\"'showRows'\">\n\t\t\t\t\t<span *ngIf=\"$pager.total > 0\">\n\t\t\t\t\t\t{{$pager.from}} - {{$pager.to}} of {{$pager.total}}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span *ngIf=\"$pager.total === 0\">\n\t\t\t\t\t\tNo Rows\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t<span *ngSwitchDefault>\n\t\t\t\t\t{{$pager.current + 1}} of {{$pager.totalPages}}\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t\t<button tabindex=\"-1\"\n\t\t\t\t\tmat-button\n\t\t\t\t\tclass=\"mat-icon-button q-grid-prev-page\"\n\t\t\t\t\t[q-grid-command]=\"$pager.prev\"\n\t\t\t\t\t[q-grid-command-use-shortcut]=\"true\"\n\t\t\t\t\t[matTooltip]=\"'Previous Page' + ' (' + ($pager.prev.shortcut | uppercase) + ')'\"\n\t\t\t\t\t[matTooltipShowDelay]=\"800\">\n\t\t\t\t<mat-icon class=\"q-grid-icon\">keyboard_arrow_left</mat-icon>\n\t\t\t</button>\n\n\t\t\t<q-grid-pager-target matTooltip=\"Select a Page\"\n\t\t\t\t\t\t\t\t [matTooltipShowDelay]=\"800\">\n\t\t\t</q-grid-pager-target>\n\n\t\t\t<button tabindex=\"-1\"\n\t\t\t\t\tmat-button\n\t\t\t\t\tclass=\"mat-icon-button q-grid-next-page\"\n\t\t\t\t\t[q-grid-command]=\"$pager.next\"\n\t\t\t\t\t[q-grid-command-use-shortcut]=\"true\"\n\t\t\t\t\t[matTooltip]=\"'Next Page' + ' (' + ($pager.next.shortcut | uppercase) + ')'\"\n\t\t\t\t\t[matTooltipShowDelay]=\"800\">\n\t\t\t\t<mat-icon class=\"q-grid-icon\">keyboard_arrow_right</mat-icon>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</ng-template><ng-template key=\"plugin-persistence-panel.tpl.html\"\n\t\t\t let-$persistence>\n\t<mat-card class=\"mat-elevation-z\">\n\t\t<mat-card-header>\n\t\t\t<mat-card-title>Save/Load</mat-card-title>\n\t\t</mat-card-header>\n\t\t<mat-card-content>\n\t\t\t<div class=\"q-grid-flex-none q-grid-layout-row\">\n\t\t\t\t<div class=\"q-grid-flex-100 q-grid-persistence-title\">\n\t\t\t\t\t<mat-form-field>\n\t\t\t\t\t\t<input matInput\n\t\t\t\t\t\t\t   type=\"text\"\n\t\t\t\t\t\t\t   q-grid-focus\n\t\t\t\t\t\t\t   placeholder=\"Save As...\"\n\t\t\t\t\t\t\t   [(ngModel)]=\"$persistence.title\" />\n\t\t\t\t\t</mat-form-field>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"q-grid-flex-none q-grid-persistence-save\">\n\t\t\t\t\t<button mat-button\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t[q-grid-command]=\"$persistence.create\">\n\t\t\t\t\t\tSave\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<mat-list class=\"q-grid-persistence-list\">\n\t\t\t\t<mat-list-item [ngClass]=\"{'q-grid-persistence-selected': $persistence.isActive($persistence.blank)}\"\n\t\t\t\t\t\t\t   class=\"q-grid-persistence-list-item\">\n\t\t\t\t\t<div class=\"q-grid-persistence-default-icon\"></div>\n\t\t\t\t\t<button mat-button\n\t\t\t\t\t\t\tmatTooltip=\"No settings\"\n\t\t\t\t\t\t\t[q-grid-command]=\"$persistence.reset\">\n\t\t\t\t\t\t<mat-list dense>\n\t\t\t\t\t\t\t<mat-list-item>\n\t\t\t\t\t\t\t\t<h3 matLine>{{$persistence.blank.title}}</h3>\n\t\t\t\t\t\t\t\t<span matLine></span>\n\t\t\t\t\t\t\t</mat-list-item>\n\t\t\t\t\t\t</mat-list>\n\t\t\t\t\t</button>\n\t\t\t\t</mat-list-item>\n\t\t\t\t<ng-container *ngFor=\"let group of $persistence.groups\">\n\t\t\t\t\t<h3 mat-subheader>{{group.key}}</h3>\n\t\t\t\t\t<mat-list-item *ngFor=\"let item of group.items\"\n\t\t\t\t\t\t\t\t   [ngClass]=\"{'q-grid-persistence-selected': $persistence.isActive(item)}\"\n\t\t\t\t\t\t\t\t   class=\"q-grid-persistence-list-item\">\n\t\t\t\t\t\t<div class=\"q-grid-persistence-default-icon\">\n\t\t\t\t\t\t\t<mat-icon class=\"q-grid-icon\"\n\t\t\t\t\t\t\t\t\t  *ngIf=\"item.isDefault\">star</mat-icon>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button mat-button\n\t\t\t\t\t\t\t\tmatTooltip=\"{{$persistence.stringify(item)}}\"\n\t\t\t\t\t\t\t\t*ngIf=\"$persistence.state.editItem !== item\"\n\t\t\t\t\t\t\t\t[q-grid-command]=\"$persistence.load\"\n\t\t\t\t\t\t\t\t[q-grid-command-arg]=\"item\">\n\t\t\t\t\t\t\t<mat-list dense>\n\t\t\t\t\t\t\t\t<mat-list-item>\n\t\t\t\t\t\t\t\t\t<h3 matLine>{{item.title}}</h3>\n\t\t\t\t\t\t\t\t\t<span matLine\n\t\t\t\t\t\t\t\t\t\t  class=\"q-grid-selected-item-modified\">{{item.modified | qGridDate: 'MM/dd/yyyy h:mm a'}}</span>\n\t\t\t\t\t\t\t\t</mat-list-item>\n\t\t\t\t\t\t\t</mat-list>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<mat-form-field *ngIf=\"$persistence.state.editItem === item\"\n\t\t\t\t\t\t\t\t\t\tclass=\"q-grid-persistence-item-edit\">\n\t\t\t\t\t\t\t<input matInput\n\t\t\t\t\t\t\t\t   #input\n\t\t\t\t\t\t\t\t   (blur)=\"$persistence.edit.commit.canExecute(item) && $persistence.edit.commit.execute(item)\"\n\t\t\t\t\t\t\t\t   [(ngModel)]=\"item.title\"\n\t\t\t\t\t\t\t\t   q-grid-focus />\n\t\t\t\t\t\t</mat-form-field>\n\t\t\t\t\t\t<div class=\"q-grid-more\">\n\t\t\t\t\t\t\t<button mat-button\n\t\t\t\t\t\t\t\t\t[matMenuTriggerFor]=\"menu\">\n\t\t\t\t\t\t\t\t<mat-icon>more_vert</mat-icon>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<mat-menu #menu=\"matMenu\">\n\t\t\t\t\t\t\t\t<button mat-menu-item\n\t\t\t\t\t\t\t\t\t\t[q-grid-command]=\"$persistence.setDefault\"\n\t\t\t\t\t\t\t\t\t\t[q-grid-command-arg]=\"item\">\n\t\t\t\t\t\t\t\t\t<mat-icon class=\"q-grid-icon\">star</mat-icon>\n\t\t\t\t\t\t\t\t\tDefault\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button mat-menu-item\n\t\t\t\t\t\t\t\t\t\t[q-grid-command]=\"$persistence.edit.enter\"\n\t\t\t\t\t\t\t\t\t\t[q-grid-command-arg]=\"item\">\n\t\t\t\t\t\t\t\t\t<mat-icon class=\"q-grid-icon\">mode_edit</mat-icon>\n\t\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button mat-menu-item\n\t\t\t\t\t\t\t\t\t\t[q-grid-command]=\"$persistence.remove\"\n\t\t\t\t\t\t\t\t\t\t[q-grid-command-arg]=\"item\">\n\t\t\t\t\t\t\t\t\t<mat-icon class=\"q-grid-icon\">close</mat-icon>\n\t\t\t\t\t\t\t\t\tRemove\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</mat-menu>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</mat-list-item>\n\t\t\t\t</ng-container>\n\t\t\t</mat-list>\n\t\t</mat-card-content>\n\t</mat-card>\n</ng-template><ng-template key=\"plugin-persistence.tpl.html\">\n\t<button mat-icon-button\n\t        tabindex=\"-1\"\n\t        #trigger=\"matMenuTrigger\"\n\t        [matMenuTriggerFor]=\"menu\"\n\t        aria-label=\"Persistence\">\n\t\t<mat-icon class=\"q-grid-icon\">history</mat-icon>\n\t</button>\n\t<mat-menu #menu=\"matMenu\"\n\t          class=\"q-grid-menu q-grid-persistence-panel\">\n\t\t<q-grid-persistence-panel q-grid-menu\n\t\t                          *ngIf=\"trigger.menuOpen\">\n\t\t</q-grid-persistence-panel>\n\t</mat-menu>\n</ng-template>\n<ng-template key=\"plugin-progress.tpl.html\"\n             let-$progress>\n\t<mat-progress-bar class=\"q-grid-progress-linear\"\n\t                  *ngIf=\"$progress.isBusy\"\n\t                  mode=\"indeterminate\">\n\t</mat-progress-bar>\n</ng-template>\n<ng-template key=\"plugin-query-builder-panel.tpl.html\"\n             let-$builder>\n\t<mat-card class=\"mat-elevation-z\">\n\t\t<mat-card-header>\n\t\t\t<mat-card-title>\n\t\t\t\tQuery Builder\n\t\t\t</mat-card-title>\n\t\t</mat-card-header>\n\t\t<mat-card-content>\n\t\t\t<div class=\"q-grid-query-builder-toolbar\">\n\t\t\t\t<mat-toolbar>\n\t\t\t\t\t<button mat-button\n\t\t\t\t\t        (click)=\"$builder.addGroup.execute()\"\n\t\t\t\t\t        [disabled]=\"!$builder.addGroup.canExecute()\">\n\t\t\t\t\t\t<mat-icon>playlist_add</mat-icon>Add Group\n\t\t\t\t\t</button>\n\t\t\t\t\t<button mat-button\n\t\t\t\t\t        (click)=\"$builder.addRule.execute()\"\n\t\t\t\t\t        [disabled]=\"!$builder.addRule.canExecute()\">\n\t\t\t\t\t\t<mat-icon>add</mat-icon>Add Rule\n\t\t\t\t\t</button>\n\t\t\t\t\t<button mat-button\n\t\t\t\t\t        (click)=\"$builder.remove.execute()\"\n\t\t\t\t\t        [disabled]=\"!$builder.remove.canExecute()\">\n\t\t\t\t\t\t<mat-icon>delete_forever</mat-icon>Remove\n\t\t\t\t\t</button>\n\t\t\t\t</mat-toolbar>\n\t\t\t</div>\n\t\t\t<div class=\"q-grid-query-builder-expression\">\n\t\t\t\t<q-grid-eb-node [model]=\"$builder.node\">\n\t\t\t\t</q-grid-eb-node>\n\t\t\t</div>\n\t\t\t<div class=\"q-grid-query-builder-expression-line\"\n\t\t\t     [innerHTML]=\"$builder.node | qGridQueryBuilderMarkup: $builder.queryService\">\n\t\t\t</div>\n\t\t</mat-card-content>\n\t\t<mat-card-actions>\n\t\t\t<button mat-button\n\t\t\t        (click)=\"$builder.cancel.execute()\">\n\t\t\t\tCancel\n\t\t\t</button>\n\t\t\t<button mat-button\n\t\t\t        (click)=\"$builder.reset.execute()\">\n\t\t\t\tClear\n\t\t\t</button>\n\t\t\t<button mat-button\n\t\t\t        color=\"primary\"\n\t\t\t\t(click)=\"$builder.submit.execute()\"\n\t\t\t\t[disabled]=\"!$builder.submit.canExecute()\">\n\t\t\t\tApply\n\t\t\t</button>\n\t\t</mat-card-actions>\n\t</mat-card>\n</ng-template><ng-template key=\"plugin-query-builder.tpl.html\">\n\t<button mat-icon-button\n\t        tabindex=\"-1\"\n\t        #trigger=\"matMenuTrigger\"\n\t        [matMenuTriggerFor]=\"menu\"\n\t        aria-label=\"Query Builder\">\n\t\t<mat-icon class=\"q-grid-icon\">filter_list</mat-icon>\n\t</button>\n\t<mat-menu #menu=\"matMenu\"\n\t          class=\"q-grid-menu q-grid-query-builder-panel\">\n\t\t<q-grid-query-builder-panel q-grid-menu\n\t\t                            (close)=\"trigger.closeMenu()\"\n\t\t                            *ngIf=\"trigger.menuOpen\">\n\t\t</q-grid-query-builder-panel>\n\t</mat-menu>\n</ng-template><ng-template key=\"plugin-reference-editor.tpl.html\"\n             let-$editor>\n    <mat-card class=\"q-grid-reference-card\">\n        <mat-card-content class=\"q-grid-reference-content\">\n            <q-grid-reference [cell]=\"$editor.cell\"\n                              [(value)]=\"$editor.value\"\n                              [caption]=\"$editor.caption\"\n                              [autofocus]=\"true\"\n                              (modelChange)=\"$editor.model = $event\"\n                              (referenceChange)=\"$editor.reference = $event\">\n            </q-grid-reference>\n        </mat-card-content>\n        <mat-card-actions>\n            <button mat-button\n                    [q-grid-command]=\"$editor.cancel\">\n                Cancel\n            </button>\n            <button mat-button\n                    color=\"primary\"\n                    [q-grid-command]=\"$editor.submit\">\n                Save\n            </button>\n        </mat-card-actions>\n    </mat-card>\n</ng-template><ng-template key=\"plugin-reference.tpl.html\"\n             let-$reference>\n    <q-grid class=\"q-grid-compact\"\n            [model]=\"$reference.model\"\n            [caption]=\"$reference.caption\"\n            [q-grid-autofocus]=\"$reference.autofocus\">\n\n        <q-grid-visibility [toolbarTop]=\"false\">\n        </q-grid-visibility>\n    </q-grid>\n</ng-template><ng-template key=\"plugin-status-bar.tpl.html\" let-$statusBar>\n\t<div class=\"q-grid-status-bar\">\n\t\t{{$statusBar.columnIndex}}:{{$statusBar.rowIndex}}\n\t</div>\n</ng-template>\n<ng-template key=\"plugin-tab-trap.tpl.html\"\n             let-$tabTrap>\n     <div q-grid-tab-trap-in=\"start\"\n          [q-grid-tab-trap-host]=\"$tabTrap\">\n     </div>\n     <ng-container *ngTemplateOutlet=\"$tabTrap.template\"></ng-container>\n     <div q-grid-tab-trap-in=\"end\"\n          [q-grid-tab-trap-host]=\"$tabTrap\">\n     </div>\n</ng-template><ng-template key=\"plugin-validator.tpl.html\" let-$validator>\n\t<ul>\n\t\t<li *ngFor=\"let error of $validator.errors; let $index = index\">\n\t\t\t<span *ngIf=\"error\">{{error}}</span>\n\t\t\t<span *ngIf=\"error && $validator.type === 'array'\">: \"{{$validator.value[$index]}}\"</span>\n\t\t</li>\n\t</ul>\n</ng-template>\n<ng-template key=\"toolbar-bottom.tpl.html\">\n\t<div class=\"q-grid-layout-row\">\n\t\t<div class=\"q-grid-flex\">\n\t\t\t<q-grid-legend></q-grid-legend>\n\t\t</div>\n\t\t<div class=\"q-grid-flex-none\">\n\t\t\t<q-grid-pager></q-grid-pager>\n\t\t</div>\n\t</div>\n</ng-template>\n<ng-template key=\"toolbar-left.tpl.html\">\n</ng-template>\n<ng-template key=\"toolbar-right.tpl.html\">\n</ng-template>\n<ng-template key=\"toolbar-top.tpl.html\">\n\t<div class=\"q-grid-layout-row q-grid-layout-align-start-center\">\n\t\t<q-grid-caption class=\"q-grid-flex-auto\"></q-grid-caption>\n\t\t<q-grid-action-bar></q-grid-action-bar>\n\t\t<q-grid-progress class=\"q-grid-progress\"></q-grid-progress>\n\t</div>\n</ng-template>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ChipsModule } from './components/chips/chips.module';\nimport { DateAdapterModule } from './components/date-adapter/date-adpater.module';\nimport { MenuModule } from './components/menu/menu.module';\nimport { SelectModule } from './components/select/select.module';\nimport { ThemeComponent } from './theme.component';\nimport { ThemeOverlayModule } from './components/theme-overlay/theme-overlay.module';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatDatepickerModule } from '@angular/material/datepicker';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatListModule } from '@angular/material/list';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatNativeDateModule } from '@angular/material/core';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { MatRadioModule } from '@angular/material/radio';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport {\n\tActionBarModule,\n\tActionModule,\n\tAutoCompleteEditorModule,\n\tBackdropModule,\n\tBoolEditorModule,\n\tCaptionModule,\n\tCellEditorModule,\n\tCellTooltipModule,\n\tChangeDetectorModule,\n\tColumnChooserModule,\n\tColumnChooserTriggerModule,\n\tColumnFilterModule,\n\tColumnSortModule,\n\tCommandModule,\n\tDataManipulationModule,\n\tDateModule,\n\tDndModule,\n\tEbModule,\n\tEditFormModule,\n\tExportModule,\n\tFileModule,\n\tFocusModule,\n\tGridModule,\n\tImportModule,\n\tLayerModule,\n\tLayoutModule,\n\tLegendModule,\n\tLiveCellModule,\n\tLiveColumnModule,\n\tLiveRowModule,\n\tMarkupModule,\n\tPagerModule,\n\tPaneModule,\n\tPersistenceModule,\n\tPipeModule,\n\tProgressModule,\n\tQueryBuilderModule,\n\tReferenceEditorModule,\n\tResizeModule,\n\tRestModule,\n\tStatusBarModule,\n\tTabTrapModule,\n\tTemplateModule,\n\tThemeService,\n\tTimeModule,\n\tValidationModule,\n\tVisibilityModule,\n\tVscrollModule,\n} from 'ng2-qgrid';\n\n@NgModule({\n    declarations: [\n        ThemeComponent\n    ],\n    exports: [\n        ThemeComponent\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        GridModule,\n        TemplateModule,\n        DndModule,\n        VscrollModule,\n        ResizeModule,\n        ChipsModule,\n        SelectModule,\n        ThemeOverlayModule,\n        ActionBarModule,\n        ActionModule,\n        AutoCompleteEditorModule,\n        BackdropModule,\n        BoolEditorModule,\n        CaptionModule,\n        CellTooltipModule,\n        CellEditorModule,\n        ChangeDetectorModule,\n        ColumnChooserModule,\n        ColumnChooserTriggerModule,\n        ColumnFilterModule,\n        ColumnSortModule,\n        CommandModule,\n        DataManipulationModule,\n        DateAdapterModule,\n        DateModule,\n        EbModule,\n        EditFormModule,\n        ExportModule,\n        FileModule,\n        FocusModule,\n        ImportModule,\n        LayerModule,\n        LayoutModule,\n        LegendModule,\n        LiveCellModule,\n        LiveColumnModule,\n        LiveRowModule,\n        MarkupModule,\n        MenuModule,\n        PagerModule,\n        PaneModule,\n        PersistenceModule,\n        PipeModule,\n        ProgressModule,\n        QueryBuilderModule,\n        ReferenceEditorModule,\n        RestModule,\n        StatusBarModule,\n        TabTrapModule,\n        TimeModule,\n        ValidationModule,\n        VisibilityModule,\n        MatAutocompleteModule,\n        MatButtonModule,\n        MatCardModule,\n        MatCheckboxModule,\n        MatChipsModule,\n        MatDatepickerModule,\n        MatDialogModule,\n        MatIconModule,\n        MatInputModule,\n        MatListModule,\n        MatMenuModule,\n        MatNativeDateModule,\n        MatProgressBarModule,\n        MatRadioModule,\n        MatSelectModule,\n        MatToolbarModule,\n        MatTooltipModule,\n    ]\n})\nexport class ThemeModule {\n\tconstructor(theme: ThemeService) {\n\t\ttheme.name = 'material';\n\t\ttheme.component = ThemeComponent;\n\t}\n}\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, Input, NgZone, OnInit } from '@angular/core';\nimport { BodyHost, ColumnView, EventListener, EventManager, SelectionState } from '@qgrid/core';\nimport { GridLet } from '../grid/grid-let';\nimport { GridModel } from '../grid/grid-model';\nimport { GridPlugin } from '../plugin/grid-plugin';\nimport { TableCoreService } from '../table/table-core.service';\n@Component({\n\t// tslint:disable-next-line\n\tselector: 'tbody[q-grid-core-body]',\n\ttemplateUrl: './body-core.component.html',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BodyCoreComponent implements OnInit {\n\t@Input() pin = 'body';\n\n\tconstructor(\n\t\tpublic $view: GridLet,\n\t\tpublic $table: TableCoreService,\n\t\tprivate elementRef: ElementRef,\n\t\tprivate zone: NgZone,\n\t\tprivate cd: ChangeDetectorRef,\n\t\tprivate plugin: GridPlugin\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst { model, disposable, observeReply, observe } = this.plugin;\n\t\tconst nativeElement = this.elementRef.nativeElement as HTMLElement;\n\n\t\tconst host = new BodyHost(this.plugin);\n\n\t\tconst listener = new EventListener(this.elementRef.nativeElement, new EventManager(this));\n\t\tthis.zone.runOutsideAngular(() => {\n\t\t\tconst scrollSettings = { passive: true };\n\t\t\tdisposable.add(\n\t\t\t\tlistener.on('scroll', () =>\n\t\t\t\t\thost.scroll({\n\t\t\t\t\t\tscrollLeft: this.$table.pin === 'mid' ? nativeElement.scrollLeft : model.scroll().left,\n\t\t\t\t\t\tscrollTop: nativeElement.scrollTop\n\t\t\t\t\t}),\n\t\t\t\t\tscrollSettings\n\t\t\t\t));\n\n\t\t\tdisposable.add(listener.on('wheel', e => host.wheel(e)));\n\t\t\tdisposable.add(listener.on('mouseleave', e => host.mouseLeave(e)));\n\t\t});\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (model.grid().interactionMode === 'detached') {\n\t\t\t\t\tif (e.hasChanges('status')) {\n\t\t\t\t\t\tswitch (e.state.status) {\n\t\t\t\t\t\t\tcase 'stop':\n\t\t\t\t\t\t\t\tthis.cd.detach();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'start':\n\t\t\t\t\t\t\t\tthis.cd.reattach();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserve(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('status') && e.state.status === 'push') {\n\t\t\t\t\tthis.cd.markForCheck();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t// @deprecated\n\tget selection(): SelectionState {\n\t\treturn this.model.selection();\n\t}\n\n\tget model(): GridModel {\n\t\treturn this.plugin.model;\n\t}\n\n\tcolumnId(index: number, item: ColumnView) {\n\t\treturn item.model.key;\n\t}\n\n\trowId(index: number, row: any) {\n\t\treturn index;\n\t}\n\n\tmapToDataIndex(viewIndex: number) {\n\t\treturn this.$view.scroll.y.container.position + viewIndex;\n\t}\n}\n","<ng-container *ngTemplateOutlet=\"$view.scroll.mode === 'virtual' && pin === 'body' ? virtualRows : rows\">\n</ng-container>\n\n<ng-template #virtualRows>\n\t<tr q-grid-vscroll-mark=\"top\"\n\t\tclass=\"q-grid-scroll-mark\">\n\t</tr>\n\t<tr class=\"q-grid-align\">\n\t\t<td *ngFor=\"let $column of $view.body.columns($table.pin); trackBy: columnId\"\n\t\t\t[q-grid-core-td-align]=\"$column\">\n\t\t</td>\n\t</tr>\n\t<tr *ngFor=\"let $row of $view.body.render.rows[pin] | qGridVscroll$: $view.scroll.y | async; index as $vscrollIndex; trackBy: $view.scroll.y.id\"\n\t\t[q-grid-core-tr]=\"$row\"\n\t\t[q-grid-core-index]=\"$vscrollIndex\"\n\t\t[q-grid-vscroll-row]=\"$vscrollIndex\"\n\t\tq-grid-core-source=\"body\">\n\t\t<td *ngFor=\"let $column of $view.body.render.columns($row, $table.pin, mapToDataIndex($vscrollIndex)); index as $columnIndex; trackBy: columnId\"\n\t\t\t[attr.rowspan]=\"$view.body.render.rowspan($row, $column, mapToDataIndex($vscrollIndex), $columnIndex)\"\n\t\t\t[attr.colspan]=\"$view.body.render.colspan($row, $column, mapToDataIndex($vscrollIndex), $columnIndex)\">\n\t\t\t<ng-container [q-grid-core-td]=\"$column\"\n\t\t\t\t\t\t  [q-grid-core-label]=\"$view.body.render.getLabel($row, $column.model, mapToDataIndex($vscrollIndex), $columnIndex)\"\n\t\t\t\t\t\t  [q-grid-core-value]=\"$view.body.render.getValue($row, $column.model, mapToDataIndex($vscrollIndex), $columnIndex)\">\n\t\t\t</ng-container>\n\t\t</td>\n\t</tr>\n\t<tr q-grid-vscroll-mark=\"bottom\"\n\t\tclass=\"q-grid-scroll-mark\">\n\t</tr>\n</ng-template>\n\n<ng-template #rows>\n\t<tr class=\"q-grid-align\">\n\t\t<td *ngFor=\"let $column of $view.body.columns($table.pin); trackBy: columnId\"\n\t\t\t[q-grid-core-td-align]=\"$column\">\n\t\t</td>\n\t</tr>\n\t<tr *ngFor=\"let $row of $view.body.render.rows[pin]; index as $rowIndex; trackBy: rowId\"\n\t\t[q-grid-core-tr]=\"$row\"\n\t\t[q-grid-core-index]=\"$rowIndex\"\n\t\tq-grid-core-source=\"body\">\n\t\t<td *ngFor=\"let $column of $view.body.render.columns($row, $table.pin, $rowIndex); index as $columnIndex; trackBy: columnId\"\n\t\t\t[attr.rowspan]=\"$view.body.render.rowspan($row, $column, $rowIndex, $columnIndex)\"\n\t\t\t[attr.colspan]=\"$view.body.render.colspan($row, $column, $rowIndex, $columnIndex)\">\n\t\t\t<ng-container [q-grid-core-td]=\"$column\"\n\t\t\t\t\t\t  [q-grid-core-label]=\"$view.body.render.getLabel($row, $column.model, $rowIndex, $columnIndex)\"\n\t\t\t\t\t\t  [q-grid-core-value]=\"$view.body.render.getValue($row, $column.model, $rowIndex, $columnIndex)\">\n\t\t\t</ng-container>\n\t\t</td>\n\t</tr>\n</ng-template>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { BodyCoreComponent } from './body-core.component';\nimport { TdCoreAlignDirective } from './td-core-align.directive';\nimport { TdCoreDirective } from './td-core.directive';\nimport { VscrollModule } from '../vscroll/vscroll.module';\nimport { RowModule } from '../row/row.module';\n\n@NgModule({\n\tdeclarations: [\n\t\tBodyCoreComponent,\n\t\tTdCoreAlignDirective,\n\t\tTdCoreDirective,\n\t],\n\timports: [\n\t\tCommonModule,\n\t\tVscrollModule,\n\t\tRowModule,\n\t],\n\texports: [\n\t\tBodyCoreComponent,\n\t]\n})\nexport class BodyModule {\n}\n","import { Directive, ElementRef, Input, OnInit } from '@angular/core';\nimport { ColumnView } from '@qgrid/core';\nimport { CellClassService } from '../cell/cell-class.service';\n\n@Directive({\n\tselector: '[q-grid-core-td-align]',\n})\nexport class TdCoreAlignDirective implements OnInit {\n\t@Input('q-grid-core-td-align') columnView: ColumnView;\n\n\tconstructor(\n\t\tprivate elementRef: ElementRef,\n\t\tprivate cellClass: CellClassService,\n\t\t) {\n\t}\n\n\tngOnInit() {\n\t\tthis.cellClass.toBody(this.elementRef.nativeElement, this.columnView.model);\n\t}\n}\n","import {\n\tChangeDetectorRef, Directive,\n\tElementRef,\n\tInput, OnChanges, OnDestroy,\n\tOnInit, SimpleChange, SimpleChanges, ViewContainerRef\n} from '@angular/core';\nimport { ColumnModel, ColumnView, GridError, GRID_PREFIX, noop } from '@qgrid/core';\nimport { CellClassService } from '../cell/cell-class.service';\nimport { CellTemplateService } from '../cell/cell-template.service';\nimport { DomTd } from '../dom/dom';\nimport { GridLet } from '../grid/grid-let';\nimport { GridRoot } from '../grid/grid-root';\nimport { TrCoreDirective } from '../row/tr-core.directive';\n\n@Directive({\n\tselector: '[q-grid-core-td]',\n})\nexport class TdCoreDirective implements DomTd, OnInit, OnDestroy, OnChanges {\n\t$implicit = this;\n\n\t@Input('q-grid-core-value') actualValue: any;\n\t@Input('q-grid-core-label') actualLabel: any;\n\n\t@Input('q-grid-core-td') columnView: ColumnView;\n\n\telement: HTMLElement;\n\tchanges: SimpleChange;\n\n\tconstructor(\n\t\tpublic $view: GridLet,\n\t\tprivate root: GridRoot,\n\t\tprivate viewContainerRef: ViewContainerRef,\n\t\tprivate cellTemplate: CellTemplateService,\n\t\tprivate cellClass: CellClassService,\n\t\tprivate tr: TrCoreDirective,\n\t\tprivate cd: ChangeDetectorRef,\n\t\telementRef: ElementRef\n\t) {\n\t\tthis.element = elementRef.nativeElement.parentNode;\n\t}\n\n\tngOnInit() {\n\t\tconst { table } = this.root;\n\t\ttable.box.bag.body.addCell(this);\n\n\t\tthis.cellClass.toBody(this.element, this.column);\n\n\t\tconst link = this.cellTemplate.build('body', this.column, 'view');\n\t\tlink(this.viewContainerRef, this);\n\t}\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tconst { actualLabel } = changes;\n\t\tif (actualLabel && !actualLabel.firstChange && actualLabel.currentValue !== actualLabel.previousValue) {\n\t\t\tthis.changes = actualLabel;\n\t\t\tthis.mode('change');\n\t\t}\n\t}\n\n\tmode(value: 'view' | 'edit' | 'change') {\n\t\tconst link = this.cellTemplate.build('body', this.column, value);\n\n\t\tswitch (value) {\n\t\t\tcase 'view': {\n\t\t\t\tthis.element.classList.remove(`${GRID_PREFIX}-change`);\n\t\t\t\tthis.element.classList.remove(`${GRID_PREFIX}-edit`);\n\n\t\t\t\tif (link !== noop) {\n\t\t\t\t\tlink(this.viewContainerRef, this);\n\t\t\t\t\tthis.cd.markForCheck();\n\t\t\t\t\tthis.cd.detectChanges();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'edit': {\n\t\t\t\tif (link === noop) {\n\t\t\t\t\tthrow new GridError(\n\t\t\t\t\t\t`td-core.directive`,\n\t\t\t\t\t\t`Can't find template link for edit of ${this.column.key}`\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis.element.classList.add(`${GRID_PREFIX}-${value}`);\n\t\t\t\tlink(this.viewContainerRef, this);\n\t\t\t\tthis.cd.markForCheck();\n\t\t\t\tthis.cd.detectChanges();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'change': {\n\t\t\t\tif (link !== noop) {\n\t\t\t\t\tthis.element.classList.add(`${GRID_PREFIX}-${value}`);\n\t\t\t\t\tlink(this.viewContainerRef, this);\n\t\t\t\t\tthis.cd.markForCheck();\n\t\t\t\t\tthis.cd.detectChanges();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tthrow new GridError('td-core.directive', `Invalid mode ${value}`);\n\t\t\t}\n\t\t}\n\t}\n\n\tget value() {\n\t\treturn this.actualValue;\n\t}\n\n\tset value(value) {\n\t\tconst { column, row, rowIndex, columnIndex } = this;\n\t\tthis.$view.body.render.setValue(row, column, value, rowIndex, columnIndex);\n\t}\n\n\tget label() {\n\t\treturn this.actualLabel;\n\t}\n\n\tset label(label) {\n\t\tconst { column, row, rowIndex, columnIndex } = this;\n\t\tthis.$view.body.render.setLabel(row, column, label, rowIndex, columnIndex);\n\t}\n\n\tget column(): ColumnModel {\n\t\treturn this.columnView.model;\n\t}\n\n\tget columnIndex() {\n\t\treturn this.columnView.columnIndex;\n\t}\n\n\tget row() {\n\t\treturn this.tr.model;\n\t}\n\n\tget rowIndex() {\n\t\treturn this.tr.index;\n\t}\n\n\tget dataRowIndex() {\n\t\tconst { model } = this.root;\n\t\tconst { rows } = model.data();\n\t\treturn rows.indexOf(this.row);\n\t}\n\n\tngOnDestroy() {\n\t\tconst { table } = this.root;\n\t\ttable.box.bag.body.deleteCell(this);\n\t}\n}\n","import { ChangeDetectionStrategy, Component, ElementRef, OnInit } from '@angular/core';\nimport { BoxHost, GRID_PREFIX } from '@qgrid/core';\nimport { GridPlugin } from '../plugin/grid-plugin';\nimport { ThemeService } from '../theme/theme.service';\n\n@Component({\n\tselector: 'q-grid-box',\n\ttemplateUrl: './box.component.html',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BoxComponent implements OnInit {\n\tconstructor(\n\t\tprivate elementRef: ElementRef,\n\t\tprivate theme: ThemeService,\n\t\tprivate plugin: GridPlugin\n\t) {\n\t}\n\n\tngOnInit() {\n\t\t// tslint:disable-next-line:no-unused-expression\n\t\tnew BoxHost(this.elementRef.nativeElement, this.plugin);\n\t\tthis.initTheme();\n\t}\n\n\tinitTheme() {\n\t\tconst { observeReply } = this.plugin;\n\t\tconst { nativeElement } = this.elementRef;\n\n\t\tobserveReply(this.theme.changed)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e) {\n\t\t\t\t\tnativeElement.classList.remove(`${GRID_PREFIX}-theme-${e.oldName}`);\n\t\t\t\t}\n\n\t\t\t\tnativeElement.classList.add(`${GRID_PREFIX}-theme-${e.newName}`);\n\t\t\t});\n\t}\n}\n","<ng-content></ng-content>","import { NgModule } from '@angular/core';\nimport { BoxComponent } from './box.component';\n\n@NgModule({\n\tdeclarations: [\n\t\tBoxComponent,\n\t],\n\texports: [\n\t\tBoxComponent,\n\t],\n})\nexport class BoxModule {\n}\n","import { AfterViewInit, ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { CellView, EditService, Fastdom, jobLine, NavigationState, RowDetails } from '@qgrid/core';\nimport { GridEventArg } from '../grid/grid-model';\nimport { GridPlugin } from '../plugin/grid-plugin';\n\n@Component({\n\tselector: 'q-grid-cell-handler',\n\ttemplateUrl: './cell-handler.component.html',\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tproviders: [GridPlugin]\n})\nexport class CellHandlerComponent implements OnInit, AfterViewInit {\n\tprivate endBatchEdit: () => void;\n\n\tcanEditBatch = false;\n\t@ViewChild('marker', { static: true }) marker: ElementRef;\n\n\tconstructor(\n\t\tprivate elementRef: ElementRef,\n\t\tprivate plugin: GridPlugin,\n\t\tprivate cd: ChangeDetectorRef\n\t) {\n\t\tthis.elementRef.nativeElement.style.display = 'none';\n\t}\n\n\tngOnInit() {\n\t\tconst { model, observeReply } = this.plugin;\n\t\tconst updateHandler = this.updateHandlerFactory();\n\n\t\tobserveReply(model.navigationChanged)\n\t\t\t.subscribe(e => updateHandler(e));\n\n\t\tobserveReply(model.editChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('method')) {\n\t\t\t\t\tthis.canEditBatch = e.state.method === 'batch';\n\t\t\t\t\tthis.cd.markForCheck();\n\t\t\t\t\tthis.cd.detectChanges();\n\t\t\t\t}\n\n\t\t\t\tif (e.hasChanges('status')) {\n\t\t\t\t\tif (e.state.status === 'endBatch' && this.endBatchEdit) {\n\t\t\t\t\t\tthis.endBatchEdit();\n\t\t\t\t\t\tthis.endBatchEdit = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.elementRef.nativeElement.style.display = '';\n\t}\n\n\tupdateHandlerFactory() {\n\t\tconst { model, table } = this.plugin;\n\t\tconst element = this.elementRef.nativeElement;\n\t\tconst job = jobLine(150);\n\n\t\t// When navigate first or when animation wasn't applied we need to omit\n\t\t// next navigation event to make handler to correct position.\n\t\tlet doNotPassAnimation = false;\n\t\treturn (e: GridEventArg<NavigationState>) => {\n\t\t\tif (e.hasChanges('cell')) {\n\t\t\t\tconst { cell } = e.state;\n\n\t\t\t\tif (cell) {\n\t\t\t\t\tconst oldCell = e.changes.cell.oldValue || {} as CellView;\n\t\t\t\t\tconst newCell = e.changes.cell.newValue || {} as CellView;\n\t\t\t\t\tconst oldColumn = oldCell.column || {};\n\t\t\t\t\tconst newColumn = newCell.column || {};\n\n\t\t\t\t\t// Do not apply animation for columns that have viewWidth assigned\n\t\t\t\t\t// because it can be animated too.\n\t\t\t\t\tconst shouldAnimate =\n\t\t\t\t\t\t!model.drag().isActive\n\t\t\t\t\t\t&& (oldColumn.key === newColumn.key || !(oldColumn.viewWidth || newColumn.viewWidth))\n\t\t\t\t\t\t&& !(oldCell.row instanceof RowDetails || newCell.row instanceof RowDetails);\n\n\t\t\t\t\tconst domCell = table.body.cell(cell.rowIndex, cell.columnIndex);\n\t\t\t\t\tif (shouldAnimate) {\n\t\t\t\t\t\t// It can be that the cell object was changed but indices are not.\n\t\t\t\t\t\tdoNotPassAnimation =\n\t\t\t\t\t\t\toldCell.rowIndex >= 0\n\t\t\t\t\t\t\t&& oldCell.columnIndex >= 0\n\t\t\t\t\t\t\t&& (newCell.rowIndex !== oldCell.rowIndex || newCell.columnIndex !== oldCell.columnIndex);\n\n\t\t\t\t\t\tif (doNotPassAnimation) {\n\t\t\t\t\t\t\tdomCell.addClass('q-grid-animate');\n\t\t\t\t\t\t\telement.classList.add('q-grid-active');\n\n\t\t\t\t\t\t\tjob(() => {\n\t\t\t\t\t\t\t\telement.classList.remove('q-grid-active');\n\t\t\t\t\t\t\t\tdomCell.removeClass('q-grid-animate');\n\t\t\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\t\t\tFastdom.mutate(() => {\n\t\t\t\t\t\t\t\t\tdomCell.removeClass('q-grid-animate');\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdoNotPassAnimation = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tFastdom.measure(() => {\n\t\t\t\t\t\tconst target = domCell.element;\n\t\t\t\t\t\tconst scrollState = model.scroll();\n\n\t\t\t\t\t\tconst headHeight = table.view.height('head-mid');\n\n\t\t\t\t\t\tconst top = Math.max(headHeight, (target.offsetTop - scrollState.top));\n\t\t\t\t\t\tconst left = (target.offsetLeft - (cell.column.pin === 'mid' ? scrollState.left : 0));\n\t\t\t\t\t\tconst width = target.offsetWidth;\n\t\t\t\t\t\tconst height = target.offsetHeight;\n\n\t\t\t\t\t\tFastdom.mutate(() => {\n\t\t\t\t\t\t\telement.style.top = top + 'px';\n\t\t\t\t\t\t\telement.style.left = left + 'px';\n\t\t\t\t\t\t\telement.style.width = width + 'px';\n\t\t\t\t\t\t\telement.style.height = height + 'px';\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tdoNotPassAnimation = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\t}\n\n\tstartBatchEdit() {\n\t\tconst { model } = this.plugin;\n\n\t\tconst { cell: startCell } = model.navigation();\n\t\tif (startCell) {\n\t\t\tconst editService = new EditService(this.plugin);\n\t\t\tthis.endBatchEdit = editService.startBatch(startCell);\n\t\t}\n\t}\n}\n","<i #marker\n   *ngIf=\"canEditBatch\"\n   class=\"material-icons q-grid-edit-marker\"\n   (mousedown)=\"startBatchEdit()\">\n    signal_cellular_4_bar\n</i>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { CellHandlerComponent } from './cell-handler.component';\nimport { MarkupModule } from '../markup/markup.module';\n\n@NgModule({\n\tdeclarations: [\n\t\tCellHandlerComponent,\n\t],\n\texports: [\n\t\tCellHandlerComponent,\n\t],\n\timports: [\n\t\tCommonModule,\n\t]\n})\nexport class CellHandlerModule {\n}\n","import { Injectable } from '@angular/core';\nimport { bodyCellClassifier, ColumnModel, headCellClassifier } from '@qgrid/core';\n\n@Injectable()\nexport class CellClassService {\n\tprivate bodyCache = new Map<ColumnModel, (x: HTMLElement) => void>();\n\n\ttoBody(element: HTMLElement, column: ColumnModel) {\n\t\tlet classify = this.bodyCache.get(column);\n\t\tif (!classify) {\n\t\t\tclassify = bodyCellClassifier(column);\n\t\t\tthis.bodyCache.set(column, classify);\n\t\t}\n\n\t\tclassify(element);\n\t}\n\n\ttoHead(element: HTMLElement, column: ColumnModel) {\n\t\tconst classify = headCellClassifier(column);\n\t\tclassify(element);\n\t}\n}\n","import { Injectable, ViewContainerRef } from '@angular/core';\nimport { ColumnModel, GridError, noop } from '@qgrid/core';\nimport { TemplateService } from '../template/template.service';\n\nfunction canBuild(column) {\n\treturn column.type !== 'pad';\n}\n\nfunction buildId(source: string, column: ColumnModel, mode = 'view') {\n\tconst { key, type, itemType } = column as any;\n\treturn `${source}-${mode}-cell-${type}-of-${itemType}-the-${key}.tpl.html`;\n}\n\nfunction buildKeys(source: string, column: ColumnModel, mode = 'view') {\n\t// tslint:disable-next-line\n\tlet { key, type, itemType } = column as any;\n\n\tswitch (mode) {\n\t\tcase 'view': {\n\t\t\tconst result = [\n\t\t\t\t`${source}-cell-${type}-the-${key}.tpl.html`,\n\t\t\t\t`${source}-cell-the-${key}.tpl.html`,\n\t\t\t\t`${source}-cell-${type}.tpl.html`,\n\t\t\t\t`${source}-cell.tpl.html`,\n\t\t\t\t`${source}-cell-text.tpl.html`\n\t\t\t];\n\n\t\t\tif (itemType) {\n\t\t\t\tresult.splice(0, 0, ...[\n\t\t\t\t\t`${source}-cell-${type}-of-${itemType}-the-${key}.tpl.html`,\n\t\t\t\t\t`${source}-cell-${type}-of-${itemType}.tpl.html`\n\t\t\t\t]);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t\tcase 'change':\n\t\tcase 'edit': {\n\t\t\ttype = column.editor || type;\n\t\t\tconst result = [\n\t\t\t\t`${mode}-cell-${type}-the-${key}.tpl.html`,\n\t\t\t\t`${mode}-cell-the-${key}.tpl.html`,\n\t\t\t\t`${mode}-cell-${type}.tpl.html`,\n\t\t\t\t`${mode}-cell.tpl.html`,\n\t\t\t\t`${mode}-cell-text.tpl.html`\n\t\t\t];\n\n\t\t\tif (itemType) {\n\t\t\t\tresult.splice(0, 0, ...[\n\t\t\t\t\t`${mode}-cell-${type}-of-${itemType}-the-${key}.tpl.html`,\n\t\t\t\t\t`${mode}-cell-${type}-of-${itemType}.tpl.html`,\n\t\t\t\t]);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t\tdefault:\n\t\t\tthrow new GridError('cell.service', `Invalid mode '${mode}'`);\n\t}\n}\n\n@Injectable()\nexport class CellTemplateService {\n\tprivate commits = new Map<string, (container: ViewContainerRef, context: any) => void>();\n\n\tconstructor(private templateService: TemplateService) { }\n\n\tbuild(source: string, column: ColumnModel, mode: 'view' | 'edit' | 'change' = 'view') {\n\t\tif (!canBuild(column)) {\n\t\t\treturn noop;\n\t\t}\n\n\t\tconst id = buildId(source, column, mode);\n\t\tlet commit = this.commits.get(id);\n\t\tif (commit) {\n\t\t\treturn commit;\n\t\t}\n\n\t\tconst keys = buildKeys(source, column, mode);\n\t\tconst templateLink = this.templateService.find(keys);\n\t\tif (!templateLink) {\n\t\t\treturn noop;\n\t\t}\n\n\t\tcommit = (container: ViewContainerRef, context: any) => {\n\t\t\tcontainer.clear();\n\t\t\treturn container.createEmbeddedView(templateLink.template, context);\n\t\t};\n\n\t\tthis.commits.set(id, commit);\n\t\treturn commit;\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { DirtyDirective } from './dirty.directive';\n\n@NgModule({\n\tdeclarations: [\n\t\tDirtyDirective,\n\t],\n\texports: [\n\t\tDirtyDirective,\n\t]\n})\nexport class ChangeDetectorModule {\n}\n","import { ChangeDetectorRef, Directive, Input, OnChanges, SimpleChanges } from '@angular/core';\n\n@Directive({\n\tselector: '[q-grid-dirty]',\n})\nexport class DirtyDirective implements OnChanges {\n\t@Input('q-grid-dirty') trigger: any;\n\n\tconstructor(private cd: ChangeDetectorRef) {\n\t}\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tif (changes.trigger) {\n\t\t\tif (!changes.trigger.firstChange) {\n\t\t\t\tthis.cd.detectChanges();\n\t\t\t}\n\t\t}\n\t}\n}\n","import { ChangeDetectionStrategy, Component, Input, OnChanges } from '@angular/core';\nimport { ColumnListState, ColumnListStateGeneration, ColumnListStateTypeDetection } from '@qgrid/core';\nimport { GridPlugin } from '../plugin/grid-plugin';\nimport { StateAccessor } from '../state/state-accessor';\nimport { ColumnListService } from './column-list.service';\n\n@Component({\n\tselector: 'q-grid-columns',\n\ttemplate: '<ng-content></ng-content>',\n\tproviders: [ColumnListService, GridPlugin, StateAccessor],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ColumnListComponent implements OnChanges {\n\tprivate columnListAccessor = this.stateAccessor.setter(ColumnListState);\n\n\t@Input() set generation(generation: ColumnListStateGeneration) { this.columnListAccessor({ generation }); }\n\t@Input() set typeDetection(typeDetection: ColumnListStateTypeDetection) { this.columnListAccessor({ typeDetection }); }\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate stateAccessor: StateAccessor,\n\t) {\n\t}\n\n\tngOnChanges() {\n\t\tconst { model } = this.plugin;\n\t\tthis.stateAccessor.write(model);\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { ColumnListComponent } from './column-list.component';\n\n@NgModule({\n\tdeclarations: [\n\t\tColumnListComponent,\n\t],\n\texports: [\n\t\tColumnListComponent\n\t]\n})\nexport class ColumnListModule {\n}\n","import { Injectable } from '@angular/core';\nimport { ColumnListHost, ColumnModel, isUndefined, Lazy, parseFactory } from '@qgrid/core';\nimport { GridPlugin } from '../plugin/grid-plugin';\n\n@Injectable()\nexport class ColumnListService {\n\tprivate host = new Lazy(() => {\n\t\tconst canCopy = (key: string, source, target) =>\n\t\t\ttarget.hasOwnProperty(key) && !isUndefined(source[key]);\n\n\t\treturn new ColumnListHost(this.plugin.model, canCopy, parseFactory);\n\t});\n\n\tconstructor(private plugin: GridPlugin) {\n\t}\n\n\tadd(column: ColumnModel) {\n\t\tthis.host.instance.add(column);\n\t}\n\n\tcopy(target, source) {\n\t\tthis.host.instance.copy(target, source);\n\t}\n\n\tgenerateKey(source) {\n\t\treturn this.host.instance.generateKey(source);\n\t}\n\n\textract(key, type): ColumnModel {\n\t\treturn this.host.instance.extract(key, type);\n\t}\n\n\tregister(column: ColumnModel) {\n\t\tthis.host.instance.register(column);\n\t}\n\n\tdelete(key: string) {\n\t\tthis.host.instance.delete(key);\n\t}\n}\n","import {\n\tDirective,\n\tInput,\n\tTemplateRef,\n\tOnInit\n} from '@angular/core';\nimport { TemplateCacheService } from '../template/template-cache.service';\nimport { TemplateLink } from '../template/template-link';\n\n@Directive({\n\t// tslint:disable-next-line\n\tselector: 'ng-template[qGridColumnBody]'\n})\n\nexport class ColumnBodyTemplateDirective implements OnInit {\n\t@Input('qGridColumnBody') key = '';\n\n\tconstructor(\n\t\tprivate templateCache: TemplateCacheService,\n\t\tprivate templateRef: TemplateRef<any>\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst link = new TemplateLink(this.templateRef, null);\n\t\tthis.templateCache.put(`body-cell-the-${this.key}.tpl.html`, link);\n\t}\n}\n","import {\n\tDirective,\n\tInput,\n\tTemplateRef,\n\tOnInit\n} from '@angular/core';\nimport { TemplateCacheService } from '../template/template-cache.service';\nimport { TemplateLink } from '../template/template-link';\n\n@Directive({\n\t// tslint:disable-next-line\n\tselector: 'ng-template[qGridColumnEdit]'\n})\n\nexport class ColumnEditTemplateDirective implements OnInit {\n\t@Input('qGridColumnEdit') key = '';\n\n\tconstructor(\n\t\tprivate templateCache: TemplateCacheService,\n\t\tprivate templateRef: TemplateRef<any>\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst link = new TemplateLink(this.templateRef, null);\n\t\tthis.templateCache.put(`edit-cell-the-${this.key}.tpl.html`, link);\n\t}\n}\n","import {\n\tDirective,\n\tInput,\n\tTemplateRef,\n\tOnInit\n} from '@angular/core';\nimport { TemplateCacheService } from '../template/template-cache.service';\nimport { TemplateLink } from '../template/template-link';\n\n@Directive({\n\t// tslint:disable-next-line\n\tselector: 'ng-template[qGridColumnFoot]'\n})\n\nexport class ColumnFootTemplateDirective implements OnInit {\n\t@Input('qGridColumnFoot') key = '';\n\n\tconstructor(\n\t\tprivate templateCache: TemplateCacheService,\n\t\tprivate templateRef: TemplateRef<any>\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst link = new TemplateLink(this.templateRef, null);\n\t\tthis.templateCache.put(`foot-cell-the-${this.key}.tpl.html`, link);\n\t}\n}\n","import {\n\tDirective,\n\tInput,\n\tTemplateRef,\n\tOnInit\n} from '@angular/core';\nimport { TemplateCacheService } from '../template/template-cache.service';\nimport { TemplateLink } from '../template/template-link';\n\n@Directive({\n\t// tslint:disable-next-line\n\tselector: 'ng-template[qGridColumnHead]'\n})\n\nexport class ColumnHeadTemplateDirective implements OnInit {\n\t@Input('qGridColumnHead') key = '';\n\n\tconstructor(\n\t\tprivate templateCache: TemplateCacheService,\n\t\tprivate templateRef: TemplateRef<any>\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst link = new TemplateLink(this.templateRef, null);\n\t\tthis.templateCache.put(`head-cell-the-${this.key}.tpl.html`, link);\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { ColumnModel } from '@qgrid/core';\n\n@Injectable()\nexport class ColumnHostService {\n\tcolumn: ColumnModel;\n}\n","import {\n\tChangeDetectionStrategy, Component, ElementRef, Input, OnChanges, OnDestroy, OnInit, Optional, SimpleChanges, SkipSelf\n} from '@angular/core';\nimport { ColumnModel, ColumnModelCategory, ColumnModelPin, ColumnModelType, ColumnModelWidthMode, guid, isUndefined } from '@qgrid/core';\nimport { ColumnListService } from '../column-list/column-list.service';\nimport { GridPlugin } from '../plugin/grid-plugin';\nimport { TemplateHostService } from '../template/template-host.service';\nimport { ColumnHostService } from './column-host.service';\n\n@Component({\n\tselector: 'q-grid-column',\n\ttemplate: '<ng-content></ng-content>',\n\tproviders: [TemplateHostService, ColumnHostService, GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ColumnComponent implements OnInit, OnDestroy, OnChanges {\n\t@Input() type: string | ColumnModelType;\n\t@Input() key: string;\n\t@Input() category: ColumnModelCategory;\n\t@Input() class: string;\n\t@Input() title: string;\n\t@Input() description: string;\n\t@Input() pin: ColumnModelPin;\n\t@Input() aggregation: string;\n\t@Input() aggregationOptions: any;\n\t@Input() editor: string;\n\t@Input() editorOptions: any;\n\t@Input() format: string;\n\t@Input() dateFormat: string;\n\t@Input() timeFormat: string;\n\t@Input() symbol: string;\n\t@Input() code: string;\n\n\t@Input() width: number | string;\n\t@Input() widthMode: ColumnModelWidthMode;\n\t@Input() minWidth: number | string;\n\t@Input() maxWidth: number | string;\n\t@Input() viewWidth: number | string;\n\t@Input() offset: number | string;\n\n\t@Input() canEdit: boolean;\n\t@Input() canResize: boolean;\n\t@Input() canSort: boolean;\n\t@Input() canMove: boolean;\n\t@Input() canFilter: boolean;\n\t@Input() canHighlight: boolean;\n\t@Input() canFocus: boolean;\n\n\t@Input() isVisible: boolean;\n\t@Input() isDefault: boolean;\n\n\t@Input() index: number;\n\n\t@Input() label: ((row: any, value?: any) => any) | any;\n\t@Input() labelPath: string;\n\n\t@Input() itemLabel: (row: any, value?: any) => any;\n\t@Input() itemFormat: string;\n\t@Input() itemType: string;\n\n\t@Input() value: (row: any, value?: any) => any;\n\t@Input() path: string;\n\n\t@Input() compare: (x: any, y: any) => number;\n\n\t@Input() trueValue: any;\n\t@Input() falseValue: any;\n\n\t@Input() maxLength: number;\n\n\t@Input() startNumber: number;\n\n\tconstructor(\n\t\t@SkipSelf() @Optional() private parentHost: ColumnHostService,\n\t\tprivate selfHost: ColumnHostService,\n\t\tprivate columnList: ColumnListService,\n\t\tprivate templateHost: TemplateHostService,\n\t\tprivate elementRef: ElementRef,\n\t\tprivate plugin: GridPlugin,\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tlet withKey = !isUndefined(this.key);\n\t\tlet withType = !isUndefined(this.type);\n\n\t\t// We want to update model when ngOntInit is triggered and not in afterViewInit\n\t\t// so we apply dirty hack to understand if column is cohort or not.\n\t\tconst element = this.elementRef.nativeElement as HTMLElement;\n\t\tif (element.children.length && element.children.item(0).tagName === 'Q-GRID-COLUMN') {\n\t\t\tthis.type = 'cohort';\n\t\t\tif (!withKey) {\n\t\t\t\tthis.key = `$cohort-${this.title || guid()}`;\n\t\t\t}\n\n\t\t\twithKey = true;\n\t\t\twithType = true;\n\t\t}\n\n\t\tif (!withKey) {\n\t\t\tthis.key = this.columnList.generateKey(this);\n\t\t}\n\n\t\tconst column = this.columnList.extract(this.key, this.type);\n\t\tthis.columnList.copy(column, this);\n\n\t\tthis.templateHost.key = source => {\n\t\t\tconst parts = [source, 'cell'];\n\n\t\t\tif (withType) {\n\t\t\t\tparts.push(this.type);\n\t\t\t}\n\n\t\t\tif (withKey) {\n\t\t\t\tparts.push(`the-${this.key}`);\n\t\t\t}\n\n\t\t\treturn parts.join('-') + '.tpl.html';\n\t\t};\n\n\t\tif (withKey) {\n\t\t\tif (this.parentHost) {\n\t\t\t\tthis.parentHost.column.children.push(column);\n\t\t\t} else {\n\t\t\t\tthis.columnList.add(column);\n\t\t\t}\n\n\t\t\tthis.selfHost.column = column;\n\t\t} else {\n\t\t\tconst settings =\n\t\t\t\tObject\n\t\t\t\t\t.keys(this)\n\t\t\t\t\t.filter(key => !isUndefined(this[key]) && column.hasOwnProperty(key))\n\t\t\t\t\t.reduce((memo, key) => {\n\t\t\t\t\t\tmemo[key] = column[key];\n\t\t\t\t\t\treturn memo;\n\t\t\t\t\t}, {}) as ColumnModel;\n\n\t\t\tthis.columnList.register(settings);\n\t\t}\n\t}\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tconst { column } = this.selfHost;\n\t\tif (column && changes.isVisible) {\n\t\t\tif (column.isVisible !== this.isVisible) {\n\t\t\t\tcolumn.isVisible = this.isVisible;\n\n\t\t\t\tconst { model } = this.plugin;\n\t\t\t\tmodel.data({\n\t\t\t\t\tcolumns: Array.from(model.data().columns)\n\t\t\t\t}, {\n\t\t\t\t\tsource: 'column.component'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tngOnDestroy() {\n\t\tconst { column } = this.selfHost;\n\t\tif (column && column.source === 'template') {\n\t\t\tthis.columnList.delete(column.key);\n\t\t}\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { ColumnComponent } from './column.component';\nimport { ColumnBodyTemplateDirective } from './column-body-template.directive';\nimport { ColumnEditTemplateDirective } from './column-edit-template.directive';\nimport { ColumnFootTemplateDirective } from './column-foot-template.directive';\nimport { ColumnHeadTemplateDirective } from './column-head-template.directive';\n@NgModule({\n\tdeclarations: [\n\t\tColumnComponent,\n\t\tColumnBodyTemplateDirective,\n\t\tColumnEditTemplateDirective,\n\t\tColumnFootTemplateDirective,\n\t\tColumnHeadTemplateDirective\n\t],\n\texports: [\n\t\tColumnComponent,\n\t\tColumnBodyTemplateDirective,\n\t\tColumnEditTemplateDirective,\n\t\tColumnFootTemplateDirective,\n\t\tColumnHeadTemplateDirective\n\t]\n})\nexport class ColumnModule {\n}\n","import { NgModule } from '@angular/core';\nimport { DragDirective } from './drag.directive';\nimport { DropDirective } from './drop.directive';\n\n@NgModule({\n\tdeclarations: [\n\t\tDragDirective,\n\t\tDropDirective\n\t],\n\texports: [\n\t\tDragDirective,\n\t\tDropDirective\n\t]\n})\nexport class DndModule {\n}\n","import { Directive, ElementRef, Input, Optional } from '@angular/core';\nimport { Command, DragService, EventListener, EventManager, GRID_PREFIX, isFunction } from '@qgrid/core';\nimport { GridPlugin } from '../plugin/grid-plugin';\n\n@Directive({\n\tselector: '[q-grid-drag]'\n})\nexport class DragDirective {\n\t@Input('q-grid-drag-data') data: any;\n\t@Input('q-grid-drag-effect') effect:  undefined | 'move';\n\t@Input('q-grid-drag') drag: Command;\n\t@Input('q-grid-drop-area') area: string;\n\n\tconstructor(\n\t\t@Optional() private plugin: GridPlugin,\n\t\tprivate elementRef: ElementRef\n\t) {\n\t\tconst element = elementRef.nativeElement;\n\t\tconst listener = new EventListener(element, new EventManager(this));\n\t\telement.classList.add(`${GRID_PREFIX}-can-drag`);\n\t\telement.setAttribute('draggable', true);\n\n\t\tlistener.on('dragstart', this.onStart);\n\t\tlistener.on('dragend', this.onEnd);\n\t}\n\n\tonStart(e: DragEvent) {\n\t\tconst transfer = e.dataTransfer;\n\t\tconst data = this.data;\n\t\tconst eventArg = { data };\n\n\t\tif (this.drag.canExecute(eventArg) === false) {\n\t\t\te.preventDefault();\n\t\t\ttransfer.effectAllowed = 'none';\n\t\t\treturn false;\n\t\t}\n\n\t\tconst result = this.drag.execute(eventArg);\n\t\tDragService.element =\n\t\t\tresult && isFunction(result.getBoundingClientRect)\n\t\t\t\t// tslint:disable-next-line: deprecation\n\t\t\t\t? result : (e.srcElement || e.target);\n\n\t\tthis.elementRef.nativeElement.classList.add(`${GRID_PREFIX}-drag`);\n\n\t\ttransfer.setData(DragService.mimeType, DragService.encode(data));\n\t\ttransfer.effectAllowed = this.effect || 'move';\n\n\t\tDragService.data = data;\n\t\tDragService.area = this.area;\n\n\t\tconst rect = DragService.element.getBoundingClientRect();\n\t\tDragService.startPosition = {\n\t\t\tx: e.clientX,\n\t\t\ty: e.clientY,\n\t\t\trect\n\t\t};\n\n\t\tif (this.plugin) {\n\t\t\tconst { model } = this.plugin;\n\t\t\tmodel.drag({ isActive: true }, { source: 'drag.directive' });\n\t\t}\n\t}\n\n\tonEnd() {\n\t\tif (this.plugin) {\n\t\t\tconst { model } = this.plugin;\n\t\t\tmodel.drag({ isActive: false }, { source: 'drag.directive' });\n\t\t}\n\n\t\tthis.elementRef.nativeElement.classList.remove(`${GRID_PREFIX}-drag`);\n\n\t\tDragService.data = null;\n\t\tDragService.area = null;\n\t\tDragService.element = null;\n\t\tDragService.startPosition = null;\n\t}\n}\n","import { Directive, ElementRef, Input, NgZone, OnInit, Optional } from '@angular/core';\nimport { Command, DragService, elementFromPoint, EventListener, EventManager, GRID_PREFIX, no, parents } from '@qgrid/core';\nimport { GridPlugin } from '../plugin/grid-plugin';\n\nexport interface DropEventArg {\n\tpath: HTMLElement[];\n\tdragData: any;\n\tdropData: any;\n\taction: string; // 'over' | 'drop' | 'end';\n\n\tinAreaY(element: HTMLElement): boolean;\n\tinAreaX(element: HTMLElement): boolean;\n}\n\n@Directive({\n\tselector: '[q-grid-drop]'\n})\nexport class DropDirective implements OnInit {\n\t@Input('q-grid-drop-area') area: string;\n\t@Input('q-grid-drop-data') dropData: any;\n\t@Input('q-grid-drop') drop: Command<DropEventArg>;\n\t@Input('q-grid-drag-over') dragOver: Command<DropEventArg>;\n\t@Input('q-grid-drag-direction') dragDirection: 'x' | 'y' = 'y';\n\n\tconstructor(\n\t\t@Optional() private plugin: GridPlugin,\n\t\tprivate elementRef: ElementRef,\n\t\tzone: NgZone\n\t) {\n\t\tconst element = elementRef.nativeElement;\n\t\tconst listener = new EventListener(element, new EventManager(this));\n\n\t\telement.classList.add(`${GRID_PREFIX}-can-drop`);\n\t\tzone.runOutsideAngular(() => {\n\t\t\tlistener.on('dragenter', this.onEnter);\n\t\t\tlistener.on('dragover', this.onOver);\n\t\t\tlistener.on('dragleave', this.onLeave);\n\t\t});\n\n\t\tlistener.on('drop', this.onDrop);\n\t}\n\n\tngOnInit() {\n\t\tif (this.plugin) {\n\t\t\tconst { model, observe } = this.plugin;\n\t\t\tobserve(model.dragChanged)\n\t\t\t\t.subscribe(e => {\n\t\t\t\t\tif (e.hasChanges('isActive')) {\n\t\t\t\t\t\tif (!e.state.isActive) {\n\t\t\t\t\t\t\tconst eventArg = {\n\t\t\t\t\t\t\t\tpath: [],\n\t\t\t\t\t\t\t\tdragData: DragService.data,\n\t\t\t\t\t\t\t\tdropData: this.dropData,\n\t\t\t\t\t\t\t\taction: 'end',\n\t\t\t\t\t\t\t\tinAreaX: no,\n\t\t\t\t\t\t\t\tinAreaY: no\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tif (this.drop.canExecute(eventArg)) {\n\t\t\t\t\t\t\t\tthis.drop.execute(eventArg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t}\n\n\tonDrop(e: DragEvent) {\n\t\te.stopPropagation();\n\n\t\tthis.elementRef.nativeElement.classList.remove(`${GRID_PREFIX}-dragover`);\n\t\tconst eventArg = {\n\t\t\tpath: (e as any).path,\n\t\t\tdragData: DragService.data,\n\t\t\tdropData: this.dropData,\n\t\t\taction: 'drop',\n\t\t\tinAreaX: this.inAreaFactory(e, 'x'),\n\t\t\tinAreaY: this.inAreaFactory(e, 'y')\n\t\t};\n\n\t\tif (this.drop.canExecute(eventArg)) {\n\t\t\tthis.drop.execute(eventArg);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tonEnter(e: DragEvent) {\n\t\te.preventDefault();\n\n\t\tthis.elementRef.nativeElement.classList.add(`${GRID_PREFIX}-dragover`);\n\t\te.dataTransfer.dropEffect = 'move';\n\t\treturn false;\n\t}\n\n\tonOver(e: DragEvent) {\n\t\te.preventDefault();\n\n\t\tif (this.plugin && this.plugin.model.scene().status !== 'stop') {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.area !== DragService.area) {\n\t\t\te.dataTransfer.dropEffect = 'none';\n\t\t\treturn false;\n\t\t}\n\n\t\tconst pos = this.getPosition(e);\n\t\tconst path = this.getPath(pos);\n\t\tif (path.indexOf(DragService.element) >= 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst eventArg = {\n\t\t\tpath,\n\t\t\tdragData: DragService.data,\n\t\t\tdropData: this.dropData,\n\t\t\taction: 'over',\n\t\t\tinAreaX: this.inAreaFactory(e, 'x'),\n\t\t\tinAreaY: this.inAreaFactory(e, 'y')\n\t\t};\n\n\t\tif (this.dragOver.canExecute(eventArg)) {\n\t\t\tthis.dragOver.execute(eventArg);\n\t\t\tif (DragService.data !== eventArg.dragData) {\n\t\t\t\tDragService.data = eventArg.dragData;\n\t\t\t}\n\n\t\t\te.dataTransfer.dropEffect = 'move';\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tonLeave() {\n\t\tthis.elementRef.nativeElement.classList.remove(`${GRID_PREFIX}-dragover`);\n\t}\n\n\tprivate getPosition(e: DragEvent) {\n\t\tconst start = DragService.startPosition;\n\t\tconst src = start.rect;\n\n\t\tconst offsetX = start.x - (src.left + src.width / 2);\n\t\tconst offsetY = start.y - (src.top + src.height / 2);\n\n\t\tconst { clientX, clientY } = e;\n\n\t\tconst x = clientX - offsetX;\n\t\tconst y = clientY - offsetY;\n\n\t\treturn { x, y };\n\t}\n\n\tprivate getPath({ x, y }: { x: number, y: number }) {\n\t\t// Document.elementsFromPoint is not working with tr?\n\t\t// so we need to go through all parent.\n\n\t\tconst element = elementFromPoint(x, y);\n\t\tconst path = parents(element);\n\t\treturn path;\n\t}\n\n\tprivate inAreaFactory(e: DragEvent, direction: 'x' | 'y') {\n\t\tconst src = DragService.startPosition.rect;\n\t\tconst { x, y } = this.getPosition(e);\n\n\t\tif (direction === 'y') {\n\t\t\treturn (element: HTMLElement) => {\n\t\t\t\tconst trg = element.getBoundingClientRect();\n\t\t\t\t// we are on the top of target\n\t\t\t\tif (src.top < trg.top) {\n\t\t\t\t\treturn trg.bottom > y && y > trg.bottom - src.height;\n\t\t\t\t}\n\n\t\t\t\t// we are on the bottom of target\n\t\t\t\treturn trg.top < y && y < trg.top + src.height;\n\t\t\t};\n\t\t}\n\n\t\treturn (element: HTMLElement) => {\n\t\t\tconst trg = element.getBoundingClientRect();\n\n\t\t\t// we are on the left of target\n\t\t\tif (src.left < trg.left) {\n\t\t\t\treturn trg.right > x && x > trg.right - src.width;\n\t\t\t}\n\n\t\t\t// we are on the right of target\n\t\t\treturn trg.left < x && x < trg.left + src.width;\n\t\t};\n\t}\n}\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { ColumnView } from '@qgrid/core';\nimport { GridLet } from '../grid/grid-let';\nimport { GridPlugin } from '../plugin/grid-plugin';\nimport { TableCoreService } from '../table/table-core.service';\n\n@Component({\n\t// tslint:disable-next-line\n\tselector: 'tfoot[q-grid-core-foot]',\n\ttemplateUrl: './foot-core.component.html',\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tproviders: [GridPlugin]\n})\nexport class FootCoreComponent implements OnInit {\n\tconstructor(\n\t\tpublic $view: GridLet,\n\t\tpublic $table: TableCoreService,\n\t\tprivate plugin: GridPlugin,\n\t\tprivate cd: ChangeDetectorRef,\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst { model, observe } = this.plugin;\n\t\tobserve(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('status') && e.state.status === 'push') {\n\t\t\t\t\tthis.cd.markForCheck();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tcolumnId(index: number, item: ColumnView) {\n\t\treturn item.model.key;\n\t}\n\n\trowId(index: number) {\n\t\treturn index;\n\t}\n}\n","<tr *ngFor=\"let $row of $view.foot.rows; trackBy: rowId; index as $rowIndex\"\n    [q-grid-core-trh]=\"$row\"\n    [q-grid-core-index]=\"$rowIndex\"\n    q-grid-core-source=\"foot\">\n\t<td *ngFor=\"let $column of $view.foot.columns($row, $table.pin); trackBy: columnId; index as $columnIndex\"\n\t    [attr.rowspan]=\"$column.rowspan\"\n\t    [attr.colspan]=\"$column.colspan\">\n\t\t<ng-container [q-grid-core-tf]=\"$column\">\n\t\t</ng-container>\n\t</td>\n</tr>","import { NgModule } from '@angular/core';\nimport { FootCoreComponent } from './foot-core.component';\nimport { TfCoreDirective } from './tf-core.directive';\nimport { RowModule } from '../row/row.module';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n\tdeclarations: [\n\t\tFootCoreComponent,\n\t\tTfCoreDirective,\n\t],\n\texports: [\n\t\tFootCoreComponent,\n\t\tTfCoreDirective,\n\t],\n\timports: [\n\t\tCommonModule,\n\t\tRowModule\n\t]\n})\nexport class FootModule {\n}\n","import {\n\tDirective,\n\tElementRef,\n\tInput,\n\tOnDestroy,\n\tOnInit,\n\tViewContainerRef\n} from '@angular/core';\nimport { ColumnModel, ColumnView, GridError } from '@qgrid/core';\nimport { CellClassService } from '../cell/cell-class.service';\nimport { CellTemplateService } from '../cell/cell-template.service';\nimport { DomTd } from '../dom/dom';\nimport { GridLet } from '../grid/grid-let';\nimport { GridPlugin } from '../plugin/grid-plugin';\nimport { TrhCoreDirective } from '../row/trh-core.directive';\n\n@Directive({\n\tselector: '[q-grid-core-tf]'\n})\nexport class TfCoreDirective implements DomTd, OnInit, OnDestroy {\n\t$implicit = this;\n\n\t@Input('q-grid-core-tf') columnView: ColumnView;\n\telement: HTMLElement = null;\n\n\tconstructor(\n\t\tpublic $view: GridLet,\n\t\tprivate plugin: GridPlugin,\n\t\tprivate cellTemplate: CellTemplateService,\n\t\tprivate cellClass: CellClassService,\n\t\tprivate viewContainerRef: ViewContainerRef,\n\t\tprivate tr: TrhCoreDirective,\n\t\telementRef: ElementRef\n\t) {\n\t\tthis.element = elementRef.nativeElement.parentNode;\n\t}\n\n\tngOnInit() {\n\t\tconst { column, element } = this;\n\t\tconst { table } = this.plugin;\n\n\t\ttable.box.bag.foot.addCell(this);\n\n\t\tthis.cellClass.toBody(element, column);\n\n\t\tconst link = this.cellTemplate.build('foot', this.column);\n\t\tlink(this.viewContainerRef, this);\n\t}\n\n\tget value() {\n\t\tconst column = this.column;\n\t\treturn this.$view.foot.value(column);\n\t}\n\n\tget label() {\n\t\treturn this.label;\n\t}\n\n\tget column(): ColumnModel {\n\t\treturn this.columnView.model;\n\t}\n\n\tget columnIndex() {\n\t\treturn this.columnView.columnIndex;\n\t}\n\n\tget row() {\n\t\treturn this.tr.model;\n\t}\n\n\tget rowIndex() {\n\t\treturn this.tr.index;\n\t}\n\n\tmode(value: string): void {\n\t\tthrow new GridError('tf-core.directive', `${value} mode is not supported`);\n\t}\n\n\tngOnDestroy() {\n\t\tconst { table } = this.plugin;\n\t\ttable.box.bag.foot.deleteCell(this);\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport {\n\tBodyLet,\n\tClipboardLet,\n\tCommandManager,\n\tEditLet,\n\tFilterLet,\n\tFootLet,\n\tGroupLet,\n\tHeadLet,\n\tHighlightLet,\n\tLayoutLet,\n\tNavigationLet,\n\tPaginationLet,\n\tRowDetailsLet,\n\tRowLet,\n\tScrollLet,\n\tSelectionLet,\n\tSortLet,\n\tStyleLet,\n\tviewFactory\n} from '@qgrid/core';\nimport { GridPlugin } from '../plugin/grid-plugin';\nimport { ScrollService } from '../scroll/scroll.service';\nimport { Grid } from './grid';\n\n@Injectable()\nexport class GridLet {\n\tbody: BodyLet;\n\tedit: EditLet;\n\tfilter: FilterLet;\n\tfoot: FootLet;\n\tgroup: GroupLet;\n\thead: HeadLet;\n\thighlight: HighlightLet;\n\tlayout: LayoutLet;\n\tnav: NavigationLet;\n\tpagination: PaginationLet;\n\trow: RowLet;\n\trowDetails: RowDetailsLet;\n\tscroll: ScrollLet;\n\tselection: SelectionLet;\n\tsort: SortLet;\n\tstyle: StyleLet;\n\tclipboard: ClipboardLet;\n\n\tconstructor(\n\t\tprivate qgrid: Grid,\n\t\tprivate scrollService: ScrollService\n\t) { }\n\n\tinit(plugin: GridPlugin, commandManager: CommandManager) {\n\t\tconst selectors = {\n\t\t\tth: 'q-grid-core-th',\n\t\t\ttr: 'q-grid-core-tr'\n\t\t};\n\n\t\tconst injectLetServicesTo = viewFactory(\n\t\t\tplugin,\n\t\t\tcommandManager,\n\t\t\tthis.scrollService,\n\t\t\tselectors,\n\t\t);\n\n\t\tinjectLetServicesTo(this);\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { ModelBuilder } from '@qgrid/core';\nimport { GridModel } from './grid-model';\n\n@Injectable()\nexport class GridModelBuilder {\n\tprivate builder = new ModelBuilder();\n\n\tregister<T>(key: string, ctor: T) {\n\t\treturn this.builder.register(key, ctor);\n\t}\n\n\tbuild(): GridModel {\n\t\treturn this.builder.build();\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { DomTable } from '../dom/dom';\nimport { GridModel } from '../grid/grid-model';\n\n@Injectable()\nexport class GridRoot {\n\tmodel: GridModel;\n\ttable: DomTable;\n}\n","import { DOCUMENT } from '@angular/common';\nimport {\n\tChangeDetectionStrategy,\n\tChangeDetectorRef,\n\tComponent,\n\tElementRef,\n\tInject,\n\tInput,\n\tNgZone,\n\tOnChanges,\n\tOnInit,\n\tSimpleChanges,\n\tViewEncapsulation\n} from '@angular/core';\nimport {\n\tColumnModel,\n\tCommand,\n\tDataState,\n\tEditState,\n\tEditStateMethod,\n\tEditStateMode,\n\tEventListener,\n\tEventManager,\n\teventPath,\n\tFilterState,\n\tFilterStateUnit,\n\tGridError,\n\tGridHost,\n\tGridState,\n\tGridStateInteractionMode,\n\tGroupState,\n\tGroupStateMode,\n\tGroupStateSummary,\n\tPivotState,\n\tScrollState,\n\tScrollStateMode,\n\tSelectionState,\n\tSelectionStateArea,\n\tSelectionStateMode,\n\tSelectionStateUnit,\n\tSortState,\n\tSortStateMode,\n\tStyleCellCallback,\n\tStyleRowCallback,\n\tStyleState,\n\ttableFactory,\n\tVisibilityState\n} from '@qgrid/core';\nimport { LayerService } from '../layer/layer.service';\nimport { GridPlugin } from '../plugin/grid-plugin';\nimport { StateAccessor } from '../state/state-accessor';\nimport { TemplateCacheService } from '../template/template-cache.service';\nimport { TemplateLinkService } from '../template/template-link.service';\nimport { TemplateService } from '../template/template.service';\nimport { ThemeService } from '../theme/theme.service';\nimport { Grid } from './grid';\nimport { GridLet } from './grid-let';\nimport { GridModel } from './grid-model';\nimport { GridModelBuilder } from './grid-model.builder';\nimport { GridRoot } from './grid-root';\n\n@Component({\n\tselector: 'q-grid',\n\tproviders: [\n\t\tGrid,\n\t\tGridPlugin,\n\t\tGridRoot,\n\t\tGridLet,\n\t\tLayerService,\n\t\tTemplateCacheService,\n\t\tTemplateLinkService,\n\t\tTemplateService,\n\t\tStateAccessor,\n\t],\n\tstyleUrls: ['../../../../qgrid-styles/index.scss'],\n\ttemplateUrl: './grid.component.html',\n\tencapsulation: ViewEncapsulation.None,\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class GridComponent implements OnInit, OnChanges {\n\tprivate firstSetup = true;\n\n\tprivate gridState = this.stateAccessor.setter(GridState);\n\tprivate dataState = this.stateAccessor.setter(DataState);\n\tprivate editState = this.stateAccessor.setter(EditState);\n\tprivate filterState = this.stateAccessor.setter(FilterState);\n\tprivate groupState = this.stateAccessor.setter(GroupState);\n\tprivate pivotState = this.stateAccessor.setter(PivotState);\n\tprivate selectionState = this.stateAccessor.setter(SelectionState);\n\tprivate scrollState = this.stateAccessor.setter(ScrollState);\n\tprivate sortState = this.stateAccessor.setter(SortState);\n\tprivate styleState = this.stateAccessor.setter(StyleState);\n\n\tthemeComponent: any;\n\n\t@Input() set model(value: GridModel) {\n\t\tthis.root.model = value;\n\t}\n\n\tget model(): GridModel {\n\t\treturn this.root.model;\n\t}\n\n\t@Input('id') set gridId(id: string) { this.gridState({ id }); }\n\t@Input('header') set gridTitle(header: string) { this.gridState({ caption: header }); }\n\t@Input('caption') set gridCaption(caption: string) { this.gridState({ caption }); }\n\t@Input('interactionMode') set gridInteractionMode(interactionMode: GridStateInteractionMode) { this.gridState({ interactionMode }); }\n\n\t@Input('columns') set dataColumns(columns: Array<ColumnModel>) { if (Array.isArray(columns)) { this.dataState({ columns }); } }\n\t@Input('rows') set dataRows(rows: Array<any>) { if (Array.isArray(rows)) { this.dataState({ rows }); } }\n\n\t@Input() set editCancel(cancel: Command) { this.editState({ cancel }); }\n\t@Input() set editCommit(commit: Command) { this.editState({ commit }); }\n\t@Input() set editEnter(enter: Command) { this.editState({ enter }); }\n\t@Input() set editMethod(method: EditStateMethod) { this.editState({ method }); }\n\t@Input() set editMode(mode: EditStateMode) { this.editState({ mode }); }\n\t@Input() set editReset(reset: Command) { this.editState({ reset }); }\n\n\t@Input() set filterUnit(unit: FilterStateUnit) { this.filterState({ unit }); }\n\n\t@Input() set groupBy(by: Array<string>) { this.groupState({ by }); }\n\t@Input() set groupMode(mode: GroupStateMode) { this.groupState({ mode }); }\n\t@Input() set groupSummary(summary: GroupStateSummary) { this.groupState({ summary }); }\n\n\t@Input() set pivotBy(by: Array<string>) { this.pivotState({ by }); }\n\n\t@Input('selection') set selectionItems(items: Array<any>) { this.selectionState({ items }); }\n\t@Input() set selectionArea(area: SelectionStateArea) { this.selectionState({ area }); }\n\t@Input() set selectionMode(mode: SelectionStateMode) { this.selectionState({ mode }); }\n\t@Input() set selectionUnit(unit: SelectionStateUnit) { this.selectionState({ unit }); }\n\n\t@Input() set scrollMode(mode: ScrollStateMode) { this.scrollState({ mode }); }\n\n\t@Input() set sortBy(by: Array<string>) { this.sortState({ by }); }\n\t@Input() set sortMode(mode: SortStateMode) { this.sortState({ mode }); }\n\t@Input() set sortTrigger(trigger: Array<string>) { this.sortState({ trigger }); }\n\n\t@Input() set styleCell(cell: StyleCellCallback | { [key: string]: StyleCellCallback }) { this.styleState({ cell }); }\n\t@Input() set styleRow(row: StyleRowCallback) { this.styleState({ row }); }\n\n\tconstructor(\n\t\tprivate root: GridRoot,\n\t\tprivate plugin: GridPlugin,\n\t\tprivate elementRef: ElementRef,\n\t\tprivate zone: NgZone,\n\t\tprivate layerService: LayerService,\n\t\tprivate cd: ChangeDetectorRef,\n\t\tprivate stateAccessor: StateAccessor,\n\t\tprivate modelBuilder: GridModelBuilder,\n\t\t@Inject(DOCUMENT) private document: any,\n\t\ttheme: ThemeService,\n\t) {\n\t\tif (!theme.component) {\n\t\t\tthrow new GridError(\n\t\t\t\t'grid.component',\n\t\t\t\t'Ensure that grid theme module was included'\n\t\t\t);\n\t\t}\n\n\t\tthis.themeComponent = theme.component;\n\t}\n\n\tngOnInit() {\n\t\tif (this.firstSetup) {\n\t\t\tthis.setup();\n\t\t}\n\n\t\tconst { model, disposable, observe } = this.plugin;\n\t\tconst { nativeElement } = this.elementRef;\n\n\t\tif (nativeElement.classList.length) {\n\t\t\tmodel.style({\n\t\t\t\tclassList: Array.from(nativeElement.classList)\n\t\t\t}, {\n\t\t\t\tsource: 'grid.component'\n\t\t\t});\n\t\t}\n\n\t\tconst host = new GridHost(\n\t\t\tnativeElement,\n\t\t\tthis.plugin,\n\t\t);\n\t\tconst listener = new EventListener(nativeElement, new EventManager(this));\n\t\tconst docListener = new EventListener(this.document, new EventManager(this));\n\n\t\tthis.zone.runOutsideAngular(() => {\n\t\t\tdisposable.add(\n\t\t\t\tdocListener.on('focusin', () => host.invalidateActive())\n\t\t\t);\n\n\t\t\tdisposable.add(\n\t\t\t\tdocListener.on('mousedown', e => {\n\t\t\t\t\tif (model.edit().status === 'edit') {\n\t\t\t\t\t\tconst path = eventPath(e);\n\t\t\t\t\t\tconst clickedOutside = path.every(x => x !== nativeElement && !x.classList.contains('q-grid-editor-part'));\n\t\t\t\t\t\tif (clickedOutside) {\n\t\t\t\t\t\t\tmodel.edit({\n\t\t\t\t\t\t\t\tstatus: 'view'\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tsource: 'document.click'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}));\n\n\n\t\t\tdisposable.add(\n\t\t\t\tlistener.on('keyup', e => host.keyUp(e, 'grid'))\n\t\t\t);\n\t\t});\n\n\t\tdisposable.add(\n\t\t\tlistener.on('keydown', e => host.keyDown(e, 'grid'))\n\t\t);\n\n\n\t\tobserve(model.visibilityChanged)\n\t\t\t.subscribe(() => this.cd.detectChanges());\n\t}\n\n\tngOnChanges(changes: SimpleChanges): void {\n\t\tif (changes.model || this.firstSetup) {\n\t\t\tthis.setup();\n\t\t}\n\n\t\tthis.stateAccessor.write(this.model);\n\t}\n\n\t// @deprecated\n\tget visibility(): VisibilityState {\n\t\t// TODO: get rid of that\n\t\tconst { model } = this.plugin;\n\t\treturn model.visibility();\n\t}\n\n\tprivate setup() {\n\t\tthis.firstSetup = false;\n\n\t\tconst model = this.model || this.modelBuilder.build();\n\t\tconst table = tableFactory(model, name => this.layerService.create(name));\n\n\t\tthis.root.model = model;\n\t\tthis.root.table = table;\n\t}\n}\n","<ng-container *ngComponentOutlet=\"themeComponent\">\n</ng-container>\n\n<q-grid-box class=\"q-grid-box q-grid-layout-column\"\n\t\t\t\t\t\tq-grid-markup=\"box\">\n\n\t<q-grid-core-toolbar position=\"top\"\n\t\t\t\t\t\t\t\t\t\t\t class=\"q-grid-toolbar q-grid-toolbar-top q-grid-flex-auto\"\n\t\t\t\t\t\t\t\t\t\t\t *ngIf=\"visibility.toolbar.top\">\n\t</q-grid-core-toolbar>\n\n\t<div class=\"q-grid-flex-100 q-grid-layout-row\"\n\t\t\t [ngClass]=\"{\n            'q-grid-with-left-pin': visibility.pin.left,\n            'q-grid-with-right-pin': visibility.pin.right,\n            'q-grid-with-top-pin': visibility.pin.top,\n            'q-grid-with-bottom-pin': visibility.pin.bottom\n          }\">\n\t\t<q-grid-core-toolbar position=\"left\"\n\t\t\t\t\t\t\t\t\t\t\t\t class=\"q-grid-toolbar q-grid-toolbar-left q-grid-flex-auto\"\n\t\t\t\t\t\t\t\t\t\t\t\t *ngIf=\"visibility.toolbar.left\">\n\t\t</q-grid-core-toolbar>\n\t\t<q-grid-core-view class=\"q-grid-view q-grid-layout-row q-grid-flex\"\n\t\t\t\t\t\t\t\t\t\t\tq-grid-markup=\"view\">\n\t\t</q-grid-core-view>\n\t\t<q-grid-core-toolbar position=\"right\"\n\t\t\t\t\t\t\t\t\t\t\t\t class=\"q-grid-toolbar q-grid-toolbar-right q-grid-flex-auto\"\n\t\t\t\t\t\t\t\t\t\t\t\t *ngIf=\"visibility.toolbar.right\">\n\t\t</q-grid-core-toolbar>\n\t</div>\n\n\t<q-grid-core-toolbar position=\"bottom\"\n\t\t\t\t\t\t\t\t\t\t\t class=\"q-grid-toolbar q-grid-toolbar-bottom q-grid-flex-auto\"\n\t\t\t\t\t\t\t\t\t\t\t *ngIf=\"visibility.toolbar.bottom\">\n\t</q-grid-core-toolbar>\n\n\t<q-grid-core-layer>\n\t</q-grid-core-layer>\n\n</q-grid-box>","import { Injectable } from '@angular/core';\nimport * as labelService from '@qgrid/core';\nimport * as valueService from '@qgrid/core';\nimport { Action, Command, GridService, identity, Node, noop, Pipe, PipeUnit, RowDetailsStatus } from '@qgrid/core';\nimport { GridModelBuilder } from '../grid/grid-model.builder';\nimport { GridModel } from './grid-model';\n\nexport { GridService } from '@qgrid/core';\n\n@Injectable()\nexport class Grid {\n\tconstructor(private modelBuilder: GridModelBuilder) {\n\t}\n\n\tmodel(): GridModel {\n\t\treturn this.modelBuilder.build();\n\t}\n\n\tservice(model: GridModel): GridService {\n\t\treturn new GridService(model);\n\t}\n\n\tget noop() {\n\t\treturn noop;\n\t}\n\n\tget identity() {\n\t\treturn identity;\n\t}\n\n\tget pipe() {\n\t\treturn Pipe;\n\t}\n\n\tget pipeUnit() {\n\t\treturn PipeUnit;\n\t}\n\n\tget Command() {\n\t\treturn Command;\n\t}\n\n\tget Action() {\n\t\treturn Action;\n\t}\n\n\tget Node() {\n\t\treturn Node;\n\t}\n\n\tget RowDetailsStatus() {\n\t\treturn RowDetailsStatus;\n\t}\n\n\tget valueFactory() {\n\t\treturn valueService.getValueFactory;\n\t}\n\n\tget labelFactory() {\n\t\treturn labelService.getLabelFactory;\n\t}\n}\n","import { CommonModule, CurrencyPipe, DatePipe, DecimalPipe } from '@angular/common';\nimport { NgModule, NgZone } from '@angular/core';\nimport { Fastdom, FormatService } from '@qgrid/core';\nimport { BoxModule } from '../box/box.module';\nimport { LayerModule } from '../layer/layer.module';\nimport { MarkupModule } from '../markup/markup.module';\nimport { ScrollModule } from '../scroll/scroll.module';\nimport { TemplateModule } from '../template/template.module';\nimport { ThemeModule } from '../theme/theme.module';\nimport { ToolbarModule } from '../toolbar/toolbar.module';\nimport { ViewModule } from '../view/view.module';\nimport { Grid } from './grid';\nimport { GridModelBuilder } from './grid-model.builder';\nimport { GridComponent } from './grid.component';\n\n@NgModule({\n\tdeclarations: [\n\t\tGridComponent,\n\t],\n\texports: [\n\t\tGridComponent,\n\t],\n\timports: [\n\t\tCommonModule,\n\n\t\tBoxModule,\n\t\tLayerModule,\n\t\tMarkupModule,\n\t\tScrollModule,\n\t\tTemplateModule,\n\t\tThemeModule,\n\t\tToolbarModule,\n\t\tViewModule,\n\t],\n\tproviders: [\n\t\tDatePipe,\n\t\tDecimalPipe,\n\t\tCurrencyPipe,\n\t\tGridModelBuilder,\n\t\tGrid,\n\t]\n})\nexport class GridModule {\n\tconstructor(\n\t\tzone: NgZone,\n\t\tdatePipe: DatePipe,\n\t\tnumberPipe: DecimalPipe,\n\t\tcurrencyPipe: CurrencyPipe\n\t) {\n\t\tFormatService.date = (x, format) => datePipe.transform(x, format);\n\t\tFormatService.number = (x, format) => numberPipe.transform(x, format);\n\t\tFormatService.currency = (x, format) => currencyPipe.transform(x, format);\n\n\t\tFastdom.invoke = task => zone.runOutsideAngular<any>(task);\n\t}\n}\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, NgZone, OnInit } from '@angular/core';\nimport { ColumnView, EventListener, EventManager, HeadHost } from '@qgrid/core';\nimport { GridLet } from '../grid/grid-let';\nimport { GridPlugin } from '../plugin/grid-plugin';\nimport { TableCoreService } from '../table/table-core.service';\n\n@Component({\n\t// tslint:disable-next-line\n\tselector: 'thead[q-grid-core-head]',\n\ttemplateUrl: './head-core.component.html',\n\tproviders: [GridPlugin],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class HeadCoreComponent implements OnInit {\n\tconstructor(\n\t\tpublic $view: GridLet,\n\t\tpublic $table: TableCoreService,\n\t\tprivate elementRef: ElementRef,\n\t\tprivate plugin: GridPlugin,\n\t\tprivate zone: NgZone,\n\t\tprivate cd: ChangeDetectorRef,\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst { disposable, model, observe } = this.plugin;\n\n\t\tconst element = this.elementRef.nativeElement;\n\t\tconst host = new HeadHost(this.plugin);\n\n\t\tconst listener = new EventListener(element, new EventManager(this));\n\t\tthis.zone.runOutsideAngular(() => {\n\t\t\tdisposable.add(listener.on('mousemove', e => host.mouseMove(e)));\n\t\t\tdisposable.add(listener.on('mouseleave', e => host.mouseLeave(e)));\n\t\t});\n\n\t\tobserve(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('status') && e.state.status === 'push') {\n\t\t\t\t\tthis.cd.markForCheck();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tcolumnId(index: number, item: ColumnView) {\n\t\treturn item.model.key;\n\t}\n\n\trowId(index: number) {\n\t\treturn index;\n\t}\n}\n","<tr *ngFor=\"let $row of $view.head.rows; trackBy: rowId; index as $rowIndex\"\n    [q-grid-core-trh]=\"$row\"\n    [q-grid-core-index]=\"$rowIndex\"\n    q-grid-core-source=\"head\">\n    <th *ngFor=\"let $column of $view.head.columns($row, $table.pin); trackBy: columnId; index as $columnIndex\"\n        [attr.rowspan]=\"$column.rowspan\"\n        [attr.colspan]=\"$column.colspan\"\n        [q-grid-drag]=\"$view.head.drag\"\n        [q-grid-drag-data]=\"$column.model.key\"\n        q-grid-drop-area=\"head\"\n        q-grid-resize-path=\"columns\"\n        [q-grid-resize]=\"$column.model.key\"\n        [q-grid-can-resize]=\"$view.head.resize.canExecute\">\n        <ng-container [q-grid-core-th]=\"$column\">\n        </ng-container>\n    </th>\n</tr>","import { NgModule } from '@angular/core';\nimport { ThCoreDirective } from './th-core.directive';\nimport { HeadCoreComponent } from './head-core.component';\nimport { RowModule } from '../row/row.module';\nimport { CommonModule } from '@angular/common';\nimport { ResizeModule } from '../resize/resize.module';\nimport { DndModule } from '../dnd/dnd.module';\n\n@NgModule({\n\tdeclarations: [\n\t\tHeadCoreComponent,\n\t\tThCoreDirective\n\t],\n\texports: [\n\t\tHeadCoreComponent,\n\t\tThCoreDirective,\n\t],\n\timports: [\n\t\tCommonModule,\n\t\tRowModule,\n\t\tResizeModule,\n\t\tDndModule,\n\t]\n})\nexport class HeadModule {\n}\n","import {\n\tDirective,\n\tElementRef,\n\tInput,\n\tOnDestroy,\n\tOnInit,\n\tViewContainerRef\n} from '@angular/core';\nimport { ColumnModel, ColumnView, FilterRowColumnModel, GridError } from '@qgrid/core';\nimport { CellClassService } from '../cell/cell-class.service';\nimport { CellTemplateService } from '../cell/cell-template.service';\nimport { DomTd } from '../dom/dom';\nimport { GridLet } from '../grid/grid-let';\nimport { GridPlugin } from '../plugin/grid-plugin';\nimport { TrhCoreDirective } from '../row/trh-core.directive';\n\n@Directive({\n\tselector: '[q-grid-core-th]'\n})\nexport class ThCoreDirective implements DomTd, OnInit, OnDestroy {\n\t@Input('q-grid-core-th') columnView: ColumnView;\n\n\t$implicit = this;\n\telement: HTMLElement;\n\tvalue: any;\n\tlabel: any;\n\n\tconstructor(\n\t\tpublic $view: GridLet,\n\t\tprivate root: GridPlugin,\n\t\tprivate viewContainerRef: ViewContainerRef,\n\t\tprivate cellTemplate: CellTemplateService,\n\t\tprivate cellClass: CellClassService,\n\t\tprivate tr: TrhCoreDirective,\n\t\telementRef: ElementRef\n\t) {\n\t\tthis.element = elementRef.nativeElement.parentNode;\n\t}\n\n\tngOnInit() {\n\t\tconst { column, element } = this;\n\t\tconst { table } = this.root;\n\n\t\ttable.box.bag.head.addCell(this);\n\n\t\tlet targetColumn: ColumnModel = column;\n\t\tlet targetSource = 'head';\n\n\t\tif (column.type === 'filter-row') {\n\t\t\ttargetSource = 'filter';\n\t\t\ttargetColumn = (column as FilterRowColumnModel).model;\n\t\t\tthis.element.classList.add('q-grid-filter-row');\n\t\t}\n\n\t\tthis.cellClass.toHead(element, column);\n\t\tthis.cellClass.toBody(element, targetColumn);\n\n\n\t\tconst link = this.cellTemplate.build(targetSource, targetColumn, 'view');\n\t\tlink(this.viewContainerRef, this);\n\t}\n\n\tget column(): ColumnModel {\n\t\treturn this.columnView.model;\n\t}\n\n\tget columnIndex() {\n\t\treturn this.columnView.columnIndex;\n\t}\n\n\tget row() {\n\t\treturn this.tr.model;\n\t}\n\n\tget rowIndex() {\n\t\treturn this.tr.index;\n\t}\n\n\tmode(value: string): void {\n\t\tthrow new GridError(\n\t\t\t'th-core.directive',\n\t\t\t`${value} mode is not supported`\n\t\t);\n\t}\n\n\tngOnDestroy() {\n\t\tconst { table } = this.root;\n\t\ttable.box.bag.head.deleteCell(this);\n\t}\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { Disposable as DisposableCore, DisposableResource } from '@qgrid/core';\n\n@Injectable()\nexport class Disposable implements OnDestroy {\n\tprivate disposable = new DisposableCore();\n\n\tadd(resource: DisposableResource) {\n\t\tthis.disposable.add(resource);\n\t}\n\n\tremove(resource: DisposableResource): boolean {\n\t\treturn this.disposable.remove(resource);\n\t}\n\n\tfinalize() {\n\t\tthis.disposable.finalize();\n\t}\n\n\tngOnDestroy() {\n\t\tthis.finalize();\n\t}\n}\n","import { Component, HostBinding, ChangeDetectionStrategy } from '@angular/core';\n\n@Component({\n\tselector: 'q-grid-core-layer',\n\ttemplateUrl: './layer-core.component.html',\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class LayerCoreComponent {\n\t@HostBinding('class')\n\thostClass = 'q-grid-layer';\n}\n","<ng-container q-grid-core-layer></ng-container>","import { Directive, ViewContainerRef } from '@angular/core';\nimport { LayerService } from './layer.service';\n\n@Directive({\n\tselector: '[q-grid-core-layer]'\n})\nexport class LayerCoreDirective {\n\tconstructor(\n\t\tlayerService: LayerService,\n\t\tviewContainerRef: ViewContainerRef\n\t) {\n\t\tlayerService.init(viewContainerRef);\n\t}\n}\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { TemplateHostService } from '../template/template-host.service';\n\n@Component({\n\tselector: 'q-grid-layer',\n\ttemplate: '<ng-content></ng-content>',\n\tproviders: [TemplateHostService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class LayerComponent {\n\tconstructor(templateHost: TemplateHostService) {\n\t\ttemplateHost.key = source => `layer-${source}.tpl.html`;\n\t}\n}\n","export class Layer {\n\tconstructor(private onDestroy: () => void) {\n\t}\n\n\tdestroy() {\n\t\tthis.onDestroy();\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { LayerCoreComponent } from './layer-core.component';\nimport { LayerCoreDirective } from './layer-core.directive';\nimport { LayerComponent } from './layer.component';\nimport { TemplateModule } from '../template/template.module';\n\n@NgModule({\n\tdeclarations: [\n\t\tLayerCoreComponent,\n\t\tLayerCoreDirective,\n\t\tLayerComponent,\n\t],\n\texports: [\n\t\tLayerCoreComponent,\n\t\tLayerCoreDirective,\n\t\tLayerComponent,\n\t],\n\timports: [\n\t\tTemplateModule\n\t]\n})\nexport class LayerModule {\n}\n","import { Injectable, ViewContainerRef } from '@angular/core';\nimport { TemplateService } from '../template/template.service';\nimport { Layer } from './layer';\n\n@Injectable()\nexport class LayerService {\n\tprivate container: ViewContainerRef;\n\tprivate layers = new Map<string, Layer>();\n\n\tconstructor(private templateService: TemplateService) {\n\t}\n\n\tinit(container: ViewContainerRef) {\n\t\tthis.container = container;\n\t}\n\n\tcreate(name) {\n\t\tif (this.layers.has(name)) {\n\t\t\treturn this.layers.get(name);\n\t\t}\n\n\t\tconst { container, templateService } = this;\n\t\tconst link = templateService.find(`layer-${name}.tpl.html`);\n\t\tif (link && container) {\n\t\t\tconst { nativeElement } = container.element;\n\t\t\tnativeElement.parentElement.classList.add(`q-grid-layer-${name}`);\n\t\t\tthis.getHostElement()?.classList.add(`q-grid-${name}`);\n\t\t\tcontainer.createEmbeddedView(link.template, {});\n\t\t}\n\n\t\tconst destroy = container\n\t\t\t? () => {\n\t\t\t\tthis.layers.delete(name);\n\t\t\t\tconst { nativeElement } = container.element;\n\t\t\t\tnativeElement.parentElement.classList.add(`q-grid-layer-${name}`);\n\t\t\t\tthis.getHostElement()?.classList.remove(`q-grid-${name}`);\n\t\t\t\tcontainer.clear();\n\t\t\t}\n\t\t\t: () => this.layers.delete(name);\n\n\t\tconst layer = new Layer(destroy);\n\t\tthis.layers.set(name, layer);\n\t\treturn layer;\n\t}\n\n\tget count() {\n\t\treturn this.layers.size;\n\t}\n\n\tprivate getHostElement() {\n\t\tconst { nativeElement } = this.container.element;\n\t\tfor (let el = nativeElement; !!el; el = el.parentElement) {\n\t\t\tif (el.tagName == 'Q-GRID') {\n\t\t\t\treturn el;\n\t\t\t}\n\t\t}\n\t\treturn null;\t\n\t}\n}\n","import { Directive, ElementRef, Input, OnInit, Optional } from '@angular/core';\nimport { TableCoreService } from '../table/table-core.service';\nimport { GridPlugin } from '../plugin/grid-plugin';\n\n@Directive({\n\tselector: '[q-grid-markup]',\n\tproviders: [GridPlugin]\n})\nexport class MarkupDirective implements OnInit {\n\t@Input('q-grid-markup') name = '';\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate elementRef: ElementRef,\n\t\t@Optional() private table: TableCoreService\n\t) { }\n\n\tngOnInit() {\n\t\tconst { table, disposable } = this.plugin;\n\t\ttable.box.markup[this.getName()] = this.elementRef.nativeElement;\n\n\t\tdisposable.add(() => delete table.box.markup[this.getName()]);\n\t}\n\n\tprivate getName() {\n\t\tif (this.table && this.table.pin) {\n\t\t\treturn `${this.name}-${this.table.pin}`;\n\t\t}\n\n\t\treturn this.name;\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { MarkupDirective } from './markup.directive';\nimport { StopPropagateDirective } from './stop-propagate.directive';\n\n@NgModule({\n\tdeclarations: [\n\t\tMarkupDirective,\n\t\tStopPropagateDirective,\n\t],\n\texports: [\n\t\tMarkupDirective,\n\t\tStopPropagateDirective,\n\t],\n})\nexport class MarkupModule {\n}\n","import { Directive, ElementRef, Input, NgZone, OnInit, Renderer2 } from '@angular/core';\nimport { isString, yes } from '@qgrid/core';\n\n@Directive({\n\tselector: '[q-grid-stop-propagate]'\n})\nexport class StopPropagateDirective implements OnInit {\n\t@Input('q-grid-stop-propagate') eventName: string | Array<string> = 'click';\n\n\t// tslint:disable-next-line:no-input-rename\n\t@Input('q-grid-stop-propagate-when') needStop = yes;\n\n\tconstructor(\n\t\tprivate element: ElementRef,\n\t\tprivate renderer: Renderer2,\n\t\tprivate zone: NgZone) {\n\t}\n\n\tngOnInit() {\n\t\tlet eventNames = this.eventName as Array<string>;\n\t\tif (isString(this.eventName)) {\n\t\t\teventNames = [this.eventName as string];\n\t\t}\n\n\t\tthis.zone.runOutsideAngular(() =>\n\t\t\teventNames.forEach(eventName =>\n\t\t\t\tthis.renderer.listen(\n\t\t\t\t\tthis.element.nativeElement,\n\t\t\t\t\teventName,\n\t\t\t\t\te => {\n\t\t\t\t\t\tif (this.needStop()) {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t)\n\t\t);\n\t}\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { Event, GridLet, Lazy, ObservableEvent, ObservableLike, ObservableReplyEvent } from '@qgrid/core';\nimport { DomTable } from '../dom/dom';\nimport { Grid, GridService } from '../grid/grid';\nimport { GridLet as NgxGridLet } from '../grid/grid-let';\nimport { GridModel } from '../grid/grid-model';\nimport { GridRoot } from '../grid/grid-root';\nimport { Disposable } from '../infrastructure/disposable';\n\n@Injectable()\nexport class GridPlugin implements OnDestroy {\n\tprivate serviceLazy = new Lazy(() => this.qgrid.service(this.$root.model));\n\n\treadonly disposable = new Disposable();\n\n\treadonly observe = <TState>(event: Event<TState>): ObservableLike<TState> => {\n\t\treturn new ObservableEvent(event, this.disposable);\n\t}\n\n\treadonly observeReply = <TState>(event: Event<TState>): ObservableLike<TState> => {\n\t\treturn new ObservableReplyEvent(event, this.disposable);\n\t}\n\n\tconstructor(\n\t\tprivate $view: NgxGridLet,\n\t\tprivate $root: GridRoot,\n\t\tprivate qgrid: Grid\n\t) {\n\t}\n\n\tget model(): GridModel {\n\t\tconst { model } = this.$root;\n\t\treturn model;\n\t}\n\n\tget view(): GridLet {\n\t\treturn this.$view;\n\t}\n\n\tget table(): DomTable {\n\t\tconst { table } = this.$root;\n\t\treturn table;\n\t}\n\n\tget service(): GridService {\n\t\treturn this.serviceLazy.instance;\n\t}\n\n\tngOnDestroy() {\n\t\tthis.disposable.finalize();\n\t}\n}\n","import { Directive, ElementRef, Input, OnInit } from '@angular/core';\nimport { Fastdom } from '@qgrid/core';\n\n@Directive({\n\tselector: '[q-grid-autosize]'\n})\nexport class AutoSizeDirective implements OnInit {\n\t@Input('q-grid-autosize') selector;\n\t@Input('q-grid-autosize-empty-width') emptyWidth = 75;\n\tprivate actualText: string;\n\tprivate host: HTMLElement;\n\tprivate element: HTMLInputElement;\n\n\tconstructor(element: ElementRef) {\n\t\tthis.host = element.nativeElement as HTMLInputElement;\n\t}\n\n\tngOnInit() {\n\t\tthis.element = this.selector ? this.host.querySelector(this.selector) as HTMLInputElement : this.host as HTMLInputElement;\n\t}\n\n\tautoWidth(text) {\n\t\tif (!text) {\n\t\t\tthis.actualText = text;\n\t\t\tFastdom.measure(() => {\n\t\t\t\tFastdom.mutate(() => {\n\t\t\t\t\tthis.host.style.width = `${this.emptyWidth}px`;\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.element) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.actualText === text) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.actualText = text;\n\t\tFastdom.measure(() => {\n\t\t\tconst width = `${this.calculateWidth(this.element, text)}px`;\n\t\t\tFastdom.mutate(() => this.host.style.width = width);\n\t\t});\n\t}\n\n\t@Input('q-grid-autosize-value')\n\tset value(value: string) {\n\t\tthis.autoWidth(value);\n\t}\n\n\tprivate calculateWidth(element: HTMLElement, text: string) {\n\t\tlet width = 0;\n\t\tif (text) {\n\t\t\tconst document = element.ownerDocument;\n\t\t\tconst body = document.body;\n\t\t\tconst test = document.createElement('span');\n\n\t\t\ttest.innerText = text;\n\t\t\ttest.style.whiteSpace = 'pre';\n\t\t\ttest.style.visibility = 'hidden';\n\t\t\ttest.style.font = element.style.font;\n\t\t\ttest.style.fontFamily = element.style.fontFamily;\n\t\t\ttest.style.lineHeight = element.style.lineHeight;\n\t\t\ttest.style.border = element.style.border;\n\t\t\t// borderBox ?\n\n\t\t\tbody.appendChild(test);\n\t\t\twidth = test.offsetWidth;\n\t\t\ttest.remove();\n\t\t}\n\n\t\treturn width;\n\t}\n}\n","import { DOCUMENT } from '@angular/common';\nimport {\n\tDirective,\n\tElementRef,\n\tInject,\n\tInput, NgZone, OnDestroy,\n\tOnInit,\n\tOptional\n} from '@angular/core';\nimport { clone, EventListener, EventManager, GRID_PREFIX } from '@qgrid/core';\nimport { Grid } from '../grid/grid';\nimport { GridModel } from '../grid/grid-model';\nimport { GridPlugin } from '../plugin/grid-plugin';\n\n@Directive({\n\tselector: '[q-grid-resize]'\n})\nexport class ResizeDirective implements OnInit, OnDestroy {\n\tprivate element: HTMLElement;\n\tprivate divider: HTMLElement;\n\n\tprivate listener: {\n\t\tdivider: EventListener,\n\t\tdocument: EventListener\n\t};\n\n\tprivate context = {\n\t\tx: 0,\n\t\ty: 0,\n\t\theight: 0,\n\t\twidth: 0\n\t};\n\n\t@Input('q-grid-resize') key;\n\t@Input('q-grid-resize-path') path;\n\t@Input('q-grid-can-resize') canResize;\n\t@Input('q-grid-resize-selector') selector;\n\n\tconstructor(\n\t\tprivate zone: NgZone,\n\t\t@Optional() private plugin: GridPlugin,\n\t\tprivate qgrid: Grid,\n\t\t@Inject(DOCUMENT) document: any,\n\t\telementRef: ElementRef,\n\t) {\n\t\tthis.element = elementRef.nativeElement;\n\t\tthis.divider = document.createElement('div');\n\n\t\tthis.listener = {\n\t\t\tdivider: new EventListener(\n\t\t\t\tthis.divider,\n\t\t\t\tnew EventManager(this)\n\t\t\t),\n\n\t\t\tdocument: new EventListener(\n\t\t\t\tdocument,\n\t\t\t\tnew EventManager(this)\n\t\t\t)\n\t\t};\n\t}\n\n\tngOnInit() {\n\t\tconst e = { data: this.key };\n\t\tif (this.canResize(e)) {\n\t\t\tthis.zone.runOutsideAngular(() => {\n\t\t\t\tthis.listener.divider.on('mousedown', this.dragStart);\n\t\t\t});\n\n\t\t\tthis.divider.classList.add(`${GRID_PREFIX}-resize-handler`);\n\t\t\tthis.element.appendChild(this.divider);\n\t\t}\n\t}\n\n\tngOnDestroy() {\n\t\tthis.listener.divider.off();\n\t\tthis.listener.document.off();\n\t}\n\n\tdragStart(e: DragEvent) {\n\t\te.preventDefault();\n\n\t\tconst context = this.context;\n\n\t\tconst host = this.select();\n\t\tcontext.width = host.clientWidth;\n\t\tcontext.height = host.clientHeight;\n\t\tcontext.x = e.screenX;\n\t\tcontext.y = e.screenY;\n\n\t\tthis.zone.runOutsideAngular(() => {\n\t\t\tthis.listener.document.on('mousemove', this.drag);\n\t\t\tthis.listener.document.on('mouseup', this.dragEnd);\n\t\t});\n\n\t\tconst model = this.model;\n\t\tmodel.drag({ isActive: true });\n\t}\n\n\tdrag(e: MouseEvent) {\n\t\tconst { context, path, key } = this;\n\t\tconst { layout } = this.model;\n\n\t\tconst state = clone(layout()[path]);\n\n\t\tstate.set(key, {\n\t\t\twidth: context.width + e.screenX - context.x,\n\t\t\theight: context.height + e.screenY - context.y\n\t\t});\n\n\t\tlayout({ [path]: state });\n\t}\n\n\tdragEnd() {\n\t\tthis.listener.document.off();\n\n\t\tconst model = this.model;\n\t\tmodel.drag({ isActive: false });\n\t}\n\n\tprivate select(): HTMLElement {\n\t\tif (this.selector === 'parent') {\n\t\t\treturn this.element.parentElement;\n\t\t}\n\n\t\treturn this.element;\n\t}\n\n\tprivate get model(): GridModel {\n\t\treturn this.plugin.model;\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { ResizeDirective } from './resize.directive';\nimport { AutoSizeDirective } from './autosize.directive';\n\n@NgModule({\n\tdeclarations: [\n\t\tResizeDirective,\n\t\tAutoSizeDirective\n\t],\n\texports: [\n\t\tResizeDirective,\n\t\tAutoSizeDirective\n\t]\n})\nexport class ResizeModule {\n}\n","import { ChangeDetectionStrategy, Component, Input, OnChanges, OnInit } from '@angular/core';\nimport { Command, RowDetails, RowState, RowStateMode, RowStateUnit } from '@qgrid/core';\nimport { GridPlugin } from '../plugin/grid-plugin';\nimport { StateAccessor } from '../state/state-accessor';\nimport { TemplateHostService } from '../template/template-host.service';\n\n// TODO: move it to plugins\n\n@Component({\n\tselector: 'q-grid-row',\n\ttemplate: '<ng-content></ng-content>',\n\tproviders: [\n\t\tTemplateHostService,\n\t\tGridPlugin,\n\t\tStateAccessor,\n\t],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class RowComponent implements OnChanges, OnInit {\n\tprivate rowAccessor = this.stateAccessor.setter(RowState);\n\n\tprivate toggleStatus = new Command({\n\t\texecute: (row) => {\n\t\t\tconst { view } = this.plugin;\n\t\t\treturn view.rowDetails.toggleStatus.execute(row);\n\t\t},\n\t\tcanExecute: (row) => {\n\t\t\tif (row instanceof RowDetails) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst { view } = this.plugin;\n\t\t\treturn view.rowDetails.toggleStatus.canExecute(row);\n\t\t}\n\t});\n\n\t@Input() set mode(mode: RowStateMode) { this.rowAccessor({ mode }); }\n\t@Input() set unit(unit: RowStateUnit) { this.rowAccessor({ unit }); }\n\t@Input() set canMove(canMove: boolean) { this.rowAccessor({ canMove }); }\n\t@Input() set canResize(canResize: boolean) { this.rowAccessor({ canResize }); }\n\t@Input() set minHeight(minHeight) { this.rowAccessor({ minHeight }); }\n\t@Input() set height(height) { this.rowAccessor({ height }); }\n\n\t@Input() behavior = [];\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate stateAccessor: StateAccessor,\n\t\ttemplateHost: TemplateHostService,\n\t) {\n\t\ttemplateHost.key = source => `body-cell-row-${source}.tpl.html`;\n\t}\n\n\tngOnInit() {\n\t\tconst { model, observe } = this.plugin;\n\n\t\tif (this.behavior.indexOf('expandOnShortcut') >= 0) {\n\t\t\tobserve(model.keyboardChanged)\n\t\t\t\t.subscribe(e => {\n\t\t\t\t\tconst { codes, status } = e.state;\n\t\t\t\t\tif (status === 'down') {\n\t\t\t\t\t\tswitch (codes[0]) {\n\t\t\t\t\t\t\t// TODO: replace it from row state shortcut property.\n\t\t\t\t\t\t\tcase 'enter':\n\t\t\t\t\t\t\tcase 'space': {\n\t\t\t\t\t\t\t\tconst { cell } = model.navigation();\n\t\t\t\t\t\t\t\tif (cell) {\n\t\t\t\t\t\t\t\t\tconst { row, column } = cell;\n\t\t\t\t\t\t\t\t\tif (column.type !== 'row-expand' && this.toggleStatus.canExecute(row)) {\n\t\t\t\t\t\t\t\t\t\tthis.toggleStatus.execute(row);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tif (this.behavior.indexOf('expandOnClick') >= 0) {\n\t\t\t\tobserve(model.mouseChanged)\n\t\t\t\t\t.subscribe(e => {\n\t\t\t\t\t\tconst { code, status, target } = e.state;\n\t\t\t\t\t\tif (code === 'left' && status === 'up') {\n\t\t\t\t\t\t\tif (target && target.column.type !== 'row-expand') {\n\t\t\t\t\t\t\t\tif (this.toggleStatus.canExecute(target.row)) {\n\t\t\t\t\t\t\t\t\tthis.toggleStatus.execute(target.row);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (this.behavior.indexOf('expandOnDblClick') >= 0) {\n\t\t\tlet firstClickTarget = null;\n\n\t\t\tobserve(model.mouseChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tconst { code, timestamp } = e.changes;\n\t\t\t\tif (e.state.status === 'release' && code?.oldValue === 'left') {\n\t\t\t\t\tconst target = e.changes.target?.oldValue;\n\t\t\t\t\tif (firstClickTarget === null) {\n\t\t\t\t\t\tfirstClickTarget = target;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst dblClickInterval = 300;\n\t\t\t\t\t\tif (firstClickTarget === target && timestamp.newValue - timestamp.oldValue <= dblClickInterval) {\n\t\t\t\t\t\t\tif (target.column.type !== 'row-expand') {\n\t\t\t\t\t\t\t\tif (this.toggleStatus.canExecute(target.row)) {\n\t\t\t\t\t\t\t\t\tthis.toggleStatus.execute(target.row);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tfirstClickTarget = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tngOnChanges() {\n\t\tconst { model } = this.plugin;\n\t\tthis.stateAccessor.write(model);\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { RowComponent } from './row.component';\nimport { TrCoreDirective } from './tr-core.directive';\nimport { TrhCoreDirective } from './trh-core.directive';\n\n@NgModule({\n\tdeclarations: [\n\t\tRowComponent,\n\t\tTrCoreDirective,\n\t\tTrhCoreDirective,\n\t],\n\texports: [\n\t\tRowComponent,\n\t\tTrCoreDirective,\n\t\tTrhCoreDirective,\n\t],\n})\nexport class RowModule {\n}\n","import { Directive, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { DomTr } from '../dom/dom';\nimport { GridLet } from '../grid/grid-let';\nimport { GridPlugin } from '../plugin/grid-plugin';\n\n@Directive({\n\tselector: '[q-grid-core-tr]'\n})\nexport class TrCoreDirective implements DomTr, OnInit, OnDestroy {\n\t@Input('q-grid-core-index') viewIndex: number;\n\t@Input('q-grid-core-tr') model: any;\n\t@Input('q-grid-core-source') source;\n\n\telement: HTMLElement;\n\n\tconstructor(\n\t\tpublic $view: GridLet,\n\t\tprivate plugin: GridPlugin,\n\t\telementRef: ElementRef\n\t) {\n\t\tthis.element = elementRef.nativeElement;\n\t}\n\n\tget index() {\n\t\treturn this.$view.scroll.y.container.position + this.viewIndex;\n\t}\n\n\tngOnInit() {\n\t\tthis.plugin.table.box.bag[this.source].addRow(this);\n\t}\n\n\tngOnDestroy() {\n\t\tthis.plugin.table.box.bag[this.source].deleteRow(this);\n\t}\n}\n","import { Directive, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { DomTr } from '../dom/dom';\nimport { GridLet } from '../grid/grid-let';\nimport { GridPlugin } from '../plugin/grid-plugin';\n\n@Directive({\n\tselector: '[q-grid-core-trh]'\n})\nexport class TrhCoreDirective implements DomTr, OnInit, OnDestroy {\n\t@Input('q-grid-core-index') index: number;\n\t@Input('q-grid-core-trh') model: any;\n\t@Input('q-grid-core-source') source;\n\n\telement: HTMLElement;\n\n\tconstructor(\n\t\tpublic $view: GridLet,\n\t\tprivate plugin: GridPlugin,\n\t\telementRef: ElementRef\n\t) {\n\t\tthis.element = elementRef.nativeElement;\n\t}\n\n\tngOnInit() {\n\t\tthis.plugin.table.box.bag[this.source].addRow(this);\n\t}\n\n\tngOnDestroy() {\n\t\tthis.plugin.table.box.bag[this.source].deleteRow(this);\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { ScrollService } from './scroll.service';\n\n@NgModule({\n\tproviders: [\n\t\tScrollService\n\t],\n})\nexport class ScrollModule {\n}\n","import { Injectable } from '@angular/core';\nimport { IVscrollContext, IVscrollSettings } from '@qgrid/core';\nimport { VscrollContext } from '../vscroll/vscroll.context';\n\n@Injectable()\nexport class ScrollService {\n\tfactory(settings: IVscrollSettings): IVscrollContext {\n\t\treturn new VscrollContext(settings);\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { GridModel } from '../grid/grid-model';\n\n@Injectable()\nexport class StateAccessor {\n\tprivate setters: Array<(model: GridModel) => void> = [];\n\n\tsetter<TState>(type: new () => TState): (state: Partial<TState>) => void {\n\t\treturn value => {\n\t\t\tthis.setters.push(model => {\n\t\t\t\tconst accessor = model.resolve(type);\n\t\t\t\taccessor.state(value);\n\t\t\t});\n\t\t};\n\t}\n\n\twrite(model: GridModel) {\n\t\tfor (const setter of this.setters) {\n\t\t\tsetter(model);\n\t\t}\n\n\t\tthis.setters = [];\n\t}\n}\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\nimport { ColumnModelPin, VisibilityState } from '@qgrid/core';\nimport { GridLet } from '../grid/grid-let';\nimport { GridPlugin } from '../plugin/grid-plugin';\nimport { TableCoreService } from './table-core.service';\n\n@Component({\n\tselector: 'q-grid-core-table',\n\ttemplateUrl: './table-core.component.html',\n\tproviders: [TableCoreService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TableCoreComponent implements OnInit {\n\t@Input() pin: ColumnModelPin = 'mid';\n\n\tconstructor(\n\t\tpublic $view: GridLet,\n\t\tprivate plugin: GridPlugin,\n\t\tprivate tableHost: TableCoreService,\n\t\tprivate cd: ChangeDetectorRef\n\t) {\n\t}\n\n\tngOnInit() {\n\t\tconst { model, observe } = this.plugin;\n\n\t\tthis.tableHost.pin = this.pin;\n\n\t\tobserve(model.visibilityChanged)\n\t\t\t.subscribe(() => {\n\t\t\t\tthis.cd.markForCheck();\n\t\t\t\tthis.cd.detectChanges();\n\t\t\t});\n\t}\n\n\tget visibility(): VisibilityState {\n\t\tconst { model } = this.plugin;\n\t\treturn model.visibility();\n\t}\n}\n","<table q-grid-markup=\"table\">\n\t<thead *ngIf=\"visibility.head\"\n\t\t   q-grid-core-head\n\t\t   q-grid-markup=\"head\"\n\t\t   q-grid-animate=\"false\"\n\t\t   q-grid-drop-area=\"head\"\n\t\t   [q-grid-drop]=\"$any($view.head.drop)\"\n\t\t   q-grid-drag-direction=\"x\"\n\t\t   [q-grid-drag-over]=\"$any($view.head.drop)\">\n\t</thead>\n\t<tbody *ngIf=\"visibility.pin.top\"\n\t\t   class=\"q-grid-body-top\"\n\t\t   pin=\"top\"\n\t\t   q-grid-core-body\n\t\t   q-grid-markup=\"body-top\"\n\t\t   q-grid-animate=\"false\"\n\t\t   tabindex=\"0\"\n\t\t   q-grid-drop-area=\"body\"\n\t\t   [q-grid-drop]=\"$any($view.row.drop)\"\n\t\t   q-grid-drag-direction=\"y\"\n\t\t   [q-grid-drag-over]=\"$any($view.row.drop)\">\n\t</tbody>\n\t<tbody *ngIf=\"visibility.body\"\n\t\t   q-grid-core-body\n\t\t   q-grid-markup=\"body\"\n\t\t   q-grid-animate=\"false\"\n\t\t   tabindex=\"0\"\n\t\t   q-grid-drop-area=\"body\"\n\t\t   [q-grid-drop]=\"$any($view.row.drop)\"\n\t\t   q-grid-drag-direction=\"y\"\n\t\t   q-grid-vscroll\n\t\t   [q-grid-vscroll-port-y]=\"$any($view.scroll.y)\"\n\t\t   [q-grid-drag-over]=\"$any($view.row.drop)\">\n\t</tbody>\n\t<tbody *ngIf=\"visibility.pin.bottom\"\n\t\t   class=\"q-grid-body-bottom\"\n\t\t   pin=\"bottom\"\n\t\t   q-grid-core-body\n\t\t   q-grid-markup=\"body-bottom\"\n\t\t   q-grid-animate=\"false\"\n\t\t   tabindex=\"0\"\n\t\t   q-grid-drop-area=\"body\"\n\t\t   [q-grid-drop]=\"$any($view.row.drop)\"\n\t\t   q-grid-drag-direction=\"y\"\n\t\t   [q-grid-drag-over]=\"$any($view.row.drop)\">\n\t</tbody>\n\t<tfoot *ngIf=\"visibility.foot\"\n\t\t   q-grid-core-foot\n\t\t   q-grid-markup=\"foot\"\n\t\t   q-grid-animate=\"false\">\n\t</tfoot>\n</table>","import { Injectable } from '@angular/core';\nimport { ColumnModelPin } from '@qgrid/core';\n\n@Injectable()\nexport class TableCoreService {\n\tpin: ColumnModelPin;\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TableCoreComponent } from './table-core.component';\nimport { HeadModule } from '../head/head.module';\nimport { FootModule } from '../foot/foot.module';\nimport { BodyModule } from '../body/body.module';\nimport { MarkupModule } from '../markup/markup.module';\nimport { DndModule } from '../dnd/dnd.module';\nimport { VscrollModule } from '../vscroll/vscroll.module';\n\n@NgModule({\n\tdeclarations: [\n\t\tTableCoreComponent,\n\t],\n\texports: [\n\t\tTableCoreComponent\n\t],\n\timports: [\n\t\tCommonModule,\n\n\t\tHeadModule,\n\t\tFootModule,\n\t\tBodyModule,\n\t\tMarkupModule,\n\t\tDndModule,\n\t\tVscrollModule\n\t]\n})\nexport class TableModule {\n}\n","import { Directive, Input, OnInit, TemplateRef, Optional } from '@angular/core';\nimport { TemplateCacheService } from './template-cache.service';\nimport { TemplateHostService } from './template-host.service';\nimport { TemplateLink } from './template-link';\n\n@Directive({\n\t// tslint:disable-next-line\n\tselector: 'ng-template[for]'\n})\nexport class TemplateCacheDirective implements OnInit {\n\t@Input('for') key = '';\n\t@Input() context = {};\n\n\tconstructor(\n\t\tprivate templateCache: TemplateCacheService,\n\t\tprivate templateRef: TemplateRef<any>,\n\t\t@Optional() private templateHost: TemplateHostService) {\n\t}\n\n\tngOnInit() {\n\t\tconst link = new TemplateLink(this.templateRef, this.context);\n\t\tif (this.templateHost) {\n\t\t\tthis.templateCache.put(this.templateHost.key(this.key), link);\n\t\t} else {\n\t\t\tthis.templateCache.put(this.key, link);\n\t\t}\n\t}\n}\n","import { Injectable, TemplateRef } from '@angular/core';\nimport { TemplateLink } from './template-link';\n\n@Injectable()\nexport class TemplateCacheService {\n\tprivate cache: Map<string, TemplateLink> = new Map();\n\n\tconstructor() {\n\t}\n\n\tget(key: string): TemplateLink {\n\t\treturn this.cache.get(key);\n\t}\n\n\tput(key: string, value: TemplateLink) {\n\t\tthis.cache.set(key, value);\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { identity } from '@qgrid/core';\n\n@Injectable()\nexport class TemplateHostService {\n\tkey: (x: string) => string = identity;\n}\n","import { Directive, Input, OnInit, TemplateRef } from '@angular/core';\nimport { TemplateLinkService } from './template-link.service';\nimport { TemplateLink } from './template-link';\n\n@Directive({\n\t// tslint:disable-next-line\n\tselector: 'ng-template[key]'\n})\nexport class TemplateLinkDirective implements OnInit {\n\t@Input() key = '';\n\t@Input() context = {};\n\n\tconstructor(private templateLink: TemplateLinkService, private templateRef: TemplateRef<any>) {\n\t}\n\n\tngOnInit() {\n\t\tconst link = new TemplateLink(this.templateRef, this.context);\n\t\tthis.templateLink.put(this.key, link);\n\t}\n}\n","import { TemplateRef } from '@angular/core';\n\nexport class TemplateLink {\n\tconstructor(public template: TemplateRef<any>, public context: any) {\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { TemplateLink } from './template-link';\n\n@Injectable()\nexport class TemplateLinkService {\n\tprivate cache: Map<string, TemplateLink> = new Map();\n\n\tget(key: string): TemplateLink {\n\t\treturn this.cache.get(key);\n\t}\n\n\tput(key: string, value: TemplateLink) {\n\t\tthis.cache.set(key, value);\n\t}\n}\n","import {\n\tDirective,\n\tDoCheck,\n\tEmbeddedViewRef,\n\tInput,\n\tViewContainerRef,\n\tSimpleChanges,\n\tOnChanges\n} from '@angular/core';\nimport { TemplateService } from './template.service';\n\n@Directive({\n\t// tslint:disable-next-line\n\tselector: 'ng-container[key]'\n})\nexport class TemplateDirective implements DoCheck, OnChanges {\n\tprivate viewRef: EmbeddedViewRef<any>;\n\n\t@Input() key = '';\n\t@Input() context: any = null;\n\t@Input() check = false;\n\n\tconstructor(\n\t\tprivate templateService: TemplateService,\n\t\tprivate viewContainerRef: ViewContainerRef\n\t) { }\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tconst keyChange = changes['key'];\n\t\tif (keyChange) {\n\t\t\tif (this.viewRef) {\n\t\t\t\tthis.viewRef.destroy();\n\t\t\t\tthis.viewRef = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tngDoCheck() {\n\t\tif (!this.viewRef) {\n\t\t\tconst link = this.templateService.find(this.key);\n\t\t\tif (link) {\n\t\t\t\tthis.viewRef = this.viewContainerRef.createEmbeddedView(link.template, this.context);\n\t\t\t}\n\t\t}\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { TemplateDirective } from './template.directive';\nimport { TemplateLinkDirective } from './template-link.directive';\nimport { TemplateCacheDirective } from './template-cache.directive';\n\n@NgModule({\n\tdeclarations: [\n\t\tTemplateDirective,\n\t\tTemplateLinkDirective,\n\t\tTemplateCacheDirective\n\t],\n\texports: [\n\t\tTemplateDirective,\n\t\tTemplateLinkDirective,\n\t\tTemplateCacheDirective\n\t]\n})\nexport class TemplateModule {\n}\n","import { Injectable } from '@angular/core';\nimport { isArray, isString } from '@qgrid/core';\nimport { TemplateCacheService } from './template-cache.service';\nimport { TemplateLink } from './template-link';\nimport { TemplateLinkService } from './template-link.service';\n\n@Injectable()\nexport class TemplateService {\n\tconstructor(\n\t\tprivate templateLink: TemplateLinkService,\n\t\tprivate templateCache: TemplateCacheService\n\t) { }\n\n\tfind(keys: string | string[]): TemplateLink {\n\t\tif (isString(keys)) {\n\t\t\tconst key = keys as string;\n\t\t\tconst link = this.templateCache.get(key) || this.templateLink.get(key);\n\t\t\treturn link || null;\n\t\t}\n\n\t\tif (isArray(keys)) {\n\t\t\treturn this.lookInCache(keys) || this.lookInLink(keys);\n\t\t}\n\t}\n\n\tprivate lookInCache(keys) {\n\t\tfor (const key of keys) {\n\t\t\tconst link = this.templateCache.get(key);\n\t\t\tif (link) {\n\t\t\t\treturn link;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate lookInLink(keys) {\n\t\tfor (const key of keys) {\n\t\t\tconst link = this.templateLink.get(key);\n\t\t\tif (link) {\n\t\t\t\treturn link;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { ThemeService } from './theme.service';\n\n@NgModule({\n\tproviders: [\n\t\tThemeService\n\t],\n})\nexport class ThemeModule {\n}\n","import { Injectable } from '@angular/core';\nimport { Event } from '@qgrid/core';\n\nexport interface ThemeNameChangeEventArg {\n\toldName: string;\n\tnewName: string;\n}\n\n@Injectable()\nexport class ThemeService {\n\tprivate themeName = '';\n\n\tchanged = new Event<ThemeNameChangeEventArg>();\n\tcomponent: any;\n\n\tconstructor() { }\n\n\tget name() {\n\t\treturn this.themeName;\n\t}\n\n\tset name(value: string) {\n\t\tif (value !== this.themeName) {\n\t\t\tconst oldName = this.themeName;\n\t\t\tconst newName = value;\n\n\t\t\tthis.changed.emit({ oldName, newName });\n\t\t}\n\t}\n}\n","import { Component, Input, ChangeDetectionStrategy } from '@angular/core';\n\n@Component({\n\tselector: 'q-grid-core-toolbar',\n\ttemplateUrl: './toolbar-core.component.html',\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ToolbarCoreComponent {\n\t@Input() position: 'top' | 'right' | 'bottom' | 'left';\n}\n","<ng-container key=\"toolbar-{{position}}.tpl.html\"></ng-container>","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { TemplateHostService } from '../template/template-host.service';\n\n@Component({\n\tselector: 'q-grid-toolbar',\n\ttemplate: '<ng-content></ng-content>',\n\tproviders: [TemplateHostService],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ToolbarComponent {\n\tconstructor(templateHost: TemplateHostService) {\n\t\ttemplateHost.key = source => `toolbar-${source}.tpl.html`;\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { ToolbarComponent } from './toolbar.component';\nimport { ToolbarCoreComponent } from './toolbar-core.component';\nimport { TemplateModule } from '../template/template.module';\n\n@NgModule({\n\tdeclarations: [\n\t\tToolbarComponent,\n\t\tToolbarCoreComponent\n\t],\n\texports: [\n\t\tToolbarComponent,\n\t\tToolbarCoreComponent\n\t],\n\timports: [\n\t\tTemplateModule\n\t]\n})\nexport class ToolbarModule {\n}\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, DoCheck, ElementRef, NgZone, OnInit } from '@angular/core';\nimport { EventListener, EventManager, TableCommandManager, ViewHost, VisibilityState } from '@qgrid/core';\nimport { CellClassService } from '../cell/cell-class.service';\nimport { CellTemplateService } from '../cell/cell-template.service';\nimport { Grid } from '../grid/grid';\nimport { GridLet } from '../grid/grid-let';\nimport { GridPlugin } from '../plugin/grid-plugin';\n\n@Component({\n\tselector: 'q-grid-core-view',\n\ttemplateUrl: './view-core.component.html',\n\tproviders: [\n\t\tCellTemplateService,\n\t\tCellClassService,\n\t\tGridPlugin,\n\t],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ViewCoreComponent implements OnInit, DoCheck {\n\tprivate host: ViewHost;\n\n\tconstructor(\n\t\tprivate plugin: GridPlugin,\n\t\tprivate qgrid: Grid,\n\t\tprivate cd: ChangeDetectorRef,\n\t\tprivate zone: NgZone,\n\t\tprivate view: GridLet,\n\t\tprivate elementRef: ElementRef,\n\t) {\n\t\tzone\n\t\t\t.onStable\n\t\t\t.subscribe(() => {\n\t\t\t\tconst { model, table } = this.plugin;\n\n\t\t\t\tif (model) {\n\t\t\t\t\tconst { status } = model.scene();\n\t\t\t\t\tif (status === 'push') {\n\t\t\t\t\t\ttable.invalidate();\n\n\t\t\t\t\t\tmodel.scene({\n\t\t\t\t\t\t\tstatus: 'stop'\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tsource: 'view-core.component',\n\t\t\t\t\t\t\tbehavior: 'core'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (this.host) {\n\t\t\t\t\t\t\tthis.host.invalidate();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tngDoCheck() {\n\t\tif (this.host) {\n\t\t\tconst { model } = this.plugin;\n\t\t\tif (model.scene().status === 'stop') {\n\t\t\t\tthis.host.invalidate();\n\t\t\t}\n\t\t}\n\t}\n\n\tngOnInit() {\n\t\tconst {\n\t\t\tmodel,\n\t\t\ttable,\n\t\t\tobserveReply,\n\t\t\tobserve,\n\t\t\tview,\n\t\t\tdisposable,\n\t\t\tservice\n\t\t} = this.plugin;\n\n\t\t// TODO: make it better\n\t\ttable.box.markup.view = this.elementRef.nativeElement;\n\t\tconst cmdManager = new TableCommandManager(f => f(), table);\n\t\tthis.view.init(this.plugin, cmdManager);\n\n\t\tview.scroll.y.settings.emit = f => {\n\t\t\tf();\n\n\t\t\tthis.cd.markForCheck();\n\t\t\tthis.cd.detectChanges();\n\t\t};\n\n\t\tthis.host = new ViewHost(this.plugin);\n\n\t\tobserveReply(model.sceneChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('status') && e.state.status === 'pull') {\n\t\t\t\t\tthis.cd.markForCheck();\n\n\t\t\t\t\tthis.zone.run(() =>\n\t\t\t\t\t\tmodel.scene({\n\t\t\t\t\t\t\tstatus: 'push'\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tsource: 'view-core.component',\n\t\t\t\t\t\t\tbehavior: 'core'\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserve(model.styleChanged)\n\t\t\t.subscribe(() => this.host.invalidate());\n\n\t\tobserve(model.layoutChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('rows')) {\n\t\t\t\t\tthis.host.invalidate();\n\t\t\t\t}\n\t\t\t});\n\n\t\tobserveReply(model.editChanged)\n\t\t\t.subscribe(e => {\n\t\t\t\tif (e.hasChanges('status')) {\n\t\t\t\t\tif (e.state.status === 'endBatch') {\n\t\t\t\t\t\tservice.invalidate({\n\t\t\t\t\t\t\tsource: 'view-core.component',\n\t\t\t\t\t\t\twhy: 'refresh'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tconst listener = new EventListener(this.elementRef.nativeElement, new EventManager(this));\n\n\t\tthis.zone.runOutsideAngular(() => {\n\t\t\tdisposable.add(listener.on('mousemove', e => this.host.mouseMove(e)));\n\t\t\tdisposable.add(listener.on('mouseenter', e => this.host.mouseEnter(e)));\n\t\t\tdisposable.add(listener.on('mouseleave', e => this.host.mouseLeave(e)));\n\t\t\tdisposable.add(listener.on('mouseup', e => this.host.mouseUp(e)));\n\t\t});\n\n\t\tdisposable.add(\n\t\t\tlistener.on('mousedown', e => this.host.mouseDown(e))\n\t\t);\n\n\t\tif (model.scroll().mode === 'virtual') {\n\t\t\tconst asVirtualBody = table.body as any;\n\t\t\tif (asVirtualBody.requestInvalidate) {\n\t\t\t\tasVirtualBody.requestInvalidate.on(() => this.host.invalidate());\n\t\t\t}\n\t\t}\n\t}\n\n\tget visibility(): VisibilityState {\n\t\tconst { model } = this.plugin;\n\t\treturn model.visibility();\n\t}\n}\n","<q-grid-core-table *ngIf=\"visibility.pin.left\"\n                   pin=\"left\"\n                   class=\"q-grid-table q-grid-table-left q-grid-layout-column\">\n</q-grid-core-table>\n\n<q-grid-core-table pin=\"mid\"\n                   class=\"q-grid-table q-grid-table-mid q-grid-layout-column q-grid-flex\">\n</q-grid-core-table>\n\n<q-grid-core-table *ngIf=\"visibility.pin.right\"\n                   pin=\"right\"\n                   class=\"q-grid-table q-grid-table-right q-grid-layout-column\">\n</q-grid-core-table>\n\n<q-grid-cell-handler class=\"q-grid-cell-handler\">\n</q-grid-cell-handler>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ViewCoreComponent } from './view-core.component';\nimport { CellHandlerModule } from '../cell-handler/cell-handler.module';\nimport { TableModule } from '../table/table.module';\n\n@NgModule({\n\tdeclarations: [\n\t\tViewCoreComponent\n\t],\n\texports: [\n\t\tViewCoreComponent\n\t],\n\timports: [\n\t\tCommonModule,\n\t\tCellHandlerModule,\n\t\tTableModule,\n\t]\n})\nexport class ViewModule {\n}\n","import { Directive, Input, ElementRef, OnDestroy, OnChanges, SimpleChanges } from '@angular/core';\nimport { sizeFactory } from './vscroll.container';\nimport { VscrollPortYDirective } from './vscroll-port-y.directive';\n\n@Directive({\n\tselector: '[q-grid-vscroll-column]'\n})\nexport class VscrollColumnDirective implements OnDestroy, OnChanges {\n\t@Input('q-grid-vscroll-column') index: number;\n\tprivate column: HTMLElement;\n\n\tconstructor(elementRef: ElementRef, private port: VscrollPortYDirective) {\n\t\tthis.column = elementRef.nativeElement;\n\t}\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tif (changes['index']) {\n\t\t\tif (this.port.getItemSize()) {\n\t\t\t\tthis.ngOnChanges = null;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { layout, settings, container, column } = this;\n\t\t\tconst { rowHeight } = settings;\n\t\t\tthis.ngOnChanges = (e: SimpleChanges) => {\n\t\t\t\tif (e['index']) {\n\t\t\t\t\tconst change = e['index'];\n\t\t\t\t\tconst newIndex = change.currentValue;\n\t\t\t\t\tconst oldIndex = change.previousValue;\n\t\t\t\t\tlayout.removeItem(oldIndex);\n\n\t\t\t\t\tconst size = sizeFactory(rowHeight, container, column, newIndex);\n\t\t\t\t\tlayout.setItem(newIndex, size);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst firstChange = changes['index'];\n\t\t\tconst firstIndex = firstChange.currentValue;\n\t\t\tconst firstSize = sizeFactory(rowHeight, container, column, firstIndex);\n\t\t\tlayout.setItem(firstIndex, firstSize);\n\t\t}\n\t}\n\n\tngOnDestroy() {\n\t\tthis.port.layout.removeItem(this.index);\n\t}\n\n\tprivate get layout() {\n\t\treturn this.port.layout;\n\t}\n\n\tprivate get settings() {\n\t\treturn this.port.context.settings;\n\t}\n\n\tprivate get container() {\n\t\treturn this.port.context.container;\n\t}\n}\n","import { Directive, OnInit, OnDestroy, ElementRef, Input, Optional } from '@angular/core';\nimport { VscrollPortXDirective } from './vscroll-port-x.directive';\nimport { VscrollPortYDirective } from './vscroll-port-y.directive';\nimport { VscrollPort } from './vscroll.port';\n\n@Directive({\n\tselector: '[q-grid-vscroll-mark]'\n})\nexport class VscrollMarkDirective implements OnInit, OnDestroy {\n\t@Input('q-grid-vscroll-mark') key: string;\n\tprivate ports: Array<VscrollPort> = [];\n\n\tconstructor(\n\t\tprivate elementRef: ElementRef,\n\t\t@Optional() portX: VscrollPortXDirective,\n\t\t@Optional() portY: VscrollPortYDirective) {\n\t\tif (portX) {\n\t\t\tthis.ports.push(portX);\n\t\t}\n\n\t\tif (portY) {\n\t\t\tthis.ports.push(portY);\n\t\t}\n\t}\n\n\tngOnInit() {\n\t\tconst element = this.elementRef.nativeElement;\n\t\tconst key = this.key;\n\n\t\tthis.ports.forEach(port => port.markup[key] = element);\n\t}\n\n\tngOnDestroy() {\n\t\tconst key = this.key;\n\n\t\tthis.ports.forEach(port => delete port.markup[key]);\n\t}\n}\n","import { Directive, ElementRef, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { isNumber } from '@qgrid/core';\nimport { VscrollBox } from './vscroll.box';\nimport { VscrollContext } from './vscroll.context';\nimport { VscrollDirective } from './vscroll.directive';\nimport { VscrollLayout } from './vscroll.layout';\nimport { VscrollLink } from './vscroll.link';\nimport { VscrollPort } from './vscroll.port';\nimport { findPositionUsingItemSize, findPositionUsingOffsets, IVscrollPosition, recycleFactory } from './vscroll.position';\nimport { capitalize } from './vscroll.utility';\n\n@Directive({\n\tselector: '[q-grid-vscroll-port-x]'\n})\nexport class VscrollPortXDirective implements VscrollPort, OnChanges {\n\tprivate link: VscrollLink = null;\n\n\tmarkup: { [key: string]: HTMLElement } = {};\n\tlayout: VscrollLayout = null;\n\t@Input('q-grid-vscroll-port-x') context: VscrollContext;\n\n\tconstructor(\n\t\tprivate elementRef: ElementRef,\n\t\tprivate view: VscrollDirective\n\t) {\n\t}\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tconst contextChange = changes['context'];\n\t\tif (contextChange && this.context) {\n\t\t\tthis.layout = new VscrollLayout(this);\n\t\t\tthis.link = new VscrollLink(this, this.view);\n\t\t\tthis.context.container.reset();\n\t\t}\n\t}\n\n\treset() {\n\t\tthis.view.resetX();\n\t}\n\n\temit(f: () => void) {\n\t\tconst { settings } = this.context;\n\n\t\tif (settings.emit) {\n\t\t\tsettings.emit(f);\n\t\t} else {\n\t\t\tf();\n\t\t}\n\t}\n\n\tgetPositionUsingItemSize(itemSize: number, box: VscrollBox, arm: number): IVscrollPosition {\n\t\tconst limitTop = box.scrollLeft - arm;\n\t\tconst limitBottom = box.scrollWidth - (box.portWidth + arm);\n\t\tconst value = Math.min(limitBottom, Math.max(0, limitTop));\n\n\t\treturn findPositionUsingItemSize(value, itemSize);\n\t}\n\n\tgetPositionUsingOffsets(offsets: Array<number>, box: VscrollBox, arm: number): IVscrollPosition {\n\t\tconst limitTop = box.scrollLeft - arm;\n\t\tconst limitBottom = box.scrollHeight - (box.portWidth + arm);\n\t\tconst value = Math.min(limitBottom, Math.max(0, limitTop));\n\n\t\treturn findPositionUsingOffsets(value, offsets);\n\t}\n\n\tmove(left: number, right: number) {\n\t\tthis.pad('left', left);\n\t\tthis.pad('right', right);\n\t}\n\n\tgetItemSize(): number {\n\t\tconst columnWidth = this.context.settings.columnWidth as number;\n\t\treturn isNumber(columnWidth) ? columnWidth : 0;\n\t}\n\n\tgetScrollSize(box: VscrollBox) {\n\t\treturn box.scrollWidth;\n\t}\n\n\tgetSize(box: VscrollBox) {\n\t\treturn box.portWidth;\n\t}\n\n\trecycleFactory(items: Array<any>) {\n\t\tconst recycle = recycleFactory(items);\n\t\treturn (index: number, count: number) => {\n\t\t\tconst size = this.getItemSize();\n\t\t\tif (size) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn recycle(index, count);\n\t\t};\n\t}\n\n\thasChanges(newBox: VscrollBox, oldBox: VscrollBox) {\n\t\treturn !oldBox.portWidth || newBox.scrollWidth !== oldBox.scrollWidth;\n\t}\n\n\tprivate pad(pos: string, value: number) {\n\t\tif (this.markup.hasOwnProperty(pos)) {\n\t\t\tconst mark = this.markup[pos];\n\t\t\tmark.style.width = value + 'px';\n\t\t} else {\n\t\t\tthis.elementRef.nativeElement.style['padding' + capitalize(pos)] = value + 'px';\n\t\t}\n\t}\n}\n","import { Directive, ElementRef, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { isNumber } from '@qgrid/core';\nimport { VscrollBox } from './vscroll.box';\nimport { VscrollContext } from './vscroll.context';\nimport { VscrollDirective } from './vscroll.directive';\nimport { VscrollLayout } from './vscroll.layout';\nimport { VscrollLink } from './vscroll.link';\nimport { VscrollPort } from './vscroll.port';\nimport { findPositionUsingItemSize, findPositionUsingOffsets, IVscrollPosition, recycleFactory } from './vscroll.position';\nimport { capitalize } from './vscroll.utility';\n\n@Directive({\n\tselector: '[q-grid-vscroll-port-y]'\n})\nexport class VscrollPortYDirective implements VscrollPort, OnChanges {\n\tprivate link: VscrollLink = null;\n\n\tlayout: VscrollLayout = null;\n\tmarkup: { [key: string]: HTMLElement } = {};\n\t@Input('q-grid-vscroll-port-y') context: VscrollContext;\n\n\tconstructor(\n\t\tprivate elementRef: ElementRef,\n\t\tprivate view: VscrollDirective\n\t) {\n\t}\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tconst contextChange = changes['context'];\n\t\tif (contextChange && this.context) {\n\t\t\tthis.layout = new VscrollLayout(this);\n\t\t\tthis.link = new VscrollLink(this, this.view);\n\t\t\tthis.context.container.reset();\n\t\t}\n\t}\n\n\tpublic reset() {\n\t\tthis.view.resetY();\n\t}\n\n\temit(f: () => void) {\n\t\tconst { settings } = this.context;\n\t\tif (settings.emit) {\n\t\t\tsettings.emit(f);\n\t\t} else {\n\t\t\tf();\n\t\t}\n\t}\n\n\tgetPositionUsingItemSize(itemSize: number, box: VscrollBox, arm: number): IVscrollPosition {\n\t\tconst limitTop = box.scrollTop - arm;\n\t\tconst limitBottom = box.scrollHeight - (box.portHeight + arm);\n\t\tconst value = Math.min(limitBottom, Math.max(0, limitTop));\n\t\treturn findPositionUsingItemSize(value, itemSize);\n\t}\n\n\tgetPositionUsingOffsets(offsets: Array<number>, box: VscrollBox, arm: number): IVscrollPosition {\n\t\tconst limitTop = box.scrollTop - arm;\n\t\tconst limitBottom = box.scrollHeight - (box.portHeight + arm);\n\t\tconst value = Math.min(limitBottom, Math.max(0, limitTop));\n\t\treturn findPositionUsingOffsets(value, offsets);\n\t}\n\n\tmove(top: number, bottom: number) {\n\t\tthis.pad('top', top);\n\t\tthis.pad('bottom', bottom);\n\t}\n\n\tgetItemSize(): number {\n\t\tconst rowHeight = this.context.settings.rowHeight as number;\n\t\treturn isNumber(rowHeight) ? rowHeight : 0;\n\t}\n\n\tgetScrollSize(box: VscrollBox) {\n\t\treturn box.scrollHeight;\n\t}\n\n\tgetSize(box: VscrollBox) {\n\t\treturn box.portHeight;\n\t}\n\n\trecycleFactory(items: Array<any>) {\n\t\tconst recycle = recycleFactory(items);\n\t\treturn (index: number, count: number) => {\n\t\t\tconst size = this.getItemSize();\n\t\t\tif (size) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn recycle(index, count);\n\t\t};\n\t}\n\n\thasChanges(newBox: VscrollBox, oldBox: VscrollBox) {\n\t\treturn !oldBox.portHeight || newBox.scrollTop !== oldBox.scrollTop;\n\t}\n\n\tprivate pad(pos: string, value: number) {\n\t\tif (this.markup.hasOwnProperty(pos)) {\n\t\t\tconst mark = this.markup[pos];\n\t\t\tmark.style.height = value + 'px';\n\t\t} else {\n\t\t\tthis.elementRef.nativeElement.style['padding' + capitalize(pos)] = value + 'px';\n\t\t}\n\t}\n}\n","import { Directive, Input, ElementRef, OnInit, OnDestroy, OnChanges, SimpleChanges } from '@angular/core';\nimport { sizeFactory } from './vscroll.container';\nimport { VscrollPortYDirective } from './vscroll-port-y.directive';\n\n@Directive({\n\tselector: '[q-grid-vscroll-row]'\n})\nexport class VscrollRowDirective implements OnDestroy, OnChanges {\n\t@Input('q-grid-vscroll-row') index: number;\n\tprivate row: HTMLElement;\n\n\tconstructor(elementRef: ElementRef, private port: VscrollPortYDirective) {\n\t\tthis.row = elementRef.nativeElement;\n\t}\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tif (changes['index']) {\n\t\t\tif (this.port.getItemSize()) {\n\t\t\t\tthis.ngOnChanges = null;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { layout, settings, container, row } = this;\n\t\t\tconst { rowHeight } = settings;\n\t\t\tthis.ngOnChanges = (e: SimpleChanges) => {\n\t\t\t\tif (e['index']) {\n\t\t\t\t\tconst change = e['index'];\n\t\t\t\t\tconst newIndex = change.currentValue;\n\t\t\t\t\tconst oldIndex = change.previousValue;\n\t\t\t\t\tlayout.removeItem(oldIndex);\n\n\t\t\t\t\tconst size = sizeFactory(rowHeight, container, row, newIndex);\n\t\t\t\t\tlayout.setItem(newIndex, size);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst firstChange = changes['index'];\n\t\t\tconst firstNewIndex = firstChange.currentValue;\n\t\t\tconst firstSize = sizeFactory(rowHeight, container, row, firstNewIndex);\n\t\t\tlayout.setItem(firstNewIndex, firstSize);\n\t\t}\n\t}\n\n\tngOnDestroy() {\n\t\tthis.port.layout.removeItem(this.index);\n\t}\n\n\tprivate get layout() {\n\t\treturn this.port.layout;\n\t}\n\n\tprivate get settings() {\n\t\treturn this.port.context.settings;\n\t}\n\n\tprivate get container() {\n\t\treturn this.port.context.container;\n\t}\n}\n","export class VscrollBox {\n\tscrollWidth = 0;\n\tscrollHeight = 0;\n\tscrollTop = 0;\n\tscrollLeft = 0;\n\tportWidth = 0;\n\tportHeight = 0;\n}\n","import { EventEmitter } from '@angular/core';\nimport { Defer, GridError, isFunction, isNumber, IVscrollContainer, IVscrollSettings } from '@qgrid/core';\n\nexport const rAF = window.requestAnimationFrame;\n\nexport class VscrollContainer implements IVscrollContainer {\n\tprivate lastPage = 0;\n\n\tconstructor(private settings: IVscrollSettings) {\n\t}\n\n\tforce = false;\n\tcount = 0;\n\tposition = 0;\n\n\treset$ = new EventEmitter<{ handled: boolean, source: string }>();\n\tupdate$ = new EventEmitter<number>();\n\tdraw$ = new EventEmitter<{ position: number }>();\n\n\ttick(f: () => void) {\n\t\trAF(f);\n\t}\n\n\tread(f: () => void) {\n\t\tf();\n\t}\n\n\twrite(f: () => void) {\n\t\tf();\n\t}\n\n\tapply(f: () => void, emit: (f: () => void) => void) {\n\t\temit(f);\n\t}\n\n\tget currentPage() {\n\t\tconst threshold = this.settings.threshold;\n\t\tconst position = this.position;\n\t\treturn Math.ceil((position + threshold) / threshold) - 1;\n\t}\n\n\tupdate(count: number) {\n\t\tif (this.count !== count) {\n\t\t\tthis.count = count;\n\t\t\tthis.update$.emit(count);\n\t\t}\n\n\t\tconst { lastPage, currentPage } = this;\n\t\tif (currentPage > lastPage) {\n\t\t\tthis.fetchPage(currentPage);\n\t\t}\n\t}\n\n\tfetchPage(page: number) {\n\t\tconst { settings, lastPage } = this;\n\t\tconst { threshold } = settings;\n\n\t\tthis.lastPage = page;\n\n\t\tconst deferred = new Defer<number>();\n\n\t\tdeferred.promise.then(count => {\n\t\t\tthis.force = true;\n\n\t\t\tif (count !== this.count) {\n\t\t\t\tthis.update(count);\n\t\t\t}\n\t\t});\n\n\t\tif (page === 0) {\n\t\t\tsettings.fetch(0, threshold, deferred);\n\t\t} else {\n\t\t\tconst skip = (lastPage + 1) * threshold;\n\t\t\tif (this.count < skip) {\n\t\t\t\tdeferred.resolve(this.count);\n\t\t\t} else {\n\t\t\t\tconst take = (page - lastPage) * threshold;\n\t\t\t\tsettings.fetch(skip, take, deferred);\n\t\t\t}\n\t\t}\n\t}\n\n\treset() {\n\t\tthis.force = false;\n\t\tthis.position = 0;\n\t\tthis.count = 0;\n\t\tthis.lastPage = 0;\n\n\t\tthis.reset$.emit({\n\t\t\thandled: false,\n\t\t\tsource: 'container'\n\t\t});\n\t}\n}\n\nexport type VscrollSize = (element: HTMLElement, index: number) => number;\n\nexport function sizeFactory(\n\tsize: number | VscrollSize,\n\tcontainer: VscrollContainer,\n\telement: HTMLElement,\n\tindex: number\n): () => number {\n\tif (isFunction(size)) {\n\t\treturn () => (size as VscrollSize)(element, container.position + index);\n\t}\n\n\tif (isNumber(size)) {\n\t\treturn () => size as number;\n\t}\n\n\tthrow new GridError('vscroll.utility', `Invalid size ${size}`);\n}\n","import { IVscrollContext, IVscrollSettings } from '@qgrid/core';\nimport { VscrollContainer } from './vscroll.container';\nimport { VscrollSettings } from './vscroll.settings';\n\nexport class VscrollContext implements IVscrollContext {\n\tsettings: IVscrollSettings;\n\tcontainer: VscrollContainer;\n\n\tconstructor(settings?: Partial<IVscrollSettings>) {\n\t\tthis.settings = new VscrollSettings(() => this.container.count);\n\t\tif (settings) {\n\t\t\tObject.assign(this.settings, settings);\n\t\t}\n\n\t\tthis.container = new VscrollContainer(this.settings);\n\t}\n\n\tid(index: number) {\n\t\treturn index;\n\t}\n}\n","import { Directive, ElementRef, EventEmitter, NgZone, Renderer2 } from '@angular/core';\nimport { placeholderBitmap } from './vscroll.utility';\n\n@Directive({\n\tselector: '[q-grid-vscroll]'\n})\nexport class VscrollDirective {\n\tscroll = new EventEmitter();\n\treset = new EventEmitter<{ handled: boolean, source: string }>();\n\n\tconstructor(private elementRef: ElementRef, zone: NgZone, renderer: Renderer2) {\n\t\tzone.runOutsideAngular(() => {\n\t\t\telementRef\n\t\t\t\t.nativeElement\n\t\t\t\t.addEventListener(\n\t\t\t\t\t'scroll',\n\t\t\t\t\t() => this.scroll.emit(),\n\t\t\t\t\t{ passive: true }\n\t\t\t\t);\n\n\t\t\trenderer.listen(\n\t\t\t\twindow,\n\t\t\t\t'resize',\n\t\t\t\t() => {\n\t\t\t\t\tconst e = { handled: false, source: 'resize' };\n\t\t\t\t\tthis.reset.emit(e);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tget element() {\n\t\treturn this.elementRef.nativeElement;\n\t}\n\n\tdrawPlaceholder(width: number, height: number) {\n\t\tconst box = this.elementRef.nativeElement;\n\t\tconst style = box.style;\n\t\tconst placeholder = placeholderBitmap(width || box.clientWidth, height || box.clientHeight);\n\n\t\tstyle.backgroundImage = 'url(' + placeholder + ')';\n\t\tstyle.backgroundRepeat = 'repeat';\n\t}\n\n\tresetX() {\n\t\tthis.elementRef.nativeElement.scrollLeft = 0;\n\t}\n\n\tresetY() {\n\t\tthis.elementRef.nativeElement.scrollTop = 0;\n\t}\n}\n","import { findPositionUsingOffsets, IVscrollPosition, recycleFactory } from './vscroll.position';\nimport { VscrollBox } from './vscroll.box';\nimport { VscrollPort } from './vscroll.port';\n\nconst UNSET_ARM = Number.MAX_SAFE_INTEGER;\n\nfunction empty() {\n\treturn 0;\n}\n\nexport class VscrollLayout {\n\tprivate items = [];\n\tprivate minArm = UNSET_ARM;\n\tprivate position = findPositionUsingOffsets(0, []);\n\tprivate getOffsets = recycleFactory(this.items);\n\n\tconstructor(private port: VscrollPort) {\n\t}\n\n\trecycle(count: number, box: VscrollBox, force: boolean): IVscrollPosition | null {\n\t\tconst { port } = this;\n\t\tconst itemSize = port.getItemSize();\n\t\tif (itemSize) {\n\t\t\treturn this.recycleItemSize(count, box, force, itemSize);\n\t\t}\n\n\t\treturn this.recycleOffsets(count, box, force);\n\t}\n\n\tinvalidate(position: IVscrollPosition): number {\n\t\tconst { offset } = position;\n\t\tconst pad1 = Math.max(0, offset);\n\t\tconst pad2 = Math.max(0, position.pad - pad1);\n\n\t\tthis.port.move(pad1, pad2);\n\t\treturn position.index;\n\t}\n\n\treset() {\n\t\tthis.minArm = UNSET_ARM;\n\t\tthis.getOffsets = this.port.recycleFactory(this.items);\n\t\tthis.position = findPositionUsingOffsets(0, []);\n\t\treturn this.invalidate(this.position);\n\t}\n\n\tsetItem(index: number, item: () => number) {\n\t\tconst { items } = this;\n\t\titems[index] = item;\n\t\twhile (--index >= 0) {\n\t\t\tif (items[index]) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\titems[index] = empty;\n\t\t}\n\t}\n\n\tremoveItem(index: number) {\n\t\tconst { items } = this;\n\t\tconst last = items.length - 1;\n\t\tif (index === last) {\n\t\t\titems.pop();\n\t\t\twhile (--index >= 0) {\n\t\t\t\tconst item = items[index];\n\t\t\t\tif (item !== empty) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\titems.pop();\n\t\t\t}\n\t\t} else {\n\t\t\titems[index] = empty;\n\t\t}\n\t}\n\n\tprivate recycleOffsets(count: number, box: VscrollBox, force: boolean) {\n\t\tconst { position, port } = this;\n\t\tconst { threshold } = this.settings;\n\t\tconst offsets = this.getOffsets(position.index, count);\n\t\tconst arm = this.getArmUsingOffsets(offsets, box, position.index);\n\n\t\tthis.minArm = Math.min(this.minArm, arm);\n\n\t\tconst newPosition = port.getPositionUsingOffsets(offsets, box, this.minArm);\n\t\tif (force || position.index !== newPosition.index) {\n\t\t\tconst last = Math.min(offsets.length - 1, newPosition.index + threshold - 1);\n\t\t\tconst first = newPosition.index - 1;\n\t\t\tconst viewSize = (offsets[last] || 0) - (offsets[first] || 0);\n\t\t\tconst scrollSize = offsets[offsets.length - 1] || 0;\n\t\t\tconst padSize = scrollSize - viewSize;\n\t\t\tnewPosition.pad = padSize;\n\t\t\treturn this.position = newPosition;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate recycleItemSize(count: number, box: VscrollBox, force: boolean, itemSize: number) {\n\t\tconst { position, port } = this;\n\t\tconst arm = this.getArmUsingItemSize(itemSize, box);\n\t\tconst newPosition = port.getPositionUsingItemSize(itemSize, box, arm);\n\n\t\tif (force || position.index !== newPosition.index) {\n\t\t\tconst { threshold } = this.settings;\n\t\t\tconst remain = Math.max(0, newPosition.index + threshold - this.container.count);\n\t\t\tnewPosition.pad = Math.max(0, itemSize * (count + remain - threshold));\n\t\t\treturn this.position = newPosition;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate getArmUsingItemSize(itemSize: number, box: VscrollBox) {\n\t\tconst { threshold } = this.settings;\n\t\tconst portSize = this.port.getSize(box);\n\t\tconst viewSize = threshold * itemSize;\n\t\treturn Math.max(0, (viewSize - portSize) / 2);\n\t}\n\n\tprivate getArmUsingOffsets(offsets: Array<number>, box: VscrollBox, index: number) {\n\t\tif (offsets.length) {\n\t\t\tconst { threshold } = this.settings;\n\t\t\tconst portSize = this.port.getSize(box);\n\t\t\tconst last = Math.min(offsets.length, index + threshold) - 1;\n\t\t\tconst first = (last + 1) - threshold;\n\t\t\tconst viewSize = offsets[last] - offsets[first];\n\t\t\treturn Math.max(0, (viewSize - portSize) / 2);\n\t\t}\n\n\t\treturn UNSET_ARM;\n\t}\n\n\tprivate get container() {\n\t\treturn this.port.context.container;\n\t}\n\n\tprivate get settings() {\n\t\treturn this.port.context.settings;\n\t}\n}\n","import { isNumber } from '@qgrid/core';\nimport { VscrollBox } from './vscroll.box';\nimport { VscrollDirective } from './vscroll.directive';\nimport { VscrollPort } from './vscroll.port';\n\nexport class VscrollLink {\n\tprivate box = new VscrollBox();\n\tprivate ticking = false;\n\n\tconstructor(\n\t\tprivate port: VscrollPort,\n\t\tprivate view: VscrollDirective,\n\t) {\n\t\tconst { layout } = port;\n\t\tconst { settings, container } = this;\n\n\t\tif (settings.placeholderHeight > 0 || settings.placeholderWidth > 0) {\n\t\t\tconst width = settings.placeholderWidth || (isNumber(settings.columnWidth) && settings.columnWidth as number);\n\t\t\tconst height = settings.placeholderHeight || (isNumber(settings.rowHeight) && settings.rowHeight as number);\n\t\t\tview.drawPlaceholder(width, height);\n\t\t}\n\n\t\tview.scroll.subscribe(() => this.update(false));\n\n\t\tview.reset.subscribe(e => {\n\t\t\tif (e.handled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.handled = settings.resetTriggers.indexOf(e.source) < 0;\n\t\t\tcontainer.reset$.emit(e);\n\t\t});\n\n\t\tcontainer.reset$.subscribe(e => {\n\t\t\tif (e.handled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcontainer.position = layout.reset();\n\t\t\tport.reset();\n\n\t\t\tcontainer.fetchPage(0);\n\t\t});\n\n\t\tcontainer.update$.subscribe(() => this.update(true));\n\t}\n\n\ttick(force: boolean) {\n\t\tthis.ticking = false;\n\n\t\tconst { port, container, box } = this;\n\t\tconst count = container.count;\n\t\tconst position = port.layout.recycle(count, box, force);\n\t\tif (position) {\n\t\t\tconst draw = () => {\n\t\t\t\tcontainer.position = port.layout.invalidate(position);\n\t\t\t\tcontainer.draw$.emit({\n\t\t\t\t\tposition: container.position\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tconst emit = f => port.emit(f);\n\t\t\tcontainer.apply(draw, emit);\n\t\t}\n\t}\n\n\tupdate(force: boolean) {\n\t\tconst { container, port, box } = this;\n\t\tconst { element } = this.view;\n\n\t\tthis.container.read(() => {\n\t\t\tconst newBox = {\n\t\t\t\tscrollWidth: element.scrollWidth,\n\t\t\t\tscrollHeight: element.scrollHeight,\n\t\t\t\tscrollTop: element.scrollTop,\n\t\t\t\tscrollLeft: element.scrollLeft,\n\t\t\t\tportWidth: element.clientWidth,\n\t\t\t\tportHeight: element.clientHeight\n\t\t\t};\n\n\t\t\tif (force || port.hasChanges(newBox, box)) {\n\t\t\t\tthis.box = newBox;\n\t\t\t\tif (container.count && !this.ticking) {\n\t\t\t\t\tthis.ticking = true;\n\t\t\t\t\tcontainer.tick(() => this.tick(force));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate get settings() {\n\t\treturn this.port.context.settings;\n\t}\n\n\tprivate get container() {\n\t\treturn this.port.context.container;\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { VscrollService } from './vscroll.service';\nimport { VscrollColumnDirective } from './vscroll-column.directive';\nimport { VscrollRowDirective } from './vscroll-row.directive';\nimport { VscrollPipe } from './vscroll.pipe';\nimport { VscrollMarkDirective } from './vscroll-mark.directive';\nimport { VscrollPortXDirective } from './vscroll-port-x.directive';\nimport { VscrollPortYDirective } from './vscroll-port-y.directive';\nimport { VscrollDirective } from './vscroll.directive';\n\n@NgModule({\n\tdeclarations: [\n\t\tVscrollDirective,\n\t\tVscrollColumnDirective,\n\t\tVscrollRowDirective,\n\t\tVscrollMarkDirective,\n\t\tVscrollPortXDirective,\n\t\tVscrollPortYDirective,\n\t\tVscrollPipe\n\t],\n\texports: [\n\t\tVscrollDirective,\n\t\tVscrollColumnDirective,\n\t\tVscrollRowDirective,\n\t\tVscrollMarkDirective,\n\t\tVscrollPortXDirective,\n\t\tVscrollPortYDirective,\n\t\tVscrollPipe\n\t],\n\tproviders: [\n\t\tVscrollService\n\t]\n})\nexport class VscrollModule {\n}\n","import { ChangeDetectorRef, OnDestroy, Pipe, PipeTransform } from '@angular/core';\nimport { Disposable, IVscrollContext, Log, ObservableLike, SubjectLike } from '@qgrid/core';\n\n@Pipe({\n\tname: 'qGridVscroll$',\n\tpure: true,\n})\nexport class VscrollPipe implements OnDestroy, PipeTransform {\n\tprivate disposable = new Disposable();\n\n\tconstructor(private cd: ChangeDetectorRef) {\n\t}\n\n\ttransform(data: any[], context: IVscrollContext): ObservableLike<any[]> {\n\t\tthis.disposable.finalize();\n\n\t\tif (!context) {\n\t\t\tLog.warn('VscrollPipe', 'Context is not defined');\n\t\t\treturn new SubjectLike();\n\t\t}\n\n\t\tdata = data || [];\n\t\tconst { container, settings } = context;\n\t\tconst items$ = new SubjectLike<any>();\n\n\t\tcontainer.update(data.length);\n\n\t\tlet cursor = container.position;\n\t\tthis.disposable.add(\n\t\t\tcontainer.draw$.subscribe(({ position }) => {\n\t\t\t\tconst { length } = data;\n\t\t\t\tconst { threshold } = settings;\n\n\t\t\t\tcontainer.update(length);\n\n\t\t\t\t// We need to have a less number of virtual items on\n\t\t\t\t// the bottom, as deferred loading is happen there should\n\t\t\t\t// be a threshold place to draw several items below so we use cursor for the last\n\t\t\t\tconst first = position;\n\t\t\t\tif (container.force || first !== cursor) {\n\t\t\t\t\tconst last = Math.min(first + threshold, length);\n\t\t\t\t\tconst wnd = new Array(last - first);\n\n\t\t\t\t\tcursor = first;\n\t\t\t\t\tcontainer.force = false;\n\n\t\t\t\t\tfor (let i = first, j = 0; i < last; i++, j++) {\n\t\t\t\t\t\twnd[j] = data[i];\n\t\t\t\t\t}\n\n\t\t\t\t\t// TODO: remove that workaround\n\t\t\t\t\t// async pipe doesn't trigger change detection,\n\t\t\t\t\t// so we put subscription here to invoke detect changes\n\t\t\t\t\t// after async pipe marks for check\n\t\t\t\t\tconst sub = items$.subscribe(() => {\n\t\t\t\t\t\tthis.cd.detectChanges();\n\t\t\t\t\t});\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\titems$.next(wnd);\n\t\t\t\t\t}\n\t\t\t\t\tfinally {\n\t\t\t\t\t\tsub.unsubscribe();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\n\t\treturn items$;\n\t}\n\n\tngOnDestroy() {\n\t\tthis.disposable.finalize();\n\t}\n}\n","function findIndexAt(items: Array<number>, value: number) {\n\tconst length = items.length;\n\tlet min = 0;\n\tlet max = length - 1;\n\twhile (min <= max) {\n\t\tconst mid = (min + max) >> 1;\n\t\tconst k = items[mid];\n\t\tif (k === value) {\n\t\t\treturn mid;\n\t\t} else if (k < value) {\n\t\t\tmin = mid + 1;\n\t\t} else {\n\t\t\tmax = mid - 1;\n\t\t}\n\t}\n\n\treturn min;\n}\n\nexport interface IVscrollPosition {\n\tindex: number;\n\toffset: number;\n\tlastOffset: number;\n\tvalue: number;\n\tpad: number;\n}\n\nexport function findPositionUsingItemSize(value: number, itemSize: number) {\n\tconst index = Math.max(0, Math.round(value / itemSize));\n\treturn {\n\t\tindex,\n\t\toffset: itemSize * index,\n\t\tlastOffset: 0,\n\t\tvalue,\n\t\tpad: 0\n\t};\n}\n\nexport function findPositionUsingOffsets(value: number, offsets: Array<number>): IVscrollPosition {\n\tconst index = findIndexAt(offsets, value);\n\tconst { length } = offsets;\n\tif (index > 0) {\n\t\treturn {\n\t\t\tindex,\n\t\t\toffset: offsets[index - 1],\n\t\t\tlastOffset: offsets[length - 1],\n\t\t\tvalue,\n\t\t\tpad: 0\n\t\t};\n\t}\n\n\treturn {\n\t\tindex: 0,\n\t\toffset: 0,\n\t\tlastOffset: 0,\n\t\tvalue,\n\t\tpad: 0\n\t};\n}\n\nexport function recycleFactory(items: Array<() => number>) {\n\tconst offsets = new Array<number>();\n\treturn (index: number, count: number) => {\n\t\tlet cursor = offsets.length;\n\t\tconst threshold = items.length;\n\t\tconst diff = Math.min(count, threshold + index) - cursor;\n\n\t\tfor (let i = threshold - diff; i < threshold; i++) {\n\t\t\tconst getSize = items[i];\n\t\t\tconst size = getSize();\n\t\t\tif (cursor === 0) {\n\t\t\t\toffsets[cursor] = size;\n\t\t\t} else {\n\t\t\t\toffsets[cursor] = offsets[cursor - 1] + size;\n\t\t\t}\n\n\t\t\tcursor++;\n\t\t}\n\n\t\treturn offsets;\n\t};\n}\n","import { Injectable } from '@angular/core';\nimport { IVscrollSettings } from '@qgrid/core';\nimport { VscrollContext } from './vscroll.context';\n\n@Injectable()\nexport class VscrollService {\n\tcontext(settings: Partial<IVscrollSettings> = {}) {\n\t\tconst context = new VscrollContext();\n\t\tObject.assign(context.settings, settings);\n\n\t\treturn context;\n\t}\n}\n","import { IVscrollSettings } from '@qgrid/core';\n\nexport class VscrollSettings implements IVscrollSettings {\n\tthreshold = 64;\n\tplaceholderHeight = 0;\n\tplaceholderWidth = 0;\n\tresetTriggers = ['resize'];\n\temit: (f: () => void) => void;\n\n\tconstructor(private getCount: () => number) {\n\t}\n\n\tfetch(skip: number, take: number, d: { resolve: (count: number) => void, reject: () => void }) {\n\t\td.resolve(this.getCount());\n\t}\n\n\trowHeight(element: HTMLElement) {\n\t\tlet height = element.offsetHeight;\n\t\tconst style = getComputedStyle(element);\n\n\t\theight += Number.parseInt(style.marginTop, 10) + Number.parseInt(style.marginBottom, 10);\n\t\treturn height;\n\t}\n\n\tcolumnWidth(element: HTMLElement) {\n\t\tlet width = element.offsetWidth;\n\t\tconst style = getComputedStyle(element);\n\n\t\twidth += Number.parseInt(style.marginLeft, 10) + Number.parseInt(style.marginRight, 10);\n\t\treturn width;\n\t}\n}\n","export function capitalize(text: string) {\n\treturn text[0].toUpperCase() + text.slice(1);\n}\n\nexport function placeholderBitmap(width: number, height: number) {\n\tconst minWidth = Math.max(width, 1);\n\tconst minHeight = Math.max(height, 1);\n\tconst canvas = document.createElement('canvas');\n\tcanvas.width = Math.max(width * 2, 1);\n\tcanvas.height = Math.max(height * 2, 1);\n\n\tconst ctx = canvas.getContext('2d');\n\tctx.fillStyle = 'rgba(0, 0, 0, 0.04)';\n\tctx.fillRect(0, 0, minWidth, minHeight);\n\tctx.fillStyle = 'rgba(0, 0, 0, 0.08)';\n\tctx.fillRect(width, height, minWidth, minHeight);\n\n\treturn canvas.toDataURL();\n}\n"],"names":["ElementRef","RouterLinkActive","APP_ROUTES","i0","_r0","AppComponent","activatedRoute","router","location","zone","cd","media","setIsMobile","isMobile","mobileQuery","matches","mobileQueryListener","detectChanges","matchMedia","addListener","queryParams","subscribe","search","params","isTestEnv","query","push","go","url","split","join","getExamplePath","runOutsideAngular","setTimeout","menuItems","first","findRequestedItem","navigateByUrl","nativeElement","getAttribute","activeItem","findActiveItem","scrollIntoView","find","item","includes","classList","contains","removeListener","selectors","viewQuery","ctx","escapeRegExp","FilterSearchPipe","items","words","filter","word","map","pattern","index","length","RegExp","test","path","pure","HighlightPipe","replace","s","CommonModule","HttpClientModule","FormsModule","MatButtonModule","MatCardModule","MatIconModule","MatInputModule","MatListModule","MatSelectModule","MatSidenavModule","MatToolbarModule","BrowserModule","BrowserAnimationsModule","RouterModule","ExampleModule","AppModule","config","unshift","bootstrap","forRoot","redirectTo","pathMatch","declarations","imports","i1","environment","production","Command","Subject","DataService","EXAMPLE_TAGS","ExampleActionBarBasicComponent","dataService","execute","canLoad","rows$","next","atoms","clearCommand","canExecuteCheck","canExecute","shortcut","loadCommand","getAtoms","features","decls","vars","consts","template","Action","ExampleActionBarOnEnterComponent","qgrid","trigger","actions","gridModel","navigation","cell","view","columns","newColumnIndex","findIndex","c","key","gridService","focus","rowIndex","editChanged","watch","e","off","hasChanges","state","status","columnIndex","selection","rows","model","service","ctx_r3","ctx_r6","ExampleActionBarTemplateComponent","dir","sort","by","ExampleAggregateColumnBasicComponent","$pane_r1","ExampleAltBasicComponent","getPeople","ExampleCellTooltipBasicComponent","$view_r4","$cell_r3","ExampleColumnArrayBasicComponent","Number","MIN_SAFE_INTEGER","Math","PI","MAX_VALUE","undefined","Date","of","ExampleColumnAutocompleteBasicComponent","label","value","fetch","row","bool","Promise","resolve","LN10","LN2","E","LOG10E","LOG2E","SQRT1_2","object","ExampleColumnBoolBasicComponent","columnList","generation","data","title","width","type","trueValue","falseValue","editorOptions","viewWidth","ExampleColumnCurrencyBasicComponent","ExampleColumnDataSafeComponent","level0","currency","number","date","boolean","email","time","image","array","ExampleColumnDateBasicComponent","ExampleColumnDateTimeBasicComponent","ExampleColumnDropdownBasicComponent","ExampleColumnEmailBasicComponent","self","myLabel","args","_","ExampleColumnFileBasicComponent","ExampleColumnIdBasicComponent","ExampleColumnImageBasicComponent","ExampleColumnListBasicComponent","column_r1","ExampleColumnListLoopComponent","ExampleColumnNumberBasicComponent","MIN_VALUE","ExampleColumnPasswordBasicComponent","ExampleColumnReferenceBasicComponent","modelFactory","reference","commit","convert","notEditable","rowKey","x","visibility","toolbar","top","bottom","right","left","column","unit","mode","complexValues","ExampleColumnRowIndicatorBasicComponent","ExampleColumnRowNumberBasicComponent","ExampleColumnRowOptionsBasicComponent","window","open","source","alert","ExampleColumnTextBasicComponent","qGridTime_r6","ExampleColumnTimeBasicComponent","ExampleColumnTooltipBasicComponent","ExampleColumnTypeSafeComponent","notNumber","notCurrency","notDate","notBoolean","notEmail","notTime","notImage","notArray","ExampleColumnUrlBasicComponent","ctx_r5","ExampleColumnColumnVisibilityBasicComponent","ExampleCopyValueFromCellComponent","switchMap","tap","ExampleDataProviderComponent","server","FakeServer","pager","pagination","page$","getTotal","pipe","count","total","getPage","current","size","pageNumber","pageSize","splice","GridComponent","ExampleDataRowAddComponent","grid","human","id","contact","password","comment","likes","gender","birthday","memberSince","name","last","Array","from","concat","edit","ctx_r2","ExampleDataRowDeleteSelectionComponent","ExampleDataRowDeleteComponent","combineLatest","Human","Atom","Quote","http","get","user","commonPresets","JSON","parse","localStorage","getItem","hasOwnProperty","lists","reduce","memo","list","oldItems","newItems","setItem","stringify","factory","ExampleDefineColumnAsyncComponent","symbol","ExampleDefineColumnBasicComponent","ExampleDefineColumnHybridComponent","canFilter","canSort","ExampleDefineColumnTypeComponent","ExampleDestroyGridBasicComponent","BehaviorSubject","ctx_r0","ExampleDestroyGridModelComponent","endsWith","event","handlers","isVisible","console","warn","handlerCount$","getHandlerCount","ExampleDetailsRowAllComponent","RowDetailsStatus","ExampleDetailsRowApiComponent","Map","collapseAllCommand","theSecondRow","canExpand","toggle","ExampleDetailsRowBasicComponent","RowDetails","ExampleDetailsRowCustomComponent","has","sceneChanged","on","indexOf","style","context","ROW_DETAILS_HEIGHT","class","keyboardChanged","codes","toggleExpand","rowNo","parseInt","isNaN","altRow","mouseChanged","code","target","ExampleDetailsRowGridComponent","atom","subject","phase","slice","set","ExampleDetailsRowPinComponent","ExampleDetailsRowSelectComponent","ExampleDetailsRowStartComponent","ExampleDragColumnBasicComponent","ExampleDragRowBasicComponent","ExampleDragRowNodeComponent","ctx_r1","ctx_r4","ExampleDynamicColumnModelComponent","reset","side","getRandomId","dataState","middlePos","floor","forEach","r","groupId","childColumns","i","groupColumn","children","fill","possible","charAt","random","$view_r2","$cell_r1","ExampleEditCellBasicComponent","log","newValue","cancel","ExampleEditCellBatchComponent","ExampleEditRowBasicComponent","isUndef","avatar","labelPath","teammates","people","pipeUnit","default","editor","emailLabel","modified","webPage","webPageLabel","attachment","attachmentLabel","PaneComponent","ExampleEditRowCustomComponent","pane","selectedRow","selectionChanged","openPane","MatChipsModule","ThemeModule","GridModule","ExampleExportBasicComponent","ExampleExportCsvComponent","ExampleFilterColumnFetchComponent","ExampleFilterConditionBasicComponent","ExampleFilterRowAtomBasicComponent","ExampleFilterRowCustomComponent","ExampleFilterRowPeopleBasicComponent","ExampleFloatingRowsBasicComponent","ExampleFocusCellAutoComponent","ExampleFocusCellBasicComponent","ExampleFocusCellCustomComponent","ExampleGenerateColumnCheckComponent","ExampleGenerateColumnCohortComponent","ExampleGenerateColumnDeepComponent","ExampleGenerateColumnRawComponent","ExampleGenerateColumnShallowComponent","ExampleGridListBasicComponent","ExampleGridSizeComponent","ExampleGroupColumnBasicComponent","ExampleGroupRowAggregationComponent","ExampleGroupRowBasicComponent","ExampleGroupRowEditComponent","ExampleGroupRowFlatComponent","ExampleGroupRowRowspanComponent","ExampleGroupRowSubheadComponent","ExampleGroupRowSummaryComponent","ExampleHierarchyBrowserBasicComponent","ExampleImportBasicComponent","ExampleImportCsvComponent","ExampleIndexColumnBasicComponent","ExampleIndexColumnHybridComponent","ExampleIndexColumnModelComponent","ExampleInteractionModeDetachedComponent","ExampleInteractionModeReadonlyComponent","ExampleKeyWithSymbolsComponent","ExampleLayerGridBlankComponent","ExampleLegendGridBasicComponent","ExampleLiveDataBasicComponent","ExampleLiveRowsBasicComponent","ExampleLookAtomsBasicComponent","ExampleLookAtomsCustomizedComponent","ExampleLookAtomsIdComponent","ExampleLookAtomsModelComponent","ExampleLookPeopleBasicComponent","ExampleLookPeopleModelComponent","ExampleLookQuotesBasicComponent","ExampleLookQuotesModelComponent","ExampleManipulateDataBasicComponent","ExampleMasterDetailsBasicComponent","ExampleMouseApiBasicComponent","ExampleOnPushBasicComponent","ExamplePaginationBasicComponent","ExamplePaneBasicComponent","ExamplePaneTriggerComponent","ExamplePaneWithSelectionComponent","ExamplePersistenceBasicComponent","ExamplePersistenceOnStateChangeComponent","ExamplePersistenceServerComponent","ExamplePersistenceWithSyncGetDataComponent","ExamplePinColumnBasicComponent","ExamplePipeGridBasicComponent","ExamplePivotColumnBasicComponent","ExamplePivotColumnCohortComponent","ExamplePivotColumnGroupComponent","ExamplePivotColumnTemplateComponent","ExamplePluginGridBasicComponent","ExamplePluginMyPagerComponent","ExampleRestApiBasicComponent","ExampleSampleOrdersComponent","ExampleScrollVirtualBasicComponent","ExampleScrollVirtualDetailsComponent","ExampleScrollVirtualDragComponent","ExampleScrollVirtualEditComponent","ExampleScrollVirtualGroupComponent","ExampleScrollVirtualHeightComponent","ExampleScrollVirtualInfiniteComponent","ExampleScrollVirtualListInfiniteComponent","ExampleScrollVirtualListComponent","ExampleScrollVirtualSelectionComponent","ExampleScrollVirtualStyleComponent","ExampleSelectCellBasicComponent","ExampleSelectColumnBasicComponent","ExampleSelectMixBasicComponent","ExampleSelectRowBasicComponent","ExampleSelectRowCommandComponent","ExampleSelectRowDisableComponent","ExampleSelectRowEditComponent","ExampleSelectRowRangeComponent","ExampleSelectRowSingleOnlyComponent","ExampleSelectRowSingleComponent","ExampleSizeColumnAbsoluteComponent","ExampleSizeColumnBasicComponent","ExampleSizeColumnFitHeadComponent","ExampleSizeColumnFullComponent","ExampleSizeColumnPinComponent","ExampleSizeRowBasicComponent","ExampleSortRowBasicComponent","ExampleSortRowMixedComponent","ExampleStyleCellBasicComponent","ExampleStyleRowBasicComponent","ExampleSummaryColumnAggregationComponent","ExampleSummaryColumnBasicComponent","ExampleThemeGridDarkComponent","ExampleThemeGridEmbedComponent","ExampleValidationBasicComponent","ExampleVisibilityBasicComponent","ExampleVisibilityStateComponent","EXAMPLES","example","tags","component","exports","fileSaver","XLSX","plugin","take","skip","columnSearch","toLowerCase","columnData","filteredData","custom","Object","keys","searchText","$event","xs","setHours","setMinutes","setSeconds","pinTop","pinBottom","column_r3","Node","root","isVisited","tree","treePipe","nodes","scene","group","node","level","invalidate","area","timer","repeat","takeUntil","getQuotes","quotes","destroy$","rowIndices","uniqRowIndices","Set","updateQuotes","idx","quote","rnd","ask","ldn1","randomTime","min","max","val","num","sqrt","pow","toString","padStart","dataChanged","detailsRows$","every","like","cdr","targetString","logEntries","PersistenceStorage","sessionStorage","users","getUsers","persistence","storage","getAtomPresets","currentUser","setAtomPresets","column1","column2","myDataPipe","GridPlugin","currentPage","page","numberOfPages","action","manager","register","gotoNext","gotoPrev","paginationChanged","ceil","newPage","vscroll","threshold","d","wnd","container","color","selectionToggle","enableProdMode","__NgCli_bootstrap_1","bootstrapModule","catch","error","err","command","icon","templateUrl","CommandManager","apply","f","commands","priorityCommands","y","priority","cmd","sink","Resource","scope","controlSet","nonPrintableSet","codeMap","codeSet","values","printableMap","Keyboard","isControl","String","fromCharCode","Shortcut","dispatcher","keyCode","translate","parts","some","part","isPrintable","ctrlKey","shiftKey","altKey","freeGlobal","global","freeGlobal$1","freeSelf","Function","root$1","Symbol","Symbol$1","objectProto$e","prototype","hasOwnProperty$c","nativeObjectToString$1","symToStringTag$1","toStringTag","getRawTag","isOwn","call","tag","unmasked","result","objectProto$d","nativeObjectToString","objectToString","nullTag","undefinedTag","symToStringTag","baseGetTag","isObject","asyncTag","funcTag$2","genTag$1","proxyTag","isFunction","coreJsData","coreJsData$1","maskSrcKey","uid","exec","IE_PROTO","isMasked","func","funcProto$1","funcToString$1","toSource","reRegExpChar","reIsHostCtor","funcProto","objectProto$c","funcToString","hasOwnProperty$b","reIsNative","baseIsNative","getValue$2","getNative","defineProperty","defineProperty$1","baseAssignValue","eq","other","objectProto$b","hasOwnProperty$a","assignValue","objValue","copyObject","props","customizer","isNew","identity$1","thisArg","nativeMax$1","overRest","start","transform","arguments","otherArgs","constant","baseSetToString","string","baseSetToString$1","HOT_COUNT","HOT_SPAN","nativeNow","now","shortOut","lastCalled","stamp","remaining","setToString","setToString$1","baseRest","MAX_SAFE_INTEGER$1","isLength","isArrayLike","MAX_SAFE_INTEGER","reIsUint","isIndex","isIterateeCall","createAssigner","assigner","sources","guard","baseTimes","n","iteratee","isObjectLike","argsTag$3","baseIsArguments","objectProto$a","hasOwnProperty$9","propertyIsEnumerable$1","propertyIsEnumerable","isArguments","isArguments$1","isArray","isArray$1","stubFalse","freeExports$2","nodeType","freeModule$2","module","moduleExports$2","Buffer$1","Buffer","nativeIsBuffer","isBuffer","isBuffer$1","argsTag$2","arrayTag$2","boolTag$4","dateTag$4","errorTag$2","funcTag$1","mapTag$5","numberTag$4","objectTag$3","regexpTag$3","setTag$5","stringTag$4","weakMapTag$2","arrayBufferTag$3","dataViewTag$4","float32Tag$2","float64Tag$2","int8Tag$2","int16Tag$2","int32Tag$2","uint8Tag$2","uint8ClampedTag$2","uint16Tag$2","uint32Tag$2","typedArrayTags","baseIsTypedArray","baseUnary","freeExports$1","freeModule$1","moduleExports$1","freeProcess","process","nodeUtil","types","require","binding","nodeUtil$1","nodeIsTypedArray","isTypedArray","isTypedArray$1","objectProto$9","hasOwnProperty$8","arrayLikeKeys","inherited","isArr","isArg","isBuff","isType","skipIndexes","objectProto$8","isPrototype","Ctor","constructor","proto","overArg","arg","nativeKeys","nativeKeys$1","objectProto$7","hasOwnProperty$7","baseKeys","assignWith","srcIndex","assignWith$1","listCacheClear","__data__","assocIndexOf","arrayProto","listCacheDelete","lastIndex","pop","listCacheGet","listCacheHas","listCacheSet","ListCache","entries","clear","entry","stackClear","stackDelete","stackGet","stackHas","Map$1","Map$2","nativeCreate","nativeCreate$1","hashClear","hashDelete","HASH_UNDEFINED$2","objectProto$6","hasOwnProperty$6","hashGet","objectProto$5","hasOwnProperty$5","hashHas","HASH_UNDEFINED$1","hashSet","Hash","mapCacheClear","isKeyable","getMapData","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","LARGE_ARRAY_SIZE$1","stackSet","pairs","Stack","arrayEach","baseAssign","nativeKeysIn","objectProto$4","hasOwnProperty$4","baseKeysIn","isProto","keysIn","baseAssignIn","freeExports","freeModule","moduleExports","allocUnsafe","cloneBuffer","buffer","isDeep","copy","copyArray","arrayFilter","predicate","resIndex","stubArray","objectProto$3","nativeGetSymbols$1","getOwnPropertySymbols","getSymbols","getSymbols$1","copySymbols","arrayPush","offset","getPrototype","getPrototypeOf","getPrototype$1","nativeGetSymbols","getSymbolsIn","getSymbolsIn$1","copySymbolsIn","baseGetAllKeys","keysFunc","symbolsFunc","getAllKeys","getAllKeysIn","DataView","DataView$1","Promise$1","Promise$2","Set$1","Set$2","WeakMap","WeakMap$1","mapTag$4","objectTag$2","promiseTag","setTag$4","weakMapTag$1","dataViewTag$3","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ArrayBuffer","ctorString","getTag$1","objectProto$2","hasOwnProperty$3","initCloneArray","input","Uint8Array","Uint8Array$1","cloneArrayBuffer","arrayBuffer","byteLength","cloneDataView","dataView","byteOffset","reFlags","cloneRegExp","regexp","symbolProto$2","symbolValueOf$1","valueOf","cloneSymbol","cloneTypedArray","typedArray","boolTag$3","dateTag$3","mapTag$3","numberTag$3","regexpTag$2","setTag$3","stringTag$3","symbolTag$3","arrayBufferTag$2","dataViewTag$2","float32Tag$1","float64Tag$1","int8Tag$1","int16Tag$1","int32Tag$1","uint8Tag$1","uint8ClampedTag$1","uint16Tag$1","uint32Tag$1","initCloneByTag","objectCreate","create","baseCreate","baseCreate$1","initCloneObject","mapTag$2","baseIsMap","nodeIsMap","isMap","isMap$1","setTag$2","baseIsSet","nodeIsSet","isSet","isSet$1","CLONE_DEEP_FLAG$1","CLONE_FLAT_FLAG","CLONE_SYMBOLS_FLAG$2","argsTag$1","arrayTag$1","boolTag$2","dateTag$2","errorTag$1","funcTag","genTag","mapTag$1","numberTag$2","objectTag$1","regexpTag$1","setTag$1","stringTag$2","symbolTag$2","weakMapTag","arrayBufferTag$1","dataViewTag$1","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","cloneableTags","baseClone","bitmask","stack","isFlat","isFull","isFunc","stacked","subValue","add","CLONE_SYMBOLS_FLAG$1","clone","CLONE_DEEP_FLAG","CLONE_SYMBOLS_FLAG","cloneDeepWith","HASH_UNDEFINED","setCacheAdd","setCacheHas","SetCache","arraySome","cacheHas","cache","COMPARE_PARTIAL_FLAG$5","COMPARE_UNORDERED_FLAG$3","equalArrays","equalFunc","isPartial","arrLength","othLength","arrStacked","othStacked","seen","arrValue","othValue","compared","othIndex","mapToArray","setToArray","COMPARE_PARTIAL_FLAG$4","COMPARE_UNORDERED_FLAG$2","boolTag$1","dateTag$1","errorTag","mapTag","numberTag$1","regexpTag","setTag","stringTag$1","symbolTag$1","arrayBufferTag","dataViewTag","symbolProto$1","symbolValueOf","equalByTag","message","COMPARE_PARTIAL_FLAG$3","objectProto$1","hasOwnProperty$2","equalObjects","objProps","objLength","othProps","objStacked","skipCtor","objCtor","othCtor","COMPARE_PARTIAL_FLAG$2","argsTag","arrayTag","objectTag","objectProto","hasOwnProperty$1","baseIsEqualDeep","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","baseIsEqual","COMPARE_PARTIAL_FLAG$1","COMPARE_UNORDERED_FLAG$1","baseIsMatch","matchData","noCustomizer","srcValue","isStrictComparable","getMatchData","matchesStrictComparable","baseMatches","symbolTag","isSymbol","reIsDeepProp","reIsPlainProp","isKey","FUNC_ERROR_TEXT","memoize","resolver","TypeError","memoized","Cache","MAX_MEMOIZE_SIZE","memoizeCapped","rePropName","reEscapeChar","stringToPath","charCodeAt","match","subString","stringToPath$1","arrayMap","INFINITY$2","symbolProto","symbolToString","baseToString","castPath","INFINITY$1","toKey","baseGet","defaultValue","baseHasIn","hasPath","hasFunc","hasIn","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","baseMatchesProperty","baseProperty","basePropertyDeep","property","baseIteratee","baseSlice","end","baseWhile","isDrop","fromRight","dropWhile","spreadableSymbol","isConcatSpreadable","isFlattenable","baseFlatten","depth","isStrict","flatten","boolTag","isBoolean","dateTag","baseIsDate","nodeIsDate","isDate","isDate$1","isEqual","numberTag","isNumber","stringTag","isString","isUndefined","baseExtremum","comparator","computed","baseGt","maxBy","baseLt","minBy","arrayReduce","accumulator","initAccum","basePropertyOf","deburredLetters","deburrLetter","deburrLetter$1","reLatin","rsComboMarksRange$3","reComboHalfMarksRange$3","rsComboSymbolsRange$3","rsComboRange$3","rsCombo$2","reComboMark","deburr","reAsciiWord","asciiWords","reHasUnicodeWord","hasUnicodeWord","rsAstralRange$2","rsComboMarksRange$2","reComboHalfMarksRange$2","rsComboSymbolsRange$2","rsComboRange$2","rsDingbatRange","rsLowerRange","rsMathOpRange","rsNonCharRange","rsPunctuationRange","rsSpaceRange","rsUpperRange","rsVarRange$2","rsBreakRange","rsApos$1","rsBreak","rsCombo$1","rsDigits","rsDingbat","rsLower","rsMisc","rsFitz$1","rsModifier$1","rsNonAstral$1","rsRegional$1","rsSurrPair$1","rsUpper","rsZWJ$2","rsMiscLower","rsMiscUpper","rsOptContrLower","rsOptContrUpper","reOptMod$1","rsOptVar$1","rsOptJoin$1","rsOrdLower","rsOrdUpper","rsSeq$1","rsEmoji","reUnicodeWord","unicodeWords","rsApos","reApos","createCompounder","callback","castSlice","rsAstralRange$1","rsComboMarksRange$1","reComboHalfMarksRange$1","rsComboSymbolsRange$1","rsComboRange$1","rsVarRange$1","rsZWJ$1","reHasUnicode","hasUnicode","asciiToArray","rsAstralRange","rsComboMarksRange","reComboHalfMarksRange","rsComboSymbolsRange","rsComboRange","rsVarRange","rsAstral","rsCombo","rsFitz","rsModifier","rsNonAstral","rsRegional","rsSurrPair","rsZWJ","reOptMod","rsOptVar","rsOptJoin","rsSeq","rsSymbol","reUnicode","unicodeToArray","stringToArray","createCaseFirst","methodName","strSymbols","chr","trailing","upperFirst$1","upperFirst$2","startCase","startCase$1","baseSum","sumBy","takeWhile","baseFindIndex","fromIndex","baseIsNaN","strictIndexOf","baseIndexOf","arrayIncludes","arrayIncludesWith","noop$1","INFINITY","createSet","createSet$1","LARGE_ARRAY_SIZE","baseUniq","isCommon","outer","seenIndex","uniq","isArrayLikeObject","nativeMax","unzip","zip","zip$1","noop","yes","no","identity","toCamelCase","names","nameList","toUpperCase","substring","isEmail","re","compare","orderBy","compares","criteria","select","xv","yv","htmlEncode","escapeRegexp","text","binarySearch","low","high","mid","isUrl","a","document","createElement","href","host","isImage","matchISO8601","getTypeName","nameRegexp","results","WILDCARD_SYMBOL","notWildcard","ShortcutDispatcher","managerMap","shortcuts","disposes","shct","shortcutCommands","delete","dispose","activities","fetchActivities","activity","invoke","searchFactory","candidates","allCommands","hasNotWildcardCommand","ActionState","resource","AnimationState","commonjsGlobal","globalThis","fastdom","win","debug","raf","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","cb","FastDom","reads","writes","bind","measure","fn","task","scheduleFlush","mutate","remove","extend","Error","child","mixin","initialize","scheduled","flush","runTasks","tasks","shift","Fastdom","GRID_PREFIX","Event","reply","lastArg","lifecycle","handler","Defer","promise","DeferPromise","reject","catchEvent","thenEvent","emit","GridError","captureStackTrace","jobLine","delay","defer","job","doJob","run","token","clearTimeout","VERTICAL_SCROLL_CLASS","HORIZONTAL_SCROLL_CLASS","DEFAULT_DELTA_Y","BodyHost","scrollingJob","table","scroll","oldValue","scrollTop","addClass","scrollLeft","behavior","scrollEnd","removeClass","upper","lower","scrollHeight","height","deltaY","sign","clearHighlight","highlight","Log","expand","compile$1","accessor","getAccessor","compileGet","compileSet","firstPart","graph","getValue$1","$value","$row","$column","getValueFactory","setValue","getLabel","$label","getLabelFactory","setLabel","CacheStrategy","strategy","observeReply","defaultGetValue","getValue","readonlyGetValue","defaultGetLabel","readonlyGetLabel","colspan","rowspan","pin","gridChanged","isReadonly","DataRow","line","resolvers","TemplatePath","getName","for","ColumnModel","description","origin","category","createDefaultModel","cruise","minWidth","maxWidth","widthMode","canEdit","canResize","canMove","canHighlight","canFocus","itemLabel","startNumber","ColumnView","assign","body","etalon","etalonValue","FormatService","format","DataColumnModel","isDefault","aggregation","aggregationOptions","distinct","separator","ArrayColumnModel","itemType","itemFormat","formatter","ArrayColumn","BoolColumnModel","isIndeterminate","isChecked","BoolColumn","CohortColumnModel","CohortColumn","CurrencyColumnModel","maxLength","CurrencyColumn","parseFactory","parseText","parseNumber","parseDate","parseDateTime","parseBool","parseArray","compareParseFactory","getTime","resolveType","getType$1","findType","isPrimitive","inferType","likeNumber","likeDateTime","likeDate","parseFloat","isFinite","getFullYear","getMonth","getDate","yearMonthDay","DateColumnModel","ex","DateColumn","DateTimeColumnModel","dateFormat","timeFormat","DateTimeColumn","EmailColumnModel","EmailColumn","isFileAnImage","FileColumnModel","canUpload","hasPreview","FileColumn","GroupColumnModel","GroupColumn","GroupSummaryColumnModel","GroupSummaryColumn","IdColumnModel","IdColumn","ImageColumnModel","ImageColumn","NumberColumnModel","NumberColumn","PadColumnModel","PadColumn","PasswordColumnModel","PasswordColumn","PivotColumnModel","PivotColumn","Guard","instance","notNull","equals","Model","accessors","Type","resolveAccessor","changed","buildAccessor","changeSet","replyChanges","changes","getter","setter","newState","keysLength","info","notUndefined","ReferenceColumnModel","ReferenceColumn","RowDetailsColumnModel","RowDetailsColumn","RowExpandColumnModel","RowExpandColumn","RowIndicatorColumnModel","RowIndicatorColumn","RowNumberColumnModel","RowNumberColumn","RowOptionsColumnModel","RowOptionsColumn","SelectColumnModel","SelectColumn","TextColumnModel","TextColumn","TimeColumnModel","TimeColumn","UrlColumnModel","UrlColumn","merge$2","t","columnFactory","columnMap","entityType","columnType","defaultSettings","typeSettings","DetailsRow","dataRow","createColumn","emptyColumn","getColumns","rowDetails","Aggregation","options","sum","flattenFactory","summary","pos","pushSummary","parent","posInParent","flatView","iLength","nextLevel","j","jLength","findFirstLeaf","NodeRow","agg","groupRows","findGroupColumn","firstColumn","RowspanNodeRow","nodeRow","isRoot","spanValue","leaf","SubheadNodeRow","nearGroupColumns","groupSpan","nextColumns","Lazy","build","flattenRows","rowsToUse","rowsToUseFactory","markup","rowsLeft","childResult","childView","layout","mx","xc","offsets","yi","xj","gaps","xi","collapse","matrix","lastRow","flattenColumns","findLine","mapColumns","getCellValue","findColumn","lineView","columnRows","widthFactory","form","PAD_SKIP","occupied","calcWidth","rectWidth","percent","headWidth","skipWidth","MIN_WIDTH","cells","head","bag","thCell","th","groupBuilder","pivot","pivotRows","pivotRowLength","groupBy","groupByLength","valueFactory","nodeLength","aggregate","aggRow","rowLength","pivotRow","k","rs","PivotRow","pivotIndex","Renderer","observe","nestNodeRow","subheadNodeRow","rowspanNodeRow","defaultStrategy","strategies","selectNodeRowStrategy","groupChanged","invalidateRows","rowChanged","TextSelection","element","createTextRange","range","moveToElementText","getSelection","createRange","selectNodeContents","removeAllRanges","addRange","BodyLet","disposable","render","tryShowBlankLayer","targetElement","hasLayer","addLayer","removeLayer","BodyState","BoxHost","dragChanged","drag","isActive","css_escape","CSS","escape","cssEscape","codeUnit","firstCodeUnit","build$1","buildLines","sheet","sheetId","getElementById","getSheet","escapeAttr","getElementsByTagName","appendChild","css","lines","styleId","escape$2","innerHTML","parentNode","removeChild","bodyCellClassifier","className","headCellClassifier","CellSelector","selectionState","mapFromRows","mapFromColumns","mapFromCells","mapFromMix","copyToClipboard","textArea","position","padding","border","outline","boxShadow","background","execCommand","Disposable","finalize","unsubscribe","UnsubscribableLike","closed","ObservableEvent","nextSignal","errorSignal","observer","complete","errorOff","eventOff","subscribeEvent","disposed","catchError","isResolved","sub","operators","op","ObservableReplyEvent","SubjectLike","isCompleted","Operator","subscriber","ClipboardLet","clipboard","ClipboardState","merge$1","settings","l","update","insert","ls","updated","removed","lsLength","matched","rsLength","inserted","merge","force","canAssign","doMerge","statistics","st","generateFactory","htmlColumns","spawnColumns","typeDetection","deep","cohort","generate","testNumber","testRows","pathParts","getOwnPropertyNames","prop","propParts","propValue","propPath","ColumnListHost","canCopy","sourceValue","targetValue","targetType","typedValue","buildColumn","tplColumn","dataColumn","dataColumns","preOrderDFS","visit","nodeMemo","filterNode","findLeaves","findNode","calk","bend","parentStack","sortIndexFactory","templateIndex","scores","viewIndex","sortFactory$1","middle","compareFactory","scoreFor","viewFind","findFactory","templateFind","weightCache","getWeight","weights","w","weight","mergeTree","newTree","oldTree","buildIndex","running","screen","former","insertNear","insertFactory","insertCohort","insertCohortFactory","prevNode","cursor","indexMap","newNode","everyNextIsNew","ColumnListState","FilterRowColumnModel","FilterRowColumn","CommandKey","commandKey","generateCommandKey","CompositeCommandManager","TableCommandManager","isViewActive","isFocused","dataPipe","addDataRows","addDataColumns","effect","allColumns","columnBody","filterPipe","matchPredicate","paginationPipe","paginate","pinned","orderFactory","getKey","pair","signedKey","getDirection","directions","pairKey","getMap","getIndex","sortPipe","mappings","comparers","sortEntry","sortKey","sortDir","sortColumn","parseValue","memoPipe","nodeBuilder","groupKey","getRowIndex","groups","nextGroupBy","groupPipe","memoRows","memoNodes","Plan","schema","factory$1","plan","branch","selector","compile","injectData","expandData","baseline","sortSchema","reduceSchema","lift","pivotForm","buildFactory","pivotBy","nextPivotBy","buildPivot","doPivot","doBuild","pivotPipe","columnIndexPipe","filteredIndex","filter$2","doFilter","newChild","columnPipe","dataColumnsFactory","addSelectColumn","selectColumnFactory","addGroupColumn","groupColumnFactory","addRowExpandColumn","rowExpandColumnFactory","addRowIndicatorColumn","rowIndicatorColumnFactory","addPivotColumns","pivotColumnsFactory","addPadColumn","padColumnFactory","selectColumn","indicatorColumn","expandColumn","rowIndicatorColumn","padColumn","padNode","pivotColumn","pivotColumnModel","pivotNode","animationPipe","animation","doNext","Scene","sortFactory","rowList","rowId","positions","indexRow","remain","viewPipe","columnLine","order","scenePipe","columnArea","Pipe","columnPipeUnit","why","columnIndexPipeUnit","defaultPipeUnit","groupPipeUnit","showAll","nextRow","detailsRow","invalidateStatus","toggleStatus","rowDetailsPipeUnit","viewPipeUnit","scenePipeUnit","rowPipeUnit","PipeUnit","DataState","columnId","Container","elements","rects","getBoundingClientRect","clientWidth","clientHeight","offsetWidth","offsetHeight","hasClass","TrContainer","tr","Bag","rowContainer","td","FakeClassList","emptyRect","freeze","FakeElement","fakeElement","Unit","getElement","addClassCore","removeClassCore","hasClassCore","getElementCore","Element","Tr","Row","box","findModel","getKeyElementCore","rowCellsCore","cellCore","Column","columnCellsCore","Td","Cell","modelCore","Matrix","isDataRow","rowSpan","colSpan","Selector","getRowElements","parentElement","trs","SelectorMediator","selectorFactory","buildSelectors","columnCount","columnCells","rowCount","areas","rowElement","rowCells","UnitFactory","rowRange","columnRange","Range","SelectorFactory","selectorMark","unitFactory","Box","selectFactory","createColumnCore","rowCore","createRowCore","createCellCore","StyleBox","CellBox","dataRowIndex","dataColumnIndex","ColumnBox","dataIndex","RowBox","VirtualTd","VirtualCell","mapper","viewToRow","viewToColumn","vtd","addCellClass","removeCellClass","VirtualColumn","addColumnClass","removeColumnClass","VirtualElement","getRect","VirtualRow","addRowClass","removeRowClass","VirtualBox","cellBox","rowBox","columnBox","requestInvalidate","rowToView","createRect","rowRectFactory","viewRowIndex","viewColumnIndex","columnToView","cellRectFactory","getHeight","rect","rowHeight","pageCount","columnWidths","SelectorMark","addNext","addFactory","prev","columnStart","rowStart","Body","VirtualBody","Data","FakeLayer","FakeTable","Foot","Head","SelectorCache","columnCountCache","columnCellsCache","rowCountCache","rowsCache","rowCellsCache","rowCache","cellCache","isParentOf","View","layers","getElementsCore","blur","isFocusedCore","layer","destroy","headMid","footMid","bodyMid","bodyTop","bodyBottom","scrollWidth","direction","tableMid","activeElement","Table","defaults","foot","_data","_view","_head","boxContext","_foot","_body","tableFactory","DragService","startPosition","DragState","Fetch","busy","alive","resolveBusy","rejectBusy","deferred","then","isProcessed","subscription","CellEditorCore","resetFetch","empty$1","CellEditor","fetchFactory","util$7","isPrimitiveValue","looksLikeNumber","obj","isEmptyObject","str","isNoValue","util$6","Common","required","not_empty","not_empty_list","any_object","util$5","_String","outputArr","allowedValue","one_of","allowedValues","max_length","min_length","minLength","length_equal","length_between","reStr","flags","isIgnoreCase","util$4","Numeric","integer","isInteger","positive_integer","decimal","positive_decimal","max_number","maxNumber","min_number","minNumber","number_between","util$3","Special","emailRe","equal_to_field","field","urlReStr","urlRe","iso_date","epoch","setTime","getTimezoneOffset","util$2","DEFAULT_RULES","IS_DEFAULT_AUTO_TRIM","Validator$1","livrRules","isAutoTrim","isPrepared","validators","validatorBuilders","errors","registerRules","allRules","fieldRules","fieldRule","parsed","_parseRule","_buildValidator","prepare","_autoTrim","fieldName","validator","fieldResultArr","errCode","rules","ruleName","alias","_buildAliasedRule","livrRule","allArgs","getRules","dataType","trimmedData","errorCode","livr","ruleBuilders","undefined$1","validate","getErrors","Validator_1","Validator","util$1","Meta","nested_object","nestedObject","variable_object","selectorField","livrs","selectorValue","list_of","hasErrors","list_of_objects","objects","list_of_different_objects","or","ruleSets","lastError","util","Modifiers","trim","to_lc","to_uc","chars","leave_only","LIVR","common","numeric","special","meta","modifiers","registerDefaultRules","LIVR_1","toLIVR","validationRules","rule","hasRules","createValidator","EditCellLet","empty","requestClose","getCommands","enter","exit","navigationChanged","editCell","shortcutFactory","contextFactory","stopImmediatePropagation","validation","originValue","editValue","newLabel","oldLabel","RowEditorCore","editors","TdView","RowEditor","selectRow","selectColumnIndex","selectRowIndex","EditRowLet","EditLet","EditService","startCell","editStatus","selectionMode","doBatch","editView","startTd","startColumnType","EditState","method","cancelShortcuts","enterShortcuts","commitShortcuts","EventListener","handlerSet","addEventListener","removeEventListener","EventManager","DELIMITER","escape$1","CsvExport","graphFlatView","flatObject","flatProp","flatValue","ExportState","JsonExport","flatRow","begin","characters","replacements","objToXml","XmlExport","getType","castFactory","rt","asString","asNumber","asBool","asDate","lt","buildExpression","filterBy","expression","expressions","toInExpression","blanks","toIsEmptyExpression","kind","expr","Visitor","visitGroup","visitCondition","visitFunction","condition","visitUnary","visitBinary","visitBetween","visitIn","visitLeft","visitRight","visitArguments","stringify$1","isValid","stringifyText","stringifyNumber","stringifyDate","MarkupVisitor","PredicateVisitor","assertFactory","lp","rp","assert","isNull","lessThan","lessThanOrEquals","greaterThan","greaterThanOrEquals","actual","noStart","noEnd","etalonStart","etalonEnd","actualValue","v","substr","FetchState","FilterLet","operatorFactory","opList","labelFactory","valueColumnFactory","assertColumnFactory","visitor","FilterState","takeOnce","filter$1","FocusService","activate","FocusAfterRenderService","FocusState","FootLet","resourceCount","EnumerableResource","FootState","GridHost","invalidateVisibility","keyboard","newCodes","keyDown","preventDefault","stopPropagation","tagName","prevent","oldPin","newPin","needFocusCell","mouse","Middleware","pipes","buildFromModel","middleware","guid","p8","p","Scheduler","buildSettings","GridService","scheduler","runPipe","cancelBusy","nextTask","progress","queue","GridState","caption","interactionMode","rowspanGetNode","flatVisible","rowspanIsVisible","GroupLet","getNode","shouldExpand","toggleAllStatus","toggleAll","canExecuteCheckSub","unsubscribeCanExecuteCheck","GroupState","PathService","nodeName","normalizedProperty","normalize","upperFirst","letter","parents","eventPath","composedPath","elementFromPoint","HeadHost","pathFinder","HeadLet","drop","sourceKey","dragData","inAreaX","targetKey","oldPos","newPos","reverse","hostIndex","oldColumn","resize","filterChanged","filterRow","HeadState","hashColumnKeyFactory","columnKey","hashRowKeyFactory","idColumn","getId","hashKeyFactory","hashColumnKey","hashRowKey","cellMatchFactory","keySelector","lookupColumnFactory","selectKey","found","lookupRowFactory","lookupCellFactory","SelectionService","keyFactory","lookup","rowKeys","columnKeys","cellKeys","selectionUnit","selectCellKey","selectRowKey","selectColumnKey","selectHash","hashKey","HighlightLet","cellSelector","selectionService","sortBlurs","columnHoverBlurs","columnFilterBlurs","rowHoverBlurs","selectionBlurs","cellHoverBlurs","isRendering","newCell","invalidateSelection","invalidateColumnHover","invalidateRowHover","invalidateCellHover","invalidateSortBy","sortChanged","invalidateColumnFilterBy","highlightChanged","highlightColumn","highlightRow","highlightCell","sortBy","cls","findColumnPosition","isLeaf","bodyColumn","blurColumn","blurRow","blurCell","HighlightState","CharReader","peeks","nextPosition","eof","peekCore","peekCount","Min","read","peek","CsvImport","delimiter","reader","term","peekPeek","readEscapedValue","readUnescapedValue","lineToObj","ImportState","JsonImport","NODE_TYPE","ELEMENT","ATTRIBUTE","TEXT","DOCUMENT","XmlImport","parser","DOMParser","parseFromString","documentElement","getStatistics","buildNonArray","arrayFromChildren","visited","attributes","attr","childPath","getPath","isText","textContent","lastInfo","isTextContainer","childNodes","Composite","final","isLocked","KeyboardState","LayerState","LayoutLet","styleRow","newColumn","updateColumnForm","invalidateColumns","layoutChanged","viewChanged","hasNonDefaultWidth","sheet$1","gridId","viewForm","columnForm","getWidth","sizeStyle","minHeight","LayoutState","ModelBinder","stateNames","track","commits","stateName","pack","packFactory","write","writeFactory","oldState","buildChanges","diffKey","hostKey","diff","stateKey","canWrite","MouseState","timestamp","NavigationState","up","down","previous","home","pageUp","pageDown","upward","downward","PaginationState","sizeList","resetTriggers","replacer","reviver","serialize","deserialize","PersistenceState","defaultGroup","schedule","load","modify","setDefault","queryBuilder","PipeState","units","shouldKeep","triggers","PivotState","PluginState","ProgressState","isBusy","serializeGet","paginationState","sortState","filterState","RestState","RowListState","RowState","SceneState","ScrollState","SelectionState","toggleRow","togglePreviousRow","toggleNextRow","toggleColumn","toggleNextColumn","togglePreviousColumn","selectAll","SortState","StyleState","TemplateState","ToolbarState","ValidationState","ViewState","VisibilityState","ModelBuilder","ctor","inject","NO_BUTTON","LEFT_BUTTON","MIDDLE_BUTTON","RIGHT_BUTTON","checkButtonCode","getButtonCode","which","Navigation","firstRow","currentRow","currentColumn","oldRow","canNavigate","goDown","newRow","goTo","goUp","prevRow","goRight","nextColumn","goLeft","prevColumn","goNext","hasNextColumn","hasNextRow","goPrevious","hasPrevColumn","hasPrevRow","lastColumn","NavigationLet","focusBlurs","oldCell","scrollTo","invalidateFocus","focusChanged","activeClassName","navState","vr","canScrollTo","PaginationLet","PersistenceService","defaultModel","PluginService","lib","keyIndex","originKey","content","env","serializePost","RowDetailsLet","newStatus","rowStatus","RowLet","oldIndex","inAreaY","newIndex","ScrollLet","draw$","updateCurrentPage","newCurrent","updateTotalCount","startSource","scrollChanged","SelectionCommandManager","SelectionRange","rangeMap","buildRows","buildColumns","buildCells","buildMix","buildRange","endCell","startIndex","endIndex","startRowIndex","endRowIndex","startColumnIndex","endColumnIndex","selectedRows","selectedColumns","mixUnit","SubSelectionState","selectCore","canSelectCore","all","stateCore","notSelected","hashFactory","clearCore","SingleSelectionState","SingleOnlySelectionState","MultipleSelectionState","RangeSelectionState","selectionStateFactory","SelectionLet","selectionRange","toggleCell","stateCheck","modeClass","unitClass","newModeClass","oldModeClass","newUnitClass","oldUnitClass","oldEntries","newEntries","needUpdateAfterRowsChanged","needUpdateAfterColumnsChanged","toggleActiveRow","canSelect","commitRow","togglePrevRow","navigateTo","toggleActiveColumn","togglePrevColumn","stateAll","stringifyFactory","transformBy","predicateFactory","getters","firstRowTitle","numericTitle","alphaTitle","alphabet","indexFirst","indexSecond","upload","ownerDocument","display","click","SortLet","hover","isSingleMode","onInit","columnListChanged","newBy","StyleEntry","sheets","markDirty","StyleMonitor","newSheets","oldSheets","StyleService","visitors","VirtualRowStyle","VirtualCellStyle","cellEntries","columnEntries","columnModel","columnClassList","cellModel","cellKey","cellClassList","StyleLet","active","monitor","styleChanged","isVirtual","domCell","domRow","isRowActive","isCellActive","valueCache","visitRow","visitCell","visitFactory","rowContext","cellContext","bodyBag","getCellElements","builder","viewFactory","commandManager","navigationShortcut","selectionCommandManager","selectionShortcut","nav","ViewHost","needInvalidate","rowMonitor","cellMonitor","timeout","session","triggerJob","triggerLine","findCell","fromNotEditMode","navigate","selectRange","findRow","editMode","focusState","firstElement","isEditMarker","cloneDeep","same","mergeFactory","columnService","CustomColumn","validationService","stringifyInteger","sortService","PU","liftSchema","derivatives","formFactory","AutofocusPlugin","startsWith","m","BackdropPlugin","closeEvent","listener","propagate","clientX","clientY","createEvent","initEvent","dispatchEvent","onKeyDown","ColumnChooserPlugin","cancelEvent","submitEvent","dropEvent","setup","updateView","applyFilter","listView","treeView","toggleAggregation","dropData","src","trg","submit","aggregations","columnChooserCanAggregate","columnChooser","ColumnChooserState","canAggregate","ColumnFilterPlugin","resetEvent","byBlanks","defaultOperator","operator","changeOperator","hasBlanks","ColumnFilterState","GRID_ACTIVE_CLASS","GRID_HIDE_CLASS","ColumnSortPlugin","iconDesc","iconAsc","oldIcon","newIcon","DataManipulationState","deleted","added","edited","rowFactory","etalonRow","DataManipulationPlugin","commitCommand","entryIndex","rowActions","edits","dm","styleState","styleCell","notDMActions","rowOptionsColumn","haschanges","opacity","dataManipulation","EditFormEditorPlugin","EditFormPanelPlugin","EditFormPlugin","downloadFactory","download","mimeType","extension","blob","Blob","fileName","saveAs","PdfWriter","jsPDF","titles","doc","orientation","tableOptions","styles","overflow","fontSize","columnWidth","overflowColumns","headerStyles","pageBreak","margin","dataKey","autoTable","save","sheet_to_workbook","SheetNames","Sheets","toArrayBuffer","excel","XlsxWriter","xlsx","headers","excelOptions","bookType","bookSST","cellDates","compression","worksheet","utils","json_to_sheet","workbook","updateTitles","decode_range","address","encode_col","ExportPlugin","csv","pluginService","json","xml","pdf","FocusPlugin","targetSelector","setAttribute","querySelector","rewriteObject","XlsxReader","toJson","wbOptions","header","sheetName","partial","sheet_to_json","readFile","file","ImportPlugin","files","FileReader","onload","readAsBinaryString","PagerPlugin","PersistencePlugin","editItem","buildGroups","persist","isUniqueTitle","b","targets","PositionPlugin","targetName","windowListener","fitRect","boxRect","intersections","intersection","fix","xo","yo","wr","windowRect","br","ww","wh","abx","aby","rh","rw","arx","ary","ltx0","gtx1","lty0","gty1","marker","h","innerHeight","innerWidth","RestPlugin","post","rest","doSerialize","serializeFactory","ValidatorPlugin","oldErrors","newError","newErrors","customErrors","NgModule","ChangeDetectorModule","ColumnListModule","ColumnModule","DndModule","LayerModule","ResizeModule","RowModule","TemplateModule","ToolbarModule","VscrollModule","ActionBarModule","ActionModule","AltModule","AutoCompleteEditorModule","BackdropModule","BoolEditorModule","CaptionModule","CellEditorModule","CellTooltipModule","ColumnChooserModule","ColumnChooserTriggerModule","ColumnFilterModule","ColumnSortModule","CommandModule","DataManipulationModule","EbModule","EditFormModule","ExportModule","FileModule","FocusModule","ImportModule","LayoutModule","LegendModule","LiveCellModule","LiveColumnModule","LiveRowModule","PagerModule","PaneModule","PersistenceModule","PipeModule","ProgressModule","QueryBuilderModule","ReferenceEditorModule","RestModule","DataProviderModule","StatusBarModule","TabTrapModule","ValidationModule","VisibilityModule","Ng2GridModule","ChangeDetectionStrategy","ChangeDetectorRef","Component","ActionBarComponent","$implicit","actionChanged","initialItems","isSorted","markForCheck","nextAction","providers","changeDetection","OnPush","ActionListComponent","encapsulation","Input","ActionCoreComponent","inputs","ContentChild","TemplateRef","TemplateHostService","ActionComponent","templateHost","templateRef","contentQueries","static","AltComponent","altColumn","AutoCompleteEditorComponent","itemLabelFactory","EventEmitter","Output","ViewChild","BackdropService","BackdropComponent","backdropService","elementRef","backdrop","Directive","NgZone","Inject","BackdropDirective","zIndex","close","backdropHost","outputs","Injectable","BoolEditorComponent","valueChange","autofocus","CaptionComponent","CellEditorComponent","observers","ngContentSelectors","ApplicationRef","CellTooltipComponent","appRef","cellElement","addTooltipLayer","tooltipLayer","tick","showDelay","Renderer2","CellTooltipDirective","renderer","getBoxRect","setStyle","StateAccessor","FocusAfterRender","COLUMN_CHOOSER_NAME","RootContext","ctrl","ColumnChooserComponent","stateAccessor","focusAfterRender","ccState","GridModelBuilder","modelBuilder","ColumnChooserTriggerComponent","ColumnFilterByComponent","byBlanksChange","CellTemplateService","ColumnFilterItemListDirective","cellService","ViewContainerRef","ColumnFilterItemDirective","viewContainerRef","itemList","link","ColumnFilterTriggerComponent","Grid","TemplateService","VscrollService","ColumnFilterComponent","templateService","columnFilter","columnFilterPlugin","vscrollContext","isBlank","sourceState","hasProperty","uniqValues","notBlankValues","filteredItems","buildTemplateKeys","PREFIX","ColumnSortComponent","columnSort","mouseLeave","Optional","ZoneCommandManager","commandArg","CommandDirective","aroundZone","commandEvent","isAfterViewInit","updateState","unregister","useCommandShortcut","zoneManager","afterExecute","commandExecute","hasAttribute","removeAttribute","useZone","DataManipulationComponent","dmState","dataManipulationRowFactory","DataProviderComponent","requestRows","HostListener","DateMaskDirective","mask","maskChar","isDigit","nextMaskChar","char","hostBindings","keyUp","DateService","DateDirective","dateService","createEmbeddedView","dateOrText","toMidnight","previousDate","currentDate","midnight","sameHours","getHours","getMinutes","getSeconds","getMilliseconds","DateModule","simpleFormat","justDigitsValue","parseDateText","toDateTime","year","month","day","formatKey","digit","EditFormControlComponent","EditFormTriggerComponent","EditFormComponent","editFormPanel","ExportComponent","exportPlugin","evaluateFactory","visitArray","visitObject","inst","delegate","Watcher","evaluate","isFirstRun","EbNodeComponent","EbClassDirective","klass","fetchClasses","oldClassList","Line","EbExpressionComponent","$watch","watchers","ws","detect","EbNodeService","$node_r6","$line_r7","oldNode","currentChange","SerializationService","patch","utility","GroupExpression","GroupSchema","nodeSchema","EmptyStatement","ExpressionBuilder","statements","NodeSchemaT","sampleExpression","statement","templateKey","methodsOf","with","sourceFunction","immutable","planMap","groupFactory","expressionGroup","Expression","GroupSchemaT","groupChild","findById","after","before","addChildAfter","addChildBefore","indent","schemaMap","NodeSchema","buildGroup","sourceFn","withFactory","patchKeys","patchLength","withFn","withArgs","keyArgs","decorator","decorate","override","Serializer","serializeGroup","serializeAttributes","canSerialize","serializeExpression","serializeAttr","serializableProps","Deserializer","nodeMap","traverse","deserializeLine","childSchema","dataGroups","dataGroup","exprGroup","deserializeGroup","dataExpressions","dataExp","dataExpr","TraverseService","visitLine","dst","sourcesLength","FileDirective","onUpload","hideBackdrop","revealBackdrop","onloadend","onLoadEnd","_value","_label","labelChange","readAsDataURL","readyState","DONE","hide","reveal","AutoFocusDirective","enabled","BlurDirective","selectRootElement","listen","onBlur","FocusDirective","disabled","ImportComponent","hostElement","eventListener","importPlugin","notImportItems","PositionDirective","LegendComponent","HostBinding","TdCoreDirective","LiveCellComponent","getDifference","timeoutId","duration","currentValue","previousValue","currencyTemplate","timeTemplate","numberTemplate","textTemplate","LiveColumnComponent","startPos","endPos","currentColumns","previousColumns","animations","moveColumn","to","animationEnd","animationError","startColumn","endColumn","errorIndex","newRect","oldRect","startRect","endRect","abs","animatedCells","animate","onfinish","columnAnimationEnd","finally","LiveRowComponent","currentRows","previousRows","newRowIndex","fadeOutRow","moveRow","oldTr","newTr","animatedRows","animationRowEnd","PagerTargetComponent","PagerComponent","pagerState","DEFAULT_SIDE","paneLayer","PersistencePanelComponent","PersistenceComponent","persistenceState","defaultItem","historyAction","notPersistenceActions","currentModel","entryComponents","ArrayPipe","ConvertPipe","CurrencyPipe","NgCurrencyPipe","currencyCode","digitsInfo","locale","DatePipe","NgDatePipe","timezone","FilterPipe","contained","ItemLabelPipe","DecimalPipe","NumberPipe","TimePipe","TextPipe","ProgressComponent","progressChanged","QueryBuilderModel","QueryBuilderService","converter","WhereSchema","QueryBuilderPanelComponent","nodeService","findLogicalNode","materialize","findUpSibling","serializer","$expression","qb","queryService","findUp","QueryBuilderComponent","QueryBuilderPipe","typeMapping","uniqueView","sortedView","filterView","toggleView","pageView","camelCaseMapping","opExpr","notPlaceholder","visitField","placeholder","exprId","swap","commonOperators","oneToOneCommonOperators","textOperators","numberOperators","oneToOneNumberOperators","oneToOneMapping","labelMapping","suggestFactory","suggest","suggestsFactory","trueResult","suggests","logical","classes","change","ops","operand","getOptions","put","placeholderText","refresh","multiselect","autocomplete","ReferenceEditorComponent","afterSubmit","afterCancel","$default","ReferenceComponent","_model","modelChange","_reference","referenceChange","HttpClient","RestComponent","restState","toPromise","restUrl","restMethod","restSerialize","StatusBarComponent","TabTrapComponent","TabTrapInDirective","tabIndex","traps","isActivating","roundTrip","goRound","TimeDirective","hours","minutes","seconds","ms","TimeModule","RuleComponent","firstChange","ValidationComponent","ValidatorComponent","VisibilityComponent","toolbarBottom","toolbarLeft","toolbarRight","toolbarTop","pinLeft","pinRight","MatChipInput","ChipsDirective","ChipsPushDirective","chipsDirective","inputComponent","chipEnd","inputElement","MatChip","ChipsRemoveDirective","app","ChipsModule","DateAdapter","FormatDateAdapter","DateAdapterDirective","datePipe","adapter","formatAdapter","useFormat","provide","useClass","DateAdapterModule","NativeDateAdapter","displayFormat","MatMenuTrigger","MenuTriggerDirective","openMenu","menuClosed","MenuDirective","MenuModule","MatSelect","SelectDirective","SelectModule","ThemeOverlayDirective","overlayContainer","cssClass","ThemeOverlayModule","ViewEncapsulation","$view_r145","$cell_r144","$cell_r148","$cell_r161","$cell_r165","$cell_r167","$view_r168","$view_r176","$view_r180","$view_r187","$cell_r186","$view_r201","$cell_r200","$view_r214","$cell_r213","$cell_r217","$view_r218","$view_r222","$cell_r221","qGridDate_r230","$view_r228","$cell_r227","_r232","qGridDate_r245","$view_r242","$cell_r241","_r247","qGridTime_r254","$view_r263","$view_r271","$cell_r270","$view_r281","$cell_r280","$view_r293","$cell_r292","$view_r305","$cell_r304","$view_r311","$cell_r310","$view_r316","$cell_r315","$action_r326","$view_r323","$cell_r322","$view_r342","$cell_r341","$cell_r347","$view_r348","qGridTime_r358","$view_r356","$cell_r355","$view_r367","$cell_r366","$editor_r376","$editor_r387","$editor_r390","$editor_r393","$editor_r397","$editor_r409","$editor_r419","$editor_r429","$editor_r433","$editor_r436","$editor_r439","$editor_r443","$editor_r447","$view_r459","$view_r467","$view_r479","qGridDate_r482","$cell_r478","$view_r496","qGridDate_r499","$cell_r495","$view_r513","$view_r525","$view_r540","$view_r541","$action_r558","$editor_r567","_r569","$editor_r578","$editor_r583","_r587","$columnChooser_r593","$context_r600","node_r602","$columnFilter_r611","$by_r617","$columnFilter_r627","$plugin_r628","$vscroll_r629","qGridDate_r661","$columnFilter_r656","_r663","qGridDate_r670","_r672","qGridDate_r683","$columnFilter_r679","_r685","qGridDate_r699","$columnFilter_r692","_r700","qGridTime_r708","_r709","qGridDate_r714","_r715","qGridTime_r723","_r724","qGridDate_r734","$columnFilter_r729","_r736","qGridTime_r743","$columnFilter_r749","_r758","$plugin_r766","$columnFilter_r765","$expr_r783","_r784","_r785","$expr_r794","$expr_r797","$expr_r800","$expr_r805","_r806","$expr_r816","_r828","$trigger_r827","editor_r837","$target_r842","_r845","$pager_r857","item_r882","$persistence_r878","$builder_r905","_r913","$editor_r918","$reference_r923","ThemeComponent","None","MatAutocompleteModule","MatCheckboxModule","MatDatepickerModule","MatDialogModule","MatMenuModule","MatNativeDateModule","MatProgressBarModule","MatRadioModule","MatTooltipModule","MarkupModule","ThemeService","theme","GridLet","TableCoreService","ctx_r10","$vscrollIndex_r9","ctx_r19","$rowIndex_r18","ctx_r15","BodyCoreComponent","$view","$table","scrollSettings","passive","wheel","detach","reattach","attrs","TdCoreAlignDirective","BodyModule","CellClassService","cellClass","toBody","columnView","GridRoot","TrCoreDirective","cellTemplate","addCell","actualLabel","deleteCell","BoxComponent","initTheme","oldName","newName","BoxModule","CellHandlerComponent","updateHandler","updateHandlerFactory","canEditBatch","endBatchEdit","doNotPassAnimation","shouldAnimate","scrollState","headHeight","offsetTop","offsetLeft","editService","startBatch","CellHandlerModule","classify","bodyCache","canBuild","buildId","buildKeys","templateLink","DirtyDirective","ColumnListService","ColumnListComponent","columnListAccessor","generateKey","extract","TemplateCacheService","TemplateLink","ColumnBodyTemplateDirective","templateCache","ColumnEditTemplateDirective","ColumnFootTemplateDirective","ColumnHeadTemplateDirective","ColumnHostService","SkipSelf","ColumnComponent","parentHost","selfHost","withKey","withType","DragDirective","DropDirective","onStart","onEnd","transfer","dataTransfer","eventArg","effectAllowed","srcElement","setData","encode","onEnter","onOver","onLeave","onDrop","inAreaFactory","dropEffect","getPosition","dragOver","offsetX","offsetY","dragDirection","$column_r4","$rowIndex_r2","FootCoreComponent","TfCoreDirective","FootModule","TrhCoreDirective","ScrollService","scrollService","injectLetServicesTo","LayerService","TemplateLinkService","layerService","themeComponent","gridState","editState","groupState","pivotState","firstSetup","docListener","invalidateActive","clickedOutside","visibilityChanged","gridTitle","gridCaption","gridInteractionMode","dataRows","editCancel","editCommit","editEnter","editMethod","editReset","filterUnit","groupMode","groupSummary","selectionItems","selectionArea","scrollMode","sortMode","sortTrigger","labelService","valueService","ScrollModule","ViewModule","numberPipe","currencyPipe","HeadCoreComponent","mouseMove","ThCoreDirective","HeadModule","targetColumn","targetSource","toHead","DisposableCore","LayerCoreComponent","hostVars","hostClass","LayerCoreDirective","init","LayerComponent","Layer","onDestroy","getHostElement","el","MarkupDirective","StopPropagateDirective","eventNames","eventName","needStop","NgxGridLet","$root","serviceLazy","AutoSizeDirective","actualText","emptyWidth","calculateWidth","autoWidth","innerText","whiteSpace","font","fontFamily","lineHeight","ResizeDirective","divider","dragStart","screenX","screenY","dragEnd","RowComponent","rowAccessor","firstClickTarget","dblClickInterval","addRow","deleteRow","VscrollContext","setters","TableCoreComponent","tableHost","TableModule","TemplateCacheDirective","TemplateLinkDirective","TemplateDirective","keyChange","viewRef","check","lookInCache","lookInLink","themeName","ToolbarCoreComponent","ToolbarComponent","ViewCoreComponent","onStable","cmdManager","mouseEnter","mouseUp","mouseDown","asVirtualBody","sizeFactory","VscrollPortYDirective","VscrollColumnDirective","port","getItemSize","ngOnChanges","removeItem","firstIndex","firstSize","VscrollPortXDirective","VscrollMarkDirective","portX","portY","ports","VscrollDirective","VscrollLayout","VscrollLink","findPositionUsingItemSize","findPositionUsingOffsets","recycleFactory","capitalize","contextChange","resetX","itemSize","arm","limitTop","limitBottom","portWidth","pad","recycle","newBox","oldBox","mark","resetY","portHeight","VscrollRowDirective","firstNewIndex","VscrollBox","rAF","VscrollContainer","update$","lastPage","fetchPage","reset$","handled","VscrollSettings","placeholderBitmap","backgroundImage","backgroundRepeat","UNSET_ARM","recycleItemSize","recycleOffsets","pad1","pad2","move","minArm","getOffsets","getArmUsingOffsets","newPosition","getPositionUsingOffsets","viewSize","scrollSize","padSize","getArmUsingItemSize","getPositionUsingItemSize","portSize","getSize","placeholderHeight","placeholderWidth","drawPlaceholder","ticking","draw","VscrollPipe","items$","findIndexAt","round","lastOffset","getCount","getComputedStyle","marginTop","marginBottom","marginLeft","marginRight","canvas","getContext","fillStyle","fillRect","toDataURL"],"sourceRoot":"webpack:///"}